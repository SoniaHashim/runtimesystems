LuaRocks, accessed from https://luarocks.org/
-----------------------
-- BYTECODE -- loader.lua:58-75
0001    UGET     2   0      ; temporary_global
0002    ISF          2
0003    JMP      3 => 0007
0004    KPRI     2   0
0005    GSET     2   0      ; "luarocks"
0006    USETP    0   1      ; temporary_global
0007 => UGET     2   1      ; manif
0008    TGETS    2   2   1  ; "load_rocks_tree_manifests"
0009    CALL     2   2   1
0010    IST          2
0011    JMP      3 => 0014
0012    KPRI     3   0
0013    RET1     3   2
0014 => UGET     3   1      ; manif
0015    TGETS    3   3   2  ; "scan_dependencies"
0016    MOV      4   0
0017    MOV      5   1
0018    MOV      6   2
0019    UGET     7   2      ; loader
0020    TGETS    7   7   3  ; "context"
0021    CALLT    3   5

-- BYTECODE -- loader.lua:81-83
0001    TGETS    2   0   0  ; "version"
0002    TGETS    3   1   0  ; "version"
0003    ISLT     3   2
0004    JMP      2 => 0007
0005    KPRI     2   1
0006    JMP      3 => 0008
0007 => KPRI     2   2
0008 => RET1     2   2

-- BYTECODE -- loader.lua:98-108
0001    UGET     4   0      ; ipairs
0002    UGET     5   1      ; loaders
0003    CALL     4   4   2
0004    JMP      7 => 0022
0005 => UGET     9   2      ; loader
0006    TGETS    9   9   0  ; "luarocks_loader"
0007    ISEQV    8   9
0008    JMP      9 => 0022
0009    TNEW     9   3
0010    MOV     10   8
0011    MOV     11   3
0012    CALL    10   0   2
0013    TSETM   10   0      ; 1
0014    UGET    10   3      ; type
0015    TGETB   11   9   1
0016    CALL    10   2   2
0017    ISNES   10   1      ; "function"
0018    JMP     10 => 0022
0019    UGET    10   4      ; unpack
0020    MOV     11   9
0021    CALLT   10   2
0022 => ITERC    7   3   3
0023    ITERL    7 => 0005
0024    KSTR     4   2      ; "Failed loading module "
0025    MOV      5   0
0026    KSTR     6   3      ; " in LuaRocks rock "
0027    MOV      7   1
0028    KSTR     8   4      ; " "
0029    MOV      9   2
0030    CAT      4   4   9
0031    RET1     4   2

-- BYTECODE -- loader.lua:110-124
0001    UGET     5   0      ; ipairs
0002    MOV      6   1
0003    CALL     5   4   2
0004    JMP      8 => 0068
0005 => MOV     11   9
0006    TGETS   10   9   0  ; "match"
0007    KSTR    12   1      ; "^([^/]*)/(.*)$"
0008    CALL    10   3   3
0009    TGETS   12   2   2  ; "manifest"
0010    TGETS   12  12   3  ; "repository"
0011    TGETV   12  12  10
0012    TGETV   12  12  11
0013    TGETB   12  12   1
0014    TGETS   12  12   4  ; "modules"
0015    TGETV   12  12   3
0016    UGET    13   1      ; type
0017    MOV     14  12
0018    CALL    13   2   2
0019    ISEQS   13   5      ; "string"
0020    JMP     13 => 0037
0021    UGET    13   2      ; error
0022    KSTR    14   6      ; "Invalid data in manifest file for module"~
0023    UGET    15   3      ; tostring
0024    MOV     16   3
0025    CALL    15   2   2
0026    KSTR    16   7      ; " (invalid data for "
0027    UGET    17   3      ; tostring
0028    MOV     18  10
0029    CALL    17   2   2
0030    KSTR    18   8      ; " "
0031    UGET    19   3      ; tostring
0032    MOV     20  11
0033    CALL    19   2   2
0034    KSTR    20   9      ; ")"
0035    CAT     14  14  20
0036    CALL    13   1   2
0037 => MOV     13   4
0038    MOV     14  12
0039    MOV     15  10
0040    MOV     16  11
0041    TGETS   17   2  10  ; "tree"
0042    MOV     18   8
0043    CALL    13   2   6
0044    MOV     12  13
0045    UGET    13   4      ; loader
0046    TGETS   13  13  11  ; "context"
0047    TGETV   13  13  10
0048    ISNEV   13  11
0049    JMP     13 => 0054
0050    MOV     13  10
0051    MOV     14  11
0052    MOV     15  12
0053    RET     13   4
0054 => UGET    13   5      ; vers
0055    TGETS   13  13  12  ; "parse_version"
0056    MOV     14  11
0057    CALL    13   2   2
0058    MOV     11  13
0059    UGET    13   6      ; table
0060    TGETS   13  13  13  ; "insert"
0061    MOV     14   0
0062    TDUP    15  14
0063    TSETS   10  15  15  ; "name"
0064    TSETS   11  15  16  ; "version"
0065    TSETS   12  15  17  ; "module_name"
0066    TSETS    2  15  10  ; "tree"
0067    CALL    13   1   3
0068 => ITERC    8   3   3
0069    ITERL    8 => 0005
0070    RET0     0   1

-- BYTECODE -- loader.lua:138-167
0001    UGET     2   0      ; manif
0002    TGETS    2   2   0  ; "load_rocks_tree_manifests"
0003    CALL     2   2   1
0004    IST          2
0005    JMP      3 => 0008
0006    KPRI     3   0
0007    RET1     3   2
0008 => TNEW     3   0
0009    KPRI     4   0
0010    UGET     5   1      ; ipairs
0011    MOV      6   2
0012    CALL     5   4   2
0013    JMP      8 => 0044
0014 => TGETS   10   9   1  ; "manifest"
0015    TGETS   10  10   2  ; "modules"
0016    TGETV   10  10   0
0017    ISF         10
0018    JMP     11 => 0027
0019    UGET    11   2      ; add_providers
0020    MOV     12   3
0021    MOV     13  10
0022    MOV     14   9
0023    MOV     15   0
0024    MOV     16   1
0025    CALL    11   1   6
0026    JMP     11 => 0044
0027 => IST          4
0028    JMP     11 => 0032
0029    MOV     11   0
0030    KSTR    12   3      ; ".init"
0031    CAT      4  11  12
0032 => TGETS   11   9   1  ; "manifest"
0033    TGETS   11  11   2  ; "modules"
0034    TGETV   10  11   4
0035    ISF         10
0036    JMP     11 => 0044
0037    UGET    11   2      ; add_providers
0038    MOV     12   3
0039    MOV     13  10
0040    MOV     14   9
0041    MOV     15   4
0042    MOV     16   1
0043    CALL    11   1   6
0044 => ITERC    8   3   3
0045    ITERL    8 => 0014
0046    UGET     5   3      ; next
0047    MOV      6   3
0048    CALL     5   2   2
0049    ISF          5
0050    JMP      6 => 0063
0051    UGET     5   4      ; table
0052    TGETS    5   5   4  ; "sort"
0053    MOV      6   3
0054    UGET     7   5      ; sort_versions
0055    CALL     5   1   3
0056    TGETB    5   3   1
0057    TGETS    6   5   5  ; "name"
0058    TGETS    7   5   6  ; "version"
0059    TGETS    7   7   7  ; "string"
0060    TGETS    8   5   8  ; "module_name"
0061    TGETS    9   5   9  ; "tree"
0062    RET      6   5
0063 => RET0     0   1

-- BYTECODE -- loader.lua:178-183
0001    KSHORT   5   1
0002    ISGE     5   4
0003    JMP      5 => 0012
0004    UGET     5   0      ; path
0005    TGETS    5   5   0  ; "versioned_name"
0006    MOV      6   0
0007    KSTR     7   1      ; ""
0008    MOV      8   1
0009    MOV      9   2
0010    CALL     5   2   5
0011    MOV      0   5
0012 => UGET     5   0      ; path
0013    TGETS    5   5   2  ; "path_to_module"
0014    MOV      6   0
0015    CALLT    5   2

-- BYTECODE -- loader.lua:176-184
0001    UGET     1   0      ; select_module
0002    MOV      2   0
0003    FNEW     3   0      ; loader.lua:178
0004    UCLO     0 => 0005
0005 => CALLT    1   3

-- BYTECODE -- loader.lua:190-193
0001    UGET     1   0      ; select_module
0002    MOV      2   0
0003    UGET     3   1      ; path
0004    TGETS    3   3   0  ; "which_i"
0005    CALL     1   4   3
0006    MOV      4   3
0007    MOV      5   1
0008    MOV      6   2
0009    RET      4   4

-- BYTECODE -- loader.lua:204-212
0001    UGET     1   0      ; pick_module
0002    MOV      2   0
0003    CALL     1   4   2
0004    IST          1
0005    JMP      4 => 0011
0006    KSTR     4   0      ; "No LuaRocks module found for "
0007    MOV      5   0
0008    CAT      4   4   5
0009    RET1     4   2
0010    JMP      4 => 0022
0011 => UGET     4   1      ; loader
0012    TGETS    4   4   1  ; "add_context"
0013    MOV      5   1
0014    MOV      6   2
0015    CALL     4   1   3
0016    UGET     4   2      ; call_other_loaders
0017    MOV      5   0
0018    MOV      6   1
0019    MOV      7   2
0020    MOV      8   3
0021    CALLT    4   5
0022 => RET0     0   1

-- BYTECODE -- loader.lua:0-225
0001    GGET     0   0      ; "package"
0002    TGETS    0   0   1  ; "loaders"
0003    IST          0
0004    JMP      1 => 0007
0005    GGET     0   0      ; "package"
0006    TGETS    0   0   2  ; "searchers"
0007 => GGET     1   3      ; "require"
0008    GGET     2   4      ; "ipairs"
0009    GGET     3   5      ; "table"
0010    GGET     4   6      ; "type"
0011    GGET     5   7      ; "next"
0012    GGET     6   8      ; "tostring"
0013    GGET     7   9      ; "error"
0014    GGET     8  10      ; "unpack"
0015    IST          8
0016    JMP      9 => 0018
0017    TGETS    8   3  10  ; "unpack"
0018 => TNEW     9   0
0019    GGET    10   0      ; "package"
0020    TGETS   10  10  11  ; "loaded"
0021    TGETS   10  10  12  ; "luarocks.core.cfg"
0022    NOT     10  10
0023    MOV     11   1
0024    KSTR    12  12      ; "luarocks.core.cfg"
0025    CALL    11   2   2
0026    TGETS   12  11  13  ; "init"
0027    CALL    12   3   1
0028    ISF         12
0029    JMP     14 => 0032
0030    TGETS   14  11  14  ; "init_package_paths"
0031    CALL    14   1   1
0032 => MOV     14   1
0033    KSTR    15  15      ; "luarocks.core.path"
0034    CALL    14   2   2
0035    MOV     15   1
0036    KSTR    16  16      ; "luarocks.core.manif"
0037    CALL    15   2   2
0038    MOV     16   1
0039    KSTR    17  17      ; "luarocks.core.vers"
0040    CALL    16   2   2
0041    KPRI    17   0
0042    KPRI    18   1
0043    GGET    19  18      ; "luarocks"
0044    ISF         19
0045    JMP     20 => 0049
0046    GGET    19  18      ; "luarocks"
0047    TSETS    9  19  19  ; "loader"
0048    JMP     19 => 0064
0049 => GGET    19  20      ; "debug"
0050    TGETS   19  19  21  ; "getinfo"
0051    KSHORT  20   2
0052    KSTR    21  22      ; "nS"
0053    CALL    19   2   3
0054    TGETS   20  19  23  ; "what"
0055    ISNES   20  24      ; "C"
0056    JMP     20 => 0064
0057    TGETS   20  19  25  ; "name"
0058    IST         20
0059    JMP     20 => 0064
0060    TDUP    20  26
0061    TSETS    9  20  19  ; "loader"
0062    GSET    20  18      ; "luarocks"
0063    KPRI    18   2
0064 => TNEW    19   0
0065    TSETS   19   9  27  ; "context"
0066    FNEW    19  29      ; loader.lua:58
0067    TSETS   19   9  28  ; "add_context"
0068    FNEW    19  30      ; loader.lua:81
0069    FNEW    20  31      ; loader.lua:98
0070    FNEW    21  32      ; loader.lua:110
0071    FNEW    22  33      ; loader.lua:138
0072    FNEW    23  34      ; loader.lua:176
0073    FNEW    24  36      ; loader.lua:190
0074    TSETS   24   9  35  ; "which"
0075    FNEW    24  38      ; loader.lua:204
0076    TSETS   24   9  37  ; "luarocks_loader"
0077    TGETS   24   3  39  ; "insert"
0078    MOV     25   0
0079    KSHORT  26   1
0080    TGETS   27   9  37  ; "luarocks_loader"
0081    CALL    24   1   4
0082    ISF         10
0083    JMP     24 => 0101
0084    GGET    24  40      ; "pairs"
0085    GGET    25   0      ; "package"
0086    TGETS   25  25  11  ; "loaded"
0087    CALL    24   4   2
0088    ISNEXT  27 => 0099
0089 => MOV     30  27
0090    TGETS   29  27  41  ; "match"
0091    KSTR    31  42      ; "^luarocks%."
0092    CALL    29   2   3
0093    ISF         29
0094    JMP     30 => 0099
0095    GGET    29   0      ; "package"
0096    TGETS   29  29  11  ; "loaded"
0097    KPRI    30   0
0098    TSETV   30  29  27
0099 => ITERN   27   3   3
0100    ITERL   27 => 0089
0101 => UCLO     0 => 0102
0102 => RET1     9   2

-----------------------
-- BYTECODE -- init.lua:13-23
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "init"
0004    KSTR     4   2      ; "Initialize a directory for a Lua project"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "name"
0012    KSTR     5   6      ; "The project name."
0013    CALL     2   2   4
0014    MOV      3   2
0015    TGETS    2   2   7  ; "args"
0016    KSTR     4   8      ; "?"
0017    CALL     2   1   3
0018    MOV      3   1
0019    TGETS    2   1   4  ; "argument"
0020    KSTR     4   9      ; "version"
0021    KSTR     5  10      ; "An optional project version."
0022    CALL     2   2   4
0023    MOV      3   2
0024    TGETS    2   2   7  ; "args"
0025    KSTR     4   8      ; "?"
0026    CALL     2   1   3
0027    MOV      3   1
0028    TGETS    2   1  11  ; "flag"
0029    KSTR     4  12      ; "--reset"
0030    KSTR     5  13      ; "Delete .luarocks/config-5.x.lua and ./lu"~
0031    CALL     2   1   4
0032    MOV      3   1
0033    TGETS    2   1  14  ; "group"
0034    KSTR     4  15      ; "Options for specifying rockspec data"
0035    UGET     5   1      ; write_rockspec
0036    TGETS    5   5  16  ; "cmd_options"
0037    MOV      6   1
0038    CALL     5   0   2
0039    CALLM    2   1   2
0040    RET0     0   1

-- BYTECODE -- init.lua:25-42
0001    KSTR     1   0      ; ""
0002    GGET     2   1      ; "io"
0003    TGETS    2   2   2  ; "open"
0004    KSTR     3   3      ; ".gitignore"
0005    KSTR     4   4      ; "r"
0006    CALL     2   2   3
0007    ISF          2
0008    JMP      3 => 0021
0009    MOV      4   2
0010    TGETS    3   2   5  ; "read"
0011    KSTR     5   6      ; "*a"
0012    CALL     3   2   3
0013    MOV      1   3
0014    MOV      4   2
0015    TGETS    3   2   7  ; "close"
0016    CALL     3   1   2
0017    KSTR     3   8      ; "\n"
0018    MOV      4   1
0019    KSTR     5   8      ; "\n"
0020    CAT      1   3   5
0021 => GGET     3   1      ; "io"
0022    TGETS    3   3   2  ; "open"
0023    KSTR     4   3      ; ".gitignore"
0024    ISF          1
0025    JMP      5 => 0028
0026    KSTR     5   9      ; "a"
0027    JMP      6 => 0029
0028 => KSTR     5  10      ; "w"
0029 => CALL     3   2   3
0030    MOV      2   3
0031    GGET     3  11      ; "ipairs"
0032    MOV      4   0
0033    CALL     3   4   2
0034    JMP      6 => 0055
0035 => KSTR     8  12      ; "/"
0036    MOV      9   7
0037    CAT      7   8   9
0038    MOV      9   1
0039    TGETS    8   1  13  ; "find"
0040    KSTR    10   8      ; "\n"
0041    MOV     11   7
0042    KSTR    12   8      ; "\n"
0043    CAT     10  10  12
0044    KSHORT  11   1
0045    KPRI    12   2
0046    CALL     8   2   5
0047    IST          8
0048    JMP      8 => 0055
0049    MOV      9   2
0050    TGETS    8   2  14  ; "write"
0051    MOV     10   7
0052    KSTR    11   8      ; "\n"
0053    CAT     10  10  11
0054    CALL     8   1   3
0055 => ITERC    6   3   3
0056    ITERL    6 => 0035
0057    MOV      4   2
0058    TGETS    3   2   7  ; "close"
0059    CALL     3   1   2
0060    RET0     0   1

-- BYTECODE -- init.lua:46-174
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "current_dir"
0003    CALL     1   2   1
0004    TGETS    2   0   1  ; "name"
0005    IST          2
0006    JMP      2 => 0018
0007    UGET     2   1      ; dir
0008    TGETS    2   2   2  ; "base_name"
0009    MOV      3   1
0010    CALL     2   2   2
0011    TSETS    2   0   1  ; "name"
0012    TGETS    2   0   1  ; "name"
0013    ISNES    2   3      ; "/"
0014    JMP      2 => 0018
0015    KPRI     2   0
0016    KSTR     3   4      ; "When running from the root directory, pl"~
0017    RET      2   3
0018 => UGET     2   2      ; util
0019    TGETS    2   2   5  ; "title"
0020    KSTR     3   6      ; "Initializing project '"
0021    TGETS    4   0   1  ; "name"
0022    KSTR     5   7      ; "' for Lua "
0023    UGET     6   3      ; cfg
0024    TGETS    6   6   8  ; "lua_version"
0025    KSTR     7   9      ; " ..."
0026    CAT      3   3   7
0027    CALL     2   1   2
0028    UGET     2   2      ; util
0029    TGETS    2   2  10  ; "printout"
0030    KSTR     3  11      ; "Checking your Lua installation ..."
0031    CALL     2   1   2
0032    UGET     2   3      ; cfg
0033    TGETS    2   2  12  ; "lua_found"
0034    IST          2
0035    JMP      2 => 0039
0036    KPRI     2   0
0037    KSTR     3  13      ; "Lua installation is not found."
0038    RET      2   3
0039 => UGET     2   4      ; deps
0040    TGETS    2   2  14  ; "check_lua_incdir"
0041    UGET     3   3      ; cfg
0042    TGETS    3   3  15  ; "variables"
0043    CALL     2   3   2
0044    IST          2
0045    JMP      4 => 0049
0046    KPRI     4   0
0047    MOV      5   3
0048    RET      4   3
0049 => KPRI     4   1
0050    UGET     5   0      ; fs
0051    TGETS    5   5  16  ; "dir"
0052    CALL     5   4   1
0053    JMP      8 => 0062
0054 => MOV     10   8
0055    TGETS    9   8  17  ; "match"
0056    KSTR    11  18      ; "%.rockspec$"
0057    CALL     9   2   3
0058    ISF          9
0059    JMP     10 => 0062
0060    KPRI     4   2
0061    JMP      5 => 0064
0062 => ITERC    8   2   3
0063    ITERL    8 => 0054
0064 => IST          4
0065    JMP      5 => 0082
0066    TGETS    5   0  19  ; "version"
0067    IST          5
0068    JMP      6 => 0070
0069    KSTR     5  20      ; "dev"
0070 => TSETS    5   0  19  ; "version"
0071    TSETS    1   0  21  ; "location"
0072    UGET     5   5      ; write_rockspec
0073    TGETS    5   5  22  ; "command"
0074    MOV      6   0
0075    CALL     5   3   2
0076    IST          5
0077    JMP      7 => 0082
0078    UGET     7   2      ; util
0079    TGETS    7   7  23  ; "printerr"
0080    MOV      8   6
0081    CALL     7   1   2
0082 => UGET     5   3      ; cfg
0083    TGETS    5   5  24  ; "wrapper_suffix"
0084    KSTR     6  25      ; "luarocks"
0085    MOV      7   5
0086    CAT      6   6   7
0087    KSTR     7  26      ; "lua"
0088    MOV      8   5
0089    CAT      7   7   8
0090    UGET     8   2      ; util
0091    TGETS    8   8  10  ; "printout"
0092    KSTR     9  27      ; "Adding entries to .gitignore ..."
0093    CALL     8   1   2
0094    UGET     8   6      ; write_gitignore
0095    TDUP     9  28
0096    TSETB    6   9   1
0097    TSETB    7   9   2
0098    CALL     8   1   2
0099    UGET     8   2      ; util
0100    TGETS    8   8  10  ; "printout"
0101    KSTR     9  29      ; "Preparing ./.luarocks/ ..."
0102    CALL     8   1   2
0103    UGET     8   0      ; fs
0104    TGETS    8   8  30  ; "make_dir"
0105    KSTR     9  31      ; ".luarocks"
0106    CALL     8   1   2
0107    KSTR     8  32      ; ".luarocks/config-"
0108    UGET     9   3      ; cfg
0109    TGETS    9   9   8  ; "lua_version"
0110    KSTR    10  33      ; ".lua"
0111    CAT      8   8  10
0112    TGETS    9   0  34  ; "reset"
0113    ISF          9
0114    JMP     10 => 0123
0115    UGET     9   0      ; fs
0116    TGETS    9   9  35  ; "delete"
0117    MOV     10   7
0118    CALL     9   1   2
0119    UGET     9   0      ; fs
0120    TGETS    9   9  35  ; "delete"
0121    MOV     10   8
0122    CALL     9   1   2
0123 => UGET     9   7      ; persist
0124    TGETS    9   9  36  ; "load_config_file_if_basic"
0125    MOV     10   8
0126    UGET    11   3      ; cfg
0127    CALL     9   3   3
0128    ISF          9
0129    JMP     11 => 0189
0130    TDUP    11  37
0131    GGET    12  38      ; "ipairs"
0132    MOV     13  11
0133    CALL    12   4   2
0134    JMP     15 => 0142
0135 => UGET    17   3      ; cfg
0136    TGETV   17  17  16
0137    ISF         17
0138    JMP     18 => 0142
0139    UGET    17   3      ; cfg
0140    TGETV   17  17  16
0141    TSETV   17   9  16
0142 => ITERC   15   3   3
0143    ITERL   15 => 0135
0144    TDUP    12  39
0145    GGET    13  38      ; "ipairs"
0146    MOV     14  12
0147    CALL    13   4   2
0148    JMP     16 => 0164
0149 => UGET    18   3      ; cfg
0150    TGETS   18  18  15  ; "variables"
0151    TGETV   18  18  17
0152    ISF         18
0153    JMP     19 => 0164
0154    TGETS   18   9  15  ; "variables"
0155    IST         18
0156    JMP     19 => 0158
0157    TNEW    18   0
0158 => TSETS   18   9  15  ; "variables"
0159    TGETS   18   9  15  ; "variables"
0160    UGET    19   3      ; cfg
0161    TGETS   19  19  15  ; "variables"
0162    TGETV   19  19  17
0163    TSETV   19  18  17
0164 => ITERC   16   3   3
0165    ITERL   16 => 0149
0166    UGET    13   7      ; persist
0167    TGETS   13  13  40  ; "save_from_table"
0168    MOV     14   8
0169    MOV     15   9
0170    CALL    13   3   3
0171    ISF         13
0172    JMP     15 => 0180
0173    UGET    15   2      ; util
0174    TGETS   15  15  10  ; "printout"
0175    KSTR    16  41      ; "Wrote "
0176    MOV     17   8
0177    CAT     16  16  17
0178    CALL    15   1   2
0179    JMP     15 => 0195
0180 => UGET    15   2      ; util
0181    TGETS   15  15  10  ; "printout"
0182    KSTR    16  42      ; "Failed writing "
0183    MOV     17   8
0184    KSTR    18  43      ; ": "
0185    MOV     19  14
0186    CAT     16  16  19
0187    CALL    15   1   2
0188    JMP     11 => 0195
0189 => UGET    11   2      ; util
0190    TGETS   11  11  10  ; "printout"
0191    KSTR    12  44      ; "Will not attempt to overwrite "
0192    MOV     13   8
0193    CAT     12  12  13
0194    CALL    11   1   2
0195 => UGET    11   7      ; persist
0196    TGETS   11  11  45  ; "save_default_lua_version"
0197    KSTR    12  31      ; ".luarocks"
0198    UGET    13   3      ; cfg
0199    TGETS   13  13   8  ; "lua_version"
0200    CALL    11   3   3
0201    MOV     10  12
0202    MOV      2  11
0203    IST          2
0204    JMP     11 => 0211
0205    UGET    11   2      ; util
0206    TGETS   11  11  10  ; "printout"
0207    KSTR    12  46      ; "Failed setting default Lua version: "
0208    MOV     13  10
0209    CAT     12  12  13
0210    CALL    11   1   2
0211 => UGET    11   2      ; util
0212    TGETS   11  11  10  ; "printout"
0213    KSTR    12  47      ; "Preparing ./lua_modules/ ..."
0214    CALL    11   1   2
0215    UGET    11   0      ; fs
0216    TGETS   11  11  30  ; "make_dir"
0217    KSTR    12  48      ; "lua_modules/lib/luarocks/rocks-"
0218    UGET    13   3      ; cfg
0219    TGETS   13  13   8  ; "lua_version"
0220    CAT     12  12  13
0221    CALL    11   1   2
0222    UGET    11   1      ; dir
0223    TGETS   11  11  49  ; "path"
0224    MOV     12   1
0225    KSTR    13  50      ; "lua_modules"
0226    CALL    11   2   3
0227    UGET    12   1      ; dir
0228    TGETS   12  12  49  ; "path"
0229    KSTR    13  51      ; "."
0230    MOV     14   6
0231    CALL    12   2   3
0232    MOV      6  12
0233    UGET    12   0      ; fs
0234    TGETS   12  12  52  ; "exists"
0235    MOV     13   6
0236    CALL    12   2   2
0237    IST         12
0238    JMP     12 => 0257
0239    UGET    12   2      ; util
0240    TGETS   12  12  10  ; "printout"
0241    KSTR    13  53      ; "Preparing "
0242    MOV     14   6
0243    KSTR    15   9      ; " ..."
0244    CAT     13  13  15
0245    CALL    12   1   2
0246    UGET    12   0      ; fs
0247    TGETS   12  12  54  ; "wrap_script"
0248    GGET    13  55      ; "arg"
0249    TGETB   13  13   0
0250    KSTR    14  25      ; "luarocks"
0251    KSTR    15  56      ; "none"
0252    KNIL    16  17
0253    KSTR    18  57      ; "--project-tree"
0254    MOV     19  11
0255    CALL    12   1   8
0256    JMP     12 => 0263
0257 => UGET    12   2      ; util
0258    TGETS   12  12  10  ; "printout"
0259    MOV     13   6
0260    KSTR    14  58      ; " already exists. Not overwriting it!"
0261    CAT     13  13  14
0262    CALL    12   1   2
0263 => UGET    12   1      ; dir
0264    TGETS   12  12  49  ; "path"
0265    KSTR    13  51      ; "."
0266    MOV     14   7
0267    CALL    12   2   3
0268    MOV      7  12
0269    KPRI    12   2
0270    UGET    13   0      ; fs
0271    TGETS   13  13  52  ; "exists"
0272    MOV     14   7
0273    CALL    13   2   2
0274    ISF         13
0275    JMP     14 => 0289
0276    UGET    13   2      ; util
0277    TGETS   13  13  59  ; "lua_is_wrapper"
0278    MOV     14   7
0279    CALL    13   2   2
0280    IST         13
0281    JMP     13 => 0289
0282    UGET    13   2      ; util
0283    TGETS   13  13  10  ; "printout"
0284    MOV     14   7
0285    KSTR    15  60      ; " already exists and does not look like a"~
0286    CAT     14  14  15
0287    CALL    13   1   2
0288    KPRI    12   1
0289 => ISF         12
0290    JMP     13 => 0337
0291    UGET    13   1      ; dir
0292    TGETS   13  13  49  ; "path"
0293    UGET    14   3      ; cfg
0294    TGETS   14  14  15  ; "variables"
0295    TGETS   14  14  61  ; "LUA_BINDIR"
0296    UGET    15   3      ; cfg
0297    TGETS   15  15  62  ; "lua_interpreter"
0298    CALL    13   2   3
0299    UGET    14   2      ; util
0300    TGETS   14  14  63  ; "check_lua_version"
0301    MOV     15  13
0302    UGET    16   3      ; cfg
0303    TGETS   16  16   8  ; "lua_version"
0304    CALL    14   2   3
0305    ISF         14
0306    JMP     15 => 0328
0307    UGET    14   2      ; util
0308    TGETS   14  14  10  ; "printout"
0309    KSTR    15  53      ; "Preparing "
0310    MOV     16   7
0311    KSTR    17  64      ; " for version "
0312    UGET    18   3      ; cfg
0313    TGETS   18  18   8  ; "lua_version"
0314    KSTR    19  65      ; "..."
0315    CAT     15  15  19
0316    CALL    14   1   2
0317    UGET    14   8      ; path
0318    TGETS   14  14  66  ; "use_tree"
0319    MOV     15  11
0320    CALL    14   1   2
0321    UGET    14   0      ; fs
0322    TGETS   14  14  54  ; "wrap_script"
0323    KPRI    15   0
0324    KSTR    16  26      ; "lua"
0325    KSTR    17  67      ; "all"
0326    CALL    14   1   4
0327    JMP     14 => 0337
0328 => UGET    14   2      ; util
0329    TGETS   14  14  68  ; "warning"
0330    KSTR    15  69      ; "No Lua interpreter detected for version "
0331    UGET    16   3      ; cfg
0332    TGETS   16  16   8  ; "lua_version"
0333    KSTR    17  70      ; ". Not creating "
0334    MOV     18   7
0335    CAT     15  15  18
0336    CALL    14   1   2
0337 => KPRI    13   2
0338    RET1    13   2

-- BYTECODE -- init.lua:0-177
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fs"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.path"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.deps"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.dir"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.util"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.persist"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.cmd.write_rockspec"
0025    CALL     8   2   2
0026    FNEW     9  10      ; init.lua:13
0027    TSETS    9   0   9  ; "add_to_parser"
0028    FNEW     9  11      ; init.lua:25
0029    FNEW    10  13      ; init.lua:46
0030    TSETS   10   0  12  ; "command"
0031    UCLO     0 => 0032
0032 => RET1     0   2

-----------------------
-- BYTECODE -- install.lua:19-51
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "install"
0004    KSTR     4   2      ; "Install a rock."
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "rock"
0012    KSTR     5   6      ; "The name of a rock to be fetched from a "~
0013    KSTR     6   7      ; "or a filename of a locally available roc"~
0014    CAT      5   5   6
0015    CALL     2   2   4
0016    MOV      3   2
0017    TGETS    2   2   8  ; "action"
0018    UGET     4   0      ; util
0019    TGETS    4   4   9  ; "namespaced_name_action"
0020    CALL     2   1   3
0021    MOV      3   1
0022    TGETS    2   1   4  ; "argument"
0023    KSTR     4  10      ; "version"
0024    KSTR     5  11      ; "Version of the rock."
0025    CALL     2   2   4
0026    MOV      3   2
0027    TGETS    2   2  12  ; "args"
0028    KSTR     4  13      ; "?"
0029    CALL     2   1   3
0030    MOV      3   1
0031    TGETS    2   1  14  ; "flag"
0032    KSTR     4  15      ; "--keep"
0033    KSTR     5  16      ; "Do not remove previously installed versi"~
0034    KSTR     6  17      ; "rock after building a new one. This beha"~
0035    KSTR     7  18      ; "setting keep_other_versions=true in the "~
0036    CAT      5   5   7
0037    CALL     2   1   4
0038    MOV      3   1
0039    TGETS    2   1  14  ; "flag"
0040    KSTR     4  19      ; "--force"
0041    KSTR     5  20      ; "If --keep is not specified, force remova"~
0042    KSTR     6  21      ; "previously installed versions if it woul"~
0043    CAT      5   5   6
0044    CALL     2   1   4
0045    MOV      3   1
0046    TGETS    2   1  14  ; "flag"
0047    KSTR     4  22      ; "--force-fast"
0048    KSTR     5  23      ; "Like --force, but performs a forced remo"~
0049    KSTR     6  24      ; "without reporting dependency issues."
0050    CAT      5   5   6
0051    CALL     2   1   4
0052    MOV      3   1
0053    TGETS    2   1  14  ; "flag"
0054    KSTR     4  25      ; "--only-deps"
0055    KSTR     5  26      ; "Install only the dependencies of the roc"~
0056    CALL     2   1   4
0057    MOV      3   1
0058    TGETS    2   1  14  ; "flag"
0059    KSTR     4  27      ; "--no-doc"
0060    KSTR     5  28      ; "Install the rock without its documentati"~
0061    CALL     2   1   4
0062    MOV      3   1
0063    TGETS    2   1  14  ; "flag"
0064    KSTR     4  29      ; "--verify"
0065    KSTR     5  30      ; "Verify signature of the rockspec or src."~
0066    KSTR     6  31      ; "built. If the rockspec or src.rock is be"~
0067    KSTR     7  32      ; "attempt to download the signature as wel"~
0068    KSTR     8  33      ; "file should be already available locally"~
0069    KSTR     9  34      ; "You need the signer’s public key in yo"~
0070    KSTR    10  35      ; "option to work properly."
0071    CAT      5   5  10
0072    CALL     2   1   4
0073    MOV      3   1
0074    TGETS    2   1  14  ; "flag"
0075    KSTR     4  36      ; "--check-lua-versions"
0076    KSTR     5  37      ; "If the rock can't be found, check reposi"~
0077    KSTR     6  38      ; "and report if it is available for anothe"~
0078    CAT      5   5   6
0079    CALL     2   1   4
0080    UGET     2   0      ; util
0081    TGETS    2   2  39  ; "deps_mode_option"
0082    MOV      3   1
0083    CALL     2   1   2
0084    MOV      3   1
0085    TGETS    2   1  14  ; "flag"
0086    KSTR     4  40      ; "--no-manifest"
0087    KSTR     5  41      ; "Skip creating/updating the manifest"
0088    CALL     2   1   4
0089    MOV      3   0
0090    TGETS    2   0  14  ; "flag"
0091    KSTR     4  42      ; "--pack-binary-rock"
0092    CALL     2   2   3
0093    MOV      3   2
0094    TGETS    2   2  43  ; "hidden"
0095    KPRI     4   2
0096    CALL     2   1   3
0097    MOV      3   0
0098    TGETS    2   0  44  ; "option"
0099    KSTR     4  45      ; "--branch"
0100    CALL     2   2   3
0101    MOV      3   2
0102    TGETS    2   2  43  ; "hidden"
0103    KPRI     4   2
0104    CALL     2   1   3
0105    MOV      3   0
0106    TGETS    2   0  14  ; "flag"
0107    KSTR     4  46      ; "--sign"
0108    CALL     2   2   3
0109    MOV      3   2
0110    TGETS    2   2  43  ; "hidden"
0111    KPRI     4   2
0112    CALL     2   1   3
0113    RET0     0   1

-- BYTECODE -- install.lua:89-92
0001    UGET     0   0      ; fs
0002    TGETS    0   0   0  ; "delete"
0003    UGET     1   1      ; install_dir
0004    CALL     0   1   2
0005    UGET     0   0      ; fs
0006    TGETS    0   0   1  ; "remove_dir_if_empty"
0007    UGET     1   2      ; path
0008    TGETS    1   1   2  ; "versions_dir"
0009    UGET     2   3      ; name
0010    CALL     1   0   2
0011    CALLM    0   1   0
0012    RET0     0   1

-- BYTECODE -- install.lua:127-129
0001    UGET     0   0      ; repos
0002    TGETS    0   0   0  ; "delete_version"
0003    UGET     1   1      ; name
0004    UGET     2   2      ; version
0005    UGET     3   3      ; deps_mode
0006    CALL     0   1   4
0007    RET0     0   1

-- BYTECODE -- install.lua:68-137
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    MOV      4   1
0013    TGETS    3   1   1  ; "type"
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "install.opts"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    TGETS    2   1   4  ; "namespace"
0022    TGETS    3   1   5  ; "deps_mode"
0023    UGET     4   0      ; path
0024    TGETS    4   4   6  ; "parse_name"
0025    MOV      5   0
0026    CALL     4   4   2
0027    IST          4
0028    JMP      7 => 0035
0029    KPRI     7   0
0030    KSTR     8   7      ; "Filename "
0031    MOV      9   0
0032    KSTR    10   8      ; " does not match format 'name-version-rev"~
0033    CAT      8   8  10
0034    UCLO     0 => 0228
0035 => ISEQS    6   9      ; "all"
0036    JMP      7 => 0047
0037    UGET     7   1      ; cfg
0038    TGETS    7   7  10  ; "arch"
0039    ISEQV    6   7
0040    JMP      7 => 0047
0041    KPRI     7   0
0042    KSTR     8  11      ; "Incompatible architecture "
0043    MOV      9   6
0044    CAT      8   8   9
0045    KSTR     9  10      ; "arch"
0046    UCLO     0 => 0229
0047 => UGET     7   2      ; repos
0048    TGETS    7   7  12  ; "is_installed"
0049    MOV      8   4
0050    MOV      9   5
0051    CALL     7   2   3
0052    ISF          7
0053    JMP      8 => 0060
0054    UGET     7   2      ; repos
0055    TGETS    7   7  13  ; "delete_version"
0056    MOV      8   4
0057    MOV      9   5
0058    TGETS   10   1   5  ; "deps_mode"
0059    CALL     7   1   4
0060 => UGET     7   0      ; path
0061    TGETS    7   7  14  ; "install_dir"
0062    MOV      8   4
0063    MOV      9   5
0064    CALL     7   2   3
0065    UGET     8   3      ; util
0066    TGETS    8   8  15  ; "schedule_function"
0067    FNEW     9  16      ; install.lua:89
0068    CALL     8   2   2
0069    UGET     9   5      ; fetch
0070    TGETS    9   9  17  ; "fetch_and_unpack_rock"
0071    MOV     10   0
0072    MOV     11   7
0073    TGETS   12   1  18  ; "verify"
0074    CALL     9   4   4
0075    IST          9
0076    JMP     12 => 0082
0077    KPRI    12   0
0078    MOV     13  10
0079    MOV     14  11
0080    UCLO     0 => 0081
0081 => RET     12   4
0082 => UGET    12   5      ; fetch
0083    TGETS   12  12  19  ; "load_rockspec"
0084    UGET    13   0      ; path
0085    TGETS   13  13  20  ; "rockspec_file"
0086    MOV     14   4
0087    MOV     15   5
0088    CALL    13   0   3
0089    CALLM   12   3   0
0090    ISF         13
0091    JMP     14 => 0099
0092    KPRI    14   0
0093    KSTR    15  21      ; "Failed loading rockspec for installed pa"~
0094    MOV     16  13
0095    CAT     15  15  16
0096    MOV     16  11
0097    UCLO     0 => 0098
0098 => RET     14   4
0099 => TGETS   14   1   5  ; "deps_mode"
0100    ISEQS   14  22      ; "none"
0101    JMP     14 => 0117
0102    UGET    14   6      ; deps
0103    TGETS   14  14  23  ; "check_external_deps"
0104    MOV     15  12
0105    KSTR    16  24      ; "install"
0106    CALL    14   4   3
0107    MOV     11  16
0108    MOV     13  15
0109    MOV      9  14
0110    ISF         13
0111    JMP     14 => 0117
0112    KPRI    14   0
0113    MOV     15  13
0114    MOV     16  11
0115    UCLO     0 => 0116
0116 => RET     14   4
0117 => UGET    14   4      ; fs
0118    TGETS   14  14  25  ; "exists"
0119    UGET    15   0      ; path
0120    TGETS   15  15  26  ; "rock_manifest_file"
0121    MOV     16   4
0122    MOV     17   5
0123    CALL    15   0   3
0124    CALLM   14   2   0
0125    IST         14
0126    JMP     14 => 0140
0127    UGET    14   7      ; writer
0128    TGETS   14  14  27  ; "make_rock_manifest"
0129    MOV     15   4
0130    MOV     16   5
0131    CALL    14   3   3
0132    MOV     13  15
0133    MOV      9  14
0134    ISF         13
0135    JMP     14 => 0140
0136    KPRI    14   0
0137    MOV     15  13
0138    UCLO     0 => 0139
0139 => RET     14   3
0140 => ISF          2
0141    JMP     14 => 0156
0142    UGET    14   7      ; writer
0143    TGETS   14  14  28  ; "make_namespace_file"
0144    MOV     15   4
0145    MOV     16   5
0146    MOV     17   2
0147    CALL    14   3   4
0148    MOV     13  15
0149    MOV      9  14
0150    ISF         13
0151    JMP     14 => 0156
0152    KPRI    14   0
0153    MOV     15  13
0154    UCLO     0 => 0155
0155 => RET     14   3
0156 => ISEQS    3  22      ; "none"
0157    JMP     14 => 0176
0158    UGET    14   6      ; deps
0159    TGETS   14  14  29  ; "fulfill_dependencies"
0160    MOV     15  12
0161    KSTR    16  30      ; "dependencies"
0162    MOV     17   3
0163    TGETS   18   1  18  ; "verify"
0164    MOV     19   7
0165    CALL    14   4   6
0166    MOV     11  16
0167    MOV     13  15
0168    MOV      9  14
0169    ISF         13
0170    JMP     14 => 0176
0171    KPRI    14   0
0172    MOV     15  13
0173    MOV     16  11
0174    UCLO     0 => 0175
0175 => RET     14   4
0176 => UGET    14   2      ; repos
0177    TGETS   14  14  31  ; "deploy_files"
0178    MOV     15   4
0179    MOV     16   5
0180    UGET    17   2      ; repos
0181    TGETS   17  17  32  ; "should_wrap_bin_scripts"
0182    MOV     18  12
0183    CALL    17   2   2
0184    MOV     18   3
0185    CALL    14   3   5
0186    MOV     13  15
0187    MOV      9  14
0188    ISF         13
0189    JMP     14 => 0194
0190    KPRI    14   0
0191    MOV     15  13
0192    UCLO     0 => 0193
0193 => RET     14   3
0194 => UGET    14   3      ; util
0195    TGETS   14  14  33  ; "remove_scheduled_function"
0196    MOV     15   8
0197    CALL    14   1   2
0198    UGET    14   3      ; util
0199    TGETS   14  14  15  ; "schedule_function"
0200    FNEW    15  34      ; install.lua:127
0201    CALL    14   2   2
0202    MOV      8  14
0203    UGET    14   2      ; repos
0204    TGETS   14  14  35  ; "run_hook"
0205    MOV     15  12
0206    KSTR    16  36      ; "post_install"
0207    CALL    14   3   3
0208    MOV     13  15
0209    MOV      9  14
0210    ISF         13
0211    JMP     14 => 0216
0212    KPRI    14   0
0213    MOV     15  13
0214    UCLO     0 => 0215
0215 => RET     14   3
0216 => UGET    14   3      ; util
0217    TGETS   14  14  37  ; "announce_install"
0218    MOV     15  12
0219    CALL    14   1   2
0220    UGET    14   3      ; util
0221    TGETS   14  14  33  ; "remove_scheduled_function"
0222    MOV     15   8
0223    CALL    14   1   2
0224    MOV     14   4
0225    MOV     15   5
0226    UCLO     0 => 0227
0227 => RET     14   3
0228 => RET      7   3
0229 => RET      7   4

-- BYTECODE -- install.lua:145-175
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    MOV      4   1
0013    TGETS    3   1   1  ; "type"
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "install.opts"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    UGET     2   0      ; path
0022    TGETS    2   2   4  ; "parse_name"
0023    MOV      3   0
0024    CALL     2   4   2
0025    IST          2
0026    JMP      5 => 0033
0027    KPRI     5   0
0028    KSTR     6   5      ; "Filename "
0029    MOV      7   0
0030    KSTR     8   6      ; " does not match format 'name-version-rev"~
0031    CAT      6   6   8
0032    RET      5   3
0033 => ISEQS    4   7      ; "all"
0034    JMP      5 => 0045
0035    UGET     5   1      ; cfg
0036    TGETS    5   5   8  ; "arch"
0037    ISEQV    4   5
0038    JMP      5 => 0045
0039    KPRI     5   0
0040    KSTR     6   9      ; "Incompatible architecture "
0041    MOV      7   4
0042    CAT      6   6   7
0043    KSTR     7   8      ; "arch"
0044    RET      5   4
0045 => UGET     5   0      ; path
0046    TGETS    5   5  10  ; "install_dir"
0047    MOV      6   2
0048    MOV      7   3
0049    CALL     5   2   3
0050    UGET     6   2      ; fetch
0051    TGETS    6   6  11  ; "fetch_and_unpack_rock"
0052    MOV      7   0
0053    MOV      8   5
0054    TGETS    9   1  12  ; "verify"
0055    CALL     6   4   4
0056    IST          6
0057    JMP      9 => 0062
0058    KPRI     9   0
0059    MOV     10   7
0060    MOV     11   8
0061    RET      9   4
0062 => UGET     9   2      ; fetch
0063    TGETS    9   9  13  ; "load_rockspec"
0064    UGET    10   0      ; path
0065    TGETS   10  10  14  ; "rockspec_file"
0066    MOV     11   2
0067    MOV     12   3
0068    CALL    10   0   3
0069    CALLM    9   3   0
0070    ISF         10
0071    JMP     11 => 0078
0072    KPRI    11   0
0073    KSTR    12  15      ; "Failed loading rockspec for installed pa"~
0074    MOV     13  10
0075    CAT     12  12  13
0076    MOV     13   8
0077    RET     11   4
0078 => UGET    11   3      ; deps
0079    TGETS   11  11  16  ; "fulfill_dependencies"
0080    MOV     12   9
0081    KSTR    13  17      ; "dependencies"
0082    TGETS   14   1  18  ; "deps_mode"
0083    TGETS   15   1  12  ; "verify"
0084    MOV     16   5
0085    CALL    11   4   6
0086    MOV      8  13
0087    MOV     10  12
0088    MOV      6  11
0089    ISF         10
0090    JMP     11 => 0095
0091    KPRI    11   0
0092    MOV     12  10
0093    MOV     13   8
0094    RET     11   4
0095 => UGET    11   4      ; util
0096    TGETS   11  11  19  ; "printout"
0097    CALL    11   1   1
0098    UGET    11   4      ; util
0099    TGETS   11  11  19  ; "printout"
0100    KSTR    12  20      ; "Successfully installed dependencies for "
0101    MOV     13   2
0102    KSTR    14  21      ; " "
0103    MOV     15   3
0104    CAT     12  12  15
0105    CALL    11   1   2
0106    MOV     11   2
0107    MOV     12   3
0108    RET     11   3

-- BYTECODE -- install.lua:177-185
0001    GGET     2   0      ; "assert"
0002    MOV      4   1
0003    TGETS    3   1   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "install.opts"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    UGET     2   0      ; install
0012    TGETS    2   2   3  ; "install_binary_rock_deps"
0013    MOV      3   0
0014    MOV      4   1
0015    CALL     2   3   3
0016    IST          2
0017    JMP      4 => 0021
0018    KPRI     4   0
0019    MOV      5   3
0020    RET      4   3
0021 => UGET     4   1      ; writer
0022    TGETS    4   4   4  ; "check_dependencies"
0023    KPRI     5   0
0024    TGETS    6   1   5  ; "deps_mode"
0025    CALL     4   1   3
0026    MOV      4   2
0027    MOV      5   3
0028    RET      4   3

-- BYTECODE -- install.lua:187-205
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    MOV      4   1
0013    TGETS    3   1   1  ; "type"
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "install.opts"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    UGET     2   0      ; install
0022    TGETS    2   2   4  ; "install_binary_rock"
0023    MOV      3   0
0024    MOV      4   1
0025    CALL     2   3   3
0026    IST          2
0027    JMP      4 => 0031
0028    KPRI     4   0
0029    MOV      5   3
0030    RET      4   3
0031 => TGETS    4   1   5  ; "no_doc"
0032    ISF          4
0033    JMP      5 => 0039
0034    UGET     4   1      ; util
0035    TGETS    4   4   6  ; "remove_doc_dir"
0036    MOV      5   2
0037    MOV      6   3
0038    CALL     4   1   3
0039 => TGETS    4   1   7  ; "keep"
0040    IST          4
0041    JMP      4 => 0059
0042    UGET     4   2      ; cfg
0043    TGETS    4   4   8  ; "keep_other_versions"
0044    IST          4
0045    JMP      4 => 0059
0046    UGET     4   3      ; remove
0047    TGETS    4   4   9  ; "remove_other_versions"
0048    MOV      5   2
0049    MOV      6   3
0050    TGETS    7   1  10  ; "force"
0051    TGETS    8   1  11  ; "force_fast"
0052    CALL     4   3   5
0053    IST          4
0054    JMP      6 => 0059
0055    UGET     6   1      ; util
0056    TGETS    6   6  12  ; "printerr"
0057    MOV      7   5
0058    CALL     6   1   2
0059 => UGET     4   4      ; writer
0060    TGETS    4   4  13  ; "check_dependencies"
0061    KPRI     5   0
0062    TGETS    6   1  14  ; "deps_mode"
0063    CALL     4   1   3
0064    MOV      4   2
0065    MOV      5   3
0066    RET      4   3

-- BYTECODE -- install.lua:215-249
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "check_command_permissions"
0003    MOV      2   0
0004    CALL     1   3   2
0005    IST          1
0006    JMP      3 => 0013
0007    KPRI     3   0
0008    MOV      4   2
0009    UGET     5   1      ; cmd
0010    TGETS    5   5   1  ; "errorcodes"
0011    TGETS    5   5   2  ; "PERMISSIONDENIED"
0012    RET      3   4
0013 => TGETS    3   0   3  ; "rock"
0014    MOV      4   3
0015    TGETS    3   3   4  ; "match"
0016    KSTR     5   5      ; "%.rockspec$"
0017    CALL     3   2   3
0018    IST          3
0019    JMP      4 => 0027
0020    TGETS    3   0   3  ; "rock"
0021    MOV      4   3
0022    TGETS    3   3   4  ; "match"
0023    KSTR     5   6      ; "%.src%.rock$"
0024    CALL     3   2   3
0025    ISF          3
0026    JMP      4 => 0034
0027 => GGET     3   7      ; "require"
0028    KSTR     4   8      ; "luarocks.cmd.build"
0029    CALL     3   2   2
0030    TGETS    4   3   9  ; "command"
0031    MOV      5   0
0032    CALLT    4   2
0033    JMP      3 => 0111
0034 => TGETS    3   0   3  ; "rock"
0035    MOV      4   3
0036    TGETS    3   3   4  ; "match"
0037    KSTR     5  10      ; "%.rock$"
0038    CALL     3   2   3
0039    ISF          3
0040    JMP      4 => 0085
0041    UGET     3   2      ; deps
0042    TGETS    3   3  11  ; "get_deps_mode"
0043    MOV      4   0
0044    CALL     3   2   2
0045    UGET     4   3      ; install
0046    TGETS    4   4  12  ; "opts"
0047    TDUP     5  14
0048    TGETS    6   0  13  ; "namespace"
0049    TSETS    6   5  13  ; "namespace"
0050    TGETS    6   0  15  ; "keep"
0051    NOT      6   6
0052    NOT      6   6
0053    TSETS    6   5  15  ; "keep"
0054    TGETS    6   0  16  ; "force"
0055    NOT      6   6
0056    NOT      6   6
0057    TSETS    6   5  16  ; "force"
0058    TGETS    6   0  17  ; "force_fast"
0059    NOT      6   6
0060    NOT      6   6
0061    TSETS    6   5  17  ; "force_fast"
0062    TGETS    6   0  18  ; "no_doc"
0063    NOT      6   6
0064    NOT      6   6
0065    TSETS    6   5  18  ; "no_doc"
0066    TSETS    3   5  19  ; "deps_mode"
0067    TGETS    6   0  20  ; "verify"
0068    NOT      6   6
0069    NOT      6   6
0070    TSETS    6   5  20  ; "verify"
0071    CALL     4   2   2
0072    TGETS    5   0  21  ; "only_deps"
0073    ISF          5
0074    JMP      6 => 0080
0075    UGET     5   4      ; install_rock_file_deps
0076    TGETS    6   0   3  ; "rock"
0077    MOV      7   4
0078    CALLT    5   3
0079    JMP      5 => 0111
0080 => UGET     5   5      ; install_rock_file
0081    TGETS    6   0   3  ; "rock"
0082    MOV      7   4
0083    CALLT    5   3
0084    JMP      3 => 0111
0085 => UGET     3   6      ; search
0086    TGETS    3   3  22  ; "find_rock_checking_lua_versions"
0087    UGET     4   7      ; queries
0088    TGETS    4   4  23  ; "new"
0089    TGETS    5   0   3  ; "rock"
0090    TGETS    6   0  13  ; "namespace"
0091    TGETS    7   0  24  ; "version"
0092    CALL     4   2   4
0093    TGETS    5   0  25  ; "check_lua_versions"
0094    CALL     3   3   3
0095    IST          3
0096    JMP      5 => 0100
0097    KPRI     5   0
0098    MOV      6   4
0099    RET      5   3
0100 => UGET     5   8      ; util
0101    TGETS    5   5  26  ; "printout"
0102    KSTR     6  27      ; "Installing "
0103    MOV      7   3
0104    CAT      6   6   7
0105    CALL     5   1   2
0106    TSETS    3   0   3  ; "rock"
0107    UGET     5   3      ; install
0108    TGETS    5   5   9  ; "command"
0109    MOV      6   0
0110    CALLT    5   2
0111 => RET0     0   1

-- BYTECODE -- install.lua:0-252
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.path"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.repos"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fetch"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.util"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.deps"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.manif.writer"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.remove"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.search"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.queries"
0031    CALL    10   2   2
0032    GGET    11   0      ; "require"
0033    KSTR    12  11      ; "luarocks.core.cfg"
0034    CALL    11   2   2
0035    GGET    12   0      ; "require"
0036    KSTR    13  12      ; "luarocks.cmd"
0037    CALL    12   2   2
0038    GGET    13   0      ; "require"
0039    KSTR    14  13      ; "luarocks.dir"
0040    CALL    13   2   2
0041    FNEW    14  15      ; install.lua:19
0042    TSETS   14   0  14  ; "add_to_parser"
0043    TGETS   14   4  17  ; "opts_table"
0044    KSTR    15  18      ; "install.opts"
0045    TDUP    16  19
0046    CALL    14   2   3
0047    TSETS   14   0  16  ; "opts"
0048    FNEW    14  21      ; install.lua:68
0049    TSETS   14   0  20  ; "install_binary_rock"
0050    FNEW    14  23      ; install.lua:145
0051    TSETS   14   0  22  ; "install_binary_rock_deps"
0052    FNEW    14  24      ; install.lua:177
0053    FNEW    15  25      ; install.lua:187
0054    FNEW    16  27      ; install.lua:215
0055    TSETS   16   0  26  ; "command"
0056    UCLO     0 => 0057
0057 => RET1     0   2

-----------------------
-- BYTECODE -- make.lua:20-45
0001    MOV      2   0
0002    TGETS    1   0   0  ; "flag"
0003    KSTR     3   1      ; "--no-doc"
0004    KSTR     4   2      ; "Install the rock without its documentati"~
0005    CALL     1   1   4
0006    MOV      2   0
0007    TGETS    1   0   0  ; "flag"
0008    KSTR     3   3      ; "--pack-binary-rock"
0009    KSTR     4   4      ; "Do not install rock. Instead, produce a "
0010    KSTR     5   5      ; ".rock file with the contents of compilat"~
0011    CAT      4   4   5
0012    CALL     1   1   4
0013    MOV      2   0
0014    TGETS    1   0   0  ; "flag"
0015    KSTR     3   6      ; "--keep"
0016    KSTR     4   7      ; "Do not remove previously installed versi"~
0017    KSTR     5   8      ; "rock after building a new one. This beha"~
0018    KSTR     6   9      ; "setting keep_other_versions=true in the "~
0019    CAT      4   4   6
0020    CALL     1   1   4
0021    MOV      2   0
0022    TGETS    1   0   0  ; "flag"
0023    KSTR     3  10      ; "--force"
0024    KSTR     4  11      ; "If --keep is not specified, force remova"~
0025    KSTR     5  12      ; "previously installed versions if it woul"~
0026    CAT      4   4   5
0027    CALL     1   1   4
0028    MOV      2   0
0029    TGETS    1   0   0  ; "flag"
0030    KSTR     3  13      ; "--force-fast"
0031    KSTR     4  14      ; "Like --force, but performs a forced remo"~
0032    KSTR     5  15      ; "without reporting dependency issues."
0033    CAT      4   4   5
0034    CALL     1   1   4
0035    MOV      2   0
0036    TGETS    1   0   0  ; "flag"
0037    KSTR     3  16      ; "--verify"
0038    KSTR     4  17      ; "Verify signature of the rockspec or src."~
0039    KSTR     5  18      ; "built. If the rockspec or src.rock is be"~
0040    KSTR     6  19      ; "attempt to download the signature as wel"~
0041    KSTR     7  20      ; "file should be already available locally"~
0042    KSTR     8  21      ; "You need the signer’s public key in yo"~
0043    KSTR     9  22      ; "option to work properly."
0044    CAT      4   4   9
0045    CALL     1   1   4
0046    MOV      2   0
0047    TGETS    1   0   0  ; "flag"
0048    KSTR     3  23      ; "--sign"
0049    KSTR     4  24      ; "To be used with --pack-binary-rock. Also"~
0050    KSTR     5  25      ; "signature file for the generated .rock f"~
0051    CAT      4   4   5
0052    CALL     1   1   4
0053    MOV      2   0
0054    TGETS    1   0   0  ; "flag"
0055    KSTR     3  26      ; "--check-lua-versions"
0056    KSTR     4  27      ; "If the rock can't be found, check reposi"~
0057    KSTR     5  28      ; "and report if it is available for anothe"~
0058    CAT      4   4   5
0059    CALL     1   1   4
0060    MOV      2   0
0061    TGETS    1   0   0  ; "flag"
0062    KSTR     3  29      ; "--pin"
0063    KSTR     4  30      ; "Pin the exact dependencies used for the "~
0064    KSTR     5  31      ; "being built into a luarocks.lock file in"~
0065    CAT      4   4   5
0066    CALL     1   1   4
0067    MOV      2   0
0068    TGETS    1   0   0  ; "flag"
0069    KSTR     3  32      ; "--no-manifest"
0070    KSTR     4  33      ; "Skip creating/updating the manifest"
0071    CALL     1   1   4
0072    UGET     1   0      ; util
0073    TGETS    1   1  34  ; "deps_mode_option"
0074    MOV      2   0
0075    CALL     1   1   2
0076    RET0     0   1

-- BYTECODE -- make.lua:47-74
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "make"
0004    KSTR     4   2      ; "Builds sources in the current directory,"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Compile package in current directory usi"~
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "argument"
0015    KSTR     4   7      ; "rockspec"
0016    KSTR     5   8      ; "Rockspec for the rock to build."
0017    CALL     2   2   4
0018    MOV      3   2
0019    TGETS    2   2   9  ; "args"
0020    KSTR     4  10      ; "?"
0021    CALL     2   1   3
0022    UGET     2   1      ; make
0023    TGETS    2   2  11  ; "cmd_options"
0024    MOV      3   1
0025    CALL     2   1   2
0026    RET0     0   1

-- BYTECODE -- make.lua:117-123
0001    UGET     0   0      ; build
0002    TGETS    0   0   0  ; "build_rockspec"
0003    UGET     1   1      ; rockspec
0004    UGET     2   2      ; opts
0005    CALL     0   3   3
0006    ISF          0
0007    JMP      2 => 0017
0008    UGET     2   3      ; args
0009    TGETS    2   2   1  ; "no_doc"
0010    ISF          2
0011    JMP      3 => 0017
0012    UGET     2   4      ; util
0013    TGETS    2   2   2  ; "remove_doc_dir"
0014    MOV      3   0
0015    MOV      4   1
0016    CALL     2   1   3
0017 => MOV      2   0
0018    MOV      3   1
0019    RET      2   3

-- BYTECODE -- make.lua:79-143
0001    TGETS    1   0   0  ; "rockspec"
0002    IST          1
0003    JMP      2 => 0015
0004    KPRI     2   0
0005    UGET     3   0      ; util
0006    TGETS    3   3   1  ; "get_default_rockspec"
0007    CALL     3   3   1
0008    MOV      2   4
0009    MOV      1   3
0010    IST          1
0011    JMP      3 => 0015
0012    KPRI     3   0
0013    MOV      4   2
0014    UCLO     0 => 0161
0015 => MOV      3   1
0016    TGETS    2   1   2  ; "match"
0017    KSTR     4   3      ; "rockspec$"
0018    CALL     2   2   3
0019    IST          2
0020    JMP      2 => 0029
0021    KPRI     2   0
0022    KSTR     3   4      ; "Invalid argument: 'make' takes a rockspe"~
0023    UGET     4   0      ; util
0024    TGETS    4   4   5  ; "see_help"
0025    KSTR     5   6      ; "make"
0026    CALL     4   2   2
0027    CAT      3   3   4
0028    UCLO     0 => 0162
0029 => UGET     2   1      ; fetch
0030    TGETS    2   2   7  ; "load_rockspec"
0031    MOV      3   1
0032    CALL     2   4   2
0033    IST          2
0034    JMP      5 => 0038
0035    KPRI     5   0
0036    MOV      6   3
0037    UCLO     0 => 0163
0038 => UGET     5   0      ; util
0039    TGETS    5   5   8  ; "split_namespace"
0040    TGETS    6   2   9  ; "name"
0041    CALL     5   3   2
0042    IST          6
0043    JMP      7 => 0045
0044    TGETS    6   0  10  ; "namespace"
0045 => UGET     7   2      ; build
0046    TGETS    7   7  11  ; "opts"
0047    TDUP     8  12
0048    UGET     9   3      ; deps
0049    TGETS    9   9  13  ; "get_deps_mode"
0050    MOV     10   0
0051    CALL     9   2   2
0052    TSETS    9   8  14  ; "deps_mode"
0053    TSETS    6   8  10  ; "namespace"
0054    TGETS    9   0  15  ; "branch"
0055    TSETS    9   8  15  ; "branch"
0056    TGETS    9   0  16  ; "verify"
0057    NOT      9   9
0058    NOT      9   9
0059    TSETS    9   8  16  ; "verify"
0060    TGETS    9   0  17  ; "check_lua_versions"
0061    NOT      9   9
0062    NOT      9   9
0063    TSETS    9   8  17  ; "check_lua_versions"
0064    TGETS    9   0  18  ; "pin"
0065    NOT      9   9
0066    NOT      9   9
0067    TSETS    9   8  18  ; "pin"
0068    CALL     7   2   2
0069    TGETS    8   0  19  ; "sign"
0070    ISF          8
0071    JMP      9 => 0078
0072    TGETS    8   0  20  ; "pack_binary_rock"
0073    IST          8
0074    JMP      8 => 0078
0075    KPRI     8   0
0076    KSTR     9  21      ; "In the make command, --sign is meant to "~
0077    UCLO     0 => 0164
0078 => TGETS    8   0  20  ; "pack_binary_rock"
0079    ISF          8
0080    JMP      9 => 0091
0081    UGET     8   4      ; pack
0082    TGETS    8   8  20  ; "pack_binary_rock"
0083    MOV      9   5
0084    MOV     10   6
0085    TGETS   11   2  22  ; "version"
0086    TGETS   12   0  19  ; "sign"
0087    FNEW    13  23      ; make.lua:117
0088    UCLO     0 => 0089
0089 => CALLT    8   6
0090    JMP      8 => 0159
0091 => UGET     8   5      ; fs
0092    TGETS    8   8  24  ; "check_command_permissions"
0093    MOV      9   0
0094    CALL     8   3   2
0095    IST          8
0096    JMP     10 => 0104
0097    KPRI    10   0
0098    MOV     11   9
0099    UGET    12   6      ; cmd
0100    TGETS   12  12  25  ; "errorcodes"
0101    TGETS   12  12  26  ; "PERMISSIONDENIED"
0102    UCLO     0 => 0103
0103 => RET     10   4
0104 => UGET    10   2      ; build
0105    TGETS   10  10  27  ; "build_rockspec"
0106    MOV     11   2
0107    MOV     12   7
0108    CALL    10   3   3
0109    MOV      9  11
0110    MOV      8  10
0111    IST          8
0112    JMP     10 => 0117
0113    KPRI    10   0
0114    MOV     11   9
0115    UCLO     0 => 0116
0116 => RET     10   3
0117 => MOV     10   8
0118    MOV     11   9
0119    TGETS   12   0  28  ; "no_doc"
0120    ISF         12
0121    JMP     13 => 0127
0122    UGET    12   0      ; util
0123    TGETS   12  12  29  ; "remove_doc_dir"
0124    MOV     13  10
0125    MOV     14  11
0126    CALL    12   1   3
0127 => TGETS   12   0  30  ; "keep"
0128    IST         12
0129    JMP     12 => 0147
0130    UGET    12   7      ; cfg
0131    TGETS   12  12  31  ; "keep_other_versions"
0132    IST         12
0133    JMP     12 => 0147
0134    UGET    12   8      ; remove
0135    TGETS   12  12  32  ; "remove_other_versions"
0136    MOV     13  10
0137    MOV     14  11
0138    TGETS   15   0  33  ; "force"
0139    TGETS   16   0  34  ; "force_fast"
0140    CALL    12   3   5
0141    IST         12
0142    JMP     14 => 0147
0143    UGET    14   0      ; util
0144    TGETS   14  14  35  ; "printerr"
0145    MOV     15  13
0146    CALL    14   1   2
0147 => UGET    12   9      ; writer
0148    TGETS   12  12  36  ; "check_dependencies"
0149    KPRI    13   0
0150    UGET    14   3      ; deps
0151    TGETS   14  14  13  ; "get_deps_mode"
0152    MOV     15   0
0153    CALL    14   0   2
0154    CALLM   12   1   1
0155    MOV     12  10
0156    MOV     13  11
0157    UCLO     0 => 0158
0158 => RET     12   3
0159 => UCLO     0 => 0160
0160 => RET0     0   1
0161 => RET      3   3
0162 => RET      2   3
0163 => RET      5   3
0164 => RET      8   3

-- BYTECODE -- make.lua:0-146
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.build"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fs"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.util"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.core.cfg"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fetch"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.pack"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.remove"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.deps"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.deplocks"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.manif.writer"
0031    CALL    10   2   2
0032    GGET    11   0      ; "require"
0033    KSTR    12  11      ; "luarocks.cmd"
0034    CALL    11   2   2
0035    FNEW    12  13      ; make.lua:20
0036    TSETS   12   0  12  ; "cmd_options"
0037    FNEW    12  15      ; make.lua:47
0038    TSETS   12   0  14  ; "add_to_parser"
0039    FNEW    12  17      ; make.lua:79
0040    TSETS   12   0  16  ; "command"
0041    UCLO     0 => 0042
0042 => RET1     0   2

-----------------------
-- BYTECODE -- download.lua:9-25
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "download"
0004    KSTR     4   2      ; "Download a specific rock file from a roc"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "name"
0012    KSTR     5   6      ; "Name of the rock."
0013    CALL     2   2   4
0014    MOV      3   2
0015    TGETS    2   2   7  ; "args"
0016    KSTR     4   8      ; "?"
0017    CALL     2   2   3
0018    MOV      3   2
0019    TGETS    2   2   9  ; "action"
0020    UGET     4   0      ; util
0021    TGETS    4   4  10  ; "namespaced_name_action"
0022    CALL     2   1   3
0023    MOV      3   1
0024    TGETS    2   1   4  ; "argument"
0025    KSTR     4  11      ; "version"
0026    KSTR     5  12      ; "Version of the rock."
0027    CALL     2   2   4
0028    MOV      3   2
0029    TGETS    2   2   7  ; "args"
0030    KSTR     4   8      ; "?"
0031    CALL     2   1   3
0032    MOV      3   1
0033    TGETS    2   1  13  ; "flag"
0034    KSTR     4  14      ; "--all"
0035    KSTR     5  15      ; "Download all files if there are multiple"~
0036    CALL     2   1   4
0037    MOV      3   1
0038    TGETS    2   1  16  ; "mutex"
0039    MOV      5   1
0040    TGETS    4   1  13  ; "flag"
0041    KSTR     6  17      ; "--source"
0042    KSTR     7  18      ; "Download .src.rock if available."
0043    CALL     4   2   4
0044    MOV      6   1
0045    TGETS    5   1  13  ; "flag"
0046    KSTR     7  19      ; "--rockspec"
0047    KSTR     8  20      ; "Download .rockspec if available."
0048    CALL     5   2   4
0049    MOV      7   1
0050    TGETS    6   1  21  ; "option"
0051    KSTR     8  22      ; "--arch"
0052    KSTR     9  23      ; "Download rock for a specific architectur"~
0053    CALL     6   0   4
0054    CALLM    2   1   3
0055    MOV      3   1
0056    TGETS    2   1  13  ; "flag"
0057    KSTR     4  24      ; "--check-lua-versions"
0058    KSTR     5  25      ; "If the rock can't be found, check reposi"~
0059    KSTR     6  26      ; "and report if it is available for anothe"~
0060    CAT      5   5   6
0061    CALL     2   1   4
0062    RET0     0   1

-- BYTECODE -- download.lua:30-49
0001    TGETS    1   0   0  ; "name"
0002    IST          1
0003    JMP      1 => 0015
0004    TGETS    1   0   1  ; "all"
0005    IST          1
0006    JMP      1 => 0015
0007    KPRI     1   0
0008    KSTR     2   2      ; "Argument missing. "
0009    UGET     3   0      ; util
0010    TGETS    3   3   3  ; "see_help"
0011    KSTR     4   4      ; "download"
0012    CALL     3   2   2
0013    CAT      2   2   3
0014    RET      1   3
0015 => TGETS    1   0   0  ; "name"
0016    IST          1
0017    JMP      2 => 0019
0018    KSTR     1   5      ; ""
0019 => TSETS    1   0   0  ; "name"
0020    KPRI     1   0
0021    TGETS    2   0   6  ; "source"
0022    ISF          2
0023    JMP      3 => 0026
0024    KSTR     1   7      ; "src"
0025    JMP      2 => 0035
0026 => TGETS    2   0   8  ; "rockspec"
0027    ISF          2
0028    JMP      3 => 0031
0029    KSTR     1   8      ; "rockspec"
0030    JMP      2 => 0035
0031 => TGETS    2   0   9  ; "arch"
0032    ISF          2
0033    JMP      3 => 0035
0034    TGETS    1   0   9  ; "arch"
0035 => UGET     2   1      ; download
0036    TGETS    2   2   4  ; "download"
0037    MOV      3   1
0038    TGETS    4   0   0  ; "name"
0039    TGETS    5   0  10  ; "namespace"
0040    TGETS    6   0  11  ; "version"
0041    TGETS    7   0   1  ; "all"
0042    TGETS    8   0  12  ; "check_lua_versions"
0043    CALL     2   3   7
0044    ISFC     4   2
0045    JMP      4 => 0047
0046    KPRI     4   2
0047 => MOV      5   3
0048    RET      4   3

-- BYTECODE -- download.lua:0-52
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.download"
0007    CALL     2   2   2
0008    FNEW     3   4      ; download.lua:9
0009    TSETS    3   0   3  ; "add_to_parser"
0010    FNEW     3   6      ; download.lua:30
0011    TSETS    3   0   5  ; "command"
0012    UCLO     0 => 0013
0013 => RET1     0   2

-----------------------
-- BYTECODE -- new_version.lua:14-50
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "new_version"
0004    KSTR     4   2      ; "This is a utility function that writes a"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Auto-write a rockspec for a new version "~
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "argument"
0015    KSTR     4   7      ; "rock"
0016    KSTR     5   8      ; "Package name or rockspec."
0017    CALL     2   2   4
0018    MOV      3   2
0019    TGETS    2   2   9  ; "args"
0020    KSTR     4  10      ; "?"
0021    CALL     2   1   3
0022    MOV      3   1
0023    TGETS    2   1   6  ; "argument"
0024    KSTR     4   1      ; "new_version"
0025    KSTR     5  11      ; "New version of the rock."
0026    CALL     2   2   4
0027    MOV      3   2
0028    TGETS    2   2   9  ; "args"
0029    KSTR     4  10      ; "?"
0030    CALL     2   1   3
0031    MOV      3   1
0032    TGETS    2   1   6  ; "argument"
0033    KSTR     4  12      ; "new_url"
0034    KSTR     5  13      ; "New URL of the rock."
0035    CALL     2   2   4
0036    MOV      3   2
0037    TGETS    2   2   9  ; "args"
0038    KSTR     4  10      ; "?"
0039    CALL     2   1   3
0040    MOV      3   1
0041    TGETS    2   1  14  ; "option"
0042    KSTR     4  15      ; "--dir"
0043    KSTR     5  16      ; "Output directory for the new rockspec."
0044    CALL     2   1   4
0045    MOV      3   1
0046    TGETS    2   1  14  ; "option"
0047    KSTR     4  17      ; "--tag"
0048    KSTR     5  18      ; "New SCM tag."
0049    CALL     2   1   4
0050    RET0     0   1

-- BYTECODE -- new_version.lua:53-65
0001    TGETV    4   0   1
0002    IST          4
0003    JMP      4 => 0006
0004    KPRI     4   1
0005    RET1     4   2
0006 => TGETV    4   0   1
0007    TGETV    5   0   1
0008    MOV      6   5
0009    TGETS    5   5   0  ; "gsub"
0010    MOV      7   2
0011    MOV      8   3
0012    CALL     5   2   4
0013    ISEQV    5   4
0014    JMP      6 => 0026
0015    UGET     6   0      ; util
0016    TGETS    6   6   1  ; "printout"
0017    KSTR     7   2      ; "Guessing new '"
0018    MOV      8   1
0019    KSTR     9   3      ; "' field as "
0020    MOV     10   5
0021    CAT      7   7  10
0022    CALL     6   1   2
0023    TSETV    5   0   1
0024    KPRI     6   2
0025    RET1     6   2
0026 => KPRI     6   1
0027    RET1     6   2

-- BYTECODE -- new_version.lua:71-102
0001    UGET     1   0      ; fetch
0002    TGETS    1   1   0  ; "fetch_url_at_temp_dir"
0003    TGETS    2   0   1  ; "source"
0004    TGETS    2   2   2  ; "url"
0005    KSTR     3   3      ; "luarocks-new-version-"
0006    TGETS    4   0   4  ; "package"
0007    CAT      3   3   4
0008    CALL     1   3   3
0009    IST          1
0010    JMP      3 => 0020
0011    UGET     3   1      ; util
0012    TGETS    3   3   5  ; "warning"
0013    KSTR     4   6      ; "invalid URL - "
0014    MOV      5   2
0015    CAT      4   4   5
0016    CALL     3   1   2
0017    KPRI     3   2
0018    KPRI     4   1
0019    RET      3   3
0020 => UGET     3   0      ; fetch
0021    TGETS    3   3   7  ; "find_base_dir"
0022    MOV      4   1
0023    MOV      5   2
0024    TGETS    6   0   1  ; "source"
0025    TGETS    6   6   2  ; "url"
0026    TGETS    7   0   1  ; "source"
0027    TGETS    7   7   8  ; "dir"
0028    CALL     3   3   5
0029    IST          3
0030    JMP      5 => 0034
0031    KPRI     5   0
0032    MOV      6   4
0033    RET      5   3
0034 => ISF          4
0035    JMP      5 => 0040
0036    ISEQV    4   3
0037    JMP      5 => 0040
0038    TGETS    5   0   1  ; "source"
0039    TSETS    4   5   8  ; "dir"
0040 => ISF          1
0041    JMP      5 => 0078
0042    TGETS    5   0   1  ; "source"
0043    TGETS    5   5   9  ; "md5"
0044    ISF          5
0045    JMP      6 => 0071
0046    UGET     5   1      ; util
0047    TGETS    5   5  10  ; "printout"
0048    KSTR     6  11      ; "File successfully downloaded. Updating M"~
0049    CALL     5   1   2
0050    UGET     5   2      ; fs
0051    TGETS    5   5  12  ; "get_md5"
0052    MOV      6   1
0053    CALL     5   3   2
0054    IST          5
0055    JMP      7 => 0059
0056    KPRI     7   0
0057    MOV      8   6
0058    RET      7   3
0059 => TGETS    7   0   1  ; "source"
0060    TGETS    7   7   9  ; "md5"
0061    TGETS    8   0   1  ; "source"
0062    TSETS    5   8   9  ; "md5"
0063    KPRI     8   2
0064    ISNEV    5   7
0065    JMP      9 => 0068
0066    KPRI     9   1
0067    JMP     10 => 0069
0068 => KPRI     9   2
0069 => RET      8   3
0070    JMP      5 => 0078
0071 => UGET     5   1      ; util
0072    TGETS    5   5  10  ; "printout"
0073    KSTR     6  13      ; "File successfully downloaded."
0074    CALL     5   1   2
0075    KPRI     5   2
0076    KPRI     6   1
0077    RET      5   3
0078 => RET0     0   1

-- BYTECODE -- new_version.lua:104-136
0001    ISF          2
0002    JMP      5 => 0005
0003    TGETS    5   0   0  ; "source"
0004    TSETS    2   5   1  ; "tag"
0005 => ISF          1
0006    JMP      5 => 0012
0007    TGETS    5   0   0  ; "source"
0008    TSETS    1   5   2  ; "url"
0009    UGET     5   0      ; check_url_and_update_md5
0010    MOV      6   0
0011    CALLT    5   2
0012 => ISNEV    4   3
0013    JMP      5 => 0016
0014    KPRI     5   2
0015    RET1     5   2
0016 => TGETS    5   0   0  ; "source"
0017    TGETS    5   5   3  ; "dir"
0018    ISF          5
0019    JMP      6 => 0026
0020    UGET     5   1      ; try_replace
0021    TGETS    6   0   0  ; "source"
0022    KSTR     7   3      ; "dir"
0023    MOV      8   3
0024    MOV      9   4
0025    CALL     5   1   5
0026 => TGETS    5   0   0  ; "source"
0027    TGETS    5   5   4  ; "file"
0028    ISF          5
0029    JMP      6 => 0036
0030    UGET     5   1      ; try_replace
0031    TGETS    6   0   0  ; "source"
0032    KSTR     7   4      ; "file"
0033    MOV      8   3
0034    MOV      9   4
0035    CALL     5   1   5
0036 => UGET     5   1      ; try_replace
0037    TGETS    6   0   0  ; "source"
0038    KSTR     7   2      ; "url"
0039    MOV      8   3
0040    MOV      9   4
0041    CALL     5   2   5
0042    ISF          5
0043    JMP      6 => 0047
0044    UGET     5   0      ; check_url_and_update_md5
0045    MOV      6   0
0046    CALLT    5   2
0047 => IST          2
0048    JMP      5 => 0057
0049    UGET     5   1      ; try_replace
0050    TGETS    6   0   0  ; "source"
0051    KSTR     7   1      ; "tag"
0052    MOV      8   3
0053    MOV      9   4
0054    CALL     5   2   5
0055    ISF          5
0056    JMP      6 => 0059
0057 => KPRI     5   2
0058    RET1     5   2
0059 => UGET     5   0      ; check_url_and_update_md5
0060    MOV      6   0
0061    CALL     5   3   2
0062    IST          5
0063    JMP      7 => 0067
0064    KPRI     7   0
0065    MOV      8   6
0066    RET      7   3
0067 => ISF          6
0068    JMP      7 => 0073
0069    UGET     7   2      ; util
0070    TGETS    7   7   5  ; "warning"
0071    KSTR     8   6      ; "URL is the same, but MD5 has changed. Ol"~
0072    CALL     7   1   2
0073 => KPRI     7   2
0074    RET1     7   2

-- BYTECODE -- new_version.lua:138-216
0001    TGETS    1   0   0  ; "rock"
0002    IST          1
0003    JMP      1 => 0016
0004    KPRI     1   0
0005    UGET     2   0      ; util
0006    TGETS    2   2   1  ; "get_default_rockspec"
0007    CALL     2   3   1
0008    MOV      1   3
0009    TSETS    2   0   0  ; "rock"
0010    TGETS    2   0   0  ; "rock"
0011    IST          2
0012    JMP      2 => 0016
0013    KPRI     2   0
0014    MOV      3   1
0015    RET      2   3
0016 => KNIL     1   2
0017    TGETS    3   0   0  ; "rock"
0018    MOV      4   3
0019    TGETS    3   3   2  ; "match"
0020    KSTR     5   3      ; "rockspec$"
0021    CALL     3   2   3
0022    ISF          3
0023    JMP      4 => 0036
0024    UGET     3   1      ; fetch
0025    TGETS    3   3   4  ; "fetch_url"
0026    TGETS    4   0   0  ; "rock"
0027    CALL     3   3   2
0028    MOV      2   4
0029    MOV      1   3
0030    IST          1
0031    JMP      3 => 0051
0032    KPRI     3   0
0033    MOV      4   2
0034    RET      3   3
0035    JMP      3 => 0051
0036 => UGET     3   2      ; download
0037    TGETS    3   3   5  ; "download"
0038    KSTR     4   6      ; "rockspec"
0039    TGETS    5   0   0  ; "rock"
0040    MOV      6   5
0041    TGETS    5   5   7  ; "lower"
0042    CALL     5   0   2
0043    CALLM    3   3   1
0044    MOV      2   4
0045    MOV      1   3
0046    IST          1
0047    JMP      3 => 0051
0048    KPRI     3   0
0049    MOV      4   2
0050    RET      3   3
0051 => UGET     3   1      ; fetch
0052    TGETS    3   3   8  ; "load_rockspec"
0053    MOV      4   1
0054    CALL     3   3   2
0055    IST          3
0056    JMP      5 => 0060
0057    KPRI     5   0
0058    MOV      6   4
0059    RET      5   3
0060 => TGETS    5   3   9  ; "version"
0061    MOV      6   5
0062    TGETS    5   5   2  ; "match"
0063    KSTR     7  10      ; "(.*)%-(%d+)$"
0064    CALL     5   3   3
0065    KNIL     7   8
0066    TGETS    9   0  11  ; "tag"
0067    ISF          9
0068    JMP     10 => 0079
0069    TGETS    9   0  12  ; "new_version"
0070    IST          9
0071    JMP      9 => 0079
0072    TGETS    9   0  11  ; "tag"
0073    MOV     10   9
0074    TGETS    9   9  13  ; "gsub"
0075    KSTR    11  14      ; "^v"
0076    KSTR    12  15      ; ""
0077    CALL     9   2   4
0078    TSETS    9   0  12  ; "new_version"
0079 => KPRI     9   0
0080    TGETS   10   0  16  ; "dir"
0081    ISF         10
0082    JMP     11 => 0088
0083    UGET    10   3      ; dir
0084    TGETS   10  10  17  ; "normalize"
0085    TGETS   11   0  16  ; "dir"
0086    CALL    10   2   2
0087    MOV      9  10
0088 => TGETS   10   0  12  ; "new_version"
0089    ISF         10
0090    JMP     11 => 0107
0091    TGETS   10   0  12  ; "new_version"
0092    MOV     11  10
0093    TGETS   10  10   2  ; "match"
0094    KSTR    12  10      ; "(.*)%-(%d+)$"
0095    CALL    10   3   3
0096    MOV      8  11
0097    MOV      7  10
0098    GGET    10  18      ; "tonumber"
0099    MOV     11   8
0100    CALL    10   2   2
0101    MOV      8  10
0102    IST          8
0103    JMP     10 => 0112
0104    TGETS    7   0  12  ; "new_version"
0105    KSHORT   8   1
0106    JMP     10 => 0112
0107 => MOV      7   5
0108    GGET    10  18      ; "tonumber"
0109    MOV     11   6
0110    CALL    10   2   2
0111    ADDVN    8  10   0  ; 1
0112 => MOV     11   7
0113    TGETS   10   7  13  ; "gsub"
0114    KSTR    12  19      ; "-"
0115    KSTR    13  15      ; ""
0116    CALL    10   2   4
0117    UGET    11   4      ; persist
0118    TGETS   11  11  20  ; "load_into_table"
0119    MOV     12   1
0120    CALL    11   3   2
0121    TGETS   13  11  21  ; "package"
0122    MOV     14  13
0123    TGETS   13  13   7  ; "lower"
0124    CALL    13   2   2
0125    MOV     14  10
0126    KSTR    15  19      ; "-"
0127    MOV     16   8
0128    CAT     14  14  16
0129    TSETS   14  11   9  ; "version"
0130    UGET    14   5      ; update_source_section
0131    MOV     15  11
0132    TGETS   16   0  22  ; "new_url"
0133    TGETS   17   0  11  ; "tag"
0134    MOV     18   5
0135    MOV     19   7
0136    CALL    14   3   6
0137    IST         14
0138    JMP     16 => 0142
0139    KPRI    16   0
0140    MOV     17  15
0141    RET     16   3
0142 => TGETS   16  11  23  ; "build"
0143    ISF         16
0144    JMP     17 => 0152
0145    TGETS   16  11  23  ; "build"
0146    TGETS   16  16  24  ; "type"
0147    ISNES   16  25      ; "module"
0148    JMP     16 => 0152
0149    TGETS   16  11  23  ; "build"
0150    KSTR    17  26      ; "builtin"
0151    TSETS   17  16  24  ; "type"
0152 => MOV     16  13
0153    KSTR    17  19      ; "-"
0154    MOV     18  10
0155    KSTR    19  19      ; "-"
0156    MOV     20   8
0157    KSTR    21  27      ; ".rockspec"
0158    CAT     16  16  21
0159    ISF          9
0160    JMP     17 => 0171
0161    UGET    17   3      ; dir
0162    TGETS   17  17  28  ; "path"
0163    MOV     18   9
0164    MOV     19  16
0165    CALL    17   2   3
0166    MOV     16  17
0167    UGET    17   6      ; fs
0168    TGETS   17  17  29  ; "make_dir"
0169    MOV     18   9
0170    CALL    17   1   2
0171 => UGET    17   4      ; persist
0172    TGETS   17  17  30  ; "save_from_table"
0173    MOV     18  16
0174    MOV     19  11
0175    UGET    20   7      ; type_rockspec
0176    TGETS   20  20  31  ; "order"
0177    CALL    17   1   4
0178    UGET    17   0      ; util
0179    TGETS   17  17  32  ; "printout"
0180    KSTR    18  33      ; "Wrote "
0181    MOV     19  16
0182    CAT     18  18  19
0183    CALL    17   1   2
0184    UGET    17   1      ; fetch
0185    TGETS   17  17  34  ; "load_local_rockspec"
0186    MOV     18  16
0187    CALL    17   3   2
0188    IST         17
0189    JMP     19 => 0195
0190    KPRI    19   0
0191    KSTR    20  35      ; "Failed loading generated rockspec: "
0192    MOV     21  18
0193    CAT     20  20  21
0194    RET     19   3
0195 => KPRI    19   2
0196    RET1    19   2

-- BYTECODE -- new_version.lua:0-219
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.download"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fetch"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.persist"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.dir"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.type.rockspec"
0022    CALL     7   2   2
0023    FNEW     8   9      ; new_version.lua:14
0024    TSETS    8   0   8  ; "add_to_parser"
0025    FNEW     8  10      ; new_version.lua:53
0026    FNEW     9  11      ; new_version.lua:71
0027    FNEW    10  12      ; new_version.lua:104
0028    FNEW    11  14      ; new_version.lua:138
0029    TSETS   11   0  13  ; "command"
0030    UCLO     0 => 0031
0031 => RET1     0   2

-----------------------
-- BYTECODE -- doc.lua:15-31
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "doc"
0004    KSTR     4   2      ; "Show documentation for an installed rock"~
0005    KSTR     5   3      ; "Without any flags, tries to load the doc"~
0006    KSTR     6   4      ; "With flags, return only the desired info"~
0007    CAT      4   4   6
0008    UGET     5   0      ; util
0009    TGETS    5   5   5  ; "see_also"
0010    KSTR     6   6      ; "   For more information about a rock, se"~
0011    CALL     5   0   2
0012    CALLM    1   2   3
0013    MOV      2   1
0014    TGETS    1   1   7  ; "summary"
0015    KSTR     3   8      ; "Show documentation for an installed rock"~
0016    CALL     1   2   3
0017    MOV      3   1
0018    TGETS    2   1   9  ; "argument"
0019    KSTR     4  10      ; "rock"
0020    KSTR     5  11      ; "Name of the rock."
0021    CALL     2   2   4
0022    MOV      3   2
0023    TGETS    2   2  12  ; "action"
0024    UGET     4   0      ; util
0025    TGETS    4   4  13  ; "namespaced_name_action"
0026    CALL     2   1   3
0027    MOV      3   1
0028    TGETS    2   1   9  ; "argument"
0029    KSTR     4  14      ; "version"
0030    KSTR     5  15      ; "Version of the rock."
0031    CALL     2   2   4
0032    MOV      3   2
0033    TGETS    2   2  16  ; "args"
0034    KSTR     4  17      ; "?"
0035    CALL     2   1   3
0036    MOV      3   1
0037    TGETS    2   1  18  ; "flag"
0038    KSTR     4  19      ; "--home"
0039    KSTR     5  20      ; "Open the home page of project."
0040    CALL     2   1   4
0041    MOV      3   1
0042    TGETS    2   1  18  ; "flag"
0043    KSTR     4  21      ; "--list"
0044    KSTR     5  22      ; "List documentation files only."
0045    CALL     2   1   4
0046    MOV      3   1
0047    TGETS    2   1  18  ; "flag"
0048    KSTR     4  23      ; "--porcelain"
0049    KSTR     5  24      ; "Produce machine-friendly output."
0050    CALL     2   1   4
0051    RET0     0   1

-- BYTECODE -- doc.lua:33-40
0001    IST          0
0002    JMP      4 => 0013
0003    KPRI     4   0
0004    KSTR     5   0      ; "No 'homepage' field in rockspec for "
0005    UGET     6   0      ; util
0006    TGETS    6   6   1  ; "format_rock_name"
0007    MOV      7   1
0008    MOV      8   2
0009    MOV      9   3
0010    CALL     6   2   4
0011    CAT      5   5   6
0012    RET      4   3
0013 => UGET     4   0      ; util
0014    TGETS    4   4   2  ; "printout"
0015    KSTR     5   3      ; "Opening "
0016    MOV      6   0
0017    KSTR     7   4      ; " ..."
0018    CAT      5   5   7
0019    CALL     4   1   2
0020    UGET     4   1      ; fs
0021    TGETS    4   4   5  ; "browser"
0022    MOV      5   0
0023    CALL     4   1   2
0024    KPRI     4   2
0025    RET1     4   2

-- BYTECODE -- doc.lua:42-57
0001    UGET     3   0      ; fs
0002    TGETS    3   3   0  ; "make_temp_dir"
0003    KSTR     4   1      ; "doc-"
0004    MOV      5   0
0005    KSTR     6   2      ; "-"
0006    ISTC     7   2
0007    JMP      7 => 0009
0008    KSTR     7   3      ; ""
0009 => CAT      4   4   7
0010    CALL     3   3   2
0011    IST          3
0012    JMP      5 => 0018
0013    KPRI     5   0
0014    KSTR     6   4      ; "Failed creating temporary directory: "
0015    MOV      7   4
0016    CAT      6   6   7
0017    RET      5   3
0018 => UGET     5   1      ; util
0019    TGETS    5   5   5  ; "schedule_function"
0020    UGET     6   0      ; fs
0021    TGETS    6   6   6  ; "delete"
0022    MOV      7   3
0023    CALL     5   1   3
0024    UGET     5   0      ; fs
0025    TGETS    5   5   7  ; "change_dir"
0026    MOV      6   3
0027    CALL     5   3   2
0028    IST          5
0029    JMP      7 => 0033
0030    KPRI     7   0
0031    MOV      8   6
0032    RET      7   3
0033 => UGET     7   2      ; download
0034    TGETS    7   7   8  ; "download"
0035    KSTR     8   9      ; "rockspec"
0036    MOV      9   0
0037    MOV     10   1
0038    MOV     11   2
0039    CALL     7   3   5
0040    IST          7
0041    JMP      9 => 0045
0042    KPRI     9   0
0043    MOV     10   8
0044    RET      9   3
0045 => UGET     9   3      ; fetch
0046    TGETS    9   9  10  ; "load_local_rockspec"
0047    MOV     10   7
0048    CALL     9   3   2
0049    IST          9
0050    JMP     11 => 0054
0051    KPRI    11   0
0052    MOV     12  10
0053    RET     11   3
0054 => UGET    11   0      ; fs
0055    TGETS   11  11  11  ; "pop_dir"
0056    CALL    11   1   1
0057    TGETS   11   9  12  ; "description"
0058    IST         11
0059    JMP     12 => 0061
0060    TNEW    11   0
0061 => UGET    12   4      ; show_homepage
0062    TGETS   13  11  13  ; "homepage"
0063    MOV     14   0
0064    MOV     15   1
0065    MOV     16   2
0066    CALLT   12   5

-- BYTECODE -- doc.lua:61-150
0001    UGET     1   0      ; queries
0002    TGETS    1   1   0  ; "new"
0003    TGETS    2   0   1  ; "rock"
0004    TGETS    3   0   2  ; "namespace"
0005    TGETS    4   0   3  ; "version"
0006    CALL     1   2   4
0007    UGET     2   1      ; search
0008    TGETS    2   2   4  ; "pick_installed_rock"
0009    MOV      3   1
0010    TGETS    4   0   5  ; "tree"
0011    CALL     2   4   3
0012    IST          2
0013    JMP      5 => 0031
0014    UGET     5   2      ; util
0015    TGETS    5   5   6  ; "format_rock_name"
0016    TGETS    6   0   1  ; "rock"
0017    TGETS    7   0   2  ; "namespace"
0018    TGETS    8   0   3  ; "version"
0019    CALL     5   2   4
0020    UGET     6   2      ; util
0021    TGETS    6   6   7  ; "printout"
0022    MOV      7   5
0023    KSTR     8   8      ; " is not installed. Looking for it in the"~
0024    CAT      7   7   8
0025    CALL     6   1   2
0026    UGET     6   3      ; try_to_open_homepage
0027    TGETS    7   0   1  ; "rock"
0028    TGETS    8   0   2  ; "namespace"
0029    TGETS    9   0   3  ; "version"
0030    CALLT    6   4
0031 => MOV      5   2
0032    GSET     3   3      ; "version"
0033    GSET     5   9      ; "name"
0034    UGET     5   4      ; fetch
0035    TGETS    5   5  10  ; "load_local_rockspec"
0036    UGET     6   5      ; path
0037    TGETS    6   6  11  ; "rockspec_file"
0038    GGET     7   9      ; "name"
0039    GGET     8   3      ; "version"
0040    MOV      9   4
0041    CALL     6   0   4
0042    CALLM    5   3   0
0043    IST          5
0044    JMP      7 => 0048
0045    KPRI     7   0
0046    MOV      8   6
0047    RET      7   3
0048 => TGETS    7   5  12  ; "description"
0049    IST          7
0050    JMP      8 => 0052
0051    TNEW     7   0
0052 => TGETS    8   0  13  ; "home"
0053    ISF          8
0054    JMP      9 => 0061
0055    UGET     8   6      ; show_homepage
0056    TGETS    9   7  14  ; "homepage"
0057    GGET    10   9      ; "name"
0058    TGETS   11   0   2  ; "namespace"
0059    GGET    12   3      ; "version"
0060    CALLT    8   5
0061 => UGET     8   5      ; path
0062    TGETS    8   8  15  ; "install_dir"
0063    GGET     9   9      ; "name"
0064    GGET    10   3      ; "version"
0065    MOV     11   4
0066    CALL     8   2   4
0067    KPRI     9   0
0068    TDUP    10  16
0069    GGET    11  17      ; "ipairs"
0070    MOV     12  10
0071    CALL    11   4   2
0072    JMP     14 => 0086
0073 => UGET    16   7      ; dir
0074    TGETS   16  16  18  ; "path"
0075    MOV     17   8
0076    MOV     18  15
0077    CALL    16   2   3
0078    UGET    17   8      ; fs
0079    TGETS   17  17  19  ; "is_dir"
0080    MOV     18  16
0081    CALL    17   2   2
0082    ISF         17
0083    JMP     18 => 0086
0084    MOV      9  16
0085    JMP     11 => 0088
0086 => ITERC   14   3   3
0087    ITERL   14 => 0073
0088 => IST          9
0089    JMP     11 => 0116
0090    TGETS   11   7  14  ; "homepage"
0091    ISF         11
0092    JMP     12 => 0109
0093    TGETS   11   0  20  ; "list"
0094    IST         11
0095    JMP     11 => 0109
0096    UGET    11   2      ; util
0097    TGETS   11  11   7  ; "printout"
0098    KSTR    12  21      ; "Local documentation directory not found "~
0099    TGETS   13   7  14  ; "homepage"
0100    KSTR    14  22      ; " ..."
0101    CAT     12  12  14
0102    CALL    11   1   2
0103    UGET    11   8      ; fs
0104    TGETS   11  11  23  ; "browser"
0105    TGETS   12   7  14  ; "homepage"
0106    CALL    11   1   2
0107    KPRI    11   2
0108    RET1    11   2
0109 => KPRI    11   0
0110    KSTR    12  24      ; "Documentation directory not found for "
0111    GGET    13   9      ; "name"
0112    KSTR    14  25      ; " "
0113    GGET    15   3      ; "version"
0114    CAT     12  12  15
0115    RET     11   3
0116 => UGET    11   7      ; dir
0117    TGETS   11  11  26  ; "normalize"
0118    MOV     12   9
0119    CALL    11   2   2
0120    MOV     12  11
0121    TGETS   11  11  27  ; "gsub"
0122    KSTR    13  28      ; "/+"
0123    KSTR    14  29      ; "/"
0124    CALL    11   2   4
0125    MOV      9  11
0126    UGET    11   8      ; fs
0127    TGETS   11  11  30  ; "find"
0128    MOV     12   9
0129    CALL    11   2   2
0130    KSTR    12  31      ; "%.html?$"
0131    TDUP    13  32
0132    TSETB   12  13   1
0133    TDUP    14  33
0134    TGETS   15   0  34  ; "porcelain"
0135    LEN     16  11
0136    KSHORT  17   0
0137    ISGE    17  16
0138    JMP     16 => 0182
0139    UGET    16   2      ; util
0140    TGETS   16  16  35  ; "title"
0141    KSTR    17  36      ; "Documentation files for "
0142    GGET    18   9      ; "name"
0143    KSTR    19  25      ; " "
0144    GGET    20   3      ; "version"
0145    CAT     17  17  20
0146    MOV     18  15
0147    CALL    16   1   3
0148    ISF         15
0149    JMP     16 => 0164
0150    GGET    16  17      ; "ipairs"
0151    MOV     17  11
0152    CALL    16   4   2
0153    JMP     19 => 0161
0154 => UGET    21   2      ; util
0155    TGETS   21  21   7  ; "printout"
0156    MOV     22   9
0157    KSTR    23  29      ; "/"
0158    MOV     24  20
0159    CAT     22  22  24
0160    CALL    21   1   2
0161 => ITERC   19   3   3
0162    ITERL   19 => 0154
0163    JMP     16 => 0182
0164 => UGET    16   2      ; util
0165    TGETS   16  16   7  ; "printout"
0166    MOV     17   9
0167    KSTR    18  29      ; "/"
0168    CAT     17  17  18
0169    CALL    16   1   2
0170    GGET    16  17      ; "ipairs"
0171    MOV     17  11
0172    CALL    16   4   2
0173    JMP     19 => 0180
0174 => UGET    21   2      ; util
0175    TGETS   21  21   7  ; "printout"
0176    KSTR    22  37      ; "\t"
0177    MOV     23  20
0178    CAT     22  22  23
0179    CALL    21   1   2
0180 => ITERC   19   3   3
0181    ITERL   19 => 0174
0182 => TGETS   16   0  20  ; "list"
0183    ISF         16
0184    JMP     17 => 0187
0185    KPRI    16   2
0186    RET1    16   2
0187 => GGET    16  17      ; "ipairs"
0188    MOV     17  13
0189    CALL    16   4   2
0190    JMP     19 => 0272
0191 => GGET    21  17      ; "ipairs"
0192    MOV     22  14
0193    CALL    21   4   2
0194    JMP     24 => 0270
0195 => MOV     26  25
0196    MOV     27  20
0197    CAT     26  26  27
0198    KPRI    27   0
0199    GGET    28  17      ; "ipairs"
0200    MOV     29  11
0201    CALL    28   4   2
0202    JMP     31 => 0219
0203 => MOV     34  32
0204    TGETS   33  32  38  ; "lower"
0205    CALL    33   2   2
0206    MOV     34  33
0207    TGETS   33  33  39  ; "match"
0208    MOV     35  26
0209    CALL    33   2   3
0210    ISF         33
0211    JMP     34 => 0219
0212    ISF         27
0213    JMP     33 => 0218
0214    LEN     33  32
0215    LEN     34  27
0216    ISGE    33  34
0217    JMP     33 => 0219
0218 => MOV     27  32
0219 => ITERC   31   3   3
0220    ITERL   31 => 0203
0221    ISF         27
0222    JMP     28 => 0270
0223    UGET    28   7      ; dir
0224    TGETS   28  28  18  ; "path"
0225    MOV     29   9
0226    MOV     30  27
0227    CALL    28   2   3
0228    UGET    29   2      ; util
0229    TGETS   29  29   7  ; "printout"
0230    CALL    29   1   1
0231    UGET    29   2      ; util
0232    TGETS   29  29   7  ; "printout"
0233    KSTR    30  40      ; "Opening "
0234    MOV     31  28
0235    KSTR    32  22      ; " ..."
0236    CAT     30  30  32
0237    CALL    29   1   2
0238    UGET    29   2      ; util
0239    TGETS   29  29   7  ; "printout"
0240    CALL    29   1   1
0241    UGET    29   8      ; fs
0242    TGETS   29  29  23  ; "browser"
0243    MOV     30  28
0244    CALL    29   2   2
0245    IST         29
0246    JMP     30 => 0268
0247    MOV     31  28
0248    TGETS   30  28  39  ; "match"
0249    MOV     32  12
0250    CALL    30   2   3
0251    IST         30
0252    JMP     30 => 0268
0253    GGET    30  41      ; "io"
0254    TGETS   30  30  42  ; "open"
0255    MOV     31  28
0256    KSTR    32  43      ; "r"
0257    CALL    30   2   3
0258    UGET    31   2      ; util
0259    TGETS   31  31   7  ; "printout"
0260    MOV     33  30
0261    TGETS   32  30  44  ; "read"
0262    KSTR    34  45      ; "*a"
0263    CALL    32   0   3
0264    CALLM   31   1   0
0265    MOV     32  30
0266    TGETS   31  30  46  ; "close"
0267    CALL    31   1   2
0268 => KPRI    30   2
0269    RET1    30   2
0270 => ITERC   24   3   3
0271    ITERL   24 => 0195
0272 => ITERC   19   3   3
0273    ITERL   19 => 0191
0274    KPRI    16   2
0275    RET1    16   2

-- BYTECODE -- doc.lua:0-154
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.queries"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.search"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.path"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.dir"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.fetch"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.fs"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.download"
0025    CALL     8   2   2
0026    FNEW     9  10      ; doc.lua:15
0027    TSETS    9   0   9  ; "add_to_parser"
0028    FNEW     9  11      ; doc.lua:33
0029    FNEW    10  12      ; doc.lua:42
0030    FNEW    11  14      ; doc.lua:61
0031    TSETS   11   0  13  ; "command"
0032    UCLO     0 => 0033
0033 => RET1     0   2

-----------------------
-- BYTECODE -- build.lua:20-44
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "build"
0004    KSTR     4   2      ; "Build and install a rock, compiling its "~
0005    KSTR     5   3      ; "If the sources contain a luarocks.lock f"~
0006    KSTR     6   4      ; "exact version of dependencies.\n"
0007    KSTR     7   5      ; "If no arguments are given, behaves as lu"~
0008    CAT      4   4   7
0009    UGET     5   0      ; util
0010    TGETS    5   5   6  ; "see_also"
0011    CALL     5   0   1
0012    CALLM    1   2   3
0013    MOV      2   1
0014    TGETS    1   1   7  ; "summary"
0015    KSTR     3   8      ; "Build/compile a rock."
0016    CALL     1   2   3
0017    MOV      3   1
0018    TGETS    2   1   9  ; "argument"
0019    KSTR     4  10      ; "rock"
0020    KSTR     5  11      ; "A rockspec file, a source rock file, or "~
0021    KSTR     6  12      ; "a rock to be fetched from a repository."
0022    CAT      5   5   6
0023    CALL     2   2   4
0024    MOV      3   2
0025    TGETS    2   2  13  ; "args"
0026    KSTR     4  14      ; "?"
0027    CALL     2   2   3
0028    MOV      3   2
0029    TGETS    2   2  15  ; "action"
0030    UGET     4   0      ; util
0031    TGETS    4   4  16  ; "namespaced_name_action"
0032    CALL     2   1   3
0033    MOV      3   1
0034    TGETS    2   1   9  ; "argument"
0035    KSTR     4  17      ; "version"
0036    KSTR     5  18      ; "Rock version."
0037    CALL     2   2   4
0038    MOV      3   2
0039    TGETS    2   2  13  ; "args"
0040    KSTR     4  14      ; "?"
0041    CALL     2   1   3
0042    MOV      3   1
0043    TGETS    2   1  19  ; "flag"
0044    KSTR     4  20      ; "--only-deps"
0045    KSTR     5  21      ; "Install only the dependencies of the roc"~
0046    CALL     2   1   4
0047    MOV      3   1
0048    TGETS    2   1  22  ; "option"
0049    KSTR     4  23      ; "--branch"
0050    KSTR     5  24      ; "Override the `source.branch` field in th"~
0051    KSTR     6  25      ; "rockspec. Allows to specify a different "~
0052    KSTR     7  26      ; "for "dev" rocks."
0053    CAT      5   5   7
0054    CALL     2   2   4
0055    MOV      3   2
0056    TGETS    2   2  27  ; "argname"
0057    KSTR     4  28      ; "<name>"
0058    CALL     2   1   3
0059    MOV      3   0
0060    TGETS    2   0  19  ; "flag"
0061    KSTR     4  29      ; "--pin"
0062    KSTR     5  30      ; "Create a luarocks.lock file listing the "~
0063    KSTR     6  31      ; "versions of each dependency found for th"~
0064    KSTR     7  32      ; "and store it in the rock's directory. "
0065    KSTR     8  33      ; "Ignores any existing luarocks.lock file "~
0066    CAT      5   5   8
0067    CALL     2   1   4
0068    UGET     2   1      ; make
0069    TGETS    2   2  34  ; "cmd_options"
0070    MOV      3   1
0071    CALL     2   1   2
0072    RET0     0   1

-- BYTECODE -- build.lua:51-78
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    MOV      4   1
0013    TGETS    3   1   1  ; "type"
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "build.opts"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    KNIL     2   5
0022    UGET     6   0      ; fetch
0023    TGETS    6   6   4  ; "fetch_and_unpack_rock"
0024    MOV      7   0
0025    KPRI     8   0
0026    TGETS    9   1   5  ; "verify"
0027    CALL     6   4   4
0028    MOV      4   8
0029    MOV      3   7
0030    MOV      5   6
0031    IST          5
0032    JMP      6 => 0037
0033    KPRI     6   0
0034    MOV      7   3
0035    MOV      8   4
0036    RET      6   4
0037 => UGET     6   1      ; path
0038    TGETS    6   6   6  ; "rockspec_name_from_rock"
0039    MOV      7   0
0040    CALL     6   2   2
0041    UGET     7   2      ; fs
0042    TGETS    7   7   7  ; "change_dir"
0043    MOV      8   5
0044    CALL     7   3   2
0045    MOV      3   8
0046    MOV      2   7
0047    IST          2
0048    JMP      7 => 0052
0049    KPRI     7   0
0050    MOV      8   3
0051    RET      7   3
0052 => KPRI     7   0
0053    UGET     8   0      ; fetch
0054    TGETS    8   8   8  ; "load_rockspec"
0055    MOV      9   6
0056    CALL     8   4   2
0057    MOV      4  10
0058    MOV      3   9
0059    MOV      7   8
0060    IST          7
0061    JMP      8 => 0066
0062    KPRI     8   0
0063    MOV      9   3
0064    MOV     10   4
0065    RET      8   4
0066 => UGET     8   3      ; build
0067    TGETS    8   8   9  ; "build_rockspec"
0068    MOV      9   7
0069    MOV     10   1
0070    CALL     8   4   3
0071    MOV      4  10
0072    MOV      3   9
0073    MOV      2   8
0074    UGET     8   2      ; fs
0075    TGETS    8   8  10  ; "pop_dir"
0076    CALL     8   1   1
0077    MOV      8   2
0078    MOV      9   3
0079    MOV     10   4
0080    RET      8   4

-- BYTECODE -- build.lua:80-109
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISEQS    5   2      ; "string"
0016    JMP      5 => 0021
0017    NOT      5   1
0018    JMP      6 => 0022
0019    KPRI     5   1
0020    JMP      6 => 0022
0021 => KPRI     5   2
0022 => CALL     4   1   2
0023    GGET     4   0      ; "assert"
0024    ISEQP    2   0
0025    JMP      5 => 0033
0026    GGET     5   1      ; "type"
0027    MOV      6   2
0028    CALL     5   2   2
0029    ISEQS    5   2      ; "string"
0030    JMP      5 => 0033
0031    KPRI     5   1
0032    JMP      6 => 0034
0033 => KPRI     5   2
0034 => CALL     4   1   2
0035    GGET     4   0      ; "assert"
0036    MOV      6   3
0037    TGETS    5   3   1  ; "type"
0038    CALL     5   2   2
0039    ISEQS    5   3      ; "build.opts"
0040    JMP      5 => 0043
0041    KPRI     5   1
0042    JMP      6 => 0044
0043 => KPRI     5   2
0044 => CALL     4   1   2
0045    KNIL     4   5
0046    MOV      7   0
0047    TGETS    6   0   4  ; "match"
0048    KSTR     8   5      ; "%.rockspec$"
0049    CALL     6   2   3
0050    IST          6
0051    JMP      7 => 0058
0052    MOV      7   0
0053    TGETS    6   0   4  ; "match"
0054    KSTR     8   6      ; "%.rock$"
0055    CALL     6   2   3
0056    ISF          6
0057    JMP      7 => 0060
0058 => MOV      4   0
0059    JMP      6 => 0074
0060 => UGET     6   0      ; search
0061    TGETS    6   6   7  ; "find_src_or_rockspec"
0062    MOV      7   0
0063    MOV      8   1
0064    MOV      9   2
0065    TGETS   10   3   8  ; "check_lua_versions"
0066    CALL     6   3   5
0067    MOV      5   7
0068    MOV      4   6
0069    IST          4
0070    JMP      6 => 0074
0071    KPRI     6   0
0072    MOV      7   5
0073    RET      6   3
0074 => MOV      7   4
0075    TGETS    6   4   4  ; "match"
0076    KSTR     8   5      ; "%.rockspec$"
0077    CALL     6   2   3
0078    ISF          6
0079    JMP      7 => 0097
0080    UGET     6   1      ; fetch
0081    TGETS    6   6   9  ; "load_rockspec"
0082    MOV      7   4
0083    KPRI     8   0
0084    TGETS    9   3  10  ; "verify"
0085    CALL     6   4   4
0086    IST          6
0087    JMP      9 => 0092
0088    KPRI     9   0
0089    MOV     10   7
0090    MOV     11   8
0091    RET      9   4
0092 => UGET     9   2      ; build
0093    TGETS    9   9  11  ; "build_rockspec"
0094    MOV     10   6
0095    MOV     11   3
0096    CALLT    9   3
0097 => MOV      7   4
0098    TGETS    6   4   4  ; "match"
0099    KSTR     8  12      ; "%.src%.rock$"
0100    CALL     6   2   3
0101    ISF          6
0102    JMP      7 => 0105
0103    KPRI     6   1
0104    TSETS    6   3  13  ; "need_to_fetch"
0105 => UGET     6   3      ; build_rock
0106    MOV      7   4
0107    MOV      8   3
0108    CALLT    6   3

-- BYTECODE -- build.lua:139-145
0001    UGET     0   0      ; do_build
0002    UGET     1   1      ; args
0003    TGETS    1   1   0  ; "rock"
0004    UGET     2   1      ; args
0005    TGETS    2   2   1  ; "namespace"
0006    UGET     3   1      ; args
0007    TGETS    3   3   2  ; "version"
0008    UGET     4   2      ; opts
0009    CALL     0   4   5
0010    ISF          0
0011    JMP      3 => 0021
0012    UGET     3   1      ; args
0013    TGETS    3   3   3  ; "no_doc"
0014    ISF          3
0015    JMP      4 => 0021
0016    UGET     3   3      ; util
0017    TGETS    3   3   4  ; "remove_doc_dir"
0018    MOV      4   0
0019    MOV      5   1
0020    CALL     3   1   3
0021 => MOV      3   0
0022    MOV      4   1
0023    MOV      5   2
0024    RET      3   4

-- BYTECODE -- build.lua:117-178
0001    TGETS    1   0   0  ; "rock"
0002    IST          1
0003    JMP      1 => 0008
0004    UGET     1   0      ; make
0005    TGETS    1   1   1  ; "command"
0006    MOV      2   0
0007    UCLO     0 => 0150
0008 => UGET     1   1      ; build
0009    TGETS    1   1   2  ; "opts"
0010    TDUP     2   3
0011    UGET     3   2      ; deps
0012    TGETS    3   3   4  ; "get_deps_mode"
0013    MOV      4   0
0014    CALL     3   2   2
0015    TSETS    3   2   5  ; "deps_mode"
0016    TGETS    3   0   6  ; "only_deps"
0017    ISF          3
0018    JMP      4 => 0024
0019    TGETS    3   0   7  ; "pack_binary_rock"
0020    NOT      3   3
0021    NOT      3   3
0022    NOT      3   3
0023    JMP      4 => 0027
0024 => KPRI     3   1
0025    JMP      4 => 0027
0026    KPRI     3   2
0027 => TSETS    3   2   8  ; "build_only_deps"
0028    TGETS    3   0   9  ; "namespace"
0029    TSETS    3   2   9  ; "namespace"
0030    TGETS    3   0  10  ; "branch"
0031    TSETS    3   2  10  ; "branch"
0032    TGETS    3   0  11  ; "verify"
0033    NOT      3   3
0034    NOT      3   3
0035    TSETS    3   2  11  ; "verify"
0036    TGETS    3   0  12  ; "check_lua_versions"
0037    NOT      3   3
0038    NOT      3   3
0039    TSETS    3   2  12  ; "check_lua_versions"
0040    TGETS    3   0  13  ; "pin"
0041    NOT      3   3
0042    NOT      3   3
0043    TSETS    3   2  13  ; "pin"
0044    CALL     1   2   2
0045    TGETS    2   0  14  ; "sign"
0046    ISF          2
0047    JMP      3 => 0054
0048    TGETS    2   0   7  ; "pack_binary_rock"
0049    IST          2
0050    JMP      2 => 0054
0051    KPRI     2   0
0052    KSTR     3  15      ; "In the build command, --sign is meant to"~
0053    UCLO     0 => 0151
0054 => TGETS    2   0   7  ; "pack_binary_rock"
0055    ISF          2
0056    JMP      3 => 0066
0057    UGET     2   3      ; pack
0058    TGETS    2   2   7  ; "pack_binary_rock"
0059    TGETS    3   0   0  ; "rock"
0060    TGETS    4   0   9  ; "namespace"
0061    TGETS    5   0  16  ; "version"
0062    TGETS    6   0  14  ; "sign"
0063    FNEW     7  17      ; build.lua:139
0064    UCLO     0 => 0065
0065 => CALLT    2   6
0066 => UGET     2   6      ; fs
0067    TGETS    2   2  18  ; "check_command_permissions"
0068    MOV      3   0
0069    CALL     2   3   2
0070    IST          2
0071    JMP      4 => 0079
0072    KPRI     4   0
0073    MOV      5   3
0074    UGET     6   7      ; cmd
0075    TGETS    6   6  19  ; "errorcodes"
0076    TGETS    6   6  20  ; "PERMISSIONDENIED"
0077    UCLO     0 => 0078
0078 => RET      4   4
0079 => UGET     4   4      ; do_build
0080    TGETS    5   0   0  ; "rock"
0081    TGETS    6   0   9  ; "namespace"
0082    TGETS    7   0  16  ; "version"
0083    MOV      8   1
0084    CALL     4   4   5
0085    IST          4
0086    JMP      7 => 0092
0087    KPRI     7   0
0088    MOV      8   5
0089    MOV      9   6
0090    UCLO     0 => 0091
0091 => RET      7   4
0092 => TGETS    7   0  21  ; "no_doc"
0093    ISF          7
0094    JMP      8 => 0100
0095    UGET     7   5      ; util
0096    TGETS    7   7  22  ; "remove_doc_dir"
0097    MOV      8   4
0098    MOV      9   5
0099    CALL     7   1   3
0100 => TGETS    7   1   8  ; "build_only_deps"
0101    ISF          7
0102    JMP      8 => 0115
0103    UGET     7   5      ; util
0104    TGETS    7   7  23  ; "printout"
0105    KSTR     8  24      ; "Stopping after installing dependencies f"~
0106    MOV      9   4
0107    KSTR    10  25      ; " "
0108    MOV     11   5
0109    CAT      8   8  11
0110    CALL     7   1   2
0111    UGET     7   5      ; util
0112    TGETS    7   7  23  ; "printout"
0113    CALL     7   1   1
0114    JMP      7 => 0135
0115 => TGETS    7   0  26  ; "keep"
0116    IST          7
0117    JMP      7 => 0135
0118    UGET     7   8      ; cfg
0119    TGETS    7   7  27  ; "keep_other_versions"
0120    IST          7
0121    JMP      7 => 0135
0122    UGET     7   9      ; remove
0123    TGETS    7   7  28  ; "remove_other_versions"
0124    MOV      8   4
0125    MOV      9   5
0126    TGETS   10   0  29  ; "force"
0127    TGETS   11   0  30  ; "force_fast"
0128    CALL     7   3   5
0129    IST          7
0130    JMP      9 => 0135
0131    UGET     9   5      ; util
0132    TGETS    9   9  31  ; "printerr"
0133    MOV     10   8
0134    CALL     9   1   2
0135 => TGETS    7   1   5  ; "deps_mode"
0136    ISEQS    7  32      ; "none"
0137    JMP      7 => 0146
0138    UGET     7  10      ; writer
0139    TGETS    7   7  33  ; "check_dependencies"
0140    KPRI     8   0
0141    UGET     9   2      ; deps
0142    TGETS    9   9   4  ; "get_deps_mode"
0143    MOV     10   0
0144    CALL     9   0   2
0145    CALLM    7   1   1
0146 => MOV      7   4
0147    MOV      8   5
0148    UCLO     0 => 0149
0149 => RET      7   3
0150 => CALLT    1   2
0151 => RET      2   3

-- BYTECODE -- build.lua:0-181
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.pack"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.path"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.util"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.fetch"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.deps"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.remove"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.core.cfg"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.build"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.manif.writer"
0031    CALL    10   2   2
0032    GGET    11   0      ; "require"
0033    KSTR    12  11      ; "luarocks.search"
0034    CALL    11   2   2
0035    GGET    12   0      ; "require"
0036    KSTR    13  12      ; "luarocks.cmd.make"
0037    CALL    12   2   2
0038    GGET    13   0      ; "require"
0039    KSTR    14  13      ; "luarocks.cmd"
0040    CALL    13   2   2
0041    FNEW    14  15      ; build.lua:20
0042    TSETS   14   0  14  ; "add_to_parser"
0043    FNEW    14  16      ; build.lua:51
0044    FNEW    15  17      ; build.lua:80
0045    FNEW    16  19      ; build.lua:117
0046    TSETS   16   0  18  ; "command"
0047    UCLO     0 => 0048
0048 => RET1     0   2

-----------------------
-- BYTECODE -- unpack.lua:13-29
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "unpack"
0004    KSTR     4   2      ; "Unpacks the contents of a rock in a newl"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Unpack the contents of a rock."
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "argument"
0015    KSTR     4   7      ; "rock"
0016    KSTR     5   8      ; "A rock file or the name of a rock."
0017    CALL     2   2   4
0018    MOV      3   2
0019    TGETS    2   2   9  ; "action"
0020    UGET     4   0      ; util
0021    TGETS    4   4  10  ; "namespaced_name_action"
0022    CALL     2   1   3
0023    MOV      3   1
0024    TGETS    2   1   6  ; "argument"
0025    KSTR     4  11      ; "version"
0026    KSTR     5  12      ; "Rock version."
0027    CALL     2   2   4
0028    MOV      3   2
0029    TGETS    2   2  13  ; "args"
0030    KSTR     4  14      ; "?"
0031    CALL     2   1   3
0032    MOV      3   1
0033    TGETS    2   1  15  ; "flag"
0034    KSTR     4  16      ; "--force"
0035    KSTR     5  17      ; "Unpack files even if the output director"~
0036    CALL     2   1   4
0037    MOV      3   1
0038    TGETS    2   1  15  ; "flag"
0039    KSTR     4  18      ; "--check-lua-versions"
0040    KSTR     5  19      ; "If the rock can't be found, check reposi"~
0041    KSTR     6  20      ; "and report if it is available for anothe"~
0042    CAT      5   5   6
0043    CALL     2   1   4
0044    RET0     0   1

-- BYTECODE -- unpack.lua:37-57
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "string"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    UGET     2   0      ; fetch
0022    TGETS    2   2   3  ; "load_rockspec"
0023    MOV      3   0
0024    CALL     2   3   2
0025    IST          2
0026    JMP      4 => 0034
0027    KPRI     4   0
0028    KSTR     5   4      ; "Failed loading rockspec "
0029    MOV      6   0
0030    KSTR     7   5      ; ": "
0031    MOV      8   3
0032    CAT      5   5   8
0033    RET      4   3
0034 => UGET     4   1      ; fs
0035    TGETS    4   4   6  ; "change_dir"
0036    MOV      5   1
0037    CALL     4   3   2
0038    IST          4
0039    JMP      6 => 0043
0040    KPRI     6   0
0041    MOV      7   5
0042    RET      6   3
0043 => UGET     6   0      ; fetch
0044    TGETS    6   6   7  ; "fetch_sources"
0045    MOV      7   2
0046    KPRI     8   2
0047    KSTR     9   8      ; "."
0048    CALL     6   3   4
0049    IST          6
0050    JMP      8 => 0054
0051    KPRI     8   0
0052    MOV      9   7
0053    RET      8   3
0054 => UGET     8   1      ; fs
0055    TGETS    8   8   6  ; "change_dir"
0056    MOV      9   7
0057    CALL     8   3   2
0058    MOV      5   9
0059    MOV      6   8
0060    IST          6
0061    JMP      8 => 0065
0062    KPRI     8   0
0063    MOV      9   5
0064    RET      8   3
0065 => UGET     8   2      ; build
0066    TGETS    8   8   9  ; "apply_patches"
0067    MOV      9   2
0068    CALL     8   3   2
0069    MOV      5   9
0070    MOV      6   8
0071    UGET     8   1      ; fs
0072    TGETS    8   8  10  ; "pop_dir"
0073    CALL     8   1   1
0074    IST          6
0075    JMP      8 => 0079
0076    KPRI     8   0
0077    MOV      9   5
0078    RET      8   3
0079 => RET1     2   2

-- BYTECODE -- unpack.lua:66-95
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    UGET     3   0      ; fetch
0022    TGETS    3   3   3  ; "fetch_and_unpack_rock"
0023    MOV      4   0
0024    MOV      5   1
0025    CALL     3   4   3
0026    IST          3
0027    JMP      6 => 0032
0028    KPRI     6   0
0029    MOV      7   4
0030    MOV      8   5
0031    RET      6   4
0032 => UGET     6   1      ; fs
0033    TGETS    6   6   4  ; "change_dir"
0034    MOV      7   1
0035    CALL     6   3   2
0036    MOV      4   7
0037    MOV      3   6
0038    IST          3
0039    JMP      6 => 0043
0040    KPRI     6   0
0041    MOV      7   4
0042    RET      6   3
0043 => MOV      6   1
0044    KSTR     7   5      ; ".rockspec"
0045    CAT      6   6   7
0046    UGET     7   0      ; fetch
0047    TGETS    7   7   6  ; "load_rockspec"
0048    MOV      8   6
0049    CALL     7   3   2
0050    IST          7
0051    JMP      9 => 0059
0052    KPRI     9   0
0053    KSTR    10   7      ; "Failed loading rockspec "
0054    MOV     11   6
0055    KSTR    12   8      ; ": "
0056    MOV     13   8
0057    CAT     10  10  13
0058    RET      9   3
0059 => ISNES    2   9      ; "src"
0060    JMP      9 => 0101
0061    TGETS    9   7  10  ; "source"
0062    TGETS    9   9  11  ; "file"
0063    ISF          9
0064    JMP     10 => 0101
0065    UGET     9   1      ; fs
0066    TGETS    9   9  12  ; "unpack_archive"
0067    TGETS   10   7  10  ; "source"
0068    TGETS   10  10  11  ; "file"
0069    CALL     9   3   2
0070    IST          9
0071    JMP     11 => 0075
0072    KPRI    11   0
0073    MOV     12  10
0074    RET     11   3
0075 => UGET    11   1      ; fs
0076    TGETS   11  11   4  ; "change_dir"
0077    TGETS   12   7  10  ; "source"
0078    TGETS   12  12  13  ; "dir"
0079    CALL    11   3   2
0080    MOV     10  12
0081    MOV      9  11
0082    IST          9
0083    JMP     11 => 0087
0084    KPRI    11   0
0085    MOV     12  10
0086    RET     11   3
0087 => UGET    11   2      ; build
0088    TGETS   11  11  14  ; "apply_patches"
0089    MOV     12   7
0090    CALL    11   3   2
0091    MOV     10  12
0092    MOV      9  11
0093    UGET    11   1      ; fs
0094    TGETS   11  11  15  ; "pop_dir"
0095    CALL    11   1   1
0096    IST          9
0097    JMP     11 => 0101
0098    KPRI    11   0
0099    MOV     12  10
0100    RET     11   3
0101 => RET1     7   2

-- BYTECODE -- unpack.lua:103-149
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    UGET     2   0      ; dir
0012    TGETS    2   2   3  ; "base_name"
0013    MOV      3   0
0014    CALL     2   2   2
0015    MOV      4   2
0016    TGETS    3   2   4  ; "match"
0017    KSTR     5   5      ; "(.*)%.([^.]+)%.(rock)$"
0018    CALL     3   4   3
0019    IST          5
0020    JMP      6 => 0028
0021    MOV      7   2
0022    TGETS    6   2   4  ; "match"
0023    KSTR     8   6      ; "(.*)%.(rockspec)$"
0024    CALL     6   3   3
0025    MOV      5   7
0026    MOV      3   6
0027    KSTR     4   7      ; "rockspec"
0028 => IST          5
0029    JMP      6 => 0035
0030    KPRI     6   0
0031    MOV      7   0
0032    KSTR     8   8      ; " does not seem to be a valid filename."
0033    CAT      7   7   8
0034    RET      6   3
0035 => UGET     6   1      ; fs
0036    TGETS    6   6   9  ; "exists"
0037    MOV      7   3
0038    CALL     6   2   2
0039    ISF          6
0040    JMP      7 => 0049
0041    IST          1
0042    JMP      7 => 0049
0043    KPRI     7   0
0044    KSTR     8  10      ; "Directory "
0045    MOV      9   3
0046    KSTR    10  11      ; " already exists."
0047    CAT      8   8  10
0048    RET      7   3
0049 => IST          6
0050    JMP      7 => 0060
0051    UGET     7   1      ; fs
0052    TGETS    7   7  12  ; "make_dir"
0053    MOV      8   3
0054    CALL     7   3   2
0055    IST          7
0056    JMP      9 => 0060
0057    KPRI     9   0
0058    MOV     10   8
0059    RET      9   3
0060 => UGET     7   2      ; util
0061    TGETS    7   7  13  ; "schedule_function"
0062    UGET     8   1      ; fs
0063    TGETS    8   8  14  ; "delete"
0064    UGET     9   1      ; fs
0065    TGETS    9   9  15  ; "absolute_name"
0066    MOV     10   3
0067    CALL     9   0   2
0068    CALLM    7   2   1
0069    KNIL     8   9
0070    ISNES    5  16      ; "rock"
0071    JMP     10 => 0080
0072    UGET    10   3      ; unpack_rock
0073    MOV     11   0
0074    MOV     12   3
0075    MOV     13   4
0076    CALL    10   3   4
0077    MOV      9  11
0078    MOV      8  10
0079    JMP     10 => 0088
0080 => ISNES    5   7      ; "rockspec"
0081    JMP     10 => 0088
0082    UGET    10   4      ; unpack_rockspec
0083    MOV     11   0
0084    MOV     12   3
0085    CALL    10   3   3
0086    MOV      9  11
0087    MOV      8  10
0088 => IST          8
0089    JMP     10 => 0093
0090    KPRI    10   0
0091    MOV     11   9
0092    RET     10   3
0093 => ISEQS    4  17      ; "src"
0094    JMP     10 => 0097
0095    ISNES    4   7      ; "rockspec"
0096    JMP     10 => 0133
0097 => TGETS   10   8  18  ; "source"
0098    TGETS   10  10  19  ; "dir"
0099    ISEQS   10  20      ; "."
0100    JMP     10 => 0113
0101    UGET    10   1      ; fs
0102    TGETS   10  10  21  ; "copy"
0103    TGETS   11   8  22  ; "local_abs_filename"
0104    TGETS   12   8  18  ; "source"
0105    TGETS   12  12  19  ; "dir"
0106    KSTR    13  23      ; "read"
0107    CALL    10   2   4
0108    IST         10
0109    JMP     11 => 0113
0110    KPRI    11   0
0111    KSTR    12  24      ; "Failed copying unpacked rockspec into un"~
0112    RET     11   3
0113 => UGET    10   2      ; util
0114    TGETS   10  10  25  ; "printout"
0115    CALL    10   1   1
0116    UGET    10   2      ; util
0117    TGETS   10  10  25  ; "printout"
0118    KSTR    11  26      ; "Done. You may now enter directory "
0119    CALL    10   1   2
0120    UGET    10   2      ; util
0121    TGETS   10  10  25  ; "printout"
0122    UGET    11   0      ; dir
0123    TGETS   11  11  27  ; "path"
0124    MOV     12   3
0125    TGETS   13   8  18  ; "source"
0126    TGETS   13  13  19  ; "dir"
0127    CALL    11   0   3
0128    CALLM   10   1   0
0129    UGET    10   2      ; util
0130    TGETS   10  10  25  ; "printout"
0131    KSTR    11  28      ; "and type 'luarocks make' to build."
0132    CALL    10   1   2
0133 => UGET    10   2      ; util
0134    TGETS   10  10  29  ; "remove_scheduled_function"
0135    MOV     11   7
0136    CALL    10   1   2
0137    KPRI    10   2
0138    RET1    10   2

-- BYTECODE -- unpack.lua:154-166
0001    KNIL     1   2
0002    TGETS    3   0   0  ; "rock"
0003    MOV      4   3
0004    TGETS    3   3   1  ; "match"
0005    KSTR     5   2      ; ".*%.rock"
0006    CALL     3   2   3
0007    IST          3
0008    JMP      4 => 0016
0009    TGETS    3   0   0  ; "rock"
0010    MOV      4   3
0011    TGETS    3   3   1  ; "match"
0012    KSTR     5   3      ; ".*%.rockspec"
0013    CALL     3   2   3
0014    ISF          3
0015    JMP      4 => 0018
0016 => TGETS    1   0   0  ; "rock"
0017    JMP      3 => 0032
0018 => UGET     3   0      ; search
0019    TGETS    3   3   4  ; "find_src_or_rockspec"
0020    TGETS    4   0   0  ; "rock"
0021    TGETS    5   0   5  ; "namespace"
0022    TGETS    6   0   6  ; "version"
0023    TGETS    7   0   7  ; "check_lua_versions"
0024    CALL     3   3   5
0025    MOV      2   4
0026    MOV      1   3
0027    IST          1
0028    JMP      3 => 0032
0029    KPRI     3   0
0030    MOV      4   2
0031    RET      3   3
0032 => UGET     3   1      ; run_unpacker
0033    MOV      4   1
0034    TGETS    5   0   8  ; "force"
0035    CALLT    3   3

-- BYTECODE -- unpack.lua:0-169
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fetch"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fs"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.util"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.build"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.dir"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.search"
0019    CALL     6   2   2
0020    FNEW     7   8      ; unpack.lua:13
0021    TSETS    7   0   7  ; "add_to_parser"
0022    FNEW     7   9      ; unpack.lua:37
0023    FNEW     8  10      ; unpack.lua:66
0024    FNEW     9  11      ; unpack.lua:103
0025    FNEW    10  13      ; unpack.lua:154
0026    TSETS   10   0  12  ; "command"
0027    UCLO     0 => 0028
0028 => RET1     0   2

-----------------------
-- BYTECODE -- show.lua:16-43
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "show"
0004    KSTR     4   2      ; "Show information about an installed rock"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Show information about an installed rock"~
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "argument"
0015    KSTR     4   7      ; "rock"
0016    KSTR     5   8      ; "Name of an installed rock."
0017    CALL     2   2   4
0018    MOV      3   2
0019    TGETS    2   2   9  ; "action"
0020    UGET     4   0      ; util
0021    TGETS    4   4  10  ; "namespaced_name_action"
0022    CALL     2   1   3
0023    MOV      3   1
0024    TGETS    2   1   6  ; "argument"
0025    KSTR     4  11      ; "version"
0026    KSTR     5  12      ; "Rock version."
0027    CALL     2   2   4
0028    MOV      3   2
0029    TGETS    2   2  13  ; "args"
0030    KSTR     4  14      ; "?"
0031    CALL     2   1   3
0032    MOV      3   1
0033    TGETS    2   1  15  ; "flag"
0034    KSTR     4  16      ; "--home"
0035    KSTR     5  17      ; "Show home page of project."
0036    CALL     2   1   4
0037    MOV      3   1
0038    TGETS    2   1  15  ; "flag"
0039    KSTR     4  18      ; "--modules"
0040    KSTR     5  19      ; "Show all modules provided by the package"~
0041    CALL     2   1   4
0042    MOV      3   1
0043    TGETS    2   1  15  ; "flag"
0044    KSTR     4  20      ; "--deps"
0045    KSTR     5  21      ; "Show packages the package depends on."
0046    CALL     2   1   4
0047    MOV      3   1
0048    TGETS    2   1  15  ; "flag"
0049    KSTR     4  22      ; "--build-deps"
0050    KSTR     5  23      ; "Show build-only dependencies for the pac"~
0051    CALL     2   1   4
0052    MOV      3   1
0053    TGETS    2   1  15  ; "flag"
0054    KSTR     4  24      ; "--test-deps"
0055    KSTR     5  25      ; "Show dependencies for testing the packag"~
0056    CALL     2   1   4
0057    MOV      3   1
0058    TGETS    2   1  15  ; "flag"
0059    KSTR     4  26      ; "--rockspec"
0060    KSTR     5  27      ; "Show the full path of the rockspec file."
0061    CALL     2   1   4
0062    MOV      3   1
0063    TGETS    2   1  15  ; "flag"
0064    KSTR     4  28      ; "--mversion"
0065    KSTR     5  29      ; "Show the package version."
0066    CALL     2   1   4
0067    MOV      3   1
0068    TGETS    2   1  15  ; "flag"
0069    KSTR     4  30      ; "--rock-tree"
0070    KSTR     5  31      ; "Show local tree where rock is installed."
0071    CALL     2   1   4
0072    MOV      3   1
0073    TGETS    2   1  15  ; "flag"
0074    KSTR     4  32      ; "--rock-namespace"
0075    KSTR     5  33      ; "Show rock namespace."
0076    CALL     2   1   4
0077    MOV      3   1
0078    TGETS    2   1  15  ; "flag"
0079    KSTR     4  34      ; "--rock-dir"
0080    KSTR     5  35      ; "Show data directory of the installed roc"~
0081    CALL     2   1   4
0082    MOV      3   1
0083    TGETS    2   1  15  ; "flag"
0084    KSTR     4  36      ; "--rock-license"
0085    KSTR     5  37      ; "Show rock license."
0086    CALL     2   1   4
0087    MOV      3   1
0088    TGETS    2   1  15  ; "flag"
0089    KSTR     4  38      ; "--issues"
0090    KSTR     5  39      ; "Show URL for project's issue tracker."
0091    CALL     2   1   4
0092    MOV      3   1
0093    TGETS    2   1  15  ; "flag"
0094    KSTR     4  40      ; "--labels"
0095    KSTR     5  41      ; "List the labels of the rock."
0096    CALL     2   1   4
0097    MOV      3   1
0098    TGETS    2   1  15  ; "flag"
0099    KSTR     4  42      ; "--porcelain"
0100    KSTR     5  43      ; "Produce machine-friendly output."
0101    CALL     2   1   4
0102    RET0     0   1

-- BYTECODE -- show.lua:97-101
0001    UGET     2   0      ; util
0002    TGETS    2   2   0  ; "keys"
0003    MOV      3   0
0004    CALL     2   2   2
0005    GGET     3   1      ; "table"
0006    TGETS    3   3   2  ; "sort"
0007    MOV      4   2
0008    CALL     3   1   2
0009    GGET     3   1      ; "table"
0010    TGETS    3   3   3  ; "concat"
0011    MOV      4   2
0012    ISTC     5   1
0013    JMP      5 => 0015
0014    KSTR     5   4      ; " "
0015 => CALLT    3   3

-- BYTECODE -- show.lua:103-116
0001    GGET     1   0      ; "tonumber"
0002    GGET     2   1      ; "os"
0003    TGETS    2   2   2  ; "getenv"
0004    KSTR     3   3      ; "COLUMNS"
0005    CALL     2   0   2
0006    CALLM    1   2   0
0007    IST          1
0008    JMP      2 => 0010
0009    KSHORT   1  80
0010 => KSHORT   2  80
0011    ISGE     2   1
0012    JMP      2 => 0014
0013    KSHORT   1  80
0014 => LEN      2   0
0015    ISGE     1   2
0016    JMP      2 => 0048
0017    MOV      2   1
0018 => KSHORT   3   0
0019    ISGE     3   2
0020    JMP      3 => 0031
0021    MOV      4   0
0022    TGETS    3   0   4  ; "sub"
0023    MOV      5   2
0024    MOV      6   2
0025    CALL     3   2   4
0026    ISEQS    3   5      ; " "
0027    JMP      3 => 0031
0028    LOOP     3 => 0031
0029    SUBVN    2   2   0  ; 1
0030    JMP      3 => 0018
0031 => KSHORT   3   0
0032    ISGE     3   2
0033    JMP      3 => 0048
0034    MOV      4   0
0035    TGETS    3   0   4  ; "sub"
0036    KSHORT   5   1
0037    SUBVN    6   2   0  ; 1
0038    CALL     3   2   4
0039    KSTR     4   6      ; "\n"
0040    UGET     5   0      ; word_wrap
0041    MOV      7   0
0042    TGETS    6   0   4  ; "sub"
0043    ADDVN    8   2   0  ; 1
0044    CALL     6   0   3
0045    CALLM    5   2   0
0046    CAT      3   3   5
0047    RET1     3   2
0048 => RET1     0   2

-- BYTECODE -- show.lua:118-125
0001    MOV      2   0
0002    TGETS    1   0   0  ; "gsub"
0003    KSTR     3   1      ; "^%s*"
0004    KSTR     4   2      ; ""
0005    CALL     1   2   4
0006    MOV      2   1
0007    TGETS    1   1   0  ; "gsub"
0008    KSTR     3   3      ; "%s$"
0009    KSTR     4   2      ; ""
0010    CALL     1   2   4
0011    MOV      2   1
0012    TGETS    1   1   0  ; "gsub"
0013    KSTR     3   4      ; "\n[ \t]+"
0014    KSTR     4   5      ; "\n"
0015    CALL     1   2   4
0016    MOV      2   1
0017    TGETS    1   1   0  ; "gsub"
0018    KSTR     3   6      ; "([^\n])\n([^\n])"
0019    KSTR     4   7      ; "%1 %2"
0020    CALL     1   2   4
0021    MOV      0   1
0022    UGET     1   0      ; util
0023    TGETS    1   1   8  ; "split_string"
0024    MOV      2   0
0025    KSTR     3   9      ; "\n\n"
0026    CALL     1   2   3
0027    GGET     2  10      ; "ipairs"
0028    MOV      3   1
0029    CALL     2   4   2
0030    JMP      5 => 0035
0031 => UGET     7   1      ; word_wrap
0032    MOV      8   6
0033    CALL     7   2   2
0034    TSETV    7   1   5
0035 => ITERC    5   3   3
0036    ITERL    5 => 0031
0037    GGET     2  11      ; "table"
0038    TGETS    2   2  12  ; "concat"
0039    MOV      3   1
0040    KSTR     4   9      ; "\n\n"
0041    CALL     2   2   3
0042    MOV      3   2
0043    TGETS    2   2   0  ; "gsub"
0044    KSTR     4   3      ; "%s$"
0045    KSTR     5   2      ; ""
0046    CALL     2   2   4
0047    RET1     2   2

-- BYTECODE -- show.lua:127-136
0001    KNIL     2   3
0002    UGET     4   0      ; util
0003    TGETS    4   4   0  ; "get_rocks_provided"
0004    CALL     4   2   1
0005    TGETS    5   0   1  ; "name"
0006    TGETV    5   4   5
0007    ISF          5
0008    JMP      6 => 0014
0009    KPRI     5   2
0010    TGETS    6   0   1  ; "name"
0011    TGETV    3   4   6
0012    MOV      2   5
0013    JMP      5 => 0021
0014 => UGET     5   1      ; search
0015    TGETS    5   5   2  ; "pick_installed_rock"
0016    MOV      6   0
0017    MOV      7   1
0018    CALL     5   3   3
0019    MOV      3   6
0020    MOV      2   5
0021 => ISF          2
0022    JMP      5 => 0028
0023    KSTR     5   3      ; "using "
0024    MOV      6   3
0025    CAT      5   5   6
0026    IST          5
0027    JMP      6 => 0029
0028 => KSTR     5   4      ; "missing"
0029 => RET1     5   2

-- BYTECODE -- show.lua:138-158
0001    TNEW     2   0
0002    MOV      4   0
0003    TGETS    3   0   0  ; "gmatch"
0004    KSTR     5   1      ; "(.)([a-z]*)%s*:([^\n]*)\n"
0005    CALL     3   4   3
0006    JMP      6 => 0075
0007 => MOV     10   8
0008    TGETS    9   8   2  ; "gsub"
0009    KSTR    11   3      ; "\t"
0010    KSTR    12   4      ; "\t"
0011    CALL     9   2   4
0012    MOV      8   9
0013    TGETV    9   1   7
0014    ISNES    6   5      ; " "
0015    JMP     10 => 0022
0016    GGET    10   6      ; "table"
0017    TGETS   10  10   7  ; "insert"
0018    MOV     11   2
0019    MOV     12   8
0020    CALL    10   1   3
0021    JMP     10 => 0075
0022 => ISEQS    6   8      ; "?"
0023    JMP     10 => 0028
0024    ISEQS    6   9      ; "*"
0025    JMP     10 => 0028
0026    ISNES    6  10      ; "!"
0027    JMP     10 => 0075
0028 => ISNES    6  10      ; "!"
0029    JMP     10 => 0032
0030    ISEQP    9   0
0031    JMP     10 => 0049
0032 => ISEQS    6  10      ; "!"
0033    JMP     10 => 0075
0034    GGET    10  11      ; "type"
0035    MOV     11   9
0036    CALL    10   2   2
0037    ISEQS   10  12      ; "string"
0038    JMP     10 => 0049
0039    GGET    10  11      ; "type"
0040    MOV     11   9
0041    CALL    10   2   2
0042    ISNES   10   6      ; "table"
0043    JMP     10 => 0075
0044    GGET    10  13      ; "next"
0045    MOV     11   9
0046    CALL    10   2   2
0047    ISF         10
0048    JMP     11 => 0075
0049 => ISNES    6   9      ; "*"
0050    JMP     10 => 0054
0051    LEN     10   9
0052    IST         10
0053    JMP     11 => 0055
0054 => KSHORT  10   1
0055 => KSHORT  11   1
0056    MOV     12  10
0057    KSHORT  13   1
0058    FORI    11 => 0075
0059 => ISNES    6   9      ; "*"
0060    JMP     15 => 0064
0061    TGETV   15   9  14
0062    IST         15
0063    JMP     16 => 0065
0064 => MOV     15   1
0065 => GGET    16   6      ; "table"
0066    TGETS   16  16   7  ; "insert"
0067    MOV     17   2
0068    MOV     19   8
0069    TGETS   18   8   2  ; "gsub"
0070    KSTR    20  14      ; "${([a-z]+)}"
0071    MOV     21  15
0072    CALL    18   2   4
0073    CALL    16   1   3
0074    FORL    11 => 0059
0075 => ITERC    6   4   3
0076    ITERL    6 => 0007
0077    GGET     3   6      ; "table"
0078    TGETS    3   3  15  ; "concat"
0079    MOV      4   2
0080    KSTR     5  16      ; "\n"
0081    CALLT    3   3

-- BYTECODE -- show.lua:160-166
0001    UGET     5   0      ; dir
0002    TGETS    5   5   0  ; "path"
0003    MOV      6   2
0004    MOV      7   3
0005    CALL     5   2   3
0006    MOV      3   5
0007    UGET     5   1      ; path
0008    TGETS    5   5   1  ; "versioned_name"
0009    MOV      6   3
0010    MOV      7   2
0011    MOV      8   0
0012    MOV      9   1
0013    CALL     5   2   5
0014    UGET     6   2      ; fs
0015    TGETS    6   6   2  ; "exists"
0016    MOV      7   5
0017    CALL     6   2   2
0018    ISF          6
0019    JMP      7 => 0022
0020    ISTC     6   5
0021    JMP      6 => 0023
0022 => MOV      6   3
0023 => ISTC     7   4
0024    JMP      7 => 0026
0025    KSTR     7   3      ; ""
0026 => CAT      6   6   7
0027    RET1     6   2

-- BYTECODE -- show.lua:174-179
0001    GGET     1   0      ; "table"
0002    TGETS    1   1   1  ; "insert"
0003    UGET     2   0      ; ret
0004    TDUP     3   3
0005    UGET     4   1      ; path
0006    TGETS    4   4   2  ; "path_to_module"
0007    MOV      5   0
0008    CALL     4   2   2
0009    TSETS    4   3   4  ; "name"
0010    UGET     4   2      ; adjust_path
0011    UGET     5   3      ; name
0012    UGET     6   4      ; version
0013    UGET     7   5      ; lua_dir
0014    MOV      8   0
0015    CALL     4   2   5
0016    TSETS    4   3   5  ; "file"
0017    CALL     1   1   3
0018    RET0     0   1

-- BYTECODE -- show.lua:180-185
0001    GGET     1   0      ; "table"
0002    TGETS    1   1   1  ; "insert"
0003    UGET     2   0      ; ret
0004    TDUP     3   3
0005    UGET     4   1      ; path
0006    TGETS    4   4   2  ; "path_to_module"
0007    MOV      5   0
0008    CALL     4   2   2
0009    TSETS    4   3   4  ; "name"
0010    UGET     4   2      ; adjust_path
0011    UGET     5   3      ; name
0012    UGET     6   4      ; version
0013    UGET     7   5      ; lib_dir
0014    MOV      8   0
0015    CALL     4   2   5
0016    TSETS    4   3   5  ; "file"
0017    CALL     1   1   3
0018    RET0     0   1

-- BYTECODE -- show.lua:186-191
0001    TGETS    2   0   0  ; "name"
0002    TGETS    3   1   0  ; "name"
0003    ISNEV    2   3
0004    JMP      2 => 0013
0005    TGETS    2   0   1  ; "file"
0006    TGETS    3   1   1  ; "file"
0007    ISLT     2   3
0008    JMP      2 => 0011
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => RET1     2   2
0013 => TGETS    2   0   0  ; "name"
0014    TGETS    3   1   0  ; "name"
0015    ISLT     2   3
0016    JMP      2 => 0019
0017    KPRI     2   1
0018    JMP      3 => 0020
0019 => KPRI     2   2
0020 => RET1     2   2

-- BYTECODE -- show.lua:168-193
0001    TNEW     3   0
0002    UGET     4   0      ; manif
0003    TGETS    4   4   0  ; "load_rock_manifest"
0004    MOV      5   0
0005    MOV      6   1
0006    MOV      7   2
0007    CALL     4   2   4
0008    UGET     5   1      ; path
0009    TGETS    5   5   1  ; "deploy_lua_dir"
0010    MOV      6   2
0011    CALL     5   2   2
0012    UGET     6   1      ; path
0013    TGETS    6   6   2  ; "deploy_lib_dir"
0014    MOV      7   2
0015    CALL     6   2   2
0016    UGET     7   2      ; repos
0017    TGETS    7   7   3  ; "recurse_rock_manifest_entry"
0018    TGETS    8   4   4  ; "lua"
0019    FNEW     9   5      ; show.lua:174
0020    CALL     7   1   3
0021    UGET     7   2      ; repos
0022    TGETS    7   7   3  ; "recurse_rock_manifest_entry"
0023    TGETS    8   4   6  ; "lib"
0024    FNEW     9   7      ; show.lua:180
0025    CALL     7   1   3
0026    GGET     7   8      ; "table"
0027    TGETS    7   7   9  ; "sort"
0028    MOV      8   3
0029    FNEW     9  10      ; show.lua:186
0030    CALL     7   1   3
0031    UCLO     0 => 0032
0032 => RET1     3   2

-- BYTECODE -- show.lua:200-206
0001    UGET     1   0      ; adjust_path
0002    UGET     2   1      ; name
0003    UGET     3   2      ; version
0004    UGET     4   3      ; bin_dir
0005    MOV      5   0
0006    CALL     1   2   5
0007    MOV      0   1
0008    GGET     1   0      ; "table"
0009    TGETS    1   1   1  ; "insert"
0010    UGET     2   4      ; ret
0011    TDUP     3   2
0012    TSETS    0   3   3  ; "name"
0013    UGET     4   0      ; adjust_path
0014    UGET     5   1      ; name
0015    UGET     6   2      ; version
0016    UGET     7   3      ; bin_dir
0017    MOV      8   0
0018    UGET     9   5      ; cfg
0019    TGETS    9   9   4  ; "wrapper_suffix"
0020    CALL     4   2   6
0021    TSETS    4   3   5  ; "file"
0022    CALL     1   1   3
0023    RET0     0   1

-- BYTECODE -- show.lua:207-212
0001    TGETS    2   0   0  ; "name"
0002    TGETS    3   1   0  ; "name"
0003    ISNEV    2   3
0004    JMP      2 => 0013
0005    TGETS    2   0   1  ; "file"
0006    TGETS    3   1   1  ; "file"
0007    ISLT     2   3
0008    JMP      2 => 0011
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => RET1     2   2
0013 => TGETS    2   0   0  ; "name"
0014    TGETS    3   1   0  ; "name"
0015    ISLT     2   3
0016    JMP      2 => 0019
0017    KPRI     2   1
0018    JMP      3 => 0020
0019 => KPRI     2   2
0020 => RET1     2   2

-- BYTECODE -- show.lua:195-214
0001    TNEW     3   0
0002    UGET     4   0      ; manif
0003    TGETS    4   4   0  ; "load_rock_manifest"
0004    MOV      5   0
0005    MOV      6   1
0006    MOV      7   2
0007    CALL     4   2   4
0008    UGET     5   1      ; path
0009    TGETS    5   5   1  ; "deploy_bin_dir"
0010    MOV      6   2
0011    CALL     5   2   2
0012    UGET     6   2      ; repos
0013    TGETS    6   6   2  ; "recurse_rock_manifest_entry"
0014    TGETS    7   4   3  ; "bin"
0015    FNEW     8   4      ; show.lua:200
0016    CALL     6   1   3
0017    GGET     6   5      ; "table"
0018    TGETS    6   6   6  ; "sort"
0019    MOV      7   3
0020    FNEW     8   7      ; show.lua:207
0021    CALL     6   1   3
0022    UCLO     0 => 0023
0023 => RET1     3   2

-- BYTECODE -- show.lua:216-222
0001    TNEW     2   0
0002    GGET     3   0      ; "ipairs"
0003    ISTC     4   0
0004    JMP      4 => 0006
0005    TNEW     4   0
0006 => CALL     3   4   2
0007    JMP      6 => 0022
0008 => GGET     8   1      ; "table"
0009    TGETS    8   8   2  ; "insert"
0010    MOV      9   2
0011    TDUP    10   4
0012    GGET    11   3      ; "tostring"
0013    MOV     12   7
0014    CALL    11   2   2
0015    TSETS   11  10   5  ; "name"
0016    UGET    11   0      ; installed_rock_label
0017    MOV     12   7
0018    MOV     13   1
0019    CALL    11   2   3
0020    TSETS   11  10   6  ; "label"
0021    CALL     8   1   3
0022 => ITERC    6   3   3
0023    ITERL    6 => 0008
0024    RET1     2   2

-- BYTECODE -- show.lua:224-236
0001    TNEW     3   0
0002    TNEW     4   0
0003    GGET     5   0      ; "ipairs"
0004    MOV      6   1
0005    CALL     5   4   2
0006    JMP      8 => 0009
0007 => KPRI    10   2
0008    TSETV   10   4   9
0009 => ITERC    8   3   3
0010    ITERL    8 => 0007
0011    UGET     5   0      ; util
0012    TGETS    5   5   1  ; "sortedpairs"
0013    ISTC     6   0
0014    JMP      6 => 0016
0015    TNEW     6   0
0016 => CALL     5   4   2
0017    JMP      8 => 0038
0018 => TGETV    9   4   8
0019    IST          9
0020    JMP      9 => 0038
0021    GGET     9   2      ; "table"
0022    TGETS    9   9   3  ; "insert"
0023    MOV     10   3
0024    TDUP    11   5
0025    GGET    12   4      ; "tostring"
0026    MOV     13   8
0027    CALL    12   2   2
0028    TSETS   12  11   6  ; "name"
0029    UGET    12   1      ; installed_rock_label
0030    UGET    13   2      ; queries
0031    TGETS   13  13   7  ; "new"
0032    MOV     14   8
0033    CALL    13   2   2
0034    MOV     14   2
0035    CALL    12   2   3
0036    TSETS   12  11   8  ; "label"
0037    CALL     9   1   3
0038 => ITERC    8   2   3
0039    ITERL    8 => 0018
0040    RET1     3   2

-- BYTECODE -- show.lua:238-259
0001    TGETS    8   4   0  ; "description"
0002    TDUP     9   1
0003    TSETS    1   9   2  ; "namespace"
0004    TGETS   10   4   3  ; "package"
0005    TSETS   10   9   3  ; "package"
0006    TGETS   10   4   4  ; "version"
0007    TSETS   10   9   4  ; "version"
0008    TGETS   10   8   5  ; "summary"
0009    IST         10
0010    JMP     11 => 0012
0011    KSTR    10   6      ; ""
0012 => TSETS   10   9   5  ; "summary"
0013    TGETS   10   8   7  ; "detailed"
0014    ISF         10
0015    JMP     11 => 0023
0016    UGET    10   0      ; util
0017    TGETS   10  10   8  ; "split_string"
0018    UGET    11   1      ; format_text
0019    TGETS   12   8   7  ; "detailed"
0020    CALL    11   2   2
0021    KSTR    12   9      ; "\n"
0022    CALL    10   2   3
0023 => TSETS   10   9   7  ; "detailed"
0024    TGETS   10   8  10  ; "license"
0025    TSETS   10   9  10  ; "license"
0026    TGETS   10   8  11  ; "homepage"
0027    TSETS   10   9  11  ; "homepage"
0028    TGETS   10   8  12  ; "issues_url"
0029    TSETS   10   9  13  ; "issues"
0030    TGETS   10   8  14  ; "labels"
0031    ISF         10
0032    JMP     11 => 0038
0033    GGET    10  15      ; "table"
0034    TGETS   10  10  16  ; "concat"
0035    TGETS   11   8  14  ; "labels"
0036    KSTR    12  17      ; ", "
0037    CALL    10   2   3
0038 => TSETS   10   9  14  ; "labels"
0039    UGET    10   2      ; path
0040    TGETS   10  10  18  ; "rocks_tree_to_string"
0041    MOV     11   5
0042    CALL    10   2   2
0043    TSETS   10   9  19  ; "location"
0044    UGET    10   3      ; commands_to_list
0045    MOV     11   2
0046    MOV     12   3
0047    MOV     13   5
0048    CALL    10   2   4
0049    TSETS   10   9  20  ; "commands"
0050    UGET    10   4      ; modules_to_list
0051    MOV     11   2
0052    MOV     12   3
0053    MOV     13   5
0054    CALL    10   2   4
0055    TSETS   10   9  21  ; "modules"
0056    UGET    10   5      ; deps_to_list
0057    TGETS   11   4  22  ; "build_dependencies"
0058    MOV     12   7
0059    CALL    10   2   3
0060    TSETS   10   9  23  ; "bdeps"
0061    UGET    10   5      ; deps_to_list
0062    TGETS   11   4  24  ; "test_dependencies"
0063    MOV     12   7
0064    CALL    10   2   3
0065    TSETS   10   9  25  ; "tdeps"
0066    UGET    10   5      ; deps_to_list
0067    TGETS   11   4  26  ; "dependencies"
0068    MOV     12   7
0069    CALL    10   2   3
0070    TSETS   10   9  27  ; "deps"
0071    UGET    10   6      ; indirect_deps
0072    TGETS   11   6  26  ; "dependencies"
0073    TGETS   12   4  26  ; "dependencies"
0074    MOV     13   7
0075    CALL    10   2   4
0076    TSETS   10   9  28  ; "ideps"
0077    UGET    10   0      ; util
0078    TGETS   10  10  29  ; "printout"
0079    UGET    11   7      ; render
0080    MOV     12   0
0081    MOV     13   9
0082    CALL    11   0   3
0083    CALLM   10   1   0
0084    RET0     0   1

-- BYTECODE -- show.lua:263-310
0001    UGET     1   0      ; queries
0002    TGETS    1   1   0  ; "new"
0003    TGETS    2   0   1  ; "rock"
0004    TGETS    3   0   2  ; "namespace"
0005    TGETS    4   0   3  ; "version"
0006    CALL     1   2   4
0007    UGET     2   1      ; search
0008    TGETS    2   2   4  ; "pick_installed_rock"
0009    MOV      3   1
0010    TGETS    4   0   5  ; "tree"
0011    CALL     2   5   3
0012    IST          2
0013    JMP      6 => 0017
0014    KPRI     6   0
0015    MOV      7   3
0016    RET      6   3
0017 => UGET     6   2      ; path
0018    TGETS    6   6   6  ; "rocks_tree_to_string"
0019    MOV      7   4
0020    CALL     6   2   2
0021    UGET     7   2      ; path
0022    TGETS    7   7   7  ; "install_dir"
0023    MOV      8   2
0024    MOV      9   3
0025    MOV     10   4
0026    CALL     7   2   4
0027    UGET     8   2      ; path
0028    TGETS    8   8   8  ; "read_namespace"
0029    MOV      9   2
0030    MOV     10   3
0031    MOV     11   6
0032    CALL     8   2   4
0033    UGET     9   2      ; path
0034    TGETS    9   9   9  ; "rockspec_file"
0035    MOV     10   2
0036    MOV     11   3
0037    MOV     12   4
0038    CALL     9   2   4
0039    UGET    10   3      ; fetch
0040    TGETS   10  10  10  ; "load_local_rockspec"
0041    MOV     11   9
0042    CALL    10   3   2
0043    IST         10
0044    JMP     12 => 0048
0045    KPRI    12   0
0046    MOV     13  11
0047    RET     12   3
0048 => TGETS   12  10  11  ; "description"
0049    IST         12
0050    JMP     13 => 0052
0051    TNEW    12   0
0052 => UGET    13   4      ; manif
0053    TGETS   13  13  12  ; "load_manifest"
0054    MOV     14   5
0055    CALL    13   3   2
0056    IST         13
0057    JMP     15 => 0061
0058    KPRI    15   0
0059    MOV     16  14
0060    RET     15   3
0061 => TGETS   15  13  13  ; "repository"
0062    TGETV   15  15   2
0063    TGETV   15  15   3
0064    TGETB   15  15   1
0065    TGETS   16   0  14  ; "rock_tree"
0066    ISF         16
0067    JMP     17 => 0073
0068    UGET    16   5      ; util
0069    TGETS   16  16  15  ; "printout"
0070    MOV     17   6
0071    CALL    16   1   2
0072    JMP     16 => 0227
0073 => TGETS   16   0  16  ; "rock_namespace"
0074    ISF         16
0075    JMP     17 => 0081
0076    UGET    16   5      ; util
0077    TGETS   16  16  15  ; "printout"
0078    MOV     17   8
0079    CALL    16   1   2
0080    JMP     16 => 0227
0081 => TGETS   16   0  17  ; "rock_dir"
0082    ISF         16
0083    JMP     17 => 0089
0084    UGET    16   5      ; util
0085    TGETS   16  16  15  ; "printout"
0086    MOV     17   7
0087    CALL    16   1   2
0088    JMP     16 => 0227
0089 => TGETS   16   0  18  ; "home"
0090    ISF         16
0091    JMP     17 => 0097
0092    UGET    16   5      ; util
0093    TGETS   16  16  15  ; "printout"
0094    TGETS   17  12  19  ; "homepage"
0095    CALL    16   1   2
0096    JMP     16 => 0227
0097 => TGETS   16   0  20  ; "rock_license"
0098    ISF         16
0099    JMP     17 => 0105
0100    UGET    16   5      ; util
0101    TGETS   16  16  15  ; "printout"
0102    TGETS   17  12  21  ; "license"
0103    CALL    16   1   2
0104    JMP     16 => 0227
0105 => TGETS   16   0  22  ; "issues"
0106    ISF         16
0107    JMP     17 => 0113
0108    UGET    16   5      ; util
0109    TGETS   16  16  15  ; "printout"
0110    TGETS   17  12  23  ; "issues_url"
0111    CALL    16   1   2
0112    JMP     16 => 0227
0113 => TGETS   16   0  24  ; "labels"
0114    ISF         16
0115    JMP     17 => 0128
0116    UGET    16   5      ; util
0117    TGETS   16  16  15  ; "printout"
0118    TGETS   17  12  24  ; "labels"
0119    ISF         17
0120    JMP     18 => 0126
0121    GGET    17  25      ; "table"
0122    TGETS   17  17  26  ; "concat"
0123    TGETS   18  12  24  ; "labels"
0124    KSTR    19  27      ; "\n"
0125    CALL    17   2   3
0126 => CALL    16   1   2
0127    JMP     16 => 0227
0128 => TGETS   16   0  28  ; "modules"
0129    ISF         16
0130    JMP     17 => 0139
0131    UGET    16   5      ; util
0132    TGETS   16  16  15  ; "printout"
0133    UGET    17   6      ; keys_as_string
0134    TGETS   18  15  28  ; "modules"
0135    KSTR    19  27      ; "\n"
0136    CALL    17   0   3
0137    CALLM   16   1   0
0138    JMP     16 => 0227
0139 => TGETS   16   0  29  ; "deps"
0140    ISF         16
0141    JMP     17 => 0155
0142    GGET    16  30      ; "ipairs"
0143    TGETS   17  10  31  ; "dependencies"
0144    CALL    16   4   2
0145    JMP     19 => 0152
0146 => UGET    21   5      ; util
0147    TGETS   21  21  15  ; "printout"
0148    GGET    22  32      ; "tostring"
0149    MOV     23  20
0150    CALL    22   0   2
0151    CALLM   21   1   0
0152 => ITERC   19   3   3
0153    ITERL   19 => 0146
0154    JMP     16 => 0227
0155 => TGETS   16   0  33  ; "build_deps"
0156    ISF         16
0157    JMP     17 => 0171
0158    GGET    16  30      ; "ipairs"
0159    TGETS   17  10  34  ; "build_dependencies"
0160    CALL    16   4   2
0161    JMP     19 => 0168
0162 => UGET    21   5      ; util
0163    TGETS   21  21  15  ; "printout"
0164    GGET    22  32      ; "tostring"
0165    MOV     23  20
0166    CALL    22   0   2
0167    CALLM   21   1   0
0168 => ITERC   19   3   3
0169    ITERL   19 => 0162
0170    JMP     16 => 0227
0171 => TGETS   16   0  35  ; "test_deps"
0172    ISF         16
0173    JMP     17 => 0187
0174    GGET    16  30      ; "ipairs"
0175    TGETS   17  10  36  ; "test_dependencies"
0176    CALL    16   4   2
0177    JMP     19 => 0184
0178 => UGET    21   5      ; util
0179    TGETS   21  21  15  ; "printout"
0180    GGET    22  32      ; "tostring"
0181    MOV     23  20
0182    CALL    22   0   2
0183    CALLM   21   1   0
0184 => ITERC   19   3   3
0185    ITERL   19 => 0178
0186    JMP     16 => 0227
0187 => TGETS   16   0  37  ; "rockspec"
0188    ISF         16
0189    JMP     17 => 0195
0190    UGET    16   5      ; util
0191    TGETS   16  16  15  ; "printout"
0192    MOV     17   9
0193    CALL    16   1   2
0194    JMP     16 => 0227
0195 => TGETS   16   0  38  ; "mversion"
0196    ISF         16
0197    JMP     17 => 0203
0198    UGET    16   5      ; util
0199    TGETS   16  16  15  ; "printout"
0200    MOV     17   3
0201    CALL    16   1   2
0202    JMP     16 => 0227
0203 => TGETS   16   0  39  ; "porcelain"
0204    ISF         16
0205    JMP     17 => 0217
0206    UGET    16   7      ; show_rock
0207    UGET    17   8      ; porcelain_template
0208    MOV     18   8
0209    MOV     19   2
0210    MOV     20   3
0211    MOV     21  10
0212    MOV     22   4
0213    MOV     23  15
0214    TGETS   24   0   5  ; "tree"
0215    CALL    16   1   9
0216    JMP     16 => 0227
0217 => UGET    16   7      ; show_rock
0218    UGET    17   9      ; friendly_template
0219    MOV     18   8
0220    MOV     19   2
0221    MOV     20   3
0222    MOV     21  10
0223    MOV     22   4
0224    MOV     23  15
0225    TGETS   24   0   5  ; "tree"
0226    CALL    16   1   9
0227 => KPRI    16   2
0228    RET1    16   2

-- BYTECODE -- show.lua:0-313
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.queries"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.search"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.fs"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.core.cfg"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.util"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.path"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.fetch"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.manif"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.repos"
0031    CALL    10   2   2
0032    FNEW    11  12      ; show.lua:16
0033    TSETS   11   0  11  ; "add_to_parser"
0034    KSTR    11  13      ; "          :\n?namespace:${namespace}/${p"~
0035    KSTR    12  14      ; "?namespace:namespace\t${namespace}\n?pac"~
0036    FNEW    13  15      ; show.lua:97
0037    FNEW    14  16      ; show.lua:103
0038    FNEW    15  17      ; show.lua:118
0039    FNEW    16  18      ; show.lua:127
0040    FNEW    17  19      ; show.lua:138
0041    FNEW    18  20      ; show.lua:160
0042    FNEW    19  21      ; show.lua:168
0043    FNEW    20  22      ; show.lua:195
0044    FNEW    21  23      ; show.lua:216
0045    FNEW    22  24      ; show.lua:224
0046    FNEW    23  25      ; show.lua:238
0047    FNEW    24  27      ; show.lua:263
0048    TSETS   24   0  26  ; "command"
0049    UCLO     0 => 0050
0050 => RET1     0   2

-----------------------
-- BYTECODE -- path.lua:10-29
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "path"
0004    KSTR     4   2      ; "Returns the package path currently confi"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Return the currently configured package "~
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "flag"
0015    KSTR     4   7      ; "--no-bin"
0016    KSTR     5   8      ; "Do not export the PATH variable."
0017    CALL     2   1   4
0018    MOV      3   1
0019    TGETS    2   1   6  ; "flag"
0020    KSTR     4   9      ; "--append"
0021    KSTR     5  10      ; "Appends the paths to the existing paths."~
0022    KSTR     6  11      ; "to prefix the LR paths to the existing p"~
0023    CAT      5   5   6
0024    CALL     2   1   4
0025    MOV      3   1
0026    TGETS    2   1   6  ; "flag"
0027    KSTR     4  12      ; "--lr-path"
0028    KSTR     5  13      ; "Exports the Lua path (not formatted as s"~
0029    CALL     2   1   4
0030    MOV      3   1
0031    TGETS    2   1   6  ; "flag"
0032    KSTR     4  14      ; "--lr-cpath"
0033    KSTR     5  15      ; "Exports the Lua cpath (not formatted as "~
0034    CALL     2   1   4
0035    MOV      3   1
0036    TGETS    2   1   6  ; "flag"
0037    KSTR     4  16      ; "--lr-bin"
0038    KSTR     5  17      ; "Exports the system path (not formatted a"~
0039    CALL     2   1   4
0040    MOV      3   1
0041    TGETS    2   1   6  ; "flag"
0042    KSTR     4  18      ; "--bin"
0043    CALL     2   2   3
0044    MOV      3   2
0045    TGETS    2   2  19  ; "hidden"
0046    KPRI     4   2
0047    CALL     2   1   3
0048    RET0     0   1

-- BYTECODE -- path.lua:33-68
0001    UGET     1   0      ; cfg
0002    TGETS    1   1   0  ; "package_paths"
0003    TGETS    2   0   1  ; "tree"
0004    CALL     1   4   2
0005    UGET     4   0      ; cfg
0006    TGETS    4   4   2  ; "export_path_separator"
0007    TGETS    5   0   3  ; "lr_path"
0008    ISF          5
0009    JMP      6 => 0024
0010    UGET     5   1      ; util
0011    TGETS    5   5   4  ; "printout"
0012    UGET     6   1      ; util
0013    TGETS    6   6   5  ; "cleanup_path"
0014    MOV      7   1
0015    KSTR     8   6      ; ";"
0016    UGET     9   0      ; cfg
0017    TGETS    9   9   7  ; "lua_version"
0018    KPRI    10   2
0019    CALL     6   0   5
0020    CALLM    5   1   0
0021    KPRI     5   2
0022    RET1     5   2
0023    JMP      5 => 0056
0024 => TGETS    5   0   8  ; "lr_cpath"
0025    ISF          5
0026    JMP      6 => 0041
0027    UGET     5   1      ; util
0028    TGETS    5   5   4  ; "printout"
0029    UGET     6   1      ; util
0030    TGETS    6   6   5  ; "cleanup_path"
0031    MOV      7   2
0032    KSTR     8   6      ; ";"
0033    UGET     9   0      ; cfg
0034    TGETS    9   9   7  ; "lua_version"
0035    KPRI    10   2
0036    CALL     6   0   5
0037    CALLM    5   1   0
0038    KPRI     5   2
0039    RET1     5   2
0040    JMP      5 => 0056
0041 => TGETS    5   0   9  ; "lr_bin"
0042    ISF          5
0043    JMP      6 => 0056
0044    UGET     5   1      ; util
0045    TGETS    5   5   4  ; "printout"
0046    UGET     6   1      ; util
0047    TGETS    6   6   5  ; "cleanup_path"
0048    MOV      7   3
0049    MOV      8   4
0050    KPRI     9   0
0051    KPRI    10   2
0052    CALL     6   0   5
0053    CALLM    5   1   0
0054    KPRI     5   2
0055    RET1     5   2
0056 => UGET     5   1      ; util
0057    TGETS    5   5   5  ; "cleanup_path"
0058    GGET     6  10      ; "os"
0059    TGETS    6   6  11  ; "getenv"
0060    KSTR     7  12      ; "PATH"
0061    CALL     6   2   2
0062    MOV      7   4
0063    KPRI     8   0
0064    KPRI     9   2
0065    CALL     5   2   5
0066    TGETS    6   0  13  ; "append"
0067    ISF          6
0068    JMP      7 => 0084
0069    GGET     6  14      ; "package"
0070    TGETS    6   6  15  ; "path"
0071    KSTR     7   6      ; ";"
0072    MOV      8   1
0073    CAT      1   6   8
0074    GGET     6  14      ; "package"
0075    TGETS    6   6  16  ; "cpath"
0076    KSTR     7   6      ; ";"
0077    MOV      8   2
0078    CAT      2   6   8
0079    MOV      6   5
0080    MOV      7   4
0081    MOV      8   3
0082    CAT      3   6   8
0083    JMP      6 => 0098
0084 => MOV      6   1
0085    KSTR     7   6      ; ";"
0086    GGET     8  14      ; "package"
0087    TGETS    8   8  15  ; "path"
0088    CAT      1   6   8
0089    MOV      6   2
0090    KSTR     7   6      ; ";"
0091    GGET     8  14      ; "package"
0092    TGETS    8   8  16  ; "cpath"
0093    CAT      2   6   8
0094    MOV      6   3
0095    MOV      7   4
0096    MOV      8   5
0097    CAT      3   6   8
0098 => UGET     6   1      ; util
0099    TGETS    6   6  17  ; "lua_path_variables"
0100    CALL     6   3   1
0101    UGET     8   1      ; util
0102    TGETS    8   8   4  ; "printout"
0103    UGET     9   2      ; fs
0104    TGETS    9   9  18  ; "export_cmd"
0105    MOV     10   6
0106    UGET    11   1      ; util
0107    TGETS   11  11   5  ; "cleanup_path"
0108    MOV     12   1
0109    KSTR    13   6      ; ";"
0110    UGET    14   0      ; cfg
0111    TGETS   14  14   7  ; "lua_version"
0112    TGETS   15   0  13  ; "append"
0113    CALL    11   0   5
0114    CALLM    9   0   1
0115    CALLM    8   1   0
0116    UGET     8   1      ; util
0117    TGETS    8   8   4  ; "printout"
0118    UGET     9   2      ; fs
0119    TGETS    9   9  18  ; "export_cmd"
0120    MOV     10   7
0121    UGET    11   1      ; util
0122    TGETS   11  11   5  ; "cleanup_path"
0123    MOV     12   2
0124    KSTR    13   6      ; ";"
0125    UGET    14   0      ; cfg
0126    TGETS   14  14   7  ; "lua_version"
0127    TGETS   15   0  13  ; "append"
0128    CALL    11   0   5
0129    CALLM    9   0   1
0130    CALLM    8   1   0
0131    TGETS    8   0  19  ; "no_bin"
0132    IST          8
0133    JMP      8 => 0148
0134    UGET     8   1      ; util
0135    TGETS    8   8   4  ; "printout"
0136    UGET     9   2      ; fs
0137    TGETS    9   9  18  ; "export_cmd"
0138    KSTR    10  12      ; "PATH"
0139    UGET    11   1      ; util
0140    TGETS   11  11   5  ; "cleanup_path"
0141    MOV     12   3
0142    MOV     13   4
0143    KPRI    14   0
0144    TGETS   15   0  13  ; "append"
0145    CALL    11   0   5
0146    CALLM    9   0   1
0147    CALLM    8   1   0
0148 => KPRI     8   2
0149    RET1     8   2

-- BYTECODE -- path.lua:0-71
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fs"
0010    CALL     3   2   2
0011    FNEW     4   5      ; path.lua:10
0012    TSETS    4   0   4  ; "add_to_parser"
0013    FNEW     4   7      ; path.lua:33
0014    TSETS    4   0   6  ; "command"
0015    UCLO     0 => 0016
0016 => RET1     0   2

-----------------------
-- BYTECODE -- list.lua:13-24
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "list"
0004    KSTR     4   2      ; "List currently installed rocks."
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "filter"
0012    KSTR     5   6      ; "A substring of a rock name to filter by."
0013    CALL     2   2   4
0014    MOV      3   2
0015    TGETS    2   2   7  ; "args"
0016    KSTR     4   8      ; "?"
0017    CALL     2   1   3
0018    MOV      3   1
0019    TGETS    2   1   4  ; "argument"
0020    KSTR     4   9      ; "version"
0021    KSTR     5  10      ; "Rock version to filter by."
0022    CALL     2   2   4
0023    MOV      3   2
0024    TGETS    2   2   7  ; "args"
0025    KSTR     4   8      ; "?"
0026    CALL     2   1   3
0027    MOV      3   1
0028    TGETS    2   1  11  ; "flag"
0029    KSTR     4  12      ; "--outdated"
0030    KSTR     5  13      ; "List only rocks for which there is a hig"~
0031    KSTR     6  14      ; "version available in the rocks server."
0032    CAT      5   5   6
0033    CALL     2   1   4
0034    MOV      3   1
0035    TGETS    2   1  11  ; "flag"
0036    KSTR     4  15      ; "--porcelain"
0037    KSTR     5  16      ; "Produce machine-friendly output."
0038    CALL     2   1   4
0039    RET0     0   1

-- BYTECODE -- list.lua:26-52
0001    TNEW     2   0
0002    GGET     3   0      ; "ipairs"
0003    MOV      4   0
0004    CALL     3   4   2
0005    JMP      6 => 0015
0006 => UGET     8   0      ; search
0007    TGETS    8   8   1  ; "local_manifest_search"
0008    MOV      9   2
0009    UGET    10   1      ; path
0010    TGETS   10  10   2  ; "rocks_dir"
0011    MOV     11   7
0012    CALL    10   2   2
0013    MOV     11   1
0014    CALL     8   1   4
0015 => ITERC    6   3   3
0016    ITERL    6 => 0006
0017    TNEW     3   0
0018    UGET     4   2      ; util
0019    TGETS    4   4   3  ; "sortedpairs"
0020    MOV      5   2
0021    CALL     4   4   2
0022    JMP      7 => 0079
0023 => UGET     9   2      ; util
0024    TGETS    9   9   4  ; "keys"
0025    MOV     10   8
0026    CALL     9   2   2
0027    MOV      8   9
0028    GGET     9   5      ; "table"
0029    TGETS    9   9   6  ; "sort"
0030    MOV     10   8
0031    UGET    11   3      ; vers
0032    TGETS   11  11   7  ; "compare_versions"
0033    CALL     9   1   3
0034    TGETB    9   8   1
0035    UGET    10   4      ; queries
0036    TGETS   10  10   8  ; "new"
0037    MOV     12   7
0038    TGETS   11   7   9  ; "lower"
0039    CALL    11   0   2
0040    CALLM   10   2   0
0041    UGET    11   0      ; search
0042    TGETS   11  11  10  ; "search_repos"
0043    MOV     12  10
0044    CALL    11   3   2
0045    TGETV   13  11   7
0046    ISF         13
0047    JMP     14 => 0079
0048    UGET    13   2      ; util
0049    TGETS   13  13   4  ; "keys"
0050    TGETV   14  11   7
0051    CALL    13   2   2
0052    GGET    14   5      ; "table"
0053    TGETS   14  14   6  ; "sort"
0054    MOV     15  13
0055    UGET    16   3      ; vers
0056    TGETS   16  16   7  ; "compare_versions"
0057    CALL    14   1   3
0058    TGETB   14  13   1
0059    TGETV   15  11   7
0060    TGETV   15  15  14
0061    TGETB   15  15   1
0062    TGETS   15  15  11  ; "repo"
0063    UGET    16   3      ; vers
0064    TGETS   16  16   7  ; "compare_versions"
0065    MOV     17  14
0066    MOV     18   9
0067    CALL    16   2   3
0068    ISF         16
0069    JMP     17 => 0079
0070    GGET    16   5      ; "table"
0071    TGETS   16  16  12  ; "insert"
0072    MOV     17   3
0073    TDUP    18  13
0074    TSETS    7  18  14  ; "name"
0075    TSETS    9  18  15  ; "installed"
0076    TSETS   14  18  16  ; "available"
0077    TSETS   15  18  11  ; "repo"
0078    CALL    16   1   3
0079 => ITERC    7   3   3
0080    ITERL    7 => 0023
0081    RET1     3   2

-- BYTECODE -- list.lua:54-67
0001    UGET     3   0      ; util
0002    TGETS    3   3   0  ; "title"
0003    KSTR     4   1      ; "Outdated rocks:"
0004    MOV      5   2
0005    CALL     3   1   3
0006    UGET     3   1      ; check_outdated
0007    MOV      4   0
0008    MOV      5   1
0009    CALL     3   2   3
0010    GGET     4   2      ; "ipairs"
0011    MOV      5   3
0012    CALL     4   4   2
0013    JMP      7 => 0041
0014 => ISF          2
0015    JMP      9 => 0024
0016    UGET     9   0      ; util
0017    TGETS    9   9   3  ; "printout"
0018    TGETS   10   8   4  ; "name"
0019    TGETS   11   8   5  ; "installed"
0020    TGETS   12   8   6  ; "available"
0021    TGETS   13   8   7  ; "repo"
0022    CALL     9   1   5
0023    JMP      9 => 0041
0024 => UGET     9   0      ; util
0025    TGETS    9   9   3  ; "printout"
0026    TGETS   10   8   4  ; "name"
0027    CALL     9   1   2
0028    UGET     9   0      ; util
0029    TGETS    9   9   3  ; "printout"
0030    KSTR    10   8      ; "   "
0031    TGETS   11   8   5  ; "installed"
0032    KSTR    12   9      ; " < "
0033    TGETS   13   8   6  ; "available"
0034    KSTR    14  10      ; " at "
0035    TGETS   15   8   7  ; "repo"
0036    CAT     10  10  15
0037    CALL     9   1   2
0038    UGET     9   0      ; util
0039    TGETS    9   9   3  ; "printout"
0040    CALL     9   1   1
0041 => ITERC    7   3   3
0042    ITERL    7 => 0014
0043    KPRI     4   2
0044    RET1     4   2

-- BYTECODE -- list.lua:71-94
0001    UGET     1   0      ; queries
0002    TGETS    1   1   0  ; "new"
0003    TGETS    2   0   1  ; "filter"
0004    ISF          2
0005    JMP      3 => 0012
0006    TGETS    2   0   1  ; "filter"
0007    MOV      3   2
0008    TGETS    2   2   2  ; "lower"
0009    CALL     2   2   2
0010    IST          2
0011    JMP      3 => 0013
0012 => KSTR     2   3      ; ""
0013 => TGETS    3   0   4  ; "namespace"
0014    TGETS    4   0   5  ; "version"
0015    KPRI     5   2
0016    CALL     1   2   5
0017    UGET     2   1      ; cfg
0018    TGETS    2   2   6  ; "rocks_trees"
0019    KSTR     3   7      ; "Rocks installed for Lua "
0020    UGET     4   1      ; cfg
0021    TGETS    4   4   8  ; "lua_version"
0022    CAT      3   3   4
0023    TGETS    4   0   9  ; "tree"
0024    ISF          4
0025    JMP      5 => 0034
0026    TNEW     4   3
0027    TGETS    5   0   9  ; "tree"
0028    TSETB    5   4   1
0029    MOV      2   4
0030    MOV      4   3
0031    KSTR     5  10      ; " in "
0032    TGETS    6   0   9  ; "tree"
0033    CAT      3   4   6
0034 => TGETS    4   0  11  ; "outdated"
0035    ISF          4
0036    JMP      5 => 0042
0037    UGET     4   2      ; list_outdated
0038    MOV      5   2
0039    MOV      6   1
0040    TGETS    7   0  12  ; "porcelain"
0041    CALLT    4   4
0042 => TNEW     4   0
0043    GGET     5  13      ; "ipairs"
0044    MOV      6   2
0045    CALL     5   4   2
0046    JMP      8 => 0064
0047 => UGET    10   3      ; search
0048    TGETS   10  10  14  ; "local_manifest_search"
0049    MOV     11   4
0050    UGET    12   4      ; path
0051    TGETS   12  12  15  ; "rocks_dir"
0052    MOV     13   9
0053    CALL    12   2   2
0054    MOV     13   1
0055    CALL    10   4   4
0056    IST         10
0057    JMP     13 => 0064
0058    ISEQS   12  16      ; "open"
0059    JMP     13 => 0064
0060    UGET    13   5      ; util
0061    TGETS   13  13  17  ; "warning"
0062    MOV     14  11
0063    CALL    13   1   2
0064 => ITERC    8   3   3
0065    ITERL    8 => 0047
0066    UGET     5   5      ; util
0067    TGETS    5   5  18  ; "title"
0068    MOV      6   3
0069    TGETS    7   0  12  ; "porcelain"
0070    CALL     5   1   3
0071    UGET     5   3      ; search
0072    TGETS    5   5  19  ; "print_result_tree"
0073    MOV      6   4
0074    TGETS    7   0  12  ; "porcelain"
0075    CALL     5   1   3
0076    KPRI     5   2
0077    RET1     5   2

-- BYTECODE -- list.lua:0-97
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.search"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.queries"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.vers"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.core.cfg"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.util"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.path"
0019    CALL     6   2   2
0020    FNEW     7   8      ; list.lua:13
0021    TSETS    7   0   7  ; "add_to_parser"
0022    FNEW     7   9      ; list.lua:26
0023    FNEW     8  10      ; list.lua:54
0024    FNEW     9  12      ; list.lua:71
0025    TSETS    9   0  11  ; "command"
0026    UCLO     0 => 0027
0027 => RET1     0   2

-----------------------
-- BYTECODE -- config.lua:12-74
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "config"
0004    KSTR     4   2      ; "Query information about the LuaRocks con"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    KSTR     6   4      ; "   https://github.com/luarocks/luarocks/"~
0008    CALL     5   0   2
0009    CALLM    1   2   3
0010    MOV      2   1
0011    TGETS    1   1   5  ; "summary"
0012    KSTR     3   6      ; "Query information about the LuaRocks con"~
0013    CALL     1   2   3
0014    MOV      3   1
0015    TGETS    2   1   7  ; "argument"
0016    KSTR     4   8      ; "key"
0017    KSTR     5   9      ; "The configuration key."
0018    CALL     2   2   4
0019    MOV      3   2
0020    TGETS    2   2  10  ; "args"
0021    KSTR     4  11      ; "?"
0022    CALL     2   1   3
0023    MOV      3   1
0024    TGETS    2   1   7  ; "argument"
0025    KSTR     4  12      ; "value"
0026    KSTR     5  13      ; "The configuration value."
0027    CALL     2   2   4
0028    MOV      3   2
0029    TGETS    2   2  10  ; "args"
0030    KSTR     4  11      ; "?"
0031    CALL     2   1   3
0032    MOV      3   1
0033    TGETS    2   1  14  ; "option"
0034    KSTR     4  15      ; "--scope"
0035    KSTR     5  16      ; "The scope indicates which config file sh"~
0036    KSTR     6  17      ; "* Using a wrapper created with `luarocks"~
0037    KSTR     7  18      ; "* Using --local (or when `local_by_defau"~
0038    KSTR     8  19      ; "* Otherwise, the default is "system"."
0039    CAT      5   5   8
0040    CALL     2   2   4
0041    MOV      3   2
0042    TGETS    2   2  20  ; "choices"
0043    TDUP     4  21
0044    CALL     2   1   3
0045    MOV      3   1
0046    TGETS    2   1  22  ; "flag"
0047    KSTR     4  23      ; "--unset"
0048    KSTR     5  24      ; "Delete the key from the configuration fi"~
0049    CALL     2   1   4
0050    MOV      3   1
0051    TGETS    2   1  22  ; "flag"
0052    KSTR     4  25      ; "--json"
0053    KSTR     5  26      ; "Output as JSON."
0054    CALL     2   1   4
0055    MOV      3   1
0056    TGETS    2   1  22  ; "flag"
0057    KSTR     4  27      ; "--lua-incdir"
0058    CALL     2   2   3
0059    MOV      3   2
0060    TGETS    2   2  28  ; "hidden"
0061    KPRI     4   2
0062    CALL     2   1   3
0063    MOV      3   1
0064    TGETS    2   1  22  ; "flag"
0065    KSTR     4  29      ; "--lua-libdir"
0066    CALL     2   2   3
0067    MOV      3   2
0068    TGETS    2   2  28  ; "hidden"
0069    KPRI     4   2
0070    CALL     2   1   3
0071    MOV      3   1
0072    TGETS    2   1  22  ; "flag"
0073    KSTR     4  30      ; "--lua-ver"
0074    CALL     2   2   3
0075    MOV      3   2
0076    TGETS    2   2  28  ; "hidden"
0077    KPRI     4   2
0078    CALL     2   1   3
0079    MOV      3   1
0080    TGETS    2   1  22  ; "flag"
0081    KSTR     4  31      ; "--system-config"
0082    CALL     2   2   3
0083    MOV      3   2
0084    TGETS    2   2  28  ; "hidden"
0085    KPRI     4   2
0086    CALL     2   1   3
0087    MOV      3   1
0088    TGETS    2   1  22  ; "flag"
0089    KSTR     4  32      ; "--user-config"
0090    CALL     2   2   3
0091    MOV      3   2
0092    TGETS    2   2  28  ; "hidden"
0093    KPRI     4   2
0094    CALL     2   1   3
0095    MOV      3   1
0096    TGETS    2   1  22  ; "flag"
0097    KSTR     4  33      ; "--rock-trees"
0098    CALL     2   2   3
0099    MOV      3   2
0100    TGETS    2   2  28  ; "hidden"
0101    KPRI     4   2
0102    CALL     2   1   3
0103    RET0     0   1

-- BYTECODE -- config.lua:76-83
0001    GGET     1   0      ; "print"
0002    UGET     2   0      ; dir
0003    TGETS    2   2   1  ; "normalize"
0004    TGETS    3   0   2  ; "file"
0005    CALL     2   0   2
0006    CALLM    1   1   0
0007    TGETS    1   0   3  ; "found"
0008    ISF          1
0009    JMP      2 => 0013
0010    KPRI     1   2
0011    RET1     1   2
0012    JMP      1 => 0016
0013 => KPRI     1   0
0014    KSTR     2   4      ; "file not found"
0015    RET      1   3
0016 => RET0     0   1

-- BYTECODE -- config.lua:93-95
0001    GGET     2   0      ; "type"
0002    MOV      3   1
0003    CALL     2   2   2
0004    ISEQS    2   1      ; "function"
0005    JMP      2 => 0011
0006    UGET     2   0      ; cfg_skip
0007    TGETV    2   2   0
0008    JMP      3 => 0012
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => RET1     2   2

-- BYTECODE -- config.lua:97-105
0001    TNEW     1   0
0002    GGET     2   0      ; "pairs"
0003    MOV      3   0
0004    CALL     2   4   2
0005    ISNEXT   5 => 0013
0006 => UGET     7   0      ; should_skip
0007    MOV      8   5
0008    MOV      9   6
0009    CALL     7   2   3
0010    IST          7
0011    JMP      7 => 0013
0012    TSETV    6   1   5
0013 => ITERN    5   3   3
0014    ITERL    5 => 0006
0015    RET1     1   2

-- BYTECODE -- config.lua:107-136
0001    MOV      5   0
0002    TGETS    4   0   0  ; "match"
0003    KSTR     6   1      ; "^%[([0-9]+)%]%.(.*)$"
0004    CALL     4   3   3
0005    ISF          4
0006    JMP      6 => 0012
0007    GGET     6   2      ; "tonumber"
0008    MOV      7   4
0009    CALL     6   2   2
0010    MOV      4   6
0011    JMP      6 => 0026
0012 => MOV      7   0
0013    TGETS    6   0   0  ; "match"
0014    KSTR     8   3      ; "^([^.[]+)%.(.*)$"
0015    CALL     6   3   3
0016    MOV      5   7
0017    MOV      4   6
0018    IST          4
0019    JMP      6 => 0026
0020    MOV      7   0
0021    TGETS    6   0   0  ; "match"
0022    KSTR     8   4      ; "^([^[]+)(%[.*)$"
0023    CALL     6   3   3
0024    MOV      5   7
0025    MOV      4   6
0026 => ISF          4
0027    JMP      6 => 0052
0028    TGETV    6   1   4
0029    IST          6
0030    JMP      6 => 0037
0031    ISF          3
0032    JMP      6 => 0037
0033    MOV      6   3
0034    MOV      7   1
0035    MOV      8   4
0036    CALL     6   1   3
0037 => TGETV    6   1   4
0038    ISF          6
0039    JMP      7 => 0047
0040    UGET     6   0      ; traverse_varstring
0041    MOV      7   5
0042    TGETV    8   1   4
0043    MOV      9   2
0044    MOV     10   3
0045    CALLT    6   5
0046    JMP      6 => 0052
0047 => KPRI     6   0
0048    KSTR     7   5      ; "Unknown entry "
0049    MOV      8   4
0050    CAT      7   7   8
0051    RET      6   3
0052 => MOV      7   0
0053    TGETS    6   0   0  ; "match"
0054    KSTR     8   6      ; "^%[([0-9]+)%]$"
0055    CALL     6   2   3
0056    ISF          6
0057    JMP      7 => 0062
0058    GGET     7   2      ; "tonumber"
0059    MOV      8   6
0060    CALL     7   2   2
0061    MOV      0   7
0062 => MOV      7   2
0063    MOV      8   1
0064    MOV      9   0
0065    CALLT    7   3

-- BYTECODE -- config.lua:138-146
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "require_json"
0003    CALL     1   3   1
0004    IST          1
0005    JMP      3 => 0011
0006    KPRI     3   0
0007    KSTR     4   1      ; "A JSON library is required for this comm"~
0008    MOV      5   2
0009    CAT      4   4   5
0010    RET      3   3
0011 => GGET     3   2      ; "print"
0012    TGETS    4   2   3  ; "encode"
0013    MOV      5   0
0014    CALL     4   0   2
0015    CALLM    3   1   0
0016    KPRI     3   2
0017    RET1     3   2

-- BYTECODE -- config.lua:149-165
0001    TGETV    2   0   1
0002    IST          2
0003    JMP      2 => 0009
0004    KPRI     2   0
0005    KSTR     3   0      ; "Unknown entry "
0006    MOV      4   1
0007    CAT      3   3   4
0008    RET      2   3
0009 => TGETV    2   0   1
0010    UGET     3   0      ; should_skip
0011    UGET     4   1      ; var
0012    MOV      5   2
0013    CALL     3   2   3
0014    IST          3
0015    JMP      3 => 0038
0016    UGET     3   2      ; is_json
0017    ISF          3
0018    JMP      4 => 0023
0019    UGET     3   3      ; print_json
0020    MOV      4   2
0021    CALLT    3   2
0022    JMP      3 => 0038
0023 => GGET     3   1      ; "type"
0024    MOV      4   2
0025    CALL     3   2   2
0026    ISNES    3   2      ; "string"
0027    JMP      3 => 0032
0028    GGET     3   3      ; "print"
0029    MOV      4   2
0030    CALL     3   1   2
0031    JMP      3 => 0038
0032 => UGET     3   4      ; persist
0033    TGETS    3   3   4  ; "write_value"
0034    GGET     4   5      ; "io"
0035    TGETS    4   4   6  ; "stdout"
0036    MOV      5   2
0037    CALL     3   1   3
0038 => KPRI     3   2
0039    RET1     3   2

-- BYTECODE -- config.lua:148-166
0001    UGET     3   0      ; traverse_varstring
0002    MOV      4   0
0003    MOV      5   1
0004    FNEW     6   0      ; config.lua:149
0005    UCLO     0 => 0006
0006 => CALLT    3   4

-- BYTECODE -- config.lua:170-174
0001    TGETV    2   0   1
0002    ISEQP    2   0
0003    JMP      2 => 0008
0004    GGET     2   0      ; "type"
0005    TGETV    3   0   1
0006    CALL     2   2   2
0007    USETV    0   2      ; typ
0008 => RET0     0   1

-- BYTECODE -- config.lua:168-176
0001    KPRI     1   0
0002    UGET     2   0      ; traverse_varstring
0003    MOV      3   0
0004    UGET     4   1      ; cfg
0005    FNEW     5   0      ; config.lua:170
0006    CALL     2   1   4
0007    UCLO     0 => 0008
0008 => RET1     1   2

-- BYTECODE -- config.lua:189-208
0001    UGET     2   0      ; do_unset
0002    ISF          2
0003    JMP      3 => 0007
0004    KPRI     2   0
0005    TSETV    2   0   1
0006    JMP      2 => 0042
0007 => UGET     2   1      ; infer_type
0008    UGET     3   2      ; var
0009    CALL     2   2   2
0010    KPRI     3   0
0011    ISNES    2   0      ; "number"
0012    JMP      4 => 0023
0013    GGET     4   1      ; "tonumber"
0014    UGET     5   3      ; val
0015    CALL     4   2   2
0016    ISF          4
0017    JMP      5 => 0023
0018    GGET     4   1      ; "tonumber"
0019    UGET     5   3      ; val
0020    CALL     4   2   2
0021    MOV      3   4
0022    JMP      4 => 0038
0023 => ISNES    2   2      ; "boolean"
0024    JMP      4 => 0030
0025    UGET     4   3      ; val
0026    ISNES    4   3      ; "true"
0027    JMP      4 => 0030
0028    KPRI     3   2
0029    JMP      4 => 0038
0030 => ISNES    2   2      ; "boolean"
0031    JMP      4 => 0037
0032    UGET     4   3      ; val
0033    ISNES    4   4      ; "false"
0034    JMP      4 => 0037
0035    KPRI     3   1
0036    JMP      4 => 0038
0037 => UGET     3   3      ; val
0038 => TSETV    3   0   1
0039    UGET     4   4      ; keys
0040    UGET     5   2      ; var
0041    TSETV    3   4   5
0042 => KPRI     2   2
0043    RET1     2   2

-- BYTECODE -- config.lua:208-210
0001    TNEW     2   0
0002    TSETV    2   0   1
0003    RET0     0   1

-- BYTECODE -- config.lua:178-229
0001    ISNES    1   0      ; "project"
0002    JMP      3 => 0011
0003    UGET     3   0      ; cfg
0004    TGETS    3   3   1  ; "config_files"
0005    TGETS    3   3   0  ; "project"
0006    IST          3
0007    JMP      3 => 0011
0008    KPRI     3   0
0009    KSTR     4   2      ; "Current directory is not part of a proje"~
0010    UCLO     0 => 0105
0011 => UGET     3   1      ; persist
0012    TGETS    3   3   3  ; "load_config_file_if_basic"
0013    UGET     4   0      ; cfg
0014    TGETS    4   4   1  ; "config_files"
0015    TGETV    4   4   1
0016    TGETS    4   4   4  ; "file"
0017    UGET     5   0      ; cfg
0018    CALL     3   3   3
0019    IST          3
0020    JMP      5 => 0024
0021    KPRI     5   0
0022    MOV      6   4
0023    UCLO     0 => 0106
0024 => UGET     5   2      ; util
0025    TGETS    5   5   5  ; "sortedpairs"
0026    MOV      6   0
0027    CALL     5   4   2
0028    JMP      8 => 0036
0029 => UGET    10   3      ; traverse_varstring
0030    MOV     11   8
0031    MOV     12   3
0032    FNEW    13   6      ; config.lua:189
0033    FNEW    14   7      ; config.lua:208
0034    CALL    10   1   5
0035    UCLO     8 => 0036
0036 => ITERC    8   3   3
0037    ITERL    8 => 0029
0038    UGET     5   1      ; persist
0039    TGETS    5   5   8  ; "save_from_table"
0040    UGET     6   0      ; cfg
0041    TGETS    6   6   1  ; "config_files"
0042    TGETV    6   6   1
0043    TGETS    6   6   4  ; "file"
0044    MOV      7   3
0045    CALL     5   3   3
0046    ISF          5
0047    JMP      7 => 0099
0048    GGET     7   9      ; "print"
0049    ISF          2
0050    JMP      8 => 0053
0051    KSTR     8  10      ; "Removed"
0052    JMP      9 => 0054
0053 => KSTR     8  11      ; "Wrote"
0054 => CALL     7   1   2
0055    UGET     7   2      ; util
0056    TGETS    7   7   5  ; "sortedpairs"
0057    MOV      8   0
0058    CALL     7   4   2
0059    JMP     10 => 0078
0060 => ISF          2
0061    JMP     12 => 0070
0062    GGET    12   9      ; "print"
0063    KSTR    13  12      ; "\t%s"
0064    MOV     14  13
0065    TGETS   13  13  13  ; "format"
0066    MOV     15  10
0067    CALL    13   0   3
0068    CALLM   12   1   0
0069    JMP     12 => 0078
0070 => GGET    12   9      ; "print"
0071    KSTR    13  14      ; "\t%s = %q"
0072    MOV     14  13
0073    TGETS   13  13  13  ; "format"
0074    MOV     15  10
0075    MOV     16  11
0076    CALL    13   0   4
0077    CALLM   12   1   0
0078 => ITERC   10   3   3
0079    ITERL   10 => 0060
0080    GGET     7   9      ; "print"
0081    ISF          2
0082    JMP      8 => 0085
0083    KSTR     8  15      ; "from"
0084    JMP      9 => 0086
0085 => KSTR     8  16      ; "to"
0086 => CALL     7   1   2
0087    GGET     7   9      ; "print"
0088    KSTR     8  17      ; "\t"
0089    UGET     9   0      ; cfg
0090    TGETS    9   9   1  ; "config_files"
0091    TGETV    9   9   1
0092    TGETS    9   9   4  ; "file"
0093    CAT      8   8   9
0094    CALL     7   1   2
0095    KPRI     7   2
0096    UCLO     0 => 0097
0097 => RET1     7   2
0098    JMP      7 => 0103
0099 => KPRI     7   0
0100    MOV      8   6
0101    UCLO     0 => 0102
0102 => RET      7   3
0103 => UCLO     0 => 0104
0104 => RET0     0   1
0105 => RET      3   3
0106 => RET      5   3

-- BYTECODE -- config.lua:231-237
0001    TGETS    1   0   0  ; "scope"
0002    IST          1
0003    JMP      2 => 0021
0004    TGETS    1   0   1  ; "local"
0005    ISF          1
0006    JMP      2 => 0009
0007    KSTR     1   2      ; "user"
0008    JMP      2 => 0021
0009 => TGETS    1   0   3  ; "project_tree"
0010    ISF          1
0011    JMP      2 => 0014
0012    KSTR     1   4      ; "project"
0013    JMP      2 => 0021
0014 => UGET     1   0      ; cfg
0015    TGETS    1   1   5  ; "local_by_default"
0016    ISF          1
0017    JMP      2 => 0020
0018    KSTR     1   2      ; "user"
0019    JMP      2 => 0021
0020 => KSTR     1   6      ; "system"
0021 => RET1     1   2

-- BYTECODE -- config.lua:241-319
0001    UGET     1   0      ; deps
0002    TGETS    1   1   0  ; "check_lua_incdir"
0003    UGET     2   1      ; cfg
0004    TGETS    2   2   1  ; "variables"
0005    CALL     1   1   2
0006    UGET     1   0      ; deps
0007    TGETS    1   1   2  ; "check_lua_libdir"
0008    UGET     2   1      ; cfg
0009    TGETS    2   2   1  ; "variables"
0010    CALL     1   1   2
0011    TGETS    1   0   3  ; "lua_incdir"
0012    ISF          1
0013    JMP      2 => 0021
0014    GGET     1   4      ; "print"
0015    UGET     2   1      ; cfg
0016    TGETS    2   2   1  ; "variables"
0017    TGETS    2   2   5  ; "LUA_INCDIR"
0018    CALL     1   1   2
0019    KPRI     1   2
0020    RET1     1   2
0021 => TGETS    1   0   6  ; "lua_libdir"
0022    ISF          1
0023    JMP      2 => 0031
0024    GGET     1   4      ; "print"
0025    UGET     2   1      ; cfg
0026    TGETS    2   2   1  ; "variables"
0027    TGETS    2   2   7  ; "LUA_LIBDIR"
0028    CALL     1   1   2
0029    KPRI     1   2
0030    RET1     1   2
0031 => TGETS    1   0   8  ; "lua_ver"
0032    ISF          1
0033    JMP      2 => 0040
0034    GGET     1   4      ; "print"
0035    UGET     2   1      ; cfg
0036    TGETS    2   2   9  ; "lua_version"
0037    CALL     1   1   2
0038    KPRI     1   2
0039    RET1     1   2
0040 => TGETS    1   0  10  ; "system_config"
0041    ISF          1
0042    JMP      2 => 0048
0043    UGET     1   2      ; config_file
0044    UGET     2   1      ; cfg
0045    TGETS    2   2  11  ; "config_files"
0046    TGETS    2   2  12  ; "system"
0047    CALLT    1   2
0048 => TGETS    1   0  13  ; "user_config"
0049    ISF          1
0050    JMP      2 => 0056
0051    UGET     1   2      ; config_file
0052    UGET     2   1      ; cfg
0053    TGETS    2   2  11  ; "config_files"
0054    TGETS    2   2  14  ; "user"
0055    CALLT    1   2
0056 => TGETS    1   0  15  ; "rock_trees"
0057    ISF          1
0058    JMP      2 => 0099
0059    GGET     1  16      ; "ipairs"
0060    UGET     2   1      ; cfg
0061    TGETS    2   2  17  ; "rocks_trees"
0062    CALL     1   4   2
0063    JMP      4 => 0095
0064 => GGET     6  18      ; "type"
0065    MOV      7   5
0066    CALL     6   2   2
0067    ISNES    6  19      ; "string"
0068    JMP      6 => 0077
0069    UGET     6   3      ; util
0070    TGETS    6   6  20  ; "printout"
0071    UGET     7   4      ; dir
0072    TGETS    7   7  21  ; "normalize"
0073    MOV      8   5
0074    CALL     7   0   2
0075    CALLM    6   1   0
0076    JMP      6 => 0095
0077 => TGETS    6   5  22  ; "name"
0078    ISF          6
0079    JMP      7 => 0085
0080    KSTR     6  23      ; "\t"
0081    TGETS    7   5  22  ; "name"
0082    CAT      6   6   7
0083    IST          6
0084    JMP      7 => 0086
0085 => KSTR     6  24      ; ""
0086 => UGET     7   3      ; util
0087    TGETS    7   7  20  ; "printout"
0088    UGET     8   4      ; dir
0089    TGETS    8   8  21  ; "normalize"
0090    TGETS    9   5  25  ; "root"
0091    CALL     8   2   2
0092    MOV      9   6
0093    CAT      8   8   9
0094    CALL     7   1   2
0095 => ITERC    4   3   3
0096    ITERL    4 => 0064
0097    KPRI     1   2
0098    RET1     1   2
0099 => TGETS    1   0  26  ; "key"
0100    ISNES    1   9      ; "lua_version"
0101    JMP      1 => 0144
0102    TGETS    1   0  27  ; "value"
0103    ISF          1
0104    JMP      2 => 0144
0105    UGET     1   5      ; get_scope
0106    MOV      2   0
0107    CALL     1   2   2
0108    ISNES    1  28      ; "project"
0109    JMP      2 => 0118
0110    UGET     2   1      ; cfg
0111    TGETS    2   2  11  ; "config_files"
0112    TGETS    2   2  28  ; "project"
0113    IST          2
0114    JMP      2 => 0118
0115    KPRI     2   0
0116    KSTR     3  29      ; "Current directory is not part of a proje"~
0117    RET      2   3
0118 => UGET     2   4      ; dir
0119    TGETS    2   2  30  ; "dir_name"
0120    UGET     3   1      ; cfg
0121    TGETS    3   3  11  ; "config_files"
0122    TGETV    3   3   1
0123    TGETS    3   3  31  ; "file"
0124    CALL     2   2   2
0125    UGET     3   6      ; persist
0126    TGETS    3   3  32  ; "save_default_lua_version"
0127    MOV      4   2
0128    TGETS    5   0  27  ; "value"
0129    CALL     3   3   3
0130    IST          3
0131    JMP      5 => 0137
0132    KPRI     5   0
0133    KSTR     6  33      ; "could not set default Lua version: "
0134    MOV      7   4
0135    CAT      6   6   7
0136    RET      5   3
0137 => GGET     5   4      ; "print"
0138    KSTR     6  34      ; "Lua version will default to "
0139    TGETS    7   0  27  ; "value"
0140    KSTR     8  35      ; " in "
0141    MOV      9   2
0142    CAT      6   6   9
0143    CALL     5   1   2
0144 => TGETS    1   0  26  ; "key"
0145    ISNES    1  36      ; "lua_dir"
0146    JMP      1 => 0178
0147    TGETS    1   0  27  ; "value"
0148    ISF          1
0149    JMP      2 => 0178
0150    UGET     1   5      ; get_scope
0151    MOV      2   0
0152    CALL     1   2   2
0153    TDUP     2  38
0154    UGET     3   1      ; cfg
0155    TGETS    3   3   1  ; "variables"
0156    TGETS    3   3  37  ; "LUA_DIR"
0157    TSETS    3   2  39  ; "variables.LUA_DIR"
0158    UGET     3   1      ; cfg
0159    TGETS    3   3   1  ; "variables"
0160    TGETS    3   3  40  ; "LUA_BINDIR"
0161    TSETS    3   2  41  ; "variables.LUA_BINDIR"
0162    UGET     3   1      ; cfg
0163    TGETS    3   3   1  ; "variables"
0164    TGETS    3   3   5  ; "LUA_INCDIR"
0165    TSETS    3   2  42  ; "variables.LUA_INCDIR"
0166    UGET     3   1      ; cfg
0167    TGETS    3   3   1  ; "variables"
0168    TGETS    3   3   7  ; "LUA_LIBDIR"
0169    TSETS    3   2  43  ; "variables.LUA_LIBDIR"
0170    UGET     3   1      ; cfg
0171    TGETS    3   3  44  ; "lua_interpreter"
0172    TSETS    3   2  44  ; "lua_interpreter"
0173    UGET     3   7      ; write_entries
0174    MOV      4   2
0175    MOV      5   1
0176    TGETS    6   0  45  ; "unset"
0177    CALLT    3   4
0178 => TGETS    1   0  26  ; "key"
0179    ISF          1
0180    JMP      2 => 0207
0181    TGETS    1   0  27  ; "value"
0182    IST          1
0183    JMP      2 => 0187
0184    TGETS    1   0  45  ; "unset"
0185    ISF          1
0186    JMP      2 => 0202
0187 => UGET     1   5      ; get_scope
0188    MOV      2   0
0189    CALL     1   2   2
0190    UGET     2   7      ; write_entries
0191    TNEW     3 2048
0192    TGETS    4   0  26  ; "key"
0193    TGETS    5   0  27  ; "value"
0194    IST          5
0195    JMP      6 => 0197
0196    TGETS    5   0  45  ; "unset"
0197 => TSETV    5   3   4
0198    MOV      4   1
0199    TGETS    5   0  45  ; "unset"
0200    CALLT    2   4
0201    JMP      1 => 0207
0202 => UGET     1   8      ; print_entry
0203    TGETS    2   0  26  ; "key"
0204    UGET     3   1      ; cfg
0205    TGETS    4   0  46  ; "json"
0206    CALLT    1   4
0207 => UGET     1   9      ; cleanup
0208    UGET     2   1      ; cfg
0209    CALL     1   2   2
0210    TGETS    2   0  46  ; "json"
0211    ISF          2
0212    JMP      3 => 0217
0213    UGET     2  10      ; print_json
0214    MOV      3   1
0215    CALLT    2   2
0216    JMP      2 => 0225
0217 => GGET     2   4      ; "print"
0218    UGET     3   6      ; persist
0219    TGETS    3   3  47  ; "save_from_table_to_string"
0220    MOV      4   1
0221    CALL     3   0   2
0222    CALLM    2   1   0
0223    KPRI     2   2
0224    RET1     2   2
0225 => RET0     0   1

-- BYTECODE -- config.lua:0-322
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.persist"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.util"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.deps"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.dir"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.fs"
0019    CALL     6   2   2
0020    FNEW     7   8      ; config.lua:12
0021    TSETS    7   0   7  ; "add_to_parser"
0022    FNEW     7   9      ; config.lua:76
0023    TDUP     8  10
0024    FNEW     9  11      ; config.lua:93
0025    FNEW    10  12      ; config.lua:97
0026    FNEW    11  13      ; config.lua:107
0027    FNEW    12  14      ; config.lua:138
0028    FNEW    13  15      ; config.lua:148
0029    FNEW    14  16      ; config.lua:168
0030    FNEW    15  17      ; config.lua:178
0031    FNEW    16  18      ; config.lua:231
0032    FNEW    17  20      ; config.lua:241
0033    TSETS   17   0  19  ; "command"
0034    UCLO     0 => 0035
0035 => RET1     0   2

-----------------------
-- BYTECODE -- search.lua:12-28
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "search"
0004    KSTR     4   2      ; "Query the LuaRocks servers."
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "name"
0012    KSTR     5   6      ; "Name of the rock to search for."
0013    CALL     2   2   4
0014    MOV      3   2
0015    TGETS    2   2   7  ; "args"
0016    KSTR     4   8      ; "?"
0017    CALL     2   2   3
0018    MOV      3   2
0019    TGETS    2   2   9  ; "action"
0020    UGET     4   0      ; util
0021    TGETS    4   4  10  ; "namespaced_name_action"
0022    CALL     2   1   3
0023    MOV      3   1
0024    TGETS    2   1   4  ; "argument"
0025    KSTR     4  11      ; "version"
0026    KSTR     5  12      ; "Rock version to search for."
0027    CALL     2   2   4
0028    MOV      3   2
0029    TGETS    2   2   7  ; "args"
0030    KSTR     4   8      ; "?"
0031    CALL     2   1   3
0032    MOV      3   1
0033    TGETS    2   1  13  ; "flag"
0034    KSTR     4  14      ; "--source"
0035    KSTR     5  15      ; "Return only rockspecs and source rocks, "~
0036    KSTR     6  16      ; "with the "build" command."
0037    CAT      5   5   6
0038    CALL     2   1   4
0039    MOV      3   1
0040    TGETS    2   1  13  ; "flag"
0041    KSTR     4  17      ; "--binary"
0042    KSTR     5  18      ; "Return only pure Lua and binary rocks (r"~
0043    KSTR     6  19      ; "can be used with the "install" command w"~
0044    CAT      5   5   6
0045    CALL     2   1   4
0046    MOV      3   1
0047    TGETS    2   1  13  ; "flag"
0048    KSTR     4  20      ; "--all"
0049    KSTR     5  21      ; "List all contents of the server that are"~
0050    KSTR     6  22      ; "this platform, do not filter by name."
0051    CAT      5   5   6
0052    CALL     2   1   4
0053    MOV      3   1
0054    TGETS    2   1  13  ; "flag"
0055    KSTR     4  23      ; "--porcelain"
0056    KSTR     5  24      ; "Return a machine readable format."
0057    CALL     2   1   4
0058    RET0     0   1

-- BYTECODE -- search.lua:36-51
0001    TNEW     1   0
0002    TNEW     2   0
0003    GGET     3   0      ; "pairs"
0004    MOV      4   0
0005    CALL     3   4   2
0006    ISNEXT   6 => 0041
0007 => GGET     8   0      ; "pairs"
0008    MOV      9   7
0009    CALL     8   4   2
0010    ISNEXT  11 => 0039
0011 => GGET    13   1      ; "ipairs"
0012    MOV     14  12
0013    CALL    13   4   2
0014    JMP     16 => 0037
0015 => MOV     18   1
0016    TGETS   19  17   2  ; "arch"
0017    ISEQS   19   3      ; "all"
0018    JMP     19 => 0024
0019    TGETS   19  17   2  ; "arch"
0020    UGET    20   0      ; cfg
0021    TGETS   20  20   2  ; "arch"
0022    ISNEV   19  20
0023    JMP     19 => 0025
0024 => MOV     18   2
0025 => UGET    19   1      ; results
0026    TGETS   19  19   4  ; "new"
0027    MOV     20   6
0028    MOV     21  11
0029    TGETS   22  17   5  ; "repo"
0030    TGETS   23  17   2  ; "arch"
0031    CALL    19   2   5
0032    UGET    20   2      ; search
0033    TGETS   20  20   6  ; "store_result"
0034    MOV     21  18
0035    MOV     22  19
0036    CALL    20   1   3
0037 => ITERC   16   3   3
0038    ITERL   16 => 0015
0039 => ITERN   11   3   3
0040    ITERL   11 => 0011
0041 => ITERN    6   3   3
0042    ITERL    6 => 0007
0043    MOV      3   1
0044    MOV      4   2
0045    RET      3   3

-- BYTECODE -- search.lua:56-82
0001    TGETS    1   0   0  ; "name"
0002    TGETS    2   0   1  ; "all"
0003    ISF          2
0004    JMP      3 => 0009
0005    KSTR     2   3      ; ""
0006    KPRI     3   0
0007    TSETS    3   0   2  ; "version"
0008    MOV      1   2
0009 => TGETS    2   0   0  ; "name"
0010    IST          2
0011    JMP      2 => 0023
0012    TGETS    2   0   1  ; "all"
0013    IST          2
0014    JMP      2 => 0023
0015    KPRI     2   0
0016    KSTR     3   4      ; "Enter name and version or use --all. "
0017    UGET     4   0      ; util
0018    TGETS    4   4   5  ; "see_help"
0019    KSTR     5   6      ; "search"
0020    CALL     4   2   2
0021    CAT      3   3   4
0022    RET      2   3
0023 => UGET     2   1      ; queries
0024    TGETS    2   2   7  ; "new"
0025    MOV      3   1
0026    TGETS    4   0   8  ; "namespace"
0027    TGETS    5   0   2  ; "version"
0028    KPRI     6   2
0029    CALL     2   2   5
0030    UGET     3   2      ; search
0031    TGETS    3   3   9  ; "search_repos"
0032    MOV      4   2
0033    CALL     3   3   2
0034    TGETS    5   0  10  ; "porcelain"
0035    UGET     6   0      ; util
0036    TGETS    6   6  11  ; "format_rock_name"
0037    MOV      7   1
0038    TGETS    8   0   8  ; "namespace"
0039    TGETS    9   0   2  ; "version"
0040    CALL     6   2   4
0041    UGET     7   0      ; util
0042    TGETS    7   7  12  ; "title"
0043    MOV      8   6
0044    KSTR     9  13      ; " - Search results for Lua "
0045    UGET    10   3      ; cfg
0046    TGETS   10  10  14  ; "lua_version"
0047    KSTR    11  15      ; ":"
0048    CAT      8   8  11
0049    MOV      9   5
0050    KSTR    10  16      ; "="
0051    CALL     7   1   4
0052    UGET     7   4      ; split_source_and_binary_results
0053    MOV      8   3
0054    CALL     7   3   2
0055    GGET     9  17      ; "next"
0056    MOV     10   7
0057    CALL     9   2   2
0058    ISF          9
0059    JMP     10 => 0073
0060    TGETS    9   0  18  ; "binary"
0061    IST          9
0062    JMP      9 => 0073
0063    UGET     9   0      ; util
0064    TGETS    9   9  12  ; "title"
0065    KSTR    10  19      ; "Rockspecs and source rocks:"
0066    MOV     11   5
0067    CALL     9   1   3
0068    UGET     9   2      ; search
0069    TGETS    9   9  20  ; "print_result_tree"
0070    MOV     10   7
0071    MOV     11   5
0072    CALL     9   1   3
0073 => GGET     9  17      ; "next"
0074    MOV     10   8
0075    CALL     9   2   2
0076    ISF          9
0077    JMP     10 => 0091
0078    TGETS    9   0  21  ; "source"
0079    IST          9
0080    JMP      9 => 0091
0081    UGET     9   0      ; util
0082    TGETS    9   9  12  ; "title"
0083    KSTR    10  22      ; "Binary and pure-Lua rocks:"
0084    MOV     11   5
0085    CALL     9   1   3
0086    UGET     9   2      ; search
0087    TGETS    9   9  20  ; "print_result_tree"
0088    MOV     10   8
0089    MOV     11   5
0090    CALL     9   1   3
0091 => KPRI     9   2
0092    RET1     9   2

-- BYTECODE -- search.lua:0-85
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.search"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.queries"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.results"
0016    CALL     5   2   2
0017    FNEW     6   7      ; search.lua:12
0018    TSETS    6   0   6  ; "add_to_parser"
0019    FNEW     6   8      ; search.lua:36
0020    FNEW     7  10      ; search.lua:56
0021    TSETS    7   0   9  ; "command"
0022    UCLO     0 => 0023
0023 => RET1     0   2

-----------------------
-- BYTECODE -- write_rockspec.lua:27-49
0001    MOV      2   0
0002    TGETS    1   0   0  ; "option"
0003    KSTR     3   1      ; "--output"
0004    KSTR     4   2      ; "Write the rockspec with the given filena"~
0005    KSTR     5   3      ; "If not given, a file is written in the c"~
0006    KSTR     6   4      ; "filename based on given name and version"~
0007    CAT      4   4   6
0008    CALL     1   2   4
0009    MOV      2   1
0010    TGETS    1   1   5  ; "argname"
0011    KSTR     3   6      ; "<file>"
0012    CALL     1   2   3
0013    MOV      3   0
0014    TGETS    2   0   0  ; "option"
0015    KSTR     4   7      ; "--license"
0016    KSTR     5   8      ; "A license string, such as "MIT/X11" or ""~
0017    CALL     2   2   4
0018    MOV      3   2
0019    TGETS    2   2   5  ; "argname"
0020    KSTR     4   9      ; "<string>"
0021    CALL     2   2   3
0022    MOV      4   0
0023    TGETS    3   0   0  ; "option"
0024    KSTR     5  10      ; "--summary"
0025    KSTR     6  11      ; "A short one-line description summary."
0026    CALL     3   2   4
0027    MOV      4   3
0028    TGETS    3   3   5  ; "argname"
0029    KSTR     5  12      ; "<txt>"
0030    CALL     3   2   3
0031    MOV      5   0
0032    TGETS    4   0   0  ; "option"
0033    KSTR     6  13      ; "--detailed"
0034    KSTR     7  14      ; "A longer description string."
0035    CALL     4   2   4
0036    MOV      5   4
0037    TGETS    4   4   5  ; "argname"
0038    KSTR     6  12      ; "<txt>"
0039    CALL     4   2   3
0040    MOV      6   0
0041    TGETS    5   0   0  ; "option"
0042    KSTR     7  15      ; "--homepage"
0043    KSTR     8  16      ; "Project homepage."
0044    CALL     5   2   4
0045    MOV      6   5
0046    TGETS    5   5   5  ; "argname"
0047    KSTR     7  12      ; "<txt>"
0048    CALL     5   2   3
0049    MOV      7   0
0050    TGETS    6   0   0  ; "option"
0051    KSTR     8  17      ; "--lua-versions"
0052    KSTR     9  18      ; "Supported Lua versions. Accepted values "~
0053    GGET    10  19      ; "table"
0054    TGETS   10  10  20  ; "concat"
0055    UGET    11   0      ; lua_versions
0056    KSTR    12  21      ; "", ""
0057    CALL    10   2   3
0058    KSTR    11  22      ; ""."
0059    CAT      9   9  11
0060    CALL     6   2   4
0061    MOV      7   6
0062    TGETS    6   6   5  ; "argname"
0063    KSTR     8  23      ; "<ver>"
0064    CALL     6   2   3
0065    MOV      7   6
0066    TGETS    6   6  24  ; "choices"
0067    UGET     8   0      ; lua_versions
0068    CALL     6   2   3
0069    MOV      8   0
0070    TGETS    7   0   0  ; "option"
0071    KSTR     9  25      ; "--rockspec-format"
0072    KSTR    10  26      ; "Rockspec format version, such as "1.0" o"~
0073    CALL     7   2   4
0074    MOV      8   7
0075    TGETS    7   7   5  ; "argname"
0076    KSTR     9  23      ; "<ver>"
0077    CALL     7   2   3
0078    MOV      9   0
0079    TGETS    8   0   0  ; "option"
0080    KSTR    10  27      ; "--tag"
0081    KSTR    11  28      ; "Tag to use. Will attempt to extract vers"~
0082    CALL     8   2   4
0083    MOV     10   0
0084    TGETS    9   0   0  ; "option"
0085    KSTR    11  29      ; "--lib"
0086    KSTR    12  30      ; "A comma-separated list of libraries that"~
0087    CALL     9   2   4
0088    MOV     10   9
0089    TGETS    9   9   5  ; "argname"
0090    KSTR    11  31      ; "<libs>"
0091    CALL     9   0   3
0092    RETM     1   8

-- BYTECODE -- write_rockspec.lua:51-74
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "write_rockspec"
0004    KSTR     4   2      ; "This command writes an initial version o"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Write a template for a rockspec file."
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "argument"
0015    KSTR     4   7      ; "name"
0016    KSTR     5   8      ; "Name of the rock."
0017    CALL     2   2   4
0018    MOV      3   2
0019    TGETS    2   2   9  ; "args"
0020    KSTR     4  10      ; "?"
0021    CALL     2   1   3
0022    MOV      3   1
0023    TGETS    2   1   6  ; "argument"
0024    KSTR     4  11      ; "version"
0025    KSTR     5  12      ; "Rock version."
0026    CALL     2   2   4
0027    MOV      3   2
0028    TGETS    2   2   9  ; "args"
0029    KSTR     4  10      ; "?"
0030    CALL     2   1   3
0031    MOV      3   1
0032    TGETS    2   1   6  ; "argument"
0033    KSTR     4  13      ; "location"
0034    KSTR     5  14      ; "URL or path to the rock sources."
0035    CALL     2   2   4
0036    MOV      3   2
0037    TGETS    2   2   9  ; "args"
0038    KSTR     4  10      ; "?"
0039    CALL     2   1   3
0040    UGET     2   1      ; write_rockspec
0041    TGETS    2   2  15  ; "cmd_options"
0042    MOV      3   1
0043    CALL     2   1   2
0044    RET0     0   1

-- BYTECODE -- write_rockspec.lua:76-78
0001    GGET     1   0      ; "io"
0002    TGETS    1   1   1  ; "open"
0003    UGET     2   0      ; dir
0004    TGETS    2   2   2  ; "path"
0005    UGET     3   1      ; fs
0006    TGETS    3   3   3  ; "current_dir"
0007    CALL     3   2   1
0008    MOV      4   0
0009    CALL     2   2   3
0010    KSTR     3   4      ; "r"
0011    CALLT    1   3

-- BYTECODE -- write_rockspec.lua:80-94
0001    UGET     1   0      ; fetch
0002    TGETS    1   1   0  ; "fetch_sources"
0003    MOV      2   0
0004    KPRI     3   1
0005    CALL     1   6   3
0006    ISNES    3   1      ; "source.dir"
0007    JMP      6 => 0012
0008    MOV      6   4
0009    MOV      2   5
0010    MOV      1   6
0011    JMP      6 => 0022
0012 => IST          1
0013    JMP      6 => 0022
0014    UGET     6   1      ; util
0015    TGETS    6   6   2  ; "warning"
0016    KSTR     7   3      ; "Could not fetch sources - "
0017    MOV      8   2
0018    CAT      7   7   8
0019    CALL     6   1   2
0020    KPRI     6   1
0021    RET1     6   2
0022 => UGET     6   1      ; util
0023    TGETS    6   6   4  ; "printout"
0024    KSTR     7   5      ; "File successfully downloaded. Making che"~
0025    CALL     6   1   2
0026    UGET     6   2      ; dir
0027    TGETS    6   6   6  ; "is_basic_protocol"
0028    TGETS    7   0   7  ; "source"
0029    TGETS    7   7   8  ; "protocol"
0030    CALL     6   2   2
0031    ISF          6
0032    JMP      7 => 0039
0033    TGETS    6   0   7  ; "source"
0034    UGET     7   3      ; fs
0035    TGETS    7   7  10  ; "get_md5"
0036    MOV      8   1
0037    CALL     7   2   2
0038    TSETS    7   6   9  ; "md5"
0039 => UGET     6   0      ; fetch
0040    TGETS    6   6  11  ; "find_base_dir"
0041    MOV      7   1
0042    MOV      8   2
0043    TGETS    9   0   7  ; "source"
0044    TGETS    9   9  12  ; "url"
0045    CALL     6   3   4
0046    KPRI     8   2
0047    ISTC     9   7
0048    JMP      9 => 0050
0049    MOV      9   6
0050 => MOV     10   2
0051    RET      8   4

-- BYTECODE -- write_rockspec.lua:122-139
0001    UGET     3   0      ; fs
0002    TGETS    3   3   0  ; "Q"
0003    UGET     4   1      ; cfg
0004    TGETS    4   4   1  ; "variables"
0005    MOV      6   0
0006    TGETS    5   0   2  ; "upper"
0007    CALL     5   2   2
0008    TGETV    4   4   5
0009    CALL     3   2   2
0010    KSTR     4   3      ; " "
0011    MOV      5   1
0012    CAT      3   3   5
0013    GGET     4   4      ; "io"
0014    TGETS    4   4   5  ; "popen"
0015    UGET     5   0      ; fs
0016    TGETS    5   5   6  ; "command_at"
0017    MOV      6   2
0018    UGET     7   0      ; fs
0019    TGETS    7   7   7  ; "quiet_stderr"
0020    MOV      8   3
0021    CALL     7   0   2
0022    CALLM    5   0   1
0023    CALLM    4   2   0
0024    IST          4
0025    JMP      5 => 0028
0026    KPRI     5   0
0027    RET1     5   2
0028 => MOV      6   4
0029    TGETS    5   4   8  ; "read"
0030    KSTR     7   9      ; "*a"
0031    CALL     5   2   3
0032    MOV      6   5
0033    TGETS    5   5  10  ; "match"
0034    KSTR     7  11      ; "^([^\r\n]+)"
0035    CALL     5   2   3
0036    MOV      7   4
0037    TGETS    6   4  12  ; "close"
0038    CALL     6   1   2
0039    IST          5
0040    JMP      6 => 0043
0041    KPRI     6   0
0042    RET1     6   2
0043 => MOV      7   5
0044    TGETS    6   5  10  ; "match"
0045    KSTR     8  13      ; "^[^@:/]+@[^@:/]+:.*$"
0046    CALL     6   2   3
0047    ISF          6
0048    JMP      7 => 0062
0049    MOV      7   5
0050    TGETS    6   5  10  ; "match"
0051    KSTR     8  14      ; "^([^@]+)@([^:]+):(.*)$"
0052    CALL     6   4   3
0053    MOV      9   0
0054    KSTR    10  15      ; "+ssh://"
0055    MOV     11   6
0056    KSTR    12  16      ; "@"
0057    MOV     13   7
0058    KSTR    14  17      ; "/"
0059    MOV     15   8
0060    CAT      5   9  15
0061    JMP      6 => 0075
0062 => UGET     6   2      ; util
0063    TGETS    6   6  18  ; "starts_with"
0064    MOV      7   5
0065    MOV      8   0
0066    KSTR     9  19      ; "://"
0067    CAT      8   8   9
0068    CALL     6   2   3
0069    IST          6
0070    JMP      6 => 0075
0071    MOV      6   0
0072    KSTR     7  20      ; "+"
0073    MOV      8   5
0074    CAT      5   6   8
0075 => UGET     6   3      ; simple_scm_protocols
0076    UGET     7   4      ; dir
0077    TGETS    7   7  21  ; "split_url"
0078    MOV      8   5
0079    CALL     7   2   2
0080    TGETV    6   6   7
0081    ISF          6
0082    JMP      7 => 0084
0083    RET1     5   2
0084 => RET0     0   1

-- BYTECODE -- write_rockspec.lua:141-144
0001    UGET     1   0      ; detect_url_from_command
0002    KSTR     2   0      ; "git"
0003    KSTR     3   1      ; "config --get remote.origin.url"
0004    MOV      4   0
0005    CALL     1   2   4
0006    IST          1
0007    JMP      2 => 0013
0008    UGET     1   0      ; detect_url_from_command
0009    KSTR     2   2      ; "hg"
0010    KSTR     3   3      ; "paths default"
0011    MOV      4   0
0012    CALL     1   2   4
0013 => RET1     1   2

-- BYTECODE -- write_rockspec.lua:146-152
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "://"
0004    CALL     1   2   3
0005    ISF          1
0006    JMP      2 => 0009
0007    RET1     0   2
0008    JMP      1 => 0016
0009 => UGET     1   0      ; detect_scm_url
0010    MOV      2   0
0011    CALL     1   2   2
0012    IST          1
0013    JMP      2 => 0015
0014    KSTR     1   2      ; "*** please add URL for source tarball, z"~
0015 => RET1     1   2
0016 => RET0     0   1

-- BYTECODE -- write_rockspec.lua:155-170
0001    ISF          1
0002    JMP      2 => 0004
0003    RET1     1   2
0004 => UGET     2   0      ; dir
0005    TGETS    2   2   0  ; "split_url"
0006    MOV      3   0
0007    CALL     2   3   2
0008    UGET     4   1      ; simple_scm_protocols
0009    TGETV    4   4   2
0010    ISF          4
0011    JMP      5 => 0033
0012    GGET     4   1      ; "ipairs"
0013    TDUP     5   2
0014    CALL     4   4   2
0015    JMP      7 => 0031
0016 => UGET     9   2      ; util
0017    TGETS    9   9   3  ; "starts_with"
0018    MOV     10   3
0019    MOV     11   8
0020    CALL     9   2   3
0021    ISF          9
0022    JMP     10 => 0031
0023    KSTR     9   4      ; "https://"
0024    MOV     11   3
0025    TGETS   10   3   5  ; "gsub"
0026    KSTR    12   6      ; "%.git$"
0027    KSTR    13   7      ; ""
0028    CALL    10   2   4
0029    CAT      9   9  10
0030    RET1     9   2
0031 => ITERC    7   3   3
0032    ITERL    7 => 0016
0033 => KSTR     4   8      ; "*** please enter a project homepage ***"
0034    RET1     4   2

-- BYTECODE -- write_rockspec.lua:172-190
0001    UGET     0   0      ; open_file
0002    KSTR     1   0      ; "README.md"
0003    CALL     0   2   2
0004    IST          0
0005    JMP      1 => 0009
0006    UGET     0   0      ; open_file
0007    KSTR     1   1      ; "README"
0008    CALL     0   2   2
0009 => IST          0
0010    JMP      1 => 0012
0011    RET0     0   1
0012 => MOV      2   0
0013    TGETS    1   0   2  ; "read"
0014    KSTR     3   3      ; "*a"
0015    CALL     1   2   3
0016    MOV      3   0
0017    TGETS    2   0   4  ; "close"
0018    CALL     2   1   2
0019    MOV      3   1
0020    TGETS    2   1   5  ; "match"
0021    KSTR     4   6      ; "\n\n([^%[].-)\n\n"
0022    CALL     2   2   3
0023    IST          2
0024    JMP      3 => 0030
0025    MOV      4   1
0026    TGETS    3   1   5  ; "match"
0027    KSTR     5   7      ; "\n\n(.*)"
0028    CALL     3   2   3
0029    MOV      2   3
0030 => KNIL     3   4
0031    ISF          2
0032    JMP      5 => 0055
0033    MOV      4   2
0034    LEN      5   2
0035    KSHORT   6  80
0036    ISGE     5   6
0037    JMP      5 => 0045
0038    MOV      6   2
0039    TGETS    5   2   8  ; "gsub"
0040    KSTR     7   9      ; "\n"
0041    KSTR     8  10      ; ""
0042    CALL     5   2   4
0043    MOV      3   5
0044    JMP      5 => 0055
0045 => MOV      6   2
0046    TGETS    5   2   8  ; "gsub"
0047    KSTR     7   9      ; "\n"
0048    KSTR     8  11      ; " "
0049    CALL     5   2   4
0050    MOV      6   5
0051    TGETS    5   5   5  ; "match"
0052    KSTR     7  12      ; "([^.]*%.) "
0053    CALL     5   2   3
0054    MOV      3   5
0055 => MOV      5   3
0056    MOV      6   4
0057    RET      5   3

-- BYTECODE -- write_rockspec.lua:197-207
0001    MOV      2   0
0002    TGETS    1   0   0  ; "gsub"
0003    KSTR     3   1      ; "^Copyright [^\n]*\n"
0004    KSTR     4   2      ; ""
0005    CALL     1   2   4
0006    KSHORT   2   0
0007    KSHORT   3   1
0008    LEN      4   1
0009    KSHORT   5   1
0010    FORI     3 => 0027
0011 => GGET     7   3      ; "string"
0012    TGETS    7   7   4  ; "byte"
0013    MOV      9   1
0014    TGETS    8   1   5  ; "sub"
0015    MOV     10   6
0016    MOV     11   6
0017    CALL     8   0   4
0018    CALLM    7   2   0
0019    KSHORT   8  32
0020    ISGE     8   7
0021    JMP      8 => 0026
0022    KSHORT   8 128
0023    ISGT     7   8
0024    JMP      8 => 0026
0025    ADDVV    2   2   7
0026 => FORL     3 => 0011
0027 => UGET     3   0      ; licenses
0028    TGETV    3   3   2
0029    RET1     3   2

-- BYTECODE -- write_rockspec.lua:209-219
0001    UGET     0   0      ; open_file
0002    KSTR     1   0      ; "COPYING"
0003    CALL     0   2   2
0004    IST          0
0005    JMP      1 => 0014
0006    UGET     0   0      ; open_file
0007    KSTR     1   1      ; "LICENSE"
0008    CALL     0   2   2
0009    IST          0
0010    JMP      1 => 0014
0011    UGET     0   0      ; open_file
0012    KSTR     1   2      ; "MIT-LICENSE.txt"
0013    CALL     0   2   2
0014 => IST          0
0015    JMP      1 => 0018
0016    KPRI     1   0
0017    RET1     1   2
0018 => MOV      2   0
0019    TGETS    1   0   3  ; "read"
0020    KSTR     3   4      ; "*a"
0021    CALL     1   2   3
0022    MOV      3   0
0023    TGETS    2   0   5  ; "close"
0024    CALL     2   1   2
0025    UGET     2   1      ; detect_license
0026    MOV      3   1
0027    CALL     2   2   2
0028    ISF          2
0029    JMP      3 => 0033
0030    MOV      3   2
0031    MOV      4   1
0032    RET      3   3
0033 => KPRI     3   0
0034    MOV      4   1
0035    RET      3   3

-- BYTECODE -- write_rockspec.lua:221-235
0001    TGETS    2   0   0  ; "build"
0002    KSTR     3   2      ; "builtin"
0003    TSETS    3   2   1  ; "type"
0004    KNIL     2   3
0005    ISF          1
0006    JMP      4 => 0033
0007    TNEW     4   0
0008    TNEW     3   0
0009    MOV      2   4
0010    GGET     4   3      ; "ipairs"
0011    MOV      5   1
0012    CALL     4   4   2
0013    JMP      7 => 0031
0014 => MOV     10   8
0015    TGETS    9   8   4  ; "upper"
0016    CALL     9   2   2
0017    LEN     10   2
0018    ADDVN   10  10   0  ; 1
0019    KSTR    11   5      ; "$("
0020    MOV     12   9
0021    KSTR    13   6      ; "_INCDIR)"
0022    CAT     11  11  13
0023    TSETV   11   2  10
0024    LEN     10   3
0025    ADDVN   10  10   0  ; 1
0026    KSTR    11   5      ; "$("
0027    MOV     12   9
0028    KSTR    13   7      ; "_LIBDIR)"
0029    CAT     11  11  13
0030    TSETV   11   3  10
0031 => ITERC    7   3   3
0032    ITERL    7 => 0014
0033 => TGETS    4   0   0  ; "build"
0034    TGETS    5   0   0  ; "build"
0035    TGETS    6   0   0  ; "build"
0036    UGET     7   0      ; builtin
0037    TGETS    7   7  11  ; "autodetect_modules"
0038    MOV      8   1
0039    MOV      9   2
0040    MOV     10   3
0041    CALL     7   4   4
0042    TSETS    9   6  10  ; "copy_directories"
0043    TSETS    8   5   9  ; "install"
0044    TSETS    7   4   8  ; "modules"
0045    RET0     0   1

-- BYTECODE -- write_rockspec.lua:237-261
0001    TGETS    1   0   0  ; "source"
0002    KPRI     2   0
0003    TSETS    2   1   1  ; "file"
0004    TGETS    1   0   0  ; "source"
0005    KPRI     2   0
0006    TSETS    2   1   2  ; "protocol"
0007    TGETS    1   0   0  ; "source"
0008    KPRI     2   0
0009    TSETS    2   1   3  ; "identifier"
0010    TGETS    1   0   0  ; "source"
0011    KPRI     2   0
0012    TSETS    2   1   4  ; "dir"
0013    TGETS    1   0   0  ; "source"
0014    KPRI     2   0
0015    TSETS    2   1   5  ; "dir_set"
0016    TGETS    1   0   0  ; "source"
0017    KPRI     2   0
0018    TSETS    2   1   6  ; "pathname"
0019    KPRI     1   0
0020    TSETS    1   0   7  ; "variables"
0021    KPRI     1   0
0022    TSETS    1   0   8  ; "name"
0023    KPRI     1   0
0024    TSETS    1   0   9  ; "format_is_at_least"
0025    KPRI     1   0
0026    TSETS    1   0  10  ; "local_abs_filename"
0027    KPRI     1   0
0028    TSETS    1   0  11  ; "rocks_provided"
0029    GGET     1  12      ; "ipairs"
0030    TDUP     2  13
0031    CALL     1   4   2
0032    JMP      4 => 0043
0033 => TGETV    6   0   5
0034    ISF          6
0035    JMP      7 => 0043
0036    GGET     6  14      ; "next"
0037    TGETV    7   0   5
0038    CALL     6   2   2
0039    IST          6
0040    JMP      6 => 0043
0041    KPRI     6   0
0042    TSETV    6   0   5
0043 => ITERC    4   3   3
0044    ITERL    4 => 0033
0045    GGET     1  12      ; "ipairs"
0046    TDUP     2  15
0047    CALL     1   4   2
0048    JMP      4 => 0063
0049 => TGETV    6   0   5
0050    ISF          6
0051    JMP      7 => 0063
0052    GGET     6  12      ; "ipairs"
0053    TGETV    7   0   5
0054    CALL     6   4   2
0055    JMP      9 => 0061
0056 => TGETV   11   0   5
0057    GGET    12  16      ; "tostring"
0058    MOV     13  10
0059    CALL    12   2   2
0060    TSETV   12  11   9
0061 => ITERC    9   3   3
0062    ITERL    9 => 0056
0063 => ITERC    4   3   3
0064    ITERL    4 => 0049
0065    RET0     0   1

-- BYTECODE -- write_rockspec.lua:263-406
0001    TGETS    1   0   0  ; "name"
0002    TGETS    2   0   1  ; "version"
0003    TGETS    3   0   2  ; "location"
0004    IST          1
0005    JMP      4 => 0008
0006    KSTR     3   3      ; "."
0007    JMP      4 => 0017
0008 => IST          2
0009    JMP      4 => 0013
0010    MOV      3   1
0011    KPRI     1   0
0012    JMP      4 => 0017
0013 => IST          3
0014    JMP      4 => 0017
0015    MOV      3   2
0016    KPRI     2   0
0017 => TGETS    4   0   4  ; "tag"
0018    ISF          4
0019    JMP      5 => 0029
0020    IST          2
0021    JMP      4 => 0029
0022    TGETS    4   0   4  ; "tag"
0023    MOV      5   4
0024    TGETS    4   4   5  ; "gsub"
0025    KSTR     6   6      ; "^v"
0026    KSTR     7   7      ; ""
0027    CALL     4   2   4
0028    MOV      2   4
0029 => UGET     4   0      ; dir
0030    TGETS    4   4   8  ; "split_url"
0031    MOV      5   3
0032    CALL     4   3   2
0033    ISNES    4   9      ; "file"
0034    JMP      6 => 0047
0035    ISNES    5   3      ; "."
0036    JMP      6 => 0092
0037    IST          1
0038    JMP      6 => 0046
0039    UGET     6   0      ; dir
0040    TGETS    6   6  10  ; "base_name"
0041    UGET     7   1      ; fs
0042    TGETS    7   7  11  ; "current_dir"
0043    CALL     7   0   1
0044    CALLM    6   2   0
0045    MOV      1   6
0046 => JMP      6 => 0092
0047 => UGET     6   0      ; dir
0048    TGETS    6   6  12  ; "is_basic_protocol"
0049    MOV      7   4
0050    CALL     6   2   2
0051    ISF          6
0052    JMP      7 => 0080
0053    UGET     6   0      ; dir
0054    TGETS    6   6  10  ; "base_name"
0055    MOV      7   3
0056    CALL     6   2   2
0057    MOV      8   6
0058    TGETS    7   6  13  ; "match"
0059    KSTR     9  14      ; "(.*)-([^-]+)"
0060    CALL     7   3   3
0061    ISF          7
0062    JMP      9 => 0092
0063    IST          1
0064    JMP      9 => 0066
0065    MOV      1   7
0066 => IST          2
0067    JMP      9 => 0079
0068    MOV     10   8
0069    TGETS    9   8   5  ; "gsub"
0070    KSTR    11  15      ; "%.[a-z]+$"
0071    KSTR    12   7      ; ""
0072    CALL     9   2   4
0073    MOV     10   9
0074    TGETS    9   9   5  ; "gsub"
0075    KSTR    11  16      ; "%.tar$"
0076    KSTR    12   7      ; ""
0077    CALL     9   2   4
0078    MOV      2   9
0079 => JMP      6 => 0092
0080 => IST          1
0081    JMP      6 => 0092
0082    UGET     6   0      ; dir
0083    TGETS    6   6  10  ; "base_name"
0084    MOV      7   3
0085    CALL     6   2   2
0086    MOV      7   6
0087    TGETS    6   6   5  ; "gsub"
0088    KSTR     8  17      ; "%.[^.]+$"
0089    KSTR     9   7      ; ""
0090    CALL     6   2   4
0091    MOV      1   6
0092 => IST          1
0093    JMP      6 => 0102
0094    KPRI     6   0
0095    KSTR     7  18      ; "Could not infer rock name. "
0096    UGET     8   2      ; util
0097    TGETS    8   8  19  ; "see_help"
0098    KSTR     9  20      ; "write_rockspec"
0099    CALL     8   2   2
0100    CAT      7   7   8
0101    RET      6   3
0102 => IST          2
0103    JMP      6 => 0105
0104    KSTR     2  21      ; "dev"
0105 => TGETS    6   0  22  ; "output"
0106    IST          6
0107    JMP      7 => 0121
0108    UGET     6   0      ; dir
0109    TGETS    6   6  23  ; "path"
0110    UGET     7   1      ; fs
0111    TGETS    7   7  11  ; "current_dir"
0112    CALL     7   2   1
0113    MOV      9   1
0114    TGETS    8   1  24  ; "lower"
0115    CALL     8   2   2
0116    KSTR     9  25      ; "-"
0117    MOV     10   2
0118    KSTR    11  26      ; "-1.rockspec"
0119    CAT      8   8  11
0120    CALL     6   2   3
0121 => UGET     7   3      ; detect_url
0122    MOV      8   3
0123    CALL     7   2   2
0124    UGET     8   4      ; detect_homepage
0125    MOV      9   7
0126    TGETS   10   0  27  ; "homepage"
0127    CALL     8   2   3
0128    UGET     9   5      ; rockspecs
0129    TGETS    9   9  28  ; "from_persisted_table"
0130    MOV     10   6
0131    TDUP    11  30
0132    TGETS   12   0  29  ; "rockspec_format"
0133    TSETS   12  11  29  ; "rockspec_format"
0134    TSETS    1  11  31  ; "package"
0135    MOV     12   2
0136    KSTR    13  32      ; "-1"
0137    CAT     12  12  13
0138    TSETS   12  11   1  ; "version"
0139    TDUP    12  33
0140    TSETS    7  12  34  ; "url"
0141    TGETS   13   0   4  ; "tag"
0142    TSETS   13  12   4  ; "tag"
0143    TSETS   12  11  35  ; "source"
0144    TDUP    12  37
0145    TGETS   13   0  36  ; "summary"
0146    IST         13
0147    JMP     14 => 0149
0148    KSTR    13  38      ; "*** please specify description summary *"~
0149 => TSETS   13  12  36  ; "summary"
0150    TGETS   13   0  39  ; "detailed"
0151    IST         13
0152    JMP     14 => 0154
0153    KSTR    13  40      ; "*** please enter a detailed description "~
0154 => TSETS   13  12  39  ; "detailed"
0155    TSETS    8  12  27  ; "homepage"
0156    TGETS   13   0  41  ; "license"
0157    IST         13
0158    JMP     14 => 0160
0159    KSTR    13  42      ; "*** please specify a license ***"
0160 => TSETS   13  12  41  ; "license"
0161    TSETS   12  11  43  ; "description"
0162    TNEW    12   3
0163    UGET    13   6      ; lua_version_dep
0164    TGETS   14   0  44  ; "lua_versions"
0165    TGETV   13  13  14
0166    TSETB   13  12   1
0167    TSETS   12  11  45  ; "dependencies"
0168    TNEW    12   0
0169    TSETS   12  11  46  ; "build"
0170    CALL     9   3   3
0171    GGET    11  47      ; "assert"
0172    NOT     12  10
0173    MOV     13  10
0174    CALL    11   1   3
0175    TGETS   11   9  35  ; "source"
0176    TSETS    4  11  48  ; "protocol"
0177    GGET    11  49      ; "next"
0178    TGETS   12   9  45  ; "dependencies"
0179    CALL    11   2   2
0180    IST         11
0181    JMP     11 => 0191
0182    UGET    11   2      ; util
0183    TGETS   11  11  50  ; "warning"
0184    KSTR    12  51      ; "Please specify supported Lua versions wi"~
0185    UGET    13   2      ; util
0186    TGETS   13  13  19  ; "see_help"
0187    KSTR    14  20      ; "write_rockspec"
0188    CALL    13   2   2
0189    CAT     12  12  13
0190    CALL    11   1   2
0191 => MOV     11   3
0192    MOV     13   3
0193    TGETS   12   3  13  ; "match"
0194    KSTR    14  52      ; "://"
0195    CALL    12   2   3
0196    ISF         12
0197    JMP     13 => 0247
0198    TGETS   12   9  35  ; "source"
0199    UGET    13   0      ; dir
0200    TGETS   13  13  10  ; "base_name"
0201    MOV     14   3
0202    CALL    13   2   2
0203    TSETS   13  12   9  ; "file"
0204    UGET    12   0      ; dir
0205    TGETS   12  12  12  ; "is_basic_protocol"
0206    TGETS   13   9  35  ; "source"
0207    TGETS   13  13  48  ; "protocol"
0208    CALL    12   2   2
0209    IST         12
0210    JMP     12 => 0221
0211    ISEQS    2  21      ; "dev"
0212    JMP     12 => 0221
0213    TGETS   12   9  35  ; "source"
0214    TGETS   13   0   4  ; "tag"
0215    IST         13
0216    JMP     14 => 0220
0217    KSTR    13  53      ; "v"
0218    MOV     14   2
0219    CAT     13  13  14
0220 => TSETS   13  12   4  ; "tag"
0221 => TGETS   12   9  35  ; "source"
0222    KPRI    13   0
0223    TSETS   13  12  54  ; "dir"
0224    UGET    12   7      ; fetch_url
0225    MOV     13   9
0226    CALL    12   4   2
0227    ISF         12
0228    JMP     15 => 0237
0229    UGET    15   0      ; dir
0230    TGETS   15  15  10  ; "base_name"
0231    MOV     16   3
0232    CALL    15   2   2
0233    ISEQV   13  15
0234    JMP     15 => 0237
0235    TGETS   15   9  35  ; "source"
0236    TSETS   13  15  54  ; "dir"
0237 => ISF         13
0238    JMP     15 => 0246
0239    UGET    15   0      ; dir
0240    TGETS   15  15  23  ; "path"
0241    MOV     16  14
0242    MOV     17  13
0243    CALL    15   2   3
0244    MOV     11  15
0245    JMP     15 => 0247
0246 => KPRI    11   0
0247 => IST         11
0248    JMP     12 => 0250
0249    KSTR    11   3      ; "."
0250 => KPRI    12   0
0251    TGETS   13   0  55  ; "lib"
0252    ISF         13
0253    JMP     14 => 0277
0254    TNEW    12   0
0255    TNEW    13   0
0256    TSETS   13   9  56  ; "external_dependencies"
0257    TGETS   13   0  55  ; "lib"
0258    MOV     14  13
0259    TGETS   13  13  57  ; "gmatch"
0260    KSTR    15  58      ; "([^,]+)"
0261    CALL    13   4   3
0262    JMP     16 => 0275
0263 => GGET    17  59      ; "table"
0264    TGETS   17  17  60  ; "insert"
0265    MOV     18  12
0266    MOV     19  16
0267    CALL    17   1   3
0268    TGETS   17   9  56  ; "external_dependencies"
0269    MOV     19  16
0270    TGETS   18  16  61  ; "upper"
0271    CALL    18   2   2
0272    TDUP    19  62
0273    TSETS   16  19  63  ; "library"
0274    TSETV   19  17  18
0275 => ITERC   16   2   3
0276    ITERL   16 => 0263
0277 => UGET    13   1      ; fs
0278    TGETS   13  13  64  ; "change_dir"
0279    MOV     14  11
0280    CALL    13   3   2
0281    IST         13
0282    JMP     15 => 0288
0283    KPRI    15   0
0284    KSTR    16  65      ; "Failed reaching files from project - err"~
0285    MOV     17  11
0286    CAT     16  16  17
0287    RET     15   3
0288 => TGETS   15   0  36  ; "summary"
0289    ISF         15
0290    JMP     16 => 0294
0291    TGETS   15   0  39  ; "detailed"
0292    IST         15
0293    JMP     15 => 0308
0294 => UGET    15   8      ; detect_description
0295    CALL    15   3   1
0296    TGETS   17   9  43  ; "description"
0297    TGETS   18   0  36  ; "summary"
0298    IST         18
0299    JMP     19 => 0301
0300    MOV     18  15
0301 => TSETS   18  17  36  ; "summary"
0302    TGETS   17   9  43  ; "description"
0303    TGETS   18   0  39  ; "detailed"
0304    IST         18
0305    JMP     19 => 0307
0306    MOV     18  16
0307 => TSETS   18  17  39  ; "detailed"
0308 => TGETS   15   0  41  ; "license"
0309    IST         15
0310    JMP     15 => 0335
0311    UGET    15   9      ; check_license
0312    CALL    15   3   1
0313    ISF         15
0314    JMP     17 => 0318
0315    TGETS   17   9  43  ; "description"
0316    TSETS   15  17  41  ; "license"
0317    JMP     17 => 0335
0318 => ISF         15
0319    JMP     17 => 0335
0320    UGET    17   2      ; util
0321    TGETS   17  17  66  ; "title"
0322    KSTR    18  67      ; "Could not auto-detect type for project l"~
0323    CALL    17   1   2
0324    UGET    17   2      ; util
0325    TGETS   17  17  68  ; "printout"
0326    MOV     18  16
0327    CALL    17   1   2
0328    UGET    17   2      ; util
0329    TGETS   17  17  68  ; "printout"
0330    CALL    17   1   1
0331    UGET    17   2      ; util
0332    TGETS   17  17  66  ; "title"
0333    KSTR    18  69      ; "Please fill in the source.license field "~
0334    CALL    17   1   2
0335 => UGET    15  10      ; fill_as_builtin
0336    MOV     16   9
0337    MOV     17  12
0338    CALL    15   1   3
0339    UGET    15  11      ; rockspec_cleanup
0340    MOV     16   9
0341    CALL    15   1   2
0342    UGET    15  12      ; persist
0343    TGETS   15  15  70  ; "save_from_table"
0344    MOV     16   6
0345    MOV     17   9
0346    UGET    18  13      ; type_rockspec
0347    TGETS   18  18  71  ; "order"
0348    CALL    15   1   4
0349    UGET    15   2      ; util
0350    TGETS   15  15  68  ; "printout"
0351    CALL    15   1   1
0352    UGET    15   2      ; util
0353    TGETS   15  15  68  ; "printout"
0354    KSTR    16  72      ; "Wrote template at "
0355    MOV     17   6
0356    KSTR    18  73      ; " -- you should now edit and finish it."
0357    CAT     16  16  18
0358    CALL    15   1   2
0359    UGET    15   2      ; util
0360    TGETS   15  15  68  ; "printout"
0361    CALL    15   1   1
0362    KPRI    15   2
0363    RET1    15   2

-- BYTECODE -- write_rockspec.lua:0-409
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.build.builtin"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.fetch"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.persist"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.rockspecs"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.type.rockspec"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.util"
0028    CALL     9   2   2
0029    TDUP    10  10
0030    FNEW    11  12      ; write_rockspec.lua:27
0031    TSETS   11   0  11  ; "cmd_options"
0032    FNEW    11  14      ; write_rockspec.lua:51
0033    TSETS   11   0  13  ; "add_to_parser"
0034    FNEW    11  15      ; write_rockspec.lua:76
0035    FNEW    12  16      ; write_rockspec.lua:80
0036    TDUP    13  17
0037    TDUP    14  18
0038    KPRI    15   0
0039    FNEW    16  19      ; write_rockspec.lua:122
0040    FNEW    17  20      ; write_rockspec.lua:141
0041    FNEW    15  21      ; write_rockspec.lua:146
0042    UCLO    16 => 0043
0043 => FNEW    16  22      ; write_rockspec.lua:155
0044    FNEW    17  23      ; write_rockspec.lua:172
0045    TDUP    18  24
0046    FNEW    19  25      ; write_rockspec.lua:197
0047    FNEW    20  26      ; write_rockspec.lua:209
0048    FNEW    21  27      ; write_rockspec.lua:221
0049    FNEW    22  28      ; write_rockspec.lua:237
0050    FNEW    23  30      ; write_rockspec.lua:263
0051    TSETS   23   0  29  ; "command"
0052    UCLO     0 => 0053
0053 => RET1     0   2

-----------------------
-- BYTECODE -- test.lua:9-30
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "test"
0004    KSTR     4   2      ; "Run the test suite for the Lua project i"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Run the test suite in the current direct"~
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "argument"
0015    KSTR     4   7      ; "rockspec"
0016    KSTR     5   8      ; "Project rockspec."
0017    CALL     2   2   4
0018    MOV      3   2
0019    TGETS    2   2   9  ; "args"
0020    KSTR     4  10      ; "?"
0021    CALL     2   1   3
0022    MOV      3   1
0023    TGETS    2   1   6  ; "argument"
0024    KSTR     4   9      ; "args"
0025    KSTR     5  11      ; "Test suite arguments."
0026    CALL     2   2   4
0027    MOV      3   2
0028    TGETS    2   2   9  ; "args"
0029    KSTR     4  12      ; "*"
0030    CALL     2   1   3
0031    MOV      3   1
0032    TGETS    2   1  13  ; "option"
0033    KSTR     4  14      ; "--test-type"
0034    KSTR     5  15      ; "Specify the test suite type manually if "~
0035    KSTR     6  16      ; "not specified in the rockspec and it cou"~
0036    CAT      5   5   6
0037    CALL     2   2   4
0038    MOV      3   2
0039    TGETS    2   2  17  ; "argname"
0040    KSTR     4  18      ; "<type>"
0041    CALL     2   1   3
0042    RET0     0   1

-- BYTECODE -- test.lua:32-45
0001    TGETS    1   0   0  ; "rockspec"
0002    ISF          1
0003    JMP      2 => 0017
0004    TGETS    1   0   0  ; "rockspec"
0005    MOV      2   1
0006    TGETS    1   1   1  ; "match"
0007    KSTR     3   2      ; "rockspec$"
0008    CALL     1   2   3
0009    ISF          1
0010    JMP      2 => 0017
0011    UGET     1   0      ; test
0012    TGETS    1   1   3  ; "run_test_suite"
0013    TGETS    2   0   0  ; "rockspec"
0014    TGETS    3   0   4  ; "test_type"
0015    TGETS    4   0   5  ; "args"
0016    CALLT    1   4
0017 => GGET     1   6      ; "table"
0018    TGETS    1   1   7  ; "insert"
0019    TGETS    2   0   5  ; "args"
0020    KSHORT   3   1
0021    TGETS    4   0   0  ; "rockspec"
0022    CALL     1   1   4
0023    UGET     1   1      ; util
0024    TGETS    1   1   8  ; "get_default_rockspec"
0025    CALL     1   3   1
0026    IST          1
0027    JMP      3 => 0031
0028    KPRI     3   0
0029    MOV      4   2
0030    RET      3   3
0031 => UGET     3   0      ; test
0032    TGETS    3   3   3  ; "run_test_suite"
0033    MOV      4   1
0034    TGETS    5   0   4  ; "test_type"
0035    TGETS    6   0   5  ; "args"
0036    CALLT    3   4

-- BYTECODE -- test.lua:0-48
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.test"
0007    CALL     2   2   2
0008    FNEW     3   4      ; test.lua:9
0009    TSETS    3   0   3  ; "add_to_parser"
0010    FNEW     3   6      ; test.lua:32
0011    TSETS    3   0   5  ; "command"
0012    UCLO     0 => 0013
0013 => RET1     0   2

-----------------------
-- BYTECODE -- upload.lua:11-30
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "upload"
0004    KSTR     4   2      ; "Pack a source rock file (.src.rock exten"~
0005    KSTR     5   3      ; "and upload it and the rockspec to the pu"~
0006    CAT      4   4   5
0007    UGET     5   0      ; util
0008    TGETS    5   5   4  ; "see_also"
0009    CALL     5   0   1
0010    CALLM    1   2   3
0011    MOV      2   1
0012    TGETS    1   1   5  ; "summary"
0013    KSTR     3   6      ; "Upload a rockspec to the public rocks re"~
0014    CALL     1   2   3
0015    MOV      3   1
0016    TGETS    2   1   7  ; "argument"
0017    KSTR     4   8      ; "rockspec"
0018    KSTR     5   9      ; "Rockspec for the rock to upload."
0019    CALL     2   1   4
0020    MOV      3   1
0021    TGETS    2   1  10  ; "flag"
0022    KSTR     4  11      ; "--skip-pack"
0023    KSTR     5  12      ; "Do not pack and send source rock."
0024    CALL     2   1   4
0025    MOV      3   1
0026    TGETS    2   1  13  ; "option"
0027    KSTR     4  14      ; "--api-key"
0028    KSTR     5  15      ; "Pass an API key. It will be stored for s"~
0029    CALL     2   2   4
0030    MOV      3   2
0031    TGETS    2   2  16  ; "argname"
0032    KSTR     4  17      ; "<key>"
0033    CALL     2   1   3
0034    MOV      3   1
0035    TGETS    2   1  13  ; "option"
0036    KSTR     4  18      ; "--temp-key"
0037    KSTR     5  19      ; "Use the given a temporary API key in thi"~
0038    KSTR     6  20      ; "invocation only. It will not be stored."
0039    CAT      5   5   6
0040    CALL     2   2   4
0041    MOV      3   2
0042    TGETS    2   2  16  ; "argname"
0043    KSTR     4  17      ; "<key>"
0044    CALL     2   1   3
0045    MOV      3   1
0046    TGETS    2   1  10  ; "flag"
0047    KSTR     4  21      ; "--force"
0048    KSTR     5  22      ; "Replace existing rockspec if the same re"~
0049    KSTR     6  23      ; "module already exists. This should be us"~
0050    KSTR     7  24      ; "mistakes: when updating a rockspec, incr"~
0051    KSTR     8  25      ; "instead."
0052    CAT      5   5   8
0053    CALL     2   1   4
0054    MOV      3   1
0055    TGETS    2   1  10  ; "flag"
0056    KSTR     4  26      ; "--sign"
0057    KSTR     5  27      ; "Upload a signature file alongside each f"~
0058    CALL     2   1   4
0059    MOV      3   1
0060    TGETS    2   1  10  ; "flag"
0061    KSTR     4  28      ; "--debug"
0062    CALL     2   2   3
0063    MOV      3   2
0064    TGETS    2   2  29  ; "hidden"
0065    KPRI     4   2
0066    CALL     2   1   3
0067    RET0     0   1

-- BYTECODE -- upload.lua:32-34
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "^dev"
0004    CALL     1   2   3
0005    IST          1
0006    JMP      2 => 0011
0007    MOV      2   0
0008    TGETS    1   0   0  ; "match"
0009    KSTR     3   2      ; "^scm"
0010    CALL     1   2   3
0011 => RET1     1   2

-- BYTECODE -- upload.lua:36-121
0001    UGET     1   0      ; Api
0002    TGETS    1   1   0  ; "new"
0003    MOV      2   0
0004    CALL     1   3   2
0005    IST          1
0006    JMP      3 => 0010
0007    KPRI     3   0
0008    MOV      4   2
0009    RET      3   3
0010 => UGET     3   1      ; cfg
0011    TGETS    3   3   1  ; "verbose"
0012    ISF          3
0013    JMP      4 => 0016
0014    KPRI     3   2
0015    TSETS    3   1   2  ; "debug"
0016 => UGET     3   2      ; fetch
0017    TGETS    3   3   3  ; "load_rockspec"
0018    TGETS    4   0   4  ; "rockspec"
0019    CALL     3   4   2
0020    ISF          4
0021    JMP      6 => 0026
0022    KPRI     6   0
0023    MOV      7   4
0024    MOV      8   5
0025    RET      6   4
0026 => UGET     6   3      ; util
0027    TGETS    6   6   5  ; "printout"
0028    KSTR     7   6      ; "Sending "
0029    GGET     8   7      ; "tostring"
0030    TGETS    9   0   4  ; "rockspec"
0031    CALL     8   2   2
0032    KSTR     9   8      ; " ..."
0033    CAT      7   7   9
0034    CALL     6   1   2
0035    MOV      7   1
0036    TGETS    6   1   9  ; "method"
0037    KSTR     8  10      ; "check_rockspec"
0038    TDUP     9  12
0039    TGETS   10   3  11  ; "package"
0040    TSETS   10   9  11  ; "package"
0041    TGETS   10   3  13  ; "version"
0042    TSETS   10   9  13  ; "version"
0043    CALL     6   3   4
0044    IST          6
0045    JMP      8 => 0049
0046    KPRI     8   0
0047    MOV      9   7
0048    RET      8   3
0049 => TGETS    8   6  14  ; "module"
0050    IST          8
0051    JMP      8 => 0061
0052    UGET     8   3      ; util
0053    TGETS    8   8   5  ; "printout"
0054    KSTR     9  15      ; "Will create new module ("
0055    GGET    10   7      ; "tostring"
0056    TGETS   11   3  11  ; "package"
0057    CALL    10   2   2
0058    KSTR    11  16      ; ")"
0059    CAT      9   9  11
0060    CALL     8   1   2
0061 => TGETS    8   6  13  ; "version"
0062    ISF          8
0063    JMP      9 => 0077
0064    TGETS    8   0  17  ; "force"
0065    IST          8
0066    JMP      8 => 0077
0067    KPRI     8   0
0068    KSTR     9  18      ; "Revision "
0069    TGETS   10   3  13  ; "version"
0070    KSTR    11  19      ; " already exists on the server. "
0071    UGET    12   3      ; util
0072    TGETS   12  12  20  ; "see_help"
0073    KSTR    13  21      ; "upload"
0074    CALL    12   2   2
0075    CAT      9   9  12
0076    RET      8   3
0077 => KNIL     8   9
0078    TGETS   10   0  22  ; "sign"
0079    ISF         10
0080    JMP     11 => 0100
0081    UGET    10   4      ; signing
0082    TGETS   10  10  23  ; "sign_file"
0083    TGETS   11   0   4  ; "rockspec"
0084    CALL    10   3   2
0085    MOV      7  11
0086    MOV      8  10
0087    ISF          7
0088    JMP     10 => 0094
0089    KPRI    10   0
0090    KSTR    11  24      ; "Failed signing rockspec: "
0091    MOV     12   7
0092    CAT     11  11  12
0093    RET     10   3
0094 => UGET    10   3      ; util
0095    TGETS   10  10   5  ; "printout"
0096    KSTR    11  25      ; "Signed rockspec: "
0097    MOV     12   8
0098    CAT     11  11  12
0099    CALL    10   1   2
0100 => KPRI    10   0
0101    TGETS   11   0  26  ; "skip_pack"
0102    IST         11
0103    JMP     11 => 0150
0104    UGET    11   5      ; is_dev_version
0105    TGETS   12   3  13  ; "version"
0106    CALL    11   2   2
0107    IST         11
0108    JMP     11 => 0150
0109    UGET    11   3      ; util
0110    TGETS   11  11   5  ; "printout"
0111    KSTR    12  27      ; "Packing "
0112    GGET    13   7      ; "tostring"
0113    TGETS   14   3  11  ; "package"
0114    CALL    13   2   2
0115    CAT     12  12  13
0116    CALL    11   1   2
0117    UGET    11   6      ; pack
0118    TGETS   11  11  28  ; "pack_source_rock"
0119    TGETS   12   0   4  ; "rockspec"
0120    CALL    11   3   2
0121    MOV      7  12
0122    MOV     10  11
0123    IST         10
0124    JMP     11 => 0128
0125    KPRI    11   0
0126    MOV     12   7
0127    RET     11   3
0128 => TGETS   11   0  22  ; "sign"
0129    ISF         11
0130    JMP     12 => 0150
0131    UGET    11   4      ; signing
0132    TGETS   11  11  23  ; "sign_file"
0133    MOV     12  10
0134    CALL    11   3   2
0135    MOV      7  12
0136    MOV      9  11
0137    ISF          7
0138    JMP     11 => 0144
0139    KPRI    11   0
0140    KSTR    12  29      ; "Failed signing rock: "
0141    MOV     13   7
0142    CAT     12  12  13
0143    RET     11   3
0144 => UGET    11   3      ; util
0145    TGETS   11  11   5  ; "printout"
0146    KSTR    12  30      ; "Signed packed rock: "
0147    MOV     13   9
0148    CAT     12  12  13
0149    CALL    11   1   2
0150 => GGET    11  31      ; "require"
0151    KSTR    12  32      ; "luarocks.upload.multipart"
0152    CALL    11   2   2
0153    MOV     13   1
0154    TGETS   12   1   9  ; "method"
0155    KSTR    14  21      ; "upload"
0156    KPRI    15   0
0157    TDUP    16  34
0158    TGETS   17  11  33  ; "new_file"
0159    TGETS   18   0   4  ; "rockspec"
0160    CALL    17   2   2
0161    TSETS   17  16  35  ; "rockspec_file"
0162    ISFC    17   8
0163    JMP     17 => 0167
0164    TGETS   17  11  33  ; "new_file"
0165    MOV     18   8
0166    CALL    17   2   2
0167 => TSETS   17  16  36  ; "rockspec_sig"
0168    CALL    12   3   5
0169    MOV      7  13
0170    MOV      6  12
0171    IST          6
0172    JMP     12 => 0176
0173    KPRI    12   0
0174    MOV     13   7
0175    RET     12   3
0176 => TGETS   12   6  37  ; "is_new"
0177    ISF         12
0178    JMP     13 => 0187
0179    TGETS   12   6  38  ; "manifests"
0180    LEN     12  12
0181    ISNEN   12   0      ; 0
0182    JMP     12 => 0187
0183    UGET    12   3      ; util
0184    TGETS   12  12  39  ; "printerr"
0185    KSTR    13  40      ; "Warning: module not added to root manife"~
0186    CALL    12   1   2
0187 => TGETS   12   6  41  ; "module_url"
0188    ISF         10
0189    JMP     13 => 0239
0190    TGETS   13   6  13  ; "version"
0191    ISF         13
0192    JMP     13 => 0197
0193    TGETS   13   6  13  ; "version"
0194    TGETS   13  13  42  ; "id"
0195    IST         13
0196    JMP     13 => 0200
0197 => KPRI    13   0
0198    KSTR    14  43      ; "Invalid response from server."
0199    RET     13   3
0200 => UGET    13   3      ; util
0201    TGETS   13  13   5  ; "printout"
0202    KSTR    14   6      ; "Sending "
0203    GGET    15   7      ; "tostring"
0204    MOV     16  10
0205    CALL    15   2   2
0206    KSTR    16   8      ; " ..."
0207    CAT     14  14  16
0208    CALL    13   1   2
0209    MOV     14   1
0210    TGETS   13   1   9  ; "method"
0211    KSTR    15  44      ; "upload_rock/"
0212    KSTR    16  45      ; "%d"
0213    MOV     17  16
0214    TGETS   16  16  46  ; "format"
0215    TGETS   18   6  13  ; "version"
0216    TGETS   18  18  42  ; "id"
0217    CALL    16   2   3
0218    CAT     15  15  16
0219    KPRI    16   0
0220    TDUP    17  47
0221    TGETS   18  11  33  ; "new_file"
0222    MOV     19  10
0223    CALL    18   2   2
0224    TSETS   18  17  48  ; "rock_file"
0225    ISFC    18   9
0226    JMP     18 => 0230
0227    TGETS   18  11  33  ; "new_file"
0228    MOV     19   9
0229    CALL    18   2   2
0230 => TSETS   18  17  49  ; "rock_sig"
0231    CALL    13   3   5
0232    MOV      7  14
0233    MOV      6  13
0234    IST          6
0235    JMP     13 => 0239
0236    KPRI    13   0
0237    MOV     14   7
0238    RET     13   3
0239 => UGET    13   3      ; util
0240    TGETS   13  13   5  ; "printout"
0241    CALL    13   1   1
0242    UGET    13   3      ; util
0243    TGETS   13  13   5  ; "printout"
0244    KSTR    14  50      ; "Done: "
0245    GGET    15   7      ; "tostring"
0246    MOV     16  12
0247    CALL    15   2   2
0248    CAT     14  14  15
0249    CALL    13   1   2
0250    UGET    13   3      ; util
0251    TGETS   13  13   5  ; "printout"
0252    CALL    13   1   1
0253    KPRI    13   2
0254    RET1    13   2

-- BYTECODE -- upload.lua:0-124
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.signing"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fetch"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.pack"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.core.cfg"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.upload.api"
0019    CALL     6   2   2
0020    FNEW     7   8      ; upload.lua:11
0021    TSETS    7   0   7  ; "add_to_parser"
0022    FNEW     7   9      ; upload.lua:32
0023    FNEW     8  11      ; upload.lua:36
0024    TSETS    8   0  10  ; "command"
0025    UCLO     0 => 0026
0026 => RET1     0   2

-----------------------
-- BYTECODE -- remove.lua:17-35
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "remove"
0004    KSTR     4   2      ; "Uninstall a rock.\n\nIf a version is not"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Uninstall a rock."
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "argument"
0015    KSTR     4   7      ; "rock"
0016    KSTR     5   8      ; "Name of the rock to be uninstalled."
0017    CALL     2   2   4
0018    MOV      3   2
0019    TGETS    2   2   9  ; "action"
0020    UGET     4   0      ; util
0021    TGETS    4   4  10  ; "namespaced_name_action"
0022    CALL     2   1   3
0023    MOV      3   1
0024    TGETS    2   1   6  ; "argument"
0025    KSTR     4  11      ; "version"
0026    KSTR     5  12      ; "Version of the rock to uninstall."
0027    CALL     2   2   4
0028    MOV      3   2
0029    TGETS    2   2  13  ; "args"
0030    KSTR     4  14      ; "?"
0031    CALL     2   1   3
0032    MOV      3   1
0033    TGETS    2   1  15  ; "flag"
0034    KSTR     4  16      ; "--force"
0035    KSTR     5  17      ; "Force removal if it would break dependen"~
0036    CALL     2   1   4
0037    MOV      3   1
0038    TGETS    2   1  15  ; "flag"
0039    KSTR     4  18      ; "--force-fast"
0040    KSTR     5  19      ; "Perform a forced removal without reporti"~
0041    CALL     2   1   4
0042    UGET     2   0      ; util
0043    TGETS    2   2  20  ; "deps_mode_option"
0044    MOV      3   1
0045    CALL     2   1   2
0046    RET0     0   1

-- BYTECODE -- remove.lua:40-70
0001    TGETS    1   0   0  ; "rock"
0002    UGET     2   0      ; deps
0003    TGETS    2   2   1  ; "get_deps_mode"
0004    MOV      3   0
0005    CALL     2   2   2
0006    UGET     3   1      ; fs
0007    TGETS    3   3   2  ; "check_command_permissions"
0008    MOV      4   0
0009    CALL     3   3   2
0010    IST          3
0011    JMP      5 => 0018
0012    KPRI     5   0
0013    MOV      6   4
0014    UGET     7   2      ; cmd
0015    TGETS    7   7   3  ; "errorcodes"
0016    TGETS    7   7   4  ; "PERMISSIONDENIED"
0017    RET      5   4
0018 => MOV      6   1
0019    TGETS    5   1   5  ; "match"
0020    KSTR     7   6      ; "%.(rock)$"
0021    CALL     5   2   3
0022    IST          5
0023    JMP      6 => 0028
0024    MOV      6   1
0025    TGETS    5   1   5  ; "match"
0026    KSTR     7   7      ; "%.(rockspec)$"
0027    CALL     5   2   3
0028 => TGETS    6   0   8  ; "version"
0029    MOV      7   1
0030    ISF          5
0031    JMP      8 => 0047
0032    UGET     8   3      ; path
0033    TGETS    8   8   9  ; "parse_name"
0034    MOV      9   7
0035    CALL     8   3   2
0036    MOV      6   9
0037    MOV      1   8
0038    IST          1
0039    JMP      8 => 0047
0040    KPRI     8   0
0041    KSTR     9  10      ; "Invalid "
0042    MOV     10   5
0043    KSTR    11  11      ; " filename: "
0044    MOV     12   7
0045    CAT      9   9  12
0046    RET      8   3
0047 => TNEW     8   0
0048    MOV     10   1
0049    TGETS    9   1  12  ; "lower"
0050    CALL     9   2   2
0051    MOV      1   9
0052    UGET     9   4      ; search
0053    TGETS    9   9  13  ; "local_manifest_search"
0054    MOV     10   8
0055    UGET    11   5      ; cfg
0056    TGETS   11  11  14  ; "rocks_dir"
0057    UGET    12   6      ; queries
0058    TGETS   12  12  15  ; "new"
0059    MOV     13   1
0060    TGETS   14   0  16  ; "namespace"
0061    MOV     15   6
0062    CALL    12   0   4
0063    CALLM    9   1   2
0064    TGETV    9   8   1
0065    IST          9
0066    JMP      9 => 0084
0067    UGET     9   7      ; util
0068    TGETS    9   9  17  ; "format_rock_name"
0069    MOV     10   1
0070    TGETS   11   0  16  ; "namespace"
0071    MOV     12   6
0072    CALL     9   2   4
0073    KPRI    10   0
0074    KSTR    11  18      ; "Could not find rock '"
0075    MOV     12   9
0076    KSTR    13  19      ; "' in "
0077    UGET    14   3      ; path
0078    TGETS   14  14  20  ; "rocks_tree_to_string"
0079    UGET    15   5      ; cfg
0080    TGETS   15  15  21  ; "root_dir"
0081    CALL    14   2   2
0082    CAT     11  11  14
0083    RET     10   3
0084 => UGET     9   8      ; remove
0085    TGETS    9   9  22  ; "remove_search_results"
0086    MOV     10   8
0087    MOV     11   1
0088    MOV     12   2
0089    TGETS   13   0  23  ; "force"
0090    TGETS   14   0  24  ; "force_fast"
0091    CALL     9   3   6
0092    IST          9
0093    JMP     11 => 0097
0094    KPRI    11   0
0095    MOV     12  10
0096    RET     11   3
0097 => UGET    11   9      ; writer
0098    TGETS   11  11  25  ; "check_dependencies"
0099    KPRI    12   0
0100    UGET    13   0      ; deps
0101    TGETS   13  13   1  ; "get_deps_mode"
0102    MOV     14   0
0103    CALL    13   0   2
0104    CALLM   11   1   1
0105    KPRI    11   2
0106    RET1    11   2

-- BYTECODE -- remove.lua:0-73
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.remove"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.fs"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.search"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.path"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.deps"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.manif.writer"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.queries"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.cmd"
0031    CALL    10   2   2
0032    FNEW    11  12      ; remove.lua:17
0033    TSETS   11   0  11  ; "add_to_parser"
0034    FNEW    11  14      ; remove.lua:40
0035    TSETS   11   0  13  ; "command"
0036    UCLO     0 => 0037
0037 => RET1     0   2

-----------------------
-- BYTECODE -- pack.lua:11-21
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "pack"
0004    KSTR     4   2      ; "Create a rock, packing sources or binari"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "rock"
0012    KSTR     5   6      ; "A rockspec file, for creating a source r"~
0013    KSTR     6   7      ; "name of an installed package, for creati"~
0014    CAT      5   5   6
0015    CALL     2   2   4
0016    MOV      3   2
0017    TGETS    2   2   8  ; "action"
0018    UGET     4   0      ; util
0019    TGETS    4   4   9  ; "namespaced_name_action"
0020    CALL     2   1   3
0021    MOV      3   1
0022    TGETS    2   1   4  ; "argument"
0023    KSTR     4  10      ; "version"
0024    KSTR     5  11      ; "A version may be given if the first argu"~
0025    CALL     2   2   4
0026    MOV      3   2
0027    TGETS    2   2  12  ; "args"
0028    KSTR     4  13      ; "?"
0029    CALL     2   1   3
0030    MOV      3   1
0031    TGETS    2   1  14  ; "flag"
0032    KSTR     4  15      ; "--sign"
0033    KSTR     5  16      ; "Produce a signature file as well."
0034    CALL     2   1   4
0035    RET0     0   1

-- BYTECODE -- pack.lua:26-35
0001    KNIL     1   2
0002    TGETS    3   0   0  ; "rock"
0003    MOV      4   3
0004    TGETS    3   3   1  ; "match"
0005    KSTR     5   2      ; ".*%.rockspec"
0006    CALL     3   2   3
0007    ISF          3
0008    JMP      4 => 0016
0009    UGET     3   0      ; pack
0010    TGETS    3   3   3  ; "pack_source_rock"
0011    TGETS    4   0   0  ; "rock"
0012    CALL     3   3   2
0013    MOV      2   4
0014    MOV      1   3
0015    JMP      3 => 0029
0016 => UGET     3   1      ; queries
0017    TGETS    3   3   4  ; "new"
0018    TGETS    4   0   0  ; "rock"
0019    TGETS    5   0   5  ; "namespace"
0020    TGETS    6   0   6  ; "version"
0021    CALL     3   2   4
0022    UGET     4   0      ; pack
0023    TGETS    4   4   7  ; "pack_installed_rock"
0024    MOV      5   3
0025    TGETS    6   0   8  ; "tree"
0026    CALL     4   3   3
0027    MOV      2   5
0028    MOV      1   4
0029 => UGET     3   0      ; pack
0030    TGETS    3   3   9  ; "report_and_sign_local_file"
0031    MOV      4   1
0032    MOV      5   2
0033    TGETS    6   0  10  ; "sign"
0034    CALLT    3   4

-- BYTECODE -- pack.lua:0-38
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.pack"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.signing"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.queries"
0013    CALL     4   2   2
0014    FNEW     5   6      ; pack.lua:11
0015    TSETS    5   0   5  ; "add_to_parser"
0016    FNEW     5   8      ; pack.lua:26
0017    TSETS    5   0   7  ; "command"
0018    UCLO     0 => 0019
0019 => RET1     0   2

-----------------------
-- BYTECODE -- which.lua:11-19
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "which"
0004    KSTR     4   2      ; "Given a module name like "foo.bar", "
0005    KSTR     5   3      ; "output which file would be loaded to res"~
0006    KSTR     6   4      ; "luarocks.loader, like "/usr/local/lua/"
0007    UGET     7   0      ; cfg
0008    TGETS    7   7   5  ; "lua_version"
0009    KSTR     8   6      ; "/foo/bar.lua"."
0010    CAT      4   4   8
0011    UGET     5   1      ; util
0012    TGETS    5   5   7  ; "see_also"
0013    CALL     5   0   1
0014    CALLM    1   2   3
0015    MOV      2   1
0016    TGETS    1   1   8  ; "summary"
0017    KSTR     3   9      ; "Tell which file corresponds to a given m"~
0018    CALL     1   2   3
0019    MOV      3   1
0020    TGETS    2   1  10  ; "argument"
0021    KSTR     4  11      ; "modname"
0022    KSTR     5  12      ; "Module name."
0023    CALL     2   1   4
0024    RET0     0   1

-- BYTECODE -- which.lua:23-45
0001    UGET     1   0      ; loader
0002    TGETS    1   1   0  ; "which"
0003    TGETS    2   0   1  ; "modname"
0004    CALL     1   4   2
0005    ISF          1
0006    JMP      4 => 0026
0007    UGET     4   1      ; util
0008    TGETS    4   4   2  ; "printout"
0009    MOV      5   1
0010    CALL     4   1   2
0011    UGET     4   1      ; util
0012    TGETS    4   4   2  ; "printout"
0013    KSTR     5   3      ; "(provided by "
0014    GGET     6   4      ; "tostring"
0015    MOV      7   2
0016    CALL     6   2   2
0017    KSTR     7   5      ; " "
0018    GGET     8   4      ; "tostring"
0019    MOV      9   3
0020    CALL     8   2   2
0021    KSTR     9   6      ; ")"
0022    CAT      5   5   9
0023    CALL     4   1   2
0024    KPRI     4   2
0025    RET1     4   2
0026 => TGETS    4   0   1  ; "modname"
0027    MOV      5   4
0028    TGETS    4   4   7  ; "gsub"
0029    KSTR     6   8      ; "%."
0030    KSTR     7   9      ; "/"
0031    CALL     4   2   4
0032    GGET     5  10      ; "ipairs"
0033    TDUP     6  11
0034    CALL     5   4   2
0035    JMP      8 => 0069
0036 => GGET    10  12      ; "package"
0037    TGETV   10  10   9
0038    MOV     11  10
0039    TGETS   10  10  13  ; "gmatch"
0040    KSTR    12  14      ; "([^;]+)"
0041    CALL    10   4   3
0042    JMP     13 => 0067
0043 => MOV     15  13
0044    TGETS   14  13   7  ; "gsub"
0045    KSTR    16  15      ; "%?"
0046    MOV     17   4
0047    CALL    14   2   4
0048    UGET    15   2      ; fs
0049    TGETS   15  15  16  ; "exists"
0050    MOV     16  14
0051    CALL    15   2   2
0052    ISF         15
0053    JMP     16 => 0067
0054    UGET    15   1      ; util
0055    TGETS   15  15   2  ; "printout"
0056    MOV     16  14
0057    CALL    15   1   2
0058    UGET    15   1      ; util
0059    TGETS   15  15   2  ; "printout"
0060    KSTR    16  17      ; "(found directly via package."
0061    MOV     17   9
0062    KSTR    18  18      ; " -- not installed as a rock?)"
0063    CAT     16  16  18
0064    CALL    15   1   2
0065    KPRI    15   2
0066    RET1    15   2
0067 => ITERC   13   2   3
0068    ITERL   13 => 0043
0069 => ITERC    8   3   3
0070    ITERL    8 => 0036
0071    KPRI     5   0
0072    KSTR     6  19      ; "Module '"
0073    TGETS    7   0   1  ; "modname"
0074    KSTR     8  20      ; "' not found."
0075    CAT      6   6   8
0076    RET      5   3

-- BYTECODE -- which.lua:0-49
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.loader"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.util"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.fs"
0013    CALL     4   2   2
0014    FNEW     5   6      ; which.lua:11
0015    TSETS    5   0   5  ; "add_to_parser"
0016    FNEW     5   8      ; which.lua:23
0017    TSETS    5   0   7  ; "command"
0018    UCLO     0 => 0019
0019 => RET1     0   2

-----------------------
-- BYTECODE -- purge.lua:18-35
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "purge"
0004    KSTR     4   2      ; "This command removes rocks en masse from"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      2   1
0010    TGETS    1   1   4  ; "summary"
0011    KSTR     3   5      ; "Remove all installed rocks from a tree."
0012    CALL     1   2   3
0013    MOV      3   1
0014    TGETS    2   1   6  ; "flag"
0015    KSTR     4   7      ; "--old-versions"
0016    KSTR     5   8      ; "Keep the highest-numbered version of eac"~
0017    KSTR     6   9      ; "rock and remove the other ones. By defau"~
0018    KSTR     7  10      ; "versions if they are not needed as depen"~
0019    KSTR     8  11      ; "overridden with the flag --force."
0020    CAT      5   5   8
0021    CALL     2   1   4
0022    MOV      3   1
0023    TGETS    2   1   6  ; "flag"
0024    KSTR     4  12      ; "--force"
0025    KSTR     5  13      ; "If --old-versions is specified, force re"~
0026    KSTR     6  14      ; "previously installed versions if it woul"~
0027    CAT      5   5   6
0028    CALL     2   1   4
0029    MOV      3   1
0030    TGETS    2   1   6  ; "flag"
0031    KSTR     4  15      ; "--force-fast"
0032    KSTR     5  16      ; "Like --force, but performs a forced remo"~
0033    KSTR     6  17      ; "without reporting dependency issues."
0034    CAT      5   5   6
0035    CALL     2   1   4
0036    RET0     0   1

-- BYTECODE -- purge.lua:54-54
0001    UGET     2   0      ; vers
0002    TGETS    2   2   0  ; "compare_versions"
0003    MOV      3   1
0004    MOV      4   0
0005    CALLT    2   3

-- BYTECODE -- purge.lua:37-78
0001    TGETS    1   0   0  ; "tree"
0002    GGET     2   1      ; "type"
0003    MOV      3   1
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0015
0007    KPRI     2   0
0008    KSTR     3   3      ; "The --tree argument is mandatory. "
0009    UGET     4   0      ; util
0010    TGETS    4   4   4  ; "see_help"
0011    KSTR     5   5      ; "purge"
0012    CALL     4   2   2
0013    CAT      3   3   4
0014    UCLO     0 => 0127
0015 => TNEW     2   0
0016    UGET     3   1      ; fs
0017    TGETS    3   3   6  ; "is_dir"
0018    MOV      4   1
0019    CALL     3   2   2
0020    IST          3
0021    JMP      3 => 0027
0022    KPRI     3   0
0023    KSTR     4   7      ; "Directory not found: "
0024    MOV      5   1
0025    CAT      4   4   5
0026    UCLO     0 => 0128
0027 => UGET     3   1      ; fs
0028    TGETS    3   3   8  ; "check_command_permissions"
0029    MOV      4   0
0030    CALL     3   3   2
0031    IST          3
0032    JMP      5 => 0039
0033    KPRI     5   0
0034    MOV      6   4
0035    UGET     7   2      ; cmd
0036    TGETS    7   7   9  ; "errorcodes"
0037    TGETS    7   7  10  ; "PERMISSIONDENIED"
0038    UCLO     0 => 0129
0039 => UGET     5   3      ; search
0040    TGETS    5   5  11  ; "local_manifest_search"
0041    MOV      6   2
0042    UGET     7   4      ; path
0043    TGETS    7   7  12  ; "rocks_dir"
0044    MOV      8   1
0045    CALL     7   2   2
0046    UGET     8   5      ; queries
0047    TGETS    8   8  13  ; "all"
0048    CALL     8   0   1
0049    CALLM    5   1   2
0050    FNEW     5  14      ; purge.lua:54
0051    TGETS    6   0  15  ; "old_versions"
0052    ISF          6
0053    JMP      7 => 0056
0054    UGET     6   6      ; vers
0055    TGETS    5   6  16  ; "compare_versions"
0056 => UGET     6   0      ; util
0057    TGETS    6   6  17  ; "sortedpairs"
0058    MOV      7   2
0059    CALL     6   4   2
0060    JMP      9 => 0118
0061 => UGET    11   0      ; util
0062    TGETS   11  11  17  ; "sortedpairs"
0063    MOV     12  10
0064    MOV     13   5
0065    CALL    11   4   3
0066    JMP     14 => 0116
0067 => TGETS   16   0  15  ; "old_versions"
0068    ISF         16
0069    JMP     17 => 0094
0070    UGET    16   0      ; util
0071    TGETS   16  16  18  ; "printout"
0072    KSTR    17  19      ; "Keeping "
0073    MOV     18   9
0074    KSTR    19  20      ; " "
0075    MOV     20  14
0076    KSTR    21  21      ; "..."
0077    CAT     17  17  21
0078    CALL    16   1   2
0079    UGET    16   7      ; remove
0080    TGETS   16  16  22  ; "remove_other_versions"
0081    MOV     17   9
0082    MOV     18  14
0083    TGETS   19   0  23  ; "force"
0084    TGETS   20   0  24  ; "force_fast"
0085    CALL    16   3   5
0086    IST         16
0087    JMP     18 => 0118
0088    UGET    18   0      ; util
0089    TGETS   18  18  25  ; "printerr"
0090    MOV     19  17
0091    CALL    18   1   2
0092    JMP     11 => 0118
0093    JMP     16 => 0116
0094 => UGET    16   0      ; util
0095    TGETS   16  16  18  ; "printout"
0096    KSTR    17  26      ; "Removing "
0097    MOV     18   9
0098    KSTR    19  20      ; " "
0099    MOV     20  14
0100    KSTR    21  21      ; "..."
0101    CAT     17  17  21
0102    CALL    16   1   2
0103    UGET    16   8      ; repos
0104    TGETS   16  16  27  ; "delete_version"
0105    MOV     17   9
0106    MOV     18  14
0107    KSTR    19  28      ; "none"
0108    KPRI    20   2
0109    CALL    16   3   5
0110    IST         16
0111    JMP     18 => 0116
0112    UGET    18   0      ; util
0113    TGETS   18  18  25  ; "printerr"
0114    MOV     19  17
0115    CALL    18   1   2
0116 => ITERC   14   3   3
0117    ITERL   14 => 0067
0118 => ITERC    9   3   3
0119    ITERL    9 => 0061
0120    UGET     6   9      ; writer
0121    TGETS    6   6  29  ; "make_manifest"
0122    UGET     7  10      ; cfg
0123    TGETS    7   7  12  ; "rocks_dir"
0124    KSTR     8  30      ; "one"
0125    UCLO     0 => 0126
0126 => CALLT    6   3
0127 => RET      2   3
0128 => RET      3   3
0129 => RET      5   4

-- BYTECODE -- purge.lua:0-81
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fs"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.path"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.search"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.core.vers"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.repos"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.manif.writer"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.core.cfg"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.remove"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.queries"
0031    CALL    10   2   2
0032    GGET    11   0      ; "require"
0033    KSTR    12  11      ; "luarocks.cmd"
0034    CALL    11   2   2
0035    FNEW    12  13      ; purge.lua:18
0036    TSETS   12   0  12  ; "add_to_parser"
0037    FNEW    12  15      ; purge.lua:37
0038    TSETS   12   0  14  ; "command"
0039    UCLO     0 => 0040
0040 => RET1     0   2

-----------------------
-- BYTECODE -- lint.lua:10-17
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "lint"
0004    KSTR     4   2      ; "Check syntax of a rockspec.\n\n"
0005    KSTR     5   3      ; "Returns success if the text of the rocks"~
0006    CAT      4   4   5
0007    UGET     5   0      ; util
0008    TGETS    5   5   4  ; "see_also"
0009    CALL     5   0   1
0010    CALLM    1   2   3
0011    MOV      2   1
0012    TGETS    1   1   5  ; "summary"
0013    KSTR     3   6      ; "Check syntax of a rockspec."
0014    CALL     1   2   3
0015    MOV      3   1
0016    TGETS    2   1   7  ; "argument"
0017    KSTR     4   8      ; "rockspec"
0018    KSTR     5   9      ; "The rockspec to check."
0019    CALL     2   1   4
0020    RET0     0   1

-- BYTECODE -- lint.lua:19-48
0001    TGETS    1   0   0  ; "rockspec"
0002    MOV      3   1
0003    TGETS    2   1   1  ; "match"
0004    KSTR     4   2      ; ".rockspec$"
0005    CALL     2   2   3
0006    IST          2
0007    JMP      2 => 0023
0008    KPRI     2   0
0009    UGET     3   0      ; download
0010    TGETS    3   3   3  ; "download"
0011    KSTR     4   0      ; "rockspec"
0012    MOV      6   1
0013    TGETS    5   1   4  ; "lower"
0014    CALL     5   0   2
0015    CALLM    3   3   1
0016    MOV      2   4
0017    MOV      1   3
0018    IST          1
0019    JMP      3 => 0023
0020    KPRI     3   0
0021    MOV      4   2
0022    RET      3   3
0023 => UGET     2   1      ; fetch
0024    TGETS    2   2   5  ; "load_local_rockspec"
0025    MOV      3   1
0026    CALL     2   3   2
0027    IST          2
0028    JMP      4 => 0034
0029    KPRI     4   0
0030    KSTR     5   6      ; "Failed loading rockspec: "
0031    MOV      6   3
0032    CAT      5   5   6
0033    RET      4   3
0034 => KPRI     4   2
0035    TGETS    5   2   7  ; "description"
0036    TGETS    5   5   8  ; "license"
0037    IST          5
0038    JMP      5 => 0044
0039    UGET     5   2      ; util
0040    TGETS    5   5   9  ; "printerr"
0041    KSTR     6  10      ; "Rockspec has no license field."
0042    CALL     5   1   2
0043    KPRI     4   1
0044 => MOV      5   4
0045    ISTC     6   4
0046    JMP      6 => 0050
0047    MOV      6   1
0048    KSTR     7  11      ; " failed consistency checks."
0049    CAT      6   6   7
0050 => RET      5   3

-- BYTECODE -- lint.lua:0-51
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.download"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fetch"
0010    CALL     3   2   2
0011    FNEW     4   5      ; lint.lua:10
0012    TSETS    4   0   4  ; "add_to_parser"
0013    FNEW     4   7      ; lint.lua:19
0014    TSETS    4   0   6  ; "command"
0015    UCLO     0 => 0016
0016 => RET1     0   2

-----------------------
-- BYTECODE -- signing.lua:6-14
0001    UGET     0   0      ; cfg
0002    TGETS    0   0   0  ; "variables"
0003    TGETS    1   0   1  ; "GPG"
0004    UGET     2   1      ; fs
0005    TGETS    2   2   2  ; "is_tool_available"
0006    MOV      3   1
0007    KSTR     4   3      ; "gpg"
0008    CALL     2   3   3
0009    IST          2
0010    JMP      4 => 0014
0011    KPRI     4   0
0012    MOV      5   3
0013    RET      4   3
0014 => RET1     1   2

-- BYTECODE -- signing.lua:16-18
0001    MOV      1   0
0002    KSTR     2   0      ; ".asc"
0003    CAT      1   1   2
0004    RET1     1   2

-- BYTECODE -- signing.lua:20-32
0001    UGET     1   0      ; get_gpg
0002    CALL     1   3   1
0003    IST          1
0004    JMP      3 => 0008
0005    KPRI     3   0
0006    MOV      4   2
0007    RET      3   3
0008 => MOV      3   0
0009    KSTR     4   0      ; ".asc"
0010    CAT      3   3   4
0011    UGET     4   1      ; fs
0012    TGETS    4   4   1  ; "execute"
0013    MOV      5   1
0014    KSTR     6   2      ; "--armor"
0015    KSTR     7   3      ; "--output"
0016    MOV      8   3
0017    KSTR     9   4      ; "--detach-sign"
0018    MOV     10   0
0019    CALL     4   2   7
0020    ISF          4
0021    JMP      5 => 0024
0022    RET1     3   2
0023    JMP      4 => 0031
0024 => KPRI     4   0
0025    KSTR     5   5      ; "failed running "
0026    MOV      6   1
0027    KSTR     7   6      ; " to sign "
0028    MOV      8   0
0029    CAT      5   5   8
0030    RET      4   3
0031 => RET0     0   1

-- BYTECODE -- signing.lua:34-46
0001    UGET     2   0      ; get_gpg
0002    CALL     2   3   1
0003    IST          2
0004    JMP      4 => 0008
0005    KPRI     4   0
0006    MOV      5   3
0007    RET      4   3
0008 => UGET     4   1      ; fs
0009    TGETS    4   4   0  ; "execute"
0010    MOV      5   2
0011    KSTR     6   1      ; "--verify"
0012    MOV      7   1
0013    MOV      8   0
0014    CALL     4   2   5
0015    ISF          4
0016    JMP      5 => 0020
0017    KPRI     4   2
0018    RET1     4   2
0019    JMP      4 => 0023
0020 => KPRI     4   0
0021    KSTR     5   2      ; "GPG returned a verification error"
0022    RET      4   3
0023 => RET0     0   1

-- BYTECODE -- signing.lua:0-49
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fs"
0007    CALL     2   2   2
0008    FNEW     3   3      ; signing.lua:6
0009    FNEW     4   5      ; signing.lua:16
0010    TSETS    4   0   4  ; "signature_url"
0011    FNEW     4   7      ; signing.lua:20
0012    TSETS    4   0   6  ; "sign_file"
0013    FNEW     4   9      ; signing.lua:34
0014    TSETS    4   0   8  ; "verify_signature"
0015    UCLO     0 => 0016
0016 => RET1     0   2

-----------------------
-- BYTECODE -- rockspecs.lua:15-17
0001    KSTR     0   0      ; "rockspec"
0002    RET1     0   2

-- BYTECODE -- rockspecs.lua:32-46
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "table"
0006    JMP      2 => 0011
0007    NOT      2   0
0008    JMP      3 => 0012
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => CALL     1   1   2
0013    IST          0
0014    JMP      1 => 0016
0015    RET0     0   1
0016 => TGETS    1   0   3  ; "platforms"
0017    ISF          1
0018    JMP      2 => 0034
0019    UGET     1   0      ; cfg
0020    TGETS    1   1   4  ; "each_platform"
0021    CALL     1   4   1
0022    JMP      4 => 0032
0023 => TGETS    5   0   3  ; "platforms"
0024    TGETV    5   5   4
0025    ISF          5
0026    JMP      6 => 0032
0027    UGET     6   1      ; util
0028    TGETS    6   6   5  ; "deep_merge"
0029    MOV      7   0
0030    MOV      8   5
0031    CALL     6   1   3
0032 => ITERC    4   2   3
0033    ITERL    4 => 0023
0034 => KPRI     1   0
0035    TSETS    1   0   3  ; "platforms"
0036    RET0     0   1

-- BYTECODE -- rockspecs.lua:48-61
0001    TGETV    2   0   1
0002    ISF          2
0003    JMP      3 => 0030
0004    KSHORT   2   1
0005    TGETV    3   0   1
0006    LEN      3   3
0007    KSHORT   4   1
0008    FORI     2 => 0029
0009 => UGET     6   0      ; queries
0010    TGETS    6   6   0  ; "from_dep_string"
0011    TGETV    7   0   1
0012    TGETV    7   7   5
0013    CALL     6   3   2
0014    IST          6
0015    JMP      8 => 0026
0016    KPRI     8   0
0017    KSTR     9   1      ; "Parse error processing dependency '"
0018    TGETV   10   0   1
0019    TGETV   10  10   5
0020    KSTR    11   2      ; "': "
0021    GGET    12   3      ; "tostring"
0022    MOV     13   7
0023    CALL    12   2   2
0024    CAT      9   9  12
0025    RET      8   3
0026 => TGETV    8   0   1
0027    TSETV    6   8   5
0028    FORL     2 => 0009
0029 => JMP      2 => 0032
0030 => TNEW     2   0
0031    TSETV    2   0   1
0032 => KPRI     2   2
0033    RET1     2   2

-- BYTECODE -- rockspecs.lua:67-80
0001    TNEW     1   0
0002    GGET     2   0      ; "pairs"
0003    UGET     3   0      ; cfg
0004    TGETS    3   3   1  ; "variables"
0005    CALL     2   4   2
0006    ISNEXT   5 => 0008
0007 => TSETV    6   1   5
0008 => ITERN    5   3   3
0009    ITERL    5 => 0007
0010    TGETS    2   0   2  ; "name"
0011    TGETS    3   0   3  ; "version"
0012    UGET     4   1      ; path
0013    TGETS    4   4   5  ; "install_dir"
0014    MOV      5   2
0015    MOV      6   3
0016    CALL     4   2   3
0017    TSETS    4   1   4  ; "PREFIX"
0018    UGET     4   1      ; path
0019    TGETS    4   4   7  ; "lua_dir"
0020    MOV      5   2
0021    MOV      6   3
0022    CALL     4   2   3
0023    TSETS    4   1   6  ; "LUADIR"
0024    UGET     4   1      ; path
0025    TGETS    4   4   9  ; "lib_dir"
0026    MOV      5   2
0027    MOV      6   3
0028    CALL     4   2   3
0029    TSETS    4   1   8  ; "LIBDIR"
0030    UGET     4   1      ; path
0031    TGETS    4   4  11  ; "conf_dir"
0032    MOV      5   2
0033    MOV      6   3
0034    CALL     4   2   3
0035    TSETS    4   1  10  ; "CONFDIR"
0036    UGET     4   1      ; path
0037    TGETS    4   4  13  ; "bin_dir"
0038    MOV      5   2
0039    MOV      6   3
0040    CALL     4   2   3
0041    TSETS    4   1  12  ; "BINDIR"
0042    UGET     4   1      ; path
0043    TGETS    4   4  15  ; "doc_dir"
0044    MOV      5   2
0045    MOV      6   3
0046    CALL     4   2   3
0047    TSETS    4   1  14  ; "DOCDIR"
0048    TSETS    1   0   1  ; "variables"
0049    RET0     0   1

-- BYTECODE -- rockspecs.lua:107-109
0001    UGET     2   0      ; parsed_format
0002    UGET     3   1      ; vers
0003    TGETS    3   3   0  ; "parse_version"
0004    MOV      4   1
0005    CALL     3   2   2
0006    ISLE     3   2
0007    JMP      2 => 0010
0008    KPRI     2   1
0009    JMP      3 => 0011
0010 => KPRI     2   2
0011 => RET1     2   2

-- BYTECODE -- rockspecs.lua:82-159
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   1
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "table"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   2
0014    CALL     5   2   2
0015    ISEQS    5   2      ; "table"
0016    JMP      5 => 0021
0017    ISEQP    2   0
0018    JMP      5 => 0021
0019    KPRI     5   1
0020    JMP      6 => 0022
0021 => KPRI     5   2
0022 => CALL     4   1   2
0023    GGET     4   0      ; "assert"
0024    GGET     5   1      ; "type"
0025    MOV      6   0
0026    CALL     5   2   2
0027    ISEQS    5   3      ; "string"
0028    JMP      5 => 0031
0029    KPRI     5   1
0030    JMP      6 => 0032
0031 => KPRI     5   2
0032 => CALL     4   1   2
0033    GGET     4   0      ; "assert"
0034    GGET     5   1      ; "type"
0035    MOV      6   3
0036    CALL     5   2   2
0037    ISEQS    5   4      ; "boolean"
0038    JMP      5 => 0043
0039    ISEQP    3   0
0040    JMP      5 => 0043
0041    KPRI     5   1
0042    JMP      6 => 0044
0043 => KPRI     5   2
0044 => CALL     4   1   2
0045    TGETS    4   1   5  ; "rockspec_format"
0046    ISF          4
0047    JMP      5 => 0062
0048    UGET     4   0      ; vers
0049    TGETS    4   4   6  ; "compare_versions"
0050    TGETS    5   1   5  ; "rockspec_format"
0051    UGET     6   1      ; type_rockspec
0052    TGETS    6   6   5  ; "rockspec_format"
0053    CALL     4   2   3
0054    ISF          4
0055    JMP      5 => 0062
0056    KPRI     4   0
0057    KSTR     5   7      ; "Rockspec format "
0058    TGETS    6   1   5  ; "rockspec_format"
0059    KSTR     7   8      ; " is not supported, please upgrade LuaRoc"~
0060    CAT      5   5   7
0061    UCLO     0 => 0250
0062 => IST          3
0063    JMP      4 => 0076
0064    UGET     4   1      ; type_rockspec
0065    TGETS    4   4   9  ; "check"
0066    MOV      5   1
0067    ISTC     6   2
0068    JMP      6 => 0070
0069    TNEW     6   0
0070 => CALL     4   3   3
0071    IST          4
0072    JMP      6 => 0076
0073    KPRI     6   0
0074    MOV      7   5
0075    UCLO     0 => 0251
0076 => UGET     4   0      ; vers
0077    TGETS    4   4  10  ; "parse_version"
0078    TGETS    5   1   5  ; "rockspec_format"
0079    IST          5
0080    JMP      6 => 0082
0081    KSTR     5  11      ; "1.0"
0082 => CALL     4   2   2
0083    FNEW     5  13      ; rockspecs.lua:107
0084    TSETS    5   1  12  ; "format_is_at_least"
0085    UCLO     4 => 0086
0086 => UGET     4   2      ; platform_overrides
0087    TGETS    5   1  14  ; "build"
0088    CALL     4   1   2
0089    UGET     4   2      ; platform_overrides
0090    TGETS    5   1  15  ; "dependencies"
0091    CALL     4   1   2
0092    UGET     4   2      ; platform_overrides
0093    TGETS    5   1  16  ; "build_dependencies"
0094    CALL     4   1   2
0095    UGET     4   2      ; platform_overrides
0096    TGETS    5   1  17  ; "test_dependencies"
0097    CALL     4   1   2
0098    UGET     4   2      ; platform_overrides
0099    TGETS    5   1  18  ; "external_dependencies"
0100    CALL     4   1   2
0101    UGET     4   2      ; platform_overrides
0102    TGETS    5   1  19  ; "source"
0103    CALL     4   1   2
0104    UGET     4   2      ; platform_overrides
0105    TGETS    5   1  20  ; "hooks"
0106    CALL     4   1   2
0107    UGET     4   2      ; platform_overrides
0108    TGETS    5   1  21  ; "test"
0109    CALL     4   1   2
0110    TGETS    4   1  23  ; "package"
0111    MOV      5   4
0112    TGETS    4   4  24  ; "lower"
0113    CALL     4   2   2
0114    TSETS    4   1  22  ; "name"
0115    UGET     4   3      ; dir
0116    TGETS    4   4  25  ; "split_url"
0117    TGETS    5   1  19  ; "source"
0118    TGETS    5   5  26  ; "url"
0119    CALL     4   3   2
0120    UGET     6   3      ; dir
0121    TGETS    6   6  27  ; "is_basic_protocol"
0122    MOV      7   4
0123    CALL     6   2   2
0124    ISF          6
0125    JMP      7 => 0137
0126    TGETS    6   1  19  ; "source"
0127    TGETS    7   1  19  ; "source"
0128    TGETS    7   7  28  ; "file"
0129    IST          7
0130    JMP      8 => 0136
0131    UGET     7   3      ; dir
0132    TGETS    7   7  29  ; "base_name"
0133    TGETS    8   1  19  ; "source"
0134    TGETS    8   8  26  ; "url"
0135    CALL     7   2   2
0136 => TSETS    7   6  28  ; "file"
0137 => TGETS    6   1  19  ; "source"
0138    TGETS    7   1  19  ; "source"
0139    MOV      8   4
0140    TSETS    5   7  31  ; "pathname"
0141    TSETS    8   6  30  ; "protocol"
0142    TGETS    6   1  19  ; "source"
0143    TGETS    6   6  32  ; "cvs_module"
0144    ISF          6
0145    JMP      7 => 0150
0146    TGETS    6   1  19  ; "source"
0147    TGETS    7   1  19  ; "source"
0148    TGETS    7   7  32  ; "cvs_module"
0149    TSETS    7   6  33  ; "module"
0150 => TGETS    6   1  19  ; "source"
0151    TGETS    6   6  34  ; "cvs_tag"
0152    ISF          6
0153    JMP      7 => 0158
0154    TGETS    6   1  19  ; "source"
0155    TGETS    7   1  19  ; "source"
0156    TGETS    7   7  34  ; "cvs_tag"
0157    TSETS    7   6  35  ; "tag"
0158 => TSETS    0   1  36  ; "local_abs_filename"
0159    TGETS    6   1  19  ; "source"
0160    TGETS    6   6  28  ; "file"
0161    IST          6
0162    JMP      7 => 0165
0163    TGETS    6   1  19  ; "source"
0164    TGETS    6   6  26  ; "url"
0165 => UGET     7   3      ; dir
0166    TGETS    7   7  37  ; "deduce_base_dir"
0167    MOV      8   6
0168    CALL     7   2   2
0169    TGETS    8   1  19  ; "source"
0170    TGETS    9   1  19  ; "source"
0171    TGETS    9   9  39  ; "dir"
0172    ISNEP    9   0
0173    JMP      9 => 0176
0174    KPRI     9   1
0175    JMP     10 => 0177
0176 => KPRI     9   2
0177 => TSETS    9   8  38  ; "dir_set"
0178    TGETS    8   1  19  ; "source"
0179    TGETS    9   1  19  ; "source"
0180    TGETS    9   9  39  ; "dir"
0181    IST          9
0182    JMP     10 => 0218
0183    TGETS    9   1  19  ; "source"
0184    TGETS    9   9  33  ; "module"
0185    IST          9
0186    JMP     10 => 0218
0187    MOV     10   6
0188    TGETS    9   6  40  ; "match"
0189    KSTR    11  41      ; "%.lua$"
0190    CALL     9   2   3
0191    IST          9
0192    JMP     10 => 0199
0193    MOV     10   6
0194    TGETS    9   6  40  ; "match"
0195    KSTR    11  42      ; "%.c$"
0196    CALL     9   2   3
0197    ISF          9
0198    JMP     10 => 0217
0199 => MOV     10   1
0200    TGETS    9   1  12  ; "format_is_at_least"
0201    KSTR    11  43      ; "3.0"
0202    CALL     9   2   3
0203    ISF          9
0204    JMP     10 => 0215
0205    UGET     9   3      ; dir
0206    TGETS    9   9  27  ; "is_basic_protocol"
0207    MOV     10   4
0208    CALL     9   2   2
0209    ISF          9
0210    JMP     10 => 0213
0211    KSTR     9  44      ; "."
0212    JMP     10 => 0218
0213 => ISTC     9   7
0214    JMP      9 => 0218
0215 => KSTR     9  44      ; "."
0216    JMP     10 => 0218
0217 => MOV      9   7
0218 => TSETS    9   8  39  ; "dir"
0219    UGET     8   4      ; util
0220    TGETS    8   8  46  ; "get_rocks_provided"
0221    MOV      9   1
0222    CALL     8   2   2
0223    TSETS    8   1  45  ; "rocks_provided"
0224    GGET     8  47      ; "ipairs"
0225    TDUP     9  48
0226    CALL     8   4   2
0227    JMP     11 => 0238
0228 => UGET    13   5      ; convert_dependencies
0229    MOV     14   1
0230    MOV     15  12
0231    CALL    13   3   3
0232    IST         13
0233    JMP     15 => 0238
0234    KPRI    15   0
0235    MOV     16  14
0236    UCLO     0 => 0237
0237 => RET     15   3
0238 => ITERC   11   3   3
0239    ITERL   11 => 0228
0240    IST          3
0241    JMP      8 => 0245
0242    UGET     8   6      ; configure_paths
0243    MOV      9   1
0244    CALL     8   1   2
0245 => GGET     8  49      ; "setmetatable"
0246    MOV      9   1
0247    UGET    10   7      ; rockspec_mt
0248    UCLO     0 => 0249
0249 => CALLT    8   3
0250 => RET      4   3
0251 => RET      6   3

-- BYTECODE -- rockspecs.lua:0-161
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.path"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.queries"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.type.rockspec"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.util"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.core.vers"
0022    CALL     7   2   2
0023    TNEW     8   0
0024    TSETS    8   8   8  ; "__index"
0025    FNEW     9  10      ; rockspecs.lua:15
0026    TSETS    9   8   9  ; "type"
0027    FNEW     9  11      ; rockspecs.lua:32
0028    FNEW    10  12      ; rockspecs.lua:48
0029    FNEW    11  13      ; rockspecs.lua:67
0030    FNEW    12  15      ; rockspecs.lua:82
0031    TSETS   12   0  14  ; "from_persisted_table"
0032    UCLO     0 => 0033
0033 => RET1     0   2

-----------------------
-- BYTECODE -- zip.lua:13-15
0001    GGET     2   0      ; "math"
0002    TGETS    2   2   1  ; "floor"
0003    KSHORT   3   2
0004    POW      3   3   1
0005    DIVVV    3   0   3
0006    CALLT    2   2

-- BYTECODE -- zip.lua:17-19
0001    KSHORT   2   2
0002    POW      2   2   1
0003    MULVV    2   0   2
0004    RET1     2   2

-- BYTECODE -- zip.lua:20-22
0001    KSHORT   2   2
0002    POW      2   2   1
0003    MODVV    2   0   2
0004    RET1     2   2

-- BYTECODE -- zip.lua:24-32
0001    ISNES    0   0      ; "gzip"
0002    JMP      1 => 0006
0003    KSHORT   1  31
0004    RET1     1   2
0005    JMP      1 => 0015
0006 => ISNES    0   1      ; "zlib"
0007    JMP      1 => 0011
0008    KSHORT   1   0
0009    RET1     1   2
0010    JMP      1 => 0015
0011 => ISNES    0   2      ; "raw"
0012    JMP      1 => 0015
0013    KSHORT   1 -15
0014    RET1     1   2
0015 => RET0     0   1

-- BYTECODE -- zip.lua:38-40
0001    UGET     2   0      ; zlib
0002    TGETS    2   2   0  ; "deflate"
0003    KSHORT   3   6
0004    UGET     4   1      ; mode_to_windowbits
0005    MOV      5   1
0006    CALL     4   0   2
0007    CALLM    2   2   1
0008    MOV      3   0
0009    KSTR     4   1      ; "finish"
0010    CALL     2   2   3
0011    RET1     2   2

-- BYTECODE -- zip.lua:42-44
0001    UGET     2   0      ; zlib
0002    TGETS    2   2   0  ; "inflate"
0003    UGET     3   1      ; mode_to_windowbits
0004    MOV      4   1
0005    CALL     3   0   2
0006    CALLM    2   2   0
0007    MOV      3   0
0008    CALL     2   2   2
0009    RET1     2   2

-- BYTECODE -- zip.lua:46-48
0001    UGET     1   0      ; zlib
0002    TGETS    1   1   0  ; "crc32"
0003    CALL     1   2   1
0004    MOV      2   0
0005    CALLT    1   2

-- BYTECODE -- zip.lua:50-52
0001    UGET     2   0      ; zlib
0002    TGETS    2   2   0  ; "compress"
0003    MOV      3   0
0004    KSHORT   4  -1
0005    KPRI     5   0
0006    UGET     6   1      ; mode_to_windowbits
0007    MOV      7   1
0008    CALL     6   0   2
0009    CALLMT   2   3

-- BYTECODE -- zip.lua:54-56
0001    UGET     2   0      ; zlib
0002    TGETS    2   2   0  ; "decompress"
0003    MOV      3   0
0004    UGET     4   1      ; mode_to_windowbits
0005    MOV      5   1
0006    CALL     4   0   2
0007    CALLMT   2   1

-- BYTECODE -- zip.lua:58-60
0001    UGET     1   0      ; zlib
0002    TGETS    1   1   0  ; "crc32"
0003    UGET     2   0      ; zlib
0004    TGETS    2   2   0  ; "crc32"
0005    CALL     2   2   1
0006    MOV      3   0
0007    CALLT    1   3

-- BYTECODE -- zip.lua:65-73
0001    TNEW     2   0
0002    KSHORT   3   1
0003    MOV      4   1
0004    KSHORT   5   1
0005    FORI     3 => 0018
0006 => MODVN    7   0   0  ; 256
0007    GGET     8   0      ; "table"
0008    TGETS    8   8   1  ; "insert"
0009    MOV      9   2
0010    GGET    10   2      ; "string"
0011    TGETS   10  10   3  ; "char"
0012    MOV     11   7
0013    CALL    10   0   2
0014    CALLM    8   1   1
0015    SUBVV    8   0   7
0016    DIVVN    0   8   0  ; 256
0017    FORL     3 => 0006
0018 => GGET     3   0      ; "table"
0019    TGETS    3   3   4  ; "concat"
0020    MOV      4   2
0021    CALLT    3   2

-- BYTECODE -- zip.lua:75-82
0001    KSHORT   1   0
0002    TNEW     2   3
0003    GGET     3   0      ; "string"
0004    TGETS    3   3   1  ; "byte"
0005    MOV      4   0
0006    KSHORT   5   1
0007    LEN      6   0
0008    CALL     3   0   4
0009    TSETM    3   0      ; 1
0010    KSHORT   3   1
0011    LEN      4   0
0012    KSHORT   5   1
0013    FORI     3 => 0021
0014 => UGET     7   0      ; shl
0015    TGETV    8   2   6
0016    SUBVN    9   6   1  ; 1
0017    MULVN    9   9   2  ; 8
0018    CALL     7   2   3
0019    ADDVV    1   1   7
0020    FORL     3 => 0014
0021 => GGET     3   2      ; "math"
0022    TGETS    3   3   3  ; "floor"
0023    MOV      4   1
0024    CALLT    3   2

-- BYTECODE -- zip.lua:93-108
0001    TGETS    2   0   0  ; "in_open_file"
0002    ISF          2
0003    JMP      3 => 0009
0004    MOV      3   0
0005    TGETS    2   0   1  ; "close_file_in_zip"
0006    CALL     2   1   2
0007    KPRI     2   0
0008    RET1     2   2
0009 => TNEW     2   0
0010    TSETS    2   0   2  ; "local_file_header"
0011    KSHORT   3   0
0012    TSETS    3   2   3  ; "last_mod_file_time"
0013    KSHORT   3   0
0014    TSETS    3   2   4  ; "last_mod_file_date"
0015    LEN      3   1
0016    TSETS    3   2   5  ; "file_name_length"
0017    KSHORT   3   0
0018    TSETS    3   2   6  ; "extra_field_length"
0019    MOV      4   1
0020    TGETS    3   1   8  ; "gsub"
0021    KSTR     5   9      ; "\"
0022    KSTR     6  10      ; "/"
0023    CALL     3   2   4
0024    TSETS    3   2   7  ; "file_name"
0025    UGET     3   0      ; shl
0026    KSHORT   4 493
0027    KSHORT   5  16
0028    CALL     3   2   3
0029    TSETS    3   2  11  ; "external_attr"
0030    KPRI     3   2
0031    TSETS    3   0   0  ; "in_open_file"
0032    KPRI     3   2
0033    RET1     3   2

-- BYTECODE -- zip.lua:114-125
0001    TGETS    2   0   0  ; "in_open_file"
0002    IST          2
0003    JMP      2 => 0006
0004    KPRI     2   0
0005    RET1     2   2
0006 => TGETS    2   0   1  ; "local_file_header"
0007    UGET     3   0      ; zlib_compress
0008    MOV      4   1
0009    KSTR     5   2      ; "raw"
0010    CALL     3   2   3
0011    UGET     4   1      ; zlib_crc32
0012    MOV      5   1
0013    CALL     4   2   2
0014    TSETS    4   2   3  ; "crc32"
0015    LEN      4   3
0016    TSETS    4   2   4  ; "compressed_size"
0017    LEN      4   1
0018    TSETS    4   2   5  ; "uncompressed_size"
0019    TSETS    3   0   6  ; "data"
0020    KPRI     4   2
0021    RET1     4   2

-- BYTECODE -- zip.lua:130-166
0001    TGETS    1   0   0  ; "ziphandle"
0002    TGETS    2   0   1  ; "in_open_file"
0003    IST          2
0004    JMP      2 => 0007
0005    KPRI     2   0
0006    RET1     2   2
0007 => TGETS    2   0   2  ; "local_file_header"
0008    MOV      4   1
0009    TGETS    3   1   4  ; "seek"
0010    CALL     3   2   2
0011    TSETS    3   2   3  ; "offset"
0012    MOV      4   1
0013    TGETS    3   1   5  ; "write"
0014    UGET     5   0      ; LOCAL_FILE_HEADER_SIGNATURE
0015    CALL     3   1   3
0016    MOV      4   1
0017    TGETS    3   1   5  ; "write"
0018    UGET     5   1      ; number_to_lestring
0019    KSHORT   6  20
0020    KSHORT   7   2
0021    CALL     5   0   3
0022    CALLM    3   1   1
0023    MOV      4   1
0024    TGETS    3   1   5  ; "write"
0025    UGET     5   1      ; number_to_lestring
0026    KSHORT   6   4
0027    KSHORT   7   2
0028    CALL     5   0   3
0029    CALLM    3   1   1
0030    MOV      4   1
0031    TGETS    3   1   5  ; "write"
0032    UGET     5   1      ; number_to_lestring
0033    KSHORT   6   8
0034    KSHORT   7   2
0035    CALL     5   0   3
0036    CALLM    3   1   1
0037    MOV      4   1
0038    TGETS    3   1   5  ; "write"
0039    UGET     5   1      ; number_to_lestring
0040    TGETS    6   2   6  ; "last_mod_file_time"
0041    KSHORT   7   2
0042    CALL     5   0   3
0043    CALLM    3   1   1
0044    MOV      4   1
0045    TGETS    3   1   5  ; "write"
0046    UGET     5   1      ; number_to_lestring
0047    TGETS    6   2   7  ; "last_mod_file_date"
0048    KSHORT   7   2
0049    CALL     5   0   3
0050    CALLM    3   1   1
0051    MOV      4   1
0052    TGETS    3   1   5  ; "write"
0053    UGET     5   1      ; number_to_lestring
0054    TGETS    6   2   8  ; "crc32"
0055    KSHORT   7   4
0056    CALL     5   0   3
0057    CALLM    3   1   1
0058    MOV      4   1
0059    TGETS    3   1   5  ; "write"
0060    UGET     5   1      ; number_to_lestring
0061    TGETS    6   2   9  ; "compressed_size"
0062    KSHORT   7   4
0063    CALL     5   0   3
0064    CALLM    3   1   1
0065    MOV      4   1
0066    TGETS    3   1   5  ; "write"
0067    UGET     5   1      ; number_to_lestring
0068    TGETS    6   2  10  ; "uncompressed_size"
0069    KSHORT   7   4
0070    CALL     5   0   3
0071    CALLM    3   1   1
0072    MOV      4   1
0073    TGETS    3   1   5  ; "write"
0074    UGET     5   1      ; number_to_lestring
0075    TGETS    6   2  11  ; "file_name_length"
0076    KSHORT   7   2
0077    CALL     5   0   3
0078    CALLM    3   1   1
0079    MOV      4   1
0080    TGETS    3   1   5  ; "write"
0081    UGET     5   1      ; number_to_lestring
0082    TGETS    6   2  12  ; "extra_field_length"
0083    KSHORT   7   2
0084    CALL     5   0   3
0085    CALLM    3   1   1
0086    MOV      4   1
0087    TGETS    3   1   5  ; "write"
0088    TGETS    5   2  13  ; "file_name"
0089    CALL     3   1   3
0090    MOV      4   1
0091    TGETS    3   1   5  ; "write"
0092    TGETS    5   0  14  ; "data"
0093    CALL     3   1   3
0094    MOV      4   1
0095    TGETS    3   1   5  ; "write"
0096    UGET     5   2      ; DATA_DESCRIPTOR_SIGNATURE
0097    CALL     3   1   3
0098    MOV      4   1
0099    TGETS    3   1   5  ; "write"
0100    UGET     5   1      ; number_to_lestring
0101    TGETS    6   2   8  ; "crc32"
0102    KSHORT   7   4
0103    CALL     5   0   3
0104    CALLM    3   1   1
0105    MOV      4   1
0106    TGETS    3   1   5  ; "write"
0107    UGET     5   1      ; number_to_lestring
0108    TGETS    6   2   9  ; "compressed_size"
0109    KSHORT   7   4
0110    CALL     5   0   3
0111    CALLM    3   1   1
0112    MOV      4   1
0113    TGETS    3   1   5  ; "write"
0114    UGET     5   1      ; number_to_lestring
0115    TGETS    6   2  10  ; "uncompressed_size"
0116    KSHORT   7   4
0117    CALL     5   0   3
0118    CALLM    3   1   1
0119    GGET     3  15      ; "table"
0120    TGETS    3   3  16  ; "insert"
0121    TGETS    4   0  17  ; "files"
0122    MOV      5   2
0123    CALL     3   1   3
0124    KPRI     3   1
0125    TSETS    3   0   1  ; "in_open_file"
0126    KPRI     3   2
0127    RET1     3   2

-- BYTECODE -- zip.lua:170-204
0001    KPRI     2   0
0002    MOV      4   0
0003    TGETS    3   0   0  ; "open_new_file_in_zip"
0004    MOV      5   1
0005    CALL     3   3   3
0006    IST          3
0007    JMP      5 => 0013
0008    KSTR     5   1      ; "error in opening "
0009    MOV      6   1
0010    KSTR     7   2      ; " in zipfile"
0011    CAT      4   5   7
0012    JMP      5 => 0029
0013 => GGET     5   3      ; "io"
0014    TGETS    5   5   4  ; "open"
0015    UGET     6   0      ; fs
0016    TGETS    6   6   5  ; "absolute_name"
0017    MOV      7   1
0018    CALL     6   2   2
0019    KSTR     7   6      ; "rb"
0020    CALL     5   2   3
0021    MOV      2   5
0022    IST          2
0023    JMP      5 => 0029
0024    KPRI     3   1
0025    KSTR     5   7      ; "error opening "
0026    MOV      6   1
0027    KSTR     7   8      ; " for reading"
0028    CAT      4   5   7
0029 => ISF          3
0030    JMP      5 => 0053
0031    MOV      6   2
0032    TGETS    5   2   9  ; "read"
0033    KSTR     7  10      ; "*a"
0034    CALL     5   2   3
0035    IST          5
0036    JMP      6 => 0042
0037    KSTR     6  11      ; "error reading "
0038    MOV      7   1
0039    CAT      4   6   7
0040    KPRI     3   1
0041    JMP      6 => 0053
0042 => MOV      7   0
0043    TGETS    6   0  12  ; "write_file_in_zip"
0044    MOV      8   5
0045    CALL     6   2   3
0046    MOV      3   6
0047    IST          3
0048    JMP      6 => 0053
0049    KSTR     6  13      ; "error in writing "
0050    MOV      7   1
0051    KSTR     8  14      ; " in the zipfile"
0052    CAT      4   6   8
0053 => ISF          2
0054    JMP      5 => 0058
0055    MOV      6   2
0056    TGETS    5   2  15  ; "close"
0057    CALL     5   1   2
0058 => ISF          3
0059    JMP      5 => 0070
0060    MOV      6   0
0061    TGETS    5   0  16  ; "close_file_in_zip"
0062    CALL     5   2   2
0063    MOV      3   5
0064    IST          3
0065    JMP      5 => 0070
0066    KSTR     5  13      ; "error in writing "
0067    MOV      6   1
0068    KSTR     7  14      ; " in the zipfile"
0069    CAT      4   5   7
0070 => ISEQP    3   2
0071    JMP      5 => 0074
0072    KPRI     5   1
0073    JMP      6 => 0075
0074 => KPRI     5   2
0075 => MOV      6   4
0076    RET      5   3

-- BYTECODE -- zip.lua:209-250
0001    TGETS    1   0   0  ; "ziphandle"
0002    MOV      3   1
0003    TGETS    2   1   1  ; "seek"
0004    CALL     2   2   2
0005    KSHORT   3   0
0006    GGET     4   2      ; "ipairs"
0007    TGETS    5   0   3  ; "files"
0008    CALL     4   4   2
0009    JMP      7 => 0133
0010 => MOV     10   1
0011    TGETS    9   1   4  ; "write"
0012    UGET    11   0      ; CENTRAL_DIRECTORY_SIGNATURE
0013    CALL     9   1   3
0014    MOV     10   1
0015    TGETS    9   1   4  ; "write"
0016    UGET    11   1      ; number_to_lestring
0017    KSHORT  12   3
0018    KSHORT  13   2
0019    CALL    11   0   3
0020    CALLM    9   1   1
0021    MOV     10   1
0022    TGETS    9   1   4  ; "write"
0023    UGET    11   1      ; number_to_lestring
0024    KSHORT  12  20
0025    KSHORT  13   2
0026    CALL    11   0   3
0027    CALLM    9   1   1
0028    MOV     10   1
0029    TGETS    9   1   4  ; "write"
0030    UGET    11   1      ; number_to_lestring
0031    KSHORT  12   0
0032    KSHORT  13   2
0033    CALL    11   0   3
0034    CALLM    9   1   1
0035    MOV     10   1
0036    TGETS    9   1   4  ; "write"
0037    UGET    11   1      ; number_to_lestring
0038    KSHORT  12   8
0039    KSHORT  13   2
0040    CALL    11   0   3
0041    CALLM    9   1   1
0042    MOV     10   1
0043    TGETS    9   1   4  ; "write"
0044    UGET    11   1      ; number_to_lestring
0045    TGETS   12   8   5  ; "last_mod_file_time"
0046    KSHORT  13   2
0047    CALL    11   0   3
0048    CALLM    9   1   1
0049    MOV     10   1
0050    TGETS    9   1   4  ; "write"
0051    UGET    11   1      ; number_to_lestring
0052    TGETS   12   8   6  ; "last_mod_file_date"
0053    KSHORT  13   2
0054    CALL    11   0   3
0055    CALLM    9   1   1
0056    MOV     10   1
0057    TGETS    9   1   4  ; "write"
0058    UGET    11   1      ; number_to_lestring
0059    TGETS   12   8   7  ; "crc32"
0060    KSHORT  13   4
0061    CALL    11   0   3
0062    CALLM    9   1   1
0063    MOV     10   1
0064    TGETS    9   1   4  ; "write"
0065    UGET    11   1      ; number_to_lestring
0066    TGETS   12   8   8  ; "compressed_size"
0067    KSHORT  13   4
0068    CALL    11   0   3
0069    CALLM    9   1   1
0070    MOV     10   1
0071    TGETS    9   1   4  ; "write"
0072    UGET    11   1      ; number_to_lestring
0073    TGETS   12   8   9  ; "uncompressed_size"
0074    KSHORT  13   4
0075    CALL    11   0   3
0076    CALLM    9   1   1
0077    MOV     10   1
0078    TGETS    9   1   4  ; "write"
0079    UGET    11   1      ; number_to_lestring
0080    TGETS   12   8  10  ; "file_name_length"
0081    KSHORT  13   2
0082    CALL    11   0   3
0083    CALLM    9   1   1
0084    MOV     10   1
0085    TGETS    9   1   4  ; "write"
0086    UGET    11   1      ; number_to_lestring
0087    TGETS   12   8  11  ; "extra_field_length"
0088    KSHORT  13   2
0089    CALL    11   0   3
0090    CALLM    9   1   1
0091    MOV     10   1
0092    TGETS    9   1   4  ; "write"
0093    UGET    11   1      ; number_to_lestring
0094    KSHORT  12   0
0095    KSHORT  13   2
0096    CALL    11   0   3
0097    CALLM    9   1   1
0098    MOV     10   1
0099    TGETS    9   1   4  ; "write"
0100    UGET    11   1      ; number_to_lestring
0101    KSHORT  12   0
0102    KSHORT  13   2
0103    CALL    11   0   3
0104    CALLM    9   1   1
0105    MOV     10   1
0106    TGETS    9   1   4  ; "write"
0107    UGET    11   1      ; number_to_lestring
0108    KSHORT  12   0
0109    KSHORT  13   2
0110    CALL    11   0   3
0111    CALLM    9   1   1
0112    MOV     10   1
0113    TGETS    9   1   4  ; "write"
0114    UGET    11   1      ; number_to_lestring
0115    TGETS   12   8  12  ; "external_attr"
0116    KSHORT  13   4
0117    CALL    11   0   3
0118    CALLM    9   1   1
0119    MOV     10   1
0120    TGETS    9   1   4  ; "write"
0121    UGET    11   1      ; number_to_lestring
0122    TGETS   12   8  13  ; "offset"
0123    KSHORT  13   4
0124    CALL    11   0   3
0125    CALLM    9   1   1
0126    MOV     10   1
0127    TGETS    9   1   4  ; "write"
0128    TGETS   11   8  14  ; "file_name"
0129    CALL     9   1   3
0130    ADDVN    9   3   0  ; 46
0131    TGETS   10   8  10  ; "file_name_length"
0132    ADDVV    3   9  10
0133 => ITERC    7   3   3
0134    ITERL    7 => 0010
0135    MOV      5   1
0136    TGETS    4   1   4  ; "write"
0137    UGET     6   2      ; END_OF_CENTRAL_DIR_SIGNATURE
0138    CALL     4   1   3
0139    MOV      5   1
0140    TGETS    4   1   4  ; "write"
0141    UGET     6   1      ; number_to_lestring
0142    KSHORT   7   0
0143    KSHORT   8   2
0144    CALL     6   0   3
0145    CALLM    4   1   1
0146    MOV      5   1
0147    TGETS    4   1   4  ; "write"
0148    UGET     6   1      ; number_to_lestring
0149    KSHORT   7   0
0150    KSHORT   8   2
0151    CALL     6   0   3
0152    CALLM    4   1   1
0153    MOV      5   1
0154    TGETS    4   1   4  ; "write"
0155    UGET     6   1      ; number_to_lestring
0156    TGETS    7   0   3  ; "files"
0157    LEN      7   7
0158    KSHORT   8   2
0159    CALL     6   0   3
0160    CALLM    4   1   1
0161    MOV      5   1
0162    TGETS    4   1   4  ; "write"
0163    UGET     6   1      ; number_to_lestring
0164    TGETS    7   0   3  ; "files"
0165    LEN      7   7
0166    KSHORT   8   2
0167    CALL     6   0   3
0168    CALLM    4   1   1
0169    MOV      5   1
0170    TGETS    4   1   4  ; "write"
0171    UGET     6   1      ; number_to_lestring
0172    MOV      7   3
0173    KSHORT   8   4
0174    CALL     6   0   3
0175    CALLM    4   1   1
0176    MOV      5   1
0177    TGETS    4   1   4  ; "write"
0178    UGET     6   1      ; number_to_lestring
0179    MOV      7   2
0180    KSHORT   8   4
0181    CALL     6   0   3
0182    CALLM    4   1   1
0183    MOV      5   1
0184    TGETS    4   1   4  ; "write"
0185    UGET     6   1      ; number_to_lestring
0186    KSHORT   7   0
0187    KSHORT   8   2
0188    CALL     6   0   3
0189    CALLM    4   1   1
0190    MOV      5   1
0191    TGETS    4   1  15  ; "close"
0192    CALL     4   1   2
0193    KPRI     4   2
0194    RET1     4   2

-- BYTECODE -- zip.lua:255-273
0001    TNEW     1   0
0002    GGET     2   1      ; "io"
0003    TGETS    2   2   2  ; "open"
0004    UGET     3   0      ; fs
0005    TGETS    3   3   3  ; "absolute_name"
0006    MOV      4   0
0007    CALL     3   2   2
0008    KSTR     4   4      ; "wb"
0009    CALL     2   2   3
0010    TSETS    2   1   0  ; "ziphandle"
0011    TGETS    2   1   0  ; "ziphandle"
0012    IST          2
0013    JMP      2 => 0016
0014    KPRI     2   0
0015    RET1     2   2
0016 => TNEW     2   0
0017    TSETS    2   1   5  ; "files"
0018    KPRI     2   1
0019    TSETS    2   1   6  ; "in_open_file"
0020    UGET     2   1      ; zipwriter_add
0021    TSETS    2   1   7  ; "add"
0022    UGET     2   2      ; zipwriter_close
0023    TSETS    2   1   8  ; "close"
0024    UGET     2   3      ; zipwriter_open_new_file_in_zip
0025    TSETS    2   1   9  ; "open_new_file_in_zip"
0026    UGET     2   4      ; zipwriter_write_file_in_zip
0027    TSETS    2   1  10  ; "write_file_in_zip"
0028    UGET     2   5      ; zipwriter_close_file_in_zip
0029    TSETS    2   1  11  ; "close_file_in_zip"
0030    RET1     1   2

-- BYTECODE -- zip.lua:281-305
0001    UGET     1   0      ; zip
0002    TGETS    1   1   0  ; "new_zipwriter"
0003    MOV      2   0
0004    CALL     1   2   2
0005    IST          1
0006    JMP      2 => 0012
0007    KPRI     2   0
0008    KSTR     3   1      ; "error opening "
0009    MOV      4   0
0010    CAT      3   3   4
0011    RET      2   3
0012 => KNIL     2   3
0013    GGET     4   2      ; "pairs"
0014    TNEW     5   3
0015    VARG     6   0   1
0016    TSETM    6   0      ; 1
0017    CALL     4   4   2
0018    ISNEXT   7 => 0064
0019 => UGET     9   1      ; fs
0020    TGETS    9   9   3  ; "is_dir"
0021    MOV     10   8
0022    CALL     9   2   2
0023    ISF          9
0024    JMP     10 => 0055
0025    GGET     9   2      ; "pairs"
0026    UGET    10   1      ; fs
0027    TGETS   10  10   4  ; "find"
0028    MOV     11   8
0029    CALL    10   0   2
0030    CALLM    9   4   0
0031    ISNEXT  12 => 0052
0032 => UGET    14   2      ; dir
0033    TGETS   14  14   5  ; "path"
0034    MOV     15   8
0035    MOV     16  13
0036    CALL    14   2   3
0037    UGET    15   1      ; fs
0038    TGETS   15  15   6  ; "is_file"
0039    MOV     16  14
0040    CALL    15   2   2
0041    ISF         15
0042    JMP     16 => 0052
0043    MOV     16   1
0044    TGETS   15   1   7  ; "add"
0045    MOV     17  14
0046    CALL    15   3   3
0047    MOV      3  16
0048    MOV      2  15
0049    IST          2
0050    JMP     15 => 0052
0051    JMP      9 => 0064
0052 => ITERN   12   3   3
0053    ITERL   12 => 0032
0054    JMP      9 => 0064
0055 => MOV     10   1
0056    TGETS    9   1   7  ; "add"
0057    MOV     11   8
0058    CALL     9   3   3
0059    MOV      3  10
0060    MOV      2   9
0061    IST          2
0062    JMP      9 => 0064
0063    JMP      4 => 0066
0064 => ITERN    7   3   3
0065    ITERL    7 => 0019
0066 => MOV      5   1
0067    TGETS    4   1   8  ; "close"
0068    CALL     4   1   2
0069    MOV      4   2
0070    MOV      5   3
0071    RET      4   3

-- BYTECODE -- zip.lua:308-322
0001    TDUP     2   0
0002    UGET     3   0      ; shr
0003    MOV      4   1
0004    KSHORT   5   9
0005    CALL     3   2   3
0006    ADDVN    3   3   0  ; 1980
0007    TSETS    3   2   1  ; "year"
0008    UGET     3   0      ; shr
0009    UGET     4   1      ; lowbits
0010    MOV      5   1
0011    KSHORT   6   9
0012    CALL     4   2   3
0013    KSHORT   5   5
0014    CALL     3   2   3
0015    TSETS    3   2   2  ; "month"
0016    UGET     3   1      ; lowbits
0017    MOV      4   1
0018    KSHORT   5   5
0019    CALL     3   2   3
0020    TSETS    3   2   3  ; "day"
0021    UGET     3   0      ; shr
0022    MOV      4   0
0023    KSHORT   5  11
0024    CALL     3   2   3
0025    TSETS    3   2   4  ; "hour"
0026    UGET     3   0      ; shr
0027    UGET     4   1      ; lowbits
0028    MOV      5   0
0029    KSHORT   6  11
0030    CALL     4   2   3
0031    KSHORT   5   5
0032    CALL     3   2   3
0033    TSETS    3   2   5  ; "min"
0034    UGET     3   1      ; lowbits
0035    MOV      4   0
0036    KSHORT   5   5
0037    CALL     3   2   3
0038    MULVN    3   3   1  ; 2
0039    TSETS    3   2   6  ; "sec"
0040    TGETS    3   2   2  ; "month"
0041    ISNEN    3   2      ; 0
0042    JMP      3 => 0045
0043    KSHORT   3   1
0044    TSETS    3   2   2  ; "month"
0045 => TGETS    3   2   3  ; "day"
0046    ISNEN    3   2      ; 0
0047    JMP      3 => 0050
0048    KSHORT   3   1
0049    TSETS    3   2   3  ; "day"
0050 => RET1     2   2

-- BYTECODE -- zip.lua:324-363
0001    MOV      3   0
0002    TGETS    2   0   0  ; "read"
0003    KSHORT   4   4
0004    CALL     2   2   3
0005    UGET     3   0      ; LOCAL_FILE_HEADER_SIGNATURE
0006    ISEQV    2   3
0007    JMP      3 => 0011
0008    KPRI     3   0
0009    KSTR     4   1      ; "failed reading Local File Header signatu"~
0010    RET      3   3
0011 => TNEW     3   0
0012    UGET     4   1      ; lestring_to_number
0013    MOV      6   0
0014    TGETS    5   0   0  ; "read"
0015    KSHORT   7   2
0016    CALL     5   0   3
0017    CALLM    4   2   0
0018    TSETS    4   3   2  ; "version_needed"
0019    UGET     4   1      ; lestring_to_number
0020    MOV      6   0
0021    TGETS    5   0   0  ; "read"
0022    KSHORT   7   2
0023    CALL     5   0   3
0024    CALLM    4   2   0
0025    TSETS    4   3   3  ; "bitflag"
0026    UGET     4   1      ; lestring_to_number
0027    MOV      6   0
0028    TGETS    5   0   0  ; "read"
0029    KSHORT   7   2
0030    CALL     5   0   3
0031    CALLM    4   2   0
0032    TSETS    4   3   4  ; "compression_method"
0033    UGET     4   1      ; lestring_to_number
0034    MOV      6   0
0035    TGETS    5   0   0  ; "read"
0036    KSHORT   7   2
0037    CALL     5   0   3
0038    CALLM    4   2   0
0039    TSETS    4   3   5  ; "last_mod_file_time"
0040    UGET     4   1      ; lestring_to_number
0041    MOV      6   0
0042    TGETS    5   0   0  ; "read"
0043    KSHORT   7   2
0044    CALL     5   0   3
0045    CALLM    4   2   0
0046    TSETS    4   3   6  ; "last_mod_file_date"
0047    UGET     4   1      ; lestring_to_number
0048    MOV      6   0
0049    TGETS    5   0   0  ; "read"
0050    KSHORT   7   4
0051    CALL     5   0   3
0052    CALLM    4   2   0
0053    TSETS    4   3   7  ; "crc32"
0054    UGET     4   1      ; lestring_to_number
0055    MOV      6   0
0056    TGETS    5   0   0  ; "read"
0057    KSHORT   7   4
0058    CALL     5   0   3
0059    CALLM    4   2   0
0060    TSETS    4   3   8  ; "compressed_size"
0061    UGET     4   1      ; lestring_to_number
0062    MOV      6   0
0063    TGETS    5   0   0  ; "read"
0064    KSHORT   7   4
0065    CALL     5   0   3
0066    CALLM    4   2   0
0067    TSETS    4   3   9  ; "uncompressed_size"
0068    UGET     4   1      ; lestring_to_number
0069    MOV      6   0
0070    TGETS    5   0   0  ; "read"
0071    KSHORT   7   2
0072    CALL     5   0   3
0073    CALLM    4   2   0
0074    TSETS    4   3  10  ; "file_name_length"
0075    UGET     4   1      ; lestring_to_number
0076    MOV      6   0
0077    TGETS    5   0   0  ; "read"
0078    KSHORT   7   2
0079    CALL     5   0   3
0080    CALLM    4   2   0
0081    TSETS    4   3  11  ; "extra_field_length"
0082    MOV      5   0
0083    TGETS    4   0   0  ; "read"
0084    TGETS    6   3  10  ; "file_name_length"
0085    CALL     4   2   3
0086    TSETS    4   3  12  ; "file_name"
0087    MOV      5   0
0088    TGETS    4   0   0  ; "read"
0089    TGETS    6   3  11  ; "extra_field_length"
0090    CALL     4   2   3
0091    TSETS    4   3  13  ; "extra_field"
0092    MOV      5   0
0093    TGETS    4   0   0  ; "read"
0094    TGETS    6   1   8  ; "compressed_size"
0095    CALL     4   2   3
0096    KPRI     5   0
0097    TGETS    6   1   4  ; "compression_method"
0098    ISNEN    6   0      ; 8
0099    JMP      6 => 0106
0100    UGET     6   2      ; zlib_uncompress
0101    MOV      7   4
0102    KSTR     8  14      ; "raw"
0103    CALL     6   2   3
0104    MOV      5   6
0105    JMP      6 => 0116
0106 => TGETS    6   1   4  ; "compression_method"
0107    ISNEN    6   1      ; 0
0108    JMP      6 => 0111
0109    MOV      5   4
0110    JMP      6 => 0116
0111 => KPRI     6   0
0112    KSTR     7  15      ; "unknown compression method "
0113    TGETS    8   1   4  ; "compression_method"
0114    CAT      7   7   8
0115    RET      6   3
0116 => LEN      6   5
0117    TGETS    7   1   9  ; "uncompressed_size"
0118    ISEQV    6   7
0119    JMP      6 => 0123
0120    KPRI     6   0
0121    KSTR     7  16      ; "uncompressed size doesn't match"
0122    RET      6   3
0123 => TGETS    6   1   7  ; "crc32"
0124    UGET     7   3      ; zlib_crc32
0125    MOV      8   5
0126    CALL     7   2   2
0127    ISEQV    6   7
0128    JMP      6 => 0136
0129    KPRI     6   0
0130    KSTR     7  17      ; "crc32 failed (expected "
0131    TGETS    8   1   7  ; "crc32"
0132    KSTR     9  18      ; ") - data: "
0133    MOV     10   5
0134    CAT      7   7  10
0135    RET      6   3
0136 => RET1     5   2

-- BYTECODE -- zip.lua:365-397
0001    MOV      2   0
0002    TGETS    1   0   0  ; "seek"
0003    KSTR     3   1      ; "end"
0004    KSHORT   4 -22
0005    CALL     1   3   4
0006    IST          1
0007    JMP      3 => 0011
0008    KPRI     3   0
0009    MOV      4   2
0010    RET      3   3
0011 => LOOP     3 => 0032
0012    MOV      4   0
0013    TGETS    3   0   2  ; "read"
0014    KSHORT   5   4
0015    CALL     3   2   3
0016    UGET     4   0      ; END_OF_CENTRAL_DIR_SIGNATURE
0017    ISNEV    3   4
0018    JMP      4 => 0020
0019    JMP      3 => 0032
0020 => SUBVN    1   1   0  ; 1
0021    MOV      5   0
0022    TGETS    4   0   0  ; "seek"
0023    KSTR     6   3      ; "set"
0024    MOV      7   1
0025    CALL     4   3   4
0026    ISEQV    4   1
0027    JMP      6 => 0011
0028    KPRI     6   0
0029    KSTR     7   4      ; "Could not find End of Central Directory "~
0030    RET      6   3
0031    JMP      3 => 0011
0032 => MOV      4   0
0033    TGETS    3   0   0  ; "seek"
0034    KSTR     5   5      ; "cur"
0035    KSHORT   6   6
0036    CALL     3   1   4
0037    UGET     3   1      ; lestring_to_number
0038    MOV      5   0
0039    TGETS    4   0   2  ; "read"
0040    KSHORT   6   2
0041    CALL     4   0   3
0042    CALLM    3   2   0
0043    MOV      5   0
0044    TGETS    4   0   0  ; "seek"
0045    KSTR     6   5      ; "cur"
0046    KSHORT   7   4
0047    CALL     4   1   4
0048    UGET     4   1      ; lestring_to_number
0049    MOV      6   0
0050    TGETS    5   0   2  ; "read"
0051    KSHORT   7   4
0052    CALL     5   0   3
0053    CALLM    4   2   0
0054    MOV      5   3
0055    MOV      6   4
0056    RET      5   3

-- BYTECODE -- zip.lua:399-434
0001    TNEW     2   0
0002    KSHORT   3   1
0003    MOV      4   1
0004    KSHORT   5   1
0005    FORI     3 => 0151
0006 => MOV      8   0
0007    TGETS    7   0   0  ; "read"
0008    KSHORT   9   4
0009    CALL     7   2   3
0010    UGET     8   0      ; CENTRAL_DIRECTORY_SIGNATURE
0011    ISEQV    7   8
0012    JMP      8 => 0016
0013    KPRI     8   0
0014    KSTR     9   1      ; "failed reading Central Directory signatu"~
0015    RET      8   3
0016 => TNEW     8   0
0017    TSETV    8   2   6
0018    UGET     9   1      ; lestring_to_number
0019    MOV     11   0
0020    TGETS   10   0   0  ; "read"
0021    KSHORT  12   2
0022    CALL    10   0   3
0023    CALLM    9   2   0
0024    TSETS    9   8   2  ; "version_made_by"
0025    UGET     9   1      ; lestring_to_number
0026    MOV     11   0
0027    TGETS   10   0   0  ; "read"
0028    KSHORT  12   2
0029    CALL    10   0   3
0030    CALLM    9   2   0
0031    TSETS    9   8   3  ; "version_needed"
0032    UGET     9   1      ; lestring_to_number
0033    MOV     11   0
0034    TGETS   10   0   0  ; "read"
0035    KSHORT  12   2
0036    CALL    10   0   3
0037    CALLM    9   2   0
0038    TSETS    9   8   4  ; "bitflag"
0039    UGET     9   1      ; lestring_to_number
0040    MOV     11   0
0041    TGETS   10   0   0  ; "read"
0042    KSHORT  12   2
0043    CALL    10   0   3
0044    CALLM    9   2   0
0045    TSETS    9   8   5  ; "compression_method"
0046    UGET     9   1      ; lestring_to_number
0047    MOV     11   0
0048    TGETS   10   0   0  ; "read"
0049    KSHORT  12   2
0050    CALL    10   0   3
0051    CALLM    9   2   0
0052    TSETS    9   8   6  ; "last_mod_file_time"
0053    UGET     9   1      ; lestring_to_number
0054    MOV     11   0
0055    TGETS   10   0   0  ; "read"
0056    KSHORT  12   2
0057    CALL    10   0   3
0058    CALLM    9   2   0
0059    TSETS    9   8   7  ; "last_mod_file_date"
0060    UGET     9   2      ; ziptime_to_luatime
0061    TGETS   10   8   6  ; "last_mod_file_time"
0062    TGETS   11   8   7  ; "last_mod_file_date"
0063    CALL     9   2   3
0064    TSETS    9   8   8  ; "last_mod_luatime"
0065    UGET     9   1      ; lestring_to_number
0066    MOV     11   0
0067    TGETS   10   0   0  ; "read"
0068    KSHORT  12   4
0069    CALL    10   0   3
0070    CALLM    9   2   0
0071    TSETS    9   8   9  ; "crc32"
0072    UGET     9   1      ; lestring_to_number
0073    MOV     11   0
0074    TGETS   10   0   0  ; "read"
0075    KSHORT  12   4
0076    CALL    10   0   3
0077    CALLM    9   2   0
0078    TSETS    9   8  10  ; "compressed_size"
0079    UGET     9   1      ; lestring_to_number
0080    MOV     11   0
0081    TGETS   10   0   0  ; "read"
0082    KSHORT  12   4
0083    CALL    10   0   3
0084    CALLM    9   2   0
0085    TSETS    9   8  11  ; "uncompressed_size"
0086    UGET     9   1      ; lestring_to_number
0087    MOV     11   0
0088    TGETS   10   0   0  ; "read"
0089    KSHORT  12   2
0090    CALL    10   0   3
0091    CALLM    9   2   0
0092    TSETS    9   8  12  ; "file_name_length"
0093    UGET     9   1      ; lestring_to_number
0094    MOV     11   0
0095    TGETS   10   0   0  ; "read"
0096    KSHORT  12   2
0097    CALL    10   0   3
0098    CALLM    9   2   0
0099    TSETS    9   8  13  ; "extra_field_length"
0100    UGET     9   1      ; lestring_to_number
0101    MOV     11   0
0102    TGETS   10   0   0  ; "read"
0103    KSHORT  12   2
0104    CALL    10   0   3
0105    CALLM    9   2   0
0106    TSETS    9   8  14  ; "file_comment_length"
0107    UGET     9   1      ; lestring_to_number
0108    MOV     11   0
0109    TGETS   10   0   0  ; "read"
0110    KSHORT  12   2
0111    CALL    10   0   3
0112    CALLM    9   2   0
0113    TSETS    9   8  15  ; "disk_number_start"
0114    UGET     9   1      ; lestring_to_number
0115    MOV     11   0
0116    TGETS   10   0   0  ; "read"
0117    KSHORT  12   2
0118    CALL    10   0   3
0119    CALLM    9   2   0
0120    TSETS    9   8  16  ; "internal_attr"
0121    UGET     9   1      ; lestring_to_number
0122    MOV     11   0
0123    TGETS   10   0   0  ; "read"
0124    KSHORT  12   4
0125    CALL    10   0   3
0126    CALLM    9   2   0
0127    TSETS    9   8  17  ; "external_attr"
0128    UGET     9   1      ; lestring_to_number
0129    MOV     11   0
0130    TGETS   10   0   0  ; "read"
0131    KSHORT  12   4
0132    CALL    10   0   3
0133    CALLM    9   2   0
0134    TSETS    9   8  18  ; "offset"
0135    MOV     10   0
0136    TGETS    9   0   0  ; "read"
0137    TGETS   11   8  12  ; "file_name_length"
0138    CALL     9   2   3
0139    TSETS    9   8  19  ; "file_name"
0140    MOV     10   0
0141    TGETS    9   0   0  ; "read"
0142    TGETS   11   8  13  ; "extra_field_length"
0143    CALL     9   2   3
0144    TSETS    9   8  20  ; "extra_field"
0145    MOV     10   0
0146    TGETS    9   0   0  ; "read"
0147    TGETS   11   8  14  ; "file_comment_length"
0148    CALL     9   2   3
0149    TSETS    9   8  21  ; "file_comment"
0150    FORL     3 => 0006
0151 => RET1     2   2

-- BYTECODE -- zip.lua:440-509
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "absolute_name"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    GGET     1   1      ; "io"
0007    TGETS    1   1   2  ; "open"
0008    MOV      2   0
0009    KSTR     3   3      ; "rb"
0010    CALL     1   3   3
0011    IST          1
0012    JMP      3 => 0016
0013    KPRI     3   0
0014    MOV      4   2
0015    RET      3   3
0016 => UGET     3   1      ; process_end_of_central_dir
0017    MOV      4   1
0018    CALL     3   3   2
0019    IST          3
0020    JMP      5 => 0024
0021    KPRI     5   0
0022    MOV      6   4
0023    RET      5   3
0024 => MOV      6   1
0025    TGETS    5   1   4  ; "seek"
0026    KSTR     7   5      ; "set"
0027    MOV      8   4
0028    CALL     5   3   4
0029    IST          5
0030    JMP      7 => 0034
0031    KPRI     7   0
0032    MOV      8   6
0033    RET      7   3
0034 => UGET     7   2      ; process_central_dir
0035    MOV      8   1
0036    MOV      9   3
0037    CALL     7   3   3
0038    IST          7
0039    JMP      9 => 0043
0040    KPRI     9   0
0041    MOV     10   8
0042    RET      9   3
0043 => GGET     9   6      ; "ipairs"
0044    MOV     10   7
0045    CALL     9   4   2
0046    JMP     12 => 0167
0047 => TGETS   14  13   7  ; "file_name"
0048    MOV     16  14
0049    TGETS   15  14   8  ; "sub"
0050    LEN     17  14
0051    CALL    15   2   3
0052    ISNES   15   9      ; "/"
0053    JMP     15 => 0070
0054    UGET    15   0      ; fs
0055    TGETS   15  15  10  ; "make_dir"
0056    UGET    16   3      ; dir
0057    TGETS   16  16  11  ; "path"
0058    UGET    17   0      ; fs
0059    TGETS   17  17  12  ; "current_dir"
0060    CALL    17   2   1
0061    MOV     18  14
0062    CALL    16   0   3
0063    CALLM   15   3   0
0064    IST         15
0065    JMP     17 => 0167
0066    KPRI    17   0
0067    MOV     18  16
0068    RET     17   3
0069    JMP     15 => 0167
0070 => UGET    15   3      ; dir
0071    TGETS   15  15  13  ; "dir_name"
0072    MOV     16  14
0073    CALL    15   2   2
0074    ISEQS   15  14      ; ""
0075    JMP     16 => 0099
0076    UGET    16   3      ; dir
0077    TGETS   16  16  11  ; "path"
0078    UGET    17   0      ; fs
0079    TGETS   17  17  12  ; "current_dir"
0080    CALL    17   2   1
0081    MOV     18  15
0082    CALL    16   2   3
0083    MOV     15  16
0084    UGET    16   0      ; fs
0085    TGETS   16  16  15  ; "is_dir"
0086    MOV     17  15
0087    CALL    16   2   2
0088    IST         16
0089    JMP     16 => 0099
0090    UGET    16   0      ; fs
0091    TGETS   16  16  10  ; "make_dir"
0092    MOV     17  15
0093    CALL    16   3   2
0094    IST         16
0095    JMP     18 => 0099
0096    KPRI    18   0
0097    MOV     19  17
0098    RET     18   3
0099 => MOV     17   1
0100    TGETS   16   1   4  ; "seek"
0101    KSTR    18   5      ; "set"
0102    TGETS   19  13  16  ; "offset"
0103    CALL    16   3   4
0104    IST         16
0105    JMP     18 => 0109
0106    KPRI    18   0
0107    MOV     19  17
0108    RET     18   3
0109 => UGET    18   4      ; read_file_in_zip
0110    MOV     19   1
0111    MOV     20  13
0112    CALL    18   3   3
0113    IST         18
0114    JMP     20 => 0118
0115    KPRI    20   0
0116    MOV     21  19
0117    RET     20   3
0118 => UGET    20   3      ; dir
0119    TGETS   20  20  11  ; "path"
0120    UGET    21   0      ; fs
0121    TGETS   21  21  12  ; "current_dir"
0122    CALL    21   2   1
0123    MOV     22  14
0124    CALL    20   2   3
0125    GGET    21   1      ; "io"
0126    TGETS   21  21   2  ; "open"
0127    MOV     22  20
0128    KSTR    23  17      ; "wb"
0129    CALL    21   3   3
0130    IST         21
0131    JMP     23 => 0138
0132    MOV     24   1
0133    TGETS   23   1  18  ; "close"
0134    CALL    23   1   2
0135    KPRI    23   0
0136    MOV     24  22
0137    RET     23   3
0138 => MOV     24  21
0139    TGETS   23  21  19  ; "write"
0140    MOV     25  18
0141    CALL    23   1   3
0142    MOV     24  21
0143    TGETS   23  21  18  ; "close"
0144    CALL    23   1   2
0145    TGETS   23  13  20  ; "external_attr"
0146    KSHORT  24   0
0147    ISGE    24  23
0148    JMP     23 => 0156
0149    UGET    23   0      ; fs
0150    TGETS   23  23  21  ; "set_permissions"
0151    MOV     24  20
0152    KSTR    25  22      ; "exec"
0153    KSTR    26  23      ; "all"
0154    CALL    23   1   4
0155    JMP     23 => 0162
0156 => UGET    23   0      ; fs
0157    TGETS   23  23  21  ; "set_permissions"
0158    MOV     24  20
0159    KSTR    25  24      ; "read"
0160    KSTR    26  23      ; "all"
0161    CALL    23   1   4
0162 => UGET    23   0      ; fs
0163    TGETS   23  23  25  ; "set_time"
0164    MOV     24  20
0165    TGETS   25  13  26  ; "last_mod_luatime"
0166    CALL    23   1   3
0167 => ITERC   12   3   3
0168    ITERL   12 => 0047
0169    MOV     10   1
0170    TGETS    9   1  18  ; "close"
0171    CALL     9   1   2
0172    KPRI     9   2
0173    RET1     9   2

-- BYTECODE -- zip.lua:511-521
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    ISEQP    1   0
0013    JMP      3 => 0021
0014    GGET     3   1      ; "type"
0015    MOV      4   1
0016    CALL     3   2   2
0017    ISEQS    3   2      ; "string"
0018    JMP      3 => 0021
0019    KPRI     3   1
0020    JMP      4 => 0022
0021 => KPRI     3   2
0022 => CALL     2   1   2
0023    IST          1
0024    JMP      2 => 0028
0025    MOV      2   0
0026    KSTR     3   3      ; ".gz"
0027    CAT      1   2   3
0028 => UGET     2   0      ; fun
0029    TGETS    2   2   4  ; "partial"
0030    UGET     3   0      ; fun
0031    TGETS    3   3   5  ; "flip"
0032    UGET     4   1      ; zlib_compress
0033    CALL     3   2   2
0034    KSTR     4   6      ; "gzip"
0035    CALL     2   2   3
0036    UGET     3   2      ; fs
0037    TGETS    3   3   7  ; "filter_file"
0038    MOV      4   2
0039    MOV      5   0
0040    MOV      6   1
0041    CALLT    3   4

-- BYTECODE -- zip.lua:523-533
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    ISEQP    1   0
0013    JMP      3 => 0021
0014    GGET     3   1      ; "type"
0015    MOV      4   1
0016    CALL     3   2   2
0017    ISEQS    3   2      ; "string"
0018    JMP      3 => 0021
0019    KPRI     3   1
0020    JMP      4 => 0022
0021 => KPRI     3   2
0022 => CALL     2   1   2
0023    IST          1
0024    JMP      2 => 0031
0025    MOV      3   0
0026    TGETS    2   0   3  ; "gsub"
0027    KSTR     4   4      ; "%.gz$"
0028    KSTR     5   5      ; ""
0029    CALL     2   2   4
0030    MOV      1   2
0031 => UGET     2   0      ; fun
0032    TGETS    2   2   6  ; "partial"
0033    UGET     3   0      ; fun
0034    TGETS    3   3   7  ; "flip"
0035    UGET     4   1      ; zlib_uncompress
0036    CALL     3   2   2
0037    KSTR     4   8      ; "gzip"
0038    CALL     2   2   3
0039    UGET     3   2      ; fs
0040    TGETS    3   3   9  ; "filter_file"
0041    MOV      4   2
0042    MOV      5   0
0043    MOV      6   1
0044    CALLT    3   4

-- BYTECODE -- zip.lua:0-536
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "zlib"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fs"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fun"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.dir"
0013    CALL     4   2   2
0014    GGET     5   5      ; "pcall"
0015    GGET     6   0      ; "require"
0016    KSTR     7   6      ; "posix.sys.stat"
0017    CALL     5   3   3
0018    FNEW     7   7      ; zip.lua:13
0019    FNEW     8   8      ; zip.lua:17
0020    FNEW     9   9      ; zip.lua:20
0021    FNEW    10  10      ; zip.lua:24
0022    KNIL    11  13
0023    TGETS   14   1  11  ; "_VERSION"
0024    MOV     15  14
0025    TGETS   14  14  12  ; "match"
0026    KSTR    16  13      ; "^lua%-zlib"
0027    CALL    14   2   3
0028    ISF         14
0029    JMP     15 => 0034
0030    FNEW    11  14      ; zip.lua:38
0031    FNEW    12  15      ; zip.lua:42
0032    FNEW    13  16      ; zip.lua:46
0033    JMP     14 => 0049
0034 => TGETS   14   1  11  ; "_VERSION"
0035    MOV     15  14
0036    TGETS   14  14  12  ; "match"
0037    KSTR    16  17      ; "^lzlib"
0038    CALL    14   2   3
0039    ISF         14
0040    JMP     15 => 0045
0041    FNEW    11  18      ; zip.lua:50
0042    FNEW    12  19      ; zip.lua:54
0043    FNEW    13  20      ; zip.lua:58
0044    JMP     14 => 0049
0045 => GGET    14  21      ; "error"
0046    KSTR    15  22      ; "unknown zlib library"
0047    KSHORT  16   0
0048    CALL    14   1   3
0049 => FNEW    14  23      ; zip.lua:65
0050    FNEW    15  24      ; zip.lua:75
0051    MOV     16  14
0052    KNUM    17   0      ; 67324752
0053    KSHORT  18   4
0054    CALL    16   2   3
0055    MOV     17  14
0056    KNUM    18   1      ; 134695760
0057    KSHORT  19   4
0058    CALL    17   2   3
0059    MOV     18  14
0060    KNUM    19   2      ; 33639248
0061    KSHORT  20   4
0062    CALL    18   2   3
0063    MOV     19  14
0064    KNUM    20   3      ; 101010256
0065    KSHORT  21   4
0066    CALL    19   2   3
0067    FNEW    20  25      ; zip.lua:93
0068    FNEW    21  26      ; zip.lua:114
0069    FNEW    22  27      ; zip.lua:130
0070    FNEW    23  28      ; zip.lua:170
0071    FNEW    24  29      ; zip.lua:209
0072    FNEW    25  31      ; zip.lua:255
0073    TSETS   25   0  30  ; "new_zipwriter"
0074    FNEW    25  33      ; zip.lua:281
0075    TSETS   25   0  32  ; "zip"
0076    FNEW    25  34      ; zip.lua:308
0077    FNEW    26  35      ; zip.lua:324
0078    FNEW    27  36      ; zip.lua:365
0079    FNEW    28  37      ; zip.lua:399
0080    FNEW    29  39      ; zip.lua:440
0081    TSETS   29   0  38  ; "unzip"
0082    FNEW    29  41      ; zip.lua:511
0083    TSETS   29   0  40  ; "gzip"
0084    FNEW    29  43      ; zip.lua:523
0085    TSETS   29   0  42  ; "gunzip"
0086    UCLO     0 => 0087
0087 => RET1     0   2

-----------------------
-- BYTECODE -- tar.lua:11-26
0001    ISEQS    0   0      ; "0"
0002    JMP      1 => 0005
0003    ISNES    0   1      ; "\000"
0004    JMP      1 => 0008
0005 => KSTR     1   2      ; "file"
0006    RET1     1   2
0007    JMP      1 => 0062
0008 => ISNES    0   3      ; "1"
0009    JMP      1 => 0013
0010    KSTR     1   4      ; "link"
0011    RET1     1   2
0012    JMP      1 => 0062
0013 => ISNES    0   5      ; "2"
0014    JMP      1 => 0018
0015    KSTR     1   6      ; "symlink"
0016    RET1     1   2
0017    JMP      1 => 0062
0018 => ISNES    0   7      ; "3"
0019    JMP      1 => 0023
0020    KSTR     1   8      ; "character"
0021    RET1     1   2
0022    JMP      1 => 0062
0023 => ISNES    0   9      ; "4"
0024    JMP      1 => 0028
0025    KSTR     1  10      ; "block"
0026    RET1     1   2
0027    JMP      1 => 0062
0028 => ISNES    0  11      ; "5"
0029    JMP      1 => 0033
0030    KSTR     1  12      ; "directory"
0031    RET1     1   2
0032    JMP      1 => 0062
0033 => ISNES    0  13      ; "6"
0034    JMP      1 => 0038
0035    KSTR     1  14      ; "fifo"
0036    RET1     1   2
0037    JMP      1 => 0062
0038 => ISNES    0  15      ; "7"
0039    JMP      1 => 0043
0040    KSTR     1  16      ; "contiguous"
0041    RET1     1   2
0042    JMP      1 => 0062
0043 => ISNES    0  17      ; "x"
0044    JMP      1 => 0048
0045    KSTR     1  18      ; "next file"
0046    RET1     1   2
0047    JMP      1 => 0062
0048 => ISNES    0  19      ; "g"
0049    JMP      1 => 0053
0050    KSTR     1  20      ; "global extended header"
0051    RET1     1   2
0052    JMP      1 => 0062
0053 => ISNES    0  21      ; "L"
0054    JMP      1 => 0058
0055    KSTR     1  22      ; "long name"
0056    RET1     1   2
0057    JMP      1 => 0062
0058 => ISNES    0  23      ; "K"
0059    JMP      1 => 0062
0060    KSTR     1  24      ; "long link name"
0061    RET1     1   2
0062 => KSTR     1  25      ; "unknown"
0063    RET1     1   2

-- BYTECODE -- tar.lua:28-41
0001    KSHORT   1   0
0002    KSHORT   2   0
0003    MOV      4   0
0004    TGETS    3   0   0  ; "gsub"
0005    KSTR     5   1      ; "%s"
0006    KSTR     6   2      ; ""
0007    CALL     3   2   4
0008    MOV      0   3
0009    LEN      3   0
0010    KSHORT   4   1
0011    KSHORT   5  -1
0012    FORI     3 => 0029
0013 => GGET     7   3      ; "tonumber"
0014    MOV      9   0
0015    TGETS    8   0   4  ; "sub"
0016    MOV     10   6
0017    MOV     11   6
0018    CALL     8   0   4
0019    CALLM    7   2   0
0020    IST          7
0021    JMP      8 => 0023
0022    JMP      3 => 0029
0023 => KSHORT   8   8
0024    POW      8   8   1
0025    MULVV    8   7   8
0026    ADDVV    2   2   8
0027    ADDVN    1   1   0  ; 1
0028    FORL     3 => 0013
0029 => RET1     2   2

-- BYTECODE -- tar.lua:43-54
0001    KSHORT   1 256
0002    KSHORT   2   1
0003    KSHORT   3 148
0004    KSHORT   4   1
0005    FORI     2 => 0015
0006 => MOV      7   0
0007    TGETS    6   0   0  ; "byte"
0008    MOV      8   5
0009    CALL     6   2   3
0010    IST          6
0011    JMP      7 => 0013
0012    KSHORT   6   0
0013 => ADDVV    1   1   6
0014    FORL     2 => 0006
0015 => KSHORT   2 157
0016    KSHORT   3 500
0017    KSHORT   4   1
0018    FORI     2 => 0028
0019 => MOV      7   0
0020    TGETS    6   0   0  ; "byte"
0021    MOV      8   5
0022    CALL     6   2   3
0023    IST          6
0024    JMP      7 => 0026
0025    KSHORT   6   0
0026 => ADDVV    1   1   6
0027    FORL     2 => 0019
0028 => RET1     1   2

-- BYTECODE -- tar.lua:56-58
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "^[^%z]*"
0004    CALLT    1   3

-- BYTECODE -- tar.lua:60-88
0001    TNEW     1   0
0002    UGET     2   0      ; nullterm
0003    MOV      4   0
0004    TGETS    3   0   1  ; "sub"
0005    KSHORT   5   1
0006    KSHORT   6 100
0007    CALL     3   0   4
0008    CALLM    2   2   0
0009    TSETS    2   1   0  ; "name"
0010    UGET     2   0      ; nullterm
0011    MOV      4   0
0012    TGETS    3   0   1  ; "sub"
0013    KSHORT   5 101
0014    KSHORT   6 108
0015    CALL     3   0   4
0016    CALLM    2   2   0
0017    MOV      3   2
0018    TGETS    2   2   3  ; "gsub"
0019    KSTR     4   4      ; " "
0020    KSTR     5   5      ; ""
0021    CALL     2   2   4
0022    TSETS    2   1   2  ; "mode"
0023    UGET     2   1      ; octal_to_number
0024    UGET     3   0      ; nullterm
0025    MOV      5   0
0026    TGETS    4   0   1  ; "sub"
0027    KSHORT   6 109
0028    KSHORT   7 116
0029    CALL     4   0   4
0030    CALLM    3   0   0
0031    CALLM    2   2   0
0032    TSETS    2   1   6  ; "uid"
0033    UGET     2   1      ; octal_to_number
0034    UGET     3   0      ; nullterm
0035    MOV      5   0
0036    TGETS    4   0   1  ; "sub"
0037    KSHORT   6 117
0038    KSHORT   7 124
0039    CALL     4   0   4
0040    CALLM    3   0   0
0041    CALLM    2   2   0
0042    TSETS    2   1   7  ; "gid"
0043    UGET     2   1      ; octal_to_number
0044    UGET     3   0      ; nullterm
0045    MOV      5   0
0046    TGETS    4   0   1  ; "sub"
0047    KSHORT   6 125
0048    KSHORT   7 136
0049    CALL     4   0   4
0050    CALLM    3   0   0
0051    CALLM    2   2   0
0052    TSETS    2   1   8  ; "size"
0053    UGET     2   1      ; octal_to_number
0054    UGET     3   0      ; nullterm
0055    MOV      5   0
0056    TGETS    4   0   1  ; "sub"
0057    KSHORT   6 137
0058    KSHORT   7 148
0059    CALL     4   0   4
0060    CALLM    3   0   0
0061    CALLM    2   2   0
0062    TSETS    2   1   9  ; "mtime"
0063    UGET     2   1      ; octal_to_number
0064    UGET     3   0      ; nullterm
0065    MOV      5   0
0066    TGETS    4   0   1  ; "sub"
0067    KSHORT   6 149
0068    KSHORT   7 156
0069    CALL     4   0   4
0070    CALLM    3   0   0
0071    CALLM    2   2   0
0072    TSETS    2   1  10  ; "chksum"
0073    UGET     2   2      ; get_typeflag
0074    MOV      4   0
0075    TGETS    3   0   1  ; "sub"
0076    KSHORT   5 157
0077    KSHORT   6 157
0078    CALL     3   0   4
0079    CALLM    2   2   0
0080    TSETS    2   1  11  ; "typeflag"
0081    UGET     2   0      ; nullterm
0082    MOV      4   0
0083    TGETS    3   0   1  ; "sub"
0084    KSHORT   5 158
0085    KSHORT   6 257
0086    CALL     3   0   4
0087    CALLM    2   2   0
0088    TSETS    2   1  12  ; "linkname"
0089    MOV      3   0
0090    TGETS    2   0   1  ; "sub"
0091    KSHORT   4 258
0092    KSHORT   5 263
0093    CALL     2   2   4
0094    TSETS    2   1  13  ; "magic"
0095    MOV      3   0
0096    TGETS    2   0   1  ; "sub"
0097    KSHORT   4 264
0098    KSHORT   5 265
0099    CALL     2   2   4
0100    TSETS    2   1  14  ; "version"
0101    UGET     2   0      ; nullterm
0102    MOV      4   0
0103    TGETS    3   0   1  ; "sub"
0104    KSHORT   5 266
0105    KSHORT   6 297
0106    CALL     3   0   4
0107    CALLM    2   2   0
0108    TSETS    2   1  15  ; "uname"
0109    UGET     2   0      ; nullterm
0110    MOV      4   0
0111    TGETS    3   0   1  ; "sub"
0112    KSHORT   5 298
0113    KSHORT   6 329
0114    CALL     3   0   4
0115    CALLM    2   2   0
0116    TSETS    2   1  16  ; "gname"
0117    UGET     2   1      ; octal_to_number
0118    UGET     3   0      ; nullterm
0119    MOV      5   0
0120    TGETS    4   0   1  ; "sub"
0121    KSHORT   6 330
0122    KSHORT   7 337
0123    CALL     4   0   4
0124    CALLM    3   0   0
0125    CALLM    2   2   0
0126    TSETS    2   1  17  ; "devmajor"
0127    UGET     2   1      ; octal_to_number
0128    UGET     3   0      ; nullterm
0129    MOV      5   0
0130    TGETS    4   0   1  ; "sub"
0131    KSHORT   6 338
0132    KSHORT   7 345
0133    CALL     4   0   4
0134    CALLM    3   0   0
0135    CALLM    2   2   0
0136    TSETS    2   1  18  ; "devminor"
0137    MOV      3   0
0138    TGETS    2   0   1  ; "sub"
0139    KSHORT   4 346
0140    KSHORT   5 500
0141    CALL     2   2   4
0142    TSETS    2   1  19  ; "prefix"
0143    UGET     2   3      ; checksum_header
0144    MOV      3   0
0145    CALL     2   2   2
0146    NOT      2   2
0147    TGETS    3   1  10  ; "chksum"
0148    ISNEV    2   3
0149    JMP      2 => 0153
0150    KPRI     2   1
0151    KSTR     3  20      ; "Failed header checksum"
0152    RET      2   3
0153 => RET1     1   2

-- BYTECODE -- tar.lua:90-172
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "string"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    GGET     2   3      ; "io"
0022    TGETS    2   2   4  ; "open"
0023    MOV      3   0
0024    KSTR     4   5      ; "rb"
0025    CALL     2   2   3
0026    IST          2
0027    JMP      3 => 0033
0028    KPRI     3   0
0029    KSTR     4   6      ; "Error opening file "
0030    MOV      5   0
0031    CAT      4   4   5
0032    RET      3   3
0033 => KNIL     3   6
0034    UGET     7   0      ; fun
0035    TGETS    7   7   7  ; "memoize"
0036    UGET     8   1      ; fs
0037    TGETS    8   8   8  ; "make_dir"
0038    CALL     7   2   2
0039 => LOOP     8 => 0200
0040    KPRI     8   0
0041 => LOOP     9 => 0055
0042    MOV     10   2
0043    TGETS    9   2   9  ; "read"
0044    UGET    11   2      ; blocksize
0045    CALL     9   2   3
0046    MOV      8   9
0047    ISF          8
0048    JMP      9 => 0055
0049    UGET     9   3      ; checksum_header
0050    MOV     10   8
0051    CALL     9   2   2
0052    KSHORT  10 256
0053    ISGE    10   9
0054    JMP      9 => 0041
0055 => IST          8
0056    JMP      9 => 0058
0057    JMP      8 => 0200
0058 => LEN      9   8
0059    UGET    10   2      ; blocksize
0060    ISGE     9  10
0061    JMP      9 => 0066
0062    KPRI     9   0
0063    KSTR     6  10      ; "Invalid block size -- corrupted file?"
0064    MOV      5   9
0065    JMP      8 => 0200
0066 => KPRI     9   0
0067    UGET    10   4      ; read_header_block
0068    MOV     11   8
0069    CALL    10   3   2
0070    MOV      6  11
0071    MOV      9  10
0072    IST          9
0073    JMP     10 => 0076
0074    KPRI     5   1
0075    JMP      8 => 0200
0076 => MOV     11   2
0077    TGETS   10   2   9  ; "read"
0078    GGET    12  11      ; "math"
0079    TGETS   12  12  12  ; "ceil"
0080    TGETS   13   9  13  ; "size"
0081    UGET    14   2      ; blocksize
0082    DIVVV   13  13  14
0083    CALL    12   2   2
0084    UGET    13   2      ; blocksize
0085    MULVV   12  12  13
0086    CALL    10   2   3
0087    MOV     11  10
0088    TGETS   10  10  14  ; "sub"
0089    KSHORT  12   1
0090    TGETS   13   9  13  ; "size"
0091    CALL    10   2   4
0092    TGETS   11   9  15  ; "typeflag"
0093    ISNES   11  16      ; "long name"
0094    JMP     11 => 0100
0095    UGET    11   5      ; nullterm
0096    MOV     12  10
0097    CALL    11   2   2
0098    MOV      3  11
0099    JMP     11 => 0116
0100 => TGETS   11   9  15  ; "typeflag"
0101    ISNES   11  17      ; "long link name"
0102    JMP     11 => 0108
0103    UGET    11   5      ; nullterm
0104    MOV     12  10
0105    CALL    11   2   2
0106    MOV      4  11
0107    JMP     11 => 0116
0108 => ISF          3
0109    JMP     11 => 0112
0110    TSETS    3   9  18  ; "name"
0111    KPRI     3   0
0112 => ISF          4
0113    JMP     11 => 0116
0114    TSETS    4   9  18  ; "name"
0115    KPRI     4   0
0116 => UGET    11   6      ; dir
0117    TGETS   11  11  19  ; "path"
0118    MOV     12   1
0119    TGETS   13   9  18  ; "name"
0120    CALL    11   2   3
0121    UGET    12   1      ; fs
0122    TGETS   12  12  20  ; "absolute_name"
0123    MOV     13  11
0124    CALL    12   2   2
0125    MOV     11  12
0126    TGETS   12   9  15  ; "typeflag"
0127    ISNES   12  21      ; "directory"
0128    JMP     12 => 0138
0129    MOV     12   7
0130    MOV     13  11
0131    CALL    12   3   2
0132    MOV      6  13
0133    MOV      5  12
0134    IST          5
0135    JMP     12 => 0039
0136    JMP      8 => 0200
0137    JMP     12 => 0039
0138 => TGETS   12   9  15  ; "typeflag"
0139    ISNES   12  22      ; "file"
0140    JMP     12 => 0039
0141    UGET    12   6      ; dir
0142    TGETS   12  12  23  ; "dir_name"
0143    MOV     13  11
0144    CALL    12   2   2
0145    ISEQS   12  24      ; ""
0146    JMP     13 => 0155
0147    MOV     13   7
0148    MOV     14  12
0149    CALL    13   3   2
0150    MOV      6  14
0151    MOV      5  13
0152    IST          5
0153    JMP     13 => 0155
0154    JMP      8 => 0200
0155 => KPRI    13   0
0156    GGET    14   3      ; "io"
0157    TGETS   14  14   4  ; "open"
0158    MOV     15  11
0159    KSTR    16  25      ; "wb"
0160    CALL    14   3   3
0161    MOV      6  15
0162    MOV     13  14
0163    IST         13
0164    JMP     14 => 0167
0165    KPRI     5   0
0166    JMP      8 => 0200
0167 => MOV     15  13
0168    TGETS   14  13  26  ; "write"
0169    MOV     16  10
0170    CALL    14   1   3
0171    MOV     15  13
0172    TGETS   14  13  27  ; "close"
0173    CALL    14   1   2
0174    UGET    14   1      ; fs
0175    TGETS   14  14  28  ; "set_time"
0176    MOV     15  11
0177    TGETS   16   9  29  ; "mtime"
0178    CALL    14   1   3
0179    TGETS   14   9  30  ; "mode"
0180    MOV     15  14
0181    TGETS   14  14  31  ; "match"
0182    KSTR    16  32      ; "[75]"
0183    CALL    14   2   3
0184    ISF         14
0185    JMP     15 => 0193
0186    UGET    14   1      ; fs
0187    TGETS   14  14  33  ; "set_permissions"
0188    MOV     15  11
0189    KSTR    16  34      ; "exec"
0190    KSTR    17  35      ; "all"
0191    CALL    14   1   4
0192    JMP     14 => 0039
0193 => UGET    14   1      ; fs
0194    TGETS   14  14  33  ; "set_permissions"
0195    MOV     15  11
0196    KSTR    16   9      ; "read"
0197    KSTR    17  35      ; "all"
0198    CALL    14   1   4
0199    JMP      8 => 0039
0200 => MOV      9   2
0201    TGETS    8   2  27  ; "close"
0202    CALL     8   1   2
0203    MOV      8   5
0204    MOV      9   6
0205    RET      8   3

-- BYTECODE -- tar.lua:0-175
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fun"
0010    CALL     3   2   2
0011    KSHORT   4 512
0012    FNEW     5   4      ; tar.lua:11
0013    FNEW     6   5      ; tar.lua:28
0014    FNEW     7   6      ; tar.lua:43
0015    FNEW     8   7      ; tar.lua:56
0016    FNEW     9   8      ; tar.lua:60
0017    FNEW    10  10      ; tar.lua:90
0018    TSETS   10   0   9  ; "untar"
0019    UCLO     0 => 0020
0020 => RET1     0   2

-----------------------
-- BYTECODE -- patch.lua:24-24
0001    RET0     0   1

-- BYTECODE -- patch.lua:25-25
0001    RET0     0   1

-- BYTECODE -- patch.lua:26-26
0001    UGET     1   0      ; io
0002    TGETS    1   1   0  ; "stderr"
0003    MOV      2   1
0004    TGETS    1   1   1  ; "write"
0005    MOV      3   0
0006    KSTR     4   2      ; "\n"
0007    CAT      3   3   4
0008    CALL     1   1   3
0009    RET0     0   1

-- BYTECODE -- patch.lua:29-31
0001    MOV      3   0
0002    TGETS    2   0   0  ; "sub"
0003    KSHORT   4   1
0004    LEN      5   1
0005    CALL     2   2   4
0006    ISEQV    2   1
0007    JMP      2 => 0010
0008    KPRI     2   1
0009    JMP      3 => 0011
0010 => KPRI     2   2
0011 => RET1     2   2

-- BYTECODE -- patch.lua:34-36
0001    LEN      2   0
0002    LEN      3   1
0003    ISGT     3   2
0004    JMP      2 => 0014
0005    MOV      3   0
0006    TGETS    2   0   0  ; "sub"
0007    LEN      4   0
0008    LEN      5   1
0009    SUBVV    4   4   5
0010    ADDVN    4   4   0  ; 1
0011    CALL     2   2   3
0012    ISEQV    2   1
0013    JMP      2 => 0016
0014 => KPRI     2   1
0015    JMP      3 => 0017
0016 => KPRI     2   2
0017 => RET1     2   2

-- BYTECODE -- patch.lua:39-41
0001    MOV      2   0
0002    TGETS    1   0   0  ; "gsub"
0003    KSTR     3   1      ; "[\r\n]+$"
0004    KSTR     4   2      ; ""
0005    CALLT    1   4

-- BYTECODE -- patch.lua:44-48
0001    TNEW     1   0
0002    GGET     2   0      ; "pairs"
0003    MOV      3   0
0004    CALL     2   4   2
0005    ISNEXT   5 => 0007
0006 => TSETV    6   1   5
0007 => ITERN    5   3   3
0008    ITERL    5 => 0006
0009    RET1     1   2

-- BYTECODE -- patch.lua:50-55
0001    UGET     1   0      ; io
0002    TGETS    1   1   0  ; "open"
0003    MOV      2   0
0004    CALL     1   2   2
0005    ISNEP    1   0
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => ISF          1
0011    JMP      3 => 0015
0012    MOV      4   1
0013    TGETS    3   1   1  ; "close"
0014    CALL     3   1   2
0015 => RET1     2   2

-- BYTECODE -- patch.lua:56-56
0001    KPRI     0   2
0002    RET1     0   2

-- BYTECODE -- patch.lua:64-72
0001    TGETS    2   0   0  ; "eof"
0002    ISF          2
0003    JMP      3 => 0006
0004    KPRI     2   0
0005    RET1     2   2
0006 => TGETS    2   0   1  ; "str"
0007    MOV      3   2
0008    TGETS    2   2   2  ; "sub"
0009    TGETS    4   0   3  ; "at"
0010    TGETS    5   0   3  ; "at"
0011    ADDVV    5   5   1
0012    SUBVN    5   5   0  ; 1
0013    CALL     2   2   4
0014    TGETS    3   0   3  ; "at"
0015    ADDVV    3   3   1
0016    TSETS    3   0   3  ; "at"
0017    TGETS    3   0   3  ; "at"
0018    TGETS    4   0   4  ; "len"
0019    ISGE     4   3
0020    JMP      3 => 0023
0021    KPRI     3   2
0022    TSETS    3   0   0  ; "eof"
0023 => RET1     2   2

-- BYTECODE -- patch.lua:73-75
0001    KPRI     1   2
0002    TSETS    1   0   0  ; "eof"
0003    RET0     0   1

-- BYTECODE -- patch.lua:58-77
0001    TDUP     1   0
0002    TSETS    0   1   1  ; "str"
0003    LEN      2   0
0004    TSETS    2   1   2  ; "len"
0005    FNEW     2   3      ; patch.lua:64
0006    TSETS    2   1   4  ; "read"
0007    FNEW     2   5      ; patch.lua:73
0008    TSETS    2   1   6  ; "close"
0009    UCLO     0 => 0010
0010 => RET1     1   2

-- BYTECODE -- patch.lua:92-118
0001    KNIL     0   1
0002 => LOOP     2 => 0040
0003    UGET     2   0      ; buffer
0004    MOV      3   2
0005    TGETS    2   2   0  ; "match"
0006    KSTR     4   1      ; "()([\r\n].)"
0007    UGET     5   1      ; pos_beg
0008    CALL     2   3   4
0009    MOV      1   3
0010    MOV      0   2
0011    IST          0
0012    JMP      2 => 0040
0013    UGET     2   2      ; f
0014    IST          2
0015    JMP      2 => 0018
0016    JMP      2 => 0040
0017    JMP      2 => 0002
0018 => UGET     2   2      ; f
0019    ISF          2
0020    JMP      3 => 0002
0021    UGET     2   2      ; f
0022    MOV      3   2
0023    TGETS    2   2   2  ; "read"
0024    UGET     4   3      ; CHUNK_SIZE
0025    CALL     2   2   3
0026    ISF          2
0027    JMP      3 => 0038
0028    UGET     3   0      ; buffer
0029    MOV      4   3
0030    TGETS    3   3   3  ; "sub"
0031    UGET     5   1      ; pos_beg
0032    CALL     3   2   3
0033    MOV      4   2
0034    CAT      3   3   4
0035    USETV    0   3      ; buffer
0036    USETN    1   0      ; pos_beg ; 1
0037    JMP      3 => 0002
0038 => USETP    2   0      ; f
0039    JMP      2 => 0002
0040 => IST          0
0041    JMP      2 => 0045
0042    UGET     2   0      ; buffer
0043    LEN      0   2
0044    JMP      2 => 0048
0045 => ISNES    1   4      ; "\r\n"
0046    JMP      2 => 0048
0047    ADDVN    0   0   0  ; 1
0048 => UGET     2   0      ; buffer
0049    MOV      3   2
0050    TGETS    2   2   3  ; "sub"
0051    UGET     4   1      ; pos_beg
0052    MOV      5   0
0053    CALL     2   2   4
0054    ADDVN    3   0   0  ; 1
0055    USETV    1   3      ; pos_beg
0056    LEN      3   2
0057    KSHORT   4   0
0058    ISGE     4   3
0059    JMP      3 => 0061
0060    RET1     2   2
0061 => RET0     0   1

-- BYTECODE -- patch.lua:88-119
0001    KSHORT   1 1024
0002    KSTR     2   0      ; ""
0003    KSHORT   3   1
0004    FNEW     4   1      ; patch.lua:92
0005    UCLO     0 => 0006
0006 => RET1     4   2

-- BYTECODE -- patch.lua:121-127
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "^@@ %-(%d+),(%d+) %+(%d+),(%d+)"
0004    CALL     1   5   3
0005    IST          1
0006    JMP      5 => 0014
0007    MOV      6   0
0008    TGETS    5   0   0  ; "match"
0009    KSTR     7   2      ; "^@@ %-(%d+) %+(%d+),(%d+)"
0010    CALL     5   4   3
0011    MOV      4   7
0012    MOV      3   6
0013    MOV      1   5
0014 => IST          1
0015    JMP      5 => 0023
0016    MOV      6   0
0017    TGETS    5   0   0  ; "match"
0018    KSTR     7   3      ; "^@@ %-(%d+),(%d+) %+(%d+)"
0019    CALL     5   4   3
0020    MOV      3   7
0021    MOV      2   6
0022    MOV      1   5
0023 => IST          1
0024    JMP      5 => 0031
0025    MOV      6   0
0026    TGETS    5   0   0  ; "match"
0027    KSTR     7   4      ; "^@@ %-(%d+) %+(%d+)"
0028    CALL     5   3   3
0029    MOV      3   6
0030    MOV      1   5
0031 => MOV      5   1
0032    MOV      6   2
0033    MOV      7   3
0034    MOV      8   4
0035    RET      5   5

-- BYTECODE -- patch.lua:129-131
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "[^0-9]1969[^0-9]"
0004    CALL     1   2   3
0005    IST          1
0006    JMP      2 => 0011
0007    MOV      2   0
0008    TGETS    1   0   0  ; "match"
0009    KSTR     3   2      ; "[^0-9]1970[^0-9]"
0010    CALL     1   2   3
0011 => RET1     1   2

-- BYTECODE -- patch.lua:133-373
0001    KSTR     2   0      ; "header"
0002    KPRI     3   2
0003    TDUP     4   1
0004    TDUP     5   2
0005    TNEW     6   0
0006    TSETS    6   5   3  ; "source"
0007    TNEW     6   0
0008    TSETS    6   5   4  ; "target"
0009    TNEW     6   0
0010    TSETS    6   5   5  ; "epoch"
0011    TNEW     6   0
0012    TSETS    6   5   6  ; "hunks"
0013    TNEW     6   0
0014    TSETS    6   5   7  ; "fileends"
0015    TNEW     6   0
0016    TSETS    6   5   8  ; "hunkends"
0017    KSHORT   6   0
0018    KSHORT   7   0
0019    TDUP     8   9
0020    TNEW     9   0
0021    TSETS    9   8  10  ; "text"
0022    TDUP     9  11
0023    UGET    10   0      ; info
0024    UGET    11   1      ; format
0025    KSTR    12  12      ; "reading patch %s"
0026    MOV     13   0
0027    CALL    11   0   3
0028    CALLM   10   1   0
0029    KPRI    10   0
0030    ISF          1
0031    JMP     11 => 0037
0032    UGET    11   2      ; string_as_file
0033    MOV     12   1
0034    CALL    11   2   2
0035    MOV     10  11
0036    JMP     11 => 0051
0037 => ISNES    0  13      ; "-"
0038    JMP     11 => 0043
0039    UGET    11   3      ; io
0040    TGETS   11  11  14  ; "stdin"
0041    ISTC    10  11
0042    JMP     12 => 0051
0043 => GGET    11  15      ; "assert"
0044    UGET    12   3      ; io
0045    TGETS   12  12  16  ; "open"
0046    MOV     13   0
0047    KSTR    14  17      ; "rb"
0048    CALL    12   0   3
0049    CALLM   11   2   0
0050    MOV     10  11
0051 => KSHORT  11   0
0052    UGET    12   4      ; file_lines
0053    MOV     13  10
0054    CALL    12   4   2
0055    JMP     15 => 0520
0056 => ADDVN   11  11   0  ; 1
0057    ISNES    2   0      ; "header"
0058    JMP     16 => 0066
0059    UGET    16   5      ; startswith
0060    MOV     17  15
0061    KSTR    18  18      ; "--- "
0062    CALL    16   2   3
0063    ISF         16
0064    JMP     17 => 0066
0065    KSTR     2  19      ; "filenames"
0066 => ISNES    2  20      ; "hunkbody"
0067    JMP     16 => 0258
0068    MOV     17  15
0069    TGETS   16  15  21  ; "match"
0070    KSTR    18  22      ; "^[\r\n]*$"
0071    CALL    16   2   3
0072    ISF         16
0073    JMP     17 => 0077
0074    KSTR    16  23      ; " "
0075    MOV     17  15
0076    CAT     15  16  17
0077 => MOV     17  15
0078    TGETS   16  15  21  ; "match"
0079    KSTR    18  24      ; "^[- +\]"
0080    CALL    16   2   3
0081    ISF         16
0082    JMP     17 => 0153
0083    TGETS   16   5   8  ; "hunkends"
0084    TGETV   16  16   6
0085    UGET    17   6      ; endswith
0086    MOV     18  15
0087    KSTR    19  25      ; "\r\n"
0088    CALL    17   2   3
0089    ISF         17
0090    JMP     18 => 0095
0091    TGETS   17  16  26  ; "crlf"
0092    ADDVN   17  17   0  ; 1
0093    TSETS   17  16  26  ; "crlf"
0094    JMP     17 => 0114
0095 => UGET    17   6      ; endswith
0096    MOV     18  15
0097    KSTR    19  27      ; "\n"
0098    CALL    17   2   3
0099    ISF         17
0100    JMP     18 => 0105
0101    TGETS   17  16  28  ; "lf"
0102    ADDVN   17  17   0  ; 1
0103    TSETS   17  16  28  ; "lf"
0104    JMP     17 => 0114
0105 => UGET    17   6      ; endswith
0106    MOV     18  15
0107    KSTR    19  29      ; "\r"
0108    CALL    17   2   3
0109    ISF         17
0110    JMP     18 => 0114
0111    TGETS   17  16  30  ; "cr"
0112    ADDVN   17  17   0  ; 1
0113    TSETS   17  16  30  ; "cr"
0114 => UGET    17   5      ; startswith
0115    MOV     18  15
0116    KSTR    19  13      ; "-"
0117    CALL    17   2   3
0118    ISF         17
0119    JMP     18 => 0124
0120    TGETS   17   9  31  ; "linessrc"
0121    ADDVN   17  17   0  ; 1
0122    TSETS   17   9  31  ; "linessrc"
0123    JMP     17 => 0147
0124 => UGET    17   5      ; startswith
0125    MOV     18  15
0126    KSTR    19  32      ; "+"
0127    CALL    17   2   3
0128    ISF         17
0129    JMP     18 => 0134
0130    TGETS   17   9  33  ; "linestgt"
0131    ADDVN   17  17   0  ; 1
0132    TSETS   17   9  33  ; "linestgt"
0133    JMP     17 => 0147
0134 => UGET    17   5      ; startswith
0135    MOV     18  15
0136    KSTR    19  34      ; "\"
0137    CALL    17   2   3
0138    ISF         17
0139    JMP     18 => 0141
0140    JMP     17 => 0147
0141 => TGETS   17   9  31  ; "linessrc"
0142    ADDVN   17  17   0  ; 1
0143    TSETS   17   9  31  ; "linessrc"
0144    TGETS   17   9  33  ; "linestgt"
0145    ADDVN   17  17   0  ; 1
0146    TSETS   17   9  33  ; "linestgt"
0147 => UGET    17   7      ; table
0148    TGETS   17  17  35  ; "insert"
0149    TGETS   18   8  10  ; "text"
0150    MOV     19  15
0151    CALL    17   1   3
0152    JMP     16 => 0177
0153 => UGET    16   8      ; warning
0154    UGET    17   1      ; format
0155    KSTR    18  36      ; "invalid hunk no.%d at %d for target file"~
0156    MOV     19   7
0157    MOV     20  11
0158    TGETS   21   5   4  ; "target"
0159    TGETV   21  21   6
0160    CALL    17   0   5
0161    CALLM   16   1   0
0162    UGET    16   7      ; table
0163    TGETS   16  16  35  ; "insert"
0164    TGETS   17   5   6  ; "hunks"
0165    TGETV   17  17   6
0166    UGET    18   9      ; table_copy
0167    MOV     19   8
0168    CALL    18   0   2
0169    CALLM   16   1   1
0170    TGETS   16   5   6  ; "hunks"
0171    TGETV   16  16   6
0172    TGETV   16  16   7
0173    KPRI    17   2
0174    TSETS   17  16  37  ; "invalid"
0175    KPRI     3   1
0176    KSTR     2  38      ; "hunkskip"
0177 => TGETS   16   9  31  ; "linessrc"
0178    TGETS   17   8  31  ; "linessrc"
0179    ISLT    17  16
0180    JMP     16 => 0185
0181    TGETS   16   9  33  ; "linestgt"
0182    TGETS   17   8  33  ; "linestgt"
0183    ISGE    17  16
0184    JMP     16 => 0209
0185 => UGET    16   8      ; warning
0186    UGET    17   1      ; format
0187    KSTR    18  39      ; "extra hunk no.%d lines at %d for target "~
0188    MOV     19   7
0189    MOV     20  11
0190    TGETS   21   5   4  ; "target"
0191    TGETV   21  21   6
0192    CALL    17   0   5
0193    CALLM   16   1   0
0194    UGET    16   7      ; table
0195    TGETS   16  16  35  ; "insert"
0196    TGETS   17   5   6  ; "hunks"
0197    TGETV   17  17   6
0198    UGET    18   9      ; table_copy
0199    MOV     19   8
0200    CALL    18   0   2
0201    CALLM   16   1   1
0202    TGETS   16   5   6  ; "hunks"
0203    TGETV   16  16   6
0204    TGETV   16  16   7
0205    KPRI    17   2
0206    TSETS   17  16  37  ; "invalid"
0207    KSTR     2  38      ; "hunkskip"
0208    JMP     16 => 0258
0209 => TGETS   16   8  31  ; "linessrc"
0210    TGETS   17   9  31  ; "linessrc"
0211    ISNEV   16  17
0212    JMP     16 => 0258
0213    TGETS   16   8  33  ; "linestgt"
0214    TGETS   17   9  33  ; "linestgt"
0215    ISNEV   16  17
0216    JMP     16 => 0258
0217    UGET    16   7      ; table
0218    TGETS   16  16  35  ; "insert"
0219    TGETS   17   5   6  ; "hunks"
0220    TGETV   17  17   6
0221    UGET    18   9      ; table_copy
0222    MOV     19   8
0223    CALL    18   0   2
0224    CALLM   16   1   1
0225    KSTR     2  38      ; "hunkskip"
0226    TGETS   16   5   8  ; "hunkends"
0227    TGETV   16  16   6
0228    TGETS   17  16  30  ; "cr"
0229    ISEQN   17   1      ; 0
0230    JMP     17 => 0233
0231    KSHORT  17   1
0232    JMP     18 => 0234
0233 => KSHORT  17   0
0234 => TGETS   18  16  26  ; "crlf"
0235    ISEQN   18   1      ; 0
0236    JMP     18 => 0239
0237    KSHORT  18   1
0238    JMP     19 => 0240
0239 => KSHORT  18   0
0240 => ADDVV   17  17  18
0241    TGETS   18  16  28  ; "lf"
0242    ISEQN   18   1      ; 0
0243    JMP     18 => 0246
0244    KSHORT  18   1
0245    JMP     19 => 0247
0246 => KSHORT  18   0
0247 => ADDVV   17  17  18
0248    KSHORT  18   1
0249    ISGE    18  17
0250    JMP     17 => 0258
0251    UGET    17   8      ; warning
0252    UGET    18   1      ; format
0253    KSTR    19  40      ; "inconsistent line ends in patch hunks fo"~
0254    TGETS   20   5   3  ; "source"
0255    TGETV   20  20   6
0256    CALL    18   0   3
0257    CALLM   17   1   0
0258 => ISNES    2  38      ; "hunkskip"
0259    JMP     16 => 0292
0260    UGET    16  10      ; match_linerange
0261    MOV     17  15
0262    CALL    16   2   2
0263    ISF         16
0264    JMP     17 => 0267
0265    KSTR     2  41      ; "hunkhead"
0266    JMP     16 => 0292
0267 => UGET    16   5      ; startswith
0268    MOV     17  15
0269    KSTR    18  18      ; "--- "
0270    CALL    16   2   3
0271    ISF         16
0272    JMP     17 => 0292
0273    KSTR     2  19      ; "filenames"
0274    UGET    16  11      ; debugmode
0275    ISF         16
0276    JMP     17 => 0292
0277    TGETS   16   5   3  ; "source"
0278    LEN     16  16
0279    KSHORT  17   0
0280    ISGE    17  16
0281    JMP     16 => 0292
0282    UGET    16  12      ; debug
0283    UGET    17   1      ; format
0284    KSTR    18  42      ; "- %2d hunks for %s"
0285    TGETS   19   5   6  ; "hunks"
0286    TGETV   19  19   6
0287    LEN     19  19
0288    TGETS   20   5   3  ; "source"
0289    TGETV   20  20   6
0290    CALL    17   0   4
0291    CALLM   16   1   0
0292 => KPRI    16   0
0293    ISNES    2  19      ; "filenames"
0294    JMP     17 => 0464
0295    UGET    17   5      ; startswith
0296    MOV     18  15
0297    KSTR    19  18      ; "--- "
0298    CALL    17   2   3
0299    ISF         17
0300    JMP     18 => 0352
0301    UGET    17  13      ; fun
0302    TGETS   17  17  43  ; "contains"
0303    TGETS   18   5   3  ; "source"
0304    MOV     19   6
0305    CALL    17   2   3
0306    ISF         17
0307    JMP     18 => 0322
0308    KPRI     3   1
0309    UGET    17   8      ; warning
0310    UGET    18   1      ; format
0311    KSTR    19  44      ; "skipping invalid patch for %s"
0312    TGETS   20   5   3  ; "source"
0313    ADDVN   21   6   0  ; 1
0314    TGETV   20  20  21
0315    CALL    18   0   3
0316    CALLM   17   1   0
0317    UGET    17   7      ; table
0318    TGETS   17  17  45  ; "remove"
0319    TGETS   18   5   3  ; "source"
0320    ADDVN   19   6   0  ; 1
0321    CALL    17   1   3
0322 => MOV     18  15
0323    TGETS   17  15  21  ; "match"
0324    KSTR    19  46      ; "^%-%-%- ([^ \t\r\n]+)(.*)"
0325    CALL    17   3   3
0326    IST         17
0327    JMP     19 => 0337
0328    KPRI     3   1
0329    UGET    19   8      ; warning
0330    UGET    20   1      ; format
0331    KSTR    21  47      ; "skipping invalid filename at line %d"
0332    ADDVN   22  11   0  ; 1
0333    CALL    20   0   3
0334    CALLM   19   1   0
0335    KSTR     2   0      ; "header"
0336    JMP     19 => 0464
0337 => UGET    19  14      ; match_epoch
0338    MOV     20  18
0339    CALL    19   2   2
0340    ISF         19
0341    JMP     20 => 0346
0342    TGETS   19   5   5  ; "epoch"
0343    ADDVN   20   6   0  ; 1
0344    KPRI    21   2
0345    TSETV   21  19  20
0346 => UGET    19   7      ; table
0347    TGETS   19  19  35  ; "insert"
0348    TGETS   20   5   3  ; "source"
0349    MOV     21  17
0350    CALL    19   1   3
0351    JMP     17 => 0464
0352 => UGET    17   5      ; startswith
0353    MOV     18  15
0354    KSTR    19  48      ; "+++ "
0355    CALL    17   2   3
0356    IST         17
0357    JMP     17 => 0385
0358    UGET    17  13      ; fun
0359    TGETS   17  17  43  ; "contains"
0360    TGETS   18   5   3  ; "source"
0361    MOV     19   6
0362    CALL    17   2   3
0363    ISF         17
0364    JMP     18 => 0380
0365    KPRI     3   1
0366    UGET    17   8      ; warning
0367    UGET    18   1      ; format
0368    KSTR    19  49      ; "skipping invalid patch with no target fo"~
0369    TGETS   20   5   3  ; "source"
0370    ADDVN   21   6   0  ; 1
0371    TGETV   20  20  21
0372    CALL    18   0   3
0373    CALLM   17   1   0
0374    UGET    17   7      ; table
0375    TGETS   17  17  45  ; "remove"
0376    TGETS   18   5   3  ; "source"
0377    ADDVN   19   6   0  ; 1
0378    CALL    17   1   3
0379    JMP     17 => 0383
0380 => UGET    17   8      ; warning
0381    KSTR    18  50      ; "skipping invalid target patch"
0382    CALL    17   1   2
0383 => KSTR     2   0      ; "header"
0384    JMP     17 => 0464
0385 => UGET    17  13      ; fun
0386    TGETS   17  17  43  ; "contains"
0387    TGETS   18   5   4  ; "target"
0388    MOV     19   6
0389    CALL    17   2   3
0390    ISF         17
0391    JMP     18 => 0412
0392    KPRI     3   1
0393    UGET    17   8      ; warning
0394    UGET    18   1      ; format
0395    KSTR    19  51      ; "skipping invalid patch - double target a"~
0396    ADDVN   20  11   0  ; 1
0397    CALL    18   0   3
0398    CALLM   17   1   0
0399    UGET    17   7      ; table
0400    TGETS   17  17  45  ; "remove"
0401    TGETS   18   5   3  ; "source"
0402    ADDVN   19   6   0  ; 1
0403    CALL    17   1   3
0404    UGET    17   7      ; table
0405    TGETS   17  17  45  ; "remove"
0406    TGETS   18   5   4  ; "target"
0407    ADDVN   19   6   0  ; 1
0408    CALL    17   1   3
0409    SUBVN    6   6   0  ; 1
0410    KSTR     2   0      ; "header"
0411    JMP     17 => 0464
0412 => KSTR    17  52      ; "^%+%+%+ ([^ \t\r\n]+)(.*)$"
0413    MOV     19  15
0414    TGETS   18  15  21  ; "match"
0415    MOV     20  17
0416    CALL    18   3   3
0417    IST         18
0418    JMP     20 => 0428
0419    KPRI     3   1
0420    UGET    20   8      ; warning
0421    UGET    21   1      ; format
0422    KSTR    22  53      ; "skipping invalid patch - no target filen"~
0423    ADDVN   23  11   0  ; 1
0424    CALL    21   0   3
0425    CALLM   20   1   0
0426    KSTR     2   0      ; "header"
0427    JMP     20 => 0464
0428 => UGET    20   7      ; table
0429    TGETS   20  20  35  ; "insert"
0430    TGETS   21   5   4  ; "target"
0431    MOV     22  18
0432    CALL    20   1   3
0433    ADDVN    6   6   0  ; 1
0434    UGET    20  14      ; match_epoch
0435    MOV     21  19
0436    CALL    20   2   2
0437    ISF         20
0438    JMP     21 => 0442
0439    TGETS   20   5   5  ; "epoch"
0440    KPRI    21   2
0441    TSETV   21  20   6
0442 => KSHORT   7   0
0443    UGET    20   7      ; table
0444    TGETS   20  20  35  ; "insert"
0445    TGETS   21   5   6  ; "hunks"
0446    TNEW    22   0
0447    CALL    20   1   3
0448    UGET    20   7      ; table
0449    TGETS   20  20  35  ; "insert"
0450    TGETS   21   5   8  ; "hunkends"
0451    UGET    22   9      ; table_copy
0452    MOV     23   4
0453    CALL    22   0   2
0454    CALLM   20   1   1
0455    UGET    20   7      ; table
0456    TGETS   20  20  35  ; "insert"
0457    TGETS   21   5   7  ; "fileends"
0458    UGET    22   9      ; table_copy
0459    MOV     23   4
0460    CALL    22   0   2
0461    CALLM   20   1   1
0462    KSTR     2  41      ; "hunkhead"
0463    KPRI    16   2
0464 => IST         16
0465    JMP     17 => 0520
0466    ISNES    2  41      ; "hunkhead"
0467    JMP     17 => 0520
0468    UGET    17  10      ; match_linerange
0469    MOV     18  15
0470    CALL    17   5   2
0471    IST         17
0472    JMP     21 => 0490
0473    UGET    21  13      ; fun
0474    TGETS   21  21  43  ; "contains"
0475    TGETS   22   5   6  ; "hunks"
0476    SUBVN   23   6   0  ; 1
0477    CALL    21   2   3
0478    IST         21
0479    JMP     21 => 0488
0480    KPRI     3   1
0481    UGET    21   8      ; warning
0482    UGET    22   1      ; format
0483    KSTR    23  54      ; "skipping invalid patch with no hunks for"~
0484    TGETS   24   5   4  ; "target"
0485    TGETV   24  24   6
0486    CALL    22   0   3
0487    CALLM   21   1   0
0488 => KSTR     2   0      ; "header"
0489    JMP     21 => 0520
0490 => GGET    21  56      ; "tonumber"
0491    MOV     22  17
0492    CALL    21   2   2
0493    TSETS   21   8  55  ; "startsrc"
0494    GGET    21  56      ; "tonumber"
0495    ISTC    22  18
0496    JMP     22 => 0498
0497    KSHORT  22   1
0498 => CALL    21   2   2
0499    TSETS   21   8  31  ; "linessrc"
0500    GGET    21  56      ; "tonumber"
0501    MOV     22  19
0502    CALL    21   2   2
0503    TSETS   21   8  57  ; "starttgt"
0504    GGET    21  56      ; "tonumber"
0505    ISTC    22  20
0506    JMP     22 => 0508
0507    KSHORT  22   1
0508 => CALL    21   2   2
0509    TSETS   21   8  33  ; "linestgt"
0510    KPRI    21   1
0511    TSETS   21   8  37  ; "invalid"
0512    TNEW    21   0
0513    TSETS   21   8  10  ; "text"
0514    KSHORT  21   0
0515    TSETS   21   9  31  ; "linessrc"
0516    KSHORT  21   0
0517    TSETS   21   9  33  ; "linestgt"
0518    KSTR     2  20      ; "hunkbody"
0519    ADDVN    7   7   0  ; 1
0520 => ITERC   15   2   3
0521    ITERL   15 => 0056
0522    ISEQS    2  38      ; "hunkskip"
0523    JMP     12 => 0532
0524    UGET    12   8      ; warning
0525    UGET    13   1      ; format
0526    KSTR    14  58      ; "patch file incomplete - %s"
0527    MOV     15   0
0528    CALL    13   0   3
0529    CALLM   12   1   0
0530    KPRI     3   1
0531    JMP     12 => 0550
0532 => UGET    12  11      ; debugmode
0533    ISF         12
0534    JMP     13 => 0550
0535    TGETS   12   5   3  ; "source"
0536    LEN     12  12
0537    KSHORT  13   0
0538    ISGE    13  12
0539    JMP     12 => 0550
0540    UGET    12  12      ; debug
0541    UGET    13   1      ; format
0542    KSTR    14  42      ; "- %2d hunks for %s"
0543    TGETS   15   5   6  ; "hunks"
0544    TGETV   15  15   6
0545    LEN     15  15
0546    TGETS   16   5   3  ; "source"
0547    TGETV   16  16   6
0548    CALL    13   0   4
0549    CALLM   12   1   0
0550 => KSHORT  12   0
0551    GGET    13  59      ; "ipairs"
0552    TGETS   14   5   6  ; "hunks"
0553    CALL    13   4   2
0554    JMP     16 => 0557
0555 => LEN     18  17
0556    ADDVV   12  12  18
0557 => ITERC   16   3   3
0558    ITERL   16 => 0555
0559    UGET    13   0      ; info
0560    UGET    14   1      ; format
0561    KSTR    15  60      ; "total files: %d  total hunks: %d"
0562    TGETS   16   5   3  ; "source"
0563    LEN     16  16
0564    MOV     17  12
0565    CALL    14   0   4
0566    CALLM   13   1   0
0567    MOV     14  10
0568    TGETS   13  10  61  ; "close"
0569    CALL    13   1   2
0570    MOV     13   5
0571    MOV     14   3
0572    RET     13   3

-- BYTECODE -- patch.lua:375-415
0001    KSHORT   3   0
0002    KSHORT   4   2
0003    KSHORT   5   1
0004    FORI     3 => 0101
0005 => TGETS    7   1   0  ; "startsrc"
0006    KSHORT   8   0
0007    LEN      9   0
0008    KSHORT  10   1
0009    FORI     8 => 0100
0010 => KPRI    12   2
0011    MOV     13   7
0012    GGET    14   1      ; "ipairs"
0013    TGETS   15   1   2  ; "text"
0014    CALL    14   4   2
0015    JMP     17 => 0052
0016 => ISGE     6  17
0017    JMP     19 => 0052
0018    UGET    19   0      ; startswith
0019    MOV     20  18
0020    KSTR    21   3      ; " "
0021    CALL    19   2   3
0022    IST         19
0023    JMP     20 => 0030
0024    UGET    19   0      ; startswith
0025    MOV     20  18
0026    KSTR    21   4      ; "-"
0027    CALL    19   2   3
0028    ISF         19
0029    JMP     20 => 0052
0030 => TGETV   19   0   7
0031    ADDVN    7   7   0  ; 1
0032    ISF         19
0033    JMP     20 => 0037
0034    LEN     20  19
0035    ISNEN   20   1      ; 0
0036    JMP     20 => 0039
0037 => KPRI    12   1
0038    JMP     14 => 0054
0039 => UGET    20   1      ; endlstrip
0040    MOV     21  19
0041    CALL    20   2   2
0042    UGET    21   1      ; endlstrip
0043    MOV     23  18
0044    TGETS   22  18   5  ; "sub"
0045    KSHORT  24   2
0046    CALL    22   0   3
0047    CALLM   21   2   0
0048    ISEQV   20  21
0049    JMP     20 => 0052
0050    KPRI    12   1
0051    JMP     14 => 0054
0052 => ITERC   17   3   3
0053    ITERL   17 => 0016
0054 => ISF         12
0055    JMP     14 => 0098
0056    TGETS   14   1   0  ; "startsrc"
0057    SUBVV   14  13  14
0058    SUBVV   14  14   6
0059    ISEQN   14   1      ; 0
0060    JMP     15 => 0076
0061    UGET    15   2      ; warning
0062    UGET    16   3      ; format
0063    KSTR    17   6      ; "Hunk %d found at offset %d%s..."
0064    MOV     18   2
0065    MOV     19  14
0066    ISNEN    6   1      ; 0
0067    JMP     20 => 0070
0068    KSTR    20   7      ; ""
0069    JMP     21 => 0074
0070 => UGET    20   3      ; format
0071    KSTR    21   8      ; " (fuzz %d)"
0072    MOV     22   6
0073    CALL    20   2   3
0074 => CALL    16   0   5
0075    CALLM   15   1   0
0076 => TSETS   13   1   0  ; "startsrc"
0077    TGETS   15   1   9  ; "starttgt"
0078    ADDVV   15  15  14
0079    TSETS   15   1   9  ; "starttgt"
0080    KSHORT  15   1
0081    MOV     16   6
0082    KSHORT  17   1
0083    FORI    15 => 0096
0084 => UGET    19   4      ; table
0085    TGETS   19  19  10  ; "remove"
0086    TGETS   20   1   2  ; "text"
0087    KSHORT  21   1
0088    CALL    19   1   3
0089    UGET    19   4      ; table
0090    TGETS   19  19  10  ; "remove"
0091    TGETS   20   1   2  ; "text"
0092    TGETS   21   1   2  ; "text"
0093    LEN     21  21
0094    CALL    19   1   3
0095    FORL    15 => 0084
0096 => KPRI    15   2
0097    RET1    15   2
0098 => MOV      7  11
0099    FORL     8 => 0010
0100 => FORL     3 => 0005
0101 => KPRI     3   1
0102    RET1     3   2

-- BYTECODE -- patch.lua:417-428
0001    GGET     1   0      ; "assert"
0002    UGET     2   0      ; io
0003    TGETS    2   2   1  ; "open"
0004    MOV      3   0
0005    CALL     2   0   2
0006    CALLM    1   2   0
0007    TNEW     2   0
0008    UGET     3   1      ; file_lines
0009    MOV      4   1
0010    CALL     3   2   2
0011 => LOOP     4 => 0023
0012    MOV      4   3
0013    CALL     4   2   1
0014    IST          4
0015    JMP      5 => 0017
0016    JMP      4 => 0023
0017 => UGET     5   2      ; table
0018    TGETS    5   5   2  ; "insert"
0019    MOV      6   2
0020    MOV      7   4
0021    CALL     5   1   3
0022    JMP      4 => 0011
0023 => MOV      5   1
0024    TGETS    4   1   3  ; "close"
0025    CALL     4   1   2
0026    RET1     2   2

-- BYTECODE -- patch.lua:430-434
0001    GGET     2   0      ; "ipairs"
0002    MOV      3   1
0003    CALL     2   4   2
0004    JMP      5 => 0010
0005 => UGET     7   0      ; find_hunk
0006    MOV      8   0
0007    MOV      9   6
0008    MOV     10   5
0009    CALL     7   1   4
0010 => ITERC    5   3   3
0011    ITERL    5 => 0005
0012    RET0     0   1

-- BYTECODE -- patch.lua:438-463
0001    UGET     0   0      ; file
0002    LEN      0   0
0003    ISNEN    0   0      ; 0
0004    JMP      0 => 0009
0005    GGET     0   0      ; "error"
0006    KSTR     1   1      ; "nomatch"
0007    KSHORT   2   0
0008    CALL     0   1   3
0009 => GGET     0   2      ; "ipairs"
0010    UGET     1   1      ; hunks
0011    CALL     0   4   2
0012    JMP      3 => 0076
0013 => UGET     5   0      ; file
0014    LEN      5   5
0015    TGETS    6   4   3  ; "starttgt"
0016    ISGE     5   6
0017    JMP      5 => 0022
0018    GGET     5   0      ; "error"
0019    KSTR     6   1      ; "nomatch"
0020    KSHORT   7   0
0021    CALL     5   1   3
0022 => TGETS    5   4   3  ; "starttgt"
0023    USETV    2   5      ; lineno
0024    GGET     5   2      ; "ipairs"
0025    TGETS    6   4   4  ; "text"
0026    CALL     5   4   2
0027    JMP      8 => 0074
0028 => UGET    10   3      ; startswith
0029    MOV     11   9
0030    KSTR    12   5      ; "-"
0031    CALL    10   2   3
0032    IST         10
0033    JMP     10 => 0074
0034    UGET    10   3      ; startswith
0035    MOV     11   9
0036    KSTR    12   6      ; "\"
0037    CALL    10   2   3
0038    IST         10
0039    JMP     10 => 0074
0040    UGET    10   0      ; file
0041    UGET    11   2      ; lineno
0042    TGETV   10  10  11
0043    UGET    11   2      ; lineno
0044    ADDVN   11  11   1  ; 1
0045    USETV    2  11      ; lineno
0046    LEN     11  10
0047    ISNEN   11   0      ; 0
0048    JMP     11 => 0053
0049    GGET    11   0      ; "error"
0050    KSTR    12   1      ; "nomatch"
0051    KSHORT  13   0
0052    CALL    11   1   3
0053 => UGET    11   4      ; endlstrip
0054    MOV     12  10
0055    CALL    11   2   2
0056    UGET    12   4      ; endlstrip
0057    MOV     14   9
0058    TGETS   13   9   7  ; "sub"
0059    KSHORT  15   2
0060    CALL    13   0   3
0061    CALLM   12   2   0
0062    ISEQV   11  12
0063    JMP     11 => 0074
0064    UGET    11   5      ; warning
0065    UGET    12   6      ; format
0066    KSTR    13   8      ; "file is not patched - failed hunk: %d"
0067    MOV     14   3
0068    CALL    12   0   3
0069    CALLM   11   1   0
0070    GGET    11   0      ; "error"
0071    KSTR    12   1      ; "nomatch"
0072    KSHORT  13   0
0073    CALL    11   1   3
0074 => ITERC    8   3   3
0075    ITERL    8 => 0028
0076 => ITERC    3   3   3
0077    ITERL    3 => 0013
0078    RET0     0   1

-- BYTECODE -- patch.lua:436-466
0001    KSHORT   2   1
0002    GGET     3   0      ; "pcall"
0003    FNEW     4   1      ; patch.lua:438
0004    CALL     3   3   2
0005    ISNES    4   2      ; "nomatch"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => UCLO     0 => 0011
0011 => RET1     5   2

-- BYTECODE -- patch.lua:468-529
0001    GGET     3   0      ; "assert"
0002    UGET     4   0      ; io
0003    TGETS    4   4   1  ; "open"
0004    MOV      5   0
0005    KSTR     6   2      ; "rb"
0006    CALL     4   0   3
0007    CALLM    3   2   0
0008    GGET     4   0      ; "assert"
0009    UGET     5   0      ; io
0010    TGETS    5   5   1  ; "open"
0011    MOV      6   1
0012    KSTR     7   3      ; "wb"
0013    CALL     5   0   3
0014    CALLM    4   2   0
0015    UGET     5   1      ; file_lines
0016    MOV      6   3
0017    CALL     5   2   2
0018    KSHORT   6   1
0019    TDUP     7   4
0020    GGET     8   5      ; "ipairs"
0021    MOV      9   2
0022    CALL     8   4   2
0023    JMP     11 => 0143
0024 => UGET    13   2      ; debug
0025    UGET    14   3      ; format
0026    KSTR    15   6      ; "processing hunk %d for file %s"
0027    MOV     16  11
0028    MOV     17   1
0029    CALL    14   0   4
0030    CALLM   13   1   0
0031 => TGETS   13  12   7  ; "startsrc"
0032    ISGE     6  13
0033    JMP     13 => 0072
0034    LOOP    13 => 0072
0035    MOV     13   5
0036    CALL    13   2   1
0037    UGET    14   4      ; endswith
0038    MOV     15  13
0039    KSTR    16   8      ; "\r\n"
0040    CALL    14   2   3
0041    ISF         14
0042    JMP     15 => 0047
0043    TGETS   14   7   8  ; "\r\n"
0044    ADDVN   14  14   0  ; 1
0045    TSETS   14   7   8  ; "\r\n"
0046    JMP     14 => 0066
0047 => UGET    14   4      ; endswith
0048    MOV     15  13
0049    KSTR    16   9      ; "\n"
0050    CALL    14   2   3
0051    ISF         14
0052    JMP     15 => 0057
0053    TGETS   14   7   9  ; "\n"
0054    ADDVN   14  14   0  ; 1
0055    TSETS   14   7   9  ; "\n"
0056    JMP     14 => 0066
0057 => UGET    14   4      ; endswith
0058    MOV     15  13
0059    KSTR    16  10      ; "\r"
0060    CALL    14   2   3
0061    ISF         14
0062    JMP     15 => 0066
0063    TGETS   14   7  10  ; "\r"
0064    ADDVN   14  14   0  ; 1
0065    TSETS   14   7  10  ; "\r"
0066 => MOV     15   4
0067    TGETS   14   4  11  ; "write"
0068    MOV     16  13
0069    CALL    14   1   3
0070    ADDVN    6   6   0  ; 1
0071    JMP     13 => 0031
0072 => GGET    13   5      ; "ipairs"
0073    TGETS   14  12  12  ; "text"
0074    CALL    13   4   2
0075    JMP     16 => 0141
0076 => UGET    18   5      ; startswith
0077    MOV     19  17
0078    KSTR    20  13      ; "-"
0079    CALL    18   2   3
0080    IST         18
0081    JMP     19 => 0088
0082    UGET    18   5      ; startswith
0083    MOV     19  17
0084    KSTR    20  14      ; "\"
0085    CALL    18   2   3
0086    ISF         18
0087    JMP     19 => 0092
0088 => MOV     18   5
0089    CALL    18   1   1
0090    ADDVN    6   6   0  ; 1
0091    JMP     18 => 0141
0092 => UGET    18   5      ; startswith
0093    MOV     19  17
0094    KSTR    20  15      ; "+"
0095    CALL    18   2   3
0096    IST         18
0097    JMP     18 => 0101
0098    MOV     18   5
0099    CALL    18   1   1
0100    ADDVN    6   6   0  ; 1
0101 => MOV     19  17
0102    TGETS   18  17  16  ; "sub"
0103    KSHORT  20   2
0104    CALL    18   2   3
0105    KSHORT  19   0
0106    GGET    20  17      ; "pairs"
0107    MOV     21   7
0108    CALL    20   4   2
0109    ISNEXT  23 => 0114
0110 => KSHORT  25   0
0111    ISGE    25  24
0112    JMP     25 => 0114
0113    ADDVN   19  19   0  ; 1
0114 => ITERN   23   3   3
0115    ITERL   23 => 0110
0116    ISNEN   19   0      ; 1
0117    JMP     20 => 0137
0118    KPRI    20   0
0119    GGET    21  17      ; "pairs"
0120    MOV     22   7
0121    CALL    21   4   2
0122    ISNEXT  24 => 0126
0123 => ISEQN   25   1      ; 0
0124    JMP     26 => 0126
0125    MOV     20  24
0126 => ITERN   24   3   3
0127    ITERL   24 => 0123
0128    MOV     22   4
0129    TGETS   21   4  11  ; "write"
0130    UGET    23   6      ; endlstrip
0131    MOV     24  18
0132    CALL    23   2   2
0133    MOV     24  20
0134    CAT     23  23  24
0135    CALL    21   1   3
0136    JMP     20 => 0141
0137 => MOV     21   4
0138    TGETS   20   4  11  ; "write"
0139    MOV     22  18
0140    CALL    20   1   3
0141 => ITERC   16   3   3
0142    ITERL   16 => 0076
0143 => ITERC   11   3   3
0144    ITERL   11 => 0024
0145    MOV      8   5
0146    KNIL     9  10
0147    JMP     11 => 0152
0148 => MOV     13   4
0149    TGETS   12   4  11  ; "write"
0150    MOV     14  11
0151    CALL    12   1   3
0152 => ITERC   11   2   3
0153    ITERL   11 => 0148
0154    MOV      9   4
0155    TGETS    8   4  18  ; "close"
0156    CALL     8   1   2
0157    MOV      9   3
0158    TGETS    8   3  18  ; "close"
0159    CALL     8   1   2
0160    KPRI     8   2
0161    RET1     8   2

-- BYTECODE -- patch.lua:531-537
0001    ISNEP    1   0
0002    JMP      2 => 0004
0003    RET1     0   2
0004 => KSHORT   2   1
0005    MOV      3   1
0006    KSHORT   4   1
0007    FORI     2 => 0015
0008 => MOV      7   0
0009    TGETS    6   0   0  ; "gsub"
0010    KSTR     8   1      ; "^[^/]*/"
0011    KSTR     9   2      ; ""
0012    CALL     6   2   4
0013    MOV      0   6
0014    FORL     2 => 0008
0015 => RET1     0   2

-- BYTECODE -- patch.lua:539-550
0001    UGET     2   0      ; io
0002    TGETS    2   2   0  ; "open"
0003    MOV      3   0
0004    KSTR     4   1      ; "wb"
0005    CALL     2   2   3
0006    IST          2
0007    JMP      3 => 0010
0008    KPRI     3   1
0009    RET1     3   2
0010 => GGET     3   2      ; "ipairs"
0011    TGETS    4   1   3  ; "text"
0012    CALL     3   4   2
0013    JMP      6 => 0032
0014 => MOV      9   7
0015    TGETS    8   7   4  ; "sub"
0016    KSHORT  10   1
0017    KSHORT  11   1
0018    CALL     8   2   4
0019    NOT      8   8
0020    ISNES    8   5      ; "+"
0021    JMP      8 => 0025
0022    KPRI     8   1
0023    KSTR     9   6      ; "malformed patch"
0024    RET      8   3
0025 => MOV      9   2
0026    TGETS    8   2   7  ; "write"
0027    MOV     11   7
0028    TGETS   10   7   4  ; "sub"
0029    KSHORT  12   2
0030    CALL    10   0   3
0031    CALLM    8   1   1
0032 => ITERC    6   3   3
0033    ITERL    6 => 0014
0034    MOV      4   2
0035    TGETS    3   2   8  ; "close"
0036    CALL     3   1   2
0037    KPRI     3   2
0038    RET1     3   2

-- BYTECODE -- patch.lua:607-656
0001    UGET     2   0      ; hunk
0002    ISF          2
0003    JMP      2 => 0008
0004    UGET     2   0      ; hunk
0005    TGETS    2   2   0  ; "startsrc"
0006    ISGE     1   2
0007    JMP      2 => 0010
0008 => KPRI     2   1
0009    RET1     2   2
0010 => UGET     2   0      ; hunk
0011    TGETS    2   2   0  ; "startsrc"
0012    ISNEV    1   2
0013    JMP      2 => 0049
0014    TNEW     2   0
0015    USETV    1   2      ; hunkfind
0016    GGET     2   1      ; "ipairs"
0017    UGET     3   0      ; hunk
0018    TGETS    3   3   2  ; "text"
0019    CALL     2   4   2
0020    JMP      5 => 0046
0021 => MOV      8   6
0022    TGETS    7   6   3  ; "sub"
0023    KSHORT   9   1
0024    KSHORT  10   1
0025    CALL     7   2   4
0026    ISEQS    7   4      ; " "
0027    JMP      7 => 0035
0028    MOV      8   6
0029    TGETS    7   6   3  ; "sub"
0030    KSHORT   9   1
0031    KSHORT  10   1
0032    CALL     7   2   4
0033    ISNES    7   5      ; "-"
0034    JMP      7 => 0046
0035 => UGET     7   1      ; hunkfind
0036    UGET     8   1      ; hunkfind
0037    LEN      8   8
0038    ADDVN    8   8   0  ; 1
0039    UGET     9   2      ; endlstrip
0040    MOV     11   6
0041    TGETS   10   6   3  ; "sub"
0042    KSHORT  12   2
0043    CALL    10   0   3
0044    CALLM    9   2   0
0045    TSETV    9   7   8
0046 => ITERC    5   3   3
0047    ITERL    5 => 0021
0048    USETN    3   0      ; hunklineno ; 1
0049 => UGET     2   0      ; hunk
0050    TGETS    2   2   0  ; "startsrc"
0051    UGET     3   1      ; hunkfind
0052    LEN      3   3
0053    ADDVV    2   2   3
0054    SUBVN    2   2   0  ; 1
0055    ISGE     1   2
0056    JMP      2 => 0093
0057    UGET     2   2      ; endlstrip
0058    MOV      3   0
0059    CALL     2   2   2
0060    UGET     3   1      ; hunkfind
0061    UGET     4   3      ; hunklineno
0062    TGETV    3   3   4
0063    ISNEV    2   3
0064    JMP      2 => 0069
0065    UGET     2   3      ; hunklineno
0066    ADDVN    2   2   0  ; 1
0067    USETV    3   2      ; hunklineno
0068    JMP      2 => 0093
0069 => UGET     2   4      ; debug
0070    UGET     3   5      ; format
0071    KSTR     4   6      ; "hunk no.%d doesn't match source file %s"
0072    UGET     5   6      ; hunkno
0073    UGET     6   7      ; source
0074    CALL     3   0   4
0075    CALLM    2   1   0
0076    UGET     2   6      ; hunkno
0077    ADDVN    2   2   0  ; 1
0078    USETV    6   2      ; hunkno
0079    UGET     2   6      ; hunkno
0080    UGET     3   8      ; hunks
0081    LEN      3   3
0082    ISGT     2   3
0083    JMP      2 => 0091
0084    UGET     2   8      ; hunks
0085    UGET     3   6      ; hunkno
0086    TGETV    2   2   3
0087    USETV    0   2      ; hunk
0088    KPRI     2   1
0089    RET1     2   2
0090    JMP      2 => 0093
0091 => KPRI     2   2
0092    RET1     2   2
0093 => UGET     2   0      ; hunk
0094    TGETS    2   2   0  ; "startsrc"
0095    UGET     3   1      ; hunkfind
0096    LEN      3   3
0097    ADDVV    2   2   3
0098    SUBVN    2   2   0  ; 1
0099    ISNEV    1   2
0100    JMP      2 => 0132
0101    UGET     2   4      ; debug
0102    UGET     3   5      ; format
0103    KSTR     4   7      ; "file %s hunk no.%d -- is ready to be pat"~
0104    UGET     5   7      ; source
0105    UGET     6   6      ; hunkno
0106    CALL     3   0   4
0107    CALLM    2   1   0
0108    UGET     2   6      ; hunkno
0109    ADDVN    2   2   0  ; 1
0110    USETV    6   2      ; hunkno
0111    UGET     2   9      ; validhunks
0112    ADDVN    2   2   0  ; 1
0113    USETV    9   2      ; validhunks
0114    UGET     2   6      ; hunkno
0115    UGET     3   8      ; hunks
0116    LEN      3   3
0117    ISGT     2   3
0118    JMP      2 => 0124
0119    UGET     2   8      ; hunks
0120    UGET     3   6      ; hunkno
0121    TGETV    2   2   3
0122    USETV    0   2      ; hunk
0123    JMP      2 => 0132
0124 => UGET     2   9      ; validhunks
0125    UGET     3   8      ; hunks
0126    LEN      3   3
0127    ISNEV    2   3
0128    JMP      2 => 0132
0129    USETP   10   2      ; canpatch
0130    KPRI     2   2
0131    RET1     2   2
0132 => KPRI     2   1
0133    RET1     2   2

-- BYTECODE -- patch.lua:552-698
0001    KPRI     6   1
0002    ISF          5
0003    JMP      7 => 0031
0004    ISFC     7   2
0005    JMP      7 => 0020
0006    LEN      7   3
0007    ISNEN    7   0      ; 1
0008    JMP      7 => 0017
0009    TGETB    7   3   1
0010    TGETS    7   7   0  ; "startsrc"
0011    ISNEN    7   1      ; 0
0012    JMP      7 => 0017
0013    TGETB    7   3   1
0014    TGETS    7   7   1  ; "linessrc"
0015    ISEQN    7   1      ; 0
0016    JMP      7 => 0019
0017 => KPRI     7   1
0018    JMP      8 => 0020
0019 => KPRI     7   2
0020 => IST          7
0021    JMP      8 => 0024
0022    ISNES    0   2      ; "/dev/null"
0023    JMP      8 => 0031
0024 => UGET     8   0      ; info
0025    UGET     9   1      ; format
0026    KSTR    10   3      ; "will create %s"
0027    MOV     11   1
0028    CALL     9   0   3
0029    CALLM    8   1   0
0030    KPRI     6   2
0031 => ISF          6
0032    JMP      7 => 0043
0033    UGET     7   2      ; write_new_file
0034    UGET     8   3      ; fs
0035    TGETS    8   8   4  ; "absolute_name"
0036    UGET     9   4      ; strip_dirs
0037    MOV     10   1
0038    MOV     11   4
0039    CALL     9   0   3
0040    CALLM    8   2   0
0041    TGETB    9   3   1
0042    UCLO     0 => 0259
0043 => UGET     7   4      ; strip_dirs
0044    MOV      8   0
0045    MOV      9   4
0046    CALL     7   2   3
0047    MOV      0   7
0048    MOV      7   0
0049    UGET     8   5      ; exists
0050    MOV      9   7
0051    CALL     8   2   2
0052    IST          8
0053    JMP      8 => 0078
0054    UGET     8   4      ; strip_dirs
0055    MOV      9   1
0056    MOV     10   4
0057    CALL     8   2   3
0058    MOV      7   8
0059    UGET     8   3      ; fs
0060    TGETS    8   8   4  ; "absolute_name"
0061    MOV      9   7
0062    CALL     8   2   2
0063    MOV      7   8
0064    UGET     8   5      ; exists
0065    MOV      9   7
0066    CALL     8   2   2
0067    IST          8
0068    JMP      8 => 0078
0069    UGET     8   6      ; warning
0070    UGET     9   1      ; format
0071    KSTR    10   5      ; "source/target file does not exist\n--- %"~
0072    MOV     11   0
0073    MOV     12   7
0074    CALL     9   0   4
0075    CALLM    8   1   0
0076    KPRI     8   1
0077    UCLO     0 => 0260
0078 => UGET     8   7      ; isfile
0079    MOV      9   7
0080    CALL     8   2   2
0081    IST          8
0082    JMP      8 => 0091
0083    UGET     8   6      ; warning
0084    UGET     9   1      ; format
0085    KSTR    10   6      ; "not a file - %s"
0086    MOV     11   7
0087    CALL     9   0   3
0088    CALLM    8   1   0
0089    KPRI     8   1
0090    UCLO     0 => 0261
0091 => MOV      0   7
0092    UGET     8   8      ; load_file
0093    MOV      9   0
0094    CALL     8   2   2
0095    KSHORT   9   1
0096    TGETV   10   3   9
0097    TNEW    11   0
0098    KSHORT  12   0
0099    KPRI    13   1
0100    KPRI    14   0
0101    IST          8
0102    JMP     15 => 0108
0103    KPRI    15   0
0104    KSTR    16   7      ; "failed reading file "
0105    MOV     17   0
0106    CAT     16  16  17
0107    UCLO     0 => 0262
0108 => ISF          5
0109    JMP     15 => 0139
0110    ISF          2
0111    JMP     15 => 0139
0112    LEN     15   3
0113    ISNEN   15   0      ; 1
0114    JMP     15 => 0139
0115    TGETB   15   3   1
0116    TGETS   15  15   8  ; "starttgt"
0117    ISNEN   15   1      ; 0
0118    JMP     15 => 0139
0119    TGETB   15   3   1
0120    TGETS   15  15   9  ; "linestgt"
0121    ISNEN   15   1      ; 0
0122    JMP     15 => 0139
0123    UGET    15   9      ; os
0124    TGETS   15  15  10  ; "remove"
0125    MOV     16   0
0126    CALL    15   2   2
0127    IST         15
0128    JMP     16 => 0131
0129    KPRI    16   1
0130    UCLO     0 => 0263
0131 => UGET    16   0      ; info
0132    UGET    17   1      ; format
0133    KSTR    18  11      ; "successfully removed %s"
0134    MOV     19   0
0135    CALL    17   0   3
0136    CALLM   16   1   0
0137    KPRI    16   2
0138    UCLO     0 => 0264
0139 => UGET    15  10      ; find_hunks
0140    MOV     16   8
0141    MOV     17   3
0142    CALL    15   1   3
0143    FNEW    15  12      ; patch.lua:607
0144    KPRI    16   1
0145    GGET    17  13      ; "ipairs"
0146    MOV     18   8
0147    CALL    17   4   2
0148    JMP     20 => 0157
0149 => MOV     22  15
0150    MOV     23  21
0151    MOV     24  20
0152    CALL    22   2   3
0153    MOV     16  22
0154    ISF         16
0155    JMP     22 => 0157
0156    JMP     17 => 0159
0157 => ITERC   20   3   3
0158    ITERL   20 => 0149
0159 => IST         16
0160    JMP     17 => 0176
0161    LEN     17   3
0162    ISGT     9  17
0163    JMP     17 => 0176
0164    IST          6
0165    JMP     17 => 0176
0166    UGET    17   6      ; warning
0167    UGET    18   1      ; format
0168    KSTR    19  14      ; "premature end of source file %s at hunk "~
0169    MOV     20   0
0170    MOV     21   9
0171    CALL    18   0   4
0172    CALLM   17   1   0
0173    KPRI    17   1
0174    UCLO     0 => 0175
0175 => RET1    17   2
0176 => LEN     17   3
0177    ISGE    12  17
0178    JMP     17 => 0203
0179    UGET    17  13      ; check_patched
0180    MOV     18   8
0181    MOV     19   3
0182    CALL    17   2   3
0183    ISF         17
0184    JMP     18 => 0192
0185    UGET    17   6      ; warning
0186    UGET    18   1      ; format
0187    KSTR    19  15      ; "already patched  %s"
0188    MOV     20   0
0189    CALL    18   0   3
0190    CALLM   17   1   0
0191    JMP     17 => 0203
0192 => IST          6
0193    JMP     17 => 0203
0194    UGET    17   6      ; warning
0195    UGET    18   1      ; format
0196    KSTR    19  16      ; "source file is different - %s"
0197    MOV     20   0
0198    CALL    18   0   3
0199    CALLM   17   1   0
0200    KPRI    17   1
0201    UCLO     0 => 0202
0202 => RET1    17   2
0203 => IST         13
0204    JMP     17 => 0208
0205    KPRI    17   2
0206    UCLO     0 => 0207
0207 => RET1    17   2
0208 => MOV     17   0
0209    KSTR    18  17      ; ".orig"
0210    CAT     17  17  18
0211    UGET    18   5      ; exists
0212    MOV     19  17
0213    CALL    18   2   2
0214    ISF         18
0215    JMP     19 => 0225
0216    UGET    18   6      ; warning
0217    UGET    19   1      ; format
0218    KSTR    20  18      ; "can't backup original file to %s - abort"~
0219    MOV     21  17
0220    CALL    19   0   3
0221    CALLM   18   1   0
0222    KPRI    18   1
0223    UCLO     0 => 0224
0224 => RET1    18   2
0225 => UGET    18   9      ; os
0226    TGETS   18  18  19  ; "rename"
0227    MOV     19   0
0228    MOV     20  17
0229    CALL    18   2   3
0230    IST         18
0231    JMP     19 => 0241
0232    UGET    19   6      ; warning
0233    UGET    20   1      ; format
0234    KSTR    21  20      ; "failed backing up %s when patching"
0235    MOV     22   0
0236    CALL    20   0   3
0237    CALLM   19   1   0
0238    KPRI    19   1
0239    UCLO     0 => 0240
0240 => RET1    19   2
0241 => UGET    19  14      ; patch_hunks
0242    MOV     20  17
0243    MOV     21   0
0244    MOV     22   3
0245    CALL    19   1   4
0246    UGET    19   0      ; info
0247    UGET    20   1      ; format
0248    KSTR    21  21      ; "successfully patched %s"
0249    MOV     22   0
0250    CALL    20   0   3
0251    CALLM   19   1   0
0252    UGET    19   9      ; os
0253    TGETS   19  19  10  ; "remove"
0254    MOV     20  17
0255    CALL    19   1   2
0256    KPRI    19   2
0257    UCLO     0 => 0258
0258 => RET1    19   2
0259 => CALLT    7   3
0260 => RET1     8   2
0261 => RET1     8   2
0262 => RET     15   3
0263 => RET1    16   2
0264 => RET1    16   2

-- BYTECODE -- patch.lua:700-713
0001    KPRI     3   2
0002    TGETS    4   0   0  ; "source"
0003    LEN      4   4
0004    GGET     5   1      ; "ipairs"
0005    TGETS    6   0   0  ; "source"
0006    CALL     5   4   2
0007    JMP      8 => 0033
0008 => TGETS   10   0   2  ; "target"
0009    TGETV   10  10   8
0010    TGETS   11   0   3  ; "hunks"
0011    TGETV   11  11   8
0012    TGETS   12   0   4  ; "epoch"
0013    TGETV   12  12   8
0014    UGET    13   0      ; info
0015    UGET    14   1      ; format
0016    KSTR    15   5      ; "processing %d/%d:\t %s"
0017    MOV     16   8
0018    MOV     17   4
0019    MOV     18   9
0020    CALL    14   0   5
0021    CALLM   13   1   0
0022    UGET    13   2      ; patch_file
0023    MOV     14   9
0024    MOV     15  10
0025    MOV     16  12
0026    MOV     17  11
0027    MOV     18   1
0028    MOV     19   2
0029    CALL    13   2   7
0030    ISF          3
0031    JMP     14 => 0033
0032    MOV      3  13
0033 => ITERC    8   3   3
0034    ITERL    8 => 0008
0035    RET1     3   2

-- BYTECODE -- patch.lua:0-716
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fun"
0007    CALL     2   2   2
0008    GGET     3   3      ; "io"
0009    GGET     4   4      ; "os"
0010    GGET     5   5      ; "string"
0011    GGET     6   6      ; "table"
0012    TGETS    7   5   7  ; "format"
0013    KPRI     8   1
0014    FNEW     9   8      ; patch.lua:24
0015    FNEW    10   9      ; patch.lua:25
0016    FNEW    11  10      ; patch.lua:26
0017    FNEW    12  11      ; patch.lua:29
0018    FNEW    13  12      ; patch.lua:34
0019    FNEW    14  13      ; patch.lua:39
0020    FNEW    15  14      ; patch.lua:44
0021    FNEW    16  15      ; patch.lua:50
0022    FNEW    17  16      ; patch.lua:56
0023    FNEW    18  17      ; patch.lua:58
0024    FNEW    19  18      ; patch.lua:88
0025    FNEW    20  19      ; patch.lua:121
0026    FNEW    21  20      ; patch.lua:129
0027    FNEW    22  22      ; patch.lua:133
0028    TSETS   22   0  21  ; "read_patch"
0029    FNEW    22  23      ; patch.lua:375
0030    FNEW    23  24      ; patch.lua:417
0031    FNEW    24  25      ; patch.lua:430
0032    FNEW    25  26      ; patch.lua:436
0033    FNEW    26  27      ; patch.lua:468
0034    FNEW    27  28      ; patch.lua:531
0035    FNEW    28  29      ; patch.lua:539
0036    FNEW    29  30      ; patch.lua:552
0037    FNEW    30  32      ; patch.lua:700
0038    TSETS   30   0  31  ; "apply_patch"
0039    UCLO     0 => 0040
0040 => RET1     0   2

-----------------------
-- BYTECODE -- download.lua:11-23
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "split_url"
0003    MOV      2   0
0004    CALL     1   3   2
0005    ISNES    1   1      ; "file"
0006    JMP      3 => 0023
0007    UGET     3   1      ; fs
0008    TGETS    3   3   2  ; "copy"
0009    MOV      4   2
0010    UGET     5   1      ; fs
0011    TGETS    5   5   3  ; "current_dir"
0012    CALL     5   2   1
0013    KSTR     6   4      ; "read"
0014    CALL     3   3   4
0015    ISF          3
0016    JMP      5 => 0019
0017    RET1     2   2
0018    JMP      5 => 0027
0019 => KPRI     5   0
0020    MOV      6   4
0021    RET      5   3
0022    JMP      3 => 0027
0023 => UGET     3   2      ; fetch
0024    TGETS    3   3   5  ; "fetch_url"
0025    MOV      4   0
0026    CALLT    3   2
0027 => RET0     0   1

-- BYTECODE -- download.lua:25-64
0001    ISFC     6   4
0002    JMP      6 => 0008
0003    ISEQS    1   0      ; ""
0004    JMP      6 => 0007
0005    KPRI     6   1
0006    JMP      7 => 0008
0007 => KPRI     6   2
0008 => UGET     7   0      ; queries
0009    TGETS    7   7   1  ; "new"
0010    MOV      8   1
0011    MOV      9   2
0012    MOV     10   3
0013    MOV     11   6
0014    MOV     12   0
0015    CALL     7   2   6
0016    KPRI     8   0
0017    ISF          4
0018    JMP      9 => 0071
0019    UGET     9   1      ; search
0020    TGETS    9   9   2  ; "search_repos"
0021    MOV     10   7
0022    CALL     9   2   2
0023    KPRI    10   1
0024    KPRI    11   2
0025    KSTR    12   0      ; ""
0026    GGET    13   3      ; "pairs"
0027    MOV     14   9
0028    CALL    13   4   2
0029    ISNEXT  16 => 0063
0030 => GGET    18   3      ; "pairs"
0031    MOV     19  17
0032    CALL    18   4   2
0033    ISNEXT  21 => 0061
0034 => GGET    23   4      ; "ipairs"
0035    MOV     24  22
0036    CALL    23   4   2
0037    JMP     26 => 0059
0038 => TGETS   28  27   5  ; "arch"
0039    ISEQS   28   6      ; "installed"
0040    JMP     28 => 0059
0041    KPRI    10   2
0042    UGET    28   2      ; path
0043    TGETS   28  28   7  ; "make_url"
0044    TGETS   29  27   8  ; "repo"
0045    MOV     30  16
0046    MOV     31  21
0047    TGETS   32  27   5  ; "arch"
0048    CALL    28   2   5
0049    UGET    29   3      ; get_file
0050    MOV     30  28
0051    CALL    29   3   2
0052    IST         29
0053    JMP     31 => 0059
0054    KPRI    11   1
0055    MOV     31  12
0056    KSTR    32   9      ; "\n"
0057    MOV     33  30
0058    CAT     12  31  33
0059 => ITERC   26   3   3
0060    ITERL   26 => 0038
0061 => ITERN   21   3   3
0062    ITERL   21 => 0034
0063 => ITERN   16   3   3
0064    ITERL   16 => 0030
0065    ISF         10
0066    JMP     13 => 0084
0067    MOV     13  11
0068    MOV     14  12
0069    RET     13   3
0070    JMP      9 => 0084
0071 => KPRI     9   0
0072    UGET    10   1      ; search
0073    TGETS   10  10  10  ; "find_rock_checking_lua_versions"
0074    MOV     11   7
0075    MOV     12   5
0076    CALL    10   3   3
0077    MOV      8  11
0078    MOV      9  10
0079    ISF          9
0080    JMP     10 => 0084
0081    UGET    10   3      ; get_file
0082    MOV     11   9
0083    CALLT   10   2
0084 => UGET     9   4      ; util
0085    TGETS    9   9  11  ; "format_rock_name"
0086    MOV     10   1
0087    MOV     11   2
0088    MOV     12   3
0089    CALL     9   2   4
0090    KPRI    10   0
0091    KSTR    11  12      ; "Could not find a result named "
0092    MOV     12   9
0093    ISF          8
0094    JMP     13 => 0100
0095    KSTR    13  13      ; ": "
0096    MOV     14   8
0097    CAT     13  13  14
0098    IST         13
0099    JMP     14 => 0101
0100 => KSTR    13  14      ; "."
0101 => CAT     11  11  13
0102    RET     10   3

-- BYTECODE -- download.lua:0-67
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.path"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fetch"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.search"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.queries"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.dir"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.util"
0022    CALL     7   2   2
0023    FNEW     8   8      ; download.lua:11
0024    FNEW     9  10      ; download.lua:25
0025    TSETS    9   0   9  ; "download"
0026    UCLO     0 => 0027
0027 => RET1     0   2

-----------------------
-- BYTECODE -- manif.lua:22-26
0001    IST          1
0002    JMP      3 => 0005
0003    UGET     3   0      ; cfg
0004    TGETS    1   3   0  ; "lua_version"
0005 => UGET     3   1      ; manifest_cache
0006    UGET     4   1      ; manifest_cache
0007    TGETV    4   4   0
0008    IST          4
0009    JMP      5 => 0011
0010    TNEW     4   0
0011 => TSETV    4   3   0
0012    UGET     3   1      ; manifest_cache
0013    TGETV    3   3   0
0014    TSETV    2   3   1
0015    RET0     0   1

-- BYTECODE -- manif.lua:32-35
0001    IST          1
0002    JMP      2 => 0005
0003    UGET     2   0      ; cfg
0004    TGETS    1   2   0  ; "lua_version"
0005 => UGET     2   1      ; manifest_cache
0006    TGETV    2   2   0
0007    ISF          2
0008    JMP      3 => 0012
0009    UGET     2   1      ; manifest_cache
0010    TGETV    2   2   0
0011    TGETV    2   2   1
0012 => RET1     2   2

-- BYTECODE -- manif.lua:44-51
0001    UGET     3   0      ; persist
0002    TGETS    3   3   0  ; "load_into_table"
0003    MOV      4   0
0004    CALL     3   4   2
0005    IST          3
0006    JMP      6 => 0015
0007    KPRI     6   0
0008    KSTR     7   1      ; "Failed loading manifest for "
0009    MOV      8   1
0010    KSTR     9   2      ; ": "
0011    MOV     10   4
0012    CAT      7   7  10
0013    MOV      8   5
0014    RET      6   4
0015 => UGET     6   1      ; manif
0016    TGETS    6   6   3  ; "cache_manifest"
0017    MOV      7   1
0018    MOV      8   2
0019    MOV      9   3
0020    CALL     6   1   4
0021    MOV      6   3
0022    MOV      7   4
0023    MOV      8   5
0024    RET      6   4

-- BYTECODE -- manif.lua:58-68
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; manif
0012    TGETS    1   1   3  ; "get_cached_manifest"
0013    MOV      2   0
0014    CALL     1   2   2
0015    ISF          1
0016    JMP      2 => 0018
0017    RET1     1   2
0018 => UGET     2   1      ; dir
0019    TGETS    2   2   4  ; "path"
0020    MOV      3   0
0021    KSTR     4   5      ; "manifest"
0022    CALL     2   2   3
0023    UGET     3   0      ; manif
0024    TGETS    3   3   6  ; "manifest_loader"
0025    MOV      4   2
0026    MOV      5   0
0027    KPRI     6   0
0028    KPRI     7   2
0029    CALLT    3   5

-- BYTECODE -- manif.lua:72-77
0001    UGET     1   0      ; manif
0002    TGETS    1   1   0  ; "fast_load_local_manifest"
0003    UGET     2   1      ; path
0004    TGETS    2   2   1  ; "rocks_dir"
0005    MOV      3   0
0006    CALL     2   0   2
0007    CALLM    1   3   0
0008    ISF          1
0009    JMP      3 => 0017
0010    GGET     3   2      ; "table"
0011    TGETS    3   3   3  ; "insert"
0012    UGET     4   2      ; trees
0013    TDUP     5   4
0014    TSETS    0   5   5  ; "tree"
0015    TSETS    1   5   6  ; "manifest"
0016    CALL     3   1   3
0017 => RET0     0   1

-- BYTECODE -- manif.lua:70-79
0001    TNEW     1   0
0002    UGET     2   0      ; path
0003    TGETS    2   2   0  ; "map_trees"
0004    MOV      3   0
0005    FNEW     4   1      ; manif.lua:72
0006    CALL     2   1   3
0007    UCLO     0 => 0008
0008 => RET1     1   2

-- BYTECODE -- manif.lua:81-112
0001    TGETV    4   3   0
0002    ISF          4
0003    JMP      5 => 0005
0004    RET0     0   1
0005 => TSETV    1   3   0
0006    GGET     4   0      ; "ipairs"
0007    MOV      5   2
0008    CALL     4   4   2
0009    JMP      7 => 0073
0010 => TGETS    9   8   1  ; "manifest"
0011    KPRI    10   0
0012    TGETS   11   9   2  ; "dependencies"
0013    ISF         11
0014    JMP     12 => 0022
0015    TGETS   11   9   2  ; "dependencies"
0016    TGETV   11  11   0
0017    ISF         11
0018    JMP     12 => 0022
0019    TGETS   11   9   2  ; "dependencies"
0020    TGETV   11  11   0
0021    TGETV   10  11   1
0022 => IST         10
0023    JMP     11 => 0026
0024    KPRI    11   0
0025    RET1    11   2
0026 => GGET    11   0      ; "ipairs"
0027    MOV     12  10
0028    CALL    11   4   2
0029    JMP     14 => 0071
0030 => TGETS   16  15   3  ; "name"
0031    TGETS   17  15   4  ; "constraints"
0032    GGET    18   0      ; "ipairs"
0033    MOV     19   2
0034    CALL    18   4   2
0035    JMP     21 => 0069
0036 => TGETS   23  22   1  ; "manifest"
0037    TGETS   23  23   5  ; "repository"
0038    TGETV   23  23  16
0039    ISF         23
0040    JMP     24 => 0069
0041    UGET    24   0      ; util
0042    TGETS   24  24   6  ; "sortedpairs"
0043    MOV     25  23
0044    UGET    26   1      ; vers
0045    TGETS   26  26   7  ; "compare_versions"
0046    CALL    24   4   3
0047    JMP     27 => 0067
0048 => ISF         17
0049    JMP     29 => 0060
0050    UGET    29   1      ; vers
0051    TGETS   29  29   8  ; "match_constraints"
0052    UGET    30   1      ; vers
0053    TGETS   30  30   9  ; "parse_version"
0054    MOV     31  27
0055    CALL    30   2   2
0056    MOV     31  17
0057    CALL    29   2   3
0058    ISF         29
0059    JMP     30 => 0067
0060 => UGET    29   2      ; manif
0061    TGETS   29  29  10  ; "scan_dependencies"
0062    MOV     30  16
0063    MOV     31  27
0064    MOV     32   2
0065    MOV     33   3
0066    CALL    29   1   5
0067 => ITERC   27   3   3
0068    ITERL   27 => 0048
0069 => ITERC   21   3   3
0070    ITERL   21 => 0036
0071 => ITERC   14   3   3
0072    ITERL   14 => 0030
0073 => ITERC    7   3   3
0074    ITERL    7 => 0010
0075    RET0     0   1

-- BYTECODE -- manif.lua:0-115
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.persist"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.core.util"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.core.vers"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.core.path"
0019    CALL     6   2   2
0020    KPRI     7   0
0021    TNEW     8   0
0022    FNEW     9   8      ; manif.lua:22
0023    TSETS    9   0   7  ; "cache_manifest"
0024    FNEW     9  10      ; manif.lua:32
0025    TSETS    9   0   9  ; "get_cached_manifest"
0026    FNEW     9  12      ; manif.lua:44
0027    TSETS    9   0  11  ; "manifest_loader"
0028    FNEW     9  14      ; manif.lua:58
0029    TSETS    9   0  13  ; "fast_load_local_manifest"
0030    FNEW     9  16      ; manif.lua:70
0031    TSETS    9   0  15  ; "load_rocks_tree_manifests"
0032    FNEW     9  18      ; manif.lua:81
0033    TSETS    9   0  17  ; "scan_dependencies"
0034    UCLO     0 => 0035
0035 => RET1     0   2

-----------------------
-- BYTECODE -- dir.lua:16-22
0001    TNEW     0   3
0002    VARG     1   0   0
0003    TSETM    1   0      ; 1
0004 => TGETB    1   0   1
0005    ISNES    1   0      ; ""
0006    JMP      1 => 0014
0007    LOOP     1 => 0014
0008    GGET     1   1      ; "table"
0009    TGETS    1   1   2  ; "remove"
0010    MOV      2   0
0011    KSHORT   3   1
0012    CALL     1   1   3
0013    JMP      1 => 0004
0014 => GGET     1   1      ; "table"
0015    TGETS    1   1   3  ; "concat"
0016    MOV      2   0
0017    KSTR     3   4      ; "/"
0018    CALL     1   2   3
0019    MOV      2   1
0020    TGETS    1   1   5  ; "gsub"
0021    KSTR     3   6      ; "([^:])/+"
0022    KSTR     4   7      ; "%1/"
0023    CALL     1   2   4
0024    MOV      2   1
0025    TGETS    1   1   5  ; "gsub"
0026    KSTR     3   8      ; "^/+"
0027    KSTR     4   4      ; "/"
0028    CALL     1   2   4
0029    MOV      2   1
0030    TGETS    1   1   5  ; "gsub"
0031    KSTR     3   9      ; "/*$"
0032    KSTR     4   0      ; ""
0033    CALL     1   2   4
0034    RET1     1   2

-- BYTECODE -- dir.lua:29-38
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "match"
0013    KSTR     3   4      ; "^([^:]*)://(.*)"
0014    CALL     1   3   3
0015    IST          1
0016    JMP      3 => 0019
0017    KSTR     1   5      ; "file"
0018    MOV      2   0
0019 => MOV      3   1
0020    MOV      4   2
0021    RET      3   3

-- BYTECODE -- dir.lua:45-50
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "split_url"
0003    MOV      2   0
0004    CALL     1   3   2
0005    MOV      4   2
0006    TGETS    3   2   1  ; "gsub"
0007    KSTR     5   2      ; "\"
0008    KSTR     6   3      ; "/"
0009    CALL     3   2   4
0010    MOV      4   3
0011    TGETS    3   3   1  ; "gsub"
0012    KSTR     5   4      ; "(.)/*$"
0013    KSTR     6   5      ; "%1"
0014    CALL     3   2   4
0015    MOV      4   3
0016    TGETS    3   3   1  ; "gsub"
0017    KSTR     5   6      ; "//"
0018    KSTR     6   3      ; "/"
0019    CALL     3   2   4
0020    MOV      2   3
0021    ISEQS    1   7      ; "file"
0022    JMP      3 => 0027
0023    MOV      3   1
0024    KSTR     4   8      ; "://"
0025    MOV      5   2
0026    CAT      2   3   5
0027 => RET1     2   2

-- BYTECODE -- dir.lua:0-54
0001    TNEW     0   0
0002    KPRI     1   0
0003    FNEW     2   1      ; dir.lua:16
0004    TSETS    2   0   0  ; "path"
0005    FNEW     2   3      ; dir.lua:29
0006    TSETS    2   0   2  ; "split_url"
0007    FNEW     2   5      ; dir.lua:45
0008    TSETS    2   0   4  ; "normalize"
0009    UCLO     0 => 0010
0010 => RET1     0   2

-----------------------
-- BYTECODE -- path.lua:10-19
0001    ISNEP    0   0
0002    JMP      1 => 0005
0003    UGET     1   0      ; cfg
0004    TGETS    0   1   0  ; "root_dir"
0005 => GGET     1   1      ; "type"
0006    MOV      2   0
0007    CALL     1   2   2
0008    ISNES    1   2      ; "string"
0009    JMP      1 => 0016
0010    UGET     1   1      ; dir
0011    TGETS    1   1   3  ; "path"
0012    MOV      2   0
0013    UGET     3   0      ; cfg
0014    TGETS    3   3   4  ; "rocks_subdir"
0015    CALLT    1   3
0016 => GGET     1   5      ; "assert"
0017    GGET     2   1      ; "type"
0018    MOV      3   0
0019    CALL     2   2   2
0020    ISEQS    2   6      ; "table"
0021    JMP      2 => 0024
0022    KPRI     2   1
0023    JMP      3 => 0025
0024 => KPRI     2   2
0025 => CALL     1   1   2
0026    TGETS    1   0   7  ; "rocks_dir"
0027    IST          1
0028    JMP      2 => 0035
0029    UGET     1   1      ; dir
0030    TGETS    1   1   3  ; "path"
0031    TGETS    2   0   8  ; "root"
0032    UGET     3   0      ; cfg
0033    TGETS    3   3   4  ; "rocks_subdir"
0034    CALL     1   2   3
0035 => RET1     1   2

-- BYTECODE -- path.lua:27-35
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   2
0014    CALL     5   2   2
0015    ISNES    5   2      ; "string"
0016    JMP      5 => 0023
0017    MOV      6   2
0018    TGETS    5   2   3  ; "match"
0019    KSTR     7   4      ; "/"
0020    CALL     5   2   3
0021    NOT      5   5
0022    JMP      6 => 0026
0023 => KPRI     5   1
0024    JMP      6 => 0026
0025    KPRI     5   2
0026 => CALL     4   1   2
0027    GGET     4   0      ; "assert"
0028    GGET     5   1      ; "type"
0029    MOV      6   3
0030    CALL     5   2   2
0031    ISEQS    5   2      ; "string"
0032    JMP      5 => 0035
0033    KPRI     5   1
0034    JMP      6 => 0036
0035 => KPRI     5   2
0036 => CALL     4   1   2
0037    MOV      5   0
0038    TGETS    4   0   5  ; "sub"
0039    LEN      6   1
0040    ADDVN    6   6   0  ; 1
0041    CALL     4   2   3
0042    MOV      5   4
0043    TGETS    4   4   6  ; "gsub"
0044    KSTR     6   7      ; "^/*"
0045    KSTR     7   8      ; ""
0046    CALL     4   2   4
0047    MOV      5   2
0048    KSTR     6   9      ; "_"
0049    MOV      7   3
0050    CAT      5   5   7
0051    MOV      6   5
0052    TGETS    5   5   6  ; "gsub"
0053    KSTR     7  10      ; "%-"
0054    KSTR     8   9      ; "_"
0055    CALL     5   2   4
0056    MOV      6   5
0057    TGETS    5   5   6  ; "gsub"
0058    KSTR     7  11      ; "%."
0059    KSTR     8   9      ; "_"
0060    CALL     5   2   4
0061    UGET     6   0      ; dir
0062    TGETS    6   6  12  ; "path"
0063    MOV      7   1
0064    MOV      8   5
0065    KSTR     9  13      ; "-"
0066    MOV     10   4
0067    CAT      8   8  10
0068    CALLT    6   3

-- BYTECODE -- path.lua:44-66
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "match"
0013    KSTR     3   4      ; "(.*)%."
0014    UGET     4   0      ; cfg
0015    TGETS    4   4   5  ; "lua_extension"
0016    KSTR     5   6      ; "$"
0017    CAT      3   3   5
0018    CALL     1   2   3
0019    ISF          1
0020    JMP      2 => 0028
0021    MOV      3   1
0022    TGETS    2   1   7  ; "gsub"
0023    KSTR     4   8      ; "/"
0024    KSTR     5   9      ; "."
0025    CALL     2   2   4
0026    MOV      1   2
0027    JMP      2 => 0045
0028 => MOV      3   0
0029    TGETS    2   0   3  ; "match"
0030    KSTR     4   4      ; "(.*)%."
0031    UGET     5   0      ; cfg
0032    TGETS    5   5  10  ; "lib_extension"
0033    KSTR     6   6      ; "$"
0034    CAT      4   4   6
0035    CALL     2   2   3
0036    MOV      1   2
0037    ISF          1
0038    JMP      2 => 0045
0039    MOV      3   1
0040    TGETS    2   1   7  ; "gsub"
0041    KSTR     4   8      ; "/"
0042    KSTR     5   9      ; "."
0043    CALL     2   2   4
0044    MOV      1   2
0045 => IST          1
0046    JMP      2 => 0048
0047    MOV      1   0
0048 => MOV      3   1
0049    TGETS    2   1   7  ; "gsub"
0050    KSTR     4  11      ; "^%.+"
0051    KSTR     5  12      ; ""
0052    CALL     2   2   4
0053    MOV      3   2
0054    TGETS    2   2   7  ; "gsub"
0055    KSTR     4  13      ; "%.+$"
0056    KSTR     5  12      ; ""
0057    CALL     2   2   4
0058    MOV      1   2
0059    RET1     1   2

-- BYTECODE -- path.lua:68-75
0001    GGET     1   0      ; "type"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISNES    1   1      ; "string"
0005    JMP      1 => 0013
0006    UGET     1   0      ; dir
0007    TGETS    1   1   2  ; "path"
0008    MOV      2   0
0009    UGET     3   1      ; cfg
0010    TGETS    3   3   3  ; "lua_modules_path"
0011    CALLT    1   3
0012    JMP      1 => 0033
0013 => GGET     1   4      ; "assert"
0014    GGET     2   0      ; "type"
0015    MOV      3   0
0016    CALL     2   2   2
0017    ISEQS    2   5      ; "table"
0018    JMP      2 => 0021
0019    KPRI     2   1
0020    JMP      3 => 0022
0021 => KPRI     2   2
0022 => CALL     1   1   2
0023    TGETS    1   0   6  ; "lua_dir"
0024    IST          1
0025    JMP      2 => 0032
0026    UGET     1   0      ; dir
0027    TGETS    1   1   2  ; "path"
0028    TGETS    2   0   7  ; "root"
0029    UGET     3   1      ; cfg
0030    TGETS    3   3   3  ; "lua_modules_path"
0031    CALL     1   2   3
0032 => RET1     1   2
0033 => RET0     0   1

-- BYTECODE -- path.lua:77-84
0001    GGET     1   0      ; "type"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISNES    1   1      ; "string"
0005    JMP      1 => 0013
0006    UGET     1   0      ; dir
0007    TGETS    1   1   2  ; "path"
0008    MOV      2   0
0009    UGET     3   1      ; cfg
0010    TGETS    3   3   3  ; "lib_modules_path"
0011    CALLT    1   3
0012    JMP      1 => 0033
0013 => GGET     1   4      ; "assert"
0014    GGET     2   0      ; "type"
0015    MOV      3   0
0016    CALL     2   2   2
0017    ISEQS    2   5      ; "table"
0018    JMP      2 => 0021
0019    KPRI     2   1
0020    JMP      3 => 0022
0021 => KPRI     2   2
0022 => CALL     1   1   2
0023    TGETS    1   0   6  ; "lib_dir"
0024    IST          1
0025    JMP      2 => 0032
0026    UGET     1   0      ; dir
0027    TGETS    1   1   2  ; "path"
0028    TGETS    2   0   7  ; "root"
0029    UGET     3   1      ; cfg
0030    TGETS    3   3   3  ; "lib_modules_path"
0031    CALL     1   2   3
0032 => RET1     1   2
0033 => RET0     0   1

-- BYTECODE -- path.lua:96-110
0001    KPRI     5   0
0002    MOV      7   0
0003    TGETS    6   0   0  ; "match"
0004    KSTR     8   1      ; "%.[a-z]+$"
0005    CALL     6   2   3
0006    UGET     7   0      ; is_src_extension
0007    TGETV    7   7   6
0008    ISF          7
0009    JMP      8 => 0022
0010    UGET     7   1      ; path
0011    TGETS    7   7   2  ; "deploy_lua_dir"
0012    MOV      8   3
0013    CALL     7   2   2
0014    MOV      5   7
0015    UGET     7   2      ; dir
0016    TGETS    7   7   3  ; "path"
0017    MOV      8   5
0018    MOV      9   0
0019    CALL     7   2   3
0020    MOV      0   7
0021    JMP      7 => 0033
0022 => UGET     7   1      ; path
0023    TGETS    7   7   4  ; "deploy_lib_dir"
0024    MOV      8   3
0025    CALL     7   2   2
0026    MOV      5   7
0027    UGET     7   2      ; dir
0028    TGETS    7   7   3  ; "path"
0029    MOV      8   5
0030    MOV      9   0
0031    CALL     7   2   3
0032    MOV      0   7
0033 => KSHORT   7   1
0034    ISGE     7   4
0035    JMP      7 => 0044
0036    UGET     7   1      ; path
0037    TGETS    7   7   5  ; "versioned_name"
0038    MOV      8   0
0039    MOV      9   5
0040    MOV     10   1
0041    MOV     11   2
0042    CALL     7   2   5
0043    MOV      0   7
0044 => RET1     0   2

-- BYTECODE -- path.lua:112-119
0001    GGET     1   0      ; "type"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISNES    1   1      ; "string"
0005    JMP      1 => 0008
0006    RET1     0   2
0007    JMP      1 => 0020
0008 => GGET     1   2      ; "assert"
0009    GGET     2   0      ; "type"
0010    MOV      3   0
0011    CALL     2   2   2
0012    ISEQS    2   3      ; "table"
0013    JMP      2 => 0016
0014    KPRI     2   1
0015    JMP      3 => 0017
0016 => KPRI     2   2
0017 => CALL     1   1   2
0018    TGETS    1   0   4  ; "root"
0019    RET1     1   2
0020 => RET0     0   1

-- BYTECODE -- path.lua:128-148
0001    TNEW     2   0
0002    UGET     3   0      ; cfg
0003    TGETS    3   3   0  ; "root_dir"
0004    IST          3
0005    JMP      4 => 0009
0006    UGET     3   0      ; cfg
0007    TGETS    3   3   1  ; "rocks_trees"
0008    TGETB    3   3   1
0009 => ISNES    0   2      ; "one"
0010    JMP      4 => 0023
0011    GGET     4   3      ; "table"
0012    TGETS    4   4   4  ; "insert"
0013    MOV      5   2
0014    MOV      6   1
0015    MOV      7   3
0016    VARG     8   0   2
0017    CALLM    6   2   1
0018    IST          6
0019    JMP      7 => 0021
0020    KSHORT   6   0
0021 => CALL     4   1   3
0022    JMP      4 => 0067
0023 => KPRI     4   1
0024    ISNES    0   5      ; "all"
0025    JMP      5 => 0027
0026    KPRI     4   2
0027 => GGET     5   6      ; "ipairs"
0028    UGET     6   0      ; cfg
0029    TGETS    6   6   1  ; "rocks_trees"
0030    IST          6
0031    JMP      7 => 0033
0032    TNEW     6   0
0033 => CALL     5   4   2
0034    JMP      8 => 0065
0035 => UGET    10   1      ; dir
0036    TGETS   10  10   7  ; "normalize"
0037    UGET    11   2      ; path
0038    TGETS   11  11   8  ; "rocks_tree_to_string"
0039    MOV     12   9
0040    CALL    11   0   2
0041    CALLM   10   2   0
0042    UGET    11   1      ; dir
0043    TGETS   11  11   7  ; "normalize"
0044    UGET    12   2      ; path
0045    TGETS   12  12   8  ; "rocks_tree_to_string"
0046    MOV     13   3
0047    CALL    12   0   2
0048    CALLM   11   2   0
0049    ISNEV   10  11
0050    JMP     10 => 0052
0051    KPRI     4   2
0052 => ISF          4
0053    JMP     10 => 0065
0054    GGET    10   3      ; "table"
0055    TGETS   10  10   4  ; "insert"
0056    MOV     11   2
0057    MOV     12   1
0058    MOV     13   9
0059    VARG    14   0   2
0060    CALLM   12   2   1
0061    IST         12
0062    JMP     13 => 0064
0063    KSHORT  12   0
0064 => CALL    10   1   3
0065 => ITERC    8   3   3
0066    ITERL    8 => 0035
0067 => RET1     2   2

-- BYTECODE -- path.lua:0-151
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.dir"
0007    CALL     2   2   2
0008    KPRI     3   0
0009    FNEW     4   4      ; path.lua:10
0010    TSETS    4   0   3  ; "rocks_dir"
0011    FNEW     4   6      ; path.lua:27
0012    TSETS    4   0   5  ; "versioned_name"
0013    FNEW     4   8      ; path.lua:44
0014    TSETS    4   0   7  ; "path_to_module"
0015    FNEW     4  10      ; path.lua:68
0016    TSETS    4   0   9  ; "deploy_lua_dir"
0017    FNEW     4  12      ; path.lua:77
0018    TSETS    4   0  11  ; "deploy_lib_dir"
0019    TDUP     4  13
0020    FNEW     5  15      ; path.lua:96
0021    TSETS    5   0  14  ; "which_i"
0022    FNEW     5  17      ; path.lua:112
0023    TSETS    5   0  16  ; "rocks_tree_to_string"
0024    FNEW     5  19      ; path.lua:128
0025    TSETS    5   0  18  ; "map_trees"
0026    UCLO     0 => 0027
0027 => RET1     0   2

-----------------------
-- BYTECODE -- sysdetect.lua:10-12
0001    GGET     1   0      ; "string"
0002    TGETS    1   1   1  ; "char"
0003    GGET     2   2      ; "tonumber"
0004    MOV      3   0
0005    KSHORT   4  16
0006    CALL     2   0   3
0007    CALLMT   1   0

-- BYTECODE -- sysdetect.lua:9-13
0001    MOV      2   0
0002    TGETS    1   0   0  ; "gsub"
0003    KSTR     3   1      ; "$(..)"
0004    FNEW     4   2      ; sysdetect.lua:10
0005    UCLO     0 => 0006
0006 => CALLT    1   4

-- BYTECODE -- sysdetect.lua:15-25
0001    GGET     1   0      ; "io"
0002    TGETS    1   1   1  ; "type"
0003    MOV      2   0
0004    CALL     1   2   2
0005    ISNES    1   2      ; "closed file"
0006    JMP      1 => 0009
0007    KPRI     1   0
0008    RET1     1   2
0009 => MOV      2   0
0010    TGETS    1   0   3  ; "read"
0011    KSHORT   3   1
0012    CALL     1   2   3
0013    IST          1
0014    JMP      2 => 0020
0015    MOV      3   0
0016    TGETS    2   0   4  ; "close"
0017    CALL     2   1   2
0018    KPRI     2   0
0019    RET1     2   2
0020 => MOV      3   1
0021    TGETS    2   1   5  ; "byte"
0022    CALLT    2   2

-- BYTECODE -- sysdetect.lua:30-42
0001    KSHORT   2   0
0002    UGET     3   0      ; LITTLE
0003    ISNEV    1   3
0004    JMP      3 => 0018
0005    LEN      3   0
0006    KSHORT   4   1
0007    KSHORT   5  -1
0008    FORI     3 => 0017
0009 => MULVN    7   2   0  ; 256
0010    MOV      9   0
0011    TGETS    8   0   0  ; "byte"
0012    MOV     10   6
0013    MOV     11   6
0014    CALL     8   2   4
0015    ADDVV    2   7   8
0016    FORL     3 => 0009
0017 => JMP      3 => 0030
0018 => KSHORT   3   1
0019    LEN      4   0
0020    KSHORT   5   1
0021    FORI     3 => 0030
0022 => MULVN    7   2   0  ; 256
0023    MOV      9   0
0024    TGETS    8   0   0  ; "byte"
0025    MOV     10   6
0026    MOV     11   6
0027    CALL     8   2   4
0028    ADDVV    2   7   8
0029    FORL     3 => 0022
0030 => RET1     2   2

-- BYTECODE -- sysdetect.lua:44-54
0001    GGET     3   0      ; "io"
0002    TGETS    3   3   1  ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISNES    3   2      ; "closed file"
0006    JMP      3 => 0009
0007    KPRI     3   0
0008    RET1     3   2
0009 => MOV      4   0
0010    TGETS    3   0   3  ; "read"
0011    MOV      5   1
0012    CALL     3   2   3
0013    IST          3
0014    JMP      4 => 0020
0015    MOV      5   0
0016    TGETS    4   0   4  ; "close"
0017    CALL     4   1   2
0018    KPRI     4   0
0019    RET1     4   2
0020 => UGET     4   0      ; bytes2number
0021    MOV      5   3
0022    MOV      6   2
0023    CALLT    4   3

-- BYTECODE -- sysdetect.lua:56-58
0001    UGET     1   0      ; read
0002    MOV      2   0
0003    KSHORT   3   4
0004    UGET     4   1      ; LITTLE
0005    CALLT    1   4

-- BYTECODE -- sysdetect.lua:99-136
0001    TGETS    2   1   0  ; "endian"
0002    TGETS    3   1   1  ; "word"
0003    KPRI     4   0
0004    TNEW     5   0
0005    KSHORT   6   0
0006    TGETS    7   1   2  ; "e_shnum"
0007    SUBVN    7   7   0  ; 1
0008    KSHORT   8   1
0009    FORI     6 => 0120
0010 => MOV     11   0
0011    TGETS   10   0   3  ; "seek"
0012    KSTR    12   4      ; "set"
0013    TGETS   13   1   5  ; "e_shoff"
0014    TGETS   14   1   6  ; "e_shentsize"
0015    MULVV   14   9  14
0016    ADDVV   13  13  14
0017    CALL    10   1   4
0018    TNEW    10   0
0019    UGET    11   0      ; read
0020    MOV     12   0
0021    KSHORT  13   4
0022    MOV     14   2
0023    CALL    11   2   4
0024    TSETS   11  10   7  ; "sh_name_off"
0025    UGET    11   0      ; read
0026    MOV     12   0
0027    KSHORT  13   4
0028    MOV     14   2
0029    CALL    11   2   4
0030    TSETS   11  10   8  ; "sh_type"
0031    UGET    11   0      ; read
0032    MOV     12   0
0033    MOV     13   3
0034    MOV     14   2
0035    CALL    11   2   4
0036    TSETS   11  10   9  ; "sh_flags"
0037    UGET    11   0      ; read
0038    MOV     12   0
0039    MOV     13   3
0040    MOV     14   2
0041    CALL    11   2   4
0042    TSETS   11  10  10  ; "sh_addr"
0043    UGET    11   0      ; read
0044    MOV     12   0
0045    MOV     13   3
0046    MOV     14   2
0047    CALL    11   2   4
0048    TSETS   11  10  11  ; "sh_offset"
0049    UGET    11   0      ; read
0050    MOV     12   0
0051    MOV     13   3
0052    MOV     14   2
0053    CALL    11   2   4
0054    TSETS   11  10  12  ; "sh_size"
0055    UGET    11   0      ; read
0056    MOV     12   0
0057    KSHORT  13   4
0058    MOV     14   2
0059    CALL    11   2   4
0060    TSETS   11  10  13  ; "sh_link"
0061    UGET    11   0      ; read
0062    MOV     12   0
0063    KSHORT  13   4
0064    MOV     14   2
0065    CALL    11   2   4
0066    TSETS   11  10  14  ; "sh_info"
0067    TGETS   11  10   8  ; "sh_type"
0068    UGET    12   1      ; SHT_NOTE
0069    ISNEV   11  12
0070    JMP     11 => 0110
0071    MOV     12   0
0072    TGETS   11   0   3  ; "seek"
0073    KSTR    13   4      ; "set"
0074    TGETS   14  10  11  ; "sh_offset"
0075    CALL    11   1   4
0076    UGET    11   0      ; read
0077    MOV     12   0
0078    KSHORT  13   4
0079    MOV     14   2
0080    CALL    11   2   4
0081    TSETS   11  10  15  ; "namesz"
0082    UGET    11   0      ; read
0083    MOV     12   0
0084    KSHORT  13   4
0085    MOV     14   2
0086    CALL    11   2   4
0087    TSETS   11  10  16  ; "descsz"
0088    UGET    11   0      ; read
0089    MOV     12   0
0090    KSHORT  13   4
0091    MOV     14   2
0092    CALL    11   2   4
0093    TSETS   11  10  17  ; "type"
0094    MOV     12   0
0095    TGETS   11   0  19  ; "read"
0096    TGETS   13  10  15  ; "namesz"
0097    CALL    11   2   3
0098    MOV     12  11
0099    TGETS   11  11  20  ; "gsub"
0100    KSTR    13  21      ; "%z.*"
0101    KSTR    14  22      ; ""
0102    CALL    11   2   4
0103    TSETS   11  10  18  ; "namedata"
0104    MOV     12   0
0105    TGETS   11   0  19  ; "read"
0106    TGETS   13  10  16  ; "descsz"
0107    CALL    11   2   3
0108    TSETS   11  10  23  ; "descdata"
0109    JMP     11 => 0114
0110 => TGETS   11   1  24  ; "e_shstrndx"
0111    ISNEV    9  11
0112    JMP     11 => 0114
0113    TGETS    4  10  11  ; "sh_offset"
0114 => GGET    11  25      ; "table"
0115    TGETS   11  11  26  ; "insert"
0116    MOV     12   5
0117    MOV     13  10
0118    CALL    11   1   3
0119    FORL     6 => 0010
0120 => ISF          4
0121    JMP      6 => 0146
0122    GGET     6  27      ; "ipairs"
0123    MOV      7   5
0124    CALL     6   4   2
0125    JMP      9 => 0144
0126 => MOV     12   0
0127    TGETS   11   0   3  ; "seek"
0128    KSTR    13   4      ; "set"
0129    TGETS   14  10   7  ; "sh_name_off"
0130    ADDVV   14   4  14
0131    CALL    11   1   4
0132    MOV     12   0
0133    TGETS   11   0  19  ; "read"
0134    KSHORT  13  32
0135    CALL    11   2   3
0136    MOV     12  11
0137    TGETS   11  11  20  ; "gsub"
0138    KSTR    13  21      ; "%z.*"
0139    KSTR    14  22      ; ""
0140    CALL    11   2   4
0141    TSETS   11  10  28  ; "name"
0142    TGETS   11  10  28  ; "name"
0143    TSETV   10   5  11
0144 => ITERC    9   3   3
0145    ITERL    9 => 0126
0146 => RET1     5   2

-- BYTECODE -- sysdetect.lua:138-195
0001    UGET     3   0      ; e_osabi
0002    TGETS    4   1   0  ; "osabi"
0003    TGETV    3   3   4
0004    TGETS    4   1   1  ; "endian"
0005    ISNES    3   2      ; "sysv"
0006    JMP      5 => 0137
0007    TGETS    5   2   3  ; ".note.ABI-tag"
0008    ISF          5
0009    JMP      6 => 0027
0010    TGETS    6   5   4  ; "namedata"
0011    ISNES    6   5      ; "GNU"
0012    JMP      6 => 0047
0013    TGETS    6   5   6  ; "type"
0014    ISNEN    6   0      ; 1
0015    JMP      6 => 0047
0016    TGETS    6   5   7  ; "descdata"
0017    MOV      7   6
0018    TGETS    6   6   8  ; "sub"
0019    KSHORT   8   0
0020    KSHORT   9   4
0021    CALL     6   2   4
0022    ISNES    6   9      ; "\000\000\000\000"
0023    JMP      6 => 0047
0024    KSTR     6  10      ; "linux"
0025    RET1     6   2
0026    JMP      6 => 0047
0027 => TGETS    6   2  11  ; ".SUNW_version"
0028    IST          6
0029    JMP      7 => 0033
0030    TGETS    6   2  12  ; ".SUNW_signature"
0031    ISF          6
0032    JMP      7 => 0036
0033 => KSTR     6  13      ; "solaris"
0034    RET1     6   2
0035    JMP      6 => 0047
0036 => TGETS    6   2  14  ; ".note.netbsd.ident"
0037    ISF          6
0038    JMP      7 => 0042
0039    KSTR     6  15      ; "netbsd"
0040    RET1     6   2
0041    JMP      6 => 0047
0042 => TGETS    6   2  16  ; ".note.openbsd.ident"
0043    ISF          6
0044    JMP      7 => 0047
0045    KSTR     6  17      ; "openbsd"
0046    RET1     6   2
0047 => TGETS    6   2  18  ; ".gnu.version_r"
0048    ISF          6
0049    JMP      7 => 0120
0050    TGETS    7   2  19  ; ".dynstr"
0051    TGETS    7   7  20  ; "sh_offset"
0052    KSHORT   8   0
0053    KSHORT   9   0
0054    TGETS   10   6  21  ; "sh_info"
0055    SUBVN   10  10   0  ; 1
0056    KSHORT  11   1
0057    FORI     9 => 0120
0058 => MOV     14   0
0059    TGETS   13   0  22  ; "seek"
0060    KSTR    15  23      ; "set"
0061    TGETS   16   6  20  ; "sh_offset"
0062    ADDVV   16  16   8
0063    CALL    13   1   4
0064    GGET    13  24      ; "assert"
0065    UGET    14   1      ; read
0066    MOV     15   0
0067    KSHORT  16   2
0068    MOV     17   4
0069    CALL    14   0   4
0070    CALLM   13   1   0
0071    UGET    13   1      ; read
0072    MOV     14   0
0073    KSHORT  15   2
0074    MOV     16   4
0075    CALL    13   2   4
0076    UGET    14   1      ; read
0077    MOV     15   0
0078    KSHORT  16   4
0079    MOV     17   4
0080    CALL    14   2   4
0081    UGET    15   1      ; read
0082    MOV     16   0
0083    KSHORT  17   2
0084    MOV     18   4
0085    CALL    15   2   4
0086    MOV     17   0
0087    TGETS   16   0  22  ; "seek"
0088    KSTR    18  23      ; "set"
0089    ADDVV   19   7  14
0090    CALL    16   1   4
0091    MOV     17   0
0092    TGETS   16   0  25  ; "read"
0093    KSHORT  18  64
0094    CALL    16   2   3
0095    MOV     17  16
0096    TGETS   16  16  26  ; "gsub"
0097    KSTR    18  27      ; "%z.*"
0098    KSTR    19  28      ; ""
0099    CALL    16   2   4
0100    TGETS   17   1  29  ; "e_type"
0101    ISNEN   17   1      ; 3
0102    JMP     17 => 0108
0103    ISNES   16  30      ; "libroot.so"
0104    JMP     17 => 0108
0105    KSTR    17  31      ; "haiku"
0106    RET1    17   2
0107    JMP     17 => 0116
0108 => MOV     18  16
0109    TGETS   17  16  32  ; "match"
0110    KSTR    19  10      ; "linux"
0111    CALL    17   2   3
0112    ISF         17
0113    JMP     18 => 0116
0114    KSTR    17  10      ; "linux"
0115    RET1    17   2
0116 => ADDVN   17  13   0  ; 1
0117    MULVV   17  15  17
0118    ADDVV    8   8  17
0119    FORL     9 => 0058
0120 => GGET     7  33      ; "io"
0121    TGETS    7   7  34  ; "open"
0122    KSTR     8  35      ; "/proc/sys/kernel/ostype"
0123    CALL     7   2   2
0124    ISF          7
0125    JMP      8 => 0137
0126    MOV      9   7
0127    TGETS    8   7  25  ; "read"
0128    KSHORT  10   6
0129    CALL     8   2   3
0130    MOV     10   7
0131    TGETS    9   7  36  ; "close"
0132    CALL     9   1   2
0133    ISNES    8  37      ; "Linux\n"
0134    JMP      9 => 0137
0135    KSTR     9  10      ; "linux"
0136    RET1     9   2
0137 => RET1     3   2

-- BYTECODE -- sysdetect.lua:197-240
0001    TNEW     1   0
0002    UGET     2   0      ; read_int8
0003    MOV      3   0
0004    CALL     2   2   2
0005    TSETS    2   1   0  ; "bits"
0006    UGET     2   0      ; read_int8
0007    MOV      3   0
0008    CALL     2   2   2
0009    TSETS    2   1   1  ; "endian"
0010    UGET     2   0      ; read_int8
0011    MOV      3   0
0012    CALL     2   2   2
0013    TSETS    2   1   2  ; "elf_version"
0014    TGETS    2   1   2  ; "elf_version"
0015    ISEQN    2   0      ; 1
0016    JMP      2 => 0019
0017    KPRI     2   0
0018    RET1     2   2
0019 => UGET     2   0      ; read_int8
0020    MOV      3   0
0021    CALL     2   2   2
0022    TSETS    2   1   3  ; "osabi"
0023    TGETS    2   1   3  ; "osabi"
0024    IST          2
0025    JMP      2 => 0028
0026    KPRI     2   0
0027    RET1     2   2
0028 => TGETS    2   1   1  ; "endian"
0029    MOV      4   0
0030    TGETS    3   0   4  ; "seek"
0031    KSTR     5   5      ; "set"
0032    KSHORT   6  16
0033    CALL     3   1   4
0034    UGET     3   1      ; read
0035    MOV      4   0
0036    KSHORT   5   2
0037    MOV      6   2
0038    CALL     3   2   4
0039    TSETS    3   1   6  ; "e_type"
0040    UGET     3   1      ; read
0041    MOV      4   0
0042    KSHORT   5   2
0043    MOV      6   2
0044    CALL     3   2   4
0045    UGET     4   2      ; e_machines
0046    TGETV    4   4   3
0047    IST          4
0048    JMP      5 => 0050
0049    KSTR     4   7      ; "unknown"
0050 => ISNEN    2   0      ; 1
0051    JMP      5 => 0055
0052    ISNES    4   8      ; "ppc64"
0053    JMP      5 => 0055
0054    KSTR     4   9      ; "ppc64le"
0055 => UGET     5   1      ; read
0056    MOV      6   0
0057    KSHORT   7   4
0058    MOV      8   2
0059    CALL     5   2   4
0060    ISEQN    5   0      ; 1
0061    JMP      6 => 0064
0062    KPRI     6   0
0063    RET1     6   2
0064 => TGETS    6   1   0  ; "bits"
0065    ISNEN    6   0      ; 1
0066    JMP      6 => 0069
0067    KSHORT   6   4
0068    JMP      7 => 0070
0069 => KSHORT   6   8
0070 => TSETS    6   1  10  ; "word"
0071    UGET     7   1      ; read
0072    MOV      8   0
0073    MOV      9   6
0074    MOV     10   2
0075    CALL     7   2   4
0076    TSETS    7   1  11  ; "e_entry"
0077    UGET     7   1      ; read
0078    MOV      8   0
0079    MOV      9   6
0080    MOV     10   2
0081    CALL     7   2   4
0082    TSETS    7   1  12  ; "e_phoff"
0083    UGET     7   1      ; read
0084    MOV      8   0
0085    MOV      9   6
0086    MOV     10   2
0087    CALL     7   2   4
0088    TSETS    7   1  13  ; "e_shoff"
0089    UGET     7   1      ; read
0090    MOV      8   0
0091    KSHORT   9   4
0092    MOV     10   2
0093    CALL     7   2   4
0094    TSETS    7   1  14  ; "e_flags"
0095    UGET     7   1      ; read
0096    MOV      8   0
0097    KSHORT   9   2
0098    MOV     10   2
0099    CALL     7   2   4
0100    TSETS    7   1  15  ; "e_ehsize"
0101    UGET     7   1      ; read
0102    MOV      8   0
0103    KSHORT   9   2
0104    MOV     10   2
0105    CALL     7   2   4
0106    TSETS    7   1  16  ; "e_phentsize"
0107    UGET     7   1      ; read
0108    MOV      8   0
0109    KSHORT   9   2
0110    MOV     10   2
0111    CALL     7   2   4
0112    TSETS    7   1  17  ; "e_phnum"
0113    UGET     7   1      ; read
0114    MOV      8   0
0115    KSHORT   9   2
0116    MOV     10   2
0117    CALL     7   2   4
0118    TSETS    7   1  18  ; "e_shentsize"
0119    UGET     7   1      ; read
0120    MOV      8   0
0121    KSHORT   9   2
0122    MOV     10   2
0123    CALL     7   2   4
0124    TSETS    7   1  19  ; "e_shnum"
0125    UGET     7   1      ; read
0126    MOV      8   0
0127    KSHORT   9   2
0128    MOV     10   2
0129    CALL     7   2   4
0130    TSETS    7   1  20  ; "e_shstrndx"
0131    MOV      7   1
0132    MOV      8   4
0133    RET      7   3

-- BYTECODE -- sysdetect.lua:242-250
0001    UGET     1   0      ; read_elf_header
0002    MOV      2   0
0003    CALL     1   3   2
0004    IST          1
0005    JMP      3 => 0008
0006    KPRI     3   0
0007    RET1     3   2
0008 => UGET     3   1      ; read_elf_section_headers
0009    MOV      4   0
0010    MOV      5   1
0011    CALL     3   2   3
0012    UGET     4   2      ; detect_elf_system
0013    MOV      5   0
0014    MOV      6   1
0015    MOV      7   3
0016    CALL     4   2   4
0017    MOV      5   4
0018    MOV      6   2
0019    RET      5   3

-- BYTECODE -- sysdetect.lua:274-302
0001    IST          0
0002    JMP      2 => 0005
0003    KPRI     2   0
0004    RET1     2   2
0005 => UGET     2   0      ; hex
0006    KSTR     3   0      ; "$CA$FE$BA$BE"
0007    CALL     2   2   2
0008    ISNEV    0   2
0009    JMP      2 => 0036
0010    MOV      3   1
0011    TGETS    2   1   1  ; "seek"
0012    KSTR     4   2      ; "set"
0013    KSHORT   5  18
0014    CALL     2   1   4
0015    UGET     2   1      ; read_int8
0016    MOV      3   1
0017    CALL     2   2   2
0018    IST          2
0019    JMP      3 => 0022
0020    KPRI     3   0
0021    RET1     3   2
0022 => MOV      4   1
0023    TGETS    3   1   1  ; "seek"
0024    KSTR     5   2      ; "set"
0025    MULVN    6   2   0  ; 256
0026    CALL     3   1   4
0027    MOV      4   1
0028    TGETS    3   1   3  ; "read"
0029    KSHORT   5   4
0030    CALL     3   2   3
0031    MOV      0   3
0032    UGET     3   2      ; detect_mach
0033    MOV      4   0
0034    MOV      5   1
0035    CALLT    3   3
0036 => UGET     2   1      ; read_int8
0037    MOV      3   1
0038    CALL     2   2   2
0039    UGET     3   0      ; hex
0040    KSTR     4   4      ; "$CF$FA$ED$FE"
0041    CALL     3   2   2
0042    ISNEV    0   3
0043    JMP      3 => 0052
0044    KSTR     3   5      ; "macosx"
0045    UGET     4   3      ; mach_l64
0046    TGETV    4   4   2
0047    IST          4
0048    JMP      5 => 0050
0049    KSTR     4   6      ; "unknown"
0050 => RET      3   3
0051    JMP      3 => 0090
0052 => UGET     3   0      ; hex
0053    KSTR     4   7      ; "$FE$ED$CF$FA"
0054    CALL     3   2   2
0055    ISNEV    0   3
0056    JMP      3 => 0065
0057    KSTR     3   5      ; "macosx"
0058    UGET     4   4      ; mach_b64
0059    TGETV    4   4   2
0060    IST          4
0061    JMP      5 => 0063
0062    KSTR     4   6      ; "unknown"
0063 => RET      3   3
0064    JMP      3 => 0090
0065 => UGET     3   0      ; hex
0066    KSTR     4   8      ; "$CE$FA$ED$FE"
0067    CALL     3   2   2
0068    ISNEV    0   3
0069    JMP      3 => 0078
0070    KSTR     3   5      ; "macosx"
0071    UGET     4   5      ; mach_l32
0072    TGETV    4   4   2
0073    IST          4
0074    JMP      5 => 0076
0075    KSTR     4   6      ; "unknown"
0076 => RET      3   3
0077    JMP      3 => 0090
0078 => UGET     3   0      ; hex
0079    KSTR     4   9      ; "$FE$ED$FA$CE"
0080    CALL     3   2   2
0081    ISNEV    0   3
0082    JMP      3 => 0090
0083    KSTR     3   5      ; "macosx"
0084    UGET     4   6      ; mach_b32
0085    TGETV    4   4   2
0086    IST          4
0087    JMP      5 => 0089
0088    KSTR     4   6      ; "unknown"
0089 => RET      3   3
0090 => RET0     0   1

-- BYTECODE -- sysdetect.lua:316-338
0001    MOV      2   0
0002    TGETS    1   0   0  ; "seek"
0003    KSTR     3   1      ; "set"
0004    KSHORT   4  60
0005    CALL     1   1   4
0006    UGET     1   0      ; read_int32le
0007    MOV      2   0
0008    CALL     1   2   2
0009    IST          1
0010    JMP      2 => 0013
0011    KPRI     2   0
0012    RET1     2   2
0013 => KSTR     2   2      ; "windows"
0014    MOV      4   0
0015    TGETS    3   0   0  ; "seek"
0016    KSTR     5   1      ; "set"
0017    ADDVN    6   1   0  ; 4
0018    CALL     3   1   4
0019    UGET     3   1      ; read
0020    MOV      4   0
0021    KSHORT   5   2
0022    UGET     6   2      ; LITTLE
0023    CALL     3   2   4
0024    UGET     4   3      ; pe_machine
0025    TGETV    4   4   3
0026    MOV      6   0
0027    TGETS    5   0   3  ; "read"
0028    KSHORT   7 736
0029    CALL     5   2   3
0030    MOV      6   5
0031    TGETS    5   5   4  ; "match"
0032    KSTR     7   5      ; ".rdata%z%z............(....)"
0033    CALL     5   2   3
0034    ISF          5
0035    JMP      6 => 0057
0036    UGET     6   4      ; bytes2number
0037    MOV      7   5
0038    UGET     8   2      ; LITTLE
0039    CALL     6   2   3
0040    MOV      5   6
0041    MOV      7   0
0042    TGETS    6   0   0  ; "seek"
0043    KSTR     8   1      ; "set"
0044    MOV      9   5
0045    CALL     6   1   4
0046    MOV      7   0
0047    TGETS    6   0   3  ; "read"
0048    KSHORT   8 512
0049    CALL     6   2   3
0050    MOV      8   6
0051    TGETS    7   6   4  ; "match"
0052    KSTR     9   6      ; "cyggcc"
0053    CALL     7   2   3
0054    ISF          7
0055    JMP      8 => 0057
0056    KSTR     2   7      ; "cygwin"
0057 => MOV      6   2
0058    ISTC     7   4
0059    JMP      7 => 0061
0060    KSTR     7   8      ; "unknown"
0061 => RET      6   3

-- BYTECODE -- sysdetect.lua:344-358
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    GGET     1   3      ; "io"
0012    TGETS    1   1   4  ; "open"
0013    MOV      2   0
0014    KSTR     3   5      ; "rb"
0015    CALL     1   2   3
0016    IST          1
0017    JMP      2 => 0020
0018    KPRI     2   0
0019    RET1     2   2
0020 => MOV      3   1
0021    TGETS    2   1   6  ; "read"
0022    KSHORT   4   4
0023    CALL     2   2   3
0024    UGET     3   0      ; hex
0025    KSTR     4   7      ; "$7FELF"
0026    CALL     3   2   2
0027    ISNEV    2   3
0028    JMP      3 => 0032
0029    UGET     3   1      ; detect_elf
0030    MOV      4   1
0031    CALLT    3   2
0032 => UGET     3   0      ; hex
0033    KSTR     4   8      ; "MZ$90$00"
0034    CALL     3   2   2
0035    ISNEV    2   3
0036    JMP      3 => 0040
0037    UGET     3   2      ; detect_pe
0038    MOV      4   1
0039    CALLT    3   2
0040 => UGET     3   3      ; detect_mach
0041    MOV      4   2
0042    MOV      5   1
0043    CALLT    3   3

-- BYTECODE -- sysdetect.lua:363-414
0001    GGET     1   0      ; "package"
0002    TGETS    1   1   1  ; "config"
0003    MOV      2   1
0004    TGETS    1   1   2  ; "sub"
0005    KSHORT   3   1
0006    KSHORT   4   1
0007    CALL     1   2   4
0008    KPRI     2   0
0009    ISF          0
0010    JMP      3 => 0015
0011    TNEW     3   3
0012    TSETB    0   3   1
0013    MOV      2   3
0014    JMP      3 => 0098
0015 => UGET     3   0      ; cache_system
0016    ISF          3
0017    JMP      4 => 0021
0018    UGET     3   0      ; cache_system
0019    UGET     4   1      ; cache_processor
0020    RET      3   3
0021 => KPRI     3   0
0022    GGET     4   3      ; "arg"
0023    ISF          4
0024    JMP      5 => 0028
0025    GGET     4   3      ; "arg"
0026    KSHORT   5  -1
0027    TGETV    4   4   5
0028 => ISNES    1   4      ; "/"
0029    JMP      5 => 0033
0030    TDUP     2   5
0031    KSTR     3   6      ; ":"
0032    JMP      5 => 0062
0033 => GGET     5   7      ; "os"
0034    TGETS    5   5   8  ; "getenv"
0035    KSTR     6   9      ; "SystemRoot"
0036    CALL     5   2   2
0037    TNEW     6   3
0038    MOV      7   5
0039    KSTR     8  10      ; "\system32\notepad.exe"
0040    CAT      7   7   8
0041    TSETB    7   6   1
0042    MOV      7   5
0043    KSTR     8  11      ; "\explorer.exe"
0044    CAT      7   7   8
0045    TSETB    7   6   2
0046    MOV      2   6
0047    ISF          4
0048    JMP      6 => 0061
0049    MOV      7   4
0050    TGETS    6   4  12  ; "lower"
0051    CALL     6   2   2
0052    MOV      7   6
0053    TGETS    6   6  13  ; "match"
0054    KSTR     8  14      ; "exe$"
0055    CALL     6   2   3
0056    IST          6
0057    JMP      6 => 0061
0058    MOV      6   4
0059    KSTR     7  15      ; ".exe"
0060    CAT      4   6   7
0061 => KSTR     3  16      ; ";"
0062 => ISF          4
0063    JMP      5 => 0098
0064    MOV      6   4
0065    TGETS    5   4  13  ; "match"
0066    MOV      7   1
0067    CALL     5   2   3
0068    ISF          5
0069    JMP      6 => 0076
0070    GGET     5  17      ; "table"
0071    TGETS    5   5  18  ; "insert"
0072    MOV      6   2
0073    MOV      7   4
0074    CALL     5   1   3
0075    JMP      5 => 0098
0076 => GGET     5   7      ; "os"
0077    TGETS    5   5   8  ; "getenv"
0078    KSTR     6  19      ; "PATH"
0079    CALL     5   2   2
0080    MOV      6   5
0081    TGETS    5   5  20  ; "gmatch"
0082    KSTR     7  21      ; "[^"
0083    MOV      8   3
0084    KSTR     9  22      ; "]+"
0085    CAT      7   7   9
0086    CALL     5   4   3
0087    JMP      8 => 0096
0088 => GGET     9  17      ; "table"
0089    TGETS    9   9  18  ; "insert"
0090    MOV     10   2
0091    MOV     11   8
0092    MOV     12   1
0093    MOV     13   4
0094    CAT     11  11  13
0095    CALL     9   1   3
0096 => ITERC    8   2   3
0097    ITERL    8 => 0088
0098 => GGET     3  23      ; "ipairs"
0099    MOV      4   2
0100    CALL     3   4   2
0101    JMP      6 => 0113
0102 => UGET     8   2      ; sysdetect
0103    TGETS    8   8  24  ; "detect_file"
0104    MOV      9   7
0105    CALL     8   3   2
0106    ISF          8
0107    JMP     10 => 0113
0108    USETV    0   8      ; cache_system
0109    USETV    1   9      ; cache_processor
0110    MOV     10   8
0111    MOV     11   9
0112    RET     10   3
0113 => ITERC    6   3   3
0114    ITERL    6 => 0102
0115    RET0     0   1

-- BYTECODE -- sysdetect.lua:0-417
0001    TNEW     0   0
0002    FNEW     1   0      ; sysdetect.lua:9
0003    FNEW     2   1      ; sysdetect.lua:15
0004    KSHORT   3   1
0005    FNEW     4   2      ; sysdetect.lua:30
0006    FNEW     5   3      ; sysdetect.lua:44
0007    FNEW     6   4      ; sysdetect.lua:56
0008    TDUP     7   5
0009    TDUP     8   6
0010    KSHORT   9   7
0011    FNEW    10   7      ; sysdetect.lua:99
0012    FNEW    11   8      ; sysdetect.lua:138
0013    FNEW    12   9      ; sysdetect.lua:197
0014    FNEW    13  10      ; sysdetect.lua:242
0015    TDUP    14  11
0016    TDUP    15  12
0017    TDUP    16  13
0018    TDUP    17  14
0019    FNEW    18  15      ; sysdetect.lua:274
0020    TDUP    19  16
0021    FNEW    20  17      ; sysdetect.lua:316
0022    FNEW    21  19      ; sysdetect.lua:344
0023    TSETS   21   0  18  ; "detect_file"
0024    KNIL    21  22
0025    FNEW    23  21      ; sysdetect.lua:363
0026    TSETS   23   0  20  ; "detect"
0027    UCLO     0 => 0028
0028 => RET1     0   2

-----------------------
-- BYTECODE -- vers.lua:26-39
0001    LEN      2   0
0002    LEN      3   1
0003    ISEQV    2   3
0004    JMP      2 => 0007
0005    KPRI     2   1
0006    RET1     2   2
0007 => KSHORT   2   1
0008    LEN      3   0
0009    KSHORT   4   1
0010    FORI     2 => 0018
0011 => TGETV    6   0   5
0012    TGETV    7   1   5
0013    ISEQV    6   7
0014    JMP      6 => 0017
0015    KPRI     6   1
0016    RET1     6   2
0017 => FORL     2 => 0011
0018 => TGETS    2   0   0  ; "revision"
0019    ISF          2
0020    JMP      3 => 0032
0021    TGETS    2   1   0  ; "revision"
0022    ISF          2
0023    JMP      3 => 0032
0024    TGETS    2   0   0  ; "revision"
0025    TGETS    3   1   0  ; "revision"
0026    ISEQV    2   3
0027    JMP      2 => 0030
0028    KPRI     2   1
0029    JMP      3 => 0031
0030 => KPRI     2   2
0031 => RET1     2   2
0032 => KPRI     2   2
0033    RET1     2   2

-- BYTECODE -- vers.lua:47-58
0001    KSHORT   2   1
0002    GGET     3   0      ; "math"
0003    TGETS    3   3   1  ; "max"
0004    LEN      4   0
0005    LEN      5   1
0006    CALL     3   2   3
0007    KSHORT   4   1
0008    FORI     2 => 0026
0009 => TGETV    6   0   5
0010    IST          6
0011    JMP      7 => 0013
0012    KSHORT   6   0
0013 => TGETV    7   1   5
0014    IST          7
0015    JMP      8 => 0017
0016    KSHORT   7   0
0017 => ISEQV    6   7
0018    JMP      8 => 0025
0019    ISLT     6   7
0020    JMP      8 => 0023
0021    KPRI     8   1
0022    JMP      9 => 0024
0023 => KPRI     8   2
0024 => RET1     8   2
0025 => FORL     2 => 0009
0026 => TGETS    2   0   2  ; "revision"
0027    ISF          2
0028    JMP      3 => 0040
0029    TGETS    2   1   2  ; "revision"
0030    ISF          2
0031    JMP      3 => 0040
0032    TGETS    2   0   2  ; "revision"
0033    TGETS    3   1   2  ; "revision"
0034    ISLT     2   3
0035    JMP      2 => 0038
0036    KPRI     2   1
0037    JMP      3 => 0039
0038 => KPRI     2   2
0039 => RET1     2   2
0040 => KPRI     2   1
0041    RET1     2   2

-- BYTECODE -- vers.lua:62-64
0001    ISGE     1   0
0002    JMP      2 => 0005
0003    KPRI     2   1
0004    JMP      3 => 0006
0005 => KPRI     2   2
0006 => RET1     2   2

-- BYTECODE -- vers.lua:68-70
0001    TGETS    1   0   0  ; "string"
0002    RET1     1   2

-- BYTECODE -- vers.lua:101-104
0001    UGET     1   0      ; version
0002    UGET     2   1      ; i
0003    UGET     3   0      ; version
0004    UGET     4   1      ; i
0005    TGETV    3   3   4
0006    ISF          3
0007    JMP      4 => 0015
0008    UGET     3   0      ; version
0009    UGET     4   1      ; i
0010    TGETV    3   3   4
0011    DIVVN    4   0   0  ; 100000
0012    ADDVV    3   3   4
0013    IST          3
0014    JMP      4 => 0016
0015 => MOV      3   0
0016 => TSETV    3   1   2
0017    UGET     1   1      ; i
0018    ADDVN    1   1   1  ; 1
0019    USETV    1   1      ; i
0020    RET0     0   1

-- BYTECODE -- vers.lua:89-135
0001    IST          0
0002    JMP      1 => 0005
0003    KPRI     1   0
0004    UCLO     0 => 0093
0005 => GGET     1   0      ; "assert"
0006    GGET     2   1      ; "type"
0007    MOV      3   0
0008    CALL     2   2   2
0009    ISEQS    2   2      ; "string"
0010    JMP      2 => 0013
0011    KPRI     2   1
0012    JMP      3 => 0014
0013 => KPRI     2   2
0014 => CALL     1   1   2
0015    UGET     1   0      ; version_cache
0016    TGETV    1   1   0
0017    ISF          1
0018    JMP      2 => 0020
0019    UCLO     0 => 0094
0020 => TNEW     2   0
0021    KSHORT   3   1
0022    FNEW     4   3      ; vers.lua:101
0023    MOV      6   0
0024    TGETS    5   0   4  ; "match"
0025    KSTR     7   5      ; "^%s*(.*)%s*$"
0026    CALL     5   2   3
0027    TSETS    5   2   2  ; "string"
0028    MOV      7   5
0029    TGETS    6   5   4  ; "match"
0030    KSTR     8   6      ; "(.*)%-(%d+)$"
0031    CALL     6   3   3
0032    ISF          7
0033    JMP      8 => 0039
0034    MOV      5   6
0035    GGET     8   8      ; "tonumber"
0036    MOV      9   7
0037    CALL     8   2   2
0038    TSETS    8   2   7  ; "revision"
0039 => LEN      8   5
0040    KSHORT   9   0
0041    ISGE     9   8
0042    JMP      8 => 0085
0043    LOOP     8 => 0085
0044    MOV      9   5
0045    TGETS    8   5   4  ; "match"
0046    KSTR    10   9      ; "^(%d+)[%.%-%_]*(.*)"
0047    CALL     8   3   3
0048    ISF          8
0049    JMP     10 => 0056
0050    MOV     10   4
0051    GGET    11   8      ; "tonumber"
0052    MOV     12   8
0053    CALL    11   0   2
0054    CALLM   10   1   0
0055    JMP     10 => 0083
0056 => MOV     11   5
0057    TGETS   10   5   4  ; "match"
0058    KSTR    12  10      ; "^(%a+)[%.%-%_]*(.*)"
0059    CALL    10   3   3
0060    MOV      9  11
0061    MOV      8  10
0062    IST          8
0063    JMP     10 => 0074
0064    UGET    10   1      ; util
0065    TGETS   10  10  11  ; "warning"
0066    KSTR    11  12      ; "version number '"
0067    MOV     12   5
0068    KSTR    13  13      ; "' could not be parsed."
0069    CAT     11  11  13
0070    CALL    10   1   2
0071    KSHORT  10   0
0072    TSETV   10   2   3
0073    JMP      8 => 0085
0074 => UGET    10   2      ; deltas
0075    TGETV   10  10   8
0076    IST         10
0077    JMP     11 => 0082
0078    MOV     11   8
0079    TGETS   10   8  14  ; "byte"
0080    CALL    10   2   2
0081    DIVVN   10  10   0  ; 1000
0082 => TSETV   10   2   3
0083 => MOV      5   9
0084    JMP      8 => 0039
0085 => GGET     8  15      ; "setmetatable"
0086    MOV      9   2
0087    UGET    10   3      ; version_mt
0088    CALL     8   1   3
0089    UGET     8   0      ; version_cache
0090    TSETV    2   8   0
0091    UCLO     0 => 0092
0092 => RET1     2   2
0093 => RET1     1   2
0094 => RET1     1   2

-- BYTECODE -- vers.lua:141-146
0001    ISNEV    0   1
0002    JMP      2 => 0005
0003    KPRI     2   1
0004    RET1     2   2
0005 => UGET     2   0      ; vers
0006    TGETS    2   2   0  ; "parse_version"
0007    MOV      3   0
0008    CALL     2   2   2
0009    UGET     3   0      ; vers
0010    TGETS    3   3   0  ; "parse_version"
0011    MOV      4   1
0012    CALL     3   2   2
0013    ISLT     3   2
0014    JMP      2 => 0017
0015    KPRI     2   1
0016    JMP      3 => 0018
0017 => KPRI     2   2
0018 => RET1     2   2

-- BYTECODE -- vers.lua:160-176
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0014
0007    GGET     3   1      ; "type"
0008    MOV      4   0
0009    CALL     3   2   2
0010    ISEQS    3   3      ; "table"
0011    JMP      3 => 0014
0012    KPRI     3   1
0013    JMP      4 => 0015
0014 => KPRI     3   2
0015 => CALL     2   1   2
0016    GGET     2   0      ; "assert"
0017    GGET     3   1      ; "type"
0018    MOV      4   1
0019    CALL     3   2   2
0020    ISEQS    3   2      ; "string"
0021    JMP      3 => 0029
0022    GGET     3   1      ; "type"
0023    MOV      4   0
0024    CALL     3   2   2
0025    ISEQS    3   3      ; "table"
0026    JMP      3 => 0029
0027    KPRI     3   1
0028    JMP      4 => 0030
0029 => KPRI     3   2
0030 => CALL     2   1   2
0031    GGET     2   1      ; "type"
0032    MOV      3   0
0033    CALL     2   2   2
0034    ISEQS    2   3      ; "table"
0035    JMP      2 => 0041
0036    UGET     2   0      ; vers
0037    TGETS    2   2   4  ; "parse_version"
0038    MOV      3   0
0039    CALL     2   2   2
0040    MOV      0   2
0041 => GGET     2   1      ; "type"
0042    MOV      3   1
0043    CALL     2   2   2
0044    ISEQS    2   3      ; "table"
0045    JMP      2 => 0051
0046    UGET     2   0      ; vers
0047    TGETS    2   2   4  ; "parse_version"
0048    MOV      3   1
0049    CALL     2   2   2
0050    MOV      1   2
0051 => ISF          0
0052    JMP      2 => 0055
0053    IST          1
0054    JMP      2 => 0057
0055 => KPRI     2   1
0056    RET1     2   2
0057 => GGET     2   5      ; "ipairs"
0058    MOV      3   1
0059    CALL     2   4   2
0060    JMP      5 => 0069
0061 => TGETV    7   0   5
0062    IST          7
0063    JMP      8 => 0065
0064    KSHORT   7   0
0065 => ISEQV    6   7
0066    JMP      8 => 0069
0067    KPRI     8   1
0068    RET1     8   2
0069 => ITERC    5   3   3
0070    ITERL    5 => 0061
0071    TGETS    2   1   6  ; "revision"
0072    ISF          2
0073    JMP      3 => 0082
0074    TGETS    2   1   6  ; "revision"
0075    TGETS    3   0   6  ; "revision"
0076    ISEQV    2   3
0077    JMP      2 => 0080
0078    KPRI     2   1
0079    JMP      3 => 0081
0080 => KPRI     2   2
0081 => RET1     2   2
0082 => KPRI     2   2
0083    RET1     2   2

-- BYTECODE -- vers.lua:183-205
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "table"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    KPRI     2   2
0022    GGET     3   3      ; "setmetatable"
0023    MOV      4   0
0024    UGET     5   0      ; version_mt
0025    CALL     3   1   3
0026    GGET     3   4      ; "pairs"
0027    MOV      4   1
0028    CALL     3   4   2
0029    ISNEXT   6 => 0104
0030 => GGET     8   1      ; "type"
0031    TGETS    9   7   5  ; "version"
0032    CALL     8   2   2
0033    ISNES    8   6      ; "string"
0034    JMP      8 => 0040
0035    UGET     8   1      ; vers
0036    TGETS    8   8   7  ; "parse_version"
0037    TGETS    9   7   5  ; "version"
0038    CALL     8   2   2
0039    TSETS    8   7   5  ; "version"
0040 => TGETS    8   7   5  ; "version"
0041    TGETS    9   7   8  ; "op"
0042    GGET    10   3      ; "setmetatable"
0043    MOV     11   8
0044    UGET    12   0      ; version_mt
0045    CALL    10   1   3
0046    ISNES    9   9      ; "=="
0047    JMP     10 => 0054
0048    ISEQV    0   8
0049    JMP     10 => 0052
0050    KPRI     2   1
0051    JMP     10 => 0053
0052 => KPRI     2   2
0053 => JMP     10 => 0101
0054 => ISNES    9  10      ; "~="
0055    JMP     10 => 0062
0056    ISNEV    0   8
0057    JMP     10 => 0060
0058    KPRI     2   1
0059    JMP     10 => 0061
0060 => KPRI     2   2
0061 => JMP     10 => 0101
0062 => ISNES    9  11      ; ">"
0063    JMP     10 => 0070
0064    ISLT     8   0
0065    JMP     10 => 0068
0066    KPRI     2   1
0067    JMP     10 => 0069
0068 => KPRI     2   2
0069 => JMP     10 => 0101
0070 => ISNES    9  12      ; "<"
0071    JMP     10 => 0078
0072    ISLT     0   8
0073    JMP     10 => 0076
0074    KPRI     2   1
0075    JMP     10 => 0077
0076 => KPRI     2   2
0077 => JMP     10 => 0101
0078 => ISNES    9  13      ; ">="
0079    JMP     10 => 0086
0080    ISLE     8   0
0081    JMP     10 => 0084
0082    KPRI     2   1
0083    JMP     10 => 0085
0084 => KPRI     2   2
0085 => JMP     10 => 0101
0086 => ISNES    9  14      ; "<="
0087    JMP     10 => 0094
0088    ISLE     0   8
0089    JMP     10 => 0092
0090    KPRI     2   1
0091    JMP     10 => 0093
0092 => KPRI     2   2
0093 => JMP     10 => 0101
0094 => ISNES    9  15      ; "~>"
0095    JMP     10 => 0101
0096    UGET    10   2      ; partial_match
0097    MOV     11   0
0098    MOV     12   8
0099    CALL    10   2   3
0100    MOV      2  10
0101 => IST          2
0102    JMP     10 => 0104
0103    JMP      3 => 0106
0104 => ITERN    6   3   3
0105    ITERL    6 => 0030
0106 => RET1     2   2

-- BYTECODE -- vers.lua:0-208
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.util"
0004    CALL     1   2   2
0005    KPRI     2   0
0006    TDUP     3   2
0007    TDUP     4   4
0008    FNEW     5   3      ; vers.lua:26
0009    TSETS    5   4   5  ; "__eq"
0010    FNEW     5   6      ; vers.lua:47
0011    TSETS    5   4   7  ; "__lt"
0012    FNEW     5   8      ; vers.lua:62
0013    TSETS    5   4   9  ; "__le"
0014    FNEW     5  10      ; vers.lua:68
0015    TSETS    5   4  11  ; "__tostring"
0016    TNEW     5   0
0017    GGET     6  12      ; "setmetatable"
0018    MOV      7   5
0019    TDUP     8  13
0020    CALL     6   1   3
0021    FNEW     6  15      ; vers.lua:89
0022    TSETS    6   0  14  ; "parse_version"
0023    FNEW     6  17      ; vers.lua:141
0024    TSETS    6   0  16  ; "compare_versions"
0025    FNEW     6  18      ; vers.lua:160
0026    FNEW     7  20      ; vers.lua:183
0027    TSETS    7   0  19  ; "match_constraints"
0028    UCLO     0 => 0029
0029 => RET1     0   2

-----------------------
-- BYTECODE -- cfg.lua:50-69
0001    GGET     0   0      ; "debug"
0002    TGETS    0   0   1  ; "getinfo"
0003    KSHORT   1   1
0004    KSTR     2   2      ; "S"
0005    CALL     0   2   3
0006    TGETS    0   0   3  ; "source"
0007    MOV      1   0
0008    TGETS    0   0   4  ; "gsub"
0009    KSTR     2   5      ; "\"
0010    KSTR     3   6      ; "/"
0011    CALL     0   2   4
0012    MOV      1   0
0013    TGETS    0   0   4  ; "gsub"
0014    KSTR     2   7      ; "/+"
0015    KSTR     3   6      ; "/"
0016    CALL     0   2   4
0017    MOV      2   0
0018    TGETS    1   0   8  ; "sub"
0019    KSHORT   3   1
0020    KSHORT   4   1
0021    CALL     1   2   4
0022    ISNES    1   9      ; "@"
0023    JMP      1 => 0029
0024    MOV      2   0
0025    TGETS    1   0   8  ; "sub"
0026    KSHORT   3   2
0027    CALL     1   2   3
0028    MOV      0   1
0029 => MOV      2   0
0030    TGETS    1   0  10  ; "match"
0031    KSTR     3  11      ; "^(.*)/luarocks/core/cfg.lua$"
0032    CALL     1   2   3
0033    IST          1
0034    JMP      2 => 0036
0035    RET0     0   1
0036 => MOV      3   1
0037    TGETS    2   1  10  ; "match"
0038    KSTR     4  12      ; "^(.*)/share/lua/[^/]*$"
0039    CALL     2   2   3
0040    ISF          2
0041    JMP      3 => 0050
0042    ISNES    2  13      ; "/usr"
0043    JMP      3 => 0046
0044    KSTR     3  14      ; "/etc/luarocks"
0045    RET1     3   2
0046 => MOV      3   2
0047    KSTR     4  14      ; "/etc/luarocks"
0048    CAT      3   3   4
0049    RET1     3   2
0050 => RET1     1   2

-- BYTECODE -- cfg.lua:71-87
0001    UGET     3   0      ; os
0002    TGETS    3   3   0  ; "getenv"
0003    KSTR     4   1      ; "LUAROCKS_SYSCONFDIR"
0004    CALL     3   2   2
0005    IST          3
0006    JMP      4 => 0008
0007    MOV      3   2
0008 => TGETS    4   1   2  ; "windows"
0009    ISF          4
0010    JMP      5 => 0038
0011    UGET     4   0      ; os
0012    TGETS    4   4   0  ; "getenv"
0013    KSTR     5   4      ; "APPDATA"
0014    CALL     4   2   2
0015    IST          4
0016    JMP      5 => 0018
0017    KSTR     4   5      ; "c:"
0018 => TSETS    4   0   3  ; "home"
0019    TGETS    4   0   3  ; "home"
0020    KSTR     5   7      ; "/luarocks"
0021    CAT      4   4   5
0022    TSETS    4   0   6  ; "home_tree"
0023    TGETS    4   0   6  ; "home_tree"
0024    TSETS    4   0   8  ; "homeconfdir"
0025    ISTC     4   3
0026    JMP      4 => 0036
0027    UGET     4   0      ; os
0028    TGETS    4   4   0  ; "getenv"
0029    KSTR     5  10      ; "PROGRAMFILES"
0030    CALL     4   2   2
0031    IST          4
0032    JMP      5 => 0034
0033    KSTR     4   5      ; "c:"
0034 => KSTR     5   7      ; "/luarocks"
0035    CAT      4   4   5
0036 => TSETS    4   0   9  ; "sysconfdir"
0037    JMP      4 => 0073
0038 => IST          3
0039    JMP      4 => 0043
0040    UGET     4   1      ; detect_sysconfdir
0041    CALL     4   2   1
0042    MOV      3   4
0043 => UGET     4   0      ; os
0044    TGETS    4   4   0  ; "getenv"
0045    KSTR     5  11      ; "HOME"
0046    CALL     4   2   2
0047    IST          4
0048    JMP      5 => 0050
0049    KSTR     4  12      ; ""
0050 => TSETS    4   0   3  ; "home"
0051    UGET     4   0      ; os
0052    TGETS    4   4   0  ; "getenv"
0053    KSTR     5  13      ; "USER"
0054    CALL     4   2   2
0055    ISEQS    4  14      ; "root"
0056    JMP      4 => 0061
0057    TGETS    4   0   3  ; "home"
0058    KSTR     5  15      ; "/.luarocks"
0059    CAT      4   4   5
0060    JMP      5 => 0064
0061 => KPRI     4   1
0062    JMP      5 => 0064
0063    KPRI     4   2
0064 => TSETS    4   0   6  ; "home_tree"
0065    TGETS    4   0   3  ; "home"
0066    KSTR     5  15      ; "/.luarocks"
0067    CAT      4   4   5
0068    TSETS    4   0   8  ; "homeconfdir"
0069    ISTC     4   3
0070    JMP      4 => 0072
0071    KSTR     4  16      ; "/etc/luarocks"
0072 => TSETS    4   0   9  ; "sysconfdir"
0073 => RET0     0   1

-- BYTECODE -- cfg.lua:102-106
0001    GGET     0   0      ; "print"
0002    UGET     1   0      ; util
0003    TGETS    1   1   1  ; "show_table"
0004    UGET     2   1      ; e
0005    KSTR     3   2      ; "global environment"
0006    CALL     1   0   3
0007    CALLM    0   1   0
0008    RET0     0   1

-- BYTECODE -- cfg.lua:92-109
0001    KPRI     2   0
0002    TDUP     3   1
0003    TGETS    4   0   0  ; "home"
0004    TSETS    4   3   0  ; "home"
0005    TGETS    4   0   2  ; "lua_version"
0006    TSETS    4   3   2  ; "lua_version"
0007    UGET     4   0      ; util
0008    TGETS    4   4   3  ; "make_shallow_copy"
0009    MOV      5   1
0010    CALL     4   2   2
0011    TSETS    4   3   4  ; "platforms"
0012    TGETS    4   0   5  ; "target_cpu"
0013    TSETS    4   3   6  ; "processor"
0014    TGETS    4   0   5  ; "target_cpu"
0015    TSETS    4   3   5  ; "target_cpu"
0016    UGET     4   1      ; os
0017    TGETS    4   4   7  ; "getenv"
0018    TSETS    4   3   8  ; "os_getenv"
0019    TGETS    4   0   9  ; "variables"
0020    IST          4
0021    JMP      5 => 0023
0022    TNEW     4   0
0023 => TSETS    4   3   9  ; "variables"
0024    FNEW     4  10      ; cfg.lua:102
0025    TSETS    4   3  11  ; "dump_env"
0026    MOV      2   3
0027    UCLO     0 => 0028
0028 => RET1     2   2

-- BYTECODE -- cfg.lua:112-121
0001    KPRI     2   0
0002    TSETS    2   1   0  ; "os_getenv"
0003    KPRI     2   0
0004    TSETS    2   1   1  ; "dump_env"
0005    TGETS    2   1   2  ; "rocks_trees"
0006    ISF          2
0007    JMP      3 => 0010
0008    KPRI     2   0
0009    TSETS    2   0   2  ; "rocks_trees"
0010 => TGETS    2   1   3  ; "rocks_servers"
0011    ISF          2
0012    JMP      3 => 0015
0013    KPRI     2   0
0014    TSETS    2   0   3  ; "rocks_servers"
0015 => UGET     2   0      ; util
0016    TGETS    2   2   4  ; "deep_merge"
0017    MOV      3   0
0018    MOV      4   1
0019    CALL     2   1   3
0020    RET0     0   1

-- BYTECODE -- cfg.lua:123-137
0001    TGETB    2   1   1
0002    ISF          2
0003    JMP      3 => 0034
0004    UGET     2   0      ; pairs
0005    MOV      3   0
0006    CALL     2   4   2
0007    ISNEXT   5 => 0010
0008 => KPRI     7   0
0009    TSETV    7   0   5
0010 => ITERN    5   3   3
0011    ITERL    5 => 0008
0012    UGET     2   1      ; ipairs
0013    MOV      3   1
0014    CALL     2   4   2
0015    JMP      5 => 0018
0016 => KPRI     7   2
0017    TSETV    7   0   6
0018 => ITERC    5   3   3
0019    ITERL    5 => 0016
0020    TGETS    2   0   0  ; "unix"
0021    IST          2
0022    JMP      3 => 0034
0023    TGETS    2   0   1  ; "windows"
0024    IST          2
0025    JMP      2 => 0034
0026    UGET     2   2      ; is_windows
0027    ISF          2
0028    JMP      3 => 0031
0029    KSTR     2   1      ; "windows"
0030    JMP      3 => 0032
0031 => KSTR     2   0      ; "unix"
0032 => KPRI     3   2
0033    TSETV    3   0   2
0034 => RET0     0   1

-- BYTECODE -- cfg.lua:141-155
0001    UGET     3   0      ; persist
0002    TGETS    3   3   0  ; "load_into_table"
0003    MOV      4   2
0004    UGET     5   1      ; env_for_config_file
0005    MOV      6   0
0006    MOV      7   1
0007    CALL     5   0   3
0008    CALLM    3   4   1
0009    IST          3
0010    JMP      6 => 0017
0011    ISEQS    5   1      ; "open"
0012    JMP      6 => 0017
0013    KPRI     6   0
0014    MOV      7   4
0015    KSTR     8   2      ; "config"
0016    RET      6   4
0017 => ISF          3
0018    JMP      6 => 0030
0019    UGET     6   2      ; update_platforms
0020    MOV      7   1
0021    TGETS    8   3   3  ; "platforms"
0022    CALL     6   1   3
0023    KPRI     6   0
0024    TSETS    6   3   3  ; "platforms"
0025    UGET     6   3      ; merge_overrides
0026    MOV      7   0
0027    MOV      8   3
0028    CALL     6   1   3
0029    RET1     2   2
0030 => KPRI     6   0
0031    RET1     6   2

-- BYTECODE -- cfg.lua:172-175
0001    UGET     1   0      ; platform_sets
0002    TGETV    1   1   0
0003    IST          1
0004    JMP      2 => 0006
0005    TDUP     1   0
0006 => RET1     1   2

-- BYTECODE -- cfg.lua:179-483
0001    TDUP     4   0
0002    KSTR     5   1      ; "/share/lua/"
0003    MOV      6   0
0004    CAT      5   5   6
0005    TSETS    5   4   2  ; "lua_modules_path"
0006    KSTR     5   3      ; "/lib/lua/"
0007    MOV      6   0
0008    CAT      5   5   6
0009    TSETS    5   4   4  ; "lib_modules_path"
0010    KSTR     5   5      ; "/lib/luarocks/rocks-"
0011    MOV      6   0
0012    CAT      5   5   6
0013    TSETS    5   4   6  ; "rocks_subdir"
0014    TNEW     5   3
0015    TDUP     6   7
0016    TSETB    6   5   1
0017    TSETS    5   4   8  ; "rocks_servers"
0018    TNEW     5   0
0019    TSETS    5   4   9  ; "disabled_servers"
0020    TDUP     5  10
0021    TSETS    5   4  11  ; "upload"
0022    TDUP     5  12
0023    TSETS    5   4  13  ; "variables"
0024    TDUP     5  14
0025    TSETS    5   4  15  ; "external_deps_subdirs"
0026    TDUP     5  16
0027    TSETS    5   4  17  ; "runtime_external_deps_subdirs"
0028    TGETS    5   2  18  ; "windows"
0029    ISF          5
0030    JMP      6 => 0128
0031    KSTR     5  20      ; "win32-"
0032    MOV      6   1
0033    CAT      5   5   6
0034    TSETS    5   4  19  ; "arch"
0035    KSTR     5  22      ; "dll"
0036    TSETS    5   4  21  ; "lib_extension"
0037    KSTR     5  22      ; "dll"
0038    TSETS    5   4  23  ; "external_lib_extension"
0039    KSTR     5  25      ; "lib"
0040    TSETS    5   4  24  ; "static_lib_extension"
0041    KSTR     5  27      ; "obj"
0042    TSETS    5   4  26  ; "obj_extension"
0043    TDUP     5  29
0044    TSETS    5   4  28  ; "external_deps_dirs"
0045    KSTR     5  31      ; "Makefile.win"
0046    TSETS    5   4  30  ; "makefile"
0047    TGETS    5   4  13  ; "variables"
0048    KSTR     6  33      ; "nmake"
0049    TSETS    6   5  32  ; "MAKE"
0050    TGETS    5   4  13  ; "variables"
0051    KSTR     6  35      ; "cl"
0052    TSETS    6   5  34  ; "CC"
0053    TGETS    5   4  13  ; "variables"
0054    KSTR     6  37      ; "rc"
0055    TSETS    6   5  36  ; "RC"
0056    TGETS    5   4  13  ; "variables"
0057    KSTR     6  39      ; "link"
0058    TSETS    6   5  38  ; "LD"
0059    TGETS    5   4  13  ; "variables"
0060    KSTR     6  41      ; "mt"
0061    TSETS    6   5  40  ; "MT"
0062    TGETS    5   4  13  ; "variables"
0063    KSTR     6  25      ; "lib"
0064    TSETS    6   5  42  ; "AR"
0065    TGETS    5   4  13  ; "variables"
0066    KSTR     6  44      ; "lua"
0067    MOV      7   0
0068    KSTR     8  45      ; ".lib"
0069    CAT      6   6   8
0070    TSETS    6   5  43  ; "LUALIB"
0071    TGETS    5   4  13  ; "variables"
0072    KSTR     6  47      ; "/nologo /MD /O2"
0073    TSETS    6   5  46  ; "CFLAGS"
0074    TGETS    5   4  13  ; "variables"
0075    KSTR     6  49      ; "/nologo /dll"
0076    TSETS    6   5  48  ; "LIBFLAG"
0077    TDUP     5  52
0078    TDUP     6  51
0079    TSETS    6   5  53  ; "bin"
0080    TDUP     6  54
0081    TSETS    6   5  25  ; "lib"
0082    TDUP     6  55
0083    TSETS    6   5  56  ; "include"
0084    TSETS    5   4  50  ; "external_deps_patterns"
0085    TDUP     5  59
0086    TDUP     6  58
0087    TSETS    6   5  53  ; "bin"
0088    TDUP     6  60
0089    TSETS    6   5  25  ; "lib"
0090    TDUP     6  61
0091    TSETS    6   5  56  ; "include"
0092    TSETS    5   4  57  ; "runtime_external_deps_patterns"
0093    KSTR     5  63      ; ";"
0094    TSETS    5   4  62  ; "export_path_separator"
0095    KSTR     5  65      ; ".bat"
0096    TSETS    5   4  64  ; "wrapper_suffix"
0097    UGET     5   0      ; os
0098    TGETS    5   5  66  ; "getenv"
0099    KSTR     6  67      ; "LOCALAPPDATA"
0100    CALL     5   2   2
0101    IST          5
0102    JMP      6 => 0112
0103    UGET     6   0      ; os
0104    TGETS    6   6  66  ; "getenv"
0105    KSTR     7  68      ; "USERPROFILE"
0106    CALL     6   2   2
0107    IST          6
0108    JMP      7 => 0110
0109    KSTR     6  69      ; "c:/Users/All Users"
0110 => KSTR     7  70      ; "/Local Settings/Application Data"
0111    CAT      5   6   7
0112 => MOV      6   5
0113    KSTR     7  72      ; "/LuaRocks/Cache"
0114    CAT      6   6   7
0115    TSETS    6   4  71  ; "local_cache"
0116    KSTR     6  74      ; "start"
0117    TSETS    6   4  73  ; "web_browser"
0118    TGETS    6   4  15  ; "external_deps_subdirs"
0119    TDUP     7  75
0120    TSETS    7   6  25  ; "lib"
0121    TGETS    6   4  17  ; "runtime_external_deps_subdirs"
0122    TDUP     7  76
0123    TSETS    7   6  25  ; "lib"
0124    KPRI     6   2
0125    TSETS    6   4  77  ; "link_lua_explicitly"
0126    KPRI     6   1
0127    TSETS    6   4  78  ; "fs_use_modules"
0128 => TGETS    5   2  79  ; "mingw32"
0129    ISF          5
0130    JMP      6 => 0183
0131    KSTR     5  80      ; "o"
0132    TSETS    5   4  26  ; "obj_extension"
0133    KSTR     5  81      ; "a"
0134    TSETS    5   4  24  ; "static_lib_extension"
0135    TDUP     5  82
0136    TSETS    5   4  28  ; "external_deps_dirs"
0137    KSTR     5  84      ; "MinGW Makefiles"
0138    TSETS    5   4  83  ; "cmake_generator"
0139    TGETS    5   4  13  ; "variables"
0140    KSTR     6  85      ; "mingw32-make"
0141    TSETS    6   5  32  ; "MAKE"
0142    TGETS    5   4  13  ; "variables"
0143    KSTR     6  86      ; "mingw32-gcc"
0144    TSETS    6   5  34  ; "CC"
0145    TGETS    5   4  13  ; "variables"
0146    KSTR     6  87      ; "windres"
0147    TSETS    6   5  36  ; "RC"
0148    TGETS    5   4  13  ; "variables"
0149    KSTR     6  86      ; "mingw32-gcc"
0150    TSETS    6   5  38  ; "LD"
0151    TGETS    5   4  13  ; "variables"
0152    KSTR     6  88      ; "ar"
0153    TSETS    6   5  42  ; "AR"
0154    TGETS    5   4  13  ; "variables"
0155    KSTR     6  90      ; "ranlib"
0156    TSETS    6   5  89  ; "RANLIB"
0157    TGETS    5   4  13  ; "variables"
0158    KSTR     6  91      ; "-O2"
0159    TSETS    6   5  46  ; "CFLAGS"
0160    TGETS    5   4  13  ; "variables"
0161    KSTR     6  92      ; "-shared"
0162    TSETS    6   5  48  ; "LIBFLAG"
0163    KSTR     5  93      ; "Makefile"
0164    TSETS    5   4  30  ; "makefile"
0165    TDUP     5  95
0166    TDUP     6  94
0167    TSETS    6   5  53  ; "bin"
0168    TDUP     6  96
0169    TSETS    6   5  25  ; "lib"
0170    TDUP     6  97
0171    TSETS    6   5  56  ; "include"
0172    TSETS    5   4  50  ; "external_deps_patterns"
0173    TDUP     5  99
0174    TDUP     6  98
0175    TSETS    6   5  53  ; "bin"
0176    TDUP     6 100
0177    TSETS    6   5  25  ; "lib"
0178    TDUP     6 101
0179    TSETS    6   5  56  ; "include"
0180    TSETS    5   4  57  ; "runtime_external_deps_patterns"
0181    KPRI     5   2
0182    TSETS    5   4  77  ; "link_lua_explicitly"
0183 => TGETS    5   2 102  ; "unix"
0184    ISF          5
0185    JMP      6 => 0255
0186    KSTR     5 103      ; "so"
0187    TSETS    5   4  21  ; "lib_extension"
0188    KSTR     5  81      ; "a"
0189    TSETS    5   4  24  ; "static_lib_extension"
0190    KSTR     5 103      ; "so"
0191    TSETS    5   4  23  ; "external_lib_extension"
0192    KSTR     5  80      ; "o"
0193    TSETS    5   4  26  ; "obj_extension"
0194    TDUP     5 104
0195    TSETS    5   4  28  ; "external_deps_dirs"
0196    TGETS    5   4  13  ; "variables"
0197    KSTR     6  91      ; "-O2"
0198    TSETS    6   5  46  ; "CFLAGS"
0199    KSTR     5 105      ; "Unix Makefiles"
0200    TSETS    5   4  83  ; "cmake_generator"
0201    TGETS    5   4  13  ; "variables"
0202    KSTR     6 106      ; "gcc"
0203    TSETS    6   5  34  ; "CC"
0204    TGETS    5   4  13  ; "variables"
0205    KSTR     6 106      ; "gcc"
0206    TSETS    6   5  38  ; "LD"
0207    KPRI     5   2
0208    TSETS    5   4 107  ; "gcc_rpath"
0209    TGETS    5   4  13  ; "variables"
0210    KSTR     6  92      ; "-shared"
0211    TSETS    6   5  48  ; "LIBFLAG"
0212    TGETS    5   4  13  ; "variables"
0213    KSTR     6 109      ; "test"
0214    TSETS    6   5 108  ; "TEST"
0215    TDUP     5 111
0216    TDUP     6 110
0217    TSETS    6   5  53  ; "bin"
0218    TDUP     6 112
0219    TSETS    6   5  25  ; "lib"
0220    TDUP     6 113
0221    TSETS    6   5  56  ; "include"
0222    TSETS    5   4  50  ; "external_deps_patterns"
0223    TDUP     5 115
0224    TDUP     6 114
0225    TSETS    6   5  53  ; "bin"
0226    TDUP     6 116
0227    TSETS    6   5  25  ; "lib"
0228    TDUP     6 117
0229    TSETS    6   5  56  ; "include"
0230    TSETS    5   4  57  ; "runtime_external_deps_patterns"
0231    KSTR     5 118      ; ":"
0232    TSETS    5   4  62  ; "export_path_separator"
0233    KSTR     5 119      ; ""
0234    TSETS    5   4  64  ; "wrapper_suffix"
0235    MOV      5   3
0236    KSTR     6 120      ; "/.cache/luarocks"
0237    CAT      5   5   6
0238    TSETS    5   4  71  ; "local_cache"
0239    TGETS    5   4  13  ; "variables"
0240    TGETS    5   5  46  ; "CFLAGS"
0241    MOV      6   5
0242    TGETS    5   5 121  ; "match"
0243    KSTR     7 122      ; "-fPIC"
0244    CALL     5   2   3
0245    IST          5
0246    JMP      5 => 0253
0247    TGETS    5   4  13  ; "variables"
0248    TGETS    6   4  13  ; "variables"
0249    TGETS    6   6  46  ; "CFLAGS"
0250    KSTR     7 123      ; " -fPIC"
0251    CAT      6   6   7
0252    TSETS    6   5  46  ; "CFLAGS"
0253 => KSTR     5 124      ; "xdg-open"
0254    TSETS    5   4  73  ; "web_browser"
0255 => TGETS    5   2 125  ; "cygwin"
0256    ISF          5
0257    JMP      6 => 0277
0258    KSTR     5 103      ; "so"
0259    TSETS    5   4  21  ; "lib_extension"
0260    KSTR     5 126      ; "cygwin-"
0261    MOV      6   1
0262    CAT      5   5   6
0263    TSETS    5   4  19  ; "arch"
0264    KSTR     5 105      ; "Unix Makefiles"
0265    TSETS    5   4  83  ; "cmake_generator"
0266    TGETS    5   4  13  ; "variables"
0267    KSTR     6 127      ; "echo -llua | xargs gcc"
0268    TSETS    6   5  34  ; "CC"
0269    TGETS    5   4  13  ; "variables"
0270    KSTR     6 127      ; "echo -llua | xargs gcc"
0271    TSETS    6   5  38  ; "LD"
0272    TGETS    5   4  13  ; "variables"
0273    KSTR     6  92      ; "-shared"
0274    TSETS    6   5  48  ; "LIBFLAG"
0275    KPRI     5   2
0276    TSETS    5   4  77  ; "link_lua_explicitly"
0277 => TGETS    5   2 128  ; "msys"
0278    ISF          5
0279    JMP      6 => 0296
0280    TDUP     5 130
0281    TDUP     6 129
0282    TSETS    6   5  53  ; "bin"
0283    TDUP     6 131
0284    TSETS    6   5  25  ; "lib"
0285    TDUP     6 132
0286    TSETS    6   5  56  ; "include"
0287    TSETS    5   4  50  ; "external_deps_patterns"
0288    TDUP     5 134
0289    TDUP     6 133
0290    TSETS    6   5  53  ; "bin"
0291    TDUP     6 135
0292    TSETS    6   5  25  ; "lib"
0293    TDUP     6 136
0294    TSETS    6   5  56  ; "include"
0295    TSETS    5   4  57  ; "runtime_external_deps_patterns"
0296 => TGETS    5   2 137  ; "bsd"
0297    ISF          5
0298    JMP      6 => 0302
0299    TGETS    5   4  13  ; "variables"
0300    KSTR     6 138      ; "gmake"
0301    TSETS    6   5  32  ; "MAKE"
0302 => TGETS    5   2 139  ; "macosx"
0303    ISF          5
0304    JMP      6 => 0358
0305    TGETS    5   4  13  ; "variables"
0306    KSTR     6 140      ; "make"
0307    TSETS    6   5  32  ; "MAKE"
0308    KSTR     5 141      ; "dylib"
0309    TSETS    5   4  23  ; "external_lib_extension"
0310    KSTR     5 142      ; "macosx-"
0311    MOV      6   1
0312    CAT      5   5   6
0313    TSETS    5   4  19  ; "arch"
0314    TGETS    5   4  13  ; "variables"
0315    KSTR     6 143      ; "-bundle -undefined dynamic_lookup -all_l"~
0316    TSETS    6   5  48  ; "LIBFLAG"
0317    UGET     5   1      ; util
0318    TGETS    5   5 144  ; "popen_read"
0319    KSTR     6 145      ; "sw_vers -productVersion"
0320    CALL     5   2   2
0321    UGET     6   2      ; tonumber
0322    ISFC     7   5
0323    JMP      7 => 0328
0324    MOV      8   5
0325    TGETS    7   5 121  ; "match"
0326    KSTR     9 146      ; "^[^.]+%.([^.]+)"
0327    CALL     7   2   3
0328 => CALL     6   2   2
0329    ISTC     5   6
0330    JMP      7 => 0332
0331    KSHORT   5   3
0332 => KSHORT   6  10
0333    ISGT     6   5
0334    JMP      6 => 0337
0335    KSHORT   5   8
0336    JMP      6 => 0344
0337 => KSHORT   6   5
0338    ISGT     6   5
0339    JMP      6 => 0342
0340    KSHORT   5   5
0341    JMP      6 => 0344
0342 => KPRI     6   1
0343    TSETS    6   4 107  ; "gcc_rpath"
0344 => TGETS    6   4  13  ; "variables"
0345    KSTR     7 147      ; "env MACOSX_DEPLOYMENT_TARGET=10."
0346    MOV      8   5
0347    KSTR     9 148      ; " gcc"
0348    CAT      7   7   9
0349    TSETS    7   6  34  ; "CC"
0350    TGETS    6   4  13  ; "variables"
0351    KSTR     7 147      ; "env MACOSX_DEPLOYMENT_TARGET=10."
0352    MOV      8   5
0353    KSTR     9 148      ; " gcc"
0354    CAT      7   7   9
0355    TSETS    7   6  38  ; "LD"
0356    KSTR     6 149      ; "open"
0357    TSETS    6   4  73  ; "web_browser"
0358 => TGETS    5   2 150  ; "linux"
0359    ISF          5
0360    JMP      6 => 0394
0361    KSTR     5 151      ; "linux-"
0362    MOV      6   1
0363    CAT      5   5   6
0364    TSETS    5   4  19  ; "arch"
0365    UGET     5   1      ; util
0366    TGETS    5   5 144  ; "popen_read"
0367    KSTR     6 152      ; "gcc -print-multiarch 2>/dev/null"
0368    CALL     5   2   2
0369    ISF          5
0370    JMP      6 => 0388
0371    ISEQS    5 119      ; ""
0372    JMP      6 => 0388
0373    TGETS    6   4  15  ; "external_deps_subdirs"
0374    TDUP     7 153
0375    KSTR     8 154      ; "lib/"
0376    MOV      9   5
0377    CAT      8   8   9
0378    TSETB    8   7   2
0379    TSETS    7   6  25  ; "lib"
0380    TGETS    6   4  17  ; "runtime_external_deps_subdirs"
0381    TDUP     7 155
0382    KSTR     8 154      ; "lib/"
0383    MOV      9   5
0384    CAT      8   8   9
0385    TSETB    8   7   2
0386    TSETS    7   6  25  ; "lib"
0387    JMP      6 => 0394
0388 => TGETS    6   4  15  ; "external_deps_subdirs"
0389    TDUP     7 156
0390    TSETS    7   6  25  ; "lib"
0391    TGETS    6   4  17  ; "runtime_external_deps_subdirs"
0392    TDUP     7 157
0393    TSETS    7   6  25  ; "lib"
0394 => TGETS    5   2 158  ; "freebsd"
0395    ISF          5
0396    JMP      6 => 0409
0397    KSTR     5 159      ; "freebsd-"
0398    MOV      6   1
0399    CAT      5   5   6
0400    TSETS    5   4  19  ; "arch"
0401    KPRI     5   1
0402    TSETS    5   4 107  ; "gcc_rpath"
0403    TGETS    5   4  13  ; "variables"
0404    KSTR     6 160      ; "cc"
0405    TSETS    6   5  34  ; "CC"
0406    TGETS    5   4  13  ; "variables"
0407    KSTR     6 160      ; "cc"
0408    TSETS    6   5  38  ; "LD"
0409 => TGETS    5   2 161  ; "openbsd"
0410    ISF          5
0411    JMP      6 => 0416
0412    KSTR     5 162      ; "openbsd-"
0413    MOV      6   1
0414    CAT      5   5   6
0415    TSETS    5   4  19  ; "arch"
0416 => TGETS    5   2 163  ; "netbsd"
0417    ISF          5
0418    JMP      6 => 0423
0419    KSTR     5 164      ; "netbsd-"
0420    MOV      6   1
0421    CAT      5   5   6
0422    TSETS    5   4  19  ; "arch"
0423 => TGETS    5   2 165  ; "solaris"
0424    ISF          5
0425    JMP      6 => 0433
0426    KSTR     5 166      ; "solaris-"
0427    MOV      6   1
0428    CAT      5   5   6
0429    TSETS    5   4  19  ; "arch"
0430    TGETS    5   4  13  ; "variables"
0431    KSTR     6 138      ; "gmake"
0432    TSETS    6   5  32  ; "MAKE"
0433 => TGETS    5   4  13  ; "variables"
0434    TGETS    6   4  21  ; "lib_extension"
0435    TSETS    6   5 167  ; "LIB_EXTENSION"
0436    TGETS    5   4  13  ; "variables"
0437    TGETS    6   4  26  ; "obj_extension"
0438    TSETS    6   5 168  ; "OBJ_EXTENSION"
0439    RET1     4   2

-- BYTECODE -- cfg.lua:485-505
0001    TGETS    2   0   0  ; "variables"
0002    IST          2
0003    JMP      2 => 0006
0004    TNEW     2   0
0005    TSETS    2   0   0  ; "variables"
0006 => UGET     2   0      ; pairs
0007    TGETS    3   1   0  ; "variables"
0008    CALL     2   4   2
0009    ISNEXT   5 => 0016
0010 => TGETS    7   0   0  ; "variables"
0011    TGETV    7   7   5
0012    IST          7
0013    JMP      7 => 0016
0014    TGETS    7   0   0  ; "variables"
0015    TSETV    6   7   5
0016 => ITERN    5   3   3
0017    ITERL    5 => 0010
0018    UGET     2   1      ; util
0019    TGETS    2   2   1  ; "deep_merge_under"
0020    MOV      3   0
0021    MOV      4   1
0022    CALL     2   1   3
0023    TGETS    2   0   2  ; "check_certificates"
0024    IST          2
0025    JMP      2 => 0032
0026    TGETS    2   0   0  ; "variables"
0027    KSTR     3   4      ; "-k"
0028    TSETS    3   2   3  ; "CURLNOCERTFLAG"
0029    TGETS    2   0   0  ; "variables"
0030    KSTR     3   6      ; "--no-check-certificate"
0031    TSETS    3   2   5  ; "WGETNOCERTFLAG"
0032 => RET0     0   1

-- BYTECODE -- cfg.lua:732-744
0001    KNIL     1   3
0002    UGET     4   0      ; type
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   0      ; "string"
0006    JMP      4 => 0019
0007    MOV      4   0
0008    UGET     5   1      ; cfg
0009    TGETS    5   5   1  ; "lua_modules_path"
0010    CAT      1   4   5
0011    MOV      4   0
0012    UGET     5   1      ; cfg
0013    TGETS    5   5   2  ; "lib_modules_path"
0014    CAT      2   4   5
0015    MOV      4   0
0016    KSTR     5   3      ; "/bin"
0017    CAT      3   4   5
0018    JMP      4 => 0039
0019 => TGETS    4   0   4  ; "lua_dir"
0020    ISTC     1   4
0021    JMP      5 => 0026
0022    TGETS    4   0   5  ; "root"
0023    UGET     5   1      ; cfg
0024    TGETS    5   5   1  ; "lua_modules_path"
0025    CAT      1   4   5
0026 => TGETS    4   0   6  ; "lib_dir"
0027    ISTC     2   4
0028    JMP      5 => 0033
0029    TGETS    4   0   5  ; "root"
0030    UGET     5   1      ; cfg
0031    TGETS    5   5   2  ; "lib_modules_path"
0032    CAT      2   4   5
0033 => TGETS    4   0   7  ; "bin_dir"
0034    ISTC     3   4
0035    JMP      5 => 0039
0036    TGETS    4   0   5  ; "root"
0037    KSTR     5   3      ; "/bin"
0038    CAT      3   4   5
0039 => MOV      4   1
0040    MOV      5   2
0041    MOV      6   3
0042    RET      4   4

-- BYTECODE -- cfg.lua:748-754
0001    UGET     1   0      ; make_paths_from_tree
0002    MOV      2   0
0003    CALL     1   4   2
0004    UGET     4   1      ; table
0005    TGETS    4   4   0  ; "insert"
0006    UGET     5   2      ; new_path
0007    MOV      6   1
0008    KSTR     7   1      ; "/?.lua"
0009    CAT      6   6   7
0010    CALL     4   1   3
0011    UGET     4   1      ; table
0012    TGETS    4   4   0  ; "insert"
0013    UGET     5   2      ; new_path
0014    MOV      6   1
0015    KSTR     7   2      ; "/?/init.lua"
0016    CAT      6   6   7
0017    CALL     4   1   3
0018    UGET     4   1      ; table
0019    TGETS    4   4   0  ; "insert"
0020    UGET     5   3      ; new_cpath
0021    MOV      6   2
0022    KSTR     7   3      ; "/?."
0023    UGET     8   4      ; cfg
0024    TGETS    8   8   4  ; "lib_extension"
0025    CAT      6   6   8
0026    CALL     4   1   3
0027    UGET     4   1      ; table
0028    TGETS    4   4   0  ; "insert"
0029    UGET     5   5      ; new_bin
0030    MOV      6   3
0031    CALL     4   1   3
0032    RET0     0   1

-- BYTECODE -- cfg.lua:746-762
0001    TNEW     1   0
0002    TNEW     2   0
0003    TNEW     3   0
0004    FNEW     4   0      ; cfg.lua:748
0005    ISF          0
0006    JMP      5 => 0010
0007    MOV      5   4
0008    MOV      6   0
0009    CALL     5   1   2
0010 => UGET     5   3      ; ipairs
0011    UGET     6   2      ; cfg
0012    TGETS    6   6   1  ; "rocks_trees"
0013    CALL     5   4   2
0014    JMP      8 => 0018
0015 => MOV     10   4
0016    MOV     11   9
0017    CALL    10   1   2
0018 => ITERC    8   3   3
0019    ITERL    8 => 0015
0020    UGET     5   1      ; table
0021    TGETS    5   5   2  ; "concat"
0022    MOV      6   1
0023    KSTR     7   3      ; ";"
0024    CALL     5   2   3
0025    UGET     6   1      ; table
0026    TGETS    6   6   2  ; "concat"
0027    MOV      7   2
0028    KSTR     8   3      ; ";"
0029    CALL     6   2   3
0030    UGET     7   1      ; table
0031    TGETS    7   7   2  ; "concat"
0032    MOV      8   3
0033    UGET     9   2      ; cfg
0034    TGETS    9   9   4  ; "export_path_separator"
0035    CALL     7   0   3
0036    UCLO     0 => 0037
0037 => RETM     5   2

-- BYTECODE -- cfg.lua:765-769
0001    UGET     0   0      ; cfg
0002    TGETS    0   0   0  ; "package_paths"
0003    CALL     0   4   1
0004    UGET     3   1      ; package
0005    UGET     4   2      ; util
0006    TGETS    4   4   2  ; "cleanup_path"
0007    UGET     5   1      ; package
0008    TGETS    5   5   1  ; "path"
0009    KSTR     6   3      ; ";"
0010    MOV      7   0
0011    CAT      5   5   7
0012    KSTR     6   3      ; ";"
0013    UGET     7   0      ; cfg
0014    TGETS    7   7   4  ; "lua_version"
0015    KPRI     8   2
0016    CALL     4   2   5
0017    TSETS    4   3   1  ; "path"
0018    UGET     3   1      ; package
0019    UGET     4   2      ; util
0020    TGETS    4   4   2  ; "cleanup_path"
0021    UGET     5   1      ; package
0022    TGETS    5   5   5  ; "cpath"
0023    KSTR     6   3      ; ";"
0024    MOV      7   1
0025    CAT      5   5   7
0026    KSTR     6   3      ; ";"
0027    UGET     7   0      ; cfg
0028    TGETS    7   7   4  ; "lua_version"
0029    KPRI     8   2
0030    CALL     4   2   5
0031    TSETS    4   3   5  ; "cpath"
0032    RET0     0   1

-- BYTECODE -- cfg.lua:774-777
0001    UGET     1   0      ; assert
0002    UGET     2   1      ; type
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   0      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   2      ; platforms
0012    TGETV    1   1   0
0013    RET1     1   2

-- BYTECODE -- cfg.lua:790-797
0001    KPRI     0   0
0002 => LOOP     1 => 0016
0003    UGET     1   0      ; i
0004    UGET     2   1      ; delta
0005    ADDVV    1   1   2
0006    USETV    0   1      ; i
0007    UGET     1   2      ; platform_order
0008    UGET     2   0      ; i
0009    TGETV    0   1   2
0010    ISF          0
0011    JMP      1 => 0016
0012    UGET     1   3      ; platforms
0013    TGETV    1   1   0
0014    ISF          1
0015    JMP      2 => 0002
0016 => RET1     0   2

-- BYTECODE -- cfg.lua:780-798
0001    IST          0
0002    JMP      1 => 0004
0003    KSTR     0   0      ; "least-specific-first"
0004 => KNIL     1   2
0005    ISNES    0   0      ; "least-specific-first"
0006    JMP      3 => 0010
0007    KSHORT   1   0
0008    KSHORT   2   1
0009    JMP      3 => 0014
0010 => UGET     3   0      ; platform_order
0011    LEN      3   3
0012    ADDVN    1   3   0  ; 1
0013    KSHORT   2  -1
0014 => FNEW     3   1      ; cfg.lua:790
0015    UCLO     0 => 0016
0016 => RET1     3   2

-- BYTECODE -- cfg.lua:800-807
0001    TNEW     0   0
0002    UGET     1   0      ; pairs
0003    UGET     2   1      ; platforms
0004    CALL     1   4   2
0005    ISNEXT   4 => 0011
0006 => UGET     6   2      ; table
0007    TGETS    6   6   0  ; "insert"
0008    MOV      7   0
0009    MOV      8   4
0010    CALL     6   1   3
0011 => ITERN    4   3   3
0012    ITERL    4 => 0006
0013    UGET     1   2      ; table
0014    TGETS    1   1   1  ; "sort"
0015    MOV      2   0
0016    CALL     1   1   2
0017    UGET     1   2      ; table
0018    TGETS    1   1   2  ; "concat"
0019    MOV      2   0
0020    KSTR     3   3      ; ", "
0021    CALLT    1   3

-- BYTECODE -- cfg.lua:523-810
0001    IST          0
0002    JMP      2 => 0004
0003    TNEW     0   0
0004 => UGET     2   0      ; pcall
0005    UGET     3   1      ; require
0006    KSTR     4   0      ; "luarocks.core.hardcoded"
0007    CALL     2   3   3
0008    IST          2
0009    JMP      4 => 0011
0010    TNEW     3   0
0011 => UGET     4   2      ; cfg
0012    TGETS    4   4   1  ; "init"
0013    UGET     5   3      ; pairs
0014    UGET     6   2      ; cfg
0015    CALL     5   4   2
0016    ISNEXT   8 => 0020
0017 => UGET    10   2      ; cfg
0018    KPRI    11   0
0019    TSETV   11  10   8
0020 => ITERN    8   3   3
0021    ITERL    8 => 0017
0022    UGET     5   2      ; cfg
0023    UGET     6   4      ; program_version
0024    TSETS    6   5   2  ; "program_version"
0025    UGET     5   2      ; cfg
0026    UGET     6   5      ; program_series
0027    TSETS    6   5   3  ; "program_series"
0028    UGET     5   2      ; cfg
0029    UGET     6   6      ; major_version
0030    TSETS    6   5   4  ; "major_version"
0031    UGET     5   2      ; cfg
0032    TGETS    6   0   5  ; "lua_version"
0033    IST          6
0034    JMP      7 => 0043
0035    TGETS    6   3   6  ; "LUA_VERSION"
0036    IST          6
0037    JMP      7 => 0043
0038    GGET     6   7      ; "_VERSION"
0039    MOV      7   6
0040    TGETS    6   6   8  ; "sub"
0041    KSHORT   8   5
0042    CALL     6   2   3
0043 => TSETS    6   5   5  ; "lua_version"
0044    UGET     5   2      ; cfg
0045    TGETS    6   0   9  ; "lua_interpreter"
0046    IST          6
0047    JMP      7 => 0075
0048    TGETS    6   3  10  ; "LUA_INTERPRETER"
0049    IST          6
0050    JMP      7 => 0075
0051    GGET     6  11      ; "arg"
0052    ISF          6
0053    JMP      7 => 0069
0054    GGET     6  11      ; "arg"
0055    KSHORT   7  -1
0056    TGETV    6   6   7
0057    ISF          6
0058    JMP      7 => 0069
0059    GGET     6  11      ; "arg"
0060    KSHORT   7  -1
0061    TGETV    6   6   7
0062    MOV      7   6
0063    TGETS    6   6  12  ; "gsub"
0064    KSTR     8  13      ; ".*[\/]"
0065    KSTR     9  14      ; ""
0066    CALL     6   2   4
0067    IST          6
0068    JMP      7 => 0075
0069 => UGET     6   7      ; is_windows
0070    ISF          6
0071    JMP      7 => 0074
0072    KSTR     6  15      ; "lua.exe"
0073    JMP      7 => 0075
0074 => KSTR     6  16      ; "lua"
0075 => TSETS    6   5   9  ; "lua_interpreter"
0076    UGET     5   2      ; cfg
0077    TGETS    6   3  18  ; "FORCE_CONFIG"
0078    IST          6
0079    JMP      6 => 0082
0080    TGETS    6   0  17  ; "project_dir"
0081    JMP      7 => 0085
0082 => KPRI     6   1
0083    JMP      7 => 0085
0084    KPRI     6   2
0085 => TSETS    6   5  17  ; "project_dir"
0086    TGETS    5   0  19  ; "lua_bindir"
0087    IST          5
0088    JMP      6 => 0108
0089    TGETS    5   3  20  ; "LUA_BINDIR"
0090    IST          5
0091    JMP      6 => 0108
0092    GGET     5  11      ; "arg"
0093    ISF          5
0094    JMP      6 => 0108
0095    GGET     5  11      ; "arg"
0096    KSHORT   6  -1
0097    TGETV    5   5   6
0098    ISF          5
0099    JMP      6 => 0108
0100    GGET     5  11      ; "arg"
0101    KSHORT   6  -1
0102    TGETV    5   5   6
0103    MOV      6   5
0104    TGETS    5   5  12  ; "gsub"
0105    KSTR     7  21      ; "[\/][^\/]+$"
0106    KSTR     8  14      ; ""
0107    CALL     5   2   4
0108 => TGETS    6   0  22  ; "lua_dir"
0109    IST          6
0110    JMP      7 => 0121
0111    TGETS    6   3  23  ; "LUA_DIR"
0112    IST          6
0113    JMP      7 => 0121
0114    ISFC     6   5
0115    JMP      6 => 0121
0116    MOV      7   5
0117    TGETS    6   5  12  ; "gsub"
0118    KSTR     8  24      ; "[\/]bin$"
0119    KSTR     9  14      ; ""
0120    CALL     6   2   4
0121 => UGET     7   2      ; cfg
0122    TDUP     8  26
0123    TSETS    6   8  23  ; "LUA_DIR"
0124    TSETS    5   8  20  ; "LUA_BINDIR"
0125    TGETS    9   3  27  ; "LUA_LIBDIR"
0126    TSETS    9   8  27  ; "LUA_LIBDIR"
0127    TGETS    9   3  28  ; "LUA_INCDIR"
0128    TSETS    9   8  28  ; "LUA_INCDIR"
0129    TSETS    8   7  25  ; "variables"
0130    UGET     5   2      ; cfg
0131    TSETS    4   5   1  ; "init"
0132    UGET     5   8      ; sysdetect
0133    TGETS    5   5  29  ; "detect"
0134    CALL     5   3   1
0135    TGETS    7   3  30  ; "SYSTEM"
0136    ISF          7
0137    JMP      8 => 0139
0138    TGETS    5   3  30  ; "SYSTEM"
0139 => TGETS    7   3  31  ; "PROCESSOR"
0140    ISF          7
0141    JMP      8 => 0143
0142    TGETS    6   3  31  ; "PROCESSOR"
0143 => ISNES    5  32      ; "windows"
0144    JMP      7 => 0166
0145    UGET     7   9      ; os
0146    TGETS    7   7  33  ; "getenv"
0147    KSTR     8  34      ; "VCINSTALLDIR"
0148    CALL     7   2   2
0149    ISF          7
0150    JMP      8 => 0153
0151    KSTR     5  32      ; "windows"
0152    JMP      7 => 0166
0153 => GGET     7  35      ; "io"
0154    TGETS    7   7  36  ; "open"
0155    KSTR     8  37      ; "/bin/sh"
0156    KSTR     9  38      ; "r"
0157    CALL     7   2   3
0158    ISF          7
0159    JMP      8 => 0165
0160    MOV      9   7
0161    TGETS    8   7  39  ; "close"
0162    CALL     8   1   2
0163    KSTR     5  40      ; "msys"
0164    JMP      8 => 0166
0165 => KSTR     5  41      ; "mingw"
0166 => UGET     7   2      ; cfg
0167    TSETS    6   7  42  ; "target_cpu"
0168    UGET     7  10      ; make_platforms
0169    MOV      8   5
0170    CALL     7   2   2
0171    KNIL     8  10
0172    UGET    11  11      ; set_confdirs
0173    UGET    12   2      ; cfg
0174    MOV     13   7
0175    TGETS   14   3  43  ; "SYSCONFDIR"
0176    CALL    11   1   4
0177    KSTR    11  44      ; "config-"
0178    UGET    12   2      ; cfg
0179    TGETS   12  12   5  ; "lua_version"
0180    KSTR    13  45      ; ".lua"
0181    CAT     11  11  13
0182    UGET    12   2      ; cfg
0183    TGETS   12  12  46  ; "sysconfdir"
0184    KSTR    13  47      ; "/"
0185    MOV     14  11
0186    CAT     12  12  14
0187    MOV     13  12
0188    TGETS   12  12  12  ; "gsub"
0189    KSTR    14  48      ; "\"
0190    KSTR    15  47      ; "/"
0191    CALL    12   2   4
0192    MOV      8  12
0193    UGET    12   2      ; cfg
0194    TGETS   12  12  49  ; "homeconfdir"
0195    KSTR    13  47      ; "/"
0196    MOV     14  11
0197    CAT     12  12  14
0198    MOV     13  12
0199    TGETS   12  12  12  ; "gsub"
0200    KSTR    14  48      ; "\"
0201    KSTR    15  47      ; "/"
0202    CALL    12   2   4
0203    MOV      9  12
0204    UGET    12   2      ; cfg
0205    TGETS   12  12  17  ; "project_dir"
0206    ISF         12
0207    JMP     13 => 0213
0208    UGET    12   2      ; cfg
0209    TGETS   12  12  17  ; "project_dir"
0210    KSTR    13  50      ; "/.luarocks/"
0211    MOV     14  11
0212    CAT     10  12  14
0213 => UGET    11  12      ; load_config_file
0214    UGET    12   2      ; cfg
0215    MOV     13   7
0216    MOV     14   8
0217    CALL    11   3   4
0218    ISF         12
0219    JMP     13 => 0224
0220    KPRI    13   0
0221    MOV     14  12
0222    KSTR    15  51      ; "config"
0223    UCLO     0 => 0504
0224 => KNIL    13  14
0225    TGETS   15   3  18  ; "FORCE_CONFIG"
0226    IST         15
0227    JMP     15 => 0311
0228    KSTR    15  52      ; "LUAROCKS_CONFIG_"
0229    UGET    16   2      ; cfg
0230    TGETS   16  16   5  ; "lua_version"
0231    MOV     17  16
0232    TGETS   16  16  12  ; "gsub"
0233    KSTR    18  53      ; "%."
0234    KSTR    19  54      ; "_"
0235    CALL    16   2   4
0236    CAT     15  15  16
0237    UGET    16   9      ; os
0238    TGETS   16  16  33  ; "getenv"
0239    MOV     17  15
0240    CALL    16   2   2
0241    IST         16
0242    JMP     17 => 0249
0243    KSTR    15  55      ; "LUAROCKS_CONFIG"
0244    UGET    17   9      ; os
0245    TGETS   17  17  33  ; "getenv"
0246    MOV     18  15
0247    CALL    17   2   2
0248    MOV     16  17
0249 => ISF         16
0250    JMP     17 => 0279
0251    UGET    17  12      ; load_config_file
0252    UGET    18   2      ; cfg
0253    MOV     19   7
0254    MOV     20  16
0255    CALL    17   3   4
0256    ISF         18
0257    JMP     19 => 0263
0258    KPRI    19   0
0259    MOV     20  18
0260    KSTR    21  51      ; "config"
0261    UCLO     0 => 0505
0262    JMP     19 => 0275
0263 => ISF          1
0264    JMP     19 => 0275
0265    IST         17
0266    JMP     19 => 0275
0267    MOV     19   1
0268    KSTR    20  56      ; "Warning: could not load configuration fi"~
0269    MOV     21  16
0270    KSTR    22  57      ; "` given in environment variable "
0271    MOV     23  15
0272    KSTR    24  58      ; "\n"
0273    CAT     20  20  24
0274    CALL    19   1   2
0275 => ISF         17
0276    JMP     19 => 0279
0277    KPRI    13   2
0278    MOV      9  16
0279 => IST         13
0280    JMP     17 => 0294
0281    UGET    17  12      ; load_config_file
0282    UGET    18   2      ; cfg
0283    MOV     19   7
0284    MOV     20   9
0285    CALL    17   3   4
0286    MOV     12  18
0287    MOV     13  17
0288    ISF         12
0289    JMP     17 => 0294
0290    KPRI    17   0
0291    MOV     18  12
0292    KSTR    19  51      ; "config"
0293    UCLO     0 => 0506
0294 => UGET    17   2      ; cfg
0295    TGETS   17  17  17  ; "project_dir"
0296    ISF         17
0297    JMP     18 => 0311
0298    UGET    17  12      ; load_config_file
0299    UGET    18   2      ; cfg
0300    MOV     19   7
0301    MOV     20  10
0302    CALL    17   3   4
0303    MOV     12  18
0304    MOV     14  17
0305    ISF         12
0306    JMP     17 => 0311
0307    KPRI    17   0
0308    MOV     18  12
0309    KSTR    19  51      ; "config"
0310    UCLO     0 => 0507
0311 => UGET    15   2      ; cfg
0312    TGETS   16   0  59  ; "given_project_dir"
0313    IST         16
0314    JMP     17 => 0317
0315    UGET    16   2      ; cfg
0316    TGETS   16  16  17  ; "project_dir"
0317 => TSETS   16  15  17  ; "project_dir"
0318    UGET    15   2      ; cfg
0319    TGETS   16   0  60  ; "given_lua_version"
0320    IST         16
0321    JMP     17 => 0324
0322    UGET    16   2      ; cfg
0323    TGETS   16  16   5  ; "lua_version"
0324 => TSETS   16  15   5  ; "lua_version"
0325    TGETS   15   0  61  ; "given_lua_dir"
0326    ISF         15
0327    JMP     16 => 0339
0328    UGET    15   2      ; cfg
0329    TGETS   15  15  25  ; "variables"
0330    TGETS   16   0  61  ; "given_lua_dir"
0331    TSETS   16  15  23  ; "LUA_DIR"
0332    UGET    15   2      ; cfg
0333    TGETS   15  15  25  ; "variables"
0334    TGETS   16   0  19  ; "lua_bindir"
0335    TSETS   16  15  20  ; "LUA_BINDIR"
0336    UGET    15   2      ; cfg
0337    TGETS   16   0   9  ; "lua_interpreter"
0338    TSETS   16  15   9  ; "lua_interpreter"
0339 => UGET    15   2      ; cfg
0340    TGETS   15  15  62  ; "rocks_trees"
0341    ISNEP   15   0
0342    JMP     15 => 0375
0343    UGET    15   2      ; cfg
0344    TNEW    16   0
0345    TSETS   16  15  62  ; "rocks_trees"
0346    UGET    15   2      ; cfg
0347    TGETS   15  15  63  ; "home_tree"
0348    ISF         15
0349    JMP     16 => 0359
0350    UGET    15  13      ; table
0351    TGETS   15  15  64  ; "insert"
0352    UGET    16   2      ; cfg
0353    TGETS   16  16  62  ; "rocks_trees"
0354    TDUP    17  65
0355    UGET    18   2      ; cfg
0356    TGETS   18  18  63  ; "home_tree"
0357    TSETS   18  17  66  ; "root"
0358    CALL    15   1   3
0359 => TGETS   15   3  67  ; "PREFIX"
0360    ISF         15
0361    JMP     16 => 0375
0362    TGETS   15   3  67  ; "PREFIX"
0363    UGET    16   2      ; cfg
0364    TGETS   16  16  63  ; "home_tree"
0365    ISEQV   15  16
0366    JMP     15 => 0375
0367    UGET    15  13      ; table
0368    TGETS   15  15  64  ; "insert"
0369    UGET    16   2      ; cfg
0370    TGETS   16  16  62  ; "rocks_trees"
0371    TDUP    17  68
0372    TGETS   18   3  67  ; "PREFIX"
0373    TSETS   18  17  66  ; "root"
0374    CALL    15   1   3
0375 => UGET    15  14      ; make_defaults
0376    UGET    16   2      ; cfg
0377    TGETS   16  16   5  ; "lua_version"
0378    MOV     17   6
0379    MOV     18   7
0380    UGET    19   2      ; cfg
0381    TGETS   19  19  69  ; "home"
0382    CALL    15   2   5
0383    TGETS   16   7  32  ; "windows"
0384    ISF         16
0385    JMP     17 => 0406
0386    TGETS   16   3  70  ; "WIN_TOOLS"
0387    ISF         16
0388    JMP     17 => 0406
0389    TDUP    16  71
0390    UGET    17  15      ; ipairs
0391    MOV     18  16
0392    CALL    17   4   2
0393    JMP     20 => 0403
0394 => TGETS   22  15  25  ; "variables"
0395    KSTR    23  72      ; """
0396    TGETS   24   3  70  ; "WIN_TOOLS"
0397    KSTR    25  47      ; "/"
0398    TGETS   26  15  25  ; "variables"
0399    TGETV   26  26  21
0400    KSTR    27  73      ; ".exe""
0401    CAT     23  23  27
0402    TSETV   23  22  21
0403 => ITERC   20   3   3
0404    ITERL   20 => 0394
0405    JMP     16 => 0408
0406 => KPRI    16   2
0407    TSETS   16  15  74  ; "fs_use_modules"
0408 => UGET    16  16      ; use_defaults
0409    UGET    17   2      ; cfg
0410    MOV     18  15
0411    CALL    16   1   3
0412    UGET    16   2      ; cfg
0413    TGETS   16  16  25  ; "variables"
0414    UGET    17   2      ; cfg
0415    TGETS   17  17  25  ; "variables"
0416    TGETS   17  17  75  ; "LUA"
0417    IST         17
0418    JMP     18 => 0436
0419    UGET    17   2      ; cfg
0420    TGETS   17  17  25  ; "variables"
0421    TGETS   17  17  20  ; "LUA_BINDIR"
0422    ISF         17
0423    JMP     18 => 0436
0424    UGET    17   2      ; cfg
0425    TGETS   17  17  25  ; "variables"
0426    TGETS   17  17  20  ; "LUA_BINDIR"
0427    KSTR    18  47      ; "/"
0428    UGET    19   2      ; cfg
0429    TGETS   19  19   9  ; "lua_interpreter"
0430    CAT     17  17  19
0431    MOV     18  17
0432    TGETS   17  17  12  ; "gsub"
0433    KSTR    19  76      ; "//"
0434    KSTR    20  47      ; "/"
0435    CALL    17   2   4
0436 => TSETS   17  16  75  ; "LUA"
0437    UGET    16   2      ; cfg
0438    KSTR    17  78      ; "LuaRocks/"
0439    UGET    18   2      ; cfg
0440    TGETS   18  18   2  ; "program_version"
0441    KSTR    19  79      ; " "
0442    UGET    20   2      ; cfg
0443    TGETS   20  20  80  ; "arch"
0444    CAT     17  17  20
0445    TSETS   17  16  77  ; "user_agent"
0446    UGET    16   2      ; cfg
0447    TDUP    17  85
0448    UGET    18   2      ; cfg
0449    TGETS   18  18  17  ; "project_dir"
0450    ISF         18
0451    JMP     19 => 0457
0452    TDUP    18  82
0453    TSETS   10  18  83  ; "file"
0454    NOT     19  14
0455    NOT     19  19
0456    TSETS   19  18  84  ; "found"
0457 => TSETS   18  17  86  ; "project"
0458    TDUP    18  87
0459    TSETS    8  18  83  ; "file"
0460    NOT     19  11
0461    NOT     19  19
0462    TSETS   19  18  84  ; "found"
0463    TSETS   18  17  88  ; "system"
0464    TDUP    18  89
0465    TSETS    9  18  83  ; "file"
0466    NOT     19  13
0467    NOT     19  19
0468    TSETS   19  18  84  ; "found"
0469    TSETS   18  17  90  ; "user"
0470    ISF         14
0471    JMP     18 => 0474
0472    ISTC    18  10
0473    JMP     18 => 0479
0474 => ISF         13
0475    JMP     18 => 0478
0476    ISTC    18   9
0477    JMP     18 => 0479
0478 => MOV     18   8
0479 => TSETS   18  17  91  ; "nearest"
0480    TSETS   17  16  81  ; "config_files"
0481    UGET    16   2      ; cfg
0482    TNEW    17   0
0483    TSETS   17  16  92  ; "cache"
0484    FNEW    16  93      ; cfg.lua:732
0485    UGET    17   2      ; cfg
0486    FNEW    18  95      ; cfg.lua:746
0487    TSETS   18  17  94  ; "package_paths"
0488    UCLO    16 => 0489
0489 => UGET    16   2      ; cfg
0490    FNEW    17  97      ; cfg.lua:765
0491    TSETS   17  16  96  ; "init_package_paths"
0492    UGET    16   2      ; cfg
0493    FNEW    17  99      ; cfg.lua:774
0494    TSETS   17  16  98  ; "is_platform"
0495    UGET    16   2      ; cfg
0496    FNEW    17 101      ; cfg.lua:780
0497    TSETS   17  16 100  ; "each_platform"
0498    UGET    16   2      ; cfg
0499    FNEW    17 103      ; cfg.lua:800
0500    TSETS   17  16 102  ; "print_platforms"
0501    KPRI    16   2
0502    UCLO     0 => 0503
0503 => RET1    16   2
0504 => RET     13   4
0505 => RET     19   4
0506 => RET     17   4
0507 => RET     17   4

-- BYTECODE -- cfg.lua:0-813
0001    GGET     0   0      ; "next"
0002    GGET     1   1      ; "table"
0003    GGET     2   2      ; "pairs"
0004    GGET     3   3      ; "require"
0005    GGET     4   4      ; "os"
0006    GGET     5   5      ; "pcall"
0007    GGET     6   6      ; "ipairs"
0008    GGET     7   7      ; "package"
0009    GGET     8   8      ; "tonumber"
0010    GGET     9   9      ; "type"
0011    GGET    10  10      ; "assert"
0012    MOV     11   3
0013    KSTR    12  11      ; "luarocks.core.util"
0014    CALL    11   2   2
0015    MOV     12   3
0016    KSTR    13  12      ; "luarocks.core.persist"
0017    CALL    12   2   2
0018    MOV     13   3
0019    KSTR    14  13      ; "luarocks.core.sysdetect"
0020    CALL    13   2   2
0021    KSTR    14  14      ; "3.3.1"
0022    KSTR    15  15      ; "3.3"
0023    MOV     17  14
0024    TGETS   16  14  16  ; "match"
0025    KSTR    18  17      ; "([^.]%.[^.])"
0026    CALL    16   2   3
0027    IST         16
0028    JMP     17 => 0030
0029    MOV     16  15
0030 => TGETS   17   7  18  ; "config"
0031    MOV     18  17
0032    TGETS   17  17  19  ; "sub"
0033    KSHORT  19   1
0034    KSHORT  20   1
0035    CALL    17   2   4
0036    ISEQS   17  20      ; "\"
0037    JMP     17 => 0040
0038    KPRI    17   1
0039    JMP     18 => 0041
0040 => KPRI    17   2
0041 => TDUP    18  21
0042    FNEW    19  22      ; cfg.lua:50
0043    FNEW    20  23      ; cfg.lua:71
0044    KPRI    21   0
0045    FNEW    22  24      ; cfg.lua:92
0046    FNEW    23  25      ; cfg.lua:112
0047    FNEW    24  26      ; cfg.lua:123
0048    FNEW    21  27      ; cfg.lua:141
0049    UCLO    22 => 0050
0050 => TDUP    22  29
0051    TDUP    23  28
0052    TSETS   23  22  30  ; "freebsd"
0053    TDUP    23  31
0054    TSETS   23  22  32  ; "openbsd"
0055    TDUP    23  33
0056    TSETS   23  22  34  ; "solaris"
0057    TDUP    23  35
0058    TSETS   23  22  36  ; "windows"
0059    TDUP    23  37
0060    TSETS   23  22  38  ; "cygwin"
0061    TDUP    23  39
0062    TSETS   23  22  40  ; "macosx"
0063    TDUP    23  41
0064    TSETS   23  22  42  ; "netbsd"
0065    TDUP    23  43
0066    TSETS   23  22  44  ; "haiku"
0067    TDUP    23  45
0068    TSETS   23  22  46  ; "linux"
0069    TDUP    23  47
0070    TSETS   23  22  48  ; "mingw"
0071    TDUP    23  49
0072    TSETS   23  22  50  ; "msys"
0073    FNEW    23  51      ; cfg.lua:172
0074    FNEW    24  52      ; cfg.lua:179
0075    FNEW    25  53      ; cfg.lua:485
0076    TNEW    26   0
0077    FNEW    27  55      ; cfg.lua:523
0078    TSETS   27  26  54  ; "init"
0079    UCLO     0 => 0080
0080 => RET1    26   2

-----------------------
-- BYTECODE -- util.lua:14-29
0001    GGET     2   0      ; "package"
0002    TGETS    2   2   1  ; "config"
0003    MOV      3   2
0004    TGETS    2   2   2  ; "sub"
0005    KSHORT   4   1
0006    KSHORT   5   1
0007    CALL     2   2   4
0008    ISNES    2   3      ; "\"
0009    JMP      3 => 0027
0010    GGET     3   4      ; "os"
0011    TGETS    3   3   5  ; "getenv"
0012    KSTR     4   6      ; "TMP"
0013    CALL     3   2   2
0014    KSTR     4   7      ; "/luarocks-"
0015    GGET     5   8      ; "tostring"
0016    GGET     6   9      ; "math"
0017    TGETS    6   6  10  ; "floor"
0018    GGET     7   9      ; "math"
0019    TGETS    7   7  11  ; "random"
0020    CALL     7   2   1
0021    MULVN    7   7   0  ; 10000
0022    CALL     6   0   2
0023    CALLM    5   2   0
0024    CAT      3   3   5
0025    IST          3
0026    JMP      4 => 0030
0027 => GGET     3   4      ; "os"
0028    TGETS    3   3  12  ; "tmpname"
0029    CALL     3   2   1
0030 => GGET     4   4      ; "os"
0031    TGETS    4   4  13  ; "execute"
0032    MOV      5   0
0033    KSTR     6  14      ; " > "
0034    MOV      7   3
0035    CAT      5   5   7
0036    CALL     4   1   2
0037    GGET     4  15      ; "io"
0038    TGETS    4   4  16  ; "open"
0039    MOV      5   3
0040    KSTR     6  17      ; "rb"
0041    CALL     4   2   3
0042    IST          4
0043    JMP      5 => 0050
0044    GGET     5   4      ; "os"
0045    TGETS    5   5  18  ; "remove"
0046    MOV      6   3
0047    CALL     5   1   2
0048    KSTR     5  19      ; ""
0049    RET1     5   2
0050 => MOV      6   4
0051    TGETS    5   4  20  ; "read"
0052    ISTC     7   1
0053    JMP      7 => 0055
0054    KSTR     7  21      ; "*l"
0055 => CALL     5   2   3
0056    MOV      7   4
0057    TGETS    6   4  22  ; "close"
0058    CALL     6   1   2
0059    GGET     6   4      ; "os"
0060    TGETS    6   6  18  ; "remove"
0061    MOV      7   3
0062    CALL     6   1   2
0063    ISTC     6   5
0064    JMP      6 => 0066
0065    KSTR     6  19      ; ""
0066 => RET1     6   2

-- BYTECODE -- util.lua:36-42
0001    TNEW     1   0
0002    GGET     2   0      ; "pairs"
0003    MOV      3   0
0004    CALL     2   4   2
0005    ISNEXT   5 => 0007
0006 => TSETV    6   1   5
0007 => ITERN    5   3   3
0008    ITERL    5 => 0006
0009    RET1     1   2

-- BYTECODE -- util.lua:65-65
0001    GGET     1   0      ; "next"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISEQP    1   0
0005    JMP      1 => 0008
0006    KPRI     1   1
0007    JMP      2 => 0009
0008 => KPRI     1   2
0009 => RET1     1   2

-- BYTECODE -- util.lua:67-83
0001    GGET     1   0      ; "tostring"
0002    MOV      2   0
0003    CALL     1   2   2
0004    GGET     2   1      ; "type"
0005    MOV      3   0
0006    CALL     2   2   2
0007    ISNES    2   2      ; "function"
0008    JMP      2 => 0038
0009    GGET     2   3      ; "debug"
0010    TGETS    2   2   4  ; "getinfo"
0011    MOV      3   0
0012    KSTR     4   5      ; "S"
0013    CALL     2   2   3
0014    TGETS    3   2   6  ; "what"
0015    ISNES    3   7      ; "C"
0016    JMP      3 => 0025
0017    KSTR     3   8      ; "%q"
0018    MOV      4   3
0019    TGETS    3   3   9  ; "format"
0020    MOV      5   1
0021    KSTR     6  10      ; ", C function"
0022    CAT      5   5   6
0023    CALLT    3   3
0024    JMP      3 => 0050
0025 => KSTR     3   8      ; "%q"
0026    MOV      4   3
0027    TGETS    3   3   9  ; "format"
0028    MOV      5   1
0029    KSTR     6  11      ; ", defined in ("
0030    TGETS    7   2  12  ; "linedefined"
0031    KSTR     8  13      ; "-"
0032    TGETS    9   2  14  ; "lastlinedefined"
0033    KSTR    10  15      ; ")"
0034    TGETS   11   2  16  ; "source"
0035    CAT      5   5  11
0036    CALLT    3   3
0037    JMP      2 => 0050
0038 => GGET     2   1      ; "type"
0039    MOV      3   0
0040    CALL     2   2   2
0041    ISNES    2  17      ; "number"
0042    JMP      2 => 0045
0043    RET1     1   2
0044    JMP      2 => 0050
0045 => KSTR     2   8      ; "%q"
0046    MOV      3   2
0047    TGETS    2   2   9  ; "format"
0048    MOV      4   1
0049    CALLT    2   3
0050 => RET0     0   1

-- BYTECODE -- util.lua:85-115
0001    IST          2
0002    JMP      5 => 0004
0003    KSTR     2   0      ; ""
0004 => IST          3
0005    JMP      5 => 0007
0006    TNEW     3   0
0007 => IST          4
0008    JMP      5 => 0010
0009    MOV      4   1
0010 => UGET     5   0      ; cart
0011    MOV      6   2
0012    MOV      7   4
0013    CAT      5   5   7
0014    USETV    0   5      ; cart
0015    GGET     5   1      ; "type"
0016    MOV      6   0
0017    CALL     5   2   2
0018    ISEQS    5   2      ; "table"
0019    JMP      5 => 0029
0020    UGET     5   0      ; cart
0021    KSTR     6   3      ; " = "
0022    UGET     7   1      ; basic_serialize
0023    MOV      8   0
0024    CALL     7   2   2
0025    KSTR     8   4      ; ";\n"
0026    CAT      5   5   8
0027    USETV    0   5      ; cart
0028    JMP      5 => 0097
0029 => TGETV    5   3   0
0030    ISF          5
0031    JMP      6 => 0046
0032    UGET     5   0      ; cart
0033    KSTR     6   5      ; " = {}; -- "
0034    TGETV    7   3   0
0035    KSTR     8   6      ; " (self reference)\n"
0036    CAT      5   5   8
0037    USETV    0   5      ; cart
0038    UGET     5   2      ; autoref
0039    MOV      6   1
0040    KSTR     7   3      ; " = "
0041    TGETV    8   3   0
0042    KSTR     9   4      ; ";\n"
0043    CAT      5   5   9
0044    USETV    2   5      ; autoref
0045    JMP      5 => 0097
0046 => TSETV    1   3   0
0047    UGET     5   3      ; is_empty_table
0048    MOV      6   0
0049    CALL     5   2   2
0050    ISF          5
0051    JMP      6 => 0057
0052    UGET     5   0      ; cart
0053    KSTR     6   7      ; " = {};\n"
0054    CAT      5   5   6
0055    USETV    0   5      ; cart
0056    JMP      5 => 0097
0057 => UGET     5   0      ; cart
0058    KSTR     6   8      ; " = {\n"
0059    CAT      5   5   6
0060    USETV    0   5      ; cart
0061    GGET     5   9      ; "pairs"
0062    MOV      6   0
0063    CALL     5   4   2
0064    ISNEXT   8 => 0090
0065 => UGET    10   1      ; basic_serialize
0066    MOV     11   8
0067    CALL    10   2   2
0068    MOV      8  10
0069    KSTR    10  10      ; "%s[%s]"
0070    MOV     11  10
0071    TGETS   10  10  11  ; "format"
0072    MOV     12   1
0073    MOV     13   8
0074    CALL    10   2   4
0075    KSTR    11  12      ; "[%s]"
0076    MOV     12  11
0077    TGETS   11  11  11  ; "format"
0078    MOV     13   8
0079    CALL    11   2   3
0080    MOV      4  11
0081    UGET    11   4      ; add_to_cart
0082    MOV     12   9
0083    MOV     13  10
0084    MOV     14   2
0085    KSTR    15  13      ; "   "
0086    CAT     14  14  15
0087    MOV     15   3
0088    MOV     16   4
0089    CALL    11   1   6
0090 => ITERN    8   3   3
0091    ITERL    8 => 0065
0092    UGET     5   0      ; cart
0093    MOV      6   2
0094    KSTR     7  14      ; "};\n"
0095    CAT      5   5   7
0096    USETV    0   5      ; cart
0097 => RET0     0   1

-- BYTECODE -- util.lua:61-124
0001    KNIL     3   4
0002    FNEW     5   0      ; util.lua:65
0003    FNEW     6   1      ; util.lua:67
0004    FNEW     7   2      ; util.lua:85
0005    IST          1
0006    JMP      8 => 0008
0007    KSTR     1   3      ; "__unnamed__"
0008 => GGET     8   4      ; "type"
0009    MOV      9   0
0010    CALL     8   2   2
0011    ISEQS    8   5      ; "table"
0012    JMP      8 => 0021
0013    MOV      8   1
0014    KSTR     9   6      ; " = "
0015    MOV     10   6
0016    MOV     11   0
0017    CALL    10   2   2
0018    CAT      8   8  10
0019    UCLO     0 => 0020
0020 => RET1     8   2
0021 => KSTR     8   7      ; ""
0022    KSTR     4   7      ; ""
0023    MOV      3   8
0024    MOV      8   7
0025    MOV      9   0
0026    MOV     10   1
0027    MOV     11   2
0028    CALL     8   1   4
0029    MOV      8   3
0030    MOV      9   4
0031    CAT      8   8   9
0032    UCLO     0 => 0033
0033 => RET1     8   2

-- BYTECODE -- util.lua:130-145
0001    GGET     2   0      ; "pairs"
0002    MOV      3   1
0003    CALL     2   4   2
0004    ISNEXT   5 => 0029
0005 => GGET     7   1      ; "type"
0006    MOV      8   6
0007    CALL     7   2   2
0008    ISNES    7   2      ; "table"
0009    JMP      7 => 0028
0010    TGETV    7   0   5
0011    ISNEP    7   0
0012    JMP      7 => 0015
0013    TNEW     7   0
0014    TSETV    7   0   5
0015 => GGET     7   1      ; "type"
0016    TGETV    8   0   5
0017    CALL     7   2   2
0018    ISNES    7   2      ; "table"
0019    JMP      7 => 0026
0020    UGET     7   0      ; util
0021    TGETS    7   7   3  ; "deep_merge"
0022    TGETV    8   0   5
0023    MOV      9   6
0024    CALL     7   1   3
0025    JMP      7 => 0029
0026 => TSETV    6   0   5
0027    JMP      7 => 0029
0028 => TSETV    6   0   5
0029 => ITERN    5   3   3
0030    ITERL    5 => 0005
0031    RET0     0   1

-- BYTECODE -- util.lua:151-164
0001    GGET     2   0      ; "pairs"
0002    MOV      3   1
0003    CALL     2   4   2
0004    ISNEXT   5 => 0030
0005 => GGET     7   1      ; "type"
0006    MOV      8   6
0007    CALL     7   2   2
0008    ISNES    7   2      ; "table"
0009    JMP      7 => 0026
0010    TGETV    7   0   5
0011    ISNEP    7   0
0012    JMP      7 => 0015
0013    TNEW     7   0
0014    TSETV    7   0   5
0015 => GGET     7   1      ; "type"
0016    TGETV    8   0   5
0017    CALL     7   2   2
0018    ISNES    7   2      ; "table"
0019    JMP      7 => 0030
0020    UGET     7   0      ; util
0021    TGETS    7   7   3  ; "deep_merge_under"
0022    TGETV    8   0   5
0023    MOV      9   6
0024    CALL     7   1   3
0025    JMP      7 => 0030
0026 => TGETV    7   0   5
0027    ISNEP    7   0
0028    JMP      7 => 0030
0029    TSETV    6   0   5
0030 => ITERN    5   3   3
0031    ITERL    5 => 0005
0032    RET0     0   1

-- BYTECODE -- util.lua:191-195
0001    MOV      2   0
0002    TGETS    1   0   0  ; "sub"
0003    KSHORT   3   1
0004    UGET     4   0      ; lua_version
0005    LEN      4   4
0006    CALL     1   2   4
0007    UGET     2   0      ; lua_version
0008    ISEQV    1   2
0009    JMP      1 => 0015
0010    KSTR     1   1      ; "/lua/"
0011    UGET     2   0      ; lua_version
0012    KSTR     3   2      ; "/"
0013    CAT      1   1   3
0014    RET1     1   2
0015 => RET0     0   1

-- BYTECODE -- util.lua:175-205
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISEQS    5   2      ; "string"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    UGET     4   0      ; util
0022    TGETS    4   4   3  ; "split_string"
0023    MOV      5   0
0024    MOV      6   1
0025    CALL     4   2   3
0026    TNEW     5   0
0027    TNEW     6   0
0028    KNIL     7   9
0029    ISF          3
0030    JMP     10 => 0037
0031    KSHORT  10   1
0032    LEN     11   4
0033    KSHORT   9   1
0034    MOV      8  11
0035    MOV      7  10
0036    JMP     10 => 0042
0037 => LEN     10   4
0038    KSHORT  11   1
0039    KSHORT   9  -1
0040    MOV      8  11
0041    MOV      7  10
0042 => MOV     10   7
0043    MOV     11   8
0044    MOV     12   9
0045    FORI    10 => 0079
0046 => TGETV   14   4  13
0047    MOV     15  14
0048    TGETS   14  14   4  ; "gsub"
0049    KSTR    16   5      ; "//"
0050    KSTR    17   6      ; "/"
0051    CALL    14   2   4
0052    ISF          2
0053    JMP     15 => 0060
0054    MOV     16  14
0055    TGETS   15  14   4  ; "gsub"
0056    KSTR    17   7      ; "/lua/([%d.]+)/"
0057    FNEW    18   8      ; util.lua:191
0058    CALL    15   2   4
0059    MOV     14  15
0060 => TGETV   15   6  14
0061    IST         15
0062    JMP     15 => 0078
0063    ISF          3
0064    JMP     15 => 0069
0065    LEN     15   5
0066    ADDVN   15  15   0  ; 1
0067    IST         15
0068    JMP     16 => 0070
0069 => KSHORT  15   1
0070 => GGET    16   9      ; "table"
0071    TGETS   16  16  10  ; "insert"
0072    MOV     17   5
0073    MOV     18  15
0074    MOV     19  14
0075    CALL    16   1   4
0076    KPRI    16   2
0077    TSETV   16   6  14
0078 => FORL    10 => 0046
0079 => GGET    10   9      ; "table"
0080    TGETS   10  10  11  ; "concat"
0081    MOV     11   5
0082    MOV     12   1
0083    UCLO     0 => 0084
0084 => CALLT   10   3

-- BYTECODE -- util.lua:209-232
0001    GGET     3   0      ; "string"
0002    TGETS    3   3   1  ; "find"
0003    MOV      4   0
0004    MOV      5   1
0005    CALL     3   2   3
0006    ISNEP    3   0
0007    JMP      3 => 0011
0008    TNEW     3   3
0009    TSETB    0   3   1
0010    RET1     3   2
0011 => ISEQP    2   0
0012    JMP      3 => 0016
0013    KSHORT   3   1
0014    ISGE     2   3
0015    JMP      3 => 0017
0016 => KSHORT   2   0
0017 => TNEW     3   0
0018    KSTR     4   2      ; "(.-)"
0019    MOV      5   1
0020    KSTR     6   3      ; "()"
0021    CAT      4   4   6
0022    KSHORT   5   0
0023    KPRI     6   0
0024    GGET     7   0      ; "string"
0025    TGETS    7   7   4  ; "gmatch"
0026    MOV      8   0
0027    MOV      9   4
0028    CALL     7   4   3
0029    JMP     10 => 0036
0030 => ADDVN    5   5   0  ; 1
0031    TSETV   10   3   5
0032    MOV      6  11
0033    ISNEV    5   2
0034    JMP     12 => 0036
0035    JMP      7 => 0038
0036 => ITERC   10   3   3
0037    ITERL   10 => 0030
0038 => ISEQV    5   2
0039    JMP      7 => 0047
0040    ADDVN    7   5   0  ; 1
0041    GGET     8   0      ; "string"
0042    TGETS    8   8   5  ; "sub"
0043    MOV      9   0
0044    MOV     10   6
0045    CALL     8   2   3
0046    TSETV    8   3   7
0047 => RET1     3   2

-- BYTECODE -- util.lua:237-243
0001    TNEW     1   0
0002    GGET     2   0      ; "pairs"
0003    MOV      3   0
0004    CALL     2   4   2
0005    ISNEXT   5 => 0011
0006 => GGET     7   1      ; "table"
0007    TGETS    7   7   2  ; "insert"
0008    MOV      8   1
0009    MOV      9   5
0010    CALL     7   1   3
0011 => ITERN    5   3   3
0012    ITERL    5 => 0006
0013    RET1     1   2

-- BYTECODE -- util.lua:246-249
0001    GGET     0   0      ; "io"
0002    TGETS    0   0   1  ; "stderr"
0003    MOV      1   0
0004    TGETS    0   0   2  ; "write"
0005    GGET     2   3      ; "table"
0006    TGETS    2   2   4  ; "concat"
0007    TNEW     3   3
0008    VARG     4   0   0
0009    TSETM    4   0      ; 1
0010    KSTR     4   5      ; "\t"
0011    CALL     2   0   3
0012    CALLM    0   1   1
0013    GGET     0   0      ; "io"
0014    TGETS    0   0   1  ; "stderr"
0015    MOV      1   0
0016    TGETS    0   0   2  ; "write"
0017    KSTR     2   6      ; "\n"
0018    CALL     0   1   3
0019    RET0     0   1

-- BYTECODE -- util.lua:253-255
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "printerr"
0003    KSTR     2   1      ; "Warning: "
0004    MOV      3   0
0005    CAT      2   2   3
0006    CALL     1   1   2
0007    RET0     0   1

-- BYTECODE -- util.lua:258-270
0001    GGET     2   0      ; "type"
0002    MOV      3   0
0003    CALL     2   2   2
0004    GGET     3   0      ; "type"
0005    MOV      4   1
0006    CALL     3   2   2
0007    ISNES    2   1      ; "number"
0008    JMP      4 => 0018
0009    ISNES    3   1      ; "number"
0010    JMP      4 => 0018
0011    ISLT     0   1
0012    JMP      4 => 0015
0013    KPRI     4   1
0014    JMP      5 => 0016
0015 => KPRI     4   2
0016 => RET1     4   2
0017    JMP      4 => 0040
0018 => ISNES    2   1      ; "number"
0019    JMP      4 => 0023
0020    KPRI     4   2
0021    RET1     4   2
0022    JMP      4 => 0040
0023 => ISNES    3   1      ; "number"
0024    JMP      4 => 0028
0025    KPRI     4   1
0026    RET1     4   2
0027    JMP      4 => 0040
0028 => GGET     4   2      ; "tostring"
0029    MOV      5   0
0030    CALL     4   2   2
0031    GGET     5   2      ; "tostring"
0032    MOV      6   1
0033    CALL     5   2   2
0034    ISLT     4   5
0035    JMP      4 => 0038
0036    KPRI     4   1
0037    JMP      5 => 0039
0038 => KPRI     4   2
0039 => RET1     4   2
0040 => RET0     0   1

-- BYTECODE -- util.lua:320-324
0001    UGET     0   0      ; keys
0002    UGET     1   1      ; i
0003    TGETV    0   0   1
0004    UGET     1   1      ; i
0005    ADDVN    1   1   0  ; 1
0006    USETV    1   1      ; i
0007    MOV      1   0
0008    UGET     2   2      ; tbl
0009    TGETV    2   2   0
0010    UGET     3   3      ; sub_orders
0011    TGETV    3   3   0
0012    RET      1   4

-- BYTECODE -- util.lua:282-325
0001    IST          1
0002    JMP      2 => 0004
0003    UGET     1   0      ; default_sort
0004 => UGET     2   1      ; util
0005    TGETS    2   2   0  ; "keys"
0006    MOV      3   0
0007    CALL     2   2   2
0008    TNEW     3   0
0009    GGET     4   1      ; "type"
0010    MOV      5   1
0011    CALL     4   2   2
0012    ISNES    4   2      ; "function"
0013    JMP      4 => 0020
0014    GGET     4   3      ; "table"
0015    TGETS    4   4   4  ; "sort"
0016    MOV      5   2
0017    MOV      6   1
0018    CALL     4   1   3
0019    JMP      4 => 0070
0020 => MOV      4   1
0021    TNEW     5   0
0022    MOV      6   2
0023    TNEW     2   0
0024    GGET     7   5      ; "ipairs"
0025    MOV      8   4
0026    CALL     7   4   2
0027    JMP     10 => 0049
0028 => KNIL    12  13
0029    GGET    14   1      ; "type"
0030    MOV     15  11
0031    CALL    14   2   2
0032    ISNES   14   3      ; "table"
0033    JMP     14 => 0037
0034    TGETB   12  11   1
0035    TGETB   13  11   2
0036    JMP     14 => 0038
0037 => MOV     12  11
0038 => TGETV   14   0  12
0039    ISF         14
0040    JMP     15 => 0049
0041    KPRI    14   2
0042    TSETV   14   5  12
0043    TSETV   13   3  12
0044    GGET    14   3      ; "table"
0045    TGETS   14  14   6  ; "insert"
0046    MOV     15   2
0047    MOV     16  12
0048    CALL    14   1   3
0049 => ITERC   10   3   3
0050    ITERL   10 => 0028
0051    GGET     7   3      ; "table"
0052    TGETS    7   7   4  ; "sort"
0053    MOV      8   6
0054    UGET     9   0      ; default_sort
0055    CALL     7   1   3
0056    GGET     7   5      ; "ipairs"
0057    MOV      8   6
0058    CALL     7   4   2
0059    JMP     10 => 0068
0060 => TGETV   12   5  11
0061    IST         12
0062    JMP     12 => 0068
0063    GGET    12   3      ; "table"
0064    TGETS   12  12   6  ; "insert"
0065    MOV     13   2
0066    MOV     14  11
0067    CALL    12   1   3
0068 => ITERC   10   3   3
0069    ITERL   10 => 0060
0070 => KSHORT   4   1
0071    FNEW     5   7      ; util.lua:320
0072    UCLO     0 => 0073
0073 => RET1     5   2

-- BYTECODE -- util.lua:0-329
0001    TNEW     0   0
0002    KPRI     1   0
0003    FNEW     2   1      ; util.lua:14
0004    TSETS    2   0   0  ; "popen_read"
0005    FNEW     2   3      ; util.lua:36
0006    TSETS    2   0   2  ; "make_shallow_copy"
0007    FNEW     2   5      ; util.lua:61
0008    TSETS    2   0   4  ; "show_table"
0009    FNEW     2   7      ; util.lua:130
0010    TSETS    2   0   6  ; "deep_merge"
0011    FNEW     2   9      ; util.lua:151
0012    TSETS    2   0   8  ; "deep_merge_under"
0013    FNEW     2  11      ; util.lua:175
0014    TSETS    2   0  10  ; "cleanup_path"
0015    FNEW     2  13      ; util.lua:209
0016    TSETS    2   0  12  ; "split_string"
0017    FNEW     2  15      ; util.lua:237
0018    TSETS    2   0  14  ; "keys"
0019    FNEW     2  17      ; util.lua:246
0020    TSETS    2   0  16  ; "printerr"
0021    FNEW     2  19      ; util.lua:253
0022    TSETS    2   0  18  ; "warning"
0023    FNEW     2  20      ; util.lua:258
0024    FNEW     3  22      ; util.lua:282
0025    TSETS    3   0  21  ; "sortedpairs"
0026    UCLO     0 => 0027
0027 => RET1     0   2

-----------------------
-- BYTECODE -- persist.lua:13-44
0001    GGET     2   0      ; "io"
0002    TGETS    2   2   1  ; "open"
0003    MOV      3   0
0004    CALL     2   3   2
0005    IST          2
0006    JMP      4 => 0011
0007    KPRI     4   0
0008    MOV      5   3
0009    KSTR     6   1      ; "open"
0010    RET      4   4
0011 => MOV      5   2
0012    TGETS    4   2   2  ; "read"
0013    KSTR     6   3      ; "*a"
0014    CALL     4   3   3
0015    MOV      7   2
0016    TGETS    6   2   4  ; "close"
0017    CALL     6   1   2
0018    IST          4
0019    JMP      6 => 0024
0020    KPRI     6   0
0021    MOV      7   5
0022    KSTR     8   1      ; "open"
0023    RET      6   4
0024 => MOV      7   4
0025    TGETS    6   4   5  ; "gsub"
0026    KSTR     8   6      ; "^#![^\n]*\n"
0027    KSTR     9   7      ; ""
0028    CALL     6   2   4
0029    MOV      4   6
0030    KNIL     6   7
0031    GGET     8   8      ; "_VERSION"
0032    ISNES    8   9      ; "Lua 5.1"
0033    JMP      8 => 0052
0034    GGET     8  10      ; "loadstring"
0035    MOV      9   4
0036    MOV     10   0
0037    CALL     8   3   3
0038    MOV      5   9
0039    MOV      6   8
0040    ISF          6
0041    JMP      8 => 0067
0042    GGET     8  11      ; "setfenv"
0043    MOV      9   6
0044    MOV     10   1
0045    CALL     8   1   3
0046    GGET     8  12      ; "pcall"
0047    MOV      9   6
0048    CALL     8   3   2
0049    MOV      5   9
0050    MOV      7   8
0051    JMP      8 => 0067
0052 => GGET     8  13      ; "load"
0053    MOV      9   4
0054    MOV     10   0
0055    KSTR    11  14      ; "t"
0056    MOV     12   1
0057    CALL     8   3   5
0058    MOV      5   9
0059    MOV      6   8
0060    ISF          6
0061    JMP      8 => 0067
0062    GGET     8  12      ; "pcall"
0063    MOV      9   6
0064    CALL     8   3   2
0065    MOV      5   9
0066    MOV      7   8
0067 => IST          6
0068    JMP      8 => 0075
0069    KPRI     8   0
0070    KSTR     9  15      ; "Error loading file: "
0071    MOV     10   5
0072    CAT      9   9  10
0073    KSTR    10  13      ; "load"
0074    RET      8   4
0075 => IST          7
0076    JMP      8 => 0083
0077    KPRI     8   0
0078    KSTR     9  16      ; "Error running file: "
0079    MOV     10   5
0080    CAT      9   9  10
0081    KSTR    10  17      ; "run"
0082    RET      8   4
0083 => KPRI     8   2
0084    MOV      9   5
0085    RET      8   3

-- BYTECODE -- persist.lua:63-65
0001    UGET     2   0      ; globals
0002    KPRI     3   2
0003    TSETV    3   2   1
0004    RET0     0   1

-- BYTECODE -- persist.lua:56-78
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "table"
0016    JMP      3 => 0021
0017    NOT      3   1
0018    JMP      4 => 0022
0019    KPRI     3   1
0020    JMP      4 => 0022
0021 => KPRI     3   2
0022 => CALL     2   1   2
0023    ISTC     2   1
0024    JMP      2 => 0026
0025    TNEW     2   0
0026 => TNEW     3   0
0027    TDUP     4   5
0028    FNEW     5   4      ; persist.lua:63
0029    TSETS    5   4   6  ; "__index"
0030    GGET     5   7      ; "getmetatable"
0031    MOV      6   2
0032    CALL     5   2   2
0033    GGET     6   8      ; "setmetatable"
0034    MOV      7   2
0035    MOV      8   4
0036    CALL     6   1   3
0037    UGET     6   0      ; persist
0038    TGETS    6   6   9  ; "run_file"
0039    MOV      7   0
0040    MOV      8   2
0041    CALL     6   4   3
0042    GGET     9   8      ; "setmetatable"
0043    MOV     10   2
0044    MOV     11   5
0045    CALL     9   1   3
0046    IST          6
0047    JMP      9 => 0053
0048    KPRI     9   0
0049    MOV     10   7
0050    MOV     11   8
0051    UCLO     0 => 0052
0052 => RET      9   4
0053 => MOV      9   2
0054    MOV     10   3
0055    UCLO     0 => 0056
0056 => RET      9   3

-- BYTECODE -- persist.lua:0-82
0001    TNEW     0   0
0002    KPRI     1   0
0003    FNEW     2   1      ; persist.lua:13
0004    TSETS    2   0   0  ; "run_file"
0005    FNEW     2   3      ; persist.lua:56
0006    TSETS    2   0   2  ; "load_into_table"
0007    UCLO     0 => 0008
0008 => RET1     0   2

-----------------------
-- BYTECODE -- deps.lua:38-64
0001    KNIL     1   2
0002    UGET     3   0      ; rocks_provided
0003    TGETS    4   0   0  ; "name"
0004    TGETV    3   3   4
0005    ISF          3
0006    JMP      4 => 0012
0007    TNEW     4   3
0008    TSETB    3   4   1
0009    TNEW     2   0
0010    MOV      1   4
0011    JMP      4 => 0023
0012 => UGET     4   1      ; deps_mode
0013    ISNES    4   1      ; "none"
0014    JMP      4 => 0016
0015    USETS    1   2      ; deps_mode ; "one"
0016 => UGET     4   2      ; manif
0017    TGETS    4   4   3  ; "get_versions"
0018    MOV      5   0
0019    UGET     6   1      ; deps_mode
0020    CALL     4   3   3
0021    MOV      2   5
0022    MOV      1   4
0023 => UGET     4   3      ; blacklist
0024    ISF          4
0025    JMP      5 => 0050
0026    UGET     4   3      ; blacklist
0027    TGETS    5   0   0  ; "name"
0028    TGETV    4   4   5
0029    ISF          4
0030    JMP      5 => 0050
0031    MOV      4   1
0032    TNEW     1   0
0033    GGET     5   4      ; "ipairs"
0034    MOV      6   4
0035    CALL     5   4   2
0036    JMP      8 => 0048
0037 => UGET    10   3      ; blacklist
0038    TGETS   11   0   0  ; "name"
0039    TGETV   10  10  11
0040    TGETV   10  10   9
0041    IST         10
0042    JMP     10 => 0048
0043    GGET    10   5      ; "table"
0044    TGETS   10  10   6  ; "insert"
0045    MOV     11   1
0046    MOV     12   9
0047    CALL    10   1   3
0048 => ITERC    8   3   3
0049    ITERL    8 => 0037
0050 => UGET     4   4      ; deplocks
0051    TGETS    4   4   7  ; "get"
0052    UGET     5   5      ; depskey
0053    TGETS    6   0   0  ; "name"
0054    CALL     4   2   3
0055    MOV      5   1
0056    MOV      6   2
0057    MOV      7   4
0058    ISNEP    3   0
0059    JMP      8 => 0062
0060    KPRI     8   1
0061    JMP      9 => 0063
0062 => KPRI     8   2
0063 => RET      5   5

-- BYTECODE -- deps.lua:32-65
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISEQS    5   3      ; "table"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   2
0024    CALL     5   2   2
0025    ISEQS    5   2      ; "string"
0026    JMP      5 => 0029
0027    KPRI     5   1
0028    JMP      6 => 0030
0029 => KPRI     5   2
0030 => CALL     4   1   2
0031    GGET     4   0      ; "assert"
0032    GGET     5   1      ; "type"
0033    MOV      6   3
0034    CALL     5   2   2
0035    ISEQS    5   3      ; "table"
0036    JMP      5 => 0041
0037    ISEQP    3   0
0038    JMP      5 => 0041
0039    KPRI     5   1
0040    JMP      6 => 0042
0041 => KPRI     5   2
0042 => CALL     4   1   2
0043    FNEW     4   4      ; deps.lua:38
0044    UCLO     0 => 0045
0045 => RET1     4   2

-- BYTECODE -- deps.lua:81-109
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "function"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    MOV      2   1
0022    MOV      3   0
0023    CALL     2   5   2
0024    KNIL     6   7
0025    GGET     8   4      ; "ipairs"
0026    MOV      9   2
0027    CALL     8   4   2
0028    JMP     11 => 0046
0029 => UGET    13   0      ; vers
0030    TGETS   13  13   5  ; "parse_version"
0031    MOV     14  12
0032    CALL    13   2   2
0033    UGET    14   0      ; vers
0034    TGETS   14  14   6  ; "match_constraints"
0035    MOV     15  13
0036    TGETS   16   0   7  ; "constraints"
0037    CALL    14   2   3
0038    ISF         14
0039    JMP     15 => 0046
0040    ISF          6
0041    JMP     14 => 0044
0042    ISGE     6  13
0043    JMP     14 => 0046
0044 => MOV      6  13
0045    MOV      7  12
0046 => ITERC   11   3   3
0047    ITERL   11 => 0029
0048    ISF          4
0049    JMP      8 => 0079
0050    TGETV    8   3   4
0051    IST          8
0052    JMP      8 => 0079
0053    KSTR     8   8      ; ""
0054    ISF          7
0055    JMP      9 => 0062
0056    ISEQV    7   4
0057    JMP      9 => 0062
0058    KSTR     9   9      ; " (latest matching is "
0059    MOV     10   7
0060    KSTR    11  10      ; ")"
0061    CAT      8   9  11
0062 => UGET     9   1      ; util
0063    TGETS    9   9  11  ; "printout"
0064    KSTR    10  12      ; "Forcing "
0065    TGETS   11   0  13  ; "name"
0066    KSTR    12  14      ; " to pinned version "
0067    MOV     13   4
0068    MOV     14   8
0069    CAT     10  10  14
0070    CALL     9   1   2
0071    KNIL     9  10
0072    UGET    11   2      ; queries
0073    TGETS   11  11  15  ; "new"
0074    TGETS   12   0  13  ; "name"
0075    TGETS   13   0  16  ; "namespace"
0076    MOV     14   4
0077    CALL    11   0   4
0078    RETM     9   2
0079 => MOV      8   7
0080    TGETV    9   3   7
0081    MOV     10   0
0082    MOV     11   5
0083    RET      8   5

-- BYTECODE -- deps.lua:111-133
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "function"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    TNEW     2   0
0022    TNEW     3   0
0023    TNEW     4   0
0024    GGET     5   4      ; "ipairs"
0025    MOV      6   0
0026    CALL     5   4   2
0027    JMP      8 => 0061
0028 => KNIL    10  12
0029    UGET    13   0      ; match_dep
0030    MOV     14   9
0031    MOV     15   1
0032    CALL    13   5   3
0033    MOV     12  16
0034    MOV      9  15
0035    MOV     11  14
0036    MOV     10  13
0037    ISF         10
0038    JMP     13 => 0047
0039    IST         12
0040    JMP     13 => 0061
0041    TDUP    13   6
0042    TGETS   14   9   5  ; "name"
0043    TSETS   14  13   5  ; "name"
0044    TSETS   10  13   7  ; "version"
0045    TSETV   13   2   9
0046    JMP     13 => 0061
0047 => TGETS   13   9   8  ; "constraints"
0048    TGETB   13  13   1
0049    ISF         13
0050    JMP     14 => 0059
0051    TGETS   13   9   8  ; "constraints"
0052    TGETB   13  13   1
0053    TGETS   13  13   9  ; "no_upgrade"
0054    ISF         13
0055    JMP     14 => 0059
0056    TGETS   13   9   5  ; "name"
0057    TSETV    9   4  13
0058    JMP     13 => 0061
0059 => TGETS   13   9   5  ; "name"
0060    TSETV    9   3  13
0061 => ITERC    8   3   3
0062    ITERL    8 => 0028
0063    MOV      5   2
0064    MOV      6   3
0065    MOV      7   4
0066    RET      5   4

-- BYTECODE -- deps.lua:148-156
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "table"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISEQS    5   2      ; "table"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   2
0024    CALL     5   2   2
0025    ISEQS    5   2      ; "table"
0026    JMP      5 => 0031
0027    ISEQP    2   0
0028    JMP      5 => 0031
0029    KPRI     5   1
0030    JMP      6 => 0032
0031 => KPRI     5   2
0032 => CALL     4   1   2
0033    GGET     4   0      ; "assert"
0034    GGET     5   1      ; "type"
0035    MOV      6   3
0036    CALL     5   2   2
0037    ISEQS    5   3      ; "string"
0038    JMP      5 => 0041
0039    KPRI     5   1
0040    JMP      6 => 0042
0041 => KPRI     5   2
0042 => CALL     4   1   2
0043    UGET     4   0      ; prepare_get_versions
0044    MOV      5   3
0045    MOV      6   1
0046    KSTR     7   4      ; "dependencies"
0047    MOV      8   2
0048    CALL     4   2   5
0049    UGET     5   1      ; match_all_deps
0050    MOV      6   0
0051    MOV      7   4
0052    CALLT    5   3

-- BYTECODE -- deps.lua:158-165
0001    GGET     2   0      ; "assert"
0002    MOV      4   0
0003    TGETS    3   0   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "query"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "function"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    UGET     2   0      ; match_dep
0022    MOV      3   0
0023    MOV      4   1
0024    CALL     2   5   3
0025    ISF          5
0026    JMP      6 => 0029
0027    KSTR     6   4      ; "provided by VM"
0028    JMP      7 => 0030
0029 => KSTR     6   5      ; "installed"
0030 => ISF          2
0031    JMP      7 => 0038
0032    MOV      7   2
0033    KSTR     8   6      ; " "
0034    MOV      9   6
0035    CAT      7   7   9
0036    IST          7
0037    JMP      8 => 0039
0038 => KSTR     7   7      ; "not installed"
0039 => RET1     7   2

-- BYTECODE -- deps.lua:176-203
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "string"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   2      ; "string"
0016    JMP      6 => 0019
0017    KPRI     6   1
0018    JMP      7 => 0020
0019 => KPRI     6   2
0020 => CALL     5   1   2
0021    GGET     5   0      ; "assert"
0022    GGET     6   1      ; "type"
0023    MOV      7   2
0024    CALL     6   2   2
0025    ISEQS    6   3      ; "table"
0026    JMP      6 => 0029
0027    KPRI     6   1
0028    JMP      7 => 0030
0029 => KPRI     6   2
0030 => CALL     5   1   2
0031    GGET     5   0      ; "assert"
0032    GGET     6   1      ; "type"
0033    MOV      7   3
0034    CALL     6   2   2
0035    ISEQS    6   2      ; "string"
0036    JMP      6 => 0039
0037    KPRI     6   1
0038    JMP      7 => 0040
0039 => KPRI     6   2
0040 => CALL     5   1   2
0041    GGET     5   0      ; "assert"
0042    GGET     6   1      ; "type"
0043    MOV      7   4
0044    CALL     6   2   2
0045    ISEQS    6   3      ; "table"
0046    JMP      6 => 0049
0047    KPRI     6   1
0048    JMP      7 => 0050
0049 => KPRI     6   2
0050 => CALL     5   1   2
0051    ISNES    3   4      ; "none"
0052    JMP      5 => 0054
0053    RET0     0   1
0054 => UGET     5   0      ; prepare_get_versions
0055    MOV      6   3
0056    MOV      7   4
0057    KSTR     8   5      ; "dependencies"
0058    CALL     5   2   4
0059    KPRI     6   2
0060    GGET     7   6      ; "ipairs"
0061    MOV      8   2
0062    CALL     7   4   2
0063    JMP     10 => 0100
0064 => KNIL    12  13
0065    UGET    14   1      ; match_dep
0066    MOV     15  11
0067    MOV     16   5
0068    CALL    14   4   3
0069    MOV     11  16
0070    MOV     13  15
0071    MOV     12  14
0072    IST         12
0073    JMP     14 => 0100
0074    ISF          6
0075    JMP     14 => 0086
0076    UGET    14   2      ; util
0077    TGETS   14  14   7  ; "printout"
0078    KSTR    15   8      ; "Missing dependencies for %s %s:"
0079    MOV     16  15
0080    TGETS   15  15   9  ; "format"
0081    MOV     17   0
0082    MOV     18   1
0083    CALL    15   0   4
0084    CALLM   14   1   0
0085    KPRI     6   1
0086 => UGET    14   2      ; util
0087    TGETS   14  14   7  ; "printout"
0088    KSTR    15  10      ; "   %s (%s)"
0089    MOV     16  15
0090    TGETS   15  15   9  ; "format"
0091    GGET    17  11      ; "tostring"
0092    MOV     18  11
0093    CALL    17   2   2
0094    UGET    18   3      ; rock_status
0095    MOV     19  11
0096    MOV     20   5
0097    CALL    18   0   3
0098    CALLM   15   0   2
0099    CALLM   14   1   0
0100 => ITERC   10   3   3
0101    ITERL   10 => 0064
0102    RET0     0   1

-- BYTECODE -- deps.lua:205-247
0001    GGET     5   0      ; "assert"
0002    MOV      7   0
0003    TGETS    6   0   1  ; "type"
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "query"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   3      ; "string"
0016    JMP      6 => 0021
0017    ISEQP    1   0
0018    JMP      6 => 0021
0019    KPRI     6   1
0020    JMP      7 => 0022
0021 => KPRI     6   2
0022 => CALL     5   1   2
0023    GGET     5   0      ; "assert"
0024    GGET     6   1      ; "type"
0025    MOV      7   2
0026    CALL     6   2   2
0027    ISEQS    6   4      ; "table"
0028    JMP      6 => 0033
0029    ISEQP    2   0
0030    JMP      6 => 0033
0031    KPRI     6   1
0032    JMP      7 => 0034
0033 => KPRI     6   2
0034 => CALL     5   1   2
0035    GGET     5   0      ; "assert"
0036    GGET     6   1      ; "type"
0037    MOV      7   3
0038    CALL     6   2   2
0039    ISEQS    6   5      ; "boolean"
0040    JMP      6 => 0045
0041    ISEQP    3   0
0042    JMP      6 => 0045
0043    KPRI     6   1
0044    JMP      7 => 0046
0045 => KPRI     6   2
0046 => CALL     5   1   2
0047    GGET     5   0      ; "assert"
0048    GGET     6   1      ; "type"
0049    MOV      7   4
0050    CALL     6   2   2
0051    ISEQS    6   3      ; "string"
0052    JMP      6 => 0055
0053    KPRI     6   1
0054    JMP      7 => 0056
0055 => KPRI     6   2
0056 => CALL     5   1   2
0057    IST          1
0058    JMP      5 => 0060
0059    KSTR     1   6      ; "all"
0060 => IST          2
0061    JMP      5 => 0063
0062    TNEW     2   0
0063 => UGET     5   0      ; prepare_get_versions
0064    MOV      6   1
0065    MOV      7   2
0066    MOV      8   4
0067    CALL     5   2   4
0068    KNIL     6   7
0069    UGET     8   1      ; match_dep
0070    MOV      9   0
0071    MOV     10   5
0072    CALL     8   4   3
0073    MOV      0  10
0074    MOV      7   9
0075    MOV      6   8
0076    ISF          6
0077    JMP      8 => 0096
0078    UGET     8   2      ; manif
0079    TGETS    8   8   7  ; "load_rocks_tree_manifests"
0080    MOV      9   1
0081    CALL     8   2   2
0082    UGET     9   2      ; manif
0083    TGETS    9   9   8  ; "scan_dependencies"
0084    TGETS   10   0   9  ; "name"
0085    MOV     11   6
0086    MOV     12   8
0087    UGET    13   3      ; deplocks
0088    TGETS   13  13  10  ; "proxy"
0089    MOV     14   4
0090    CALL    13   0   2
0091    CALLM    9   1   3
0092    KPRI     9   2
0093    MOV     10   6
0094    MOV     11   7
0095    RET      9   4
0096 => GGET     8  11      ; "require"
0097    KSTR     9  12      ; "luarocks.search"
0098    CALL     8   2   2
0099    GGET     9  11      ; "require"
0100    KSTR    10  13      ; "luarocks.cmd.install"
0101    CALL     9   2   2
0102    TGETS   10   8  14  ; "find_suitable_rock"
0103    MOV     11   0
0104    KPRI    12   2
0105    CALL    10   3   3
0106    IST         10
0107    JMP     12 => 0117
0108    KPRI    12   0
0109    KSTR    13  15      ; "Could not satisfy dependency "
0110    GGET    14  16      ; "tostring"
0111    MOV     15   0
0112    CALL    14   2   2
0113    KSTR    15  17      ; ": "
0114    MOV     16  11
0115    CAT     13  13  16
0116    RET     12   3
0117 => UGET    12   4      ; util
0118    TGETS   12  12  18  ; "printout"
0119    KSTR    13  19      ; "Installing "
0120    MOV     14  10
0121    CAT     13  13  14
0122    CALL    12   1   2
0123    TDUP    12  20
0124    TSETS   10  12  21  ; "rock"
0125    TSETS    1  12  22  ; "deps_mode"
0126    TGETS   13   0  23  ; "namespace"
0127    TSETS   13  12  23  ; "namespace"
0128    TSETS    3  12  24  ; "verify"
0129    TGETS   13   9  25  ; "command"
0130    MOV     14  12
0131    CALL    13   4   2
0132    IST         13
0133    JMP     16 => 0142
0134    KPRI    16   0
0135    KSTR    17  26      ; "Failed installing dependency: "
0136    MOV     18  10
0137    KSTR    19  27      ; " - "
0138    MOV     20  14
0139    CAT     17  17  20
0140    MOV     18  15
0141    RET     16   4
0142 => UGET    16   1      ; match_dep
0143    MOV     17   0
0144    MOV     18   5
0145    CALL    16   3   3
0146    MOV      7  17
0147    MOV      6  16
0148    GGET    16   0      ; "assert"
0149    MOV     17   6
0150    CALL    16   1   2
0151    KPRI    16   2
0152    MOV     17   6
0153    MOV     18   7
0154    RET     16   4

-- BYTECODE -- deps.lua:249-275
0001    TGETS    1   0   0  ; "supported_platforms"
0002    ISF          1
0003    JMP      2 => 0065
0004    GGET     1   1      ; "next"
0005    TGETS    2   0   0  ; "supported_platforms"
0006    CALL     1   2   2
0007    ISF          1
0008    JMP      2 => 0065
0009    KPRI     1   2
0010    KPRI     2   1
0011    GGET     3   2      ; "pairs"
0012    TGETS    4   0   0  ; "supported_platforms"
0013    CALL     3   4   2
0014    ISNEXT   6 => 0048
0015 => KPRI     8   0
0016    MOV     10   7
0017    TGETS    9   7   3  ; "match"
0018    KSTR    11   4      ; "^(!?)(.*)"
0019    CALL     9   3   3
0020    MOV      7  10
0021    MOV      8   9
0022    ISNES    8   5      ; "!"
0023    JMP      9 => 0039
0024    UGET     9   0      ; cfg
0025    TGETS    9   9   6  ; "is_platform"
0026    MOV     10   7
0027    CALL     9   2   2
0028    ISF          9
0029    JMP     10 => 0048
0030    KPRI     9   0
0031    KSTR    10   7      ; "This rockspec for "
0032    TGETS   11   0   8  ; "package"
0033    KSTR    12   9      ; " does not support "
0034    MOV     13   7
0035    KSTR    14  10      ; " platforms."
0036    CAT     10  10  14
0037    RET      9   3
0038    JMP      9 => 0048
0039 => KPRI     1   1
0040    UGET     9   0      ; cfg
0041    TGETS    9   9   6  ; "is_platform"
0042    MOV     10   7
0043    CALL     9   2   2
0044    ISF          9
0045    JMP     10 => 0048
0046    KPRI     2   2
0047    JMP      3 => 0050
0048 => ITERN    6   3   3
0049    ITERL    6 => 0015
0050 => ISNEP    2   1
0051    JMP      3 => 0065
0052    IST          1
0053    JMP      3 => 0065
0054    UGET     3   0      ; cfg
0055    TGETS    3   3  11  ; "print_platforms"
0056    CALL     3   2   1
0057    KPRI     4   0
0058    KSTR     5   7      ; "This rockspec for "
0059    TGETS    6   0   8  ; "package"
0060    KSTR     7   9      ; " does not support "
0061    MOV      8   3
0062    KSTR     9  10      ; " platforms."
0063    CAT      5   5   9
0064    RET      4   3
0065 => KPRI     1   2
0066    RET1     1   2

-- BYTECODE -- deps.lua:288-354
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "table"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   3      ; "string"
0016    JMP      6 => 0019
0017    KPRI     6   1
0018    JMP      7 => 0020
0019 => KPRI     6   2
0020 => CALL     5   1   2
0021    GGET     5   0      ; "assert"
0022    GGET     6   1      ; "type"
0023    MOV      7   2
0024    CALL     6   2   2
0025    ISEQS    6   3      ; "string"
0026    JMP      6 => 0029
0027    KPRI     6   1
0028    JMP      7 => 0030
0029 => KPRI     6   2
0030 => CALL     5   1   2
0031    GGET     5   0      ; "assert"
0032    GGET     6   1      ; "type"
0033    MOV      7   3
0034    CALL     6   2   2
0035    ISEQS    6   4      ; "boolean"
0036    JMP      6 => 0041
0037    ISEQP    3   0
0038    JMP      6 => 0041
0039    KPRI     6   1
0040    JMP      7 => 0042
0041 => KPRI     6   2
0042 => CALL     5   1   2
0043    GGET     5   0      ; "assert"
0044    GGET     6   1      ; "type"
0045    MOV      7   4
0046    CALL     6   2   2
0047    ISEQS    6   3      ; "string"
0048    JMP      6 => 0053
0049    ISEQP    4   0
0050    JMP      6 => 0053
0051    KPRI     6   1
0052    JMP      7 => 0054
0053 => KPRI     6   2
0054 => CALL     5   1   2
0055    TGETS    5   0   5  ; "name"
0056    TGETS    6   0   6  ; "version"
0057    TGETS    7   0   7  ; "rocks_provided"
0058    UGET     8   0      ; deplocks
0059    TGETS    8   8   8  ; "load"
0060    MOV      9   5
0061    ISTC    10   4
0062    JMP     10 => 0064
0063    KSTR    10   9      ; "."
0064 => CALL     8   4   3
0065    ISF          9
0066    JMP     11 => 0130
0067    UGET    11   1      ; util
0068    TGETS   11  11  10  ; "printout"
0069    KSTR    12  11      ; "Using dependencies pinned in lockfile: "
0070    MOV     13   9
0071    CAT     12  12  13
0072    CALL    11   1   2
0073    UGET    11   2      ; prepare_get_versions
0074    KSTR    12  12      ; "none"
0075    MOV     13   7
0076    MOV     14   1
0077    CALL    11   2   4
0078    UGET    12   0      ; deplocks
0079    TGETS   12  12  13  ; "each"
0080    MOV     13   1
0081    CALL    12   4   2
0082    JMP     15 => 0122
0083 => UGET    17   1      ; util
0084    TGETS   17  17  14  ; "split_namespace"
0085    MOV     18  15
0086    CALL    17   3   2
0087    UGET    19   3      ; queries
0088    TGETS   19  19  15  ; "new"
0089    MOV     20  17
0090    MOV     21  18
0091    MOV     22  16
0092    CALL    19   2   4
0093    UGET    20   1      ; util
0094    TGETS   20  20  10  ; "printout"
0095    KSTR    21  16      ; "%s %s is pinned to %s (%s)"
0096    MOV     22  21
0097    TGETS   21  21  17  ; "format"
0098    MOV     23   5
0099    MOV     24   6
0100    GGET    25  18      ; "tostring"
0101    MOV     26  19
0102    CALL    25   2   2
0103    UGET    26   4      ; rock_status
0104    MOV     27  19
0105    MOV     28  11
0106    CALL    26   0   3
0107    CALLM   21   0   4
0108    CALLM   20   1   0
0109    UGET    20   5      ; deps
0110    TGETS   20  20  19  ; "fulfill_dependency"
0111    MOV     21  19
0112    KSTR    22  12      ; "none"
0113    MOV     23   7
0114    MOV     24   3
0115    MOV     25   1
0116    CALL    20   3   6
0117    IST         20
0118    JMP     22 => 0122
0119    KPRI    22   0
0120    MOV     23  21
0121    RET     22   3
0122 => ITERC   15   3   3
0123    ITERL   15 => 0083
0124    UGET    12   1      ; util
0125    TGETS   12  12  10  ; "printout"
0126    CALL    12   1   1
0127    KPRI    12   2
0128    RET1    12   2
0129    JMP     11 => 0136
0130 => ISF         10
0131    JMP     11 => 0136
0132    UGET    11   1      ; util
0133    TGETS   11  11  20  ; "warning"
0134    MOV     12  10
0135    CALL    11   1   2
0136 => UGET    11   6      ; check_supported_platforms
0137    MOV     12   0
0138    CALL    11   3   2
0139    MOV     10  12
0140    MOV      8  11
0141    IST          8
0142    JMP     11 => 0146
0143    KPRI    11   0
0144    MOV     12  10
0145    RET     11   3
0146 => UGET    11   5      ; deps
0147    TGETS   11  11  21  ; "report_missing_dependencies"
0148    MOV     12   5
0149    MOV     13   6
0150    TGETV   14   0   1
0151    MOV     15   2
0152    MOV     16   7
0153    CALL    11   1   6
0154    UGET    11   1      ; util
0155    TGETS   11  11  10  ; "printout"
0156    CALL    11   1   1
0157    UGET    11   2      ; prepare_get_versions
0158    MOV     12   2
0159    MOV     13   7
0160    MOV     14   1
0161    CALL    11   2   4
0162    GGET    12  22      ; "ipairs"
0163    TGETV   13   0   1
0164    CALL    12   4   2
0165    JMP     15 => 0245
0166 => UGET    17   1      ; util
0167    TGETS   17  17  10  ; "printout"
0168    KSTR    18  23      ; "%s %s depends on %s (%s)"
0169    MOV     19  18
0170    TGETS   18  18  17  ; "format"
0171    MOV     20   5
0172    MOV     21   6
0173    GGET    22  18      ; "tostring"
0174    MOV     23  16
0175    CALL    22   2   2
0176    UGET    23   4      ; rock_status
0177    MOV     24  16
0178    MOV     25  11
0179    CALL    23   0   3
0180    CALLM   18   0   4
0181    CALLM   17   1   0
0182    UGET    17   5      ; deps
0183    TGETS   17  17  19  ; "fulfill_dependency"
0184    MOV     18  16
0185    MOV     19   2
0186    MOV     20   7
0187    MOV     21   3
0188    MOV     22   1
0189    CALL    17   5   6
0190    ISF         17
0191    JMP     21 => 0199
0192    UGET    21   0      ; deplocks
0193    TGETS   21  21  24  ; "add"
0194    MOV     22   1
0195    TGETS   23  16   5  ; "name"
0196    MOV     24  18
0197    CALL    21   1   4
0198    JMP     21 => 0245
0199 => ISF         20
0200    JMP     21 => 0242
0201    UGET    21   1      ; util
0202    TGETS   21  21  25  ; "printerr"
0203    KSTR    22  26      ; "This version of "
0204    MOV     23   5
0205    KSTR    24  27      ; " is designed for use with"
0206    CAT     22  22  24
0207    CALL    21   1   2
0208    UGET    21   1      ; util
0209    TGETS   21  21  25  ; "printerr"
0210    GGET    22  18      ; "tostring"
0211    MOV     23  16
0212    CALL    22   2   2
0213    KSTR    23  28      ; ", but is configured to avoid upgrading i"~
0214    CAT     22  22  23
0215    CALL    21   1   2
0216    UGET    21   1      ; util
0217    TGETS   21  21  25  ; "printerr"
0218    KSTR    22  29      ; "automatically. Please upgrade "
0219    TGETS   23  16   5  ; "name"
0220    KSTR    24  30      ; " with"
0221    CAT     22  22  24
0222    CALL    21   1   2
0223    UGET    21   1      ; util
0224    TGETS   21  21  25  ; "printerr"
0225    KSTR    22  31      ; "   luarocks install "
0226    TGETS   23  16   5  ; "name"
0227    CAT     22  22  23
0228    CALL    21   1   2
0229    UGET    21   1      ; util
0230    TGETS   21  21  25  ; "printerr"
0231    KSTR    22  32      ; "or look for a suitable version of "
0232    MOV     23   5
0233    KSTR    24  30      ; " with"
0234    CAT     22  22  24
0235    CALL    21   1   2
0236    UGET    21   1      ; util
0237    TGETS   21  21  25  ; "printerr"
0238    KSTR    22  33      ; "   luarocks search "
0239    MOV     23   5
0240    CAT     22  22  23
0241    CALL    21   1   2
0242 => KPRI    21   0
0243    MOV     22  18
0244    RET     21   3
0245 => ITERC   15   3   3
0246    ITERL   15 => 0166
0247    KPRI    12   2
0248    RET1    12   2

-- BYTECODE -- deps.lua:363-366
0001    KSTR     2   0      ; "^"
0002    MOV      4   1
0003    TGETS    3   1   1  ; "gsub"
0004    KSTR     5   2      ; "%."
0005    KSTR     6   3      ; "%%."
0006    CALL     3   2   4
0007    MOV      4   3
0008    TGETS    3   3   1  ; "gsub"
0009    KSTR     5   4      ; "%*"
0010    KSTR     6   5      ; ".*"
0011    CALL     3   2   4
0012    MOV      4   3
0013    TGETS    3   3   1  ; "gsub"
0014    KSTR     5   6      ; "?"
0015    KSTR     6   7      ; "(.*)"
0016    CALL     3   2   4
0017    KSTR     4   8      ; "$"
0018    CAT      2   2   4
0019    MOV      4   0
0020    TGETS    3   0   9  ; "match"
0021    MOV      5   2
0022    CALL     3   2   3
0023    RET1     3   2

-- BYTECODE -- deps.lua:375-379
0001    GGET     3   0      ; "ipairs"
0002    MOV      4   1
0003    CALL     3   4   2
0004    JMP      6 => 0014
0005 => GGET     8   1      ; "table"
0006    TGETS    8   8   2  ; "insert"
0007    MOV      9   2
0008    MOV     11   7
0009    TGETS   10   7   3  ; "gsub"
0010    KSTR    12   4      ; "?"
0011    MOV     13   0
0012    CALL    10   2   4
0013    CALL     8   1   3
0014 => ITERC    6   3   3
0015    ITERL    6 => 0005
0016    RET0     0   1

-- BYTECODE -- deps.lua:381-397
0001    UGET     1   0      ; cfg
0002    TGETS    1   1   0  ; "external_deps_patterns"
0003    UGET     2   0      ; cfg
0004    TGETS    2   2   1  ; "external_deps_subdirs"
0005    ISNES    0   2      ; "install"
0006    JMP      3 => 0011
0007    UGET     3   0      ; cfg
0008    TGETS    1   3   3  ; "runtime_external_deps_patterns"
0009    UGET     3   0      ; cfg
0010    TGETS    2   3   4  ; "runtime_external_deps_subdirs"
0011 => TDUP     3   9
0012    TDUP     4   6
0013    TGETS    5   2   5  ; "bin"
0014    TSETS    5   4   7  ; "subdir"
0015    TGETS    5   1   5  ; "bin"
0016    TSETS    5   4   8  ; "pattern"
0017    TSETS    4   3  10  ; "BINDIR"
0018    TDUP     4  12
0019    TGETS    5   2  11  ; "include"
0020    TSETS    5   4   7  ; "subdir"
0021    TGETS    5   1  11  ; "include"
0022    TSETS    5   4   8  ; "pattern"
0023    TSETS    4   3  13  ; "INCDIR"
0024    TDUP     4  15
0025    TGETS    5   2  14  ; "lib"
0026    TSETS    5   4   7  ; "subdir"
0027    TGETS    5   1  14  ; "lib"
0028    TSETS    5   4   8  ; "pattern"
0029    TSETS    4   3  16  ; "LIBDIR"
0030    ISNES    0   2      ; "install"
0031    JMP      4 => 0034
0032    KPRI     4   0
0033    TSETS    4   3  13  ; "INCDIR"
0034 => RET1     3   2

-- BYTECODE -- deps.lua:399-416
0001    GGET     2   0      ; "type"
0002    MOV      3   0
0003    CALL     2   2   2
0004    ISNES    2   1      ; "string"
0005    JMP      2 => 0008
0006    RET1     0   2
0007    JMP      2 => 0036
0008 => GGET     2   0      ; "type"
0009    MOV      3   0
0010    CALL     2   2   2
0011    ISNES    2   2      ; "table"
0012    JMP      2 => 0036
0013    TGETS    2   0   3  ; "bin"
0014    ISF          2
0015    JMP      3 => 0019
0016    TGETS    2   1   4  ; "BINDIR"
0017    TGETS    3   0   3  ; "bin"
0018    TSETS    3   2   5  ; "subdir"
0019 => TGETS    2   0   6  ; "include"
0020    ISF          2
0021    JMP      3 => 0028
0022    TGETS    2   1   7  ; "INCDIR"
0023    ISF          2
0024    JMP      3 => 0028
0025    TGETS    2   1   7  ; "INCDIR"
0026    TGETS    3   0   6  ; "include"
0027    TSETS    3   2   5  ; "subdir"
0028 => TGETS    2   0   8  ; "lib"
0029    ISF          2
0030    JMP      3 => 0034
0031    TGETS    2   1   9  ; "LIBDIR"
0032    TGETS    3   0   8  ; "lib"
0033    TSETS    3   2   5  ; "subdir"
0034 => TGETS    2   0  10  ; "prefix"
0035    RET1     2   2
0036 => RET0     0   1

-- BYTECODE -- deps.lua:418-431
0001    MOV      4   1
0002    TGETS    3   1   0  ; "match"
0003    KSTR     5   1      ; "%.[a-z]+$"
0004    CALL     3   2   3
0005    IST          3
0006    JMP      4 => 0019
0007    MOV      4   1
0008    TGETS    3   1   0  ; "match"
0009    KSTR     5   2      ; "%.[a-z]+%."
0010    CALL     3   2   3
0011    IST          3
0012    JMP      3 => 0019
0013    UGET     3   0      ; add_all_patterns
0014    MOV      4   1
0015    MOV      5   2
0016    MOV      6   0
0017    CALL     3   1   4
0018    JMP      3 => 0041
0019 => GGET     3   3      ; "ipairs"
0020    MOV      4   2
0021    CALL     3   4   2
0022    JMP      6 => 0034
0023 => UGET     8   1      ; deconstruct_pattern
0024    MOV      9   1
0025    MOV     10   7
0026    CALL     8   2   3
0027    ISF          8
0028    JMP      9 => 0034
0029    UGET     9   0      ; add_all_patterns
0030    MOV     10   8
0031    MOV     11   2
0032    MOV     12   0
0033    CALL     9   1   4
0034 => ITERC    6   3   3
0035    ITERL    6 => 0023
0036    GGET     3   4      ; "table"
0037    TGETS    3   3   5  ; "insert"
0038    MOV      4   0
0039    MOV      5   1
0040    CALL     3   1   3
0041 => RET0     0   1

-- BYTECODE -- deps.lua:463-471
0001    MOV      3   0
0002    TGETS    2   0   0  ; "match"
0003    KSTR     4   1      ; "%*"
0004    CALL     2   2   3
0005    IST          2
0006    JMP      2 => 0016
0007    MOV      3   1
0008    TGETS    2   1   0  ; "match"
0009    KSTR     4   1      ; "%*"
0010    CALL     2   2   3
0011    ISF          2
0012    JMP      3 => 0016
0013    KPRI     2   2
0014    RET1     2   2
0015    JMP      2 => 0037
0016 => MOV      3   0
0017    TGETS    2   0   0  ; "match"
0018    KSTR     4   1      ; "%*"
0019    CALL     2   2   3
0020    ISF          2
0021    JMP      3 => 0031
0022    MOV      3   1
0023    TGETS    2   1   0  ; "match"
0024    KSTR     4   1      ; "%*"
0025    CALL     2   2   3
0026    IST          2
0027    JMP      2 => 0031
0028    KPRI     2   1
0029    RET1     2   2
0030    JMP      2 => 0037
0031 => ISLT     0   1
0032    JMP      2 => 0035
0033    KPRI     2   1
0034    JMP      3 => 0036
0035 => KPRI     2   2
0036 => RET1     2   2
0037 => RET0     0   1

-- BYTECODE -- deps.lua:433-524
0001    GGET     7   0      ; "require"
0002    KSTR     8   1      ; "luarocks.fs"
0003    CALL     7   2   2
0004    IST          6
0005    JMP      8 => 0007
0006    TNEW     6   0
0007 => UGET     8   0      ; util
0008    TGETS    8   8   2  ; "sortedpairs"
0009    MOV      9   4
0010    CALL     8   4   2
0011    JMP     11 => 0212
0012 => KPRI    13   0
0013    MOV     14   1
0014    KSTR    15   3      ; "_"
0015    MOV     16  11
0016    CAT     14  14  16
0017    TGETV   14   3  14
0018    ISF         14
0019    JMP     15 => 0024
0020    TNEW    15   3
0021    TSETB   14  15   1
0022    MOV     13  15
0023    JMP     15 => 0051
0024 => GGET    15   4      ; "type"
0025    TGETS   16  12   5  ; "subdir"
0026    CALL    15   2   2
0027    ISNES   15   6      ; "table"
0028    JMP     15 => 0043
0029    TNEW    13   0
0030    GGET    15   7      ; "ipairs"
0031    TGETS   16  12   5  ; "subdir"
0032    CALL    15   4   2
0033    JMP     18 => 0040
0034 => UGET    20   1      ; dir
0035    TGETS   20  20   8  ; "path"
0036    MOV     21   0
0037    MOV     22  19
0038    CALL    20   2   3
0039    TSETV   20  13  18
0040 => ITERC   18   3   3
0041    ITERL   18 => 0034
0042    JMP     15 => 0051
0043 => TNEW    15   3
0044    UGET    16   1      ; dir
0045    TGETS   16  16   8  ; "path"
0046    MOV     17   0
0047    TGETS   18  12   5  ; "subdir"
0048    CALL    16   0   3
0049    TSETM   16   0      ; 1
0050    MOV     13  15
0051 => TGETB   15  13   1
0052    TSETS   15  12   9  ; "dir"
0053    TGETS   15  12  10  ; "testfile"
0054    TGETV   15   2  15
0055    ISF         15
0056    JMP     16 => 0212
0057    TNEW    16   0
0058    GGET    17   4      ; "type"
0059    MOV     18  15
0060    CALL    17   2   2
0061    ISNES   17  11      ; "string"
0062    JMP     17 => 0069
0063    UGET    17   2      ; add_patterns_for_file
0064    MOV     18  16
0065    MOV     19  15
0066    TGETS   20  12  12  ; "pattern"
0067    CALL    17   1   4
0068    JMP     17 => 0085
0069 => GGET    17   4      ; "type"
0070    MOV     18  15
0071    CALL    17   2   2
0072    ISNES   17   6      ; "table"
0073    JMP     17 => 0085
0074    GGET    17   7      ; "ipairs"
0075    MOV     18  15
0076    CALL    17   4   2
0077    JMP     20 => 0083
0078 => UGET    22   2      ; add_patterns_for_file
0079    MOV     23  16
0080    MOV     24  21
0081    TGETS   25  12  12  ; "pattern"
0082    CALL    22   1   4
0083 => ITERC   20   3   3
0084    ITERL   20 => 0078
0085 => KPRI    17   1
0086    GGET    18   6      ; "table"
0087    TGETS   18  18  13  ; "sort"
0088    MOV     19  16
0089    FNEW    20  14      ; deps.lua:463
0090    CALL    18   1   3
0091    GGET    18   7      ; "ipairs"
0092    MOV     19  16
0093    CALL    18   4   2
0094    JMP     21 => 0203
0095 => MOV     24  22
0096    TGETS   23  22  15  ; "match"
0097    KSTR    25  16      ; "%.so$"
0098    CALL    23   2   3
0099    IST         23
0100    JMP     24 => 0113
0101    MOV     24  22
0102    TGETS   23  22  15  ; "match"
0103    KSTR    25  17      ; "%.dylib$"
0104    CALL    23   2   3
0105    IST         23
0106    JMP     24 => 0113
0107    MOV     24  22
0108    TGETS   23  22  15  ; "match"
0109    KSTR    25  18      ; "%.dll$"
0110    CALL    23   2   3
0111    ISF         23
0112    JMP     24 => 0122
0113 => MOV     24  22
0114    TGETS   23  22  19  ; "gsub"
0115    KSTR    25  20      ; "%.[^.]+$"
0116    KSTR    26  21      ; "."
0117    UGET    27   3      ; cfg
0118    TGETS   27  27  22  ; "external_lib_extension"
0119    CAT     26  26  27
0120    CALL    23   2   4
0121    MOV     22  23
0122 => KPRI    23   0
0123    MOV     25  22
0124    TGETS   24  22  15  ; "match"
0125    KSTR    26  23      ; "%*"
0126    CALL    24   2   3
0127    ISF         24
0128    JMP     25 => 0145
0129    KSTR    24  24      ; "^"
0130    MOV     26  22
0131    TGETS   25  22  19  ; "gsub"
0132    KSTR    27  25      ; "([-.+])"
0133    KSTR    28  26      ; "%%%1"
0134    CALL    25   2   4
0135    MOV     26  25
0136    TGETS   25  25  19  ; "gsub"
0137    KSTR    27  23      ; "%*"
0138    KSTR    28  27      ; ".*"
0139    CALL    25   2   4
0140    KSTR    26  28      ; "$"
0141    CAT     23  24  26
0142    KSTR    24  29      ; "matching "
0143    MOV     25  22
0144    CAT     22  24  25
0145 => GGET    24   7      ; "ipairs"
0146    MOV     25  13
0147    CALL    24   4   2
0148    JMP     27 => 0198
0149 => ISF         23
0150    JMP     29 => 0175
0151    TGETV   29   6  28
0152    IST         29
0153    JMP     29 => 0158
0154    TGETS   29   7  30  ; "list_dir"
0155    MOV     30  28
0156    CALL    29   2   2
0157    TSETV   29   6  28
0158 => GGET    29  11      ; "string"
0159    TGETS   29  29  15  ; "match"
0160    GGET    30   7      ; "ipairs"
0161    TGETV   31   6  28
0162    CALL    30   4   2
0163    JMP     33 => 0172
0164 => MOV     35  29
0165    MOV     36  34
0166    MOV     37  23
0167    CALL    35   2   3
0168    ISF         35
0169    JMP     36 => 0172
0170    KPRI    17   2
0171    JMP     30 => 0183
0172 => ITERC   33   3   3
0173    ITERL   33 => 0164
0174    JMP     29 => 0183
0175 => TGETS   29   7  31  ; "is_file"
0176    UGET    30   1      ; dir
0177    TGETS   30  30   8  ; "path"
0178    MOV     31  28
0179    MOV     32  22
0180    CALL    30   0   3
0181    CALLM   29   2   0
0182    MOV     17  29
0183 => ISF         17
0184    JMP     29 => 0189
0185    TSETS   28  12   9  ; "dir"
0186    TSETS   22  12  32  ; "file"
0187    JMP     24 => 0200
0188    JMP     29 => 0198
0189 => GGET    29   6      ; "table"
0190    TGETS   29  29  33  ; "insert"
0191    TGETS   30  12  10  ; "testfile"
0192    TGETV   30   5  30
0193    MOV     31  22
0194    KSTR    32  34      ; " in "
0195    MOV     33  28
0196    CAT     31  31  33
0197    CALL    29   1   3
0198 => ITERC   27   3   3
0199    ITERL   27 => 0149
0200 => ISF         17
0201    JMP     24 => 0203
0202    JMP     18 => 0205
0203 => ITERC   21   3   3
0204    ITERL   21 => 0095
0205 => IST         17
0206    JMP     18 => 0212
0207    KPRI    18   0
0208    MOV     19  11
0209    TGETS   20  12  10  ; "testfile"
0210    UCLO     0 => 0211
0211 => RET     18   4
0212 => ITERC   11   3   3
0213    ITERL   11 => 0012
0214    GGET     8  35      ; "pairs"
0215    MOV      9   4
0216    CALL     8   4   2
0217    ISNEXT  11 => 0231
0218 => MOV     13   1
0219    KSTR    14   3      ; "_"
0220    MOV     15  11
0221    CAT     13  13  15
0222    TGETS   14  12   9  ; "dir"
0223    TSETV   14   3  13
0224    MOV     13   1
0225    KSTR    14   3      ; "_"
0226    MOV     15  11
0227    KSTR    16  36      ; "_FILE"
0228    CAT     13  13  16
0229    TGETS   14  12  32  ; "file"
0230    TSETV   14   3  13
0231 => ITERN   11   3   3
0232    ITERL   11 => 0218
0233    MOV      8   1
0234    KSTR     9  37      ; "_DIR"
0235    CAT      8   8   9
0236    TSETV    0   3   8
0237    KPRI     8   2
0238    UCLO     0 => 0239
0239 => RET1     8   2

-- BYTECODE -- deps.lua:544-546
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "%.a$"
0004    CALL     1   2   3
0005    NOT      1   1
0006    RET1     1   2

-- BYTECODE -- deps.lua:548-550
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "%.dll$"
0004    CALL     1   2   3
0005    NOT      1   1
0006    RET1     1   2

-- BYTECODE -- deps.lua:526-559
0001    KNIL     5   7
0002    TDUP     8   0
0003    TNEW     9   0
0004    TSETS    9   8   1  ; "program"
0005    TNEW     9   0
0006    TSETS    9   8   2  ; "header"
0007    TNEW     9   0
0008    TSETS    9   8   3  ; "library"
0009    UGET     9   0      ; get_external_deps_dirs
0010    MOV     10   3
0011    CALL     9   2   2
0012    KPRI    10   0
0013    MOV     11   0
0014    KSTR    12   4      ; "_DIR"
0015    CAT     11  11  12
0016    TGETV   11   2  11
0017    ISF         11
0018    JMP     12 => 0027
0019    TNEW    11   3
0020    MOV     12   0
0021    KSTR    13   4      ; "_DIR"
0022    CAT     12  12  13
0023    TGETV   12   2  12
0024    TSETB   12  11   1
0025    MOV     10  11
0026    JMP     11 => 0029
0027 => UGET    11   1      ; cfg
0028    TGETS   10  11   5  ; "external_deps_dirs"
0029 => GGET    11   6      ; "ipairs"
0030    MOV     12  10
0031    CALL    11   4   2
0032    JMP     14 => 0094
0033 => UGET    16   2      ; resolve_prefix
0034    MOV     17  15
0035    MOV     18   9
0036    CALL    16   2   3
0037    MOV     15  16
0038    UGET    16   1      ; cfg
0039    TGETS   16  16   7  ; "is_platform"
0040    KSTR    17   8      ; "mingw32"
0041    CALL    16   2   2
0042    ISF         16
0043    JMP     17 => 0058
0044    ISNES    0   9      ; "LUA"
0045    JMP     16 => 0058
0046    TGETS   16   9  10  ; "LIBDIR"
0047    UGET    17   3      ; fun
0048    TGETS   17  17  12  ; "filter"
0049    UGET    18   4      ; util
0050    TGETS   18  18  13  ; "deep_copy"
0051    TGETS   19   9  10  ; "LIBDIR"
0052    TGETS   19  19  11  ; "pattern"
0053    CALL    18   2   2
0054    FNEW    19  14      ; deps.lua:544
0055    CALL    17   2   3
0056    TSETS   17  16  11  ; "pattern"
0057    JMP     16 => 0077
0058 => UGET    16   1      ; cfg
0059    TGETS   16  16   7  ; "is_platform"
0060    KSTR    17  15      ; "windows"
0061    CALL    16   2   2
0062    ISF         16
0063    JMP     17 => 0077
0064    ISNES    0   9      ; "LUA"
0065    JMP     16 => 0077
0066    TGETS   16   9  10  ; "LIBDIR"
0067    UGET    17   3      ; fun
0068    TGETS   17  17  12  ; "filter"
0069    UGET    18   4      ; util
0070    TGETS   18  18  13  ; "deep_copy"
0071    TGETS   19   9  10  ; "LIBDIR"
0072    TGETS   19  19  11  ; "pattern"
0073    CALL    18   2   2
0074    FNEW    19  16      ; deps.lua:548
0075    CALL    17   2   3
0076    TSETS   17  16  11  ; "pattern"
0077 => UGET    16   5      ; check_external_dependency_at
0078    MOV     17  15
0079    MOV     18   0
0080    MOV     19   1
0081    MOV     20   2
0082    MOV     21   9
0083    MOV     22   8
0084    MOV     23   4
0085    CALL    16   4   8
0086    MOV      7  18
0087    MOV      6  17
0088    MOV      5  16
0089    ISF          5
0090    JMP     16 => 0094
0091    KPRI    16   2
0092    UCLO     0 => 0093
0093 => RET1    16   2
0094 => ITERC   14   3   3
0095    ITERL   14 => 0033
0096    KPRI    11   0
0097    MOV     12   6
0098    MOV     13   7
0099    MOV     14   8
0100    UCLO     0 => 0101
0101 => RET     11   5

-- BYTECODE -- deps.lua:574-604
0001    GGET     2   0      ; "assert"
0002    MOV      4   0
0003    TGETS    3   0   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "rockspec"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    TGETS    2   0   3  ; "external_dependencies"
0012    IST          2
0013    JMP      2 => 0019
0014    UGET     2   0      ; builtin
0015    TGETS    2   2   4  ; "autodetect_external_dependencies"
0016    TGETS    3   0   5  ; "build"
0017    CALL     2   2   2
0018    TSETS    2   0   3  ; "external_dependencies"
0019 => TGETS    2   0   3  ; "external_dependencies"
0020    IST          2
0021    JMP      2 => 0024
0022    KPRI     2   2
0023    RET1     2   2
0024 => UGET     2   1      ; util
0025    TGETS    2   2   6  ; "sortedpairs"
0026    TGETS    3   0   3  ; "external_dependencies"
0027    CALL     2   4   2
0028    JMP      5 => 0095
0029 => UGET     7   2      ; check_external_dependency
0030    MOV      8   5
0031    MOV      9   6
0032    TGETS   10   0   7  ; "variables"
0033    MOV     11   1
0034    CALL     7   5   5
0035    IST          7
0036    JMP     11 => 0095
0037    TNEW    11   3
0038    KSTR    12   8      ; "Could not find "
0039    MOV     13   9
0040    KSTR    14   9      ; " file for "
0041    MOV     15   5
0042    CAT     12  12  15
0043    TSETB   12  11   1
0044    TNEW    12   0
0045    GGET    13  10      ; "ipairs"
0046    TGETV   14  10   9
0047    CALL    13   4   2
0048    JMP     16 => 0061
0049 => TGETV   18  12  17
0050    IST         18
0051    JMP     18 => 0061
0052    KPRI    18   2
0053    TSETV   18  12  17
0054    GGET    18  11      ; "table"
0055    TGETS   18  18  12  ; "insert"
0056    MOV     19  11
0057    KSTR    20  13      ; "  No file "
0058    MOV     21  17
0059    CAT     20  20  21
0060    CALL    18   1   3
0061 => ITERC   16   3   3
0062    ITERL   16 => 0049
0063    GGET    13  11      ; "table"
0064    TGETS   13  13  12  ; "insert"
0065    MOV     14  11
0066    KSTR    15  14      ; "You may have to install "
0067    MOV     16   5
0068    KSTR    17  15      ; " in your system and/or pass "
0069    MOV     18   5
0070    KSTR    19  16      ; "_DIR or "
0071    MOV     20   5
0072    KSTR    21  17      ; "_"
0073    MOV     22   8
0074    KSTR    23  18      ; " to the luarocks command."
0075    CAT     15  15  23
0076    CALL    13   1   3
0077    GGET    13  11      ; "table"
0078    TGETS   13  13  12  ; "insert"
0079    MOV     14  11
0080    KSTR    15  19      ; "Example: luarocks install "
0081    TGETS   16   0  20  ; "name"
0082    KSTR    17  21      ; " "
0083    MOV     18   5
0084    KSTR    19  22      ; "_DIR=/usr/local"
0085    CAT     15  15  19
0086    CALL    13   1   3
0087    KPRI    13   0
0088    GGET    14  11      ; "table"
0089    TGETS   14  14  23  ; "concat"
0090    MOV     15  11
0091    KSTR    16  24      ; "\n"
0092    CALL    14   2   3
0093    KSTR    15  25      ; "dependency"
0094    RET     13   4
0095 => ITERC    5   3   3
0096    ITERL    5 => 0029
0097    KPRI     2   2
0098    RET1     2   2

-- BYTECODE -- deps.lua:613-650
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "table"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   2      ; "table"
0016    JMP      6 => 0019
0017    KPRI     6   1
0018    JMP      7 => 0020
0019 => KPRI     6   2
0020 => CALL     5   1   2
0021    GGET     5   0      ; "assert"
0022    GGET     6   1      ; "type"
0023    MOV      7   2
0024    CALL     6   2   2
0025    ISNES    6   3      ; "string"
0026    JMP      6 => 0033
0027    MOV      7   2
0028    TGETS    6   2   4  ; "match"
0029    KSTR     8   5      ; "/"
0030    CALL     6   2   3
0031    NOT      6   6
0032    JMP      7 => 0036
0033 => KPRI     6   1
0034    JMP      7 => 0036
0035    KPRI     6   2
0036 => CALL     5   1   2
0037    GGET     5   0      ; "assert"
0038    GGET     6   1      ; "type"
0039    MOV      7   3
0040    CALL     6   2   2
0041    ISEQS    6   3      ; "string"
0042    JMP      6 => 0045
0043    KPRI     6   1
0044    JMP      7 => 0046
0045 => KPRI     6   2
0046 => CALL     5   1   2
0047    GGET     5   6      ; "require"
0048    KSTR     6   7      ; "luarocks.fetch"
0049    CALL     5   2   2
0050    TGETV    6   0   2
0051    ISF          6
0052    JMP      7 => 0054
0053    RET0     0   1
0054 => TGETS    6   1   8  ; "dependencies"
0055    IST          6
0056    JMP      6 => 0059
0057    TNEW     6   0
0058    TSETS    6   1   8  ; "dependencies"
0059 => TGETS    6   1   8  ; "dependencies"
0060    TGETV    7   6   2
0061    IST          7
0062    JMP      7 => 0065
0063    TNEW     7   0
0064    TSETV    7   6   2
0065 => TGETV    7   6   2
0066    TGETV    8   7   3
0067    KPRI     9   0
0068    IST          8
0069    JMP     10 => 0095
0070    TGETS   10   5   9  ; "load_local_rockspec"
0071    UGET    11   0      ; path
0072    TGETS   11  11  10  ; "rockspec_file"
0073    MOV     12   2
0074    MOV     13   3
0075    CALL    11   2   3
0076    KPRI    12   1
0077    CALL    10   3   3
0078    IST         10
0079    JMP     12 => 0091
0080    UGET    12   1      ; util
0081    TGETS   12  12  11  ; "printerr"
0082    KSTR    13  12      ; "Couldn't load rockspec for "
0083    MOV     14   2
0084    KSTR    15  13      ; " "
0085    MOV     16   3
0086    KSTR    17  14      ; ": "
0087    MOV     18  11
0088    CAT     13  13  18
0089    CALL    12   1   2
0090    RET0     0   1
0091 => TGETS    8  10   8  ; "dependencies"
0092    TGETS    9  10  15  ; "rocks_provided"
0093    TSETV    8   7   3
0094    JMP     10 => 0099
0095 => UGET    10   1      ; util
0096    TGETS   10  10  16  ; "get_rocks_provided"
0097    CALL    10   2   1
0098    MOV      9  10
0099 => UGET    10   2      ; prepare_get_versions
0100    MOV     11   4
0101    MOV     12   9
0102    KSTR    13   8      ; "dependencies"
0103    CALL    10   2   4
0104    UGET    11   3      ; match_all_deps
0105    MOV     12   8
0106    MOV     13  10
0107    CALL    11   2   3
0108    TSETV    3   0   2
0109    GGET    12  17      ; "pairs"
0110    MOV     13  11
0111    CALL    12   4   2
0112    ISNEXT  15 => 0121
0113 => UGET    17   4      ; deps
0114    TGETS   17  17  18  ; "scan_deps"
0115    MOV     18   0
0116    MOV     19   1
0117    TGETS   20  16  19  ; "name"
0118    TGETS   21  16  20  ; "version"
0119    MOV     22   4
0120    CALL    17   1   6
0121 => ITERN   15   3   3
0122    ITERL   15 => 0113
0123    RET0     0   1

-- BYTECODE -- deps.lua:652-676
0001    ISF          2
0002    JMP      3 => 0009
0003    MOV      4   2
0004    TGETS    3   2   0  ; "gsub"
0005    KSTR     5   1      ; "%-.*"
0006    KSTR     6   2      ; ""
0007    CALL     3   2   4
0008    MOV      2   3
0009 => MOV      4   1
0010    TGETS    3   1   0  ; "gsub"
0011    KSTR     5   3      ; "%."
0012    KSTR     6   2      ; ""
0013    CALL     3   2   4
0014    TNEW     4   8
0015    MOV      5   0
0016    KSTR     6   4      ; "/include/lua/"
0017    MOV      7   1
0018    CAT      5   5   7
0019    TSETB    5   4   1
0020    MOV      5   0
0021    KSTR     6   5      ; "/include/lua"
0022    MOV      7   1
0023    CAT      5   5   7
0024    TSETB    5   4   2
0025    MOV      5   0
0026    KSTR     6   6      ; "/include/lua-"
0027    MOV      7   1
0028    CAT      5   5   7
0029    TSETB    5   4   3
0030    MOV      5   0
0031    KSTR     6   5      ; "/include/lua"
0032    MOV      7   3
0033    CAT      5   5   7
0034    TSETB    5   4   4
0035    MOV      5   0
0036    KSTR     6   7      ; "/include"
0037    CAT      5   5   6
0038    TSETB    5   4   5
0039    TSETB    0   4   6
0040    ISFC     5   2
0041    JMP      5 => 0049
0042    MOV      5   0
0043    KSTR     6   8      ; "/include/luajit-"
0044    MOV      8   2
0045    TGETS    7   2   9  ; "match"
0046    KSTR     9  10      ; "^(%d+%.%d+)"
0047    CALL     7   2   3
0048    CAT      5   5   7
0049 => TSETB    5   4   7
0050    GGET     5  11      ; "ipairs"
0051    MOV      6   4
0052    CALL     5   4   2
0053    JMP      8 => 0069
0054 => UGET    10   0      ; dir
0055    TGETS   10  10  12  ; "path"
0056    MOV     11   9
0057    KSTR    12  13      ; "lua.h"
0058    CALL    10   2   3
0059    GGET    11  14      ; "io"
0060    TGETS   11  11  15  ; "open"
0061    MOV     12  10
0062    CALL    11   2   2
0063    ISF         11
0064    JMP     12 => 0069
0065    MOV     13  11
0066    TGETS   12  11  16  ; "close"
0067    CALL    12   1   2
0068    RET1     9   2
0069 => ITERC    8   3   3
0070    ITERL    8 => 0054
0071    KPRI     5   0
0072    RET1     5   2

-- BYTECODE -- deps.lua:678-689
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "get_luajit_version"
0003    CALL     1   2   1
0004    TGETS    2   0   1  ; "LUA_INCDIR"
0005    IST          2
0006    JMP      2 => 0024
0007    TGETS    2   0   2  ; "LUA_DIR"
0008    ISF          2
0009    JMP      3 => 0024
0010    UGET     2   1      ; find_lua_incdir
0011    TGETS    3   0   2  ; "LUA_DIR"
0012    UGET     4   2      ; cfg
0013    TGETS    4   4   3  ; "lua_version"
0014    MOV      5   1
0015    CALL     2   2   4
0016    TSETS    2   0   1  ; "LUA_INCDIR"
0017    TGETS    2   0   1  ; "LUA_INCDIR"
0018    ISNEP    2   0
0019    JMP      2 => 0024
0020    KPRI     2   0
0021    KSTR     3   4      ; "Failed finding Lua header files. You may"~
0022    KSTR     4   5      ; "dependency"
0023    RET      2   4
0024 => KPRI     2   2
0025    RET1     2   2

-- BYTECODE -- deps.lua:691-712
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "get_luajit_version"
0003    CALL     1   2   1
0004    UGET     2   1      ; cfg
0005    TGETS    2   2   1  ; "lua_version"
0006    MOV      3   2
0007    TGETS    2   2   2  ; "gsub"
0008    KSTR     4   3      ; "%."
0009    KSTR     5   4      ; ""
0010    CALL     2   2   4
0011    TDUP     3   7
0012    KSTR     4   5      ; "lua"
0013    UGET     5   1      ; cfg
0014    TGETS    5   5   1  ; "lua_version"
0015    CAT      4   4   5
0016    TSETB    4   3   1
0017    KSTR     4   5      ; "lua"
0018    MOV      5   2
0019    CAT      4   4   5
0020    TSETB    4   3   2
0021    KSTR     4   6      ; "lua-"
0022    UGET     5   1      ; cfg
0023    TGETS    5   5   1  ; "lua_version"
0024    CAT      4   4   5
0025    TSETB    4   3   3
0026    KSTR     4   6      ; "lua-"
0027    MOV      5   2
0028    CAT      4   4   5
0029    TSETB    4   3   4
0030    ISF          1
0031    JMP      4 => 0041
0032    GGET     4   8      ; "table"
0033    TGETS    4   4   9  ; "insert"
0034    MOV      5   3
0035    KSHORT   6   1
0036    KSTR     7  10      ; "luajit-"
0037    UGET     8   1      ; cfg
0038    TGETS    8   8   1  ; "lua_version"
0039    CAT      7   7   8
0040    CALL     4   1   4
0041 => TNEW     4   0
0042    UGET     5   2      ; check_external_dependency
0043    KSTR     6  11      ; "LUA"
0044    TDUP     7  12
0045    TSETS    3   7  13  ; "library"
0046    MOV      8   0
0047    KSTR     9  14      ; "build"
0048    MOV     10   4
0049    CALL     5   2   6
0050    ISF          5
0051    JMP      6 => 0056
0052    TGETS    6   0  16  ; "LUA_LIBDIR_FILE"
0053    TSETS    6   0  15  ; "LUALIB"
0054    KPRI     6   2
0055    RET1     6   2
0056 => KPRI     6   0
0057    KSTR     7  17      ; "Failed finding Lua library. You may need"~
0058    KSTR     8  18      ; "dependency"
0059    RET      6   4

-- BYTECODE -- deps.lua:714-716
0001    TGETS    1   0   0  ; "deps_mode"
0002    IST          1
0003    JMP      2 => 0006
0004    UGET     1   0      ; cfg
0005    TGETS    1   1   0  ; "deps_mode"
0006 => RET1     1   2

-- BYTECODE -- deps.lua:0-719
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.manif"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.path"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.dir"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fun"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.util"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.core.vers"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.queries"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.build.builtin"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.deplocks"
0031    CALL    10   2   2
0032    FNEW    11  11      ; deps.lua:32
0033    FNEW    12  12      ; deps.lua:81
0034    FNEW    13  13      ; deps.lua:111
0035    FNEW    14  15      ; deps.lua:148
0036    TSETS   14   0  14  ; "match_deps"
0037    FNEW    14  16      ; deps.lua:158
0038    FNEW    15  18      ; deps.lua:176
0039    TSETS   15   0  17  ; "report_missing_dependencies"
0040    FNEW    15  20      ; deps.lua:205
0041    TSETS   15   0  19  ; "fulfill_dependency"
0042    FNEW    15  21      ; deps.lua:249
0043    FNEW    16  23      ; deps.lua:288
0044    TSETS   16   0  22  ; "fulfill_dependencies"
0045    FNEW    16  24      ; deps.lua:363
0046    FNEW    17  25      ; deps.lua:375
0047    FNEW    18  26      ; deps.lua:381
0048    FNEW    19  27      ; deps.lua:399
0049    FNEW    20  28      ; deps.lua:418
0050    FNEW    21  29      ; deps.lua:433
0051    FNEW    22  30      ; deps.lua:526
0052    FNEW    23  32      ; deps.lua:574
0053    TSETS   23   0  31  ; "check_external_deps"
0054    FNEW    23  34      ; deps.lua:613
0055    TSETS   23   0  33  ; "scan_deps"
0056    FNEW    23  35      ; deps.lua:652
0057    FNEW    24  37      ; deps.lua:678
0058    TSETS   24   0  36  ; "check_lua_incdir"
0059    FNEW    24  39      ; deps.lua:691
0060    TSETS   24   0  38  ; "check_lua_libdir"
0061    FNEW    24  41      ; deps.lua:714
0062    TSETS   24   0  40  ; "get_deps_mode"
0063    UCLO     0 => 0064
0064 => RET1     0   2

-----------------------
-- BYTECODE -- busted.lua:12-17
0001    UGET     0   0      ; fs
0002    TGETS    0   0   0  ; "exists"
0003    KSTR     1   1      ; ".busted"
0004    CALL     0   2   2
0005    ISF          0
0006    JMP      1 => 0009
0007    KPRI     0   2
0008    RET1     0   2
0009 => KPRI     0   1
0010    RET1     0   2

-- BYTECODE -- busted.lua:19-57
0001    IST          0
0002    JMP      2 => 0004
0003    TNEW     0   0
0004 => UGET     2   0      ; deps
0005    TGETS    2   2   0  ; "fulfill_dependency"
0006    UGET     3   1      ; queries
0007    TGETS    3   3   1  ; "new"
0008    KSTR     4   2      ; "busted"
0009    CALL     3   2   2
0010    KNIL     4   6
0011    KSTR     7   3      ; "test_dependencies"
0012    CALL     2   4   6
0013    IST          2
0014    JMP      5 => 0018
0015    KPRI     5   0
0016    MOV      6   3
0017    RET      5   3
0018 => KPRI     5   0
0019    TGETS    6   0   4  ; "busted_executable"
0020    ISF          6
0021    JMP      7 => 0024
0022    TGETS    5   0   4  ; "busted_executable"
0023    JMP      6 => 0058
0024 => UGET     6   2      ; dir
0025    TGETS    6   6   5  ; "path"
0026    UGET     7   3      ; path
0027    TGETS    7   7   6  ; "root_dir"
0028    MOV      8   4
0029    CALL     7   2   2
0030    KSTR     8   7      ; "bin"
0031    KSTR     9   2      ; "busted"
0032    CALL     6   2   4
0033    MOV      5   6
0034    UGET     6   2      ; dir
0035    TGETS    6   6   5  ; "path"
0036    UGET     7   3      ; path
0037    TGETS    7   7   6  ; "root_dir"
0038    MOV      8   4
0039    CALL     7   2   2
0040    KSTR     8   7      ; "bin"
0041    KSTR     9   8      ; "busted.bat"
0042    CALL     6   2   4
0043    UGET     7   4      ; fs
0044    TGETS    7   7   9  ; "exists"
0045    MOV      8   5
0046    CALL     7   2   2
0047    IST          7
0048    JMP      7 => 0058
0049    UGET     7   4      ; fs
0050    TGETS    7   7   9  ; "exists"
0051    MOV      8   6
0052    CALL     7   2   2
0053    IST          7
0054    JMP      7 => 0058
0055    KPRI     7   0
0056    KSTR     8  10      ; "'busted' executable failed to be install"~
0057    RET      7   3
0058 => GGET     6  11      ; "type"
0059    TGETS    7   0  12  ; "flags"
0060    CALL     6   2   2
0061    ISNES    6  13      ; "table"
0062    JMP      6 => 0076
0063    KSHORT   6   1
0064    TGETS    7   0  12  ; "flags"
0065    LEN      7   7
0066    KSHORT   8   1
0067    FORI     6 => 0076
0068 => GGET    10  13      ; "table"
0069    TGETS   10  10  14  ; "insert"
0070    MOV     11   1
0071    MOV     12   9
0072    TGETS   13   0  12  ; "flags"
0073    TGETV   13  13   9
0074    CALL    10   1   4
0075    FORL     6 => 0068
0076 => KPRI     6   0
0077    UGET     7   4      ; fs
0078    TGETS    7   7  15  ; "execute"
0079    MOV      8   5
0080    UGET     9   5      ; unpack
0081    MOV     10   1
0082    CALL     9   0   2
0083    CALLM    7   3   1
0084    MOV      6   8
0085    MOV      2   7
0086    ISF          2
0087    JMP      7 => 0091
0088    KPRI     7   2
0089    RET1     7   2
0090    JMP      7 => 0096
0091 => KPRI     7   0
0092    ISTC     8   6
0093    JMP      8 => 0095
0094    KSTR     8  16      ; "test suite failed."
0095 => RET      7   3
0096 => RET0     0   1

-- BYTECODE -- busted.lua:0-61
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.deps"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.path"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.dir"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.queries"
0016    CALL     5   2   2
0017    GGET     6   6      ; "table"
0018    TGETS    6   6   7  ; "unpack"
0019    IST          6
0020    JMP      7 => 0022
0021    GGET     6   7      ; "unpack"
0022 => FNEW     7   9      ; busted.lua:12
0023    TSETS    7   0   8  ; "detect_type"
0024    FNEW     7  11      ; busted.lua:19
0025    TSETS    7   0  10  ; "run_tests"
0026    UCLO     0 => 0027
0027 => RET1     0   2

-----------------------
-- BYTECODE -- command.lua:10-15
0001    UGET     0   0      ; fs
0002    TGETS    0   0   0  ; "exists"
0003    KSTR     1   1      ; "test.lua"
0004    CALL     0   2   2
0005    ISF          0
0006    JMP      1 => 0009
0007    KPRI     0   2
0008    RET1     0   2
0009 => KPRI     0   1
0010    RET1     0   2

-- BYTECODE -- command.lua:17-52
0001    IST          0
0002    JMP      2 => 0004
0003    TDUP     0   0
0004 => TGETS    2   0   1  ; "script"
0005    IST          2
0006    JMP      2 => 0012
0007    TGETS    2   0   2  ; "command"
0008    IST          2
0009    JMP      2 => 0012
0010    KSTR     2   3      ; "test.lua"
0011    TSETS    2   0   1  ; "script"
0012 => GGET     2   4      ; "type"
0013    TGETS    3   0   5  ; "flags"
0014    CALL     2   2   2
0015    ISNES    2   6      ; "table"
0016    JMP      2 => 0030
0017    KSHORT   2   1
0018    TGETS    3   0   5  ; "flags"
0019    LEN      3   3
0020    KSHORT   4   1
0021    FORI     2 => 0030
0022 => GGET     6   6      ; "table"
0023    TGETS    6   6   7  ; "insert"
0024    MOV      7   1
0025    MOV      8   5
0026    TGETS    9   0   5  ; "flags"
0027    TGETV    9   9   5
0028    CALL     6   1   4
0029    FORL     2 => 0022
0030 => KPRI     2   0
0031    TGETS    3   0   1  ; "script"
0032    ISF          3
0033    JMP      4 => 0067
0034    UGET     3   0      ; fs
0035    TGETS    3   3   8  ; "exists"
0036    TGETS    4   0   1  ; "script"
0037    CALL     3   2   2
0038    IST          3
0039    JMP      3 => 0046
0040    KPRI     3   0
0041    KSTR     4   9      ; "Test script "
0042    TGETS    5   0   1  ; "script"
0043    KSTR     6  10      ; " does not exist"
0044    CAT      4   4   6
0045    RET      3   3
0046 => UGET     3   0      ; fs
0047    TGETS    3   3  11  ; "Q"
0048    UGET     4   1      ; dir
0049    TGETS    4   4  12  ; "path"
0050    UGET     5   2      ; cfg
0051    TGETS    5   5  13  ; "variables"
0052    TGETS    5   5  14  ; "LUA_BINDIR"
0053    UGET     6   2      ; cfg
0054    TGETS    6   6  15  ; "lua_interpreter"
0055    CALL     4   0   3
0056    CALLM    3   2   0
0057    UGET     4   0      ; fs
0058    TGETS    4   4  16  ; "execute"
0059    MOV      5   3
0060    TGETS    6   0   1  ; "script"
0061    UGET     7   3      ; unpack
0062    MOV      8   1
0063    CALL     7   0   2
0064    CALLM    4   2   2
0065    MOV      2   4
0066    JMP      3 => 0078
0067 => TGETS    3   0   2  ; "command"
0068    ISF          3
0069    JMP      4 => 0078
0070    UGET     3   0      ; fs
0071    TGETS    3   3  16  ; "execute"
0072    TGETS    4   0   2  ; "command"
0073    UGET     5   3      ; unpack
0074    MOV      6   1
0075    CALL     5   0   2
0076    CALLM    3   2   1
0077    MOV      2   3
0078 => ISF          2
0079    JMP      3 => 0083
0080    KPRI     3   2
0081    RET1     3   2
0082    JMP      3 => 0086
0083 => KPRI     3   0
0084    KSTR     4  17      ; "tests failed with non-zero exit code"
0085    RET      3   3
0086 => RET0     0   1

-- BYTECODE -- command.lua:0-55
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    GGET     4   4      ; "table"
0012    TGETS    4   4   5  ; "unpack"
0013    IST          4
0014    JMP      5 => 0016
0015    GGET     4   5      ; "unpack"
0016 => FNEW     5   7      ; command.lua:10
0017    TSETS    5   0   6  ; "detect_type"
0018    FNEW     5   9      ; command.lua:17
0019    TSETS    5   0   8  ; "run_tests"
0020    UCLO     0 => 0021
0021 => RET1     0   2

-----------------------
-- BYTECODE -- fun.lua:7-17
0001    TNEW     2   0
0002    LEN      3   0
0003    KSHORT   4   1
0004    MOV      5   3
0005    KSHORT   6   1
0006    FORI     4 => 0010
0007 => TGETV    8   0   7
0008    TSETV    8   2   7
0009    FORL     4 => 0007
0010 => KSHORT   4   1
0011    LEN      5   1
0012    KSHORT   6   1
0013    FORI     4 => 0018
0014 => ADDVV    8   7   3
0015    TGETV    9   1   7
0016    TSETV    9   2   8
0017    FORL     4 => 0014
0018 => RET1     2   2

-- BYTECODE -- fun.lua:19-26
0001    GGET     2   0      ; "ipairs"
0002    MOV      3   0
0003    CALL     2   4   2
0004    JMP      5 => 0009
0005 => ISNEV    1   6
0006    JMP      7 => 0009
0007    KPRI     7   2
0008    RET1     7   2
0009 => ITERC    5   3   3
0010    ITERL    5 => 0005
0011    KPRI     2   1
0012    RET1     2   2

-- BYTECODE -- fun.lua:28-34
0001    TNEW     2   0
0002    KSHORT   3   1
0003    LEN      4   0
0004    KSHORT   5   1
0005    FORI     3 => 0011
0006 => MOV      7   1
0007    TGETV    8   0   6
0008    CALL     7   2   2
0009    TSETV    7   2   6
0010    FORL     3 => 0006
0011 => RET1     2   2

-- BYTECODE -- fun.lua:36-45
0001    TNEW     2   0
0002    KSHORT   3   1
0003    LEN      4   0
0004    KSHORT   5   1
0005    FORI     3 => 0016
0006 => TGETV    7   0   6
0007    MOV      8   1
0008    MOV      9   7
0009    CALL     8   2   2
0010    ISF          8
0011    JMP      9 => 0015
0012    LEN      8   2
0013    ADDVN    8   8   0  ; 1
0014    TSETV    7   2   8
0015 => FORL     3 => 0006
0016 => RET1     2   2

-- BYTECODE -- fun.lua:48-50
0001    GGET     1   0      ; "type"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISNES    1   1      ; "table"
0005    JMP      1 => 0013
0006    UGET     1   0      ; fun
0007    TGETS    1   1   2  ; "traverse"
0008    MOV      2   0
0009    UGET     3   1      ; f
0010    CALL     1   2   3
0011    IST          1
0012    JMP      2 => 0016
0013 => UGET     1   1      ; f
0014    MOV      2   0
0015    CALL     1   2   2
0016 => RET1     1   2

-- BYTECODE -- fun.lua:47-51
0001    UGET     2   0      ; fun
0002    TGETS    2   2   0  ; "map"
0003    MOV      3   0
0004    FNEW     4   1      ; fun.lua:48
0005    UCLO     0 => 0006
0006 => CALLT    2   3

-- BYTECODE -- fun.lua:53-61
0001    KSHORT   1   1
0002    GGET     2   0      ; "math"
0003    TGETS    2   2   1  ; "floor"
0004    LEN      3   0
0005    DIVVN    3   3   0  ; 2
0006    CALL     2   2   2
0007    KSHORT   3   1
0008    FORI     1 => 0018
0009 => MOV      5   4
0010    LEN      6   0
0011    SUBVV    6   6   4
0012    ADDVN    6   6   1  ; 1
0013    TGETV    7   0   5
0014    TGETV    8   0   6
0015    TSETV    8   0   5
0016    TSETV    7   0   6
0017    FORL     1 => 0009
0018 => RET1     0   2

-- BYTECODE -- fun.lua:63-66
0001    GGET     2   0      ; "table"
0002    TGETS    2   2   1  ; "sort"
0003    MOV      3   0
0004    MOV      4   1
0005    CALL     2   1   3
0006    RET1     0   2

-- BYTECODE -- fun.lua:69-71
0001    UGET     2   0      ; f
0002    MOV      3   1
0003    MOV      4   0
0004    CALLT    2   3

-- BYTECODE -- fun.lua:68-72
0001    FNEW     1   0      ; fun.lua:69
0002    UCLO     0 => 0003
0003 => RET1     1   2

-- BYTECODE -- fun.lua:74-90
0001    GGET     2   0      ; "type"
0002    MOV      3   0
0003    CALL     2   2   2
0004    ISNES    2   1      ; "function"
0005    JMP      2 => 0018
0006    MOV      2   0
0007    KNIL     3   4
0008    JMP      5 => 0015
0009 => MOV      6   1
0010    MOV      7   5
0011    CALL     6   2   2
0012    ISF          6
0013    JMP      7 => 0015
0014    RET1     6   2
0015 => ITERC    5   2   3
0016    ITERL    5 => 0009
0017    JMP      2 => 0035
0018 => GGET     2   0      ; "type"
0019    MOV      3   0
0020    CALL     2   2   2
0021    ISNES    2   2      ; "table"
0022    JMP      2 => 0035
0023    GGET     2   3      ; "ipairs"
0024    MOV      3   0
0025    CALL     2   4   2
0026    JMP      5 => 0033
0027 => MOV      7   1
0028    MOV      8   6
0029    CALL     7   2   2
0030    ISF          7
0031    JMP      8 => 0033
0032    RET1     7   2
0033 => ITERC    5   3   3
0034    ITERL    5 => 0027
0035 => RET0     0   1

-- BYTECODE -- fun.lua:96-98
0001    UGET     0   0      ; f
0002    UGET     1   1      ; a
0003    VARG     2   0   0
0004    CALLMT   0   1

-- BYTECODE -- fun.lua:101-103
0001    UGET     0   0      ; f
0002    UGET     1   1      ; a
0003    UGET     2   2      ; b
0004    VARG     3   0   0
0005    CALLMT   0   2

-- BYTECODE -- fun.lua:106-118
0001    GGET     0   0      ; "select"
0002    KSTR     1   1      ; "#"
0003    VARG     2   0   0
0004    CALLM    0   2   1
0005    TNEW     1   3
0006    VARG     2   0   0
0007    TSETM    2   0      ; 1
0008    TNEW     2   0
0009    KSHORT   3   1
0010    UGET     4   0      ; n
0011    KSHORT   5   1
0012    FORI     3 => 0017
0013 => UGET     7   1      ; pargs
0014    TGETV    7   7   6
0015    TSETV    7   2   6
0016    FORL     3 => 0013
0017 => KSHORT   3   1
0018    MOV      4   0
0019    KSHORT   5   1
0020    FORI     3 => 0026
0021 => UGET     7   0      ; n
0022    ADDVV    7   6   7
0023    TGETV    8   1   6
0024    TSETV    8   2   7
0025    FORL     3 => 0021
0026 => UGET     3   2      ; unpack
0027    IST          3
0028    JMP      4 => 0031
0029    GGET     3   2      ; "table"
0030    TGETS    3   3   3  ; "unpack"
0031 => UGET     4   3      ; f
0032    MOV      5   3
0033    MOV      6   2
0034    KSHORT   7   1
0035    UGET     8   0      ; n
0036    ADDVV    8   8   0
0037    CALL     5   0   4
0038    CALLMT   4   0

-- BYTECODE -- fun.lua:92-120
0001    GGET     1   0      ; "select"
0002    KSTR     2   1      ; "#"
0003    VARG     3   0   1
0004    CALLM    1   2   1
0005    ISNEN    1   0      ; 1
0006    JMP      2 => 0012
0007    VARG     2   2   1
0008    FNEW     3   2      ; fun.lua:96
0009    UCLO     0 => 0010
0010 => RET1     3   2
0011    UCLO     2 => 0027
0012 => ISNEN    1   1      ; 2
0013    JMP      2 => 0019
0014    VARG     2   3   1
0015    FNEW     4   3      ; fun.lua:101
0016    UCLO     0 => 0017
0017 => RET1     4   2
0018    UCLO     2 => 0027
0019 => TDUP     2   4
0020    TSETS    1   2   5  ; "n"
0021    VARG     3   0   1
0022    TSETM    3   2      ; 1
0023    FNEW     3   6      ; fun.lua:106
0024    UCLO     0 => 0025
0025 => RET1     3   2
0026    UCLO     2 => 0027
0027 => UCLO     0 => 0028
0028 => RET0     0   1

-- BYTECODE -- fun.lua:126-141
0001    UGET     1   0      ; memory
0002    TGETV    1   1   0
0003    ISF          1
0004    JMP      2 => 0017
0005    UGET     1   0      ; memory
0006    TGETV    1   1   0
0007    UGET     2   1      ; NIL
0008    ISNEV    1   2
0009    JMP      1 => 0014
0010    KPRI     1   0
0011    UGET     2   2      ; errors
0012    TGETV    2   2   0
0013    RET      1   3
0014 => UGET     1   0      ; memory
0015    TGETV    1   1   0
0016    RET1     1   2
0017 => UGET     1   3      ; fn
0018    MOV      2   0
0019    CALL     1   3   2
0020    ISEQP    1   0
0021    JMP      3 => 0025
0022    UGET     3   0      ; memory
0023    TSETV    1   3   0
0024    JMP      3 => 0030
0025 => UGET     3   0      ; memory
0026    UGET     4   1      ; NIL
0027    TSETV    4   3   0
0028    UGET     3   2      ; errors
0029    TSETV    2   3   0
0030 => MOV      3   1
0031    MOV      4   2
0032    RET      3   3

-- BYTECODE -- fun.lua:122-142
0001    GGET     1   0      ; "setmetatable"
0002    TNEW     2   0
0003    TDUP     3   1
0004    CALL     1   2   3
0005    GGET     2   0      ; "setmetatable"
0006    TNEW     3   0
0007    TDUP     4   2
0008    CALL     2   2   3
0009    TNEW     3   0
0010    FNEW     4   3      ; fun.lua:126
0011    UCLO     0 => 0012
0012 => RET1     4   2

-- BYTECODE -- fun.lua:0-145
0001    TNEW     0   0
0002    GGET     1   0      ; "table"
0003    TGETS    1   1   1  ; "unpack"
0004    IST          1
0005    JMP      2 => 0007
0006    GGET     1   1      ; "unpack"
0007 => FNEW     2   3      ; fun.lua:7
0008    TSETS    2   0   2  ; "concat"
0009    FNEW     2   5      ; fun.lua:19
0010    TSETS    2   0   4  ; "contains"
0011    FNEW     2   7      ; fun.lua:28
0012    TSETS    2   0   6  ; "map"
0013    FNEW     2   9      ; fun.lua:36
0014    TSETS    2   0   8  ; "filter"
0015    FNEW     2  11      ; fun.lua:47
0016    TSETS    2   0  10  ; "traverse"
0017    FNEW     2  13      ; fun.lua:53
0018    TSETS    2   0  12  ; "reverse_in"
0019    FNEW     2  15      ; fun.lua:63
0020    TSETS    2   0  14  ; "sort_in"
0021    FNEW     2  17      ; fun.lua:68
0022    TSETS    2   0  16  ; "flip"
0023    FNEW     2  19      ; fun.lua:74
0024    TSETS    2   0  18  ; "find"
0025    FNEW     2  21      ; fun.lua:92
0026    TSETS    2   0  20  ; "partial"
0027    FNEW     2  23      ; fun.lua:122
0028    TSETS    2   0  22  ; "memoize"
0029    UCLO     0 => 0030
0030 => RET1     0   2

-----------------------
-- BYTECODE -- results.lua:10-12
0001    KSTR     0   0      ; "result"
0002    RET1     0   2

-- BYTECODE -- results.lua:14-34
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISNES    6   2      ; "string"
0006    JMP      6 => 0013
0007    MOV      7   0
0008    TGETS    6   0   3  ; "match"
0009    KSTR     8   4      ; "/"
0010    CALL     6   2   3
0011    NOT      6   6
0012    JMP      7 => 0016
0013 => KPRI     6   1
0014    JMP      7 => 0016
0015    KPRI     6   2
0016 => CALL     5   1   2
0017    GGET     5   0      ; "assert"
0018    GGET     6   1      ; "type"
0019    MOV      7   1
0020    CALL     6   2   2
0021    ISEQS    6   2      ; "string"
0022    JMP      6 => 0025
0023    KPRI     6   1
0024    JMP      7 => 0026
0025 => KPRI     6   2
0026 => CALL     5   1   2
0027    GGET     5   0      ; "assert"
0028    GGET     6   1      ; "type"
0029    MOV      7   2
0030    CALL     6   2   2
0031    ISEQS    6   2      ; "string"
0032    JMP      6 => 0035
0033    KPRI     6   1
0034    JMP      7 => 0036
0035 => KPRI     6   2
0036 => CALL     5   1   2
0037    GGET     5   0      ; "assert"
0038    GGET     6   1      ; "type"
0039    MOV      7   3
0040    CALL     6   2   2
0041    ISEQS    6   2      ; "string"
0042    JMP      6 => 0047
0043    NOT      6   3
0044    JMP      7 => 0048
0045    KPRI     6   1
0046    JMP      7 => 0048
0047 => KPRI     6   2
0048 => CALL     5   1   2
0049    GGET     5   0      ; "assert"
0050    GGET     6   1      ; "type"
0051    MOV      7   4
0052    CALL     6   2   2
0053    ISEQS    6   2      ; "string"
0054    JMP      6 => 0059
0055    NOT      6   4
0056    JMP      7 => 0060
0057    KPRI     6   1
0058    JMP      7 => 0060
0059 => KPRI     6   2
0060 => CALL     5   1   2
0061    IST          4
0062    JMP      5 => 0069
0063    UGET     5   0      ; util
0064    TGETS    5   5   5  ; "split_namespace"
0065    MOV      6   0
0066    CALL     5   3   2
0067    MOV      4   6
0068    MOV      0   5
0069 => TDUP     5   6
0070    TSETS    0   5   7  ; "name"
0071    TSETS    1   5   8  ; "version"
0072    TSETS    4   5   9  ; "namespace"
0073    TSETS    3   5  10  ; "arch"
0074    TSETS    2   5  11  ; "repo"
0075    GGET     6  12      ; "setmetatable"
0076    MOV      7   5
0077    UGET     8   1      ; result_mt
0078    CALLT    6   3

-- BYTECODE -- results.lua:43-49
0001    TGETS    2   0   0  ; "substring"
0002    ISF          2
0003    JMP      3 => 0017
0004    MOV      3   1
0005    TGETS    2   1   1  ; "find"
0006    TGETS    4   0   2  ; "name"
0007    KSHORT   5   0
0008    KPRI     6   2
0009    CALL     2   2   5
0010    ISF          2
0011    JMP      3 => 0014
0012    KPRI     2   2
0013    JMP      3 => 0015
0014 => KPRI     2   1
0015 => RET1     2   2
0016    JMP      2 => 0024
0017 => TGETS    2   0   2  ; "name"
0018    ISEQV    1   2
0019    JMP      2 => 0022
0020    KPRI     2   1
0021    JMP      3 => 0023
0022 => KPRI     2   2
0023 => RET1     2   2
0024 => RET0     0   1

-- BYTECODE -- results.lua:54-60
0001    GGET     2   0      ; "assert"
0002    MOV      4   1
0003    TGETS    3   1   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "query"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    UGET     2   0      ; match_name
0012    MOV      3   1
0013    TGETS    4   0   3  ; "name"
0014    CALL     2   2   3
0015    ISF          2
0016    JMP      3 => 0045
0017    TGETS    2   1   4  ; "arch"
0018    TGETS    3   0   4  ; "arch"
0019    TGETV    2   2   3
0020    IST          2
0021    JMP      3 => 0026
0022    TGETS    2   1   4  ; "arch"
0023    TGETS    2   2   5  ; "any"
0024    ISF          2
0025    JMP      3 => 0045
0026 => TGETS    2   1   6  ; "namespace"
0027    ISF          2
0028    JMP      2 => 0033
0029    TGETS    2   1   6  ; "namespace"
0030    TGETS    3   0   6  ; "namespace"
0031    ISNEV    2   3
0032    JMP      2 => 0042
0033 => UGET     2   1      ; vers
0034    TGETS    2   2   7  ; "match_constraints"
0035    UGET     3   1      ; vers
0036    TGETS    3   3   8  ; "parse_version"
0037    TGETS    4   0   9  ; "version"
0038    CALL     3   2   2
0039    TGETS    4   1  10  ; "constraints"
0040    CALL     2   2   3
0041    JMP      3 => 0045
0042 => KPRI     2   1
0043    JMP      3 => 0045
0044    KPRI     2   2
0045 => RET1     2   2

-- BYTECODE -- results.lua:0-63
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.vers"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    TNEW     3   0
0009    TSETS    3   3   3  ; "__index"
0010    FNEW     4   5      ; results.lua:10
0011    TSETS    4   3   4  ; "type"
0012    FNEW     4   7      ; results.lua:14
0013    TSETS    4   0   6  ; "new"
0014    FNEW     4   8      ; results.lua:43
0015    FNEW     5  10      ; results.lua:54
0016    TSETS    5   3   9  ; "satisfies"
0017    UCLO     0 => 0018
0018 => RET1     0   2

-----------------------
-- BYTECODE -- build.lua:32-38
0001    GGET     1   0      ; "pairs"
0002    MOV      2   0
0003    CALL     1   4   2
0004    ISNEXT   4 => 0023
0005 => GGET     6   1      ; "io"
0006    TGETS    6   6   2  ; "open"
0007    UGET     7   0      ; dir
0008    TGETS    7   7   3  ; "path"
0009    UGET     8   1      ; fs
0010    TGETS    8   8   4  ; "current_dir"
0011    CALL     8   2   1
0012    MOV      9   4
0013    CALL     7   2   3
0014    KSTR     8   5      ; "w+"
0015    CALL     6   2   3
0016    MOV      8   6
0017    TGETS    7   6   6  ; "write"
0018    MOV      9   5
0019    CALL     7   1   3
0020    MOV      8   6
0021    TGETS    7   6   7  ; "close"
0022    CALL     7   1   2
0023 => ITERN    4   3   3
0024    ITERL    4 => 0005
0025    RET0     0   1

-- BYTECODE -- build.lua:46-79
0001    GGET     1   0      ; "assert"
0002    MOV      3   0
0003    TGETS    2   0   1  ; "type"
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "rockspec"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    TGETS    1   0   3  ; "build"
0012    TGETS    1   1   4  ; "extra_files"
0013    IST          1
0014    JMP      2 => 0021
0015    TGETS    1   0   3  ; "build"
0016    TGETS    1   1   5  ; "patches"
0017    IST          1
0018    JMP      1 => 0021
0019    KPRI     1   2
0020    RET1     1   2
0021 => GGET     1   6      ; "io"
0022    TGETS    1   1   7  ; "open"
0023    UGET     2   0      ; fs
0024    TGETS    2   2   8  ; "absolute_name"
0025    KSTR     3   9      ; ".luarocks.patches.applied"
0026    CALL     2   2   2
0027    KSTR     3  10      ; "r"
0028    CALL     1   2   3
0029    ISF          1
0030    JMP      2 => 0036
0031    MOV      3   1
0032    TGETS    2   1  11  ; "close"
0033    CALL     2   1   2
0034    KPRI     2   2
0035    RET1     2   2
0036 => TGETS    2   0   3  ; "build"
0037    TGETS    2   2   4  ; "extra_files"
0038    ISF          2
0039    JMP      3 => 0044
0040    UGET     2   1      ; extract_from_rockspec
0041    TGETS    3   0   3  ; "build"
0042    TGETS    3   3   4  ; "extra_files"
0043    CALL     2   1   2
0044 => TGETS    2   0   3  ; "build"
0045    TGETS    2   2   5  ; "patches"
0046    ISF          2
0047    JMP      3 => 0086
0048    UGET     2   1      ; extract_from_rockspec
0049    TGETS    3   0   3  ; "build"
0050    TGETS    3   3   5  ; "patches"
0051    CALL     2   1   2
0052    UGET     2   2      ; util
0053    TGETS    2   2  12  ; "sortedpairs"
0054    TGETS    3   0   3  ; "build"
0055    TGETS    3   3   5  ; "patches"
0056    CALL     2   4   2
0057    JMP      5 => 0084
0058 => UGET     7   2      ; util
0059    TGETS    7   7  13  ; "printout"
0060    KSTR     8  14      ; "Applying patch "
0061    MOV      9   5
0062    KSTR    10  15      ; "..."
0063    CAT      8   8  10
0064    CALL     7   1   2
0065    MOV      8   0
0066    TGETS    7   0  16  ; "format_is_at_least"
0067    KSTR     9  17      ; "3.0"
0068    CALL     7   2   3
0069    UGET     8   0      ; fs
0070    TGETS    8   8  18  ; "apply_patch"
0071    GGET     9  19      ; "tostring"
0072    MOV     10   5
0073    CALL     9   2   2
0074    MOV     10   6
0075    MOV     11   7
0076    CALL     8   3   4
0077    IST          8
0078    JMP     10 => 0084
0079    KPRI    10   0
0080    KSTR    11  20      ; "Failed applying patch "
0081    MOV     12   5
0082    CAT     11  11  12
0083    RET     10   3
0084 => ITERC    5   3   3
0085    ITERL    5 => 0058
0086 => GGET     2   6      ; "io"
0087    TGETS    2   2   7  ; "open"
0088    UGET     3   0      ; fs
0089    TGETS    3   3   8  ; "absolute_name"
0090    KSTR     4   9      ; ".luarocks.patches.applied"
0091    CALL     3   2   2
0092    KSTR     4  21      ; "w"
0093    CALL     2   2   3
0094    MOV      1   2
0095    ISF          1
0096    JMP      2 => 0100
0097    MOV      3   1
0098    TGETS    2   1  11  ; "close"
0099    CALL     2   1   2
0100 => KPRI     2   2
0101    RET1     2   2

-- BYTECODE -- build.lua:84-86
0001    GGET     1   0      ; "tonumber"
0002    ISFC     2   0
0003    JMP      2 => 0008
0004    MOV      3   0
0005    TGETS    2   0   1  ; "match"
0006    KSTR     4   2      ; "^[^.]+%.([^.]+)"
0007    CALL     2   2   3
0008 => CALLT    1   2

-- BYTECODE -- build.lua:87-93
0001    UGET     1   0      ; rockspec
0002    TGETS    1   1   0  ; "variables"
0003    TGETV    1   1   0
0004    MOV      2   1
0005    TGETS    1   1   1  ; "match"
0006    KSTR     3   2      ; "MACOSX_DEPLOYMENT_TARGET"
0007    CALL     1   2   3
0008    ISF          1
0009    JMP      2 => 0024
0010    UGET     1   0      ; rockspec
0011    TGETS    1   1   0  ; "variables"
0012    UGET     2   0      ; rockspec
0013    TGETS    2   2   0  ; "variables"
0014    TGETV    2   2   0
0015    MOV      3   2
0016    TGETS    2   2   3  ; "gsub"
0017    KSTR     4   4      ; "MACOSX_DEPLOYMENT_TARGET=[^ ]*"
0018    KSTR     5   5      ; "MACOSX_DEPLOYMENT_TARGET="
0019    UGET     6   1      ; target
0020    CAT      5   5   6
0021    CALL     2   2   4
0022    TSETV    2   1   0
0023    JMP      1 => 0034
0024 => UGET     1   0      ; rockspec
0025    TGETS    1   1   0  ; "variables"
0026    KSTR     2   6      ; "env MACOSX_DEPLOYMENT_TARGET="
0027    UGET     3   1      ; target
0028    KSTR     4   7      ; " "
0029    UGET     5   0      ; rockspec
0030    TGETS    5   5   0  ; "variables"
0031    TGETV    5   5   0
0032    CAT      2   2   5
0033    TSETV    2   1   0
0034 => RET0     0   1

-- BYTECODE -- build.lua:82-105
0001    TGETS    1   0   0  ; "build"
0002    TGETS    1   1   1  ; "macosx_deployment_target"
0003    FNEW     2   2      ; build.lua:84
0004    FNEW     3   3      ; build.lua:87
0005    UGET     4   0      ; cfg
0006    TGETS    4   4   4  ; "is_platform"
0007    KSTR     5   5      ; "macosx"
0008    CALL     4   2   2
0009    ISF          4
0010    JMP      5 => 0046
0011    MOV      5   0
0012    TGETS    4   0   6  ; "format_is_at_least"
0013    KSTR     6   7      ; "3.0"
0014    CALL     4   2   3
0015    ISF          4
0016    JMP      5 => 0046
0017    ISF          1
0018    JMP      4 => 0046
0019    UGET     4   1      ; util
0020    TGETS    4   4   8  ; "popen_read"
0021    KSTR     5   9      ; "sw_vers -productVersion"
0022    CALL     4   2   2
0023    MOV      5   2
0024    MOV      6   4
0025    CALL     5   2   2
0026    MOV      6   2
0027    MOV      7   1
0028    CALL     6   2   2
0029    ISGE     5   6
0030    JMP      7 => 0040
0031    KPRI     7   0
0032    KSTR     8  10      ; "This rock requires Mac OSX 10.%d, and yo"~
0033    MOV      9   8
0034    TGETS    8   8  11  ; "format"
0035    MOV     10   6
0036    MOV     11   5
0037    CALL     8   0   4
0038    UCLO     0 => 0039
0039 => RETM     7   1
0040 => MOV      7   3
0041    KSTR     8  12      ; "CC"
0042    CALL     7   1   2
0043    MOV      7   3
0044    KSTR     8  13      ; "LD"
0045    CALL     7   1   2
0046 => KPRI     4   2
0047    UCLO     0 => 0048
0048 => RET1     4   2

-- BYTECODE -- build.lua:107-144
0001    TGETS    2   1   0  ; "build_only_deps"
0002    IST          2
0003    JMP      2 => 0015
0004    UGET     2   0      ; deps
0005    TGETS    2   2   1  ; "check_external_deps"
0006    MOV      3   0
0007    KSTR     4   2      ; "build"
0008    CALL     2   4   3
0009    ISF          3
0010    JMP      5 => 0015
0011    KPRI     5   0
0012    MOV      6   3
0013    MOV      7   4
0014    RET      5   4
0015 => UGET     2   0      ; deps
0016    TGETS    2   2   3  ; "check_lua_incdir"
0017    TGETS    3   0   4  ; "variables"
0018    CALL     2   4   2
0019    IST          2
0020    JMP      5 => 0025
0021    KPRI     5   0
0022    MOV      6   3
0023    MOV      7   4
0024    RET      5   4
0025 => UGET     5   1      ; cfg
0026    TGETS    5   5   5  ; "link_lua_explicitly"
0027    ISF          5
0028    JMP      6 => 0039
0029    UGET     5   0      ; deps
0030    TGETS    5   5   6  ; "check_lua_libdir"
0031    TGETS    6   0   4  ; "variables"
0032    CALL     5   4   2
0033    IST          5
0034    JMP      8 => 0039
0035    KPRI     8   0
0036    MOV      9   6
0037    MOV     10   7
0038    RET      8   4
0039 => TGETS    5   1   7  ; "deps_mode"
0040    ISNES    5   8      ; "none"
0041    JMP      5 => 0044
0042    KPRI     5   2
0043    RET1     5   2
0044 => TGETS    5   1   0  ; "build_only_deps"
0045    IST          5
0046    JMP      5 => 0065
0047    GGET     5   9      ; "next"
0048    TGETS    6   0  10  ; "build_dependencies"
0049    CALL     5   2   2
0050    ISF          5
0051    JMP      6 => 0065
0052    UGET     5   0      ; deps
0053    TGETS    5   5  11  ; "fulfill_dependencies"
0054    MOV      6   0
0055    KSTR     7  10      ; "build_dependencies"
0056    TGETS    8   1   7  ; "deps_mode"
0057    TGETS    9   1  12  ; "verify"
0058    CALL     5   4   5
0059    ISF          6
0060    JMP      8 => 0065
0061    KPRI     8   0
0062    MOV      9   6
0063    MOV     10   7
0064    RET      8   4
0065 => UGET     5   0      ; deps
0066    TGETS    5   5  11  ; "fulfill_dependencies"
0067    MOV      6   0
0068    KSTR     7  13      ; "dependencies"
0069    TGETS    8   1   7  ; "deps_mode"
0070    TGETS    9   1  12  ; "verify"
0071    CALL     5   4   5
0072    ISF          6
0073    JMP      8 => 0078
0074    KPRI     8   0
0075    MOV      9   6
0076    MOV     10   7
0077    RET      8   4
0078 => KPRI     8   2
0079    RET1     8   2

-- BYTECODE -- build.lua:146-171
0001    TGETS    2   1   0  ; "minimal_mode"
0002    IST          2
0003    JMP      3 => 0007
0004    TGETS    2   1   1  ; "build_only_deps"
0005    ISF          2
0006    JMP      3 => 0009
0007 => KPRI     2   2
0008    RET1     2   2
0009 => TGETS    2   1   2  ; "need_to_fetch"
0010    ISF          2
0011    JMP      3 => 0042
0012    TGETS    2   1   3  ; "branch"
0013    ISF          2
0014    JMP      3 => 0018
0015    TGETS    2   0   4  ; "source"
0016    TGETS    3   1   3  ; "branch"
0017    TSETS    3   2   3  ; "branch"
0018 => UGET     2   0      ; fetch
0019    TGETS    2   2   5  ; "fetch_sources"
0020    MOV      3   0
0021    KPRI     4   2
0022    CALL     2   4   3
0023    IST          2
0024    JMP      5 => 0029
0025    KPRI     5   0
0026    MOV      6   3
0027    MOV      7   4
0028    RET      5   4
0029 => KPRI     5   0
0030    UGET     6   1      ; fs
0031    TGETS    6   6   6  ; "change_dir"
0032    MOV      7   3
0033    CALL     6   3   2
0034    MOV      5   7
0035    MOV      2   6
0036    IST          2
0037    JMP      6 => 0056
0038    KPRI     6   0
0039    MOV      7   5
0040    RET      6   3
0041    JMP      2 => 0056
0042 => TGETS    2   0   4  ; "source"
0043    TGETS    2   2   7  ; "file"
0044    ISF          2
0045    JMP      3 => 0056
0046    UGET     2   1      ; fs
0047    TGETS    2   2   8  ; "unpack_archive"
0048    TGETS    3   0   4  ; "source"
0049    TGETS    3   3   7  ; "file"
0050    CALL     2   3   2
0051    IST          2
0052    JMP      4 => 0056
0053    KPRI     4   0
0054    MOV      5   3
0055    RET      4   3
0056 => UGET     2   1      ; fs
0057    TGETS    2   2   6  ; "change_dir"
0058    TGETS    3   0   4  ; "source"
0059    TGETS    3   3   9  ; "dir"
0060    CALL     2   1   2
0061    KPRI     2   2
0062    RET1     2   2

-- BYTECODE -- build.lua:173-189
0001    TDUP     2   3
0002    TDUP     3   1
0003    UGET     4   0      ; path
0004    TGETS    4   4   0  ; "lua_dir"
0005    MOV      5   0
0006    MOV      6   1
0007    CALL     4   2   3
0008    TSETS    4   3   2  ; "name"
0009    TSETS    3   2   4  ; "lua"
0010    TDUP     3   6
0011    UGET     4   0      ; path
0012    TGETS    4   4   5  ; "lib_dir"
0013    MOV      5   0
0014    MOV      6   1
0015    CALL     4   2   3
0016    TSETS    4   3   2  ; "name"
0017    TSETS    3   2   7  ; "lib"
0018    TDUP     3   9
0019    UGET     4   0      ; path
0020    TGETS    4   4   8  ; "bin_dir"
0021    MOV      5   0
0022    MOV      6   1
0023    CALL     4   2   3
0024    TSETS    4   3   2  ; "name"
0025    TSETS    3   2  10  ; "bin"
0026    TDUP     3  12
0027    UGET     4   0      ; path
0028    TGETS    4   4  11  ; "conf_dir"
0029    MOV      5   0
0030    MOV      6   1
0031    CALL     4   2   3
0032    TSETS    4   3   2  ; "name"
0033    TSETS    3   2  13  ; "conf"
0034    GGET     3  14      ; "pairs"
0035    MOV      4   2
0036    CALL     3   4   2
0037    ISNEXT   6 => 0047
0038 => UGET     8   1      ; fs
0039    TGETS    8   8  15  ; "make_dir"
0040    TGETS    9   7   2  ; "name"
0041    CALL     8   3   2
0042    IST          8
0043    JMP     10 => 0047
0044    KPRI    10   0
0045    MOV     11   9
0046    RET     10   3
0047 => ITERN    6   3   3
0048    ITERL    6 => 0038
0049    RET1     2   2

-- BYTECODE -- build.lua:191-214
0001    TGETS    1   0   0  ; "build"
0002    TGETS    1   1   1  ; "type"
0003    ISNES    1   2      ; "none"
0004    JMP      2 => 0007
0005    KPRI     2   2
0006    RET1     2   2
0007 => ISNES    1   3      ; "module"
0008    JMP      2 => 0016
0009    UGET     2   0      ; util
0010    TGETS    2   2   4  ; "printout"
0011    KSTR     3   5      ; "Do not use 'module' as a build type. Use"~
0012    CALL     2   1   2
0013    KSTR     1   6      ; "builtin"
0014    TGETS    2   0   0  ; "build"
0015    TSETS    1   2   1  ; "type"
0016 => UGET     2   1      ; cfg
0017    TGETS    2   2   7  ; "accepted_build_types"
0018    ISF          2
0019    JMP      3 => 0034
0020    UGET     2   2      ; fun
0021    TGETS    2   2   8  ; "contains"
0022    UGET     3   1      ; cfg
0023    TGETS    3   3   7  ; "accepted_build_types"
0024    MOV      4   1
0025    CALL     2   2   3
0026    IST          2
0027    JMP      2 => 0034
0028    KPRI     2   0
0029    KSTR     3   9      ; "This rockspec uses the '"
0030    MOV      4   1
0031    KSTR     5  10      ; "' build type, which is blocked by the 'a"~
0032    CAT      3   3   5
0033    RET      2   3
0034 => GGET     2  11      ; "pcall"
0035    GGET     3  12      ; "require"
0036    KSTR     4  13      ; "luarocks.build."
0037    MOV      5   1
0038    CAT      4   4   5
0039    CALL     2   3   3
0040    ISF          2
0041    JMP      4 => 0047
0042    GGET     4   1      ; "type"
0043    MOV      5   3
0044    CALL     4   2   2
0045    ISEQS    4  14      ; "table"
0046    JMP      4 => 0054
0047 => KPRI     4   0
0048    KSTR     5  15      ; "Failed initializing build back-end for b"~
0049    MOV      6   1
0050    KSTR     7  16      ; "': "
0051    MOV      8   3
0052    CAT      5   5   8
0053    RET      4   3
0054 => TGETS    4   3  17  ; "run"
0055    MOV      5   0
0056    CALL     4   3   2
0057    IST          4
0058    JMP      6 => 0064
0059    KPRI     6   0
0060    KSTR     7  18      ; "Build error: "
0061    MOV      8   5
0062    CAT      7   7   8
0063    RET      6   3
0064 => KPRI     6   2
0065    RET1     6   2

-- BYTECODE -- build.lua:235-270
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "table"
0006    JMP      5 => 0011
0007    NOT      5   0
0008    JMP      6 => 0012
0009    KPRI     5   1
0010    JMP      6 => 0012
0011 => KPRI     5   2
0012 => CALL     4   1   2
0013    GGET     4   0      ; "assert"
0014    GGET     5   1      ; "type"
0015    MOV      6   1
0016    CALL     5   2   2
0017    ISEQS    5   3      ; "string"
0018    JMP      5 => 0021
0019    KPRI     5   1
0020    JMP      6 => 0022
0021 => KPRI     5   2
0022 => CALL     4   1   2
0023    IST          0
0024    JMP      4 => 0027
0025    KPRI     4   2
0026    RET1     4   2
0027 => GGET     4   4      ; "pairs"
0028    MOV      5   0
0029    CALL     4   4   2
0030    ISNEXT   7 => 0129
0031 => MOV      9   1
0032    UGET    10   0      ; dir
0033    TGETS   10  10   5  ; "base_name"
0034    MOV     11   8
0035    CALL    10   2   2
0036    GGET    11   1      ; "type"
0037    MOV     12   7
0038    CALL    11   2   2
0039    ISNES   11   3      ; "string"
0040    JMP     11 => 0100
0041    MOV     11   7
0042    ISF          2
0043    JMP     12 => 0076
0044    UGET    12   0      ; dir
0045    TGETS   12  12   6  ; "path"
0046    MOV     13   1
0047    UGET    14   1      ; path
0048    TGETS   14  14   7  ; "module_to_path"
0049    MOV     15  11
0050    CALL    14   0   2
0051    CALLM   12   2   1
0052    MOV      9  12
0053    UGET    12   2      ; fs
0054    TGETS   12  12   8  ; "make_dir"
0055    MOV     13   9
0056    CALL    12   3   2
0057    IST         12
0058    JMP     14 => 0062
0059    KPRI    14   0
0060    MOV     15  13
0061    RET     14   3
0062 => MOV     15  10
0063    TGETS   14  10   9  ; "match"
0064    KSTR    16  10      ; "%.lua$"
0065    CALL    14   2   3
0066    ISF         14
0067    JMP     15 => 0109
0068    MOV     15  11
0069    TGETS   14  11   9  ; "match"
0070    KSTR    16  11      ; "([^.]+)$"
0071    CALL    14   2   3
0072    MOV     15  14
0073    KSTR    16  12      ; ".lua"
0074    CAT     10  15  16
0075    JMP     12 => 0109
0076 => UGET    12   0      ; dir
0077    TGETS   12  12   6  ; "path"
0078    MOV     13   1
0079    UGET    14   0      ; dir
0080    TGETS   14  14  13  ; "dir_name"
0081    MOV     15  11
0082    CALL    14   0   2
0083    CALLM   12   2   1
0084    MOV      9  12
0085    UGET    12   2      ; fs
0086    TGETS   12  12   8  ; "make_dir"
0087    MOV     13   9
0088    CALL    12   3   2
0089    IST         12
0090    JMP     14 => 0094
0091    KPRI    14   0
0092    MOV     15  13
0093    RET     14   3
0094 => UGET    14   0      ; dir
0095    TGETS   14  14   5  ; "base_name"
0096    MOV     15  11
0097    CALL    14   2   2
0098    MOV     10  14
0099    JMP     11 => 0109
0100 => UGET    11   2      ; fs
0101    TGETS   11  11   8  ; "make_dir"
0102    MOV     12   9
0103    CALL    11   3   2
0104    IST         11
0105    JMP     13 => 0109
0106    KPRI    13   0
0107    MOV     14  12
0108    RET     13   3
0109 => UGET    11   2      ; fs
0110    TGETS   11  11  14  ; "copy"
0111    UGET    12   0      ; dir
0112    TGETS   12  12   6  ; "path"
0113    MOV     13   8
0114    CALL    12   2   2
0115    UGET    13   0      ; dir
0116    TGETS   13  13   6  ; "path"
0117    MOV     14   9
0118    MOV     15  10
0119    CALL    13   2   3
0120    MOV     14   3
0121    CALL    11   2   4
0122    IST         11
0123    JMP     12 => 0129
0124    KPRI    12   0
0125    KSTR    13  15      ; "Failed copying "
0126    MOV     14   8
0127    CAT     13  13  14
0128    RET     12   3
0129 => ITERN    7   3   3
0130    ITERL    7 => 0031
0131    KPRI     4   2
0132    RET1     4   2

-- BYTECODE -- build.lua:272-288
0001    TDUP     2   0
0002    UGET     3   0      ; dir
0003    TGETS    3   3   1  ; "path"
0004    UGET     4   1      ; path
0005    TGETS    4   4   2  ; "install_dir"
0006    MOV      5   0
0007    MOV      6   1
0008    CALL     4   2   3
0009    KSTR     5   3      ; "doc"
0010    CALL     3   2   3
0011    KPRI     4   1
0012    UGET     5   2      ; fs
0013    TGETS    5   5   4  ; "dir"
0014    CALL     5   4   1
0015    JMP      8 => 0047
0016 => GGET     9   5      ; "ipairs"
0017    MOV     10   2
0018    CALL     9   4   2
0019    JMP     12 => 0045
0020 => MOV     15   8
0021    TGETS   14   8   6  ; "lower"
0022    CALL    14   2   2
0023    MOV     15  14
0024    TGETS   14  14   7  ; "match"
0025    KSTR    16   8      ; "^"
0026    MOV     17  13
0027    CAT     16  16  17
0028    CALL    14   2   3
0029    ISF         14
0030    JMP     15 => 0045
0031    IST          4
0032    JMP     14 => 0038
0033    UGET    14   2      ; fs
0034    TGETS   14  14   9  ; "make_dir"
0035    MOV     15   3
0036    CALL    14   1   2
0037    KPRI     4   2
0038 => UGET    14   2      ; fs
0039    TGETS   14  14  10  ; "copy"
0040    MOV     15   8
0041    MOV     16   3
0042    KSTR    17  11      ; "read"
0043    CALL    14   1   4
0044    JMP      9 => 0047
0045 => ITERC   12   3   3
0046    ITERL   12 => 0020
0047 => ITERC    8   2   3
0048    ITERL    8 => 0016
0049    RET0     0   1

-- BYTECODE -- build.lua:290-325
0001    TGETS    2   0   0  ; "name"
0002    TGETS    3   0   1  ; "version"
0003    TGETS    4   0   2  ; "build"
0004    TGETS    4   4   3  ; "install"
0005    ISF          4
0006    JMP      5 => 0026
0007    GGET     4   4      ; "pairs"
0008    MOV      5   1
0009    CALL     4   4   2
0010    ISNEXT   7 => 0024
0011 => UGET     9   0      ; install_to
0012    TGETS   10   0   2  ; "build"
0013    TGETS   10  10   3  ; "install"
0014    TGETV   10  10   7
0015    TGETS   11   8   0  ; "name"
0016    TGETS   12   8   5  ; "is_module_path"
0017    TGETS   13   8   6  ; "perms"
0018    CALL     9   3   5
0019    IST          9
0020    JMP     11 => 0024
0021    KPRI    11   0
0022    MOV     12  10
0023    RET     11   3
0024 => ITERN    7   3   3
0025    ITERL    7 => 0011
0026 => TGETS    4   0   2  ; "build"
0027    TGETS    4   4   7  ; "copy_directories"
0028    KPRI     5   1
0029    IST          4
0030    JMP      6 => 0033
0031    TDUP     4   8
0032    KPRI     5   2
0033 => KPRI     6   1
0034    GGET     7   4      ; "pairs"
0035    MOV      8   4
0036    CALL     7   4   2
0037    ISNEXT  10 => 0072
0038 => UGET    12   1      ; fs
0039    TGETS   12  12   9  ; "is_dir"
0040    MOV     13  11
0041    CALL    12   2   2
0042    ISF         12
0043    JMP     13 => 0064
0044    UGET    12   2      ; dir
0045    TGETS   12  12  10  ; "path"
0046    UGET    13   3      ; path
0047    TGETS   13  13  11  ; "install_dir"
0048    MOV     14   2
0049    MOV     15   3
0050    CALL    13   2   3
0051    MOV     14  11
0052    CALL    12   2   3
0053    UGET    13   1      ; fs
0054    TGETS   13  13  12  ; "make_dir"
0055    MOV     14  12
0056    CALL    13   1   2
0057    UGET    13   1      ; fs
0058    TGETS   13  13  13  ; "copy_contents"
0059    MOV     14  11
0060    MOV     15  12
0061    CALL    13   1   3
0062    KPRI     6   2
0063    JMP     12 => 0072
0064 => IST          5
0065    JMP     12 => 0072
0066    KPRI    12   0
0067    KSTR    13  14      ; "Directory '"
0068    MOV     14  11
0069    KSTR    15  15      ; "' not found"
0070    CAT     13  13  15
0071    RET     12   3
0072 => ITERN   10   3   3
0073    ITERL   10 => 0038
0074    IST          6
0075    JMP      7 => 0080
0076    UGET     7   4      ; install_default_docs
0077    MOV      8   2
0078    MOV      9   3
0079    CALL     7   1   3
0080 => KPRI     7   2
0081    RET1     7   2

-- BYTECODE -- build.lua:328-345
0001    TGETS    2   0   0  ; "name"
0002    TGETS    3   0   1  ; "version"
0003    UGET     4   0      ; fs
0004    TGETS    4   4   2  ; "copy"
0005    TGETS    5   0   3  ; "local_abs_filename"
0006    UGET     6   1      ; path
0007    TGETS    6   6   4  ; "rockspec_file"
0008    MOV      7   2
0009    MOV      8   3
0010    CALL     6   2   3
0011    KSTR     7   5      ; "read"
0012    CALL     4   1   4
0013    UGET     4   2      ; deplocks
0014    TGETS    4   4   6  ; "get_abs_filename"
0015    TGETS    5   0   0  ; "name"
0016    CALL     4   2   2
0017    ISF          4
0018    JMP      5 => 0033
0019    UGET     5   0      ; fs
0020    TGETS    5   5   2  ; "copy"
0021    MOV      6   4
0022    UGET     7   3      ; dir
0023    TGETS    7   7   7  ; "path"
0024    UGET     8   1      ; path
0025    TGETS    8   8   8  ; "install_dir"
0026    MOV      9   2
0027    MOV     10   3
0028    CALL     8   2   3
0029    KSTR     9   9      ; "luarocks.lock"
0030    CALL     7   2   3
0031    KSTR     8   5      ; "read"
0032    CALL     5   1   4
0033 => UGET     5   4      ; writer
0034    TGETS    5   5  10  ; "make_rock_manifest"
0035    MOV      6   2
0036    MOV      7   3
0037    CALL     5   3   3
0038    IST          5
0039    JMP      7 => 0043
0040    KPRI     7   0
0041    MOV      8   6
0042    RET      7   3
0043 => UGET     7   4      ; writer
0044    TGETS    7   7  11  ; "make_namespace_file"
0045    MOV      8   2
0046    MOV      9   3
0047    TGETS   10   1  12  ; "namespace"
0048    CALL     7   3   4
0049    MOV      6   8
0050    MOV      5   7
0051    IST          5
0052    JMP      7 => 0056
0053    KPRI     7   0
0054    MOV      8   6
0055    RET      7   3
0056 => KPRI     7   2
0057    RET1     7   2

-- BYTECODE -- build.lua:394-397
0001    UGET     0   0      ; fs
0002    TGETS    0   0   0  ; "delete"
0003    UGET     1   1      ; path
0004    TGETS    1   1   1  ; "install_dir"
0005    UGET     2   2      ; name
0006    UGET     3   3      ; version
0007    CALL     1   0   3
0008    CALLM    0   1   0
0009    UGET     0   0      ; fs
0010    TGETS    0   0   2  ; "remove_dir_if_empty"
0011    UGET     1   1      ; path
0012    TGETS    1   1   3  ; "versions_dir"
0013    UGET     2   2      ; name
0014    CALL     1   0   2
0015    CALLM    0   1   0
0016    RET0     0   1

-- BYTECODE -- build.lua:431-433
0001    UGET     0   0      ; repos
0002    TGETS    0   0   0  ; "delete_version"
0003    UGET     1   1      ; name
0004    UGET     2   2      ; version
0005    UGET     3   3      ; opts
0006    TGETS    3   3   1  ; "deps_mode"
0007    CALL     0   1   4
0008    RET0     0   1

-- BYTECODE -- build.lua:351-441
0001    GGET     2   0      ; "assert"
0002    MOV      4   0
0003    TGETS    3   0   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "rockspec"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    MOV      4   1
0013    TGETS    3   1   1  ; "type"
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "build.opts"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    TGETS    2   0   4  ; "build"
0022    IST          2
0023    JMP      2 => 0036
0024    MOV      3   0
0025    TGETS    2   0   5  ; "format_is_at_least"
0026    KSTR     4   6      ; "3.0"
0027    CALL     2   2   3
0028    ISF          2
0029    JMP      3 => 0033
0030    TDUP     2   7
0031    TSETS    2   0   4  ; "build"
0032    JMP      2 => 0036
0033 => KPRI     2   0
0034    KSTR     3   8      ; "Rockspec error: build table not specifie"~
0035    UCLO     0 => 0250
0036 => TGETS    2   0   4  ; "build"
0037    TGETS    2   2   1  ; "type"
0038    IST          2
0039    JMP      2 => 0053
0040    MOV      3   0
0041    TGETS    2   0   5  ; "format_is_at_least"
0042    KSTR     4   6      ; "3.0"
0043    CALL     2   2   3
0044    ISF          2
0045    JMP      3 => 0050
0046    TGETS    2   0   4  ; "build"
0047    KSTR     3   9      ; "builtin"
0048    TSETS    3   2   1  ; "type"
0049    JMP      2 => 0053
0050 => KPRI     2   0
0051    KSTR     3  10      ; "Rockspec error: build type not specified"
0052    UCLO     0 => 0251
0053 => UGET     2   0      ; fetch_and_change_to_source_dir
0054    MOV      3   0
0055    MOV      4   1
0056    CALL     2   3   3
0057    IST          2
0058    JMP      4 => 0062
0059    KPRI     4   0
0060    MOV      5   3
0061    UCLO     0 => 0252
0062 => TGETS    4   1  11  ; "pin"
0063    ISF          4
0064    JMP      5 => 0070
0065    UGET     4   1      ; deplocks
0066    TGETS    4   4  12  ; "init"
0067    TGETS    5   0  13  ; "name"
0068    KSTR     6  14      ; "."
0069    CALL     4   1   3
0070 => UGET     4   2      ; process_dependencies
0071    MOV      5   0
0072    MOV      6   1
0073    CALL     4   3   3
0074    MOV      3   5
0075    MOV      2   4
0076    IST          2
0077    JMP      4 => 0081
0078    KPRI     4   0
0079    MOV      5   3
0080    UCLO     0 => 0253
0081 => TGETS    4   0  13  ; "name"
0082    TGETS    5   0  15  ; "version"
0083    TGETS    6   1  16  ; "build_only_deps"
0084    ISF          6
0085    JMP      7 => 0089
0086    MOV      6   4
0087    MOV      7   5
0088    UCLO     0 => 0254
0089 => UGET     6   3      ; repos
0090    TGETS    6   6  17  ; "is_installed"
0091    MOV      7   4
0092    MOV      8   5
0093    CALL     6   2   3
0094    ISF          6
0095    JMP      7 => 0102
0096    UGET     6   3      ; repos
0097    TGETS    6   6  18  ; "delete_version"
0098    MOV      7   4
0099    MOV      8   5
0100    TGETS    9   1  19  ; "deps_mode"
0101    CALL     6   1   4
0102 => UGET     6   4      ; prepare_install_dirs
0103    MOV      7   4
0104    MOV      8   5
0105    CALL     6   3   3
0106    IST          6
0107    JMP      8 => 0111
0108    KPRI     8   0
0109    MOV      9   7
0110    UCLO     0 => 0255
0111 => UGET     8   5      ; util
0112    TGETS    8   8  20  ; "schedule_function"
0113    FNEW     9  21      ; build.lua:394
0114    CALL     8   2   2
0115    UGET     9   8      ; build
0116    TGETS    9   9  22  ; "apply_patches"
0117    MOV     10   0
0118    CALL     9   3   2
0119    MOV      7  10
0120    MOV      2   9
0121    IST          2
0122    JMP      9 => 0127
0123    KPRI     9   0
0124    MOV     10   7
0125    UCLO     0 => 0126
0126 => RET      9   3
0127 => UGET     9   9      ; check_macosx_deployment_target
0128    MOV     10   0
0129    CALL     9   3   2
0130    MOV      7  10
0131    MOV      2   9
0132    IST          2
0133    JMP      9 => 0138
0134    KPRI     9   0
0135    MOV     10   7
0136    UCLO     0 => 0137
0137 => RET      9   3
0138 => UGET     9  10      ; run_build_driver
0139    MOV     10   0
0140    CALL     9   3   2
0141    MOV      7  10
0142    MOV      2   9
0143    IST          2
0144    JMP      9 => 0149
0145    KPRI     9   0
0146    MOV     10   7
0147    UCLO     0 => 0148
0148 => RET      9   3
0149 => UGET     9  11      ; install_files
0150    MOV     10   0
0151    MOV     11   6
0152    CALL     9   3   3
0153    MOV      7  10
0154    MOV      2   9
0155    IST          2
0156    JMP      9 => 0161
0157    KPRI     9   0
0158    MOV     10   7
0159    UCLO     0 => 0160
0160 => RET      9   3
0161 => GGET     9  23      ; "pairs"
0162    MOV     10   6
0163    CALL     9   4   2
0164    ISNEXT  12 => 0169
0165 => UGET    14   6      ; fs
0166    TGETS   14  14  24  ; "remove_dir_if_empty"
0167    TGETS   15  13  13  ; "name"
0168    CALL    14   1   2
0169 => ITERN   12   3   3
0170    ITERL   12 => 0165
0171    UGET     9   6      ; fs
0172    TGETS    9   9  25  ; "pop_dir"
0173    CALL     9   1   1
0174    TGETS    9   1  26  ; "need_to_fetch"
0175    ISF          9
0176    JMP     10 => 0180
0177    UGET     9   6      ; fs
0178    TGETS    9   9  25  ; "pop_dir"
0179    CALL     9   1   1
0180 => TGETS    9   1  11  ; "pin"
0181    ISF          9
0182    JMP     10 => 0186
0183    UGET     9   1      ; deplocks
0184    TGETS    9   9  27  ; "write_file"
0185    CALL     9   1   1
0186 => UGET     9  12      ; write_rock_dir_files
0187    MOV     10   0
0188    MOV     11   1
0189    CALL     9   3   3
0190    MOV      7  10
0191    MOV      2   9
0192    IST          2
0193    JMP      9 => 0198
0194    KPRI     9   0
0195    MOV     10   7
0196    UCLO     0 => 0197
0197 => RET      9   3
0198 => UGET     9   3      ; repos
0199    TGETS    9   9  28  ; "deploy_files"
0200    MOV     10   4
0201    MOV     11   5
0202    UGET    12   3      ; repos
0203    TGETS   12  12  29  ; "should_wrap_bin_scripts"
0204    MOV     13   0
0205    CALL    12   2   2
0206    TGETS   13   1  19  ; "deps_mode"
0207    CALL     9   3   5
0208    MOV      7  10
0209    MOV      2   9
0210    IST          2
0211    JMP      9 => 0216
0212    KPRI     9   0
0213    MOV     10   7
0214    UCLO     0 => 0215
0215 => RET      9   3
0216 => UGET     9   5      ; util
0217    TGETS    9   9  30  ; "remove_scheduled_function"
0218    MOV     10   8
0219    CALL     9   1   2
0220    UGET     9   5      ; util
0221    TGETS    9   9  20  ; "schedule_function"
0222    FNEW    10  31      ; build.lua:431
0223    CALL     9   2   2
0224    MOV      8   9
0225    UGET     9   3      ; repos
0226    TGETS    9   9  32  ; "run_hook"
0227    MOV     10   0
0228    KSTR    11  33      ; "post_install"
0229    CALL     9   3   3
0230    MOV      7  10
0231    MOV      2   9
0232    IST          2
0233    JMP      9 => 0238
0234    KPRI     9   0
0235    MOV     10   7
0236    UCLO     0 => 0237
0237 => RET      9   3
0238 => UGET     9   5      ; util
0239    TGETS    9   9  34  ; "announce_install"
0240    MOV     10   0
0241    CALL     9   1   2
0242    UGET     9   5      ; util
0243    TGETS    9   9  30  ; "remove_scheduled_function"
0244    MOV     10   8
0245    CALL     9   1   2
0246    MOV      9   4
0247    MOV     10   5
0248    UCLO     0 => 0249
0249 => RET      9   3
0250 => RET      2   3
0251 => RET      2   3
0252 => RET      4   3
0253 => RET      4   3
0254 => RET      6   3
0255 => RET      8   3

-- BYTECODE -- build.lua:0-444
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.path"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fun"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.fetch"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.dir"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.deps"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.core.cfg"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.repos"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.manif.writer"
0031    CALL    10   2   2
0032    GGET    11   0      ; "require"
0033    KSTR    12  11      ; "luarocks.deplocks"
0034    CALL    11   2   2
0035    TGETS   12   2  13  ; "opts_table"
0036    KSTR    13  14      ; "build.opts"
0037    TDUP    14  15
0038    CALL    12   2   3
0039    TSETS   12   0  12  ; "opts"
0040    FNEW    12  16      ; build.lua:32
0041    FNEW    13  18      ; build.lua:46
0042    TSETS   13   0  17  ; "apply_patches"
0043    UCLO    12 => 0044
0044 => FNEW    12  19      ; build.lua:82
0045    FNEW    13  20      ; build.lua:107
0046    FNEW    14  21      ; build.lua:146
0047    FNEW    15  22      ; build.lua:173
0048    FNEW    16  23      ; build.lua:191
0049    KPRI    17   0
0050    FNEW    18  24      ; build.lua:235
0051    FNEW    19  25      ; build.lua:272
0052    FNEW    17  26      ; build.lua:290
0053    UCLO    18 => 0054
0054 => FNEW    18  27      ; build.lua:328
0055    FNEW    19  29      ; build.lua:351
0056    TSETS   19   0  28  ; "build_rockspec"
0057    UCLO     0 => 0058
0058 => RET1     0   2

-----------------------
-- BYTECODE -- manif.lua:24-31
0001    UGET     3   0      ; type_manifest
0002    TGETS    3   3   0  ; "check"
0003    MOV      4   1
0004    MOV      5   2
0005    CALL     3   3   3
0006    IST          3
0007    JMP      5 => 0021
0008    UGET     5   1      ; core
0009    TGETS    5   5   1  ; "cache_manifest"
0010    MOV      6   0
0011    UGET     7   2      ; cfg
0012    TGETS    7   7   2  ; "lua_version"
0013    KPRI     8   0
0014    CALL     5   1   4
0015    KPRI     5   0
0016    KSTR     6   3      ; "Error checking manifest: "
0017    MOV      7   4
0018    CAT      6   6   7
0019    KSTR     7   4      ; "type"
0020    RET      5   4
0021 => RET1     1   2

-- BYTECODE -- manif.lua:36-50
0001    UGET     1   0      ; postprocess_check
0002    TGETV    1   1   0
0003    ISF          1
0004    JMP      2 => 0006
0005    RET0     0   1
0006 => TGETS    1   0   0  ; "dependencies"
0007    ISF          1
0008    JMP      2 => 0032
0009    GGET     1   1      ; "pairs"
0010    TGETS    2   0   0  ; "dependencies"
0011    CALL     1   4   2
0012    ISNEXT   4 => 0030
0013 => GGET     6   1      ; "pairs"
0014    MOV      7   5
0015    CALL     6   4   2
0016    ISNEXT   9 => 0028
0017 => GGET    11   1      ; "pairs"
0018    MOV     12  10
0019    CALL    11   4   2
0020    ISNEXT  14 => 0026
0021 => UGET    16   1      ; queries
0022    TGETS   16  16   2  ; "from_persisted_table"
0023    MOV     17  15
0024    CALL    16   2   2
0025    TSETV   16  10  14
0026 => ITERN   14   3   3
0027    ITERL   14 => 0021
0028 => ITERN    9   3   3
0029    ITERL    9 => 0017
0030 => ITERN    4   3   3
0031    ITERL    4 => 0013
0032 => UGET     1   0      ; postprocess_check
0033    KPRI     2   2
0034    TSETV    2   1   0
0035    RET0     0   1

-- BYTECODE -- manif.lua:53-68
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    MOV      3   0
0028    KSTR     4   4      ; "/"
0029    MOV      5   1
0030    CAT      3   3   5
0031    UGET     4   0      ; manif
0032    TGETS    4   4   5  ; "rock_manifest_cache"
0033    TGETV    4   4   3
0034    ISF          4
0035    JMP      5 => 0041
0036    UGET     4   0      ; manif
0037    TGETS    4   4   5  ; "rock_manifest_cache"
0038    TGETV    4   4   3
0039    TGETS    4   4   6  ; "rock_manifest"
0040    RET1     4   2
0041 => UGET     4   1      ; path
0042    TGETS    4   4   7  ; "rock_manifest_file"
0043    MOV      5   0
0044    MOV      6   1
0045    MOV      7   2
0046    CALL     4   2   4
0047    UGET     5   2      ; persist
0048    TGETS    5   5   8  ; "load_into_table"
0049    MOV      6   4
0050    CALL     5   2   2
0051    IST          5
0052    JMP      6 => 0061
0053    KPRI     6   0
0054    KSTR     7   9      ; "rock_manifest file not found for "
0055    MOV      8   0
0056    KSTR     9  10      ; " "
0057    MOV     10   1
0058    KSTR    11  11      ; " - not a LuaRocks tree?"
0059    CAT      7   7  11
0060    RET      6   3
0061 => UGET     6   0      ; manif
0062    TGETS    6   6   5  ; "rock_manifest_cache"
0063    TSETV    5   6   3
0064    TGETS    6   5   6  ; "rock_manifest"
0065    RET1     6   2

-- BYTECODE -- manif.lua:79-141
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   1
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    IST          1
0024    JMP      3 => 0027
0025    UGET     3   0      ; cfg
0026    TGETS    1   3   3  ; "lua_version"
0027 => UGET     3   1      ; core
0028    TGETS    3   3   4  ; "get_cached_manifest"
0029    MOV      4   0
0030    MOV      5   1
0031    CALL     3   2   3
0032    ISF          3
0033    JMP      4 => 0038
0034    UGET     4   2      ; postprocess_dependencies
0035    MOV      5   3
0036    CALL     4   1   2
0037    RET1     3   2
0038 => TNEW     4   4
0039    KSTR     5   5      ; "manifest-"
0040    MOV      6   1
0041    KSTR     7   6      ; ".zip"
0042    CAT      5   5   7
0043    TSETB    5   4   1
0044    KSTR     5   5      ; "manifest-"
0045    MOV      6   1
0046    CAT      5   5   6
0047    TSETB    5   4   2
0048    IST          2
0049    JMP      5 => 0052
0050    KSTR     5   7      ; "manifest"
0051    JMP      6 => 0053
0052 => KPRI     5   0
0053 => TSETB    5   4   3
0054    UGET     5   3      ; dir
0055    TGETS    5   5   8  ; "split_url"
0056    MOV      6   0
0057    CALL     5   3   2
0058    KNIL     7   8
0059    ISNES    5   9      ; "file"
0060    JMP      9 => 0081
0061    GGET     9  10      ; "ipairs"
0062    MOV     10   4
0063    CALL     9   4   2
0064    JMP     12 => 0078
0065 => UGET    14   3      ; dir
0066    TGETS   14  14  11  ; "path"
0067    MOV     15   6
0068    MOV     16  13
0069    CALL    14   2   3
0070    MOV      7  14
0071    UGET    14   4      ; fs
0072    TGETS   14  14  12  ; "exists"
0073    MOV     15   7
0074    CALL    14   2   2
0075    ISF         14
0076    JMP     15 => 0078
0077    JMP      9 => 0109
0078 => ITERC   12   3   3
0079    ITERL   12 => 0065
0080    JMP      9 => 0109
0081 => KNIL     9  10
0082    GGET    11  10      ; "ipairs"
0083    MOV     12   4
0084    CALL    11   4   2
0085    JMP     14 => 0101
0086 => UGET    16   5      ; fetch
0087    TGETS   16  16  13  ; "fetch_caching"
0088    UGET    17   3      ; dir
0089    TGETS   17  17  11  ; "path"
0090    MOV     18   0
0091    MOV     19  15
0092    CALL    17   0   3
0093    CALLM   16   5   0
0094    MOV      8  19
0095    MOV     10  18
0096    MOV      9  17
0097    MOV      7  16
0098    ISF          7
0099    JMP     16 => 0101
0100    JMP     11 => 0103
0101 => ITERC   14   3   3
0102    ITERL   14 => 0086
0103 => IST          7
0104    JMP     11 => 0109
0105    KPRI    11   0
0106    MOV     12   9
0107    MOV     13  10
0108    RET     11   4
0109 => MOV     10   7
0110    TGETS    9   7  14  ; "match"
0111    KSTR    11  15      ; ".*%.zip$"
0112    CALL     9   2   3
0113    ISF          9
0114    JMP     10 => 0163
0115    UGET     9   4      ; fs
0116    TGETS    9   9  16  ; "absolute_name"
0117    MOV     10   7
0118    CALL     9   2   2
0119    MOV      7   9
0120    MOV     10   7
0121    TGETS    9   7  14  ; "match"
0122    KSTR    11  17      ; "(.*)%.zip$"
0123    CALL     9   2   3
0124    IST          8
0125    JMP     10 => 0162
0126    UGET    10   3      ; dir
0127    TGETS   10  10  18  ; "dir_name"
0128    MOV     11   7
0129    CALL    10   2   2
0130    UGET    11   4      ; fs
0131    TGETS   11  11  19  ; "change_dir"
0132    MOV     12  10
0133    CALL    11   1   2
0134    UGET    11   4      ; fs
0135    TGETS   11  11  20  ; "delete"
0136    MOV     12   9
0137    CALL    11   1   2
0138    UGET    11   4      ; fs
0139    TGETS   11  11  21  ; "unzip"
0140    MOV     12   7
0141    CALL    11   3   2
0142    UGET    13   4      ; fs
0143    TGETS   13  13  22  ; "pop_dir"
0144    CALL    13   1   1
0145    IST         11
0146    JMP     13 => 0162
0147    UGET    13   4      ; fs
0148    TGETS   13  13  20  ; "delete"
0149    MOV     14   7
0150    CALL    13   1   2
0151    UGET    13   4      ; fs
0152    TGETS   13  13  20  ; "delete"
0153    MOV     14   7
0154    KSTR    15  23      ; ".timestamp"
0155    CAT     14  14  15
0156    CALL    13   1   2
0157    KPRI    13   0
0158    KSTR    14  24      ; "Failed extracting manifest file: "
0159    MOV     15  12
0160    CAT     14  14  15
0161    RET     13   3
0162 => MOV      7   9
0163 => UGET     9   1      ; core
0164    TGETS    9   9  25  ; "manifest_loader"
0165    MOV     10   7
0166    MOV     11   0
0167    MOV     12   1
0168    CALL     9   4   4
0169    IST          9
0170    JMP     12 => 0175
0171    KPRI    12   0
0172    MOV     13  10
0173    MOV     14  11
0174    RET     12   4
0175 => UGET    12   2      ; postprocess_dependencies
0176    MOV     13   9
0177    CALL    12   1   2
0178    UGET    12   6      ; check_manifest
0179    MOV     13   0
0180    MOV     14   9
0181    MOV     15  10
0182    CALLT   12   4

-- BYTECODE -- manif.lua:147-153
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "string"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    ISNES    0   3      ; "bin"
0022    JMP      2 => 0025
0023    KSTR     2   4      ; "command"
0024    JMP      3 => 0026
0025 => KSTR     2   5      ; "module"
0026 => ISNES    2   4      ; "command"
0027    JMP      3 => 0030
0028    ISTC     3   1
0029    JMP      3 => 0034
0030 => UGET     3   0      ; path
0031    TGETS    3   3   6  ; "path_to_module"
0032    MOV      4   1
0033    CALL     3   2   2
0034 => MOV      4   2
0035    MOV      5   3
0036    RET      4   3

-- BYTECODE -- manif.lua:155-161
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    UGET     3   0      ; path
0022    TGETS    3   3   3  ; "rocks_dir"
0023    ISTC     4   2
0024    JMP      4 => 0027
0025    UGET     4   1      ; cfg
0026    TGETS    4   4   4  ; "root_dir"
0027 => CALL     3   2   2
0028    UGET     4   2      ; manif
0029    TGETS    4   4   5  ; "load_manifest"
0030    MOV      5   3
0031    CALL     4   2   2
0032    ISFC     5   4
0033    JMP      5 => 0039
0034    MOV      5   0
0035    KSTR     6   6      ; "s"
0036    CAT      5   5   6
0037    TGETV    5   4   5
0038    TGETV    5   5   1
0039 => RET1     5   2

-- BYTECODE -- manif.lua:170-175
0001    UGET     3   0      ; get_providers
0002    MOV      4   0
0003    MOV      5   1
0004    MOV      6   2
0005    CALL     3   2   4
0006    ISF          3
0007    JMP      4 => 0013
0008    TGETB    4   3   1
0009    MOV      5   4
0010    TGETS    4   4   0  ; "match"
0011    KSTR     6   1      ; "([^/]*)/([^/]*)"
0012    CALLT    4   3
0013 => RET0     0   1

-- BYTECODE -- manif.lua:177-182
0001    UGET     3   0      ; get_providers
0002    MOV      4   0
0003    MOV      5   1
0004    MOV      6   2
0005    CALL     3   2   4
0006    ISF          3
0007    JMP      4 => 0016
0008    TGETB    4   3   2
0009    ISF          4
0010    JMP      5 => 0016
0011    TGETB    4   3   2
0012    MOV      5   4
0013    TGETS    4   4   0  ; "match"
0014    KSTR     6   1      ; "([^/]*)/([^/]*)"
0015    CALLT    4   3
0016 => RET0     0   1

-- BYTECODE -- manif.lua:193-226
0001    UGET     5   0      ; path
0002    TGETS    5   5   0  ; "rocks_dir"
0003    ISTC     6   4
0004    JMP      6 => 0007
0005    UGET     6   1      ; cfg
0006    TGETS    6   6   1  ; "root_dir"
0007 => CALL     5   2   2
0008    UGET     6   2      ; manif
0009    TGETS    6   6   2  ; "load_manifest"
0010    MOV      7   5
0011    CALL     6   2   2
0012    TGETS    7   6   3  ; "repository"
0013    TGETV    7   7   0
0014    TGETV    7   7   1
0015    TGETB    7   7   1
0016    MOV      8   2
0017    KSTR     9   4      ; "s"
0018    CAT      8   8   9
0019    TGETV    8   7   8
0020    TGETV    8   8   3
0021    ISNES    2   5      ; "command"
0022    JMP      9 => 0026
0023    KSTR     9   6      ; "bin"
0024    MOV     10   8
0025    RET      9   3
0026 => MOV     10   8
0027    TGETS    9   8   7  ; "match"
0028    KSTR    11   8      ; "%."
0029    UGET    12   1      ; cfg
0030    TGETS   12  12   9  ; "lua_extension"
0031    KSTR    13  10      ; "$"
0032    CAT     11  11  13
0033    CALL     9   2   3
0034    ISF          9
0035    JMP     10 => 0040
0036    KSTR     9  11      ; "lua"
0037    MOV     10   8
0038    RET      9   3
0039    JMP      9 => 0053
0040 => MOV     10   8
0041    TGETS    9   8   7  ; "match"
0042    KSTR    11   8      ; "%."
0043    UGET    12   1      ; cfg
0044    TGETS   12  12  12  ; "lib_extension"
0045    KSTR    13  10      ; "$"
0046    CAT     11  11  13
0047    CALL     9   2   3
0048    ISF          9
0049    JMP     10 => 0053
0050    KSTR     9  13      ; "lib"
0051    MOV     10   8
0052    RET      9   3
0053 => UGET     9   2      ; manif
0054    TGETS    9   9  14  ; "load_rock_manifest"
0055    MOV     10   0
0056    MOV     11   1
0057    ISFC    12   4
0058    JMP     12 => 0060
0059    TGETS   12   4  15  ; "root"
0060 => CALL     9   2   4
0061    TGETS   10   9  13  ; "lib"
0062    MOV     12   8
0063    TGETS   11   8  16  ; "gmatch"
0064    KSTR    13  17      ; "[^/]+"
0065    CALL    11   4   3
0066    JMP     14 => 0077
0067 => GGET    15  18      ; "type"
0068    MOV     16  10
0069    CALL    15   2   2
0070    ISNES   15  19      ; "table"
0071    JMP     15 => 0074
0072    TGETV   10  10  14
0073    JMP     15 => 0077
0074 => KSTR    15  11      ; "lua"
0075    MOV     16   8
0076    RET     15   3
0077 => ITERC   14   2   3
0078    ITERL   14 => 0067
0079    GGET    11  18      ; "type"
0080    MOV     12  10
0081    CALL    11   2   2
0082    ISNES   11  20      ; "string"
0083    JMP     11 => 0086
0084    KSTR    11  13      ; "lib"
0085    JMP     12 => 0087
0086 => KSTR    11  11      ; "lua"
0087 => MOV     12   8
0088    RET     11   3

-- BYTECODE -- manif.lua:244-264
0001    UGET     1   0      ; manif
0002    TGETS    1   1   0  ; "load_manifest"
0003    UGET     2   1      ; path
0004    TGETS    2   2   1  ; "rocks_dir"
0005    MOV      3   0
0006    CALL     2   0   2
0007    CALLM    1   2   0
0008    ISF          1
0009    JMP      2 => 0055
0010    TGETS    2   1   2  ; "repository"
0011    UGET     3   2      ; name
0012    TGETV    2   2   3
0013    ISF          2
0014    JMP      3 => 0055
0015    GGET     2   3      ; "pairs"
0016    TGETS    3   1   2  ; "repository"
0017    UGET     4   2      ; name
0018    TGETV    3   3   4
0019    CALL     2   4   2
0020    ISNEXT   5 => 0053
0021 => UGET     6   3      ; dep
0022    TGETS    6   6   4  ; "namespace"
0023    ISF          6
0024    JMP      7 => 0051
0025    UGET     6   1      ; path
0026    TGETS    6   6   5  ; "rock_namespace_file"
0027    UGET     7   2      ; name
0028    MOV      8   5
0029    MOV      9   0
0030    CALL     6   2   4
0031    GGET     7   6      ; "io"
0032    TGETS    7   7   7  ; "open"
0033    MOV      8   6
0034    KSTR     9   8      ; "r"
0035    CALL     7   2   3
0036    ISF          7
0037    JMP      8 => 0053
0038    MOV      9   7
0039    TGETS    8   7   9  ; "read"
0040    KSTR    10  10      ; "*a"
0041    CALL     8   2   3
0042    MOV     10   7
0043    TGETS    9   7  11  ; "close"
0044    CALL     9   1   2
0045    UGET     9   4      ; namespace
0046    ISNEV    8   9
0047    JMP      9 => 0053
0048    UGET     9   5      ; version_set
0049    TSETV    0   9   5
0050    JMP      6 => 0053
0051 => UGET     6   5      ; version_set
0052    TSETV    0   6   5
0053 => ITERN    5   2   3
0054    ITERL    5 => 0021
0055 => RET0     0   1

-- BYTECODE -- manif.lua:236-267
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "string"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    TGETS    2   0   4  ; "name"
0022    TGETS    3   0   5  ; "namespace"
0023    TNEW     4   0
0024    UGET     5   0      ; path
0025    TGETS    5   5   6  ; "map_trees"
0026    MOV      6   1
0027    FNEW     7   7      ; manif.lua:244
0028    CALL     5   1   3
0029    UGET     5   2      ; util
0030    TGETS    5   5   8  ; "keys"
0031    MOV      6   4
0032    CALL     5   2   2
0033    MOV      6   4
0034    UCLO     0 => 0035
0035 => RET      5   3

-- BYTECODE -- manif.lua:0-270
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.manif"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.persist"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fetch"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.dir"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.core.cfg"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.path"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.util"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.queries"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.type.manifest"
0031    CALL    10   2   2
0032    TGETS   11   1  11  ; "cache_manifest"
0033    TSETS   11   0  11  ; "cache_manifest"
0034    TGETS   11   1  12  ; "load_rocks_tree_manifests"
0035    TSETS   11   0  12  ; "load_rocks_tree_manifests"
0036    TGETS   11   1  13  ; "scan_dependencies"
0037    TSETS   11   0  13  ; "scan_dependencies"
0038    TNEW    11   0
0039    TSETS   11   0  14  ; "rock_manifest_cache"
0040    FNEW    11  15      ; manif.lua:24
0041    KPRI    12   0
0042    GGET    13  16      ; "setmetatable"
0043    TNEW    14   0
0044    TDUP    15  17
0045    CALL    13   2   3
0046    FNEW    12  18      ; manif.lua:36
0047    UCLO    13 => 0048
0048 => FNEW    13  20      ; manif.lua:53
0049    TSETS   13   0  19  ; "load_rock_manifest"
0050    FNEW    13  22      ; manif.lua:79
0051    TSETS   13   0  21  ; "load_manifest"
0052    FNEW    13  24      ; manif.lua:147
0053    TSETS   13   0  23  ; "get_provided_item"
0054    FNEW    13  25      ; manif.lua:155
0055    FNEW    14  27      ; manif.lua:170
0056    TSETS   14   0  26  ; "get_current_provider"
0057    FNEW    14  29      ; manif.lua:177
0058    TSETS   14   0  28  ; "get_next_provider"
0059    FNEW    14  31      ; manif.lua:193
0060    TSETS   14   0  30  ; "get_providing_file"
0061    FNEW    14  33      ; manif.lua:236
0062    TSETS   14   0  32  ; "get_versions"
0063    UCLO     0 => 0064
0064 => RET1     0   2

-----------------------
-- BYTECODE -- repos.lua:20-26
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "string"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    ISNES    0   3      ; "bin"
0022    JMP      2 => 0025
0023    KSTR     2   4      ; "command"
0024    JMP      3 => 0026
0025 => KSTR     2   5      ; "module"
0026 => ISNES    2   4      ; "command"
0027    JMP      3 => 0030
0028    ISTC     3   1
0029    JMP      3 => 0034
0030 => UGET     3   0      ; path
0031    TGETS    3   3   6  ; "path_to_module"
0032    MOV      4   1
0033    CALL     3   2   2
0034 => MOV      4   2
0035    MOV      5   3
0036    RET      4   3

-- BYTECODE -- repos.lua:49-54
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISNES    2   2      ; "string"
0006    JMP      2 => 0013
0007    MOV      3   0
0008    TGETS    2   0   3  ; "match"
0009    KSTR     4   4      ; "/"
0010    CALL     2   2   3
0011    NOT      2   2
0012    JMP      3 => 0016
0013 => KPRI     2   1
0014    JMP      3 => 0016
0015    KPRI     2   2
0016 => CALL     1   1   2
0017    UGET     1   0      ; fs
0018    TGETS    1   1   5  ; "list_dir"
0019    UGET     2   1      ; path
0020    TGETS    2   2   6  ; "versions_dir"
0021    MOV      3   0
0022    CALL     2   0   2
0023    CALLM    1   2   0
0024    ISF          1
0025    JMP      2 => 0032
0026    LEN      2   1
0027    KSHORT   3   0
0028    ISGE     3   2
0029    JMP      2 => 0032
0030    ISTC     2   1
0031    JMP      2 => 0033
0032 => KPRI     2   0
0033 => RET1     2   2

-- BYTECODE -- repos.lua:62-67
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISNES    3   2      ; "string"
0006    JMP      3 => 0013
0007    MOV      4   0
0008    TGETS    3   0   3  ; "match"
0009    KSTR     5   4      ; "/"
0010    CALL     3   2   3
0011    NOT      3   3
0012    JMP      4 => 0016
0013 => KPRI     3   1
0014    JMP      4 => 0016
0015    KPRI     3   2
0016 => CALL     2   1   2
0017    GGET     2   0      ; "assert"
0018    GGET     3   1      ; "type"
0019    MOV      4   1
0020    CALL     3   2   2
0021    ISEQS    3   2      ; "string"
0022    JMP      3 => 0025
0023    KPRI     3   1
0024    JMP      4 => 0026
0025 => KPRI     3   2
0026 => CALL     2   1   2
0027    UGET     2   0      ; fs
0028    TGETS    2   2   5  ; "is_dir"
0029    UGET     3   1      ; path
0030    TGETS    3   3   6  ; "install_dir"
0031    MOV      4   0
0032    MOV      5   1
0033    CALL     3   0   3
0034    CALLMT   2   0

-- BYTECODE -- repos.lua:76-91
0001    GGET     2   0      ; "pairs"
0002    MOV      3   0
0003    CALL     2   4   2
0004    ISNEXT   5 => 0038
0005 => ISF          1
0006    JMP      7 => 0012
0007    MOV      7   1
0008    KSTR     8   1      ; "/"
0009    CAT      7   7   8
0010    IST          7
0011    JMP      8 => 0013
0012 => KSTR     7   2      ; ""
0013 => MOV      8   5
0014    CAT      7   7   8
0015    KNIL     8   9
0016    GGET    10   3      ; "type"
0017    MOV     11   6
0018    CALL    10   2   2
0019    ISNES   10   4      ; "table"
0020    JMP     10 => 0028
0021    UGET    10   0      ; do_recurse_rock_manifest_entry
0022    MOV     11   6
0023    MOV     12   7
0024    CALL    10   3   3
0025    MOV      9  11
0026    MOV      8  10
0027    JMP     10 => 0033
0028 => UGET    10   1      ; action
0029    MOV     11   7
0030    CALL    10   3   2
0031    MOV      9  11
0032    MOV      8  10
0033 => ISF          9
0034    JMP     10 => 0038
0035    KPRI    10   0
0036    MOV     11   9
0037    RET     10   3
0038 => ITERN    5   3   3
0039    ITERL    5 => 0005
0040    KPRI     2   2
0041    RET1     2   2

-- BYTECODE -- repos.lua:69-93
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   1
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "function"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    ISNEP    0   0
0012    JMP      2 => 0015
0013    KPRI     2   2
0014    UCLO     0 => 0020
0015 => FNEW     2   3      ; repos.lua:76
0016    MOV      3   2
0017    MOV      4   0
0018    UCLO     0 => 0019
0019 => CALLT    3   2
0020 => RET1     2   2

-- BYTECODE -- repos.lua:97-101
0001    UGET     1   0      ; get_provided_item
0002    UGET     2   1      ; deploy_type
0003    MOV      3   0
0004    CALL     1   3   3
0005    UGET     3   2      ; result
0006    TSETV    0   3   2
0007    KPRI     3   2
0008    RET1     3   2

-- BYTECODE -- repos.lua:95-103
0001    TGETV    3   1   2
0002    ISF          3
0003    JMP      4 => 0009
0004    UGET     3   0      ; repos
0005    TGETS    3   3   0  ; "recurse_rock_manifest_entry"
0006    TGETV    4   1   2
0007    FNEW     5   1      ; repos.lua:97
0008    CALL     3   1   3
0009 => UCLO     0 => 0010
0010 => RET0     0   1

-- BYTECODE -- repos.lua:114-124
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISNES    3   2      ; "string"
0006    JMP      3 => 0013
0007    MOV      4   0
0008    TGETS    3   0   3  ; "match"
0009    KSTR     5   4      ; "/"
0010    CALL     3   2   3
0011    NOT      3   3
0012    JMP      4 => 0016
0013 => KPRI     3   1
0014    JMP      4 => 0016
0015    KPRI     3   2
0016 => CALL     2   1   2
0017    GGET     2   0      ; "assert"
0018    GGET     3   1      ; "type"
0019    MOV      4   1
0020    CALL     3   2   2
0021    ISEQS    3   2      ; "string"
0022    JMP      3 => 0025
0023    KPRI     3   1
0024    JMP      4 => 0026
0025 => KPRI     3   2
0026 => CALL     2   1   2
0027    TNEW     2   0
0028    UGET     3   0      ; manif
0029    TGETS    3   3   5  ; "load_rock_manifest"
0030    MOV      4   0
0031    MOV      5   1
0032    CALL     3   2   3
0033    IST          3
0034    JMP      4 => 0036
0035    RET1     2   2
0036 => UGET     4   1      ; store_package_data
0037    MOV      5   2
0038    MOV      6   3
0039    KSTR     7   6      ; "lib"
0040    CALL     4   1   4
0041    UGET     4   1      ; store_package_data
0042    MOV      5   2
0043    MOV      6   3
0044    KSTR     7   7      ; "lua"
0045    CALL     4   1   4
0046    RET1     2   2

-- BYTECODE -- repos.lua:135-144
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISNES    3   2      ; "string"
0006    JMP      3 => 0013
0007    MOV      4   0
0008    TGETS    3   0   3  ; "match"
0009    KSTR     5   4      ; "/"
0010    CALL     3   2   3
0011    NOT      3   3
0012    JMP      4 => 0016
0013 => KPRI     3   1
0014    JMP      4 => 0016
0015    KPRI     3   2
0016 => CALL     2   1   2
0017    GGET     2   0      ; "assert"
0018    GGET     3   1      ; "type"
0019    MOV      4   1
0020    CALL     3   2   2
0021    ISEQS    3   2      ; "string"
0022    JMP      3 => 0025
0023    KPRI     3   1
0024    JMP      4 => 0026
0025 => KPRI     3   2
0026 => CALL     2   1   2
0027    TNEW     2   0
0028    UGET     3   0      ; manif
0029    TGETS    3   3   5  ; "load_rock_manifest"
0030    MOV      4   0
0031    MOV      5   1
0032    CALL     3   2   3
0033    IST          3
0034    JMP      4 => 0036
0035    RET1     2   2
0036 => UGET     4   1      ; store_package_data
0037    MOV      5   2
0038    MOV      6   3
0039    KSTR     7   6      ; "bin"
0040    CALL     4   1   4
0041    RET1     2   2

-- BYTECODE -- repos.lua:152-166
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISNES    3   2      ; "string"
0006    JMP      3 => 0013
0007    MOV      4   0
0008    TGETS    3   0   3  ; "match"
0009    KSTR     5   4      ; "/"
0010    CALL     3   2   3
0011    NOT      3   3
0012    JMP      4 => 0016
0013 => KPRI     3   1
0014    JMP      4 => 0016
0015    KPRI     3   2
0016 => CALL     2   1   2
0017    GGET     2   0      ; "assert"
0018    GGET     3   1      ; "type"
0019    MOV      4   1
0020    CALL     3   2   2
0021    ISEQS    3   2      ; "string"
0022    JMP      3 => 0025
0023    KPRI     3   1
0024    JMP      4 => 0026
0025 => KPRI     3   2
0026 => CALL     2   1   2
0027    UGET     2   0      ; manif
0028    TGETS    2   2   5  ; "load_rock_manifest"
0029    MOV      3   0
0030    MOV      4   1
0031    CALL     2   2   3
0032    ISF          2
0033    JMP      3 => 0056
0034    TGETS    3   2   6  ; "bin"
0035    ISF          3
0036    JMP      4 => 0056
0037    GGET     3   7      ; "pairs"
0038    TGETS    4   2   6  ; "bin"
0039    CALL     3   4   2
0040    ISNEXT   6 => 0054
0041 => UGET     8   1      ; fs
0042    TGETS    8   8   8  ; "is_actual_binary"
0043    UGET     9   2      ; dir
0044    TGETS    9   9   9  ; "path"
0045    UGET    10   3      ; cfg
0046    TGETS   10  10  10  ; "deploy_bin_dir"
0047    MOV     11   6
0048    CALL     9   0   3
0049    CALLM    8   2   0
0050    ISF          8
0051    JMP      9 => 0054
0052    KPRI     8   2
0053    RET1     8   2
0054 => ITERN    6   3   3
0055    ITERL    6 => 0041
0056 => KPRI     3   1
0057    RET1     3   2

-- BYTECODE -- repos.lua:168-193
0001    GGET     2   0      ; "assert"
0002    MOV      4   0
0003    TGETS    3   0   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "rockspec"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "string"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    TGETS    2   0   4  ; "hooks"
0022    IST          2
0023    JMP      3 => 0026
0024    KPRI     3   2
0025    RET1     3   2
0026 => UGET     3   0      ; cfg
0027    TGETS    3   3   5  ; "hooks_enabled"
0028    ISNEP    3   1
0029    JMP      3 => 0033
0030    KPRI     3   0
0031    KSTR     4   6      ; "This rockspec contains hooks, which are "~
0032    RET      3   3
0033 => TGETS    3   2   7  ; "substituted_variables"
0034    IST          3
0035    JMP      3 => 0043
0036    UGET     3   1      ; util
0037    TGETS    3   3   8  ; "variable_substitutions"
0038    MOV      4   2
0039    TGETS    5   0   9  ; "variables"
0040    CALL     3   1   3
0041    KPRI     3   2
0042    TSETS    3   2   7  ; "substituted_variables"
0043 => TGETV    3   2   1
0044    ISF          3
0045    JMP      4 => 0062
0046    UGET     4   1      ; util
0047    TGETS    4   4  10  ; "printout"
0048    MOV      5   3
0049    CALL     4   1   2
0050    UGET     4   2      ; fs
0051    TGETS    4   4  11  ; "execute"
0052    MOV      5   3
0053    CALL     4   2   2
0054    IST          4
0055    JMP      4 => 0062
0056    KPRI     4   0
0057    KSTR     5  12      ; "Failed running "
0058    MOV      6   1
0059    KSTR     7  13      ; " hook."
0060    CAT      5   5   7
0061    RET      4   3
0062 => KPRI     4   2
0063    RET1     4   2

-- BYTECODE -- repos.lua:195-205
0001    GGET     1   0      ; "assert"
0002    MOV      3   0
0003    TGETS    2   0   1  ; "type"
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "rockspec"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; cfg
0012    TGETS    1   1   3  ; "wrap_bin_scripts"
0013    ISEQP    1   0
0014    JMP      1 => 0018
0015    UGET     1   0      ; cfg
0016    TGETS    1   1   3  ; "wrap_bin_scripts"
0017    RET1     1   2
0018 => TGETS    1   0   4  ; "deploy"
0019    ISF          1
0020    JMP      2 => 0027
0021    TGETS    1   0   4  ; "deploy"
0022    TGETS    1   1   3  ; "wrap_bin_scripts"
0023    ISNEP    1   1
0024    JMP      1 => 0027
0025    KPRI     1   1
0026    RET1     1   2
0027 => KPRI     1   2
0028    RET1     1   2

-- BYTECODE -- repos.lua:207-220
0001    TNEW     2   3
0002    TSETB    0   2   1
0003    ISF          1
0004    JMP      3 => 0015
0005    ISEQS    1   0      ; ""
0006    JMP      3 => 0015
0007    GGET     3   1      ; "table"
0008    TGETS    3   3   2  ; "insert"
0009    MOV      4   2
0010    KSHORT   5   1
0011    MOV      6   0
0012    MOV      7   1
0013    CAT      6   6   7
0014    CALL     3   1   4
0015 => GGET     3   3      ; "ipairs"
0016    MOV      4   2
0017    CALL     3   4   2
0018    JMP      6 => 0026
0019 => UGET     8   0      ; fs
0020    TGETS    8   8   4  ; "exists"
0021    MOV      9   7
0022    CALL     8   2   2
0023    ISF          8
0024    JMP      9 => 0026
0025    RET1     7   2
0026 => ITERC    6   3   3
0027    ITERL    6 => 0019
0028    KPRI     3   0
0029    GGET     4   1      ; "table"
0030    TGETS    4   4   5  ; "concat"
0031    MOV      5   2
0032    KSTR     6   6      ; ", "
0033    CALL     4   2   3
0034    KSTR     5   7      ; " not found"
0035    CAT      4   4   5
0036    RET      3   3

-- BYTECODE -- repos.lua:222-228
0001    UGET     2   0      ; find_suffixed
0002    MOV      3   0
0003    MOV      4   1
0004    CALL     2   3   3
0005    IST          2
0006    JMP      4 => 0009
0007    KSTR     4   0      ; ""
0008    RET1     4   2
0009 => MOV      5   2
0010    TGETS    4   2   1  ; "sub"
0011    LEN      6   0
0012    ADDVN    6   6   0  ; 1
0013    CALLT    4   3

-- BYTECODE -- repos.lua:236-247
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "string"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   2      ; "string"
0016    JMP      6 => 0019
0017    KPRI     6   1
0018    JMP      7 => 0020
0019 => KPRI     6   2
0020 => CALL     5   1   2
0021    GGET     5   0      ; "assert"
0022    GGET     6   1      ; "type"
0023    MOV      7   2
0024    CALL     6   2   2
0025    ISEQS    6   2      ; "string"
0026    JMP      6 => 0029
0027    KPRI     6   1
0028    JMP      7 => 0030
0029 => KPRI     6   2
0030 => CALL     5   1   2
0031    GGET     5   0      ; "assert"
0032    GGET     6   1      ; "type"
0033    MOV      7   3
0034    CALL     6   2   2
0035    ISEQS    6   2      ; "string"
0036    JMP      6 => 0039
0037    KPRI     6   1
0038    JMP      7 => 0040
0039 => KPRI     6   2
0040 => CALL     5   1   2
0041    IST          4
0042    JMP      5 => 0045
0043    UGET     5   0      ; cfg
0044    TGETS    4   5   3  ; "root_dir"
0045 => UGET     5   1      ; path
0046    KSTR     6   4      ; "deploy_"
0047    MOV      7   2
0048    KSTR     8   5      ; "_dir"
0049    CAT      6   6   8
0050    TGETV    5   5   6
0051    MOV      6   4
0052    CALL     5   2   2
0053    UGET     6   2      ; dir
0054    TGETS    6   6   6  ; "path"
0055    MOV      7   5
0056    MOV      8   3
0057    CALL     6   2   3
0058    UGET     7   1      ; path
0059    TGETS    7   7   7  ; "versioned_name"
0060    MOV      8   6
0061    MOV      9   5
0062    MOV     10   0
0063    MOV     11   1
0064    CALL     7   2   5
0065    TDUP     8   8
0066    TSETS    6   8   9  ; "nv"
0067    TSETS    7   8  10  ; "v"
0068    RET1     8   2

-- BYTECODE -- repos.lua:249-261
0001    UGET     4   0      ; get_provided_item
0002    MOV      5   2
0003    MOV      6   3
0004    CALL     4   3   3
0005    UGET     6   1      ; manif
0006    TGETS    6   6   0  ; "get_current_provider"
0007    MOV      7   4
0008    MOV      8   5
0009    CALL     6   3   3
0010    ISF          6
0011    JMP      8 => 0025
0012    ISLT     0   6
0013    JMP      8 => 0025
0014    ISNEV    0   6
0015    JMP      8 => 0031
0016    ISEQV    1   7
0017    JMP      8 => 0025
0018    UGET     8   2      ; vers
0019    TGETS    8   8   1  ; "compare_versions"
0020    MOV      9   1
0021    MOV     10   7
0022    CALL     8   2   3
0023    ISF          8
0024    JMP      9 => 0031
0025 => KSTR     8   2      ; "nv"
0026    MOV      9   6
0027    MOV     10   7
0028    MOV     11   5
0029    RET      8   5
0030    JMP      8 => 0036
0031 => KSTR     8   3      ; "v"
0032    MOV      9   6
0033    MOV     10   7
0034    MOV     11   5
0035    RET      8   5
0036 => RET0     0   1

-- BYTECODE -- repos.lua:263-281
0001    IST          0
0002    JMP      2 => 0008
0003    UGET     2   0      ; fs
0004    TGETS    2   2   0  ; "delete"
0005    MOV      3   1
0006    CALL     2   1   2
0007    RET0     0   1
0008 => UGET     2   0      ; fs
0009    TGETS    2   2   1  ; "exists"
0010    MOV      3   1
0011    CALL     2   2   2
0012    ISF          2
0013    JMP      3 => 0043
0014    MOV      2   1
0015 => LOOP     3 => 0025
0016    MOV      3   2
0017    KSTR     4   2      ; "~"
0018    CAT      2   3   4
0019    UGET     3   0      ; fs
0020    TGETS    3   3   1  ; "exists"
0021    MOV      4   2
0022    CALL     3   2   2
0023    IST          3
0024    JMP      3 => 0015
0025 => UGET     3   1      ; util
0026    TGETS    3   3   3  ; "warning"
0027    MOV      4   1
0028    KSTR     5   4      ; " is not tracked by this installation of "~
0029    MOV      6   2
0030    CAT      4   4   6
0031    CALL     3   1   2
0032    GGET     3   5      ; "os"
0033    TGETS    3   3   6  ; "rename"
0034    MOV      4   1
0035    MOV      5   2
0036    CALL     3   3   3
0037    IST          3
0038    JMP      5 => 0042
0039    KPRI     5   0
0040    MOV      6   4
0041    RET      5   3
0042 => RET1     2   2
0043 => RET0     0   1

-- BYTECODE -- repos.lua:287-297
0001    UGET     1   0      ; mkdirs
0002    TGETV    1   1   0
0003    ISF          1
0004    JMP      2 => 0007
0005    KPRI     1   2
0006    RET1     1   2
0007 => UGET     1   1      ; fs
0008    TGETS    1   1   0  ; "make_dir"
0009    MOV      2   0
0010    CALL     1   3   2
0011    IST          1
0012    JMP      3 => 0016
0013    KPRI     3   0
0014    MOV      4   2
0015    RET      3   3
0016 => UGET     3   0      ; mkdirs
0017    KPRI     4   2
0018    TSETV    4   3   0
0019    KPRI     3   2
0020    RET1     3   2

-- BYTECODE -- repos.lua:299-320
0001    UGET     1   0      ; memoize_mkdir
0002    UGET     2   1      ; dir
0003    TGETS    2   2   0  ; "dir_name"
0004    TGETS    3   0   1  ; "dst"
0005    CALL     2   0   2
0006    CALLM    1   3   0
0007    IST          1
0008    JMP      3 => 0012
0009    KPRI     3   0
0010    MOV      4   2
0011    RET      3   3
0012 => UGET     3   2      ; backup_existing
0013    TGETS    4   0   2  ; "backup"
0014    TGETS    5   0   3  ; "realdst"
0015    IST          5
0016    JMP      6 => 0018
0017    TGETS    5   0   1  ; "dst"
0018 => CALL     3   3   3
0019    ISF          4
0020    JMP      5 => 0024
0021    KPRI     5   0
0022    MOV      6   4
0023    RET      5   3
0024 => ISF          3
0025    JMP      5 => 0027
0026    TSETS    3   0   4  ; "backup_file"
0027 => TGETS    5   0   5  ; "fn"
0028    TGETS    6   0   6  ; "src"
0029    TGETS    7   0   1  ; "dst"
0030    TGETS    8   0   2  ; "backup"
0031    CALL     5   3   4
0032    MOV      4   6
0033    MOV      1   5
0034    IST          1
0035    JMP      5 => 0039
0036    KPRI     5   0
0037    MOV      6   4
0038    RET      5   3
0039 => UGET     5   3      ; rmdirs
0040    UGET     6   1      ; dir
0041    TGETS    6   6   0  ; "dir_name"
0042    TGETS    7   0   6  ; "src"
0043    CALL     6   2   2
0044    KPRI     7   2
0045    TSETV    7   5   6
0046    KPRI     5   2
0047    RET1     5   2

-- BYTECODE -- repos.lua:322-326
0001    GGET     0   0      ; "pairs"
0002    UGET     1   0      ; rmdirs
0003    CALL     0   4   2
0004    ISNEXT   3 => 0009
0005 => UGET     5   1      ; fs
0006    TGETS    5   5   1  ; "remove_dir_tree_if_empty"
0007    MOV      6   3
0008    CALL     5   1   2
0009 => ITERN    3   3   3
0010    ITERL    3 => 0005
0011    RET0     0   1

-- BYTECODE -- repos.lua:283-329
0001    TNEW     0   0
0002    TNEW     1   0
0003    FNEW     2   0      ; repos.lua:287
0004    FNEW     3   1      ; repos.lua:299
0005    FNEW     4   2      ; repos.lua:322
0006    MOV      5   3
0007    MOV      6   4
0008    UCLO     0 => 0009
0009 => RET      5   3

-- BYTECODE -- repos.lua:331-338
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "delete"
0003    TGETS    2   0   1  ; "dst"
0004    CALL     1   1   2
0005    TGETS    1   0   2  ; "backup_file"
0006    ISF          1
0007    JMP      2 => 0013
0008    GGET     1   3      ; "os"
0009    TGETS    1   1   4  ; "rename"
0010    TGETS    2   0   2  ; "backup_file"
0011    TGETS    3   0   1  ; "dst"
0012    CALL     1   1   3
0013 => UGET     1   0      ; fs
0014    TGETS    1   1   5  ; "remove_dir_tree_if_empty"
0015    UGET     2   1      ; dir
0016    TGETS    2   2   6  ; "dir_name"
0017    TGETS    3   0   1  ; "dst"
0018    CALL     2   0   2
0019    CALLM    1   1   0
0020    KPRI     1   2
0021    RET1     1   2

-- BYTECODE -- repos.lua:340-356
0001    TGETS    1   0   0  ; "suffix"
0002    ISF          1
0003    JMP      2 => 0016
0004    UGET     1   0      ; check_suffix
0005    TGETS    2   0   1  ; "src"
0006    TGETS    3   0   0  ; "suffix"
0007    CALL     1   2   3
0008    TGETS    2   0   1  ; "src"
0009    MOV      3   1
0010    CAT      2   2   3
0011    TSETS    2   0   1  ; "src"
0012    TGETS    2   0   2  ; "dst"
0013    MOV      3   1
0014    CAT      2   2   3
0015    TSETS    2   0   2  ; "dst"
0016 => UGET     1   1      ; fs
0017    TGETS    1   1   3  ; "exists"
0018    TGETS    2   0   1  ; "src"
0019    CALL     1   2   2
0020    ISF          1
0021    JMP      2 => 0049
0022    UGET     1   1      ; fs
0023    TGETS    1   1   4  ; "make_dir"
0024    UGET     2   2      ; dir
0025    TGETS    2   2   5  ; "dir_name"
0026    TGETS    3   0   2  ; "dst"
0027    CALL     2   0   2
0028    CALLM    1   1   0
0029    UGET     1   1      ; fs
0030    TGETS    1   1   6  ; "delete"
0031    TGETS    2   0   2  ; "dst"
0032    CALL     1   1   2
0033    GGET     1   7      ; "os"
0034    TGETS    1   1   8  ; "rename"
0035    TGETS    2   0   1  ; "src"
0036    TGETS    3   0   2  ; "dst"
0037    CALL     1   3   3
0038    UGET     3   1      ; fs
0039    TGETS    3   3   9  ; "remove_dir_tree_if_empty"
0040    UGET     4   2      ; dir
0041    TGETS    4   4   5  ; "dir_name"
0042    TGETS    5   0   1  ; "src"
0043    CALL     4   0   2
0044    CALLM    3   1   0
0045    MOV      3   1
0046    MOV      4   2
0047    RET      3   3
0048    JMP      1 => 0051
0049 => KPRI     1   2
0050    RET1     1   2
0051 => RET0     0   1

-- BYTECODE -- repos.lua:358-360
0001    UGET     1   0      ; op_rename
0002    TDUP     2   1
0003    TGETS    3   0   0  ; "dst"
0004    TSETS    3   2   2  ; "src"
0005    TGETS    3   0   2  ; "src"
0006    TSETS    3   2   0  ; "dst"
0007    CALLT    1   2

-- BYTECODE -- repos.lua:366-374
0001    GGET     0   0      ; "ipairs"
0002    UGET     1   0      ; deletes
0003    CALL     0   4   2
0004    JMP      3 => 0009
0005 => GGET     5   1      ; "os"
0006    TGETS    5   5   2  ; "remove"
0007    MOV      6   4
0008    CALL     5   1   2
0009 => ITERC    3   3   3
0010    ITERL    3 => 0005
0011    GGET     0   3      ; "pairs"
0012    UGET     1   1      ; rmdirs
0013    CALL     0   4   2
0014    ISNEXT   3 => 0019
0015 => UGET     5   2      ; fs
0016    TGETS    5   5   4  ; "remove_dir_tree_if_empty"
0017    MOV      6   3
0018    CALL     5   1   2
0019 => ITERN    3   3   3
0020    ITERL    3 => 0015
0021    RET0     0   1

-- BYTECODE -- repos.lua:376-385
0001    TGETS    1   0   0  ; "suffix"
0002    ISF          1
0003    JMP      2 => 0012
0004    UGET     1   0      ; check_suffix
0005    TGETS    2   0   1  ; "name"
0006    TGETS    3   0   0  ; "suffix"
0007    CALL     1   2   3
0008    TGETS    2   0   1  ; "name"
0009    MOV      3   1
0010    CAT      2   2   3
0011    TSETS    2   0   1  ; "name"
0012 => GGET     1   2      ; "table"
0013    TGETS    1   1   3  ; "insert"
0014    UGET     2   1      ; deletes
0015    TGETS    3   0   1  ; "name"
0016    CALL     1   1   3
0017    UGET     1   2      ; rmdirs
0018    UGET     2   3      ; dir
0019    TGETS    2   2   4  ; "dir_name"
0020    TGETS    3   0   1  ; "name"
0021    CALL     2   2   2
0022    KPRI     3   2
0023    TSETV    3   1   2
0024    RET0     0   1

-- BYTECODE -- repos.lua:362-388
0001    TNEW     0   0
0002    TNEW     1   0
0003    FNEW     2   0      ; repos.lua:366
0004    FNEW     3   1      ; repos.lua:376
0005    MOV      4   3
0006    MOV      5   2
0007    UCLO     0 => 0008
0008 => RET      4   3

-- BYTECODE -- repos.lua:390-394
0001    KSHORT   3   1
0002    MOV      4   2
0003    KSHORT   5   1
0004    FORI     3 => 0009
0005 => MOV      7   1
0006    TGETV    8   0   6
0007    CALL     7   1   2
0008    FORL     3 => 0005
0009 => RET0     0   1

-- BYTECODE -- repos.lua:415-421
0001    UGET     2   0      ; wrap_bin_scripts
0002    ISF          2
0003    JMP      3 => 0019
0004    UGET     2   1      ; fs
0005    TGETS    2   2   0  ; "is_lua"
0006    MOV      3   0
0007    CALL     2   2   2
0008    ISF          2
0009    JMP      3 => 0019
0010    UGET     2   1      ; fs
0011    TGETS    2   2   1  ; "wrap_script"
0012    MOV      3   0
0013    MOV      4   1
0014    UGET     5   2      ; deps_mode
0015    UGET     6   3      ; name
0016    UGET     7   4      ; version
0017    CALLT    2   6
0018    JMP      2 => 0024
0019 => UGET     2   1      ; fs
0020    TGETS    2   2   2  ; "copy_binary"
0021    MOV      3   0
0022    MOV      4   1
0023    CALLT    2   3
0024 => RET0     0   1

-- BYTECODE -- repos.lua:423-425
0001    UGET     2   0      ; fs
0002    TGETS    2   2   0  ; "move"
0003    MOV      3   0
0004    MOV      4   1
0005    KSTR     5   1      ; "read"
0006    CALLT    2   4

-- BYTECODE -- repos.lua:427-429
0001    UGET     2   0      ; fs
0002    TGETS    2   2   0  ; "move"
0003    MOV      3   0
0004    MOV      4   1
0005    KSTR     5   1      ; "exec"
0006    CALLT    2   4

-- BYTECODE -- repos.lua:433-448
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "path"
0003    UGET     2   1      ; source_dir
0004    MOV      3   0
0005    CALL     1   2   3
0006    UGET     2   2      ; get_deploy_paths
0007    UGET     3   3      ; name
0008    UGET     4   4      ; version
0009    KSTR     5   1      ; "bin"
0010    MOV      6   0
0011    UGET     7   5      ; repo
0012    CALL     2   2   6
0013    UGET     3   6      ; check_spot_if_available
0014    UGET     4   3      ; name
0015    UGET     5   4      ; version
0016    KSTR     6   1      ; "bin"
0017    MOV      7   0
0018    CALL     3   4   5
0019    ISNES    3   2      ; "nv"
0020    JMP      6 => 0042
0021    ISF          4
0022    JMP      6 => 0042
0023    UGET     6   2      ; get_deploy_paths
0024    MOV      7   4
0025    MOV      8   5
0026    KSTR     9   1      ; "bin"
0027    MOV     10   0
0028    UGET    11   5      ; repo
0029    CALL     6   2   6
0030    GGET     7   3      ; "table"
0031    TGETS    7   7   4  ; "insert"
0032    UGET     8   7      ; renames
0033    TDUP     9   5
0034    TGETS   10   6   2  ; "nv"
0035    TSETS   10   9   6  ; "src"
0036    TGETS   10   6   7  ; "v"
0037    TSETS   10   9   8  ; "dst"
0038    UGET    10   8      ; cfg
0039    TGETS   10  10   9  ; "wrapper_suffix"
0040    TSETS   10   9  10  ; "suffix"
0041    CALL     7   1   3
0042 => ISNES    3   2      ; "nv"
0043    JMP      6 => 0047
0044    TGETS    6   2   2  ; "nv"
0045    IST          6
0046    JMP      7 => 0048
0047 => TGETS    6   2   7  ; "v"
0048 => UGET     7   3      ; name
0049    ISNEV    7   4
0050    JMP      7 => 0056
0051    UGET     7   4      ; version
0052    ISNEV    7   5
0053    JMP      7 => 0056
0054    KPRI     7   1
0055    JMP      8 => 0057
0056 => KPRI     7   2
0057 => UGET     8   9      ; wrap_bin_scripts
0058    ISF          8
0059    JMP      9 => 0075
0060    UGET     8  10      ; fs
0061    TGETS    8   8  11  ; "is_lua"
0062    MOV      9   1
0063    CALL     8   2   2
0064    ISF          8
0065    JMP      9 => 0075
0066    MOV      8   6
0067    UGET     9   8      ; cfg
0068    TGETS    9   9   9  ; "wrapper_suffix"
0069    IST          9
0070    JMP     10 => 0072
0071    KSTR     9  12      ; ""
0072 => CAT      8   8   9
0073    IST          8
0074    JMP      9 => 0076
0075 => MOV      8   6
0076 => GGET     9   3      ; "table"
0077    TGETS    9   9   4  ; "insert"
0078    UGET    10  11      ; installs
0079    TDUP    11  13
0080    UGET    12  12      ; install_binary
0081    TSETS   12  11  14  ; "fn"
0082    TSETS    1  11   6  ; "src"
0083    TSETS    6  11   8  ; "dst"
0084    TSETS    7  11  15  ; "backup"
0085    TSETS    8  11  16  ; "realdst"
0086    CALL     9   1   3
0087    RET0     0   1

-- BYTECODE -- repos.lua:453-467
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "path"
0003    UGET     2   1      ; source_dir
0004    MOV      3   0
0005    CALL     1   2   3
0006    UGET     2   2      ; get_deploy_paths
0007    UGET     3   3      ; name
0008    UGET     4   4      ; version
0009    KSTR     5   1      ; "lua"
0010    MOV      6   0
0011    UGET     7   5      ; repo
0012    CALL     2   2   6
0013    UGET     3   6      ; check_spot_if_available
0014    UGET     4   3      ; name
0015    UGET     5   4      ; version
0016    KSTR     6   1      ; "lua"
0017    MOV      7   0
0018    CALL     3   4   5
0019    ISNES    3   2      ; "nv"
0020    JMP      6 => 0063
0021    ISF          4
0022    JMP      6 => 0063
0023    UGET     6   2      ; get_deploy_paths
0024    MOV      7   4
0025    MOV      8   5
0026    KSTR     9   1      ; "lua"
0027    MOV     10   0
0028    UGET    11   5      ; repo
0029    CALL     6   2   6
0030    GGET     7   3      ; "table"
0031    TGETS    7   7   4  ; "insert"
0032    UGET     8   7      ; renames
0033    TDUP     9   5
0034    TGETS   10   6   2  ; "nv"
0035    TSETS   10   9   6  ; "src"
0036    TGETS   10   6   7  ; "v"
0037    TSETS   10   9   8  ; "dst"
0038    CALL     7   1   3
0039    UGET     7   2      ; get_deploy_paths
0040    MOV      8   4
0041    MOV      9   5
0042    KSTR    10   9      ; "lib"
0043    MOV     12   0
0044    TGETS   11   0  10  ; "gsub"
0045    KSTR    13  11      ; "%.lua$"
0046    KSTR    14  12      ; "."
0047    UGET    15   8      ; cfg
0048    TGETS   15  15  13  ; "lib_extension"
0049    CAT     14  14  15
0050    CALL    11   2   4
0051    UGET    12   5      ; repo
0052    CALL     7   2   6
0053    MOV      6   7
0054    GGET     7   3      ; "table"
0055    TGETS    7   7   4  ; "insert"
0056    UGET     8   7      ; renames
0057    TDUP     9  14
0058    TGETS   10   6   2  ; "nv"
0059    TSETS   10   9   6  ; "src"
0060    TGETS   10   6   7  ; "v"
0061    TSETS   10   9   8  ; "dst"
0062    CALL     7   1   3
0063 => ISNES    3   2      ; "nv"
0064    JMP      6 => 0068
0065    TGETS    6   2   2  ; "nv"
0066    IST          6
0067    JMP      7 => 0069
0068 => TGETS    6   2   7  ; "v"
0069 => UGET     7   3      ; name
0070    ISNEV    7   4
0071    JMP      7 => 0077
0072    UGET     7   4      ; version
0073    ISNEV    7   5
0074    JMP      7 => 0077
0075    KPRI     7   1
0076    JMP      8 => 0078
0077 => KPRI     7   2
0078 => GGET     8   3      ; "table"
0079    TGETS    8   8   4  ; "insert"
0080    UGET     9   9      ; installs
0081    TDUP    10  15
0082    UGET    11  10      ; move_lua
0083    TSETS   11  10  16  ; "fn"
0084    TSETS    1  10   6  ; "src"
0085    TSETS    6  10   8  ; "dst"
0086    TSETS    7  10  17  ; "backup"
0087    CALL     8   1   3
0088    RET0     0   1

-- BYTECODE -- repos.lua:472-486
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "path"
0003    UGET     2   1      ; source_dir
0004    MOV      3   0
0005    CALL     1   2   3
0006    UGET     2   2      ; get_deploy_paths
0007    UGET     3   3      ; name
0008    UGET     4   4      ; version
0009    KSTR     5   1      ; "lib"
0010    MOV      6   0
0011    UGET     7   5      ; repo
0012    CALL     2   2   6
0013    UGET     3   6      ; check_spot_if_available
0014    UGET     4   3      ; name
0015    UGET     5   4      ; version
0016    KSTR     6   1      ; "lib"
0017    MOV      7   0
0018    CALL     3   4   5
0019    ISNES    3   2      ; "nv"
0020    JMP      6 => 0060
0021    ISF          4
0022    JMP      6 => 0060
0023    UGET     6   2      ; get_deploy_paths
0024    MOV      7   4
0025    MOV      8   5
0026    KSTR     9   3      ; "lua"
0027    MOV     11   0
0028    TGETS   10   0   4  ; "gsub"
0029    KSTR    12   5      ; "%.[^.]+$"
0030    KSTR    13   6      ; ".lua"
0031    CALL    10   2   4
0032    UGET    11   5      ; repo
0033    CALL     6   2   6
0034    GGET     7   7      ; "table"
0035    TGETS    7   7   8  ; "insert"
0036    UGET     8   7      ; renames
0037    TDUP     9   9
0038    TGETS   10   6   2  ; "nv"
0039    TSETS   10   9  10  ; "src"
0040    TGETS   10   6  11  ; "v"
0041    TSETS   10   9  12  ; "dst"
0042    CALL     7   1   3
0043    UGET     7   2      ; get_deploy_paths
0044    MOV      8   4
0045    MOV      9   5
0046    KSTR    10   1      ; "lib"
0047    MOV     11   0
0048    UGET    12   5      ; repo
0049    CALL     7   2   6
0050    MOV      6   7
0051    GGET     7   7      ; "table"
0052    TGETS    7   7   8  ; "insert"
0053    UGET     8   7      ; renames
0054    TDUP     9  13
0055    TGETS   10   6   2  ; "nv"
0056    TSETS   10   9  10  ; "src"
0057    TGETS   10   6  11  ; "v"
0058    TSETS   10   9  12  ; "dst"
0059    CALL     7   1   3
0060 => ISNES    3   2      ; "nv"
0061    JMP      6 => 0065
0062    TGETS    6   2   2  ; "nv"
0063    IST          6
0064    JMP      7 => 0066
0065 => TGETS    6   2  11  ; "v"
0066 => UGET     7   3      ; name
0067    ISNEV    7   4
0068    JMP      7 => 0074
0069    UGET     7   4      ; version
0070    ISNEV    7   5
0071    JMP      7 => 0074
0072    KPRI     7   1
0073    JMP      8 => 0075
0074 => KPRI     7   2
0075 => GGET     8   7      ; "table"
0076    TGETS    8   8   8  ; "insert"
0077    UGET     9   8      ; installs
0078    TDUP    10  14
0079    UGET    11   9      ; move_lib
0080    TSETS   11  10  15  ; "fn"
0081    TSETS    1  10  10  ; "src"
0082    TSETS    6  10  12  ; "dst"
0083    TSETS    7  10  16  ; "backup"
0084    CALL     8   1   3
0085    RET0     0   1

-- BYTECODE -- repos.lua:403-509
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISNES    5   2      ; "string"
0006    JMP      5 => 0013
0007    MOV      6   0
0008    TGETS    5   0   3  ; "match"
0009    KSTR     7   4      ; "/"
0010    CALL     5   2   3
0011    NOT      5   5
0012    JMP      6 => 0016
0013 => KPRI     5   1
0014    JMP      6 => 0016
0015    KPRI     5   2
0016 => CALL     4   1   2
0017    GGET     4   0      ; "assert"
0018    GGET     5   1      ; "type"
0019    MOV      6   1
0020    CALL     5   2   2
0021    ISEQS    5   2      ; "string"
0022    JMP      5 => 0025
0023    KPRI     5   1
0024    JMP      6 => 0026
0025 => KPRI     5   2
0026 => CALL     4   1   2
0027    GGET     4   0      ; "assert"
0028    GGET     5   1      ; "type"
0029    MOV      6   2
0030    CALL     5   2   2
0031    ISEQS    5   5      ; "boolean"
0032    JMP      5 => 0035
0033    KPRI     5   1
0034    JMP      6 => 0036
0035 => KPRI     5   2
0036 => CALL     4   1   2
0037    UGET     4   0      ; manif
0038    TGETS    4   4   6  ; "load_rock_manifest"
0039    MOV      5   0
0040    MOV      6   1
0041    CALL     4   3   3
0042    IST          4
0043    JMP      6 => 0047
0044    KPRI     6   0
0045    MOV      7   5
0046    UCLO     0 => 0155
0047 => UGET     6   1      ; cfg
0048    TGETS    6   6   7  ; "root_dir"
0049    TNEW     7   0
0050    TNEW     8   0
0051    FNEW     9   8      ; repos.lua:415
0052    FNEW    10   9      ; repos.lua:423
0053    FNEW    11  10      ; repos.lua:427
0054    TGETS   12   4  11  ; "bin"
0055    ISF         12
0056    JMP     13 => 0068
0057    UGET    12   3      ; path
0058    TGETS   12  12  12  ; "bin_dir"
0059    MOV     13   0
0060    MOV     14   1
0061    CALL    12   2   3
0062    UGET    13   4      ; repos
0063    TGETS   13  13  13  ; "recurse_rock_manifest_entry"
0064    TGETS   14   4  11  ; "bin"
0065    FNEW    15  14      ; repos.lua:433
0066    CALL    13   1   3
0067    UCLO    12 => 0068
0068 => TGETS   12   4  15  ; "lua"
0069    ISF         12
0070    JMP     13 => 0082
0071    UGET    12   3      ; path
0072    TGETS   12  12  16  ; "lua_dir"
0073    MOV     13   0
0074    MOV     14   1
0075    CALL    12   2   3
0076    UGET    13   4      ; repos
0077    TGETS   13  13  13  ; "recurse_rock_manifest_entry"
0078    TGETS   14   4  15  ; "lua"
0079    FNEW    15  17      ; repos.lua:453
0080    CALL    13   1   3
0081    UCLO    12 => 0082
0082 => TGETS   12   4  18  ; "lib"
0083    ISF         12
0084    JMP     13 => 0096
0085    UGET    12   3      ; path
0086    TGETS   12  12  19  ; "lib_dir"
0087    MOV     13   0
0088    MOV     14   1
0089    CALL    12   2   3
0090    UGET    13   4      ; repos
0091    TGETS   13  13  13  ; "recurse_rock_manifest_entry"
0092    TGETS   14   4  18  ; "lib"
0093    FNEW    15  20      ; repos.lua:472
0094    CALL    13   1   3
0095    UCLO    12 => 0096
0096 => GGET    12  21      ; "ipairs"
0097    MOV     13   7
0098    CALL    12   4   2
0099    JMP     15 => 0114
0100 => UGET    17   8      ; op_rename
0101    MOV     18  16
0102    CALL    17   3   2
0103    IST         17
0104    JMP     19 => 0114
0105    UGET    19   9      ; rollback_ops
0106    MOV     20   7
0107    UGET    21  10      ; rollback_rename
0108    SUBVN   22  15   0  ; 1
0109    CALL    19   1   4
0110    KPRI    19   0
0111    MOV     20  18
0112    UCLO     0 => 0113
0113 => RET     19   3
0114 => ITERC   15   3   3
0115    ITERL   15 => 0100
0116    UGET    12  11      ; prepare_op_install
0117    CALL    12   3   1
0118    GGET    14  21      ; "ipairs"
0119    MOV     15   8
0120    CALL    14   4   2
0121    JMP     17 => 0141
0122 => MOV     19  12
0123    MOV     20  18
0124    CALL    19   3   2
0125    IST         19
0126    JMP     21 => 0141
0127    UGET    21   9      ; rollback_ops
0128    MOV     22   8
0129    UGET    23  12      ; rollback_install
0130    SUBVN   24  17   0  ; 1
0131    CALL    21   1   4
0132    UGET    21   9      ; rollback_ops
0133    MOV     22   7
0134    UGET    23  10      ; rollback_rename
0135    LEN     24   7
0136    CALL    21   1   4
0137    KPRI    21   0
0138    MOV     22  20
0139    UCLO     0 => 0140
0140 => RET     21   3
0141 => ITERC   17   3   3
0142    ITERL   17 => 0122
0143    MOV     14  13
0144    CALL    14   1   1
0145    GGET    14  22      ; "require"
0146    KSTR    15  23      ; "luarocks.manif.writer"
0147    CALL    14   2   2
0148    TGETS   15  14  24  ; "add_to_manifest"
0149    MOV     16   0
0150    MOV     17   1
0151    KPRI    18   0
0152    MOV     19   3
0153    UCLO     0 => 0154
0154 => CALLT   15   5
0155 => RET      6   3

-- BYTECODE -- repos.lua:534-548
0001    UGET     1   0      ; get_deploy_paths
0002    UGET     2   1      ; name
0003    UGET     3   2      ; version
0004    KSTR     4   0      ; "bin"
0005    MOV      5   0
0006    UGET     6   3      ; repo
0007    CALL     1   2   6
0008    UGET     2   4      ; check_spot_if_available
0009    UGET     3   1      ; name
0010    UGET     4   2      ; version
0011    KSTR     5   0      ; "bin"
0012    MOV      6   0
0013    CALL     2   5   5
0014    ISNES    2   1      ; "v"
0015    JMP      6 => 0027
0016    GGET     6   2      ; "table"
0017    TGETS    6   6   3  ; "insert"
0018    UGET     7   5      ; deletes
0019    TDUP     8   4
0020    TGETS    9   1   1  ; "v"
0021    TSETS    9   8   5  ; "name"
0022    UGET     9   6      ; cfg
0023    TGETS    9   9   6  ; "wrapper_suffix"
0024    TSETS    9   8   7  ; "suffix"
0025    CALL     6   1   3
0026    JMP      6 => 0063
0027 => GGET     6   2      ; "table"
0028    TGETS    6   6   3  ; "insert"
0029    UGET     7   5      ; deletes
0030    TDUP     8   9
0031    TGETS    9   1   8  ; "nv"
0032    TSETS    9   8   5  ; "name"
0033    UGET     9   6      ; cfg
0034    TGETS    9   9   6  ; "wrapper_suffix"
0035    TSETS    9   8   7  ; "suffix"
0036    CALL     6   1   3
0037    UGET     6   7      ; manif
0038    TGETS    6   6  10  ; "get_next_provider"
0039    KSTR     7  11      ; "command"
0040    MOV      8   5
0041    CALL     6   3   3
0042    ISF          6
0043    JMP      8 => 0063
0044    UGET     8   0      ; get_deploy_paths
0045    MOV      9   6
0046    MOV     10   7
0047    KSTR    11  12      ; "lua"
0048    MOV     12   0
0049    UGET    13   3      ; repo
0050    CALL     8   2   6
0051    GGET     9   2      ; "table"
0052    TGETS    9   9   3  ; "insert"
0053    UGET    10   8      ; renames
0054    TDUP    11  13
0055    TGETS   12   8   1  ; "v"
0056    TSETS   12  11  14  ; "src"
0057    TGETS   12   8   8  ; "nv"
0058    TSETS   12  11  15  ; "dst"
0059    UGET    12   6      ; cfg
0060    TGETS   12  12   6  ; "wrapper_suffix"
0061    TSETS   12  11   7  ; "suffix"
0062    CALL     9   1   3
0063 => RET0     0   1

-- BYTECODE -- repos.lua:552-568
0001    UGET     1   0      ; get_deploy_paths
0002    UGET     2   1      ; name
0003    UGET     3   2      ; version
0004    KSTR     4   0      ; "lua"
0005    MOV      5   0
0006    UGET     6   3      ; repo
0007    CALL     1   2   6
0008    UGET     2   4      ; check_spot_if_available
0009    UGET     3   1      ; name
0010    UGET     4   2      ; version
0011    KSTR     5   0      ; "lua"
0012    MOV      6   0
0013    CALL     2   5   5
0014    ISNES    2   1      ; "v"
0015    JMP      6 => 0024
0016    GGET     6   2      ; "table"
0017    TGETS    6   6   3  ; "insert"
0018    UGET     7   5      ; deletes
0019    TDUP     8   4
0020    TGETS    9   1   1  ; "v"
0021    TSETS    9   8   5  ; "name"
0022    CALL     6   1   3
0023    JMP      6 => 0074
0024 => GGET     6   2      ; "table"
0025    TGETS    6   6   3  ; "insert"
0026    UGET     7   5      ; deletes
0027    TDUP     8   7
0028    TGETS    9   1   6  ; "nv"
0029    TSETS    9   8   5  ; "name"
0030    CALL     6   1   3
0031    UGET     6   6      ; manif
0032    TGETS    6   6   8  ; "get_next_provider"
0033    KSTR     7   9      ; "module"
0034    MOV      8   5
0035    CALL     6   3   3
0036    ISF          6
0037    JMP      8 => 0074
0038    UGET     8   0      ; get_deploy_paths
0039    MOV      9   6
0040    MOV     10   7
0041    KSTR    11   0      ; "lua"
0042    MOV     12   0
0043    UGET    13   3      ; repo
0044    CALL     8   2   6
0045    GGET     9   2      ; "table"
0046    TGETS    9   9   3  ; "insert"
0047    UGET    10   7      ; renames
0048    TDUP    11  10
0049    TGETS   12   8   1  ; "v"
0050    TSETS   12  11  11  ; "src"
0051    TGETS   12   8   6  ; "nv"
0052    TSETS   12  11  12  ; "dst"
0053    CALL     9   1   3
0054    UGET     9   0      ; get_deploy_paths
0055    MOV     10   6
0056    MOV     11   7
0057    KSTR    12  13      ; "lib"
0058    MOV     14   0
0059    TGETS   13   0  14  ; "gsub"
0060    KSTR    15  15      ; "%.[^.]+$"
0061    KSTR    16  16      ; ".lua"
0062    CALL    13   2   4
0063    UGET    14   3      ; repo
0064    CALL     9   2   6
0065    GGET    10   2      ; "table"
0066    TGETS   10  10   3  ; "insert"
0067    UGET    11   7      ; renames
0068    TDUP    12  17
0069    TGETS   13   9   1  ; "v"
0070    TSETS   13  12  11  ; "src"
0071    TGETS   13   9   6  ; "nv"
0072    TSETS   13  12  12  ; "dst"
0073    CALL    10   1   3
0074 => RET0     0   1

-- BYTECODE -- repos.lua:572-588
0001    UGET     1   0      ; get_deploy_paths
0002    UGET     2   1      ; name
0003    UGET     3   2      ; version
0004    KSTR     4   0      ; "lib"
0005    MOV      5   0
0006    UGET     6   3      ; repo
0007    CALL     1   2   6
0008    UGET     2   4      ; check_spot_if_available
0009    UGET     3   1      ; name
0010    UGET     4   2      ; version
0011    KSTR     5   0      ; "lib"
0012    MOV      6   0
0013    CALL     2   5   5
0014    ISNES    2   1      ; "v"
0015    JMP      6 => 0024
0016    GGET     6   2      ; "table"
0017    TGETS    6   6   3  ; "insert"
0018    UGET     7   5      ; deletes
0019    TDUP     8   4
0020    TGETS    9   1   1  ; "v"
0021    TSETS    9   8   5  ; "name"
0022    CALL     6   1   3
0023    JMP      6 => 0074
0024 => GGET     6   2      ; "table"
0025    TGETS    6   6   3  ; "insert"
0026    UGET     7   5      ; deletes
0027    TDUP     8   7
0028    TGETS    9   1   6  ; "nv"
0029    TSETS    9   8   5  ; "name"
0030    CALL     6   1   3
0031    UGET     6   6      ; manif
0032    TGETS    6   6   8  ; "get_next_provider"
0033    KSTR     7   9      ; "module"
0034    MOV      8   5
0035    CALL     6   3   3
0036    ISF          6
0037    JMP      8 => 0074
0038    UGET     8   0      ; get_deploy_paths
0039    MOV      9   6
0040    MOV     10   7
0041    KSTR    11  10      ; "lua"
0042    MOV     13   0
0043    TGETS   12   0  11  ; "gsub"
0044    KSTR    14  12      ; "%.[^.]+$"
0045    KSTR    15  13      ; ".lua"
0046    CALL    12   2   4
0047    UGET    13   3      ; repo
0048    CALL     8   2   6
0049    GGET     9   2      ; "table"
0050    TGETS    9   9   3  ; "insert"
0051    UGET    10   7      ; renames
0052    TDUP    11  14
0053    TGETS   12   8   1  ; "v"
0054    TSETS   12  11  15  ; "src"
0055    TGETS   12   8   6  ; "nv"
0056    TSETS   12  11  16  ; "dst"
0057    CALL     9   1   3
0058    UGET     9   0      ; get_deploy_paths
0059    MOV     10   6
0060    MOV     11   7
0061    KSTR    12   0      ; "lib"
0062    MOV     13   0
0063    UGET    14   3      ; repo
0064    CALL     9   2   6
0065    GGET    10   2      ; "table"
0066    TGETS   10  10   3  ; "insert"
0067    UGET    11   7      ; renames
0068    TDUP    12  17
0069    TGETS   13   9   1  ; "v"
0070    TSETS   13  12  15  ; "src"
0071    TGETS   13   9   6  ; "nv"
0072    TSETS   13  12  16  ; "dst"
0073    CALL    10   1   3
0074 => RET0     0   1

-- BYTECODE -- repos.lua:521-614
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISNES    5   2      ; "string"
0006    JMP      5 => 0013
0007    MOV      6   0
0008    TGETS    5   0   3  ; "match"
0009    KSTR     7   4      ; "/"
0010    CALL     5   2   3
0011    NOT      5   5
0012    JMP      6 => 0016
0013 => KPRI     5   1
0014    JMP      6 => 0016
0015    KPRI     5   2
0016 => CALL     4   1   2
0017    GGET     4   0      ; "assert"
0018    GGET     5   1      ; "type"
0019    MOV      6   1
0020    CALL     5   2   2
0021    ISEQS    5   2      ; "string"
0022    JMP      5 => 0025
0023    KPRI     5   1
0024    JMP      6 => 0026
0025 => KPRI     5   2
0026 => CALL     4   1   2
0027    GGET     4   0      ; "assert"
0028    GGET     5   1      ; "type"
0029    MOV      6   2
0030    CALL     5   2   2
0031    ISEQS    5   2      ; "string"
0032    JMP      5 => 0035
0033    KPRI     5   1
0034    JMP      6 => 0036
0035 => KPRI     5   2
0036 => CALL     4   1   2
0037    UGET     4   0      ; manif
0038    TGETS    4   4   5  ; "load_rock_manifest"
0039    MOV      5   0
0040    MOV      6   1
0041    CALL     4   3   3
0042    IST          4
0043    JMP      6 => 0047
0044    KPRI     6   0
0045    MOV      7   5
0046    UCLO     0 => 0136
0047 => UGET     6   1      ; cfg
0048    TGETS    6   6   6  ; "root_dir"
0049    TNEW     7   0
0050    TNEW     8   0
0051    TGETS    9   4   7  ; "bin"
0052    ISF          9
0053    JMP     10 => 0059
0054    UGET     9   2      ; repos
0055    TGETS    9   9   8  ; "recurse_rock_manifest_entry"
0056    TGETS   10   4   7  ; "bin"
0057    FNEW    11   9      ; repos.lua:534
0058    CALL     9   1   3
0059 => TGETS    9   4  10  ; "lua"
0060    ISF          9
0061    JMP     10 => 0067
0062    UGET     9   2      ; repos
0063    TGETS    9   9   8  ; "recurse_rock_manifest_entry"
0064    TGETS   10   4  10  ; "lua"
0065    FNEW    11  11      ; repos.lua:552
0066    CALL     9   1   3
0067 => TGETS    9   4  12  ; "lib"
0068    ISF          9
0069    JMP     10 => 0075
0070    UGET     9   2      ; repos
0071    TGETS    9   9   8  ; "recurse_rock_manifest_entry"
0072    TGETS   10   4  12  ; "lib"
0073    FNEW    11  13      ; repos.lua:572
0074    CALL     9   1   3
0075 => UGET     9   5      ; prepare_op_delete
0076    CALL     9   3   1
0077    GGET    11  14      ; "ipairs"
0078    MOV     12   8
0079    CALL    11   4   2
0080    JMP     14 => 0084
0081 => MOV     16   9
0082    MOV     17  15
0083    CALL    16   1   2
0084 => ITERC   14   3   3
0085    ITERL   14 => 0081
0086    MOV     11  10
0087    CALL    11   1   1
0088    IST          3
0089    JMP     11 => 0099
0090    GGET    11  14      ; "ipairs"
0091    MOV     12   7
0092    CALL    11   4   2
0093    JMP     14 => 0097
0094 => UGET    16   6      ; op_rename
0095    MOV     17  15
0096    CALL    16   1   2
0097 => ITERC   14   3   3
0098    ITERL   14 => 0094
0099 => UGET    11   7      ; fs
0100    TGETS   11  11  15  ; "delete"
0101    UGET    12   8      ; path
0102    TGETS   12  12  16  ; "install_dir"
0103    MOV     13   0
0104    MOV     14   1
0105    CALL    12   0   3
0106    CALLM   11   1   0
0107    UGET    11   9      ; get_installed_versions
0108    MOV     12   0
0109    CALL    11   2   2
0110    IST         11
0111    JMP     11 => 0121
0112    UGET    11   7      ; fs
0113    TGETS   11  11  15  ; "delete"
0114    UGET    12  10      ; dir
0115    TGETS   12  12  17  ; "path"
0116    UGET    13   1      ; cfg
0117    TGETS   13  13  18  ; "rocks_dir"
0118    MOV     14   0
0119    CALL    12   0   3
0120    CALLM   11   1   0
0121 => ISF          3
0122    JMP     11 => 0126
0123    KPRI    11   2
0124    UCLO     0 => 0125
0125 => RET1    11   2
0126 => GGET    11  19      ; "require"
0127    KSTR    12  20      ; "luarocks.manif.writer"
0128    CALL    11   2   2
0129    TGETS   12  11  21  ; "remove_from_manifest"
0130    MOV     13   0
0131    MOV     14   1
0132    KPRI    15   0
0133    MOV     16   2
0134    UCLO     0 => 0135
0135 => CALLT   12   5
0136 => RET      6   3

-- BYTECODE -- repos.lua:0-617
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.path"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.util"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.dir"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.manif"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.core.vers"
0022    CALL     7   2   2
0023    TNEW     8   0
0024    GGET     9   8      ; "unpack"
0025    IST          9
0026    JMP     10 => 0029
0027    GGET     9   9      ; "table"
0028    TGETS    9   9   8  ; "unpack"
0029 => FNEW    10  10      ; repos.lua:20
0030    FNEW    11  11      ; repos.lua:49
0031    FNEW    12  13      ; repos.lua:62
0032    TSETS   12   0  12  ; "is_installed"
0033    FNEW    12  15      ; repos.lua:69
0034    TSETS   12   0  14  ; "recurse_rock_manifest_entry"
0035    FNEW    12  16      ; repos.lua:95
0036    FNEW    13  18      ; repos.lua:114
0037    TSETS   13   0  17  ; "package_modules"
0038    FNEW    13  20      ; repos.lua:135
0039    TSETS   13   0  19  ; "package_commands"
0040    FNEW    13  22      ; repos.lua:152
0041    TSETS   13   0  21  ; "has_binaries"
0042    FNEW    13  24      ; repos.lua:168
0043    TSETS   13   0  23  ; "run_hook"
0044    FNEW    13  26      ; repos.lua:195
0045    TSETS   13   0  25  ; "should_wrap_bin_scripts"
0046    FNEW    13  27      ; repos.lua:207
0047    FNEW    14  28      ; repos.lua:222
0048    FNEW    15  29      ; repos.lua:236
0049    FNEW    16  30      ; repos.lua:249
0050    FNEW    17  31      ; repos.lua:263
0051    FNEW    18  32      ; repos.lua:283
0052    FNEW    19  33      ; repos.lua:331
0053    FNEW    20  34      ; repos.lua:340
0054    FNEW    21  35      ; repos.lua:358
0055    FNEW    22  36      ; repos.lua:362
0056    FNEW    23  37      ; repos.lua:390
0057    FNEW    24  39      ; repos.lua:403
0058    TSETS   24   0  38  ; "deploy_files"
0059    FNEW    24  41      ; repos.lua:521
0060    TSETS   24   0  40  ; "delete_version"
0061    UCLO     0 => 0062
0062 => RET1     0   2

-----------------------
-- BYTECODE -- dir.lua:15-20
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "gsub"
0013    KSTR     3   4      ; "[/\]*$"
0014    KSTR     4   5      ; ""
0015    CALL     1   2   4
0016    MOV      2   1
0017    TGETS    1   1   6  ; "match"
0018    KSTR     3   7      ; ".*[/\]([^/\]*)"
0019    CALL     1   2   3
0020    ISTC     2   1
0021    JMP      2 => 0023
0022    MOV      2   0
0023 => RET1     2   2

-- BYTECODE -- dir.lua:27-30
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "gsub"
0013    KSTR     3   4      ; "/*$"
0014    KSTR     4   5      ; ""
0015    CALL     1   2   4
0016    MOV      2   1
0017    TGETS    1   1   6  ; "match"
0018    KSTR     3   7      ; "(.*)[/]+[^/]*"
0019    CALL     1   2   3
0020    IST          1
0021    JMP      2 => 0023
0022    KSTR     1   5      ; ""
0023 => RET1     1   2

-- BYTECODE -- dir.lua:34-36
0001    ISEQS    0   0      ; "http"
0002    JMP      1 => 0011
0003    ISEQS    0   1      ; "https"
0004    JMP      1 => 0011
0005    ISEQS    0   2      ; "ftp"
0006    JMP      1 => 0011
0007    ISEQS    0   3      ; "file"
0008    JMP      1 => 0011
0009    KPRI     1   1
0010    JMP      2 => 0012
0011 => KPRI     1   2
0012 => RET1     1   2

-- BYTECODE -- dir.lua:38-46
0001    TNEW     1   0
0002    GGET     2   0      ; "ipairs"
0003    TDUP     3   1
0004    CALL     2   4   2
0005    JMP      5 => 0008
0006 => KSTR     7   2      ; ""
0007    TSETV    7   1   6
0008 => ITERC    5   3   3
0009    ITERL    5 => 0006
0010    UGET     2   0      ; dir
0011    TGETS    2   2   3  ; "base_name"
0012    MOV      3   0
0013    CALL     2   2   2
0014    MOV      4   2
0015    TGETS    3   2   4  ; "gsub"
0016    KSTR     5   5      ; "%.([^.]*)$"
0017    MOV      6   1
0018    CALL     3   2   4
0019    MOV      4   3
0020    TGETS    3   3   4  ; "gsub"
0021    KSTR     5   6      ; "%.tar"
0022    KSTR     6   2      ; ""
0023    CALL     3   2   4
0024    RET1     3   2

-- BYTECODE -- dir.lua:0-49
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.dir"
0004    CALL     1   2   2
0005    TGETS    2   1   2  ; "path"
0006    TSETS    2   0   2  ; "path"
0007    TGETS    2   1   3  ; "split_url"
0008    TSETS    2   0   3  ; "split_url"
0009    TGETS    2   1   4  ; "normalize"
0010    TSETS    2   0   4  ; "normalize"
0011    FNEW     2   6      ; dir.lua:15
0012    TSETS    2   0   5  ; "base_name"
0013    FNEW     2   8      ; dir.lua:27
0014    TSETS    2   0   7  ; "dir_name"
0015    FNEW     2  10      ; dir.lua:34
0016    TSETS    2   0   9  ; "is_basic_protocol"
0017    FNEW     2  12      ; dir.lua:38
0018    TSETS    2   0  11  ; "deduce_base_dir"
0019    UCLO     0 => 0020
0020 => RET1     0   2

-----------------------
-- BYTECODE -- deplocks.lua:13-24
0001    UGET     2   0      ; deptable_mode
0002    ISEQS    2   0      ; "start"
0003    JMP      2 => 0005
0004    RET0     0   1
0005 => USETS    0   1      ; deptable_mode ; "create"
0006    UGET     2   1      ; dir
0007    TGETS    2   2   2  ; "path"
0008    MOV      3   1
0009    KSTR     4   3      ; "luarocks.lock"
0010    CALL     2   2   3
0011    UGET     3   3      ; fs
0012    TGETS    3   3   4  ; "absolute_name"
0013    MOV      4   2
0014    CALL     3   2   2
0015    USETV    2   3      ; deplock_abs_filename
0016    USETV    4   0      ; deplock_root_rock_name
0017    TNEW     3   0
0018    USETV    5   3      ; deptable
0019    RET0     0   1

-- BYTECODE -- deplocks.lua:26-30
0001    UGET     1   0      ; deplock_root_rock_name
0002    ISNEV    0   1
0003    JMP      1 => 0006
0004    UGET     1   1      ; deplock_abs_filename
0005    RET1     1   2
0006 => RET0     0   1

-- BYTECODE -- deplocks.lua:32-55
0001    UGET     2   0      ; deptable_mode
0002    ISEQS    2   0      ; "start"
0003    JMP      2 => 0007
0004    KPRI     2   2
0005    KPRI     3   0
0006    RET      2   3
0007 => USETS    0   1      ; deptable_mode ; "locked"
0008    UGET     2   1      ; dir
0009    TGETS    2   2   2  ; "path"
0010    MOV      3   1
0011    KSTR     4   3      ; "luarocks.lock"
0012    CALL     2   2   3
0013    UGET     3   2      ; persist
0014    TGETS    3   3   4  ; "run_file"
0015    MOV      4   2
0016    TNEW     5   0
0017    CALL     3   4   3
0018    ISEQS    5   5      ; "load"
0019    JMP      6 => 0022
0020    ISNES    5   6      ; "run"
0021    JMP      6 => 0027
0022 => KNIL     6   7
0023    KSTR     8   7      ; "Could not read existing lockfile "
0024    MOV      9   2
0025    CAT      8   8   9
0026    RET      6   4
0027 => ISNES    5   8      ; "open"
0028    JMP      6 => 0032
0029    KPRI     6   2
0030    KPRI     7   0
0031    RET      6   3
0032 => UGET     6   4      ; fs
0033    TGETS    6   6   9  ; "absolute_name"
0034    MOV      7   2
0035    CALL     6   2   2
0036    USETV    3   6      ; deplock_abs_filename
0037    USETV    5   0      ; deplock_root_rock_name
0038    USETV    6   4      ; deptable
0039    KPRI     6   2
0040    MOV      7   2
0041    RET      6   3

-- BYTECODE -- deplocks.lua:57-71
0001    UGET     3   0      ; deptable_mode
0002    ISNES    3   0      ; "locked"
0003    JMP      3 => 0005
0004    RET0     0   1
0005 => UGET     3   1      ; deptable
0006    TGETV    3   3   0
0007    IST          3
0008    JMP      4 => 0012
0009    TNEW     3   0
0010    UGET     4   1      ; deptable
0011    TSETV    3   4   0
0012 => TGETV    4   3   1
0013    IST          4
0014    JMP      4 => 0016
0015    TSETV    2   3   1
0016 => RET0     0   1

-- BYTECODE -- deplocks.lua:73-80
0001    UGET     2   0      ; deptable
0002    TGETV    2   2   0
0003    IST          2
0004    JMP      3 => 0007
0005    KPRI     3   0
0006    RET1     3   2
0007 => UGET     3   0      ; deptable
0008    TGETV    3   3   1
0009    RET1     3   2

-- BYTECODE -- deplocks.lua:82-88
0001    UGET     0   0      ; deptable_mode
0002    ISEQS    0   0      ; "create"
0003    JMP      0 => 0006
0004    KPRI     0   2
0005    RET1     0   2
0006 => UGET     0   1      ; persist
0007    TGETS    0   0   1  ; "save_as_module"
0008    UGET     1   2      ; deplock_abs_filename
0009    UGET     2   3      ; deptable
0010    CALLT    0   3

-- BYTECODE -- deplocks.lua:93-95
0001    UGET     2   0      ; deplocks
0002    TGETS    2   2   0  ; "get"
0003    UGET     3   1      ; depskey
0004    MOV      4   1
0005    CALLT    2   3

-- BYTECODE -- deplocks.lua:96-98
0001    UGET     3   0      ; deplocks
0002    TGETS    3   3   0  ; "add"
0003    UGET     4   1      ; depskey
0004    MOV      5   1
0005    MOV      6   2
0006    CALLT    3   4

-- BYTECODE -- deplocks.lua:91-100
0001    GGET     1   0      ; "setmetatable"
0002    TNEW     2   0
0003    TDUP     3   2
0004    FNEW     4   1      ; deplocks.lua:93
0005    TSETS    4   3   3  ; "__index"
0006    FNEW     4   4      ; deplocks.lua:96
0007    TSETS    4   3   5  ; "__newindex"
0008    UCLO     0 => 0009
0009 => CALLT    1   3

-- BYTECODE -- deplocks.lua:102-104
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "sortedpairs"
0003    UGET     2   1      ; deptable
0004    TGETV    2   2   0
0005    IST          2
0006    JMP      3 => 0008
0007    TNEW     2   0
0008 => CALLT    1   2

-- BYTECODE -- deplocks.lua:0-107
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.util"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.persist"
0013    CALL     4   2   2
0014    TNEW     5   0
0015    KSTR     6   5      ; "start"
0016    KNIL     7   8
0017    FNEW     9   7      ; deplocks.lua:13
0018    TSETS    9   0   6  ; "init"
0019    FNEW     9   9      ; deplocks.lua:26
0020    TSETS    9   0   8  ; "get_abs_filename"
0021    FNEW     9  11      ; deplocks.lua:32
0022    TSETS    9   0  10  ; "load"
0023    FNEW     9  13      ; deplocks.lua:57
0024    TSETS    9   0  12  ; "add"
0025    FNEW     9  15      ; deplocks.lua:73
0026    TSETS    9   0  14  ; "get"
0027    FNEW     9  17      ; deplocks.lua:82
0028    TSETS    9   0  16  ; "write_file"
0029    FNEW     9  19      ; deplocks.lua:91
0030    TSETS    9   0  18  ; "proxy"
0031    FNEW     9  21      ; deplocks.lua:102
0032    TSETS    9   0  20  ; "each"
0033    UCLO     0 => 0034
0034 => RET1     0   2

-----------------------
-- BYTECODE -- add.lua:14-27
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "add"
0004    KSTR     4   2      ; "Add a rock or rockspec to a rocks server"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "rock"
0012    KSTR     5   6      ; "A local rockspec or rock file."
0013    CALL     2   2   4
0014    MOV      3   2
0015    TGETS    2   2   7  ; "args"
0016    KSTR     4   8      ; "+"
0017    CALL     2   1   3
0018    MOV      3   1
0019    TGETS    2   1   9  ; "option"
0020    KSTR     4  10      ; "--server"
0021    KSTR     5  11      ; "The server to use. If not given, the def"~
0022    KSTR     6  12      ; "set in the upload_server variable from t"~
0023    CAT      5   5   6
0024    CALL     2   2   4
0025    MOV      3   2
0026    TGETS    2   2  13  ; "target"
0027    KSTR     4  14      ; "add_server"
0028    CALL     2   1   3
0029    MOV      3   1
0030    TGETS    2   1  15  ; "flag"
0031    KSTR     4  16      ; "--no-refresh"
0032    KSTR     5  17      ; "Do not refresh the local cache prior to "
0033    KSTR     6  18      ; "generation of the updated manifest."
0034    CAT      5   5   6
0035    CALL     2   1   4
0036    MOV      3   1
0037    TGETS    2   1  15  ; "flag"
0038    KSTR     4  19      ; "--index"
0039    KSTR     5  20      ; "Produce an index.html file for the manif"~
0040    KSTR     6  21      ; "flag is automatically set if an index.ht"~
0041    CAT      5   5   6
0042    CALL     2   1   4
0043    RET0     0   1

-- BYTECODE -- add.lua:29-36
0001    UGET     0   0      ; util
0002    TGETS    0   0   0  ; "lua_versions"
0003    CALL     0   4   1
0004    JMP      3 => 0026
0005 => KSTR     4   1      ; "manifest-"
0006    MOV      5   3
0007    CAT      4   4   5
0008    MOV      5   4
0009    KSTR     6   2      ; ".zip"
0010    CAT      5   5   6
0011    UGET     6   1      ; fs
0012    TGETS    6   6   3  ; "delete"
0013    UGET     7   2      ; dir
0014    TGETS    7   7   4  ; "path"
0015    UGET     8   1      ; fs
0016    TGETS    8   8   5  ; "current_dir"
0017    CALL     8   2   1
0018    MOV      9   5
0019    CALL     7   0   3
0020    CALLM    6   1   0
0021    UGET     6   1      ; fs
0022    TGETS    6   6   6  ; "zip"
0023    MOV      7   5
0024    MOV      8   4
0025    CALL     6   1   3
0026 => ITERC    3   2   3
0027    ITERL    3 => 0005
0028    RET0     0   1

-- BYTECODE -- add.lua:38-125
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "boolean"
0006    JMP      6 => 0011
0007    NOT      6   0
0008    JMP      7 => 0012
0009    KPRI     6   1
0010    JMP      7 => 0012
0011 => KPRI     6   2
0012 => CALL     5   1   2
0013    GGET     5   0      ; "assert"
0014    GGET     6   1      ; "type"
0015    MOV      7   1
0016    CALL     6   2   2
0017    ISEQS    6   3      ; "table"
0018    JMP      6 => 0021
0019    KPRI     6   1
0020    JMP      7 => 0022
0021 => KPRI     6   2
0022 => CALL     5   1   2
0023    GGET     5   0      ; "assert"
0024    GGET     6   1      ; "type"
0025    MOV      7   2
0026    CALL     6   2   2
0027    ISEQS    6   4      ; "string"
0028    JMP      6 => 0031
0029    KPRI     6   1
0030    JMP      7 => 0032
0031 => KPRI     6   2
0032 => CALL     5   1   2
0033    GGET     5   0      ; "assert"
0034    GGET     6   1      ; "type"
0035    MOV      7   3
0036    CALL     6   2   2
0037    ISEQS    6   3      ; "table"
0038    JMP      6 => 0043
0039    NOT      6   3
0040    JMP      7 => 0044
0041    KPRI     6   1
0042    JMP      7 => 0044
0043 => KPRI     6   2
0044 => CALL     5   1   2
0045    UGET     5   0      ; cache
0046    TGETS    5   5   5  ; "get_server_urls"
0047    MOV      6   2
0048    MOV      7   3
0049    CALL     5   3   3
0050    UGET     7   1      ; fs
0051    TGETS    7   7   6  ; "current_dir"
0052    CALL     7   2   1
0053    ISF          0
0054    JMP      8 => 0059
0055    UGET     8   0      ; cache
0056    TGETS    8   8   7  ; "refresh_local_cache"
0057    IST          8
0058    JMP      9 => 0061
0059 => UGET     8   0      ; cache
0060    TGETS    8   8   8  ; "split_server_url"
0061 => MOV      9   8
0062    MOV     10   5
0063    UGET    11   2      ; cfg
0064    TGETS   11  11   9  ; "upload_user"
0065    UGET    12   2      ; cfg
0066    TGETS   12  12  10  ; "upload_password"
0067    CALL     9   6   4
0068    IST          9
0069    JMP     14 => 0073
0070    KPRI    14   0
0071    MOV     15  10
0072    RET     14   3
0073 => IST          6
0074    JMP     14 => 0079
0075    MOV     14  10
0076    KSTR    15  11      ; "://"
0077    MOV     16  11
0078    CAT      6  14  16
0079 => UGET    14   1      ; fs
0080    TGETS   14  14  12  ; "change_dir"
0081    MOV     15   7
0082    CALL    14   3   2
0083    IST         14
0084    JMP     16 => 0088
0085    KPRI    16   0
0086    MOV     17  15
0087    RET     16   3
0088 => TNEW    16   0
0089    GGET    17  13      ; "ipairs"
0090    MOV     18   1
0091    CALL    17   4   2
0092    JMP     20 => 0134
0093 => UGET    22   1      ; fs
0094    TGETS   22  22  14  ; "exists"
0095    MOV     23  21
0096    CALL    22   2   2
0097    ISF         22
0098    JMP     23 => 0127
0099    UGET    22   3      ; util
0100    TGETS   22  22  15  ; "printout"
0101    KSTR    23  16      ; "Copying file "
0102    MOV     24  21
0103    KSTR    25  17      ; " to "
0104    MOV     26   9
0105    KSTR    27  18      ; "..."
0106    CAT     23  23  27
0107    CALL    22   1   2
0108    UGET    22   1      ; fs
0109    TGETS   22  22  19  ; "absolute_name"
0110    MOV     23  21
0111    CALL    22   2   2
0112    UGET    23   1      ; fs
0113    TGETS   23  23  20  ; "copy"
0114    MOV     24  22
0115    MOV     25   9
0116    KSTR    26  21      ; "read"
0117    CALL    23   1   4
0118    GGET    23   3      ; "table"
0119    TGETS   23  23  22  ; "insert"
0120    MOV     24  16
0121    UGET    25   4      ; dir
0122    TGETS   25  25  23  ; "base_name"
0123    MOV     26  22
0124    CALL    25   0   2
0125    CALLM   23   1   1
0126    JMP     22 => 0134
0127 => UGET    22   3      ; util
0128    TGETS   22  22  24  ; "printerr"
0129    KSTR    23  25      ; "File "
0130    MOV     24  21
0131    KSTR    25  26      ; " not found"
0132    CAT     23  23  25
0133    CALL    22   1   2
0134 => ITERC   20   3   3
0135    ITERL   20 => 0093
0136    LEN     17  16
0137    ISNEN   17   0      ; 0
0138    JMP     17 => 0142
0139    KPRI    17   0
0140    KSTR    18  27      ; "No files found"
0141    RET     17   3
0142 => UGET    17   1      ; fs
0143    TGETS   17  17  12  ; "change_dir"
0144    MOV     18   9
0145    CALL    17   3   2
0146    IST         17
0147    JMP     19 => 0151
0148    KPRI    19   0
0149    MOV     20  18
0150    RET     19   3
0151 => UGET    19   3      ; util
0152    TGETS   19  19  15  ; "printout"
0153    KSTR    20  28      ; "Updating manifest..."
0154    CALL    19   1   2
0155    UGET    19   5      ; writer
0156    TGETS   19  19  29  ; "make_manifest"
0157    MOV     20   9
0158    KSTR    21  30      ; "one"
0159    KPRI    22   2
0160    CALL    19   1   4
0161    UGET    19   6      ; zip_manifests
0162    CALL    19   1   1
0163    UGET    19   1      ; fs
0164    TGETS   19  19  14  ; "exists"
0165    KSTR    20  31      ; "index.html"
0166    CALL    19   2   2
0167    ISF         19
0168    JMP     20 => 0170
0169    KPRI     4   2
0170 => ISF          4
0171    JMP     19 => 0180
0172    UGET    19   3      ; util
0173    TGETS   19  19  15  ; "printout"
0174    KSTR    20  32      ; "Updating index.html..."
0175    CALL    19   1   2
0176    UGET    19   7      ; index
0177    TGETS   19  19  33  ; "make_index"
0178    MOV     20   9
0179    CALL    19   1   2
0180 => KSTR    19  34      ; ""
0181    ISF         12
0182    JMP     20 => 0186
0183    KSTR    20  35      ; " -u "
0184    MOV     21  12
0185    CAT     19  20  21
0186 => ISF         13
0187    JMP     20 => 0192
0188    MOV     20  19
0189    KSTR    21  36      ; ":"
0190    MOV     22  13
0191    CAT     19  20  22
0192 => MOV     21   6
0193    TGETS   20   6  37  ; "match"
0194    KSTR    22  38      ; "/$"
0195    CALL    20   2   3
0196    IST         20
0197    JMP     20 => 0201
0198    MOV     20   6
0199    KSTR    21  39      ; "/"
0200    CAT      6  20  21
0201 => ISF          4
0202    JMP     20 => 0208
0203    GGET    20   3      ; "table"
0204    TGETS   20  20  22  ; "insert"
0205    MOV     21  16
0206    KSTR    22  31      ; "index.html"
0207    CALL    20   1   3
0208 => GGET    20   3      ; "table"
0209    TGETS   20  20  22  ; "insert"
0210    MOV     21  16
0211    KSTR    22  40      ; "manifest"
0212    CALL    20   1   3
0213    UGET    20   3      ; util
0214    TGETS   20  20  41  ; "lua_versions"
0215    CALL    20   4   1
0216    JMP     23 => 0232
0217 => GGET    24   3      ; "table"
0218    TGETS   24  24  22  ; "insert"
0219    MOV     25  16
0220    KSTR    26  42      ; "manifest-"
0221    MOV     27  23
0222    CAT     26  26  27
0223    CALL    24   1   3
0224    GGET    24   3      ; "table"
0225    TGETS   24  24  22  ; "insert"
0226    MOV     25  16
0227    KSTR    26  42      ; "manifest-"
0228    MOV     27  23
0229    KSTR    28  43      ; ".zip"
0230    CAT     26  26  28
0231    CALL    24   1   3
0232 => ITERC   23   2   3
0233    ITERL   23 => 0217
0234    KPRI    20   0
0235    ISNES   10  44      ; "rsync"
0236    JMP     21 => 0259
0237    MOV     22  11
0238    TGETS   21  11  37  ; "match"
0239    KSTR    23  45      ; "([^/]+)(/.+)"
0240    CALL    21   3   3
0241    UGET    23   2      ; cfg
0242    TGETS   23  23  46  ; "variables"
0243    TGETS   23  23  47  ; "RSYNC"
0244    KSTR    24  48      ; " "
0245    UGET    25   2      ; cfg
0246    TGETS   25  25  46  ; "variables"
0247    TGETS   25  25  49  ; "RSYNCFLAGS"
0248    KSTR    26  50      ; " -e ssh "
0249    MOV     27   9
0250    KSTR    28  51      ; "/ "
0251    MOV     29  12
0252    KSTR    30  52      ; "@"
0253    MOV     31  21
0254    KSTR    32  36      ; ":"
0255    MOV     33  22
0256    KSTR    34  39      ; "/"
0257    CAT     20  23  34
0258    JMP     21 => 0308
0259 => ISNES   10  53      ; "file"
0260    JMP     21 => 0267
0261    UGET    21   1      ; fs
0262    TGETS   21  21  54  ; "copy_contents"
0263    MOV     22   9
0264    MOV     23  11
0265    CALLT   21   3
0266    JMP     21 => 0308
0267 => ISF          3
0268    JMP     21 => 0294
0269    TGETS   21   3  55  ; "sftp"
0270    ISF         21
0271    JMP     22 => 0294
0272    TGETS   21   3  55  ; "sftp"
0273    MOV     22  21
0274    TGETS   21  21  37  ; "match"
0275    KSTR    23  56      ; "^([^/]*)/(.*)$"
0276    CALL    21   3   3
0277    UGET    23   2      ; cfg
0278    TGETS   23  23  46  ; "variables"
0279    TGETS   23  23  57  ; "SCP"
0280    KSTR    24  48      ; " "
0281    GGET    25   3      ; "table"
0282    TGETS   25  25  58  ; "concat"
0283    MOV     26  16
0284    KSTR    27  48      ; " "
0285    CALL    25   2   3
0286    KSTR    26  48      ; " "
0287    MOV     27  12
0288    KSTR    28  52      ; "@"
0289    MOV     29  21
0290    KSTR    30  59      ; ":/"
0291    MOV     31  22
0292    CAT     20  23  31
0293    JMP     21 => 0308
0294 => UGET    21   2      ; cfg
0295    TGETS   21  21  46  ; "variables"
0296    TGETS   21  21  60  ; "CURL"
0297    KSTR    22  48      ; " "
0298    MOV     23  19
0299    KSTR    24  61      ; " -T '{"
0300    GGET    25   3      ; "table"
0301    TGETS   25  25  58  ; "concat"
0302    MOV     26  16
0303    KSTR    27  62      ; ","
0304    CALL    25   2   3
0305    KSTR    26  63      ; "}' "
0306    MOV     27   6
0307    CAT     20  21  27
0308 => UGET    21   3      ; util
0309    TGETS   21  21  15  ; "printout"
0310    MOV     22  20
0311    CALL    21   1   2
0312    UGET    21   1      ; fs
0313    TGETS   21  21  64  ; "execute"
0314    MOV     22  20
0315    CALLT   21   2

-- BYTECODE -- add.lua:127-131
0001    UGET     1   0      ; cache
0002    TGETS    1   1   0  ; "get_upload_server"
0003    TGETS    2   0   1  ; "add_server"
0004    IST          2
0005    JMP      3 => 0007
0006    TGETS    2   0   2  ; "server"
0007 => CALL     1   3   2
0008    IST          1
0009    JMP      3 => 0013
0010    KPRI     3   0
0011    MOV      4   2
0012    RET      3   3
0013 => UGET     3   1      ; add_files_to_server
0014    TGETS    4   0   3  ; "no_refresh"
0015    NOT      4   4
0016    TGETS    5   0   4  ; "rock"
0017    MOV      6   1
0018    MOV      7   2
0019    TGETS    8   0   5  ; "index"
0020    CALLT    3   6

-- BYTECODE -- add.lua:0-135
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.manif.writer"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.admin.cache"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.admin.index"
0022    CALL     7   2   2
0023    FNEW     8   9      ; add.lua:14
0024    TSETS    8   0   8  ; "add_to_parser"
0025    FNEW     8  10      ; add.lua:29
0026    FNEW     9  11      ; add.lua:38
0027    FNEW    10  13      ; add.lua:127
0028    TSETS   10   0  12  ; "command"
0029    UCLO     0 => 0030
0030 => RET1     0   2

-----------------------
-- BYTECODE -- refresh_cache.lua:9-15
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "refresh_cache"
0004    KSTR     4   2      ; "Refresh local cache of a remote rocks se"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "option"
0011    KSTR     4   5      ; "--from"
0012    KSTR     5   6      ; "The server to use. If not given, the def"~
0013    KSTR     6   7      ; "set in the upload_server variable from t"~
0014    CAT      5   5   6
0015    CALL     2   2   4
0016    MOV      3   2
0017    TGETS    2   2   8  ; "argname"
0018    KSTR     4   9      ; "<server>"
0019    CALL     2   1   3
0020    RET0     0   1

-- BYTECODE -- refresh_cache.lua:17-28
0001    UGET     1   0      ; cache
0002    TGETS    1   1   0  ; "get_upload_server"
0003    TGETS    2   0   1  ; "server"
0004    CALL     1   3   2
0005    IST          1
0006    JMP      3 => 0010
0007    KPRI     3   0
0008    MOV      4   2
0009    RET      3   3
0010 => UGET     3   0      ; cache
0011    TGETS    3   3   2  ; "get_server_urls"
0012    MOV      4   1
0013    MOV      5   2
0014    CALL     3   2   3
0015    UGET     4   0      ; cache
0016    TGETS    4   4   3  ; "refresh_local_cache"
0017    MOV      5   3
0018    UGET     6   1      ; cfg
0019    TGETS    6   6   4  ; "upload_user"
0020    UGET     7   1      ; cfg
0021    TGETS    7   7   5  ; "upload_password"
0022    CALL     4   3   4
0023    IST          4
0024    JMP      6 => 0029
0025    KPRI     6   0
0026    MOV      7   5
0027    RET      6   3
0028    JMP      6 => 0031
0029 => KPRI     6   2
0030    RET1     6   2
0031 => RET0     0   1

-- BYTECODE -- refresh_cache.lua:0-32
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.admin.cache"
0010    CALL     3   2   2
0011    FNEW     4   5      ; refresh_cache.lua:9
0012    TSETS    4   0   4  ; "add_to_parser"
0013    FNEW     4   7      ; refresh_cache.lua:17
0014    TSETS    4   0   6  ; "command"
0015    UCLO     0 => 0016
0016 => RET1     0   2

-----------------------
-- BYTECODE -- remove.lua:14-24
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "remove"
0004    KSTR     4   2      ; "Remove a rock or rockspec from a rocks s"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "rock"
0012    KSTR     5   6      ; "A local rockspec or rock file."
0013    CALL     2   2   4
0014    MOV      3   2
0015    TGETS    2   2   7  ; "args"
0016    KSTR     4   8      ; "+"
0017    CALL     2   1   3
0018    MOV      3   1
0019    TGETS    2   1   9  ; "option"
0020    KSTR     4  10      ; "--server"
0021    KSTR     5  11      ; "The server to use. If not given, the def"~
0022    KSTR     6  12      ; "set in the upload_server variable from t"~
0023    CAT      5   5   6
0024    CALL     2   1   4
0025    MOV      3   1
0026    TGETS    2   1  13  ; "flag"
0027    KSTR     4  14      ; "--no-refresh"
0028    KSTR     5  15      ; "Do not refresh the local cache prior to "
0029    KSTR     6  16      ; "generation of the updated manifest."
0030    CAT      5   5   6
0031    CALL     2   1   4
0032    RET0     0   1

-- BYTECODE -- remove.lua:26-78
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "boolean"
0006    JMP      5 => 0011
0007    NOT      5   0
0008    JMP      6 => 0012
0009    KPRI     5   1
0010    JMP      6 => 0012
0011 => KPRI     5   2
0012 => CALL     4   1   2
0013    GGET     4   0      ; "assert"
0014    GGET     5   1      ; "type"
0015    MOV      6   1
0016    CALL     5   2   2
0017    ISEQS    5   3      ; "table"
0018    JMP      5 => 0021
0019    KPRI     5   1
0020    JMP      6 => 0022
0021 => KPRI     5   2
0022 => CALL     4   1   2
0023    GGET     4   0      ; "assert"
0024    GGET     5   1      ; "type"
0025    MOV      6   2
0026    CALL     5   2   2
0027    ISEQS    5   4      ; "string"
0028    JMP      5 => 0031
0029    KPRI     5   1
0030    JMP      6 => 0032
0031 => KPRI     5   2
0032 => CALL     4   1   2
0033    GGET     4   0      ; "assert"
0034    GGET     5   1      ; "type"
0035    MOV      6   3
0036    CALL     5   2   2
0037    ISEQS    5   3      ; "table"
0038    JMP      5 => 0043
0039    NOT      5   3
0040    JMP      6 => 0044
0041    KPRI     5   1
0042    JMP      6 => 0044
0043 => KPRI     5   2
0044 => CALL     4   1   2
0045    UGET     4   0      ; cache
0046    TGETS    4   4   5  ; "get_server_urls"
0047    MOV      5   2
0048    MOV      6   3
0049    CALL     4   3   3
0050    UGET     6   1      ; fs
0051    TGETS    6   6   6  ; "current_dir"
0052    CALL     6   2   1
0053    ISF          0
0054    JMP      7 => 0059
0055    UGET     7   0      ; cache
0056    TGETS    7   7   7  ; "refresh_local_cache"
0057    IST          7
0058    JMP      8 => 0061
0059 => UGET     7   0      ; cache
0060    TGETS    7   7   8  ; "split_server_url"
0061 => MOV      8   7
0062    MOV      9   4
0063    UGET    10   2      ; cfg
0064    TGETS   10  10   9  ; "upload_user"
0065    UGET    11   2      ; cfg
0066    TGETS   11  11  10  ; "upload_password"
0067    CALL     8   6   4
0068    IST          8
0069    JMP     13 => 0073
0070    KPRI    13   0
0071    MOV     14   9
0072    RET     13   3
0073 => ISEQS    9  11      ; "rsync"
0074    JMP     13 => 0078
0075    KPRI    13   0
0076    KSTR    14  12      ; "This command requires 'rsync', check you"~
0077    RET     13   3
0078 => UGET    13   1      ; fs
0079    TGETS   13  13  13  ; "change_dir"
0080    MOV     14   6
0081    CALL    13   3   2
0082    IST         13
0083    JMP     15 => 0087
0084    KPRI    15   0
0085    MOV     16  14
0086    RET     15   3
0087 => KSHORT  15   0
0088    GGET    16  14      ; "ipairs"
0089    MOV     17   1
0090    CALL    16   4   2
0091    JMP     19 => 0126
0092 => UGET    21   3      ; dir
0093    TGETS   21  21  15  ; "base_name"
0094    MOV     22  20
0095    CALL    21   2   2
0096    UGET    22   3      ; dir
0097    TGETS   22  22  16  ; "path"
0098    MOV     23   8
0099    MOV     24  21
0100    CALL    22   2   3
0101    UGET    23   4      ; util
0102    TGETS   23  23  17  ; "printout"
0103    KSTR    24  18      ; "Removing file "
0104    MOV     25  22
0105    KSTR    26  19      ; "..."
0106    CAT     24  24  26
0107    CALL    23   1   2
0108    UGET    23   1      ; fs
0109    TGETS   23  23  20  ; "delete"
0110    MOV     24  22
0111    CALL    23   1   2
0112    UGET    23   1      ; fs
0113    TGETS   23  23  21  ; "exists"
0114    MOV     24  22
0115    CALL    23   2   2
0116    IST         23
0117    JMP     23 => 0120
0118    ADDVN   15  15   0  ; 1
0119    JMP     23 => 0126
0120 => UGET    23   4      ; util
0121    TGETS   23  23  22  ; "printerr"
0122    KSTR    24  23      ; "Failed removing "
0123    MOV     25  22
0124    CAT     24  24  25
0125    CALL    23   1   2
0126 => ITERC   19   3   3
0127    ITERL   19 => 0092
0128    ISNEN   15   1      ; 0
0129    JMP     16 => 0133
0130    KPRI    16   0
0131    KSTR    17  24      ; "No files removed."
0132    RET     16   3
0133 => UGET    16   1      ; fs
0134    TGETS   16  16  13  ; "change_dir"
0135    MOV     17   8
0136    CALL    16   3   2
0137    IST         16
0138    JMP     18 => 0142
0139    KPRI    18   0
0140    MOV     19  17
0141    RET     18   3
0142 => UGET    18   4      ; util
0143    TGETS   18  18  17  ; "printout"
0144    KSTR    19  25      ; "Updating manifest..."
0145    CALL    18   1   2
0146    UGET    18   5      ; writer
0147    TGETS   18  18  26  ; "make_manifest"
0148    MOV     19   8
0149    KSTR    20  27      ; "one"
0150    KPRI    21   2
0151    CALL    18   1   4
0152    UGET    18   4      ; util
0153    TGETS   18  18  17  ; "printout"
0154    KSTR    19  28      ; "Updating index.html..."
0155    CALL    18   1   2
0156    UGET    18   6      ; index
0157    TGETS   18  18  29  ; "make_index"
0158    MOV     19   8
0159    CALL    18   1   2
0160    MOV     19  10
0161    TGETS   18  10  30  ; "match"
0162    KSTR    20  31      ; "([^/]+)(/.+)"
0163    CALL    18   3   3
0164    UGET    20   2      ; cfg
0165    TGETS   20  20  32  ; "variables"
0166    TGETS   20  20  33  ; "RSYNC"
0167    KSTR    21  34      ; " "
0168    UGET    22   2      ; cfg
0169    TGETS   22  22  32  ; "variables"
0170    TGETS   22  22  35  ; "RSYNCFLAGS"
0171    KSTR    23  36      ; " --delete -e ssh "
0172    MOV     24   8
0173    KSTR    25  37      ; "/ "
0174    MOV     26  11
0175    KSTR    27  38      ; "@"
0176    MOV     28  18
0177    KSTR    29  39      ; ":"
0178    MOV     30  19
0179    KSTR    31  40      ; "/"
0180    CAT     20  20  31
0181    UGET    21   4      ; util
0182    TGETS   21  21  17  ; "printout"
0183    MOV     22  20
0184    CALL    21   1   2
0185    UGET    21   1      ; fs
0186    TGETS   21  21  41  ; "execute"
0187    MOV     22  20
0188    CALL    21   1   2
0189    KPRI    21   2
0190    RET1    21   2

-- BYTECODE -- remove.lua:80-84
0001    UGET     1   0      ; cache
0002    TGETS    1   1   0  ; "get_upload_server"
0003    TGETS    2   0   1  ; "server"
0004    CALL     1   3   2
0005    IST          1
0006    JMP      3 => 0010
0007    KPRI     3   0
0008    MOV      4   2
0009    RET      3   3
0010 => UGET     3   1      ; remove_files_from_server
0011    TGETS    4   0   2  ; "no_refresh"
0012    NOT      4   4
0013    TGETS    5   0   3  ; "rock"
0014    MOV      6   1
0015    MOV      7   2
0016    CALLT    3   5

-- BYTECODE -- remove.lua:0-88
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.manif.writer"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fs"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.admin.cache"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.admin.index"
0022    CALL     7   2   2
0023    FNEW     8   9      ; remove.lua:14
0024    TSETS    8   0   8  ; "add_to_parser"
0025    FNEW     8  10      ; remove.lua:26
0026    FNEW     9  12      ; remove.lua:80
0027    TSETS    9   0  11  ; "command"
0028    UCLO     0 => 0029
0029 => RET1     0   2

-----------------------
-- BYTECODE -- make_manifest.lua:14-23
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    KSTR     3   1      ; "make_manifest"
0004    KSTR     4   2      ; "Compile a manifest file for a repository"~
0005    UGET     5   0      ; util
0006    TGETS    5   5   3  ; "see_also"
0007    CALL     5   0   1
0008    CALLM    1   2   3
0009    MOV      3   1
0010    TGETS    2   1   4  ; "argument"
0011    KSTR     4   5      ; "repository"
0012    KSTR     5   6      ; "Local repository pathname."
0013    CALL     2   2   4
0014    MOV      3   2
0015    TGETS    2   2   7  ; "args"
0016    KSTR     4   8      ; "?"
0017    CALL     2   1   3
0018    MOV      3   1
0019    TGETS    2   1   9  ; "flag"
0020    KSTR     4  10      ; "--local-tree"
0021    KSTR     5  11      ; "If given, do not write versioned version"~
0022    KSTR     6  12      ; "Use this when rebuilding the manifest of"~
0023    CAT      5   5   6
0024    CALL     2   1   4
0025    UGET     2   0      ; util
0026    TGETS    2   2  13  ; "deps_mode_option"
0027    MOV      3   1
0028    CALL     2   1   2
0029    RET0     0   1

-- BYTECODE -- make_manifest.lua:28-48
0001    TGETS    1   0   0  ; "repository"
0002    IST          1
0003    JMP      2 => 0006
0004    UGET     1   0      ; cfg
0005    TGETS    1   1   1  ; "rocks_dir"
0006 => UGET     2   1      ; util
0007    TGETS    2   2   2  ; "printout"
0008    KSTR     3   3      ; "Making manifest for "
0009    MOV      4   1
0010    CAT      3   3   4
0011    CALL     2   1   2
0012    MOV      3   1
0013    TGETS    2   1   4  ; "match"
0014    KSTR     4   5      ; "/lib/luarocks"
0015    CALL     2   2   3
0016    ISF          2
0017    JMP      3 => 0025
0018    TGETS    2   0   6  ; "local_tree"
0019    IST          2
0020    JMP      2 => 0025
0021    UGET     2   1      ; util
0022    TGETS    2   2   7  ; "warning"
0023    KSTR     3   8      ; "This looks like a local rocks tree, but "~
0024    CALL     2   1   2
0025 => UGET     2   2      ; writer
0026    TGETS    2   2   9  ; "make_manifest"
0027    MOV      3   1
0028    UGET     4   3      ; deps
0029    TGETS    4   4  10  ; "get_deps_mode"
0030    MOV      5   0
0031    CALL     4   2   2
0032    TGETS    5   0   6  ; "local_tree"
0033    NOT      5   5
0034    CALL     2   3   4
0035    ISF          2
0036    JMP      4 => 0050
0037    TGETS    4   0   6  ; "local_tree"
0038    IST          4
0039    JMP      4 => 0050
0040    UGET     4   1      ; util
0041    TGETS    4   4   2  ; "printout"
0042    KSTR     5  11      ; "Generating index.html for "
0043    MOV      6   1
0044    CAT      5   5   6
0045    CALL     4   1   2
0046    UGET     4   4      ; index
0047    TGETS    4   4  12  ; "make_index"
0048    MOV      5   1
0049    CALL     4   1   2
0050 => TGETS    4   0   6  ; "local_tree"
0051    ISF          4
0052    JMP      5 => 0069
0053    UGET     4   1      ; util
0054    TGETS    4   4  13  ; "lua_versions"
0055    CALL     4   4   1
0056    JMP      7 => 0067
0057 => UGET     8   5      ; fs
0058    TGETS    8   8  14  ; "delete"
0059    UGET     9   6      ; dir
0060    TGETS    9   9  15  ; "path"
0061    MOV     10   1
0062    KSTR    11  16      ; "manifest-"
0063    MOV     12   7
0064    CAT     11  11  12
0065    CALL     9   0   3
0066    CALLM    8   1   0
0067 => ITERC    7   2   3
0068    ITERL    7 => 0057
0069 => MOV      4   2
0070    MOV      5   3
0071    RET      4   3

-- BYTECODE -- make_manifest.lua:0-51
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.manif.writer"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.admin.index"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.util"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.deps"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.fs"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.dir"
0022    CALL     7   2   2
0023    FNEW     8   9      ; make_manifest.lua:14
0024    TSETS    8   0   8  ; "add_to_parser"
0025    FNEW     8  11      ; make_manifest.lua:28
0026    TSETS    8   0  10  ; "command"
0027    UCLO     0 => 0028
0028 => RET1     0   2

-----------------------
-- BYTECODE -- index.lua:98-124
0001    TGETS    1   0   0  ; "external_dependencies"
0002    ISF          1
0003    JMP      2 => 0067
0004    TNEW     1   0
0005    TNEW     2   0
0006    KPRI     3   0
0007    UGET     4   0      ; util
0008    TGETS    4   4   1  ; "sortedpairs"
0009    TGETS    5   0   0  ; "external_dependencies"
0010    CALL     4   4   2
0011    JMP      7 => 0025
0012 => ISEQS    7   2      ; "platforms"
0013    JMP      9 => 0024
0014    GGET     9   3      ; "table"
0015    TGETS    9   9   4  ; "insert"
0016    MOV     10   1
0017    MOV     12   7
0018    TGETS   11   7   5  ; "lower"
0019    CALL    11   0   2
0020    CALLM    9   1   1
0021    KPRI     9   2
0022    TSETV    9   2   7
0023    JMP      9 => 0025
0024 => MOV      3   8
0025 => ITERC    7   3   3
0026    ITERL    7 => 0012
0027    ISF          3
0028    JMP      4 => 0057
0029    UGET     4   0      ; util
0030    TGETS    4   4   1  ; "sortedpairs"
0031    MOV      5   3
0032    CALL     4   4   2
0033    JMP      7 => 0055
0034 => UGET     9   0      ; util
0035    TGETS    9   9   1  ; "sortedpairs"
0036    MOV     10   8
0037    CALL     9   4   2
0038    JMP     12 => 0053
0039 => TGETV   14   2  12
0040    IST         14
0041    JMP     14 => 0053
0042    GGET    14   3      ; "table"
0043    TGETS   14  14   4  ; "insert"
0044    MOV     15   1
0045    MOV     17  12
0046    TGETS   16  12   5  ; "lower"
0047    CALL    16   2   2
0048    KSTR    17   6      ; " (on "
0049    MOV     18   7
0050    KSTR    19   7      ; ")"
0051    CAT     16  16  19
0052    CALL    14   1   3
0053 => ITERC   12   3   3
0054    ITERL   12 => 0039
0055 => ITERC    7   3   3
0056    ITERL    7 => 0034
0057 => KSTR     4   8      ; "<p><b>External dependencies:</b> "
0058    GGET     5   3      ; "table"
0059    TGETS    5   5   9  ; "concat"
0060    MOV      6   1
0061    KSTR     7  10      ; ",&nbsp;"
0062    CALL     5   2   3
0063    KSTR     6  11      ; "</p>"
0064    CAT      4   4   6
0065    RET1     4   2
0066    JMP      1 => 0069
0067 => KSTR     1  12      ; ""
0068    RET1     1   2
0069 => RET0     0   1

-- BYTECODE -- index.lua:140-140
0001    TGETS    2   0   0  ; "arch"
0002    TGETS    3   1   0  ; "arch"
0003    ISLT     2   3
0004    JMP      2 => 0007
0005    KPRI     2   1
0006    JMP      3 => 0008
0007 => KPRI     2   2
0008 => RET1     2   2

-- BYTECODE -- index.lua:126-183
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "is_dir"
0003    MOV      2   0
0004    CALL     1   2   2
0005    IST          1
0006    JMP      1 => 0012
0007    KPRI     1   0
0008    KSTR     2   1      ; "Cannot access repository at "
0009    MOV      3   0
0010    CAT      2   2   3
0011    UCLO     0 => 0239
0012 => UGET     1   1      ; manif
0013    TGETS    1   1   2  ; "load_manifest"
0014    MOV      2   0
0015    CALL     1   2   2
0016    GGET     2   3      ; "io"
0017    TGETS    2   2   4  ; "open"
0018    UGET     3   2      ; dir
0019    TGETS    3   3   5  ; "path"
0020    MOV      4   0
0021    KSTR     5   6      ; "index.html"
0022    CALL     3   2   3
0023    KSTR     4   7      ; "w"
0024    CALL     2   2   3
0025    MOV      4   2
0026    TGETS    3   2   8  ; "write"
0027    UGET     5   3      ; index_header
0028    CALL     3   1   3
0029    UGET     3   4      ; util
0030    TGETS    3   3   9  ; "sortedpairs"
0031    TGETS    4   1  10  ; "repository"
0032    CALL     3   4   2
0033    JMP      6 => 0210
0034 => KPRI     8   0
0035    UGET     9   5      ; index_package_begin
0036    UGET    10   4      ; util
0037    TGETS   10  10   9  ; "sortedpairs"
0038    MOV     11   7
0039    UGET    12   6      ; vers
0040    TGETS   12  12  11  ; "compare_versions"
0041    CALL    10   4   3
0042    JMP     13 => 0100
0043 => TNEW    15   0
0044    MOV     16   9
0045    MOV     17  13
0046    KSTR    18  12      ; ":&nbsp;"
0047    CAT      9  16  18
0048    GGET    16  13      ; "table"
0049    TGETS   16  16  14  ; "sort"
0050    MOV     17  14
0051    FNEW    18  15      ; index.lua:140
0052    CALL    16   1   3
0053    GGET    16  16      ; "ipairs"
0054    MOV     17  14
0055    CALL    16   4   2
0056    JMP     19 => 0090
0057 => KPRI    21   0
0058    TGETS   22  20  17  ; "arch"
0059    ISNES   22  18      ; "rockspec"
0060    JMP     22 => 0072
0061    KSTR    22  19      ; "%s-%s.rockspec"
0062    MOV     23  22
0063    TGETS   22  22  20  ; "format"
0064    MOV     24   6
0065    MOV     25  13
0066    CALL    22   2   4
0067    MOV     21  22
0068    IST          8
0069    JMP     22 => 0080
0070    MOV      8  21
0071    JMP     22 => 0080
0072 => KSTR    22  21      ; "%s-%s.%s.rock"
0073    MOV     23  22
0074    TGETS   22  22  20  ; "format"
0075    MOV     24   6
0076    MOV     25  13
0077    TGETS   26  20  17  ; "arch"
0078    CALL    22   2   5
0079    MOV     21  22
0080 => GGET    22  13      ; "table"
0081    TGETS   22  22  22  ; "insert"
0082    MOV     23  15
0083    KSTR    24  23      ; "<a href=""
0084    MOV     25  21
0085    KSTR    26  24      ; "">"
0086    TGETS   27  20  17  ; "arch"
0087    KSTR    28  25      ; "</a>"
0088    CAT     24  24  28
0089    CALL    22   1   3
0090 => ITERC   19   3   3
0091    ITERL   19 => 0057
0092    MOV     16   9
0093    GGET    17  13      ; "table"
0094    TGETS   17  17  26  ; "concat"
0095    MOV     18  15
0096    KSTR    19  27      ; ",&nbsp;"
0097    CALL    17   2   3
0098    KSTR    18  28      ; "<br/>"
0099    CAT      9  16  18
0100 => ITERC   13   3   3
0101    ITERL   13 => 0043
0102    MOV     10   9
0103    UGET    11   7      ; index_package_end
0104    CAT      9  10  11
0105    ISF          8
0106    JMP     10 => 0188
0107    UGET    10   8      ; persist
0108    TGETS   10  10  29  ; "load_into_table"
0109    UGET    11   2      ; dir
0110    TGETS   11  11   5  ; "path"
0111    MOV     12   0
0112    MOV     13   8
0113    CALL    11   0   3
0114    CALLM   10   2   0
0115    TGETS   11  10  30  ; "description"
0116    IST         11
0117    JMP     12 => 0119
0118    TNEW    11   0
0119 => TDUP    12  31
0120    TSETS    6  12  32  ; "anchor"
0121    TGETS   13  10  33  ; "package"
0122    TSETS   13  12  33  ; "package"
0123    TGETS   13  10  34  ; "source"
0124    TGETS   13  13  35  ; "url"
0125    TSETS   13  12  36  ; "original"
0126    TGETS   13  11  37  ; "summary"
0127    IST         13
0128    JMP     14 => 0130
0129    KSTR    13  38      ; ""
0130 => TSETS   13  12  37  ; "summary"
0131    TGETS   13  11  39  ; "detailed"
0132    IST         13
0133    JMP     14 => 0135
0134    KSTR    13  38      ; ""
0135 => TSETS   13  12  39  ; "detailed"
0136    TGETS   13  11  40  ; "license"
0137    IST         13
0138    JMP     14 => 0140
0139    KSTR    13  41      ; "N/A"
0140 => TSETS   13  12  40  ; "license"
0141    TGETS   13  11  42  ; "homepage"
0142    ISF         13
0143    JMP     14 => 0152
0144    KSTR    13  43      ; "| <a href=""
0145    TGETS   14  11  42  ; "homepage"
0146    KSTR    15  44      ; """
0147    UGET    16   9      ; ext_url_target
0148    KSTR    17  45      ; ">project homepage</a>"
0149    CAT     13  13  17
0150    IST         13
0151    JMP     14 => 0153
0152 => KSTR    13  38      ; ""
0153 => TSETS   13  12  42  ; "homepage"
0154    UGET    13  10      ; index
0155    TGETS   13  13  46  ; "format_external_dependencies"
0156    MOV     14  10
0157    CALL    13   2   2
0158    TSETS   13  12  47  ; "externaldependencies"
0159    TGETS   13  12  39  ; "detailed"
0160    MOV     14  13
0161    TGETS   13  13  48  ; "gsub"
0162    KSTR    15  49      ; "\n\n"
0163    KSTR    16  50      ; "</p><p>"
0164    CALL    13   2   4
0165    MOV     14  13
0166    TGETS   13  13  48  ; "gsub"
0167    KSTR    15  51      ; "%s+"
0168    KSTR    16  52      ; " "
0169    CALL    13   2   4
0170    TSETS   13  12  39  ; "detailed"
0171    TGETS   13  12  39  ; "detailed"
0172    MOV     14  13
0173    TGETS   13  13  48  ; "gsub"
0174    KSTR    15  53      ; "(https?://[a-zA-Z0-9%.%%-_%+%[%]=%?&/$@;"~
0175    KSTR    16  54      ; "<a href="%1""
0176    UGET    17   9      ; ext_url_target
0177    KSTR    18  55      ; ">%1</a>"
0178    CAT     16  16  18
0179    CALL    13   2   4
0180    TSETS   13  12  39  ; "detailed"
0181    MOV     14   9
0182    TGETS   13   9  48  ; "gsub"
0183    KSTR    15  56      ; "$(%w+)"
0184    MOV     16  12
0185    CALL    13   2   4
0186    MOV      9  13
0187    JMP     10 => 0206
0188 => MOV     11   9
0189    TGETS   10   9  48  ; "gsub"
0190    KSTR    12  57      ; "$anchor"
0191    MOV     13   6
0192    CALL    10   2   4
0193    MOV      9  10
0194    MOV     11   9
0195    TGETS   10   9  48  ; "gsub"
0196    KSTR    12  58      ; "$package"
0197    MOV     13   6
0198    CALL    10   2   4
0199    MOV      9  10
0200    MOV     11   9
0201    TGETS   10   9  48  ; "gsub"
0202    KSTR    12  56      ; "$(%w+)"
0203    KSTR    13  38      ; ""
0204    CALL    10   2   4
0205    MOV      9  10
0206 => MOV     11   2
0207    TGETS   10   2   8  ; "write"
0208    MOV     12   9
0209    CALL    10   1   3
0210 => ITERC    6   3   3
0211    ITERL    6 => 0034
0212    MOV      4   2
0213    TGETS    3   2   8  ; "write"
0214    UGET     5  11      ; index_footer_begin
0215    CALL     3   1   3
0216    UGET     3   4      ; util
0217    TGETS    3   3  59  ; "lua_versions"
0218    CALL     3   4   1
0219    JMP      6 => 0229
0220 => MOV      8   2
0221    TGETS    7   2   8  ; "write"
0222    UGET     9  12      ; index_manifest_ver
0223    MOV     10   9
0224    TGETS    9   9  48  ; "gsub"
0225    KSTR    11  60      ; "$VER"
0226    MOV     12   6
0227    CALL     9   2   4
0228    CALL     7   1   3
0229 => ITERC    6   2   3
0230    ITERL    6 => 0220
0231    MOV      4   2
0232    TGETS    3   2   8  ; "write"
0233    UGET     5  13      ; index_footer_end
0234    CALL     3   1   3
0235    MOV      4   2
0236    TGETS    3   2  61  ; "close"
0237    CALL     3   1   2
0238    RET0     0   1
0239 => RET      1   3

-- BYTECODE -- index.lua:0-186
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.util"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fs"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.vers"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.persist"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.dir"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.manif"
0019    CALL     6   2   2
0020    KSTR     7   7      ; " target="_blank""
0021    KSTR     8   8      ; "<!DOCTYPE html PUBLIC "-//W3C//DTD HTML "~
0022    KSTR     9   9      ; "<td class="package">\n<p><a name="$ancho"~
0023    KSTR    10  10      ; "</td></tr>\n<tr><td colspan="2" class="s"~
0024    KSTR    11  11      ; "</table>\n<p class="manifest">\n<a href="~
0025    KSTR    12  12      ; "&bull; <a href="manifest-$VER">Lua $VER "~
0026    KSTR    13  13      ; "</p>\n</body>\n</html>\n"
0027    FNEW    14  15      ; index.lua:98
0028    TSETS   14   0  14  ; "format_external_dependencies"
0029    FNEW    14  17      ; index.lua:126
0030    TSETS   14   0  16  ; "make_index"
0031    UCLO     0 => 0032
0032 => RET1     0   2

-----------------------
-- BYTECODE -- cache.lua:11-17
0001    IST          0
0002    JMP      1 => 0005
0003    UGET     1   0      ; cfg
0004    TGETS    0   1   0  ; "upload_server"
0005 => IST          0
0006    JMP      1 => 0010
0007    KPRI     1   0
0008    KSTR     2   1      ; "No server specified and no default confi"~
0009    RET      1   3
0010 => MOV      1   0
0011    UGET     2   0      ; cfg
0012    TGETS    2   2   2  ; "upload_servers"
0013    ISF          2
0014    JMP      3 => 0018
0015    UGET     2   0      ; cfg
0016    TGETS    2   2   2  ; "upload_servers"
0017    TGETV    2   2   0
0018 => RET      1   3

-- BYTECODE -- cache.lua:19-33
0001    MOV      2   0
0002    KPRI     3   0
0003    ISF          1
0004    JMP      4 => 0038
0005    TGETS    4   1   0  ; "rsync"
0006    ISF          4
0007    JMP      5 => 0012
0008    KSTR     4   1      ; "rsync://"
0009    TGETS    5   1   0  ; "rsync"
0010    CAT      2   4   5
0011    JMP      4 => 0025
0012 => TGETS    4   1   2  ; "http"
0013    ISF          4
0014    JMP      5 => 0019
0015    KSTR     4   3      ; "http://"
0016    TGETS    5   1   2  ; "http"
0017    CAT      2   4   5
0018    JMP      4 => 0025
0019 => TGETS    4   1   4  ; "ftp"
0020    ISF          4
0021    JMP      5 => 0025
0022    KSTR     4   5      ; "ftp://"
0023    TGETS    5   1   4  ; "ftp"
0024    CAT      2   4   5
0025 => TGETS    4   1   4  ; "ftp"
0026    ISF          4
0027    JMP      5 => 0032
0028    KSTR     4   5      ; "ftp://"
0029    TGETS    5   1   4  ; "ftp"
0030    CAT      3   4   5
0031    JMP      4 => 0038
0032 => TGETS    4   1   6  ; "sftp"
0033    ISF          4
0034    JMP      5 => 0038
0035    KSTR     4   7      ; "sftp://"
0036    TGETS    5   1   6  ; "sftp"
0037    CAT      3   4   5
0038 => MOV      4   2
0039    MOV      5   3
0040    RET      4   3

-- BYTECODE -- cache.lua:35-50
0001    UGET     3   0      ; dir
0002    TGETS    3   3   0  ; "split_url"
0003    MOV      4   0
0004    CALL     3   3   2
0005    ISNES    3   1      ; "file"
0006    JMP      5 => 0013
0007    UGET     5   1      ; fs
0008    TGETS    5   5   2  ; "absolute_name"
0009    MOV      6   4
0010    CALL     5   2   2
0011    MOV      4   5
0012    JMP      5 => 0040
0013 => MOV      6   4
0014    TGETS    5   4   3  ; "match"
0015    KSTR     7   4      ; "@"
0016    CALL     5   2   3
0017    ISF          5
0018    JMP      6 => 0040
0019    KPRI     5   0
0020    MOV      7   4
0021    TGETS    6   4   3  ; "match"
0022    KSTR     8   5      ; "([^@]*)@(.*)"
0023    CALL     6   3   3
0024    MOV      4   7
0025    MOV      5   6
0026    MOV      7   5
0027    TGETS    6   5   3  ; "match"
0028    KSTR     8   6      ; ":"
0029    CALL     6   2   3
0030    ISF          6
0031    JMP      7 => 0039
0032    MOV      7   5
0033    TGETS    6   5   3  ; "match"
0034    KSTR     8   7      ; "([^:]*):(.*)"
0035    CALL     6   3   3
0036    MOV      2   7
0037    MOV      1   6
0038    JMP      6 => 0040
0039 => MOV      1   5
0040 => UGET     5   2      ; cfg
0041    TGETS    5   5   8  ; "local_cache"
0042    KSTR     6   9      ; "/"
0043    MOV      8   4
0044    TGETS    7   4  10  ; "gsub"
0045    KSTR     9  11      ; "[\/]"
0046    KSTR    10  12      ; "_"
0047    CALL     7   2   4
0048    CAT      5   5   7
0049    MOV      6   5
0050    MOV      7   3
0051    MOV      8   4
0052    MOV      9   1
0053    MOV     10   2
0054    RET      6   6

-- BYTECODE -- cache.lua:52-66
0001    GGET     4   0      ; "os"
0002    TGETS    4   4   1  ; "remove"
0003    KSTR     5   2      ; "index.html"
0004    CALL     4   1   2
0005    ISNES    0   3      ; "rsync"
0006    JMP      4 => 0030
0007    MOV      5   1
0008    TGETS    4   1   4  ; "match"
0009    KSTR     6   5      ; "([^/]+)(/.+)"
0010    CALL     4   3   3
0011    UGET     6   0      ; fs
0012    TGETS    6   6   6  ; "execute"
0013    UGET     7   1      ; cfg
0014    TGETS    7   7   7  ; "variables"
0015    TGETS    7   7   8  ; "RSYNC"
0016    KSTR     8   9      ; " "
0017    UGET     9   1      ; cfg
0018    TGETS    9   9   7  ; "variables"
0019    TGETS    9   9  10  ; "RSYNCFLAGS"
0020    KSTR    10  11      ; " -e ssh "
0021    MOV     11   2
0022    KSTR    12  12      ; "@"
0023    MOV     13   4
0024    KSTR    14  13      ; ":"
0025    MOV     15   5
0026    KSTR    16  14      ; "/ ./"
0027    CAT      7   7  16
0028    CALLT    6   2
0029    JMP      4 => 0062
0030 => ISNES    0  15      ; "file"
0031    JMP      4 => 0038
0032    UGET     4   0      ; fs
0033    TGETS    4   4  16  ; "copy_contents"
0034    MOV      5   1
0035    KSTR     6  17      ; "."
0036    CALLT    4   3
0037    JMP      4 => 0062
0038 => KSTR     4  18      ; ""
0039    ISF          2
0040    JMP      5 => 0044
0041    KSTR     5  19      ; " --user="
0042    MOV      6   2
0043    CAT      4   5   6
0044 => ISF          3
0045    JMP      5 => 0050
0046    MOV      5   4
0047    KSTR     6  20      ; " --password="
0048    MOV      7   3
0049    CAT      4   5   7
0050 => UGET     5   0      ; fs
0051    TGETS    5   5   6  ; "execute"
0052    UGET     6   1      ; cfg
0053    TGETS    6   6   7  ; "variables"
0054    TGETS    6   6  21  ; "WGET"
0055    KSTR     7  22      ; " --no-cache -q -m -np -nd "
0056    MOV      8   0
0057    KSTR     9  23      ; "://"
0058    MOV     10   1
0059    MOV     11   4
0060    CAT      6   6  11
0061    CALLT    5   2
0062 => RET0     0   1

-- BYTECODE -- cache.lua:68-86
0001    UGET     3   0      ; cache
0002    TGETS    3   3   0  ; "split_server_url"
0003    MOV      4   0
0004    MOV      5   1
0005    MOV      6   2
0006    CALL     3   6   4
0007    UGET     8   1      ; fs
0008    TGETS    8   8   1  ; "make_dir"
0009    MOV      9   3
0010    CALL     8   3   2
0011    IST          8
0012    JMP     10 => 0018
0013    KPRI    10   0
0014    KSTR    11   2      ; "Failed creating local cache dir: "
0015    MOV     12   9
0016    CAT     11  11  12
0017    RET     10   3
0018 => UGET    10   1      ; fs
0019    TGETS   10  10   3  ; "change_dir"
0020    MOV     11   3
0021    CALL    10   1   2
0022    UGET    10   2      ; util
0023    TGETS   10  10   4  ; "printout"
0024    KSTR    11   5      ; "Refreshing cache "
0025    MOV     12   3
0026    KSTR    13   6      ; "..."
0027    CAT     11  11  13
0028    CALL    10   1   2
0029    UGET    10   3      ; download_cache
0030    MOV     11   4
0031    MOV     12   5
0032    MOV     13   6
0033    MOV     14   7
0034    CALL    10   2   5
0035    MOV      8  10
0036    IST          8
0037    JMP     10 => 0041
0038    KPRI    10   0
0039    KSTR    11   7      ; "Failed downloading cache."
0040    RET     10   3
0041 => MOV     10   3
0042    MOV     11   4
0043    MOV     12   5
0044    MOV     13   6
0045    MOV     14   7
0046    RET     10   6

-- BYTECODE -- cache.lua:0-89
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.util"
0013    CALL     4   2   2
0014    FNEW     5   6      ; cache.lua:11
0015    TSETS    5   0   5  ; "get_upload_server"
0016    FNEW     5   8      ; cache.lua:19
0017    TSETS    5   0   7  ; "get_server_urls"
0018    FNEW     5  10      ; cache.lua:35
0019    TSETS    5   0   9  ; "split_server_url"
0020    FNEW     5  11      ; cache.lua:52
0021    FNEW     6  13      ; cache.lua:68
0022    TSETS    6   0  12  ; "refresh_local_cache"
0023    UCLO     0 => 0024
0024 => RET1     0   2

-----------------------
-- BYTECODE -- queries.lua:12-14
0001    KSTR     0   0      ; "query"
0002    RET1     0   2

-- BYTECODE -- queries.lua:30-40
0001    GGET     1   0      ; "type"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISNES    1   1      ; "table"
0005    JMP      1 => 0008
0006    RET1     0   2
0007    JMP      1 => 0024
0008 => GGET     1   0      ; "type"
0009    MOV      2   0
0010    CALL     1   2   2
0011    ISNES    1   2      ; "string"
0012    JMP      1 => 0024
0013    TNEW     1   0
0014    MOV      3   0
0015    TGETS    2   0   3  ; "gmatch"
0016    KSTR     4   4      ; "[%w_-]+"
0017    CALL     2   4   3
0018    JMP      5 => 0021
0019 => KPRI     6   2
0020    TSETV    6   1   5
0021 => ITERC    5   2   3
0022    ITERL    5 => 0019
0023    RET1     1   2
0024 => RET0     0   1

-- BYTECODE -- queries.lua:51-74
0001    GGET     6   0      ; "assert"
0002    GGET     7   1      ; "type"
0003    MOV      8   0
0004    CALL     7   2   2
0005    ISEQS    7   2      ; "string"
0006    JMP      7 => 0009
0007    KPRI     7   1
0008    JMP      8 => 0010
0009 => KPRI     7   2
0010 => CALL     6   1   2
0011    GGET     6   0      ; "assert"
0012    GGET     7   1      ; "type"
0013    MOV      8   1
0014    CALL     7   2   2
0015    ISEQS    7   2      ; "string"
0016    JMP      7 => 0021
0017    NOT      7   1
0018    JMP      8 => 0022
0019    KPRI     7   1
0020    JMP      8 => 0022
0021 => KPRI     7   2
0022 => CALL     6   1   2
0023    GGET     6   0      ; "assert"
0024    GGET     7   1      ; "type"
0025    MOV      8   2
0026    CALL     7   2   2
0027    ISEQS    7   2      ; "string"
0028    JMP      7 => 0033
0029    NOT      7   2
0030    JMP      8 => 0034
0031    KPRI     7   1
0032    JMP      8 => 0034
0033 => KPRI     7   2
0034 => CALL     6   1   2
0035    GGET     6   0      ; "assert"
0036    GGET     7   1      ; "type"
0037    MOV      8   3
0038    CALL     7   2   2
0039    ISEQS    7   3      ; "boolean"
0040    JMP      7 => 0045
0041    NOT      7   3
0042    JMP      8 => 0046
0043    KPRI     7   1
0044    JMP      8 => 0046
0045 => KPRI     7   2
0046 => CALL     6   1   2
0047    GGET     6   0      ; "assert"
0048    GGET     7   1      ; "type"
0049    MOV      8   4
0050    CALL     7   2   2
0051    ISEQS    7   2      ; "string"
0052    JMP      7 => 0057
0053    NOT      7   4
0054    JMP      8 => 0058
0055    KPRI     7   1
0056    JMP      8 => 0058
0057 => KPRI     7   2
0058 => CALL     6   1   2
0059    GGET     6   0      ; "assert"
0060    GGET     7   1      ; "type"
0061    MOV      8   5
0062    CALL     7   2   2
0063    ISEQS    7   2      ; "string"
0064    JMP      7 => 0069
0065    NOT      7   5
0066    JMP      8 => 0070
0067    KPRI     7   1
0068    JMP      8 => 0070
0069 => KPRI     7   2
0070 => CALL     6   1   2
0071    IST          5
0072    JMP      6 => 0074
0073    KSTR     5   4      ; "=="
0074 => TDUP     6   5
0075    TSETS    0   6   6  ; "name"
0076    TSETS    1   6   7  ; "namespace"
0077    TNEW     7   0
0078    TSETS    7   6   8  ; "constraints"
0079    TSETS    3   6   9  ; "substring"
0080    UGET     7   0      ; arch_to_table
0081    MOV      8   4
0082    CALL     7   2   2
0083    TSETS    7   6  10  ; "arch"
0084    ISF          2
0085    JMP      7 => 0097
0086    GGET     7  11      ; "table"
0087    TGETS    7   7  12  ; "insert"
0088    TGETS    8   6   8  ; "constraints"
0089    TDUP     9  13
0090    TSETS    5   9  14  ; "op"
0091    UGET    10   1      ; vers
0092    TGETS   10  10  15  ; "parse_version"
0093    MOV     11   2
0094    CALL    10   2   2
0095    TSETS   10   9  16  ; "version"
0096    CALL     7   1   3
0097 => UGET     7   2      ; query_mt
0098    TGETS    7   7  10  ; "arch"
0099    UGET     8   3      ; cfg
0100    TGETS    8   8  10  ; "arch"
0101    KPRI     9   2
0102    TSETV    9   7   8
0103    GGET     7  17      ; "setmetatable"
0104    MOV      8   6
0105    UGET     9   2      ; query_mt
0106    CALLT    7   3

-- BYTECODE -- queries.lua:78-82
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0011
0007    NOT      2   0
0008    JMP      3 => 0012
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => CALL     1   1   2
0013    UGET     1   0      ; queries
0014    TGETS    1   1   3  ; "new"
0015    KSTR     2   4      ; ""
0016    KNIL     3   4
0017    KPRI     5   2
0018    MOV      6   0
0019    CALLT    1   6

-- BYTECODE -- queries.lua:111-124
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "match"
0013    KSTR     3   4      ; "^(@?)([<>=~!]*)%s*([%w%.%_%-]+)[%s,]*(.*"~
0014    CALL     1   5   3
0015    UGET     5   0      ; operators
0016    TGETV    5   5   2
0017    UGET     6   1      ; vers
0018    TGETS    6   6   5  ; "parse_version"
0019    MOV      7   3
0020    CALL     6   2   2
0021    MOV      3   6
0022    IST          5
0023    JMP      6 => 0034
0024    KPRI     6   0
0025    KSTR     7   6      ; "Encountered bad constraint operator: '"
0026    GGET     8   7      ; "tostring"
0027    MOV      9   2
0028    CALL     8   2   2
0029    KSTR     9   8      ; "' in '"
0030    MOV     10   0
0031    KSTR    11   9      ; "'"
0032    CAT      7   7  11
0033    RET      6   3
0034 => IST          3
0035    JMP      6 => 0042
0036    KPRI     6   0
0037    KSTR     7  10      ; "Could not parse version from constraint:"~
0038    MOV      8   0
0039    KSTR     9   9      ; "'"
0040    CAT      7   7   9
0041    RET      6   3
0042 => TDUP     6  11
0043    TSETS    5   6  12  ; "op"
0044    TSETS    3   6  13  ; "version"
0045    ISNES    1  14      ; "@"
0046    JMP      7 => 0049
0047    KPRI     7   2
0048    JMP      8 => 0050
0049 => KPRI     7   0
0050 => TSETS    7   6  15  ; "no_upgrade"
0051    MOV      7   4
0052    RET      6   3

-- BYTECODE -- queries.lua:135-148
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    TNEW     1   0
0012    MOV      2   0
0013    KPRI     3   0
0014 => LEN      4   0
0015    KSHORT   5   0
0016    ISGE     5   4
0017    JMP      4 => 0042
0018    LOOP     4 => 0042
0019    UGET     4   0      ; parse_constraint
0020    MOV      5   0
0021    CALL     4   3   2
0022    MOV      0   5
0023    MOV      3   4
0024    ISF          3
0025    JMP      4 => 0032
0026    GGET     4   3      ; "table"
0027    TGETS    4   4   4  ; "insert"
0028    MOV      5   1
0029    MOV      6   3
0030    CALL     4   1   3
0031    JMP      4 => 0014
0032 => KPRI     4   0
0033    KSTR     5   5      ; "Failed to parse constraint '"
0034    GGET     6   6      ; "tostring"
0035    MOV      7   2
0036    CALL     6   2   2
0037    KSTR     7   7      ; "' with error: "
0038    MOV      8   0
0039    CAT      5   5   8
0040    RET      4   3
0041    JMP      4 => 0014
0042 => RET1     1   2

-- BYTECODE -- queries.lua:155-178
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "match"
0013    KSTR     3   4      ; "^%s*([a-zA-Z0-9%.%-%_]*/?[a-zA-Z0-9][a-z"~
0014    CALL     1   3   3
0015    IST          1
0016    JMP      3 => 0023
0017    KPRI     3   0
0018    KSTR     4   5      ; "failed to extract dependency name from '"
0019    MOV      5   0
0020    KSTR     6   6      ; "'"
0021    CAT      4   4   6
0022    RET      3   3
0023 => UGET     3   0      ; parse_constraints
0024    MOV      4   2
0025    CALL     3   3   2
0026    IST          3
0027    JMP      5 => 0031
0028    KPRI     5   0
0029    MOV      6   4
0030    RET      5   3
0031 => UGET     5   1      ; util
0032    TGETS    5   5   7  ; "split_namespace"
0033    MOV      6   1
0034    CALL     5   3   2
0035    TDUP     7   8
0036    TSETS    5   7   9  ; "name"
0037    TSETS    6   7  10  ; "namespace"
0038    TSETS    3   7  11  ; "constraints"
0039    UGET     8   2      ; query_mt
0040    TGETS    8   8  12  ; "arch"
0041    UGET     9   3      ; cfg
0042    TGETS    9   9  12  ; "arch"
0043    KPRI    10   2
0044    TSETV   10   8   9
0045    GGET     8  13      ; "setmetatable"
0046    MOV      9   7
0047    UGET    10   2      ; query_mt
0048    CALLT    8   3

-- BYTECODE -- queries.lua:181-184
0001    UGET     1   0      ; query_mt
0002    TGETS    1   1   0  ; "arch"
0003    UGET     2   1      ; cfg
0004    TGETS    2   2   0  ; "arch"
0005    KPRI     3   2
0006    TSETV    3   1   2
0007    GGET     1   1      ; "setmetatable"
0008    MOV      2   0
0009    UGET     3   0      ; query_mt
0010    CALLT    1   3

-- BYTECODE -- queries.lua:190-213
0001    TNEW     1   0
0002    TGETS    2   0   0  ; "namespace"
0003    ISF          2
0004    JMP      3 => 0015
0005    GGET     2   1      ; "table"
0006    TGETS    2   2   2  ; "insert"
0007    MOV      3   1
0008    TGETS    4   0   0  ; "namespace"
0009    CALL     2   1   3
0010    GGET     2   1      ; "table"
0011    TGETS    2   2   2  ; "insert"
0012    MOV      3   1
0013    KSTR     4   3      ; "/"
0014    CALL     2   1   3
0015 => GGET     2   1      ; "table"
0016    TGETS    2   2   2  ; "insert"
0017    MOV      3   1
0018    TGETS    4   0   4  ; "name"
0019    CALL     2   1   3
0020    TGETS    2   0   5  ; "constraints"
0021    LEN      2   2
0022    KSHORT   3   0
0023    ISGE     3   2
0024    JMP      2 => 0065
0025    TNEW     2   0
0026    GGET     3   6      ; "ipairs"
0027    TGETS    4   0   5  ; "constraints"
0028    CALL     3   4   2
0029    JMP      6 => 0049
0030 => TGETS    8   7   7  ; "version"
0031    TGETS    8   8   8  ; "string"
0032    TGETS    9   7   9  ; "op"
0033    ISNES    9  10      ; "=="
0034    JMP      9 => 0041
0035    GGET     9   1      ; "table"
0036    TGETS    9   9   2  ; "insert"
0037    MOV     10   2
0038    MOV     11   8
0039    CALL     9   1   3
0040    JMP      9 => 0049
0041 => GGET     9   1      ; "table"
0042    TGETS    9   9   2  ; "insert"
0043    MOV     10   2
0044    TGETS   11   7   9  ; "op"
0045    KSTR    12  11      ; " "
0046    MOV     13   8
0047    CAT     11  11  13
0048    CALL     9   1   3
0049 => ITERC    6   3   3
0050    ITERL    6 => 0030
0051    GGET     3   1      ; "table"
0052    TGETS    3   3   2  ; "insert"
0053    MOV      4   1
0054    KSTR     5  11      ; " "
0055    CALL     3   1   3
0056    GGET     3   1      ; "table"
0057    TGETS    3   3   2  ; "insert"
0058    MOV      4   1
0059    GGET     5   1      ; "table"
0060    TGETS    5   5  12  ; "concat"
0061    MOV      6   2
0062    KSTR     7  13      ; ", "
0063    CALL     5   0   3
0064    CALLM    3   1   1
0065 => GGET     2   1      ; "table"
0066    TGETS    2   2  12  ; "concat"
0067    MOV      3   1
0068    CALLT    2   2

-- BYTECODE -- queries.lua:0-216
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.vers"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    TNEW     4   0
0012    TSETS    4   4   4  ; "__index"
0013    FNEW     5   6      ; queries.lua:12
0014    TSETS    5   4   5  ; "type"
0015    TDUP     5   8
0016    TSETS    5   4   7  ; "arch"
0017    KPRI     5   1
0018    TSETS    5   4   9  ; "substring"
0019    FNEW     5  10      ; queries.lua:30
0020    FNEW     6  12      ; queries.lua:51
0021    TSETS    6   0  11  ; "new"
0022    FNEW     6  14      ; queries.lua:78
0023    TSETS    6   0  13  ; "all"
0024    KNIL     6   7
0025    TDUP     8  15
0026    FNEW     7  16      ; queries.lua:111
0027    UCLO     8 => 0028
0028 => FNEW     6  17      ; queries.lua:135
0029    UCLO     7 => 0030
0030 => FNEW     7  19      ; queries.lua:155
0031    TSETS    7   0  18  ; "from_dep_string"
0032    UCLO     6 => 0033
0033 => FNEW     6  21      ; queries.lua:181
0034    TSETS    6   0  20  ; "from_persisted_table"
0035    FNEW     6  23      ; queries.lua:190
0036    TSETS    6   4  22  ; "__tostring"
0037    UCLO     0 => 0038
0038 => RET1     0   2

-----------------------
-- BYTECODE -- require.lua:0-3
0001    GGET     0   0      ; "require"
0002    KSTR     1   1      ; "luarocks.loader"
0003    CALLT    0   2

-----------------------
-- BYTECODE -- path.lua:23-27
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; dir
0012    TGETS    1   1   3  ; "base_name"
0013    MOV      2   0
0014    CALL     1   2   2
0015    MOV      3   1
0016    TGETS    2   1   4  ; "match"
0017    KSTR     4   5      ; "(.*)%.[^.]*.rock"
0018    CALL     2   2   3
0019    KSTR     3   6      ; ".rockspec"
0020    CAT      2   2   3
0021    RET1     2   2

-- BYTECODE -- path.lua:29-32
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "match"
0013    KSTR     3   4      ; "(.*)"
0014    UGET     4   0      ; util
0015    TGETS    4   4   5  ; "matchquote"
0016    UGET     5   1      ; cfg
0017    TGETS    5   5   6  ; "rocks_subdir"
0018    CALL     4   2   2
0019    KSTR     5   7      ; ".*$"
0020    CAT      3   3   5
0021    CALLT    1   3

-- BYTECODE -- path.lua:34-41
0001    GGET     1   0      ; "type"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISNES    1   1      ; "string"
0005    JMP      1 => 0008
0006    RET1     0   2
0007    JMP      1 => 0020
0008 => GGET     1   2      ; "assert"
0009    GGET     2   0      ; "type"
0010    MOV      3   0
0011    CALL     2   2   2
0012    ISEQS    2   3      ; "table"
0013    JMP      2 => 0016
0014    KPRI     2   1
0015    JMP      3 => 0017
0016 => KPRI     2   2
0017 => CALL     1   1   2
0018    TGETS    1   0   4  ; "root"
0019    RET1     1   2
0020 => RET0     0   1

-- BYTECODE -- path.lua:43-45
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "path"
0003    UGET     2   1      ; path
0004    TGETS    2   2   1  ; "root_dir"
0005    MOV      3   0
0006    CALL     2   2   2
0007    KSTR     3   2      ; "bin"
0008    CALLT    1   3

-- BYTECODE -- path.lua:47-49
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "path"
0003    UGET     2   1      ; path
0004    TGETS    2   2   1  ; "rocks_dir"
0005    MOV      3   0
0006    CALL     2   2   2
0007    KSTR     3   2      ; "manifest"
0008    CALLT    1   3

-- BYTECODE -- path.lua:56-59
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISNES    3   2      ; "string"
0006    JMP      3 => 0013
0007    MOV      4   0
0008    TGETS    3   0   3  ; "match"
0009    KSTR     5   4      ; "/"
0010    CALL     3   2   3
0011    NOT      3   3
0012    JMP      4 => 0016
0013 => KPRI     3   1
0014    JMP      4 => 0016
0015    KPRI     3   2
0016 => CALL     2   1   2
0017    UGET     2   0      ; dir
0018    TGETS    2   2   5  ; "path"
0019    UGET     3   1      ; path
0020    TGETS    3   3   6  ; "rocks_dir"
0021    MOV      4   1
0022    CALL     3   2   2
0023    MOV      4   0
0024    CALLT    2   3

-- BYTECODE -- path.lua:67-71
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    CALLT    3   4

-- BYTECODE -- path.lua:79-83
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    MOV      7   0
0036    KSTR     8   7      ; "-"
0037    MOV      9   1
0038    KSTR    10   8      ; ".rockspec"
0039    CAT      7   7  10
0040    CALLT    3   5

-- BYTECODE -- path.lua:91-95
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    KSTR     7   7      ; "rock_manifest"
0036    CALLT    3   5

-- BYTECODE -- path.lua:103-107
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    KSTR     7   7      ; "rock_namespace"
0036    CALLT    3   5

-- BYTECODE -- path.lua:115-119
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    KSTR     7   7      ; "lib"
0036    CALLT    3   5

-- BYTECODE -- path.lua:127-131
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    KSTR     7   7      ; "lua"
0036    CALLT    3   5

-- BYTECODE -- path.lua:139-143
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    KSTR     7   7      ; "doc"
0036    CALLT    3   5

-- BYTECODE -- path.lua:151-155
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    KSTR     7   7      ; "conf"
0036    CALLT    3   5

-- BYTECODE -- path.lua:164-168
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    UGET     3   0      ; dir
0028    TGETS    3   3   5  ; "path"
0029    UGET     4   1      ; path
0030    TGETS    4   4   6  ; "rocks_dir"
0031    MOV      5   2
0032    CALL     4   2   2
0033    MOV      5   0
0034    MOV      6   1
0035    KSTR     7   7      ; "bin"
0036    CALLT    3   5

-- BYTECODE -- path.lua:175-182
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "match"
0013    KSTR     3   4      ; "%.rock$"
0014    CALL     1   2   3
0015    ISF          1
0016    JMP      2 => 0026
0017    UGET     1   0      ; dir
0018    TGETS    1   1   5  ; "base_name"
0019    MOV      2   0
0020    CALL     1   2   2
0021    MOV      2   1
0022    TGETS    1   1   3  ; "match"
0023    KSTR     3   6      ; "(.*)-([^-]+-%d+)%.([^.]+)%.rock$"
0024    CALLT    1   3
0025    JMP      1 => 0034
0026 => UGET     1   0      ; dir
0027    TGETS    1   1   5  ; "base_name"
0028    MOV      2   0
0029    CALL     1   2   2
0030    MOV      2   1
0031    TGETS    1   1   3  ; "match"
0032    KSTR     3   7      ; "(.*)-([^-]+-%d+)%.(rockspec)"
0033    CALLT    1   3
0034 => RET0     0   1

-- BYTECODE -- path.lua:190-205
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISNES    5   2      ; "string"
0016    JMP      5 => 0023
0017    MOV      6   1
0018    TGETS    5   1   3  ; "match"
0019    KSTR     7   4      ; "/"
0020    CALL     5   2   3
0021    NOT      5   5
0022    JMP      6 => 0026
0023 => KPRI     5   1
0024    JMP      6 => 0026
0025    KPRI     5   2
0026 => CALL     4   1   2
0027    GGET     4   0      ; "assert"
0028    GGET     5   1      ; "type"
0029    MOV      6   2
0030    CALL     5   2   2
0031    ISEQS    5   2      ; "string"
0032    JMP      5 => 0035
0033    KPRI     5   1
0034    JMP      6 => 0036
0035 => KPRI     5   2
0036 => CALL     4   1   2
0037    GGET     4   0      ; "assert"
0038    GGET     5   1      ; "type"
0039    MOV      6   3
0040    CALL     5   2   2
0041    ISEQS    5   2      ; "string"
0042    JMP      5 => 0045
0043    KPRI     5   1
0044    JMP      6 => 0046
0045 => KPRI     5   2
0046 => CALL     4   1   2
0047    MOV      4   1
0048    KSTR     5   5      ; "-"
0049    MOV      6   2
0050    CAT      4   4   6
0051    ISNES    3   6      ; "installed"
0052    JMP      5 => 0063
0053    UGET     5   0      ; dir
0054    TGETS    5   5   7  ; "path"
0055    MOV      6   1
0056    MOV      7   2
0057    MOV      8   4
0058    KSTR     9   8      ; ".rockspec"
0059    CAT      8   8   9
0060    CALL     5   2   4
0061    MOV      4   5
0062    JMP      5 => 0074
0063 => ISNES    3   9      ; "rockspec"
0064    JMP      5 => 0069
0065    MOV      5   4
0066    KSTR     6   8      ; ".rockspec"
0067    CAT      4   5   6
0068    JMP      5 => 0074
0069 => MOV      5   4
0070    KSTR     6  10      ; "."
0071    MOV      7   3
0072    KSTR     8  11      ; ".rock"
0073    CAT      4   5   8
0074 => UGET     5   0      ; dir
0075    TGETS    5   5   7  ; "path"
0076    MOV      6   0
0077    MOV      7   4
0078    CALLT    5   3

-- BYTECODE -- path.lua:211-214
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    MOV      2   0
0012    TGETS    1   0   3  ; "gsub"
0013    KSTR     3   4      ; "[^.]*$"
0014    KSTR     4   5      ; ""
0015    CALL     1   2   4
0016    MOV      2   1
0017    TGETS    1   1   3  ; "gsub"
0018    KSTR     3   6      ; "%."
0019    KSTR     4   7      ; "/"
0020    CALL     1   2   4
0021    RET1     1   2

-- BYTECODE -- path.lua:216-229
0001    UGET     1   0      ; cfg
0002    TSETS    0   1   0  ; "root_dir"
0003    UGET     1   0      ; cfg
0004    UGET     2   1      ; path
0005    TGETS    2   2   1  ; "rocks_dir"
0006    MOV      3   0
0007    CALL     2   2   2
0008    TSETS    2   1   1  ; "rocks_dir"
0009    UGET     1   0      ; cfg
0010    UGET     2   1      ; path
0011    TGETS    2   2   2  ; "deploy_bin_dir"
0012    MOV      3   0
0013    CALL     2   2   2
0014    TSETS    2   1   2  ; "deploy_bin_dir"
0015    UGET     1   0      ; cfg
0016    UGET     2   1      ; path
0017    TGETS    2   2   3  ; "deploy_lua_dir"
0018    MOV      3   0
0019    CALL     2   2   2
0020    TSETS    2   1   3  ; "deploy_lua_dir"
0021    UGET     1   0      ; cfg
0022    UGET     2   1      ; path
0023    TGETS    2   2   4  ; "deploy_lib_dir"
0024    MOV      3   0
0025    CALL     2   2   2
0026    TSETS    2   1   4  ; "deploy_lib_dir"
0027    RET0     0   1

-- BYTECODE -- path.lua:236-248
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    GGET     3   0      ; "assert"
0028    GGET     4   1      ; "type"
0029    MOV      5   2
0030    CALL     4   2   2
0031    ISEQS    4   2      ; "string"
0032    JMP      4 => 0035
0033    KPRI     4   1
0034    JMP      5 => 0036
0035 => KPRI     4   2
0036 => CALL     3   1   2
0037    KPRI     3   0
0038    GGET     4   5      ; "io"
0039    TGETS    4   4   6  ; "open"
0040    UGET     5   0      ; path
0041    TGETS    5   5   7  ; "rock_namespace_file"
0042    MOV      6   0
0043    MOV      7   1
0044    MOV      8   2
0045    CALL     5   2   4
0046    KSTR     6   8      ; "r"
0047    CALL     4   2   3
0048    ISF          4
0049    JMP      5 => 0058
0050    MOV      6   4
0051    TGETS    5   4   9  ; "read"
0052    KSTR     7  10      ; "*a"
0053    CALL     5   2   3
0054    MOV      3   5
0055    MOV      6   4
0056    TGETS    5   4  11  ; "close"
0057    CALL     5   1   2
0058 => RET1     3   2

-- BYTECODE -- path.lua:253-258
0001    UGET     1   0      ; path
0002    TGETS    1   1   0  ; "root_dir"
0003    MOV      2   0
0004    CALL     1   2   2
0005    GGET     2   1      ; "table"
0006    TGETS    2   2   2  ; "insert"
0007    UGET     3   1      ; lpaths
0008    UGET     4   2      ; dir
0009    TGETS    4   4   3  ; "path"
0010    MOV      5   1
0011    UGET     6   3      ; cfg
0012    TGETS    6   6   4  ; "lua_modules_path"
0013    KSTR     7   5      ; "?.lua"
0014    CALL     4   0   4
0015    CALLM    2   1   1
0016    GGET     2   1      ; "table"
0017    TGETS    2   2   2  ; "insert"
0018    UGET     3   1      ; lpaths
0019    UGET     4   2      ; dir
0020    TGETS    4   4   3  ; "path"
0021    MOV      5   1
0022    UGET     6   3      ; cfg
0023    TGETS    6   6   4  ; "lua_modules_path"
0024    KSTR     7   6      ; "?/init.lua"
0025    CALL     4   0   4
0026    CALLM    2   1   1
0027    GGET     2   1      ; "table"
0028    TGETS    2   2   2  ; "insert"
0029    UGET     3   4      ; lcpaths
0030    UGET     4   2      ; dir
0031    TGETS    4   4   3  ; "path"
0032    MOV      5   1
0033    UGET     6   3      ; cfg
0034    TGETS    6   6   7  ; "lib_modules_path"
0035    KSTR     7   8      ; "?."
0036    UGET     8   3      ; cfg
0037    TGETS    8   8   9  ; "lib_extension"
0038    CAT      7   7   8
0039    CALL     4   0   4
0040    CALLM    2   1   1
0041    RET0     0   1

-- BYTECODE -- path.lua:250-260
0001    TNEW     1   0
0002    TNEW     2   0
0003    UGET     3   0      ; path
0004    TGETS    3   3   0  ; "map_trees"
0005    MOV      4   0
0006    FNEW     5   1      ; path.lua:253
0007    CALL     3   1   3
0008    GGET     3   2      ; "table"
0009    TGETS    3   3   3  ; "concat"
0010    MOV      4   1
0011    KSTR     5   4      ; ";"
0012    CALL     3   2   3
0013    GGET     4   2      ; "table"
0014    TGETS    4   4   3  ; "concat"
0015    MOV      5   2
0016    KSTR     6   4      ; ";"
0017    CALL     4   0   3
0018    UCLO     0 => 0019
0019 => RETM     3   1

-- BYTECODE -- path.lua:0-263
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.path"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.util"
0013    CALL     4   2   2
0014    TGETS    5   1   5  ; "rocks_dir"
0015    TSETS    5   0   5  ; "rocks_dir"
0016    TGETS    5   1   6  ; "versioned_name"
0017    TSETS    5   0   6  ; "versioned_name"
0018    TGETS    5   1   7  ; "path_to_module"
0019    TSETS    5   0   7  ; "path_to_module"
0020    TGETS    5   1   8  ; "deploy_lua_dir"
0021    TSETS    5   0   8  ; "deploy_lua_dir"
0022    TGETS    5   1   9  ; "deploy_lib_dir"
0023    TSETS    5   0   9  ; "deploy_lib_dir"
0024    TGETS    5   1  10  ; "map_trees"
0025    TSETS    5   0  10  ; "map_trees"
0026    TGETS    5   1  11  ; "rocks_tree_to_string"
0027    TSETS    5   0  11  ; "rocks_tree_to_string"
0028    FNEW     5  13      ; path.lua:23
0029    TSETS    5   0  12  ; "rockspec_name_from_rock"
0030    FNEW     5  15      ; path.lua:29
0031    TSETS    5   0  14  ; "root_from_rocks_dir"
0032    FNEW     5  17      ; path.lua:34
0033    TSETS    5   0  16  ; "root_dir"
0034    FNEW     5  19      ; path.lua:43
0035    TSETS    5   0  18  ; "deploy_bin_dir"
0036    FNEW     5  21      ; path.lua:47
0037    TSETS    5   0  20  ; "manifest_file"
0038    FNEW     5  23      ; path.lua:56
0039    TSETS    5   0  22  ; "versions_dir"
0040    FNEW     5  25      ; path.lua:67
0041    TSETS    5   0  24  ; "install_dir"
0042    FNEW     5  27      ; path.lua:79
0043    TSETS    5   0  26  ; "rockspec_file"
0044    FNEW     5  29      ; path.lua:91
0045    TSETS    5   0  28  ; "rock_manifest_file"
0046    FNEW     5  31      ; path.lua:103
0047    TSETS    5   0  30  ; "rock_namespace_file"
0048    FNEW     5  33      ; path.lua:115
0049    TSETS    5   0  32  ; "lib_dir"
0050    FNEW     5  35      ; path.lua:127
0051    TSETS    5   0  34  ; "lua_dir"
0052    FNEW     5  37      ; path.lua:139
0053    TSETS    5   0  36  ; "doc_dir"
0054    FNEW     5  39      ; path.lua:151
0055    TSETS    5   0  38  ; "conf_dir"
0056    FNEW     5  41      ; path.lua:164
0057    TSETS    5   0  40  ; "bin_dir"
0058    FNEW     5  43      ; path.lua:175
0059    TSETS    5   0  42  ; "parse_name"
0060    FNEW     5  45      ; path.lua:190
0061    TSETS    5   0  44  ; "make_url"
0062    FNEW     5  47      ; path.lua:211
0063    TSETS    5   0  46  ; "module_to_path"
0064    FNEW     5  49      ; path.lua:216
0065    TSETS    5   0  48  ; "use_tree"
0066    FNEW     5  51      ; path.lua:236
0067    TSETS    5   0  50  ; "read_namespace"
0068    FNEW     5  53      ; path.lua:250
0069    TSETS    5   0  52  ; "package_paths"
0070    UCLO     0 => 0071
0071 => RET1     0   2

-----------------------
-- BYTECODE -- fs.lua:16-16
0001    TDUP     0   2
0002    GGET     1   0      ; "select"
0003    KSTR     2   1      ; "#"
0004    VARG     3   0   0
0005    CALLM    1   2   1
0006    TSETS    1   0   3  ; "n"
0007    VARG     1   0   0
0008    TSETM    1   0      ; 1
0009    RET1     0   2

-- BYTECODE -- fs.lua:32-39
0001    ISNEP    1   0
0002    JMP      2 => 0008
0003    GGET     2   0      ; "print"
0004    KSTR     3   1      ; "\nio.popen: "
0005    MOV      4   0
0006    CALL     2   1   3
0007    JMP      2 => 0014
0008 => GGET     2   0      ; "print"
0009    KSTR     3   1      ; "\nio.popen: "
0010    MOV      4   0
0011    KSTR     5   2      ; "Mode:"
0012    MOV      6   1
0013    CALL     2   1   5
0014 => UGET     2   0      ; old_popen
0015    MOV      3   0
0016    MOV      4   1
0017    CALLT    2   3

-- BYTECODE -- fs.lua:44-44
0001    MOV      2   0
0002    KSTR     3   0      ; "<redacted>/"
0003    CAT      2   2   3
0004    RET1     2   2

-- BYTECODE -- fs.lua:42-51
0001    GGET     1   0      ; "print"
0002    KSTR     2   1      ; "\nos.execute: "
0003    MOV      4   0
0004    TGETS    3   0   2  ; "gsub"
0005    KSTR     5   3      ; "(/api/[^/]+/)([^/]+)/"
0006    FNEW     6   4      ; fs.lua:44
0007    CALL     3   2   4
0008    CALL     1   1   3
0009    UGET     1   0      ; pack
0010    UGET     2   1      ; old_execute
0011    MOV      3   0
0012    CALL     2   0   2
0013    CALLM    1   2   0
0014    GGET     2   0      ; "print"
0015    KSTR     3   5      ; "Results: "
0016    GGET     4   6      ; "tostring"
0017    TGETS    5   1   7  ; "n"
0018    CALL     4   2   2
0019    CAT      3   3   4
0020    CALL     2   1   2
0021    KSHORT   2   1
0022    TGETS    3   1   7  ; "n"
0023    KSHORT   4   1
0024    FORI     2 => 0041
0025 => GGET     6   0      ; "print"
0026    KSTR     7   8      ; "  "
0027    GGET     8   6      ; "tostring"
0028    MOV      9   5
0029    CALL     8   2   2
0030    KSTR     9   9      ; " ("
0031    GGET    10  10      ; "type"
0032    TGETV   11   1   5
0033    CALL    10   2   2
0034    KSTR    11  11      ; "): "
0035    GGET    12   6      ; "tostring"
0036    TGETV   13   1   5
0037    CALL    12   2   2
0038    CAT      7   7  12
0039    CALL     6   1   2
0040    FORL     2 => 0025
0041 => UGET     2   2      ; unpack
0042    MOV      3   1
0043    KSHORT   4   1
0044    TGETS    5   1   7  ; "n"
0045    UCLO     0 => 0046
0046 => CALLT    2   4

-- BYTECODE -- fs.lua:27-52
0001    USETP    0   2      ; fs_is_verbose
0002    UGET     0   1      ; old_popen
0003    IST          0
0004    JMP      1 => 0008
0005    UGET     0   2      ; old_execute
0006    ISF          0
0007    JMP      1 => 0009
0008 => UCLO     0 => 0022
0009 => GGET     0   0      ; "io"
0010    TGETS    0   0   1  ; "popen"
0011    USETV    1   0      ; old_popen
0012    GGET     0   0      ; "io"
0013    FNEW     1   2      ; fs.lua:32
0014    TSETS    1   0   1  ; "popen"
0015    GGET     0   3      ; "os"
0016    TGETS    0   0   4  ; "execute"
0017    USETV    2   0      ; old_execute
0018    GGET     0   3      ; "os"
0019    FNEW     1   5      ; fs.lua:42
0020    TSETS    1   0   4  ; "execute"
0021    RET0     0   1
0022 => RET0     0   1

-- BYTECODE -- fs.lua:59-69
0001    UGET     0   0      ; fs_is_verbose
0002    ISF          0
0003    JMP      1 => 0039
0004    TNEW     0   3
0005    VARG     1   0   0
0006    TSETM    1   0      ; 1
0007    GGET     1   0      ; "ipairs"
0008    MOV      2   0
0009    CALL     1   4   2
0010    JMP      4 => 0025
0011 => GGET     6   1      ; "pcall"
0012    GGET     7   2      ; "string"
0013    TGETS    7   7   3  ; "format"
0014    KSTR     8   4      ; "%q"
0015    MOV      9   5
0016    CALL     6   3   4
0017    ISF          6
0018    JMP      8 => 0021
0019    ISTC     8   7
0020    JMP      8 => 0024
0021 => GGET     8   5      ; "tostring"
0022    MOV      9   5
0023    CALL     8   2   2
0024 => TSETV    8   0   4
0025 => ITERC    4   3   3
0026    ITERL    4 => 0011
0027    GGET     1   6      ; "print"
0028    KSTR     2   7      ; "fs."
0029    UGET     3   1      ; name
0030    KSTR     4   8      ; "("
0031    GGET     5   9      ; "table"
0032    TGETS    5   5  10  ; "concat"
0033    MOV      6   0
0034    KSTR     7  11      ; ", "
0035    CALL     5   2   3
0036    KSTR     6  12      ; ")"
0037    CAT      2   2   6
0038    CALL     1   1   2
0039 => UGET     0   2      ; fn
0040    VARG     1   0   0
0041    CALLMT   0   0

-- BYTECODE -- fs.lua:56-75
0001    UGET     2   0      ; pairs
0002    MOV      3   0
0003    CALL     2   4   2
0004    ISNEXT   5 => 0015
0005 => ISEQS    5   0      ; "init"
0006    JMP      7 => 0014
0007    UGET     7   1      ; fs
0008    TGETV    7   7   5
0009    IST          7
0010    JMP      7 => 0014
0011    UGET     7   1      ; fs
0012    FNEW     8   1      ; fs.lua:59
0013    TSETV    8   7   5
0014 => UCLO     5 => 0015
0015 => ITERN    5   3   3
0016    ITERL    5 => 0005
0017    TGETS    2   0   0  ; "init"
0018    ISF          2
0019    JMP      3 => 0025
0020    GGET     2   2      ; "table"
0021    TGETS    2   2   3  ; "insert"
0022    MOV      3   1
0023    TGETS    4   0   0  ; "init"
0024    CALL     2   1   3
0025 => RET0     0   1

-- BYTECODE -- fs.lua:85-88
0001    UGET     0   0      ; i
0002    ADDVN    0   0   0  ; 1
0003    USETV    0   0      ; i
0004    UGET     0   1      ; plats
0005    UGET     1   0      ; i
0006    TGETV    0   0   1
0007    RET1     0   2

-- BYTECODE -- fs.lua:82-89
0001    KSHORT   0   0
0002    TDUP     1   0
0003    FNEW     2   1      ; fs.lua:85
0004    UCLO     0 => 0005
0005 => RET1     2   2

-- BYTECODE -- fs.lua:77-98
0001    UGET     2   0      ; cfg
0002    TGETS    2   2   0  ; "each_platform"
0003    GGET     3   1      ; "os"
0004    TGETS    3   3   2  ; "getenv"
0005    KSTR     4   3      ; "LUAROCKS_CROSS_COMPILING"
0006    CALL     3   2   2
0007    ISF          3
0008    JMP      4 => 0010
0009    FNEW     2   4      ; fs.lua:82
0010 => MOV      3   2
0011    KSTR     4   5      ; "most-specific-first"
0012    CALL     3   4   2
0013    JMP      6 => 0029
0014 => GGET     7   6      ; "pcall"
0015    GGET     8   7      ; "require"
0016    MOV     10   0
0017    TGETS    9   0   8  ; "format"
0018    MOV     11   6
0019    CALL     9   0   3
0020    CALLM    7   3   1
0021    ISF          7
0022    JMP      9 => 0029
0023    ISF          8
0024    JMP      9 => 0029
0025    UGET     9   1      ; load_fns
0026    MOV     10   8
0027    MOV     11   1
0028    CALL     9   1   3
0029 => ITERC    6   2   3
0030    ITERL    6 => 0014
0031    RET0     0   1

-- BYTECODE -- fs.lua:100-134
0001    TNEW     0   0
0002    UGET     1   0      ; fs
0003    TGETS    1   1   0  ; "current_dir"
0004    ISF          1
0005    JMP      2 => 0036
0006    UGET     1   1      ; pairs
0007    UGET     2   0      ; fs
0008    CALL     1   4   2
0009    ISNEXT   4 => 0017
0010 => ISEQS    4   1      ; "init"
0011    JMP      6 => 0017
0012    ISEQS    4   2      ; "verbose"
0013    JMP      6 => 0017
0014    UGET     6   0      ; fs
0015    KPRI     7   0
0016    TSETV    7   6   4
0017 => ITERN    4   3   3
0018    ITERL    4 => 0010
0019    UGET     1   1      ; pairs
0020    GGET     2   3      ; "package"
0021    TGETS    2   2   4  ; "loaded"
0022    CALL     1   4   2
0023    ISNEXT   4 => 0034
0024 => MOV      7   4
0025    TGETS    6   4   5  ; "match"
0026    KSTR     8   6      ; "luarocks%.fs%."
0027    CALL     6   2   3
0028    ISF          6
0029    JMP      7 => 0034
0030    GGET     6   3      ; "package"
0031    TGETS    6   6   4  ; "loaded"
0032    KPRI     7   0
0033    TSETV    7   6   4
0034 => ITERN    4   3   3
0035    ITERL    4 => 0024
0036 => UGET     1   2      ; load_platform_fns
0037    KSTR     2   7      ; "luarocks.fs.%s"
0038    MOV      3   0
0039    CALL     1   1   3
0040    UGET     1   3      ; load_fns
0041    GGET     2   8      ; "require"
0042    KSTR     3   9      ; "luarocks.fs.lua"
0043    CALL     2   2   2
0044    MOV      3   0
0045    CALL     1   1   3
0046    UGET     1   2      ; load_platform_fns
0047    KSTR     2  10      ; "luarocks.fs.%s.tools"
0048    MOV      3   0
0049    CALL     1   1   3
0050    UGET     1   3      ; load_fns
0051    GGET     2   8      ; "require"
0052    KSTR     3  11      ; "luarocks.fs.tools"
0053    CALL     2   2   2
0054    MOV      3   0
0055    CALL     1   1   3
0056    GGET     1  12      ; "ipairs"
0057    MOV      2   0
0058    CALL     1   4   2
0059    JMP      4 => 0062
0060 => MOV      6   5
0061    CALL     6   1   1
0062 => ITERC    4   3   3
0063    ITERL    4 => 0060
0064    RET0     0   1

-- BYTECODE -- fs.lua:0-138
0001    GGET     0   0      ; "pairs"
0002    TNEW     1   0
0003    GGET     2   1      ; "package"
0004    TGETS    2   2   2  ; "loaded"
0005    TSETS    1   2   3  ; "luarocks.fs"
0006    GGET     2   4      ; "require"
0007    KSTR     3   5      ; "luarocks.core.cfg"
0008    CALL     2   2   2
0009    GGET     3   6      ; "table"
0010    TGETS    3   3   7  ; "pack"
0011    IST          3
0012    JMP      4 => 0014
0013    FNEW     3   8      ; fs.lua:16
0014 => GGET     4   6      ; "table"
0015    TGETS    4   4   9  ; "unpack"
0016    IST          4
0017    JMP      5 => 0019
0018    GGET     4   9      ; "unpack"
0019 => GGET     5  10      ; "math"
0020    TGETS    5   5  11  ; "randomseed"
0021    GGET     6  12      ; "os"
0022    TGETS    6   6  13  ; "time"
0023    CALL     6   0   1
0024    CALLM    5   1   0
0025    KPRI     5   1
0026    KNIL     6   7
0027    FNEW     8  15      ; fs.lua:27
0028    TSETS    8   1  14  ; "verbose"
0029    UCLO     6 => 0030
0030 => FNEW     6  16      ; fs.lua:56
0031    FNEW     7  17      ; fs.lua:77
0032    FNEW     8  19      ; fs.lua:100
0033    TSETS    8   1  18  ; "init"
0034    UCLO     6 => 0035
0035 => UCLO     0 => 0036
0036 => RET1     1   2

-----------------------
-- BYTECODE -- search.lua:17-31
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    MOV      4   1
0013    TGETS    3   1   1  ; "type"
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "result"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    TGETS    2   1   4  ; "name"
0022    TGETS    3   1   5  ; "version"
0023    TGETV    4   0   2
0024    IST          4
0025    JMP      4 => 0028
0026    TNEW     4   0
0027    TSETV    4   0   2
0028 => TGETV    4   0   2
0029    TGETV    4   4   3
0030    IST          4
0031    JMP      4 => 0035
0032    TGETV    4   0   2
0033    TNEW     5   0
0034    TSETV    5   4   3
0035 => GGET     4   2      ; "table"
0036    TGETS    4   4   6  ; "insert"
0037    TGETV    5   0   2
0038    TGETV    5   5   3
0039    TDUP     6   8
0040    TGETS    7   1   7  ; "arch"
0041    TSETS    7   6   7  ; "arch"
0042    TGETS    7   1   9  ; "repo"
0043    TSETS    7   6   9  ; "repo"
0044    TGETS    7   1  10  ; "namespace"
0045    TSETS    7   6  10  ; "namespace"
0046    CALL     4   1   3
0047    RET0     0   1

-- BYTECODE -- search.lua:42-49
0001    GGET     3   0      ; "assert"
0002    MOV      5   1
0003    TGETS    4   1   1  ; "type"
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "result"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    MOV      5   2
0013    TGETS    4   2   1  ; "type"
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "query"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    MOV      4   1
0022    TGETS    3   1   4  ; "satisfies"
0023    MOV      5   2
0024    CALL     3   2   3
0025    ISF          3
0026    JMP      4 => 0032
0027    UGET     3   0      ; search
0028    TGETS    3   3   5  ; "store_result"
0029    MOV      4   0
0030    MOV      5   1
0031    CALL     3   1   3
0032 => RET0     0   1

-- BYTECODE -- search.lua:60-89
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    MOV      5   1
0013    TGETS    4   1   1  ; "type"
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "query"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    GGET     3   0      ; "assert"
0022    GGET     4   1      ; "type"
0023    MOV      5   2
0024    CALL     4   2   2
0025    ISEQS    4   4      ; "table"
0026    JMP      4 => 0031
0027    NOT      4   2
0028    JMP      5 => 0032
0029    KPRI     4   1
0030    JMP      5 => 0032
0031 => KPRI     4   2
0032 => CALL     3   1   2
0033    GGET     3   5      ; "require"
0034    KSTR     4   6      ; "luarocks.fs"
0035    CALL     3   2   2
0036    IST          2
0037    JMP      4 => 0039
0038    TNEW     2   0
0039 => TGETS    4   3   7  ; "dir"
0040    MOV      5   0
0041    CALL     4   4   2
0042    JMP      7 => 0115
0043 => UGET     8   0      ; dir
0044    TGETS    8   8   8  ; "path"
0045    MOV      9   0
0046    MOV     10   7
0047    CALL     8   2   3
0048    UGET     9   1      ; path
0049    TGETS    9   9   9  ; "parse_name"
0050    MOV     10   7
0051    CALL     9   4   2
0052    ISF          9
0053    JMP     12 => 0079
0054    MOV     13   8
0055    TGETS   12   8  10  ; "match"
0056    KSTR    14  11      ; ".rockspec$"
0057    CALL    12   2   3
0058    IST         12
0059    JMP     13 => 0066
0060    MOV     13   8
0061    TGETS   12   8  10  ; "match"
0062    KSTR    14  12      ; ".rock$"
0063    CALL    12   2   3
0064    ISF         12
0065    JMP     13 => 0079
0066 => UGET    12   2      ; results
0067    TGETS   12  12  13  ; "new"
0068    MOV     13   9
0069    MOV     14  10
0070    MOV     15   0
0071    MOV     16  11
0072    CALL    12   2   5
0073    UGET    13   3      ; store_if_match
0074    MOV     14   2
0075    MOV     15  12
0076    MOV     16   1
0077    CALL    13   1   4
0078    JMP     12 => 0115
0079 => TGETS   12   3  14  ; "is_dir"
0080    MOV     13   8
0081    CALL    12   2   2
0082    ISF         12
0083    JMP     13 => 0115
0084    TGETS   12   3   7  ; "dir"
0085    MOV     13   8
0086    CALL    12   4   2
0087    JMP     15 => 0113
0088 => MOV     17  15
0089    TGETS   16  15  10  ; "match"
0090    KSTR    18  15      ; "-%d+$"
0091    CALL    16   2   3
0092    ISF         16
0093    JMP     17 => 0113
0094    UGET    16   1      ; path
0095    TGETS   16  16  16  ; "read_namespace"
0096    MOV     17   7
0097    MOV     18  15
0098    MOV     19   0
0099    CALL    16   2   4
0100    UGET    17   2      ; results
0101    TGETS   17  17  13  ; "new"
0102    MOV     18   7
0103    MOV     19  15
0104    MOV     20   0
0105    KSTR    21  17      ; "installed"
0106    MOV     22  16
0107    CALL    17   2   6
0108    UGET    18   3      ; store_if_match
0109    MOV     19   2
0110    MOV     20  17
0111    MOV     21   1
0112    CALL    18   1   4
0113 => ITERC   15   2   3
0114    ITERL   15 => 0088
0115 => ITERC    7   2   3
0116    ITERL    7 => 0043
0117    RET1     2   2

-- BYTECODE -- search.lua:101-125
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "table"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   3      ; "string"
0016    JMP      6 => 0019
0017    KPRI     6   1
0018    JMP      7 => 0020
0019 => KPRI     6   2
0020 => CALL     5   1   2
0021    GGET     5   0      ; "assert"
0022    MOV      7   2
0023    TGETS    6   2   1  ; "type"
0024    CALL     6   2   2
0025    ISEQS    6   4      ; "query"
0026    JMP      6 => 0029
0027    KPRI     6   1
0028    JMP      7 => 0030
0029 => KPRI     6   2
0030 => CALL     5   1   2
0031    IST          4
0032    JMP      5 => 0040
0033    TGETS    5   2   5  ; "namespace"
0034    ISF          5
0035    JMP      6 => 0040
0036    MOV      5   1
0037    KSTR     6   6      ; "/manifests/"
0038    TGETS    7   2   5  ; "namespace"
0039    CAT      1   5   7
0040 => UGET     5   0      ; manif
0041    TGETS    5   5   7  ; "load_manifest"
0042    MOV      6   1
0043    MOV      7   3
0044    NOT      8   4
0045    CALL     5   4   4
0046    IST          5
0047    JMP      8 => 0052
0048    KPRI     8   0
0049    MOV      9   6
0050    MOV     10   7
0051    RET      8   4
0052 => GGET     8   8      ; "pairs"
0053    TGETS    9   5   9  ; "repository"
0054    CALL     8   4   2
0055    ISNEXT  11 => 0092
0056 => GGET    13   8      ; "pairs"
0057    MOV     14  12
0058    CALL    13   4   2
0059    ISNEXT  16 => 0090
0060 => ISF          4
0061    JMP     18 => 0070
0062    UGET    18   1      ; path
0063    TGETS   18  18  10  ; "read_namespace"
0064    MOV     19  11
0065    MOV     20  16
0066    MOV     21   1
0067    CALL    18   2   4
0068    IST         18
0069    JMP     19 => 0071
0070 => TGETS   18   2   5  ; "namespace"
0071 => GGET    19  11      ; "ipairs"
0072    MOV     20  17
0073    CALL    19   4   2
0074    JMP     22 => 0088
0075 => UGET    24   2      ; results
0076    TGETS   24  24  12  ; "new"
0077    MOV     25  11
0078    MOV     26  16
0079    MOV     27   1
0080    TGETS   28  23  13  ; "arch"
0081    MOV     29  18
0082    CALL    24   2   6
0083    UGET    25   3      ; store_if_match
0084    MOV     26   0
0085    MOV     27  24
0086    MOV     28   2
0087    CALL    25   1   4
0088 => ITERC   22   3   3
0089    ITERL   22 => 0075
0090 => ITERN   16   3   3
0091    ITERL   16 => 0060
0092 => ITERN   11   3   3
0093    ITERL   11 => 0056
0094    KPRI     8   2
0095    RET1     8   2

-- BYTECODE -- search.lua:127-129
0001    UGET     4   0      ; manifest_search
0002    MOV      5   0
0003    MOV      6   1
0004    MOV      7   2
0005    MOV      8   3
0006    KPRI     9   1
0007    CALLT    4   6

-- BYTECODE -- search.lua:131-133
0001    UGET     4   0      ; manifest_search
0002    MOV      5   0
0003    MOV      6   1
0004    MOV      7   2
0005    MOV      8   3
0006    KPRI     9   2
0007    CALLT    4   6

-- BYTECODE -- search.lua:141-174
0001    GGET     2   0      ; "assert"
0002    MOV      4   0
0003    TGETS    3   0   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "query"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    TNEW     2   0
0012    GGET     3   3      ; "ipairs"
0013    UGET     4   0      ; cfg
0014    TGETS    4   4   4  ; "rocks_servers"
0015    CALL     3   4   2
0016    JMP      6 => 0065
0017 => UGET     8   0      ; cfg
0018    TGETS    8   8   5  ; "disabled_servers"
0019    TGETV    8   8   7
0020    IST          8
0021    JMP      8 => 0065
0022    GGET     8   1      ; "type"
0023    MOV      9   7
0024    CALL     8   2   2
0025    ISNES    8   6      ; "string"
0026    JMP      8 => 0030
0027    TNEW     8   3
0028    TSETB    7   8   1
0029    MOV      7   8
0030 => GGET     8   3      ; "ipairs"
0031    MOV      9   7
0032    CALL     8   4   2
0033    JMP     11 => 0063
0034 => UGET    13   1      ; dir
0035    TGETS   13  13   7  ; "split_url"
0036    MOV     14  12
0037    CALL    13   3   2
0038    ISNES   13   8      ; "file"
0039    JMP     15 => 0041
0040    MOV     12  14
0041 => UGET    15   2      ; remote_manifest_search
0042    MOV     16   2
0043    MOV     17  12
0044    MOV     18   0
0045    MOV     19   1
0046    CALL    15   4   5
0047    ISNES   17   9      ; "network"
0048    JMP     18 => 0053
0049    UGET    18   0      ; cfg
0050    TGETS   18  18   5  ; "disabled_servers"
0051    KPRI    19   2
0052    TSETV   19  18   7
0053 => ISF         15
0054    JMP     18 => 0057
0055    JMP      8 => 0065
0056    JMP     18 => 0063
0057 => UGET    18   3      ; util
0058    TGETS   18  18  10  ; "warning"
0059    KSTR    19  11      ; "Failed searching manifest: "
0060    MOV     20  16
0061    CAT     19  19  20
0062    CALL    18   1   2
0063 => ITERC   11   3   3
0064    ITERL   11 => 0034
0065 => ITERC    6   3   3
0066    ITERL    6 => 0017
0067    KSTR     3  12      ; "provided by VM or rocks_provided"
0068    GGET     4  13      ; "pairs"
0069    UGET     5   3      ; util
0070    TGETS    5   5  14  ; "get_rocks_provided"
0071    CALL     5   0   1
0072    CALLM    4   4   0
0073    ISNEXT   7 => 0086
0074 => UGET     9   4      ; results
0075    TGETS    9   9  15  ; "new"
0076    MOV     10   7
0077    MOV     11   8
0078    MOV     12   3
0079    KSTR    13  16      ; "installed"
0080    CALL     9   2   5
0081    UGET    10   5      ; store_if_match
0082    MOV     11   2
0083    MOV     12   9
0084    MOV     13   0
0085    CALL    10   1   4
0086 => ITERN    7   3   3
0087    ITERL    7 => 0074
0088    RET1     2   2

-- BYTECODE -- search.lua:182-204
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISNES    3   2      ; "string"
0006    JMP      3 => 0013
0007    MOV      4   0
0008    TGETS    3   0   3  ; "match"
0009    KSTR     5   4      ; "/"
0010    CALL     3   2   3
0011    NOT      3   3
0012    JMP      4 => 0016
0013 => KPRI     3   1
0014    JMP      4 => 0016
0015    KPRI     3   2
0016 => CALL     2   1   2
0017    GGET     2   0      ; "assert"
0018    GGET     3   1      ; "type"
0019    MOV      4   1
0020    CALL     3   2   2
0021    ISEQS    3   5      ; "table"
0022    JMP      3 => 0025
0023    KPRI     3   1
0024    JMP      4 => 0026
0025 => KPRI     3   2
0026 => CALL     2   1   2
0027    TNEW     2   0
0028    GGET     3   6      ; "pairs"
0029    MOV      4   1
0030    CALL     3   4   2
0031    ISNEXT   6 => 0040
0032 => GGET     8   5      ; "table"
0033    TGETS    8   8   7  ; "insert"
0034    MOV      9   2
0035    UGET    10   0      ; vers
0036    TGETS   10  10   8  ; "parse_version"
0037    MOV     11   6
0038    CALL    10   0   2
0039    CALLM    8   1   1
0040 => ITERN    6   3   3
0041    ITERL    6 => 0032
0042    GGET     3   5      ; "table"
0043    TGETS    3   3   9  ; "sort"
0044    MOV      4   2
0045    CALL     3   1   2
0046    LEN      3   2
0047    TGETV    3   2   3
0048    TGETS    3   3   2  ; "string"
0049    TGETV    4   1   3
0050    ISF          4
0051    JMP      5 => 0082
0052    KSHORT   5   1
0053    GGET     6  10      ; "ipairs"
0054    MOV      7   4
0055    CALL     6   4   2
0056    JMP      9 => 0071
0057 => TGETS   11  10  11  ; "arch"
0058    ISNES   11  12      ; "src"
0059    JMP     11 => 0064
0060    TGETV   11   4   5
0061    TGETS   11  11  11  ; "arch"
0062    ISEQS   11  13      ; "rockspec"
0063    JMP     11 => 0070
0064 => TGETS   11  10  11  ; "arch"
0065    ISEQS   11  12      ; "src"
0066    JMP     11 => 0071
0067    TGETS   11  10  11  ; "arch"
0068    ISEQS   11  13      ; "rockspec"
0069    JMP     11 => 0071
0070 => MOV      5   9
0071 => ITERC    9   3   3
0072    ITERL    9 => 0057
0073    UGET     6   1      ; path
0074    TGETS    6   6  14  ; "make_url"
0075    TGETV    7   4   5
0076    TGETS    7   7  15  ; "repo"
0077    MOV      8   0
0078    MOV      9   3
0079    TGETV   10   4   5
0080    TGETS   10  10  11  ; "arch"
0081    CALLT    6   5
0082 => KPRI     5   0
0083    RET1     5   2

-- BYTECODE -- search.lua:209-223
0001    GGET     1   0      ; "assert"
0002    MOV      3   0
0003    TGETS    2   0   1  ; "type"
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "query"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    TNEW     1   0
0012    UGET     2   0      ; util
0013    TGETS    2   2   3  ; "lua_versions"
0014    CALL     2   4   1
0015    JMP      5 => 0041
0016 => UGET     6   1      ; cfg
0017    TGETS    6   6   4  ; "lua_version"
0018    ISEQV    5   6
0019    JMP      6 => 0041
0020    UGET     6   0      ; util
0021    TGETS    6   6   5  ; "printout"
0022    KSTR     7   6      ; "Checking for Lua "
0023    MOV      8   5
0024    KSTR     9   7      ; "..."
0025    CAT      7   7   9
0026    CALL     6   1   2
0027    UGET     6   2      ; search
0028    TGETS    6   6   8  ; "search_repos"
0029    MOV      7   0
0030    MOV      8   5
0031    CALL     6   2   3
0032    TGETS    7   0   9  ; "name"
0033    TGETV    6   6   7
0034    ISF          6
0035    JMP      7 => 0041
0036    GGET     6  10      ; "table"
0037    TGETS    6   6  11  ; "insert"
0038    MOV      7   1
0039    MOV      8   5
0040    CALL     6   1   3
0041 => ITERC    5   2   3
0042    ITERL    5 => 0016
0043    RET1     1   2

-- BYTECODE -- search.lua:230-251
0001    GGET     1   0      ; "assert"
0002    MOV      3   0
0003    TGETS    2   0   1  ; "type"
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "query"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; util
0012    TGETS    1   1   3  ; "get_rocks_provided"
0013    CALL     1   2   1
0014    TGETS    2   0   4  ; "name"
0015    TGETV    2   1   2
0016    ISEQP    2   0
0017    JMP      2 => 0028
0018    KPRI     2   0
0019    KSTR     3   5      ; "Rock "
0020    TGETS    4   0   4  ; "name"
0021    KSTR     5   6      ; " "
0022    TGETS    6   0   4  ; "name"
0023    TGETV    6   1   6
0024    KSTR     7   7      ; " is already provided by VM or via 'rocks"~
0025    CAT      3   3   7
0026    KSTR     4   8      ; "provided"
0027    RET      2   4
0028 => UGET     2   1      ; search
0029    TGETS    2   2   9  ; "search_repos"
0030    MOV      3   0
0031    CALL     2   2   2
0032    GGET     3  10      ; "next"
0033    MOV      4   2
0034    CALL     3   2   2
0035    IST          3
0036    JMP      4 => 0046
0037    KPRI     4   0
0038    KSTR     5  11      ; "No results matching query were found for"~
0039    UGET     6   2      ; cfg
0040    TGETS    6   6  12  ; "lua_version"
0041    KSTR     7  13      ; "."
0042    CAT      5   5   7
0043    KSTR     6  14      ; "notfound"
0044    RET      4   4
0045    JMP      4 => 0061
0046 => GGET     4  10      ; "next"
0047    MOV      5   2
0048    MOV      6   3
0049    CALL     4   2   3
0050    ISF          4
0051    JMP      5 => 0057
0052    KPRI     4   0
0053    KSTR     5  15      ; "Several rocks matched query."
0054    KSTR     6  16      ; "manyfound"
0055    RET      4   4
0056    JMP      4 => 0061
0057 => UGET     4   3      ; pick_latest_version
0058    TGETS    5   0   4  ; "name"
0059    TGETV    6   2   3
0060    CALLT    4   3
0061 => RET0     0   1

-- BYTECODE -- search.lua:253-260
0001    UGET     4   0      ; queries
0002    TGETS    4   4   0  ; "new"
0003    MOV      5   0
0004    MOV      6   1
0005    MOV      7   2
0006    KPRI     8   1
0007    KSTR     9   1      ; "src|rockspec"
0008    CALL     4   2   6
0009    UGET     5   1      ; search
0010    TGETS    5   5   2  ; "find_rock_checking_lua_versions"
0011    MOV      6   4
0012    MOV      7   3
0013    CALL     5   3   3
0014    IST          5
0015    JMP      7 => 0025
0016    KPRI     7   0
0017    KSTR     8   3      ; "Could not find a result named "
0018    GGET     9   4      ; "tostring"
0019    MOV     10   4
0020    CALL     9   2   2
0021    KSTR    10   5      ; ": "
0022    MOV     11   6
0023    CAT      8   8  11
0024    RET      7   3
0025 => RET1     5   2

-- BYTECODE -- search.lua:262-303
0001    UGET     2   0      ; search
0002    TGETS    2   2   0  ; "find_suitable_rock"
0003    MOV      3   0
0004    CALL     2   4   2
0005    ISF          2
0006    JMP      5 => 0008
0007    RET1     2   2
0008 => ISNES    4   1      ; "notfound"
0009    JMP      5 => 0096
0010    KPRI     5   0
0011    ISF          1
0012    JMP      6 => 0091
0013    UGET     6   1      ; util
0014    TGETS    6   6   2  ; "printout"
0015    TGETS    7   0   3  ; "name"
0016    KSTR     8   4      ; " not found for Lua "
0017    UGET     9   2      ; cfg
0018    TGETS    9   9   5  ; "lua_version"
0019    KSTR    10   6      ; "."
0020    CAT      7   7  10
0021    CALL     6   1   2
0022    UGET     6   1      ; util
0023    TGETS    6   6   2  ; "printout"
0024    KSTR     7   7      ; "Checking if available for other Lua vers"~
0025    CALL     6   1   2
0026    UGET     6   3      ; supported_lua_versions
0027    MOV      7   0
0028    CALL     6   2   2
0029    LEN      7   6
0030    ISEQN    7   0      ; 0
0031    JMP      7 => 0087
0032    GGET     7   8      ; "ipairs"
0033    MOV      8   6
0034    CALL     7   4   2
0035    JMP     10 => 0040
0036 => KSTR    12   9      ; "Lua "
0037    MOV     13  11
0038    CAT     12  12  13
0039    TSETV   12   6  10
0040 => ITERC   10   3   3
0041    ITERL   10 => 0036
0042    KSTR     7  10      ; "only "
0043    GGET     8  11      ; "table"
0044    TGETS    8   8  12  ; "concat"
0045    MOV      9   6
0046    KSTR    10  13      ; " and "
0047    CALL     8   2   3
0048    KSTR     9  14      ; " but not Lua "
0049    UGET    10   2      ; cfg
0050    TGETS   10  10   5  ; "lua_version"
0051    KSTR    11   6      ; "."
0052    CAT      7   7  11
0053    TGETS    8   0  15  ; "constraints"
0054    LEN      8   8
0055    ISNEN    8   0      ; 0
0056    JMP      8 => 0062
0057    TGETS    8   0   3  ; "name"
0058    KSTR     9  16      ; " supports "
0059    MOV     10   7
0060    CAT      5   8  10
0061    JMP      8 => 0092
0062 => TGETS    8   0  15  ; "constraints"
0063    LEN      8   8
0064    ISNEN    8   1      ; 1
0065    JMP      8 => 0081
0066    TGETS    8   0  15  ; "constraints"
0067    TGETB    8   8   1
0068    TGETS    8   8  17  ; "op"
0069    ISNES    8  18      ; "=="
0070    JMP      8 => 0081
0071    TGETS    8   0   3  ; "name"
0072    KSTR     9  19      ; " "
0073    TGETS   10   0  15  ; "constraints"
0074    TGETB   10  10   1
0075    TGETS   10  10  20  ; "version"
0076    TGETS   10  10  21  ; "string"
0077    KSTR    11  16      ; " supports "
0078    MOV     12   7
0079    CAT      5   8  12
0080    JMP      8 => 0092
0081 => KSTR     8  22      ; "Matching "
0082    TGETS    9   0   3  ; "name"
0083    KSTR    10  23      ; " versions support "
0084    MOV     11   7
0085    CAT      5   8  11
0086    JMP      7 => 0092
0087 => TGETS    7   0   3  ; "name"
0088    KSTR     8  24      ; " is not available for any Lua versions."
0089    CAT      5   7   8
0090    JMP      6 => 0092
0091 => KSTR     5  25      ; "To check if it is available for other Lu"~
0092 => MOV      6   3
0093    KSTR     7  26      ; "\n"
0094    MOV      8   5
0095    CAT      3   6   8
0096 => KPRI     5   0
0097    MOV      6   3
0098    RET      5   3

-- BYTECODE -- search.lua:308-344
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "boolean"
0016    JMP      3 => 0021
0017    NOT      3   1
0018    JMP      4 => 0022
0019    KPRI     3   1
0020    JMP      4 => 0022
0021 => KPRI     3   2
0022 => CALL     2   1   2
0023    ISF          1
0024    JMP      2 => 0060
0025    UGET     2   0      ; util
0026    TGETS    2   2   4  ; "sortedpairs"
0027    MOV      3   0
0028    CALL     2   4   2
0029    JMP      5 => 0057
0030 => UGET     7   0      ; util
0031    TGETS    7   7   4  ; "sortedpairs"
0032    MOV      8   6
0033    UGET     9   1      ; vers
0034    TGETS    9   9   5  ; "compare_versions"
0035    CALL     7   4   3
0036    JMP     10 => 0055
0037 => GGET    12   6      ; "ipairs"
0038    MOV     13  11
0039    CALL    12   4   2
0040    JMP     15 => 0053
0041 => UGET    17   2      ; dir
0042    TGETS   17  17   7  ; "normalize"
0043    TGETS   18  16   8  ; "repo"
0044    CALL    17   2   2
0045    UGET    18   0      ; util
0046    TGETS   18  18   9  ; "printout"
0047    MOV     19   5
0048    MOV     20  10
0049    TGETS   21  16  10  ; "arch"
0050    MOV     22  17
0051    TGETS   23  16  11  ; "namespace"
0052    CALL    18   1   6
0053 => ITERC   15   3   3
0054    ITERL   15 => 0041
0055 => ITERC   10   3   3
0056    ITERL   10 => 0037
0057 => ITERC    5   3   3
0058    ITERL    5 => 0030
0059    RET0     0   1
0060 => UGET     2   0      ; util
0061    TGETS    2   2   4  ; "sortedpairs"
0062    MOV      3   0
0063    CALL     2   4   2
0064    JMP      5 => 0140
0065 => TNEW     7   0
0066    UGET     8   0      ; util
0067    TGETS    8   8   4  ; "sortedpairs"
0068    MOV      9   6
0069    UGET    10   1      ; vers
0070    TGETS   10  10   5  ; "compare_versions"
0071    CALL     8   4   3
0072    JMP     11 => 0107
0073 => GGET    13   6      ; "ipairs"
0074    MOV     14  12
0075    CALL    13   4   2
0076    JMP     16 => 0105
0077 => TGETS   18  17  11  ; "namespace"
0078    IST         18
0079    JMP     19 => 0081
0080    KSTR    18  12      ; ""
0081 => TGETV   19   7  18
0082    IST         19
0083    JMP     20 => 0085
0084    TNEW    19   0
0085 => TSETV   19   7  18
0086    UGET    20   2      ; dir
0087    TGETS   20  20   7  ; "normalize"
0088    TGETS   21  17   8  ; "repo"
0089    CALL    20   2   2
0090    TSETS   20  17   8  ; "repo"
0091    GGET    20   2      ; "table"
0092    TGETS   20  20  13  ; "insert"
0093    MOV     21  19
0094    KSTR    22  14      ; "   "
0095    MOV     23  11
0096    KSTR    24  15      ; " ("
0097    TGETS   25  17  10  ; "arch"
0098    KSTR    26  16      ; ") - "
0099    UGET    27   3      ; path
0100    TGETS   27  27  17  ; "root_dir"
0101    TGETS   28  17   8  ; "repo"
0102    CALL    27   2   2
0103    CAT     22  22  27
0104    CALL    20   1   3
0105 => ITERC   16   3   3
0106    ITERL   16 => 0077
0107 => ITERC   11   3   3
0108    ITERL   11 => 0073
0109    UGET     8   0      ; util
0110    TGETS    8   8   4  ; "sortedpairs"
0111    MOV      9   7
0112    CALL     8   4   2
0113    JMP     11 => 0138
0114 => UGET    13   0      ; util
0115    TGETS   13  13   9  ; "printout"
0116    ISNES   11  12      ; ""
0117    JMP     14 => 0120
0118    ISTC    14   5
0119    JMP     14 => 0124
0120 => MOV     14  11
0121    KSTR    15  18      ; "/"
0122    MOV     16   5
0123    CAT     14  14  16
0124 => CALL    13   1   2
0125    GGET    13   6      ; "ipairs"
0126    MOV     14  12
0127    CALL    13   4   2
0128    JMP     16 => 0133
0129 => UGET    18   0      ; util
0130    TGETS   18  18   9  ; "printout"
0131    MOV     19  17
0132    CALL    18   1   2
0133 => ITERC   16   3   3
0134    ITERL   16 => 0129
0135    UGET    13   0      ; util
0136    TGETS   13  13   9  ; "printout"
0137    CALL    13   1   1
0138 => ITERC   11   3   3
0139    ITERL   11 => 0114
0140 => ITERC    5   3   3
0141    ITERL    5 => 0065
0142    RET0     0   1

-- BYTECODE -- search.lua:346-376
0001    GGET     2   0      ; "assert"
0002    MOV      4   0
0003    TGETS    3   0   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "query"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    TNEW     2   0
0012    TNEW     3   0
0013    UGET     4   0      ; cfg
0014    TGETS    4   4   3  ; "rocks_trees"
0015    ISF          1
0016    JMP      5 => 0020
0017    TNEW     5   3
0018    TSETB    1   5   1
0019    MOV      4   5
0020 => GGET     5   4      ; "ipairs"
0021    MOV      6   4
0022    CALL     5   4   2
0023    JMP      8 => 0035
0024 => UGET    10   1      ; path
0025    TGETS   10  10   5  ; "rocks_dir"
0026    MOV     11   9
0027    CALL    10   2   2
0028    TSETV    9   3  10
0029    UGET    11   2      ; search
0030    TGETS   11  11   6  ; "local_manifest_search"
0031    MOV     12   2
0032    MOV     13  10
0033    MOV     14   0
0034    CALL    11   1   4
0035 => ITERC    8   3   3
0036    ITERL    8 => 0024
0037    GGET     5   7      ; "next"
0038    MOV      6   2
0039    CALL     5   2   2
0040    IST          5
0041    JMP      5 => 0050
0042    KPRI     5   0
0043    KSTR     6   8      ; "cannot find package "
0044    GGET     7   9      ; "tostring"
0045    MOV      8   0
0046    CALL     7   2   2
0047    KSTR     8  10      ; "\nUse 'list' to find installed rocks."
0048    CAT      6   6   8
0049    RET      5   3
0050 => KNIL     5   6
0051    UGET     7   3      ; util
0052    TGETS    7   7  11  ; "sortedpairs"
0053    MOV      8   2
0054    CALL     7   2   2
0055    CALL     7   3   1
0056    UGET     9   3      ; util
0057    TGETS    9   9  11  ; "sortedpairs"
0058    MOV     10   8
0059    UGET    11   4      ; vers
0060    TGETS   11  11  12  ; "compare_versions"
0061    CALL     9   4   3
0062    JMP     12 => 0073
0063 => IST          5
0064    JMP     14 => 0066
0065    MOV      5  12
0066 => GGET    14   4      ; "ipairs"
0067    MOV     15  13
0068    CALL    14   4   2
0069    JMP     17 => 0071
0070 => TGETS    6  18  13  ; "repo"
0071 => ITERC   17   3   3
0072    ITERL   17 => 0070
0073 => ITERC   12   3   3
0074    ITERL   12 => 0063
0075    TGETV    9   3   6
0076    TGETS   10   0  14  ; "name"
0077    MOV     11   5
0078    MOV     12   9
0079    MOV     13   6
0080    RET     10   5

-- BYTECODE -- search.lua:0-379
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.dir"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.path"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.manif"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.core.vers"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.core.cfg"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.util"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.queries"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.results"
0025    CALL     8   2   2
0026    FNEW     9  10      ; search.lua:17
0027    TSETS    9   0   9  ; "store_result"
0028    FNEW     9  11      ; search.lua:42
0029    FNEW    10  13      ; search.lua:60
0030    TSETS   10   0  12  ; "disk_search"
0031    FNEW    10  14      ; search.lua:101
0032    FNEW    11  15      ; search.lua:127
0033    FNEW    12  17      ; search.lua:131
0034    TSETS   12   0  16  ; "local_manifest_search"
0035    FNEW    12  19      ; search.lua:141
0036    TSETS   12   0  18  ; "search_repos"
0037    FNEW    12  20      ; search.lua:182
0038    FNEW    13  21      ; search.lua:209
0039    FNEW    14  23      ; search.lua:230
0040    TSETS   14   0  22  ; "find_suitable_rock"
0041    FNEW    14  25      ; search.lua:253
0042    TSETS   14   0  24  ; "find_src_or_rockspec"
0043    FNEW    14  27      ; search.lua:262
0044    TSETS   14   0  26  ; "find_rock_checking_lua_versions"
0045    FNEW    14  29      ; search.lua:308
0046    TSETS   14   0  28  ; "print_result_tree"
0047    FNEW    14  31      ; search.lua:346
0048    TSETS   14   0  30  ; "pick_installed_rock"
0049    UCLO     0 => 0050
0050 => RET1     0   2

-----------------------
-- BYTECODE -- test.lua:21-33
0001    TGETS    1   0   0  ; "test"
0002    ISF          1
0003    JMP      2 => 0011
0004    TGETS    1   0   0  ; "test"
0005    TGETS    1   1   1  ; "type"
0006    ISF          1
0007    JMP      2 => 0011
0008    TGETS    1   0   0  ; "test"
0009    TGETS    1   1   1  ; "type"
0010    RET1     1   2
0011 => GGET     1   2      ; "ipairs"
0012    UGET     2   0      ; test_modules
0013    CALL     1   4   2
0014    JMP      4 => 0022
0015 => TGETS    6   5   3  ; "detect_type"
0016    CALL     6   2   1
0017    ISF          6
0018    JMP      7 => 0022
0019    UGET     6   0      ; test_modules
0020    TGETV    6   6   5
0021    RET1     6   2
0022 => ITERC    4   3   3
0023    ITERL    4 => 0015
0024    KPRI     1   0
0025    KSTR     2   4      ; "could not detect test type -- no test su"~
0026    TGETS    3   0   5  ; "package"
0027    KSTR     4   6      ; "?"
0028    CAT      2   2   4
0029    RET      1   3

-- BYTECODE -- test.lua:36-72
0001    KPRI     3   0
0002    GGET     4   0      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   1      ; "string"
0006    JMP      4 => 0022
0007    KNIL     4   5
0008    UGET     6   0      ; fetch
0009    TGETS    6   6   2  ; "load_rockspec"
0010    MOV      7   0
0011    CALL     6   4   2
0012    MOV      5   8
0013    MOV      4   7
0014    MOV      3   6
0015    ISF          4
0016    JMP      6 => 0033
0017    KPRI     6   0
0018    MOV      7   4
0019    MOV      8   5
0020    RET      6   4
0021    JMP      4 => 0033
0022 => GGET     4   3      ; "assert"
0023    GGET     5   0      ; "type"
0024    MOV      6   0
0025    CALL     5   2   2
0026    ISEQS    5   4      ; "table"
0027    JMP      5 => 0030
0028    KPRI     5   1
0029    JMP      6 => 0031
0030 => KPRI     5   2
0031 => CALL     4   1   2
0032    MOV      3   0
0033 => IST          1
0034    JMP      4 => 0047
0035    KPRI     4   0
0036    UGET     5   1      ; get_test_type
0037    MOV      6   3
0038    MOV      7   1
0039    CALL     5   3   3
0040    MOV      4   6
0041    MOV      1   5
0042    IST          1
0043    JMP      5 => 0047
0044    KPRI     5   0
0045    MOV      6   4
0046    RET      5   3
0047 => GGET     4   3      ; "assert"
0048    MOV      5   1
0049    CALL     4   1   2
0050    GGET     4   5      ; "next"
0051    TGETS    5   3   6  ; "test_dependencies"
0052    CALL     4   2   2
0053    ISF          4
0054    JMP      5 => 0067
0055    UGET     4   2      ; deps
0056    TGETS    4   4   7  ; "fulfill_dependencies"
0057    MOV      5   3
0058    KSTR     6   6      ; "test_dependencies"
0059    KSTR     7   8      ; "all"
0060    CALL     4   4   4
0061    ISF          5
0062    JMP      7 => 0067
0063    KPRI     7   0
0064    MOV      8   5
0065    MOV      9   6
0066    RET      7   4
0067 => KSTR     4   9      ; "luarocks.test."
0068    MOV      5   1
0069    CAT      4   4   5
0070    GGET     5  10      ; "pcall"
0071    GGET     6  11      ; "require"
0072    MOV      7   4
0073    CALL     5   3   3
0074    IST          5
0075    JMP      7 => 0081
0076    KPRI     7   0
0077    KSTR     8  12      ; "failed loading test execution module "
0078    MOV      9   4
0079    CAT      8   8   9
0080    RET      7   3
0081 => TGETS    7   6  13  ; "run_tests"
0082    TGETS    8   3  14  ; "test"
0083    MOV      9   2
0084    CALLT    7   3

-- BYTECODE -- test.lua:0-75
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fetch"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.deps"
0007    CALL     2   2   2
0008    TDUP     3   3
0009    TNEW     4   0
0010    GGET     5   4      ; "ipairs"
0011    MOV      6   3
0012    CALL     5   4   2
0013    JMP      8 => 0026
0014 => GGET    10   0      ; "require"
0015    KSTR    11   5      ; "luarocks.test."
0016    MOV     12   9
0017    CAT     11  11  12
0018    CALL    10   2   2
0019    GGET    11   6      ; "table"
0020    TGETS   11  11   7  ; "insert"
0021    MOV     12   4
0022    MOV     13  10
0023    CALL    11   1   3
0024    TSETV   10   4   9
0025    TSETV    9   4  10
0026 => ITERC    8   3   3
0027    ITERL    8 => 0014
0028    FNEW     5   8      ; test.lua:21
0029    FNEW     6  10      ; test.lua:36
0030    TSETS    6   0   9  ; "run_test_suite"
0031    UCLO     0 => 0032
0032 => RET1     0   2

-----------------------
-- BYTECODE -- git_http.lua:21-24
0001    TGETS    3   0   0  ; "source"
0002    TGETS    4   0   0  ; "source"
0003    TGETS    4   4   1  ; "url"
0004    MOV      5   4
0005    TGETS    4   4   2  ; "gsub"
0006    KSTR     6   3      ; "^git."
0007    KSTR     7   4      ; ""
0008    CALL     4   2   4
0009    TSETS    4   3   1  ; "url"
0010    UGET     3   0      ; git
0011    TGETS    3   3   5  ; "get_sources"
0012    MOV      4   0
0013    MOV      5   1
0014    MOV      6   2
0015    KSTR     7   6      ; "--"
0016    CALLT    3   5

-- BYTECODE -- git_http.lua:0-27
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fetch.git"
0004    CALL     1   2   2
0005    FNEW     2   3      ; git_http.lua:21
0006    TSETS    2   0   2  ; "get_sources"
0007    UCLO     0 => 0008
0008 => RET1     0   2

-----------------------
-- BYTECODE -- svn.lua:18-61
0001    GGET     3   0      ; "assert"
0002    MOV      5   0
0003    TGETS    4   0   1  ; "type"
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "rockspec"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   2
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   2
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    TGETS    3   0   4  ; "variables"
0024    TGETS    3   3   5  ; "SVN"
0025    UGET     4   0      ; fs
0026    TGETS    4   4   6  ; "is_tool_available"
0027    MOV      5   3
0028    KSTR     6   7      ; "--version"
0029    KSTR     7   8      ; "Subversion"
0030    CALL     4   3   4
0031    IST          4
0032    JMP      6 => 0036
0033    KPRI     6   0
0034    MOV      7   5
0035    RET      6   3
0036 => TGETS    6   0   9  ; "name"
0037    KSTR     7  10      ; "-"
0038    TGETS    8   0  11  ; "version"
0039    CAT      6   6   8
0040    TGETS    7   0  12  ; "source"
0041    TGETS    7   7  13  ; "module"
0042    IST          7
0043    JMP      8 => 0049
0044    UGET     7   1      ; dir
0045    TGETS    7   7  14  ; "base_name"
0046    TGETS    8   0  12  ; "source"
0047    TGETS    8   8  15  ; "url"
0048    CALL     7   2   2
0049 => TGETS    8   0  12  ; "source"
0050    TGETS    8   8  15  ; "url"
0051    MOV      9   8
0052    TGETS    8   8  16  ; "gsub"
0053    KSTR    10  17      ; "^svn://"
0054    KSTR    11  18      ; ""
0055    CALL     8   2   4
0056    TDUP     9  19
0057    TSETB    3   9   1
0058    TSETB    8   9   3
0059    TSETB    7   9   4
0060    TGETS   10   0  12  ; "source"
0061    TGETS   10  10  20  ; "tag"
0062    ISF         10
0063    JMP     11 => 0077
0064    GGET    10  21      ; "table"
0065    TGETS   10  10  22  ; "insert"
0066    MOV     11   9
0067    KSHORT  12   5
0068    KSTR    13  23      ; "-r"
0069    CALL    10   1   4
0070    GGET    10  21      ; "table"
0071    TGETS   10  10  22  ; "insert"
0072    MOV     11   9
0073    KSHORT  12   6
0074    TGETS   13   0  12  ; "source"
0075    TGETS   13  13  20  ; "tag"
0076    CALL    10   1   4
0077 => KPRI    10   0
0078    IST          2
0079    JMP     11 => 0097
0080    UGET    11   0      ; fs
0081    TGETS   11  11  24  ; "make_temp_dir"
0082    MOV     12   6
0083    CALL    11   2   2
0084    MOV     10  11
0085    IST         10
0086    JMP     11 => 0090
0087    KPRI    11   0
0088    KSTR    12  25      ; "Failed creating temporary directory."
0089    RET     11   3
0090 => UGET    11   2      ; util
0091    TGETS   11  11  26  ; "schedule_function"
0092    UGET    12   0      ; fs
0093    TGETS   12  12  27  ; "delete"
0094    MOV     13  10
0095    CALL    11   1   3
0096    JMP     11 => 0098
0097 => MOV     10   2
0098 => UGET    11   0      ; fs
0099    TGETS   11  11  28  ; "change_dir"
0100    MOV     12  10
0101    CALL    11   3   2
0102    IST         11
0103    JMP     13 => 0107
0104    KPRI    13   0
0105    MOV     14  12
0106    RET     13   3
0107 => UGET    13   0      ; fs
0108    TGETS   13  13  29  ; "execute"
0109    UGET    14   3      ; unpack
0110    MOV     15   9
0111    CALL    14   0   2
0112    CALLM   13   2   0
0113    IST         13
0114    JMP     13 => 0118
0115    KPRI    13   0
0116    KSTR    14  30      ; "Failed fetching files from Subversion."
0117    RET     13   3
0118 => UGET    13   0      ; fs
0119    TGETS   13  13  28  ; "change_dir"
0120    MOV     14   7
0121    CALL    13   3   2
0122    MOV     12  14
0123    MOV     11  13
0124    IST         11
0125    JMP     13 => 0129
0126    KPRI    13   0
0127    MOV     14  12
0128    RET     13   3
0129 => GGET    13  31      ; "ipairs"
0130    UGET    14   0      ; fs
0131    TGETS   14  14  32  ; "find"
0132    KSTR    15  33      ; "."
0133    CALL    14   0   2
0134    CALLM   13   4   0
0135    JMP     16 => 0151
0136 => UGET    18   1      ; dir
0137    TGETS   18  18  14  ; "base_name"
0138    MOV     19  17
0139    CALL    18   2   2
0140    ISNES   18  34      ; ".svn"
0141    JMP     18 => 0151
0142    UGET    18   0      ; fs
0143    TGETS   18  18  27  ; "delete"
0144    UGET    19   1      ; dir
0145    TGETS   19  19  35  ; "path"
0146    MOV     20  10
0147    MOV     21   7
0148    MOV     22  17
0149    CALL    19   0   4
0150    CALLM   18   1   0
0151 => ITERC   16   3   3
0152    ITERL   16 => 0136
0153    UGET    13   0      ; fs
0154    TGETS   13  13  36  ; "pop_dir"
0155    CALL    13   1   1
0156    UGET    13   0      ; fs
0157    TGETS   13  13  36  ; "pop_dir"
0158    CALL    13   1   1
0159    MOV     13   7
0160    MOV     14  10
0161    RET     13   3

-- BYTECODE -- svn.lua:0-65
0001    TNEW     0   0
0002    GGET     1   0      ; "unpack"
0003    IST          1
0004    JMP      2 => 0007
0005    GGET     1   1      ; "table"
0006    TGETS    1   1   0  ; "unpack"
0007 => GGET     2   2      ; "require"
0008    KSTR     3   3      ; "luarocks.fs"
0009    CALL     2   2   2
0010    GGET     3   2      ; "require"
0011    KSTR     4   4      ; "luarocks.dir"
0012    CALL     3   2   2
0013    GGET     4   2      ; "require"
0014    KSTR     5   5      ; "luarocks.util"
0015    CALL     4   2   2
0016    FNEW     5   7      ; svn.lua:18
0017    TSETS    5   0   6  ; "get_sources"
0018    UCLO     0 => 0019
0019 => RET1     0   2

-----------------------
-- BYTECODE -- hg_ssh.lua:0-9
0001    GGET     0   0      ; "require"
0002    KSTR     1   1      ; "luarocks.fetch.hg_http"
0003    CALLT    0   2

-----------------------
-- BYTECODE -- git.lua:17-25
0001    UGET     1   0      ; cached_git_version
0002    IST          1
0003    JMP      1 => 0025
0004    GGET     1   0      ; "io"
0005    TGETS    1   1   1  ; "popen"
0006    UGET     2   1      ; fs
0007    TGETS    2   2   2  ; "Q"
0008    MOV      3   0
0009    CALL     2   2   2
0010    KSTR     3   3      ; " --version"
0011    CAT      2   2   3
0012    CALL     1   2   2
0013    MOV      2   1
0014    TGETS    1   1   4  ; "read"
0015    CALL     1   2   2
0016    MOV      3   1
0017    TGETS    2   1   5  ; "match"
0018    KSTR     4   6      ; "%d-%.%d+%.?%d*"
0019    CALL     2   2   3
0020    UGET     3   2      ; vers
0021    TGETS    3   3   7  ; "parse_version"
0022    MOV      4   2
0023    CALL     3   2   2
0024    USETV    0   3      ; cached_git_version
0025 => UGET     1   0      ; cached_git_version
0026    RET1     1   2

-- BYTECODE -- git.lua:31-33
0001    UGET     2   0      ; git_version
0002    MOV      3   0
0003    CALL     2   2   2
0004    UGET     3   1      ; vers
0005    TGETS    3   3   0  ; "parse_version"
0006    MOV      4   1
0007    CALL     3   2   2
0008    ISLE     3   2
0009    JMP      2 => 0012
0010    KPRI     2   1
0011    JMP      3 => 0013
0012 => KPRI     2   2
0013 => RET1     2   2

-- BYTECODE -- git.lua:41-43
0001    UGET     1   0      ; git_is_at_least
0002    MOV      2   0
0003    KSTR     3   0      ; "1.7.10"
0004    CALLT    1   3

-- BYTECODE -- git.lua:49-51
0001    UGET     1   0      ; git_is_at_least
0002    MOV      2   0
0003    KSTR     3   0      ; "1.8.4"
0004    CALLT    1   3

-- BYTECODE -- git.lua:56-58
0001    UGET     1   0      ; git_is_at_least
0002    MOV      2   0
0003    KSTR     3   0      ; "2.10.0"
0004    CALLT    1   3

-- BYTECODE -- git.lua:60-77
0001    MOV      3   1
0002    TGETS    2   1   0  ; "match"
0003    KSTR     4   1      ; "^dev%-%d+$"
0004    CALL     2   2   3
0005    IST          2
0006    JMP      3 => 0015
0007    MOV      3   1
0008    TGETS    2   1   0  ; "match"
0009    KSTR     4   2      ; "^scm%-%d+$"
0010    CALL     2   2   3
0011    IST          2
0012    JMP      2 => 0015
0013    KPRI     2   0
0014    RET1     2   2
0015 => GGET     2   3      ; "io"
0016    TGETS    2   2   4  ; "popen"
0017    UGET     3   0      ; fs
0018    TGETS    3   3   5  ; "command_at"
0019    UGET     4   0      ; fs
0020    TGETS    4   4   6  ; "current_dir"
0021    CALL     4   2   1
0022    UGET     5   0      ; fs
0023    TGETS    5   5   7  ; "Q"
0024    MOV      6   0
0025    CALL     5   2   2
0026    KSTR     6   8      ; " log --pretty=format:%ai_%h -n 1"
0027    CAT      5   5   6
0028    CALL     3   0   3
0029    CALLM    2   2   0
0030    IST          2
0031    JMP      3 => 0034
0032    KPRI     3   0
0033    RET1     3   2
0034 => MOV      4   2
0035    TGETS    3   2   9  ; "read"
0036    KSTR     5  10      ; "*l"
0037    CALL     3   2   3
0038    MOV      5   2
0039    TGETS    4   2  11  ; "close"
0040    CALL     4   1   2
0041    IST          3
0042    JMP      4 => 0045
0043    KPRI     4   0
0044    RET1     4   2
0045 => MOV      5   3
0046    TGETS    4   3   0  ; "match"
0047    KSTR     6  12      ; "([^%s]+) ([^%s]+) ([^%s]+)_([^%s]+)"
0048    CALL     4   5   3
0049    MOV      9   4
0050    TGETS    8   4  13  ; "gsub"
0051    KSTR    10  14      ; "%-"
0052    KSTR    11  15      ; ""
0053    CALL     8   2   4
0054    MOV      4   8
0055    MOV      9   5
0056    TGETS    8   5  13  ; "gsub"
0057    KSTR    10  16      ; ":"
0058    KSTR    11  15      ; ""
0059    CALL     8   2   4
0060    MOV      5   8
0061    MOV      8   4
0062    KSTR     9  17      ; "."
0063    MOV     10   5
0064    KSTR    11  17      ; "."
0065    MOV     12   7
0066    CAT      8   8  12
0067    RET1     8   2

-- BYTECODE -- git.lua:86-163
0001    GGET     4   0      ; "assert"
0002    MOV      6   0
0003    TGETS    5   0   1  ; "type"
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "rockspec"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   2
0014    CALL     5   2   2
0015    ISEQS    5   3      ; "string"
0016    JMP      5 => 0021
0017    NOT      5   2
0018    JMP      6 => 0022
0019    KPRI     5   1
0020    JMP      6 => 0022
0021 => KPRI     5   2
0022 => CALL     4   1   2
0023    TGETS    4   0   4  ; "variables"
0024    TGETS    4   4   5  ; "GIT"
0025    TGETS    5   0   6  ; "name"
0026    KSTR     6   7      ; "-"
0027    TGETS    7   0   8  ; "version"
0028    CAT      5   5   7
0029    UGET     6   0      ; dir
0030    TGETS    6   6   9  ; "base_name"
0031    TGETS    7   0  10  ; "source"
0032    TGETS    7   7  11  ; "url"
0033    CALL     6   2   2
0034    MOV      8   6
0035    TGETS    7   6  12  ; "gsub"
0036    KSTR     9  13      ; "%.git$"
0037    KSTR    10  14      ; ""
0038    CALL     7   2   4
0039    MOV      6   7
0040    UGET     7   1      ; fs
0041    TGETS    7   7  15  ; "is_tool_available"
0042    MOV      8   4
0043    KSTR     9  16      ; "Git"
0044    CALL     7   3   3
0045    IST          7
0046    JMP      9 => 0050
0047    KPRI     9   0
0048    MOV     10   8
0049    RET      9   3
0050 => KPRI     9   0
0051    IST          2
0052    JMP     10 => 0070
0053    UGET    10   1      ; fs
0054    TGETS   10  10  17  ; "make_temp_dir"
0055    MOV     11   5
0056    CALL    10   2   2
0057    MOV      9  10
0058    IST          9
0059    JMP     10 => 0063
0060    KPRI    10   0
0061    KSTR    11  18      ; "Failed creating temporary directory."
0062    RET     10   3
0063 => UGET    10   2      ; util
0064    TGETS   10  10  19  ; "schedule_function"
0065    UGET    11   1      ; fs
0066    TGETS   11  11  20  ; "delete"
0067    MOV     12   9
0068    CALL    10   1   3
0069    JMP     10 => 0071
0070 => MOV      9   2
0071 => UGET    10   1      ; fs
0072    TGETS   10  10  21  ; "absolute_name"
0073    MOV     11   9
0074    CALL    10   2   2
0075    MOV      9  10
0076    UGET    10   1      ; fs
0077    TGETS   10  10  22  ; "change_dir"
0078    MOV     11   9
0079    CALL    10   3   2
0080    IST         10
0081    JMP     12 => 0085
0082    KPRI    12   0
0083    MOV     13  11
0084    RET     12   3
0085 => TDUP    12  24
0086    UGET    13   1      ; fs
0087    TGETS   13  13  23  ; "Q"
0088    MOV     14   4
0089    CALL    13   2   2
0090    TSETB   13  12   1
0091    ISTC    13   3
0092    JMP     13 => 0094
0093    KSTR    13  25      ; "--depth=1"
0094 => TSETB   13  12   3
0095    TGETS   13   0  10  ; "source"
0096    TGETS   13  13  11  ; "url"
0097    TSETB   13  12   4
0098    TSETB    6  12   5
0099    TGETS   13   0  10  ; "source"
0100    TGETS   13  13  26  ; "tag"
0101    IST         13
0102    JMP     14 => 0105
0103    TGETS   13   0  10  ; "source"
0104    TGETS   13  13  27  ; "branch"
0105 => ISNES   13  28      ; "master"
0106    JMP     14 => 0108
0107    KPRI    13   0
0108 => ISF         13
0109    JMP     14 => 0123
0110    UGET    14   3      ; git_can_clone_by_tag
0111    MOV     15   4
0112    CALL    14   2   2
0113    ISF         14
0114    JMP     15 => 0123
0115    GGET    14  29      ; "table"
0116    TGETS   14  14  30  ; "insert"
0117    MOV     15  12
0118    KSHORT  16   3
0119    KSTR    17  31      ; "--branch="
0120    MOV     18  13
0121    CAT     17  17  18
0122    CALL    14   1   4
0123 => UGET    14   1      ; fs
0124    TGETS   14  14  32  ; "execute"
0125    UGET    15   4      ; unpack
0126    MOV     16  12
0127    CALL    15   0   2
0128    CALLM   14   2   0
0129    IST         14
0130    JMP     14 => 0134
0131    KPRI    14   0
0132    KSTR    15  33      ; "Failed cloning git repository."
0133    RET     14   3
0134 => UGET    14   1      ; fs
0135    TGETS   14  14  22  ; "change_dir"
0136    MOV     15   6
0137    CALL    14   3   2
0138    MOV     11  15
0139    MOV     10  14
0140    IST         10
0141    JMP     14 => 0145
0142    KPRI    14   0
0143    MOV     15  11
0144    RET     14   3
0145 => ISF         13
0146    JMP     14 => 0168
0147    UGET    14   3      ; git_can_clone_by_tag
0148    CALL    14   2   1
0149    IST         14
0150    JMP     14 => 0168
0151    UGET    14   1      ; fs
0152    TGETS   14  14  32  ; "execute"
0153    UGET    15   1      ; fs
0154    TGETS   15  15  23  ; "Q"
0155    MOV     16   4
0156    CALL    15   2   2
0157    KSTR    16  34      ; "checkout"
0158    MOV     17  13
0159    CALL    14   2   4
0160    IST         14
0161    JMP     14 => 0168
0162    KPRI    14   0
0163    KSTR    15  35      ; "Failed to check out the ""
0164    MOV     16  13
0165    KSTR    17  36      ; "" tag or branch."
0166    CAT     15  15  17
0167    RET     14   3
0168 => MOV     15   0
0169    TGETS   14   0  37  ; "format_is_at_least"
0170    KSTR    16  38      ; "3.0"
0171    CALL    14   2   3
0172    ISF         14
0173    JMP     15 => 0215
0174    TDUP    14  39
0175    UGET    15   1      ; fs
0176    TGETS   15  15  23  ; "Q"
0177    MOV     16   4
0178    CALL    15   2   2
0179    TSETB   15  14   1
0180    MOV     12  14
0181    UGET    14   5      ; git_supports_shallow_recommendations
0182    MOV     15   4
0183    CALL    14   2   2
0184    ISF         14
0185    JMP     15 => 0193
0186    GGET    14  29      ; "table"
0187    TGETS   14  14  30  ; "insert"
0188    MOV     15  12
0189    KSHORT  16   5
0190    KSTR    17  40      ; "--recommend-shallow"
0191    CALL    14   1   4
0192    JMP     14 => 0204
0193 => UGET    14   6      ; git_supports_shallow_submodules
0194    MOV     15   4
0195    CALL    14   2   2
0196    ISF         14
0197    JMP     15 => 0204
0198    GGET    14  29      ; "table"
0199    TGETS   14  14  30  ; "insert"
0200    MOV     15  12
0201    KSHORT  16   5
0202    KSTR    17  25      ; "--depth=1"
0203    CALL    14   1   4
0204 => UGET    14   1      ; fs
0205    TGETS   14  14  32  ; "execute"
0206    UGET    15   4      ; unpack
0207    MOV     16  12
0208    CALL    15   0   2
0209    CALLM   14   2   0
0210    IST         14
0211    JMP     14 => 0215
0212    KPRI    14   0
0213    KSTR    15  41      ; "Failed to fetch submodules."
0214    RET     14   3
0215 => TGETS   14   0  10  ; "source"
0216    TGETS   14  14  26  ; "tag"
0217    IST         14
0218    JMP     14 => 0225
0219    TGETS   14   0  10  ; "source"
0220    UGET    15   7      ; git_identifier
0221    MOV     16   4
0222    TGETS   17   0   8  ; "version"
0223    CALL    15   2   3
0224    TSETS   15  14  42  ; "identifier"
0225 => UGET    14   1      ; fs
0226    TGETS   14  14  20  ; "delete"
0227    UGET    15   0      ; dir
0228    TGETS   15  15  43  ; "path"
0229    MOV     16   9
0230    MOV     17   6
0231    KSTR    18  44      ; ".git"
0232    CALL    15   0   4
0233    CALLM   14   1   0
0234    UGET    14   1      ; fs
0235    TGETS   14  14  20  ; "delete"
0236    UGET    15   0      ; dir
0237    TGETS   15  15  43  ; "path"
0238    MOV     16   9
0239    MOV     17   6
0240    KSTR    18  45      ; ".gitignore"
0241    CALL    15   0   4
0242    CALLM   14   1   0
0243    UGET    14   1      ; fs
0244    TGETS   14  14  46  ; "pop_dir"
0245    CALL    14   1   1
0246    UGET    14   1      ; fs
0247    TGETS   14  14  46  ; "pop_dir"
0248    CALL    14   1   1
0249    MOV     14   6
0250    MOV     15   9
0251    RET     14   3

-- BYTECODE -- git.lua:0-166
0001    TNEW     0   0
0002    GGET     1   0      ; "unpack"
0003    IST          1
0004    JMP      2 => 0007
0005    GGET     1   1      ; "table"
0006    TGETS    1   1   0  ; "unpack"
0007 => GGET     2   2      ; "require"
0008    KSTR     3   3      ; "luarocks.fs"
0009    CALL     2   2   2
0010    GGET     3   2      ; "require"
0011    KSTR     4   4      ; "luarocks.dir"
0012    CALL     3   2   2
0013    GGET     4   2      ; "require"
0014    KSTR     5   5      ; "luarocks.core.vers"
0015    CALL     4   2   2
0016    GGET     5   2      ; "require"
0017    KSTR     6   6      ; "luarocks.util"
0018    CALL     5   2   2
0019    KPRI     6   0
0020    FNEW     7   7      ; git.lua:17
0021    FNEW     8   8      ; git.lua:31
0022    FNEW     9   9      ; git.lua:41
0023    FNEW    10  10      ; git.lua:49
0024    FNEW    11  11      ; git.lua:56
0025    FNEW    12  12      ; git.lua:60
0026    FNEW    13  14      ; git.lua:86
0027    TSETS   13   0  13  ; "get_sources"
0028    UCLO     0 => 0029
0029 => RET1     0   2

-----------------------
-- BYTECODE -- git_https.lua:0-8
0001    GGET     0   0      ; "require"
0002    KSTR     1   1      ; "luarocks.fetch.git_http"
0003    CALLT    0   2

-----------------------
-- BYTECODE -- git_file.lua:14-17
0001    TGETS    3   0   0  ; "source"
0002    TGETS    4   0   0  ; "source"
0003    TGETS    4   4   1  ; "url"
0004    MOV      5   4
0005    TGETS    4   4   2  ; "gsub"
0006    KSTR     6   3      ; "^git.file://"
0007    KSTR     7   4      ; ""
0008    CALL     4   2   4
0009    TSETS    4   3   1  ; "url"
0010    UGET     3   0      ; git
0011    TGETS    3   3   5  ; "get_sources"
0012    MOV      4   0
0013    MOV      5   1
0014    MOV      6   2
0015    CALLT    3   4

-- BYTECODE -- git_file.lua:0-20
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fetch.git"
0004    CALL     1   2   2
0005    FNEW     2   3      ; git_file.lua:14
0006    TSETS    2   0   2  ; "get_sources"
0007    UCLO     0 => 0008
0008 => RET1     0   2

-----------------------
-- BYTECODE -- git_ssh.lua:21-30
0001    TGETS    3   0   0  ; "source"
0002    TGETS    4   0   0  ; "source"
0003    TGETS    4   4   1  ; "url"
0004    MOV      5   4
0005    TGETS    4   4   2  ; "gsub"
0006    KSTR     6   3      ; "^git."
0007    KSTR     7   4      ; ""
0008    CALL     4   2   4
0009    TSETS    4   3   1  ; "url"
0010    TGETS    3   0   0  ; "source"
0011    TGETS    3   3   1  ; "url"
0012    MOV      4   3
0013    TGETS    3   3   5  ; "match"
0014    KSTR     5   6      ; "^ssh://[^/]+:[^%d]"
0015    CALL     3   2   3
0016    ISF          3
0017    JMP      4 => 0027
0018    TGETS    3   0   0  ; "source"
0019    TGETS    4   0   0  ; "source"
0020    TGETS    4   4   1  ; "url"
0021    MOV      5   4
0022    TGETS    4   4   2  ; "gsub"
0023    KSTR     6   7      ; "^ssh://"
0024    KSTR     7   4      ; ""
0025    CALL     4   2   4
0026    TSETS    4   3   1  ; "url"
0027 => UGET     3   0      ; git
0028    TGETS    3   3   8  ; "get_sources"
0029    MOV      4   0
0030    MOV      5   1
0031    MOV      6   2
0032    KSTR     7   9      ; "--"
0033    CALLT    3   5

-- BYTECODE -- git_ssh.lua:0-33
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fetch.git"
0004    CALL     1   2   2
0005    FNEW     2   3      ; git_ssh.lua:21
0006    TSETS    2   0   2  ; "get_sources"
0007    UCLO     0 => 0008
0008 => RET1     0   2

-----------------------
-- BYTECODE -- cvs.lua:18-52
0001    GGET     3   0      ; "assert"
0002    MOV      5   0
0003    TGETS    4   0   1  ; "type"
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "rockspec"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   2
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   2
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    TGETS    3   0   4  ; "variables"
0024    TGETS    3   3   5  ; "CVS"
0025    UGET     4   0      ; fs
0026    TGETS    4   4   6  ; "is_tool_available"
0027    MOV      5   3
0028    KSTR     6   5      ; "CVS"
0029    CALL     4   3   3
0030    IST          4
0031    JMP      6 => 0035
0032    KPRI     6   0
0033    MOV      7   5
0034    RET      6   3
0035 => TGETS    6   0   7  ; "name"
0036    KSTR     7   8      ; "-"
0037    TGETS    8   0   9  ; "version"
0038    CAT      6   6   8
0039    TGETS    7   0  10  ; "source"
0040    TGETS    7   7  11  ; "module"
0041    IST          7
0042    JMP      8 => 0048
0043    UGET     7   1      ; dir
0044    TGETS    7   7  12  ; "base_name"
0045    TGETS    8   0  10  ; "source"
0046    TGETS    8   8  13  ; "url"
0047    CALL     7   2   2
0048 => TDUP     8  16
0049    TSETB    3   8   1
0050    KSTR     9  14      ; "-d"
0051    TGETS   10   0  10  ; "source"
0052    TGETS   10  10  15  ; "pathname"
0053    CAT      9   9  10
0054    TSETB    9   8   2
0055    TSETB    7   8   4
0056    TGETS    9   0  10  ; "source"
0057    TGETS    9   9  17  ; "tag"
0058    ISF          9
0059    JMP     10 => 0073
0060    GGET     9  18      ; "table"
0061    TGETS    9   9  19  ; "insert"
0062    MOV     10   8
0063    KSHORT  11   4
0064    KSTR    12  20      ; "-r"
0065    CALL     9   1   4
0066    GGET     9  18      ; "table"
0067    TGETS    9   9  19  ; "insert"
0068    MOV     10   8
0069    KSHORT  11   5
0070    TGETS   12   0  10  ; "source"
0071    TGETS   12  12  17  ; "tag"
0072    CALL     9   1   4
0073 => KPRI     9   0
0074    IST          2
0075    JMP     10 => 0093
0076    UGET    10   0      ; fs
0077    TGETS   10  10  21  ; "make_temp_dir"
0078    MOV     11   6
0079    CALL    10   2   2
0080    MOV      9  10
0081    IST          9
0082    JMP     10 => 0086
0083    KPRI    10   0
0084    KSTR    11  22      ; "Failed creating temporary directory."
0085    RET     10   3
0086 => UGET    10   2      ; util
0087    TGETS   10  10  23  ; "schedule_function"
0088    UGET    11   0      ; fs
0089    TGETS   11  11  24  ; "delete"
0090    MOV     12   9
0091    CALL    10   1   3
0092    JMP     10 => 0094
0093 => MOV      9   2
0094 => UGET    10   0      ; fs
0095    TGETS   10  10  25  ; "change_dir"
0096    MOV     11   9
0097    CALL    10   3   2
0098    IST         10
0099    JMP     12 => 0103
0100    KPRI    12   0
0101    MOV     13  11
0102    RET     12   3
0103 => UGET    12   0      ; fs
0104    TGETS   12  12  26  ; "execute"
0105    UGET    13   3      ; unpack
0106    MOV     14   8
0107    CALL    13   0   2
0108    CALLM   12   2   0
0109    IST         12
0110    JMP     12 => 0114
0111    KPRI    12   0
0112    KSTR    13  27      ; "Failed fetching files from CVS."
0113    RET     12   3
0114 => UGET    12   0      ; fs
0115    TGETS   12  12  28  ; "pop_dir"
0116    CALL    12   1   1
0117    MOV     12   7
0118    MOV     13   9
0119    RET     12   3

-- BYTECODE -- cvs.lua:0-56
0001    TNEW     0   0
0002    GGET     1   0      ; "unpack"
0003    IST          1
0004    JMP      2 => 0007
0005    GGET     1   1      ; "table"
0006    TGETS    1   1   0  ; "unpack"
0007 => GGET     2   2      ; "require"
0008    KSTR     3   3      ; "luarocks.fs"
0009    CALL     2   2   2
0010    GGET     3   2      ; "require"
0011    KSTR     4   4      ; "luarocks.dir"
0012    CALL     3   2   2
0013    GGET     4   2      ; "require"
0014    KSTR     5   5      ; "luarocks.util"
0015    CALL     4   2   2
0016    FNEW     5   7      ; cvs.lua:18
0017    TSETS    5   0   6  ; "get_sources"
0018    UCLO     0 => 0019
0019 => RET1     0   2

-----------------------
-- BYTECODE -- sscm.lua:15-42
0001    GGET     3   0      ; "assert"
0002    MOV      5   0
0003    TGETS    4   0   1  ; "type"
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "rockspec"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   2
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   2
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    TGETS    3   0   4  ; "variables"
0024    TGETS    3   3   5  ; "SSCM"
0025    TGETS    4   0   6  ; "source"
0026    TGETS    4   4   7  ; "module"
0027    IST          4
0028    JMP      5 => 0034
0029    UGET     4   0      ; dir
0030    TGETS    4   4   8  ; "base_name"
0031    TGETS    5   0   6  ; "source"
0032    TGETS    5   5   9  ; "url"
0033    CALL     4   2   2
0034 => GGET     5   3      ; "string"
0035    TGETS    5   5  10  ; "match"
0036    TGETS    6   0   6  ; "source"
0037    TGETS    6   6  11  ; "pathname"
0038    KSTR     7  12      ; "^([^/]*)/(.*)"
0039    CALL     5   3   3
0040    ISF          5
0041    JMP      7 => 0044
0042    IST          6
0043    JMP      7 => 0047
0044 => KPRI     7   0
0045    KSTR     8  13      ; "Error retrieving branch and repository f"~
0046    RET      7   3
0047 => KPRI     7   0
0048    GGET     8  14      ; "io"
0049    TGETS    8   8  15  ; "popen"
0050    GGET     9   3      ; "string"
0051    TGETS    9   9  16  ; "format"
0052    MOV     10   3
0053    KSTR    11  17      ; " property "/" -d -b%s -p%s"
0054    CAT     10  10  11
0055    MOV     11   5
0056    MOV     12   6
0057    CALL     9   0   4
0058    CALLM    8   2   0
0059    MOV     10   8
0060    TGETS    9   8  18  ; "lines"
0061    CALL     9   4   2
0062    JMP     12 => 0072
0063 => GGET    13   3      ; "string"
0064    TGETS   13  13  10  ; "match"
0065    MOV     14  12
0066    KSTR    15  19      ; "Working directory:[%s]*(.*)%c$"
0067    CALL    13   2   3
0068    MOV      7  13
0069    ISF          7
0070    JMP     13 => 0072
0071    JMP      9 => 0074
0072 => ITERC   12   2   3
0073    ITERL   12 => 0063
0074 => MOV     10   8
0075    TGETS    9   8  20  ; "close"
0076    CALL     9   1   2
0077    IST          7
0078    JMP      9 => 0082
0079    KPRI     9   0
0080    KSTR    10  21      ; "Error retrieving working directory from "~
0081    RET      9   3
0082 => UGET     9   1      ; fs
0083    TGETS    9   9  22  ; "execute"
0084    MOV     10   3
0085    KSTR    11  23      ; "get"
0086    KSTR    12  24      ; "*"
0087    KSTR    13  25      ; "-e"
0088    KSTR    14  26      ; "-r"
0089    KSTR    15  27      ; "-b"
0090    MOV     16   5
0091    CAT     15  15  16
0092    KSTR    16  28      ; "-p"
0093    MOV     17   6
0094    CAT     16  16  17
0095    KSTR    17  29      ; "-tmodify"
0096    KSTR    18  30      ; "-wreplace"
0097    CALL     9   2  10
0098    IST          9
0099    JMP      9 => 0103
0100    KPRI     9   0
0101    KSTR    10  31      ; "Failed fetching files from SSCM."
0102    RET      9   3
0103 => MOV      9   4
0104    MOV     10   7
0105    RET      9   3

-- BYTECODE -- sscm.lua:0-45
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    FNEW     3   4      ; sscm.lua:15
0009    TSETS    3   0   3  ; "get_sources"
0010    UCLO     0 => 0011
0011 => RET1     0   2

-----------------------
-- BYTECODE -- hg_http.lua:19-22
0001    TGETS    3   0   0  ; "source"
0002    TGETS    4   0   0  ; "source"
0003    TGETS    4   4   1  ; "url"
0004    MOV      5   4
0005    TGETS    4   4   2  ; "gsub"
0006    KSTR     6   3      ; "^hg."
0007    KSTR     7   4      ; ""
0008    CALL     4   2   4
0009    TSETS    4   3   1  ; "url"
0010    UGET     3   0      ; hg
0011    TGETS    3   3   5  ; "get_sources"
0012    MOV      4   0
0013    MOV      5   1
0014    MOV      6   2
0015    CALLT    3   4

-- BYTECODE -- hg_http.lua:0-25
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fetch.hg"
0004    CALL     1   2   2
0005    FNEW     2   3      ; hg_http.lua:19
0006    TSETS    2   0   2  ; "get_sources"
0007    UCLO     0 => 0008
0008 => RET1     0   2

-----------------------
-- BYTECODE -- hg_https.lua:0-9
0001    GGET     0   0      ; "require"
0002    KSTR     1   1      ; "luarocks.fetch.hg_http"
0003    CALLT    0   2

-----------------------
-- BYTECODE -- hg.lua:18-62
0001    GGET     3   0      ; "assert"
0002    MOV      5   0
0003    TGETS    4   0   1  ; "type"
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "rockspec"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   2
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   2
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    TGETS    3   0   4  ; "variables"
0024    TGETS    3   3   5  ; "HG"
0025    UGET     4   0      ; fs
0026    TGETS    4   4   6  ; "is_tool_available"
0027    MOV      5   3
0028    KSTR     6   7      ; "Mercurial"
0029    CALL     4   3   3
0030    IST          4
0031    JMP      6 => 0035
0032    KPRI     6   0
0033    MOV      7   5
0034    RET      6   3
0035 => TGETS    6   0   8  ; "name"
0036    KSTR     7   9      ; "-"
0037    TGETS    8   0  10  ; "version"
0038    CAT      6   6   8
0039    TGETS    7   0  11  ; "source"
0040    TGETS    7   7  12  ; "url"
0041    MOV      8   7
0042    TGETS    7   7  13  ; "gsub"
0043    KSTR     9  14      ; "^hg://"
0044    KSTR    10  15      ; ""
0045    CALL     7   2   4
0046    UGET     8   1      ; dir
0047    TGETS    8   8  16  ; "base_name"
0048    MOV      9   7
0049    CALL     8   2   2
0050    TDUP     9  17
0051    TSETB    3   9   1
0052    TSETB    7   9   3
0053    TSETB    8   9   4
0054    TGETS   10   0  11  ; "source"
0055    TGETS   10  10  18  ; "tag"
0056    IST         10
0057    JMP     11 => 0060
0058    TGETS   10   0  11  ; "source"
0059    TGETS   10  10  19  ; "branch"
0060 => ISF         10
0061    JMP     11 => 0068
0062    TDUP    11  20
0063    TSETB    3  11   1
0064    TSETB   10  11   4
0065    TSETB    7  11   5
0066    TSETB    8  11   6
0067    MOV      9  11
0068 => KPRI    11   0
0069    IST          2
0070    JMP     12 => 0088
0071    UGET    12   0      ; fs
0072    TGETS   12  12  21  ; "make_temp_dir"
0073    MOV     13   6
0074    CALL    12   2   2
0075    MOV     11  12
0076    IST         11
0077    JMP     12 => 0081
0078    KPRI    12   0
0079    KSTR    13  22      ; "Failed creating temporary directory."
0080    RET     12   3
0081 => UGET    12   2      ; util
0082    TGETS   12  12  23  ; "schedule_function"
0083    UGET    13   0      ; fs
0084    TGETS   13  13  24  ; "delete"
0085    MOV     14  11
0086    CALL    12   1   3
0087    JMP     12 => 0089
0088 => MOV     11   2
0089 => UGET    12   0      ; fs
0090    TGETS   12  12  25  ; "change_dir"
0091    MOV     13  11
0092    CALL    12   3   2
0093    IST         12
0094    JMP     14 => 0098
0095    KPRI    14   0
0096    MOV     15  13
0097    RET     14   3
0098 => UGET    14   0      ; fs
0099    TGETS   14  14  26  ; "execute"
0100    UGET    15   3      ; unpack
0101    MOV     16   9
0102    CALL    15   0   2
0103    CALLM   14   2   0
0104    IST         14
0105    JMP     14 => 0109
0106    KPRI    14   0
0107    KSTR    15  27      ; "Failed cloning hg repository."
0108    RET     14   3
0109 => UGET    14   0      ; fs
0110    TGETS   14  14  25  ; "change_dir"
0111    MOV     15   8
0112    CALL    14   3   2
0113    MOV     13  15
0114    MOV     12  14
0115    IST         12
0116    JMP     14 => 0120
0117    KPRI    14   0
0118    MOV     15  13
0119    RET     14   3
0120 => UGET    14   0      ; fs
0121    TGETS   14  14  24  ; "delete"
0122    UGET    15   1      ; dir
0123    TGETS   15  15  28  ; "path"
0124    MOV     16  11
0125    MOV     17   8
0126    KSTR    18  29      ; ".hg"
0127    CALL    15   0   4
0128    CALLM   14   1   0
0129    UGET    14   0      ; fs
0130    TGETS   14  14  24  ; "delete"
0131    UGET    15   1      ; dir
0132    TGETS   15  15  28  ; "path"
0133    MOV     16  11
0134    MOV     17   8
0135    KSTR    18  30      ; ".hgignore"
0136    CALL    15   0   4
0137    CALLM   14   1   0
0138    UGET    14   0      ; fs
0139    TGETS   14  14  31  ; "pop_dir"
0140    CALL    14   1   1
0141    UGET    14   0      ; fs
0142    TGETS   14  14  31  ; "pop_dir"
0143    CALL    14   1   1
0144    MOV     14   8
0145    MOV     15  11
0146    RET     14   3

-- BYTECODE -- hg.lua:0-66
0001    TNEW     0   0
0002    GGET     1   0      ; "unpack"
0003    IST          1
0004    JMP      2 => 0007
0005    GGET     1   1      ; "table"
0006    TGETS    1   1   0  ; "unpack"
0007 => GGET     2   2      ; "require"
0008    KSTR     3   3      ; "luarocks.fs"
0009    CALL     2   2   2
0010    GGET     3   2      ; "require"
0011    KSTR     4   4      ; "luarocks.dir"
0012    CALL     3   2   2
0013    GGET     4   2      ; "require"
0014    KSTR     5   5      ; "luarocks.util"
0015    CALL     4   2   2
0016    FNEW     5   7      ; hg.lua:18
0017    TSETS    5   0   6  ; "get_sources"
0018    UCLO     0 => 0019
0019 => RET1     0   2

-----------------------
-- BYTECODE -- manifest.lua:72-78
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    UGET     2   0      ; manifest_formats
0012    TGETS    2   2   3  ; "3.0"
0013    UGET     3   1      ; type_check
0014    TGETS    3   3   4  ; "check_undeclared_globals"
0015    MOV      4   1
0016    MOV      5   2
0017    CALL     3   3   3
0018    IST          3
0019    JMP      5 => 0023
0020    KPRI     5   0
0021    MOV      6   4
0022    RET      5   3
0023 => UGET     5   1      ; type_check
0024    TGETS    5   5   5  ; "type_check_table"
0025    KSTR     6   3      ; "3.0"
0026    MOV      7   0
0027    MOV      8   2
0028    KSTR     9   6      ; ""
0029    CALLT    5   5

-- BYTECODE -- manifest.lua:0-81
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.type_check"
0004    CALL     1   2   2
0005    TGETS    2   1   2  ; "declare_schemas"
0006    TDUP     3  47
0007    TDUP     4  19
0008    TDUP     5   3
0009    TDUP     6  18
0010    TDUP     7  17
0011    TDUP     8   5
0012    TDUP     9   4
0013    TSETS    9   8   6  ; "arch"
0014    TDUP     9   8
0015    TDUP    10   7
0016    TSETS   10   9   9  ; "_any"
0017    TSETS    9   8  10  ; "modules"
0018    TDUP     9  12
0019    TDUP    10  11
0020    TSETS   10   9   9  ; "_any"
0021    TSETS    9   8  13  ; "commands"
0022    TDUP     9  15
0023    TDUP    10  14
0024    TSETS   10   9   9  ; "_any"
0025    TSETS    9   8  16  ; "dependencies"
0026    TSETS    8   7   9  ; "_any"
0027    TSETS    7   6   9  ; "_any"
0028    TSETS    6   5   9  ; "_any"
0029    TSETS    5   4  20  ; "repository"
0030    TDUP     5  21
0031    TDUP     6  23
0032    TDUP     7  22
0033    TSETS    7   6   9  ; "_any"
0034    TSETS    6   5   9  ; "_any"
0035    TSETS    5   4  10  ; "modules"
0036    TDUP     5  24
0037    TDUP     6  26
0038    TDUP     7  25
0039    TSETS    7   6   9  ; "_any"
0040    TSETS    6   5   9  ; "_any"
0041    TSETS    5   4  13  ; "commands"
0042    TDUP     5  46
0043    TDUP     6  45
0044    TDUP     7  44
0045    TDUP     8  28
0046    TDUP     9  27
0047    TSETS    9   8  29  ; "name"
0048    TDUP     9  30
0049    TSETS    9   8  31  ; "namespace"
0050    TDUP     9  42
0051    TDUP    10  33
0052    TDUP    11  32
0053    TSETS   11  10  34  ; "no_upgrade"
0054    TDUP    11  35
0055    TSETS   11  10  36  ; "op"
0056    TDUP    11  38
0057    TDUP    12  37
0058    TSETS   12  11  39  ; "string"
0059    TDUP    12  40
0060    TSETS   12  11   9  ; "_any"
0061    TSETS   11  10  41  ; "version"
0062    TSETS   10   9   9  ; "_any"
0063    TSETS    9   8  43  ; "constraints"
0064    TSETS    8   7   9  ; "_any"
0065    TSETS    7   6   9  ; "_any"
0066    TSETS    6   5   9  ; "_any"
0067    TSETS    5   4  16  ; "dependencies"
0068    TSETS    4   3  48  ; "3.0"
0069    CALL     2   2   2
0070    FNEW     3  50      ; manifest.lua:72
0071    TSETS    3   0  49  ; "check"
0072    UCLO     0 => 0073
0073 => RET1     0   2

-----------------------
-- BYTECODE -- rockspec.lua:146-160
0001    UGET     3   0      ; rockspec_formats
0002    TGETV    3   3   2
0003    IST          3
0004    JMP      4 => 0010
0005    KPRI     4   0
0006    KSTR     5   0      ; "unknown rockspec format "
0007    MOV      6   2
0008    CAT      5   5   6
0009    RET      4   3
0010 => UGET     4   1      ; type_check
0011    TGETS    4   4   1  ; "check_undeclared_globals"
0012    MOV      5   1
0013    MOV      6   3
0014    CALL     4   3   3
0015    ISF          4
0016    JMP      6 => 0026
0017    UGET     6   1      ; type_check
0018    TGETS    6   6   2  ; "type_check_table"
0019    MOV      7   2
0020    MOV      8   0
0021    MOV      9   3
0022    KSTR    10   3      ; ""
0023    CALL     6   3   5
0024    MOV      5   7
0025    MOV      4   6
0026 => ISF          4
0027    JMP      6 => 0031
0028    KPRI     6   2
0029    RET1     6   2
0030    JMP      6 => 0034
0031 => KPRI     6   0
0032    MOV      7   5
0033    RET      6   3
0034 => RET0     0   1

-- BYTECODE -- rockspec.lua:168-197
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    TGETS    2   0   3  ; "rockspec_format"
0012    IST          2
0013    JMP      3 => 0015
0014    KSTR     2   4      ; "1.0"
0015 => UGET     3   0      ; check_rockspec_using_version
0016    MOV      4   0
0017    MOV      5   1
0018    MOV      6   2
0019    CALL     3   3   4
0020    ISF          3
0021    JMP      5 => 0024
0022    KPRI     5   2
0023    RET1     5   2
0024 => KPRI     5   1
0025    GGET     6   5      ; "ipairs"
0026    UGET     7   1      ; versions
0027    CALL     6   4   2
0028    JMP      9 => 0053
0029 => IST          5
0030    JMP     11 => 0035
0031    ISNEV   10   2
0032    JMP     11 => 0053
0033    KPRI     5   2
0034    JMP     11 => 0053
0035 => UGET    11   0      ; check_rockspec_using_version
0036    MOV     12   0
0037    MOV     13   1
0038    MOV     14  10
0039    CALL    11   3   4
0040    ISF         11
0041    JMP     13 => 0053
0042    KPRI    13   0
0043    MOV     14   4
0044    KSTR    15   6      ; " (using rockspec format "
0045    MOV     16   2
0046    KSTR    17   7      ; " -- "
0047    KSTR    18   8      ; "adding 'rockspec_format = ""
0048    MOV     19  10
0049    KSTR    20   9      ; ""' to the rockspec "
0050    KSTR    21  10      ; "will fix this)"
0051    CAT     14  14  21
0052    RET     13   3
0053 => ITERC    9   3   3
0054    ITERL    9 => 0029
0055    KPRI     6   0
0056    MOV      7   4
0057    KSTR     8   6      ; " (using rockspec format "
0058    MOV      9   2
0059    KSTR    10  11      ; ")"
0060    CAT      7   7  10
0061    RET      6   3

-- BYTECODE -- rockspec.lua:0-200
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.type_check"
0004    CALL     1   2   2
0005    KSTR     2   3      ; "3.0"
0006    TSETS    2   0   2  ; "rockspec_format"
0007    TGETS    2   1   4  ; "declare_schemas"
0008    TDUP     3  82
0009    TDUP     4   6
0010    TDUP     5   5
0011    TSETS    5   4   2  ; "rockspec_format"
0012    TDUP     5   7
0013    TSETS    5   4   8  ; "package"
0014    TDUP     5   9
0015    TSETS    5   4  10  ; "version"
0016    TDUP     5  12
0017    TDUP     6  11
0018    TSETS    6   5  13  ; "summary"
0019    TDUP     6  14
0020    TSETS    6   5  15  ; "detailed"
0021    TDUP     6  16
0022    TSETS    6   5  17  ; "homepage"
0023    TDUP     6  18
0024    TSETS    6   5  19  ; "license"
0025    TDUP     6  20
0026    TSETS    6   5  21  ; "maintainer"
0027    TSETS    5   4  22  ; "description"
0028    TDUP     5  24
0029    TGETS    6   1  23  ; "MAGIC_PLATFORMS"
0030    TSETS    6   5  25  ; "platforms"
0031    TDUP     6  26
0032    TSETS    6   5  27  ; "_any"
0033    TSETS    5   4  28  ; "dependencies"
0034    TDUP     5  30
0035    TDUP     6  29
0036    TSETS    6   5  27  ; "_any"
0037    TSETS    5   4  31  ; "supported_platforms"
0038    TDUP     5  32
0039    TGETS    6   1  23  ; "MAGIC_PLATFORMS"
0040    TSETS    6   5  25  ; "platforms"
0041    TDUP     6  34
0042    TDUP     7  33
0043    TSETS    7   6  35  ; "program"
0044    TDUP     7  36
0045    TSETS    7   6  37  ; "header"
0046    TDUP     7  38
0047    TSETS    7   6  39  ; "library"
0048    TSETS    6   5  27  ; "_any"
0049    TSETS    5   4  40  ; "external_dependencies"
0050    TDUP     5  41
0051    TGETS    6   1  23  ; "MAGIC_PLATFORMS"
0052    TSETS    6   5  25  ; "platforms"
0053    TDUP     6  42
0054    TSETS    6   5  43  ; "url"
0055    TDUP     6  44
0056    TSETS    6   5  45  ; "md5"
0057    TDUP     6  46
0058    TSETS    6   5  47  ; "file"
0059    TDUP     6  48
0060    TSETS    6   5  49  ; "dir"
0061    TDUP     6  50
0062    TSETS    6   5  51  ; "tag"
0063    TDUP     6  52
0064    TSETS    6   5  53  ; "branch"
0065    TDUP     6  54
0066    TSETS    6   5  55  ; "module"
0067    TDUP     6  56
0068    TSETS    6   5  57  ; "cvs_tag"
0069    TDUP     6  58
0070    TSETS    6   5  59  ; "cvs_module"
0071    TSETS    5   4  60  ; "source"
0072    TDUP     5  61
0073    TGETS    6   1  23  ; "MAGIC_PLATFORMS"
0074    TSETS    6   5  25  ; "platforms"
0075    TDUP     6  62
0076    TSETS    6   5  63  ; "type"
0077    TDUP     6  65
0078    TDUP     7  64
0079    TSETS    7   6  66  ; "lua"
0080    TDUP     7  67
0081    TSETS    7   6  68  ; "lib"
0082    TDUP     7  69
0083    TSETS    7   6  70  ; "conf"
0084    TDUP     7  71
0085    TSETS    7   6  72  ; "bin"
0086    TSETS    6   5  73  ; "install"
0087    TDUP     6  75
0088    TDUP     7  74
0089    TSETS    7   6  27  ; "_any"
0090    TSETS    6   5  76  ; "copy_directories"
0091    TSETS    5   4  77  ; "build"
0092    TDUP     5  78
0093    TGETS    6   1  23  ; "MAGIC_PLATFORMS"
0094    TSETS    6   5  25  ; "platforms"
0095    TDUP     6  79
0096    TSETS    6   5  80  ; "post_install"
0097    TSETS    5   4  81  ; "hooks"
0098    TSETS    4   3  83  ; "1.0"
0099    TDUP     4  87
0100    TDUP     5  85
0101    TDUP     6  84
0102    TSETS    6   5  86  ; "wrap_bin_scripts"
0103    TSETS    5   4  88  ; "deploy"
0104    TSETS    4   3  89  ; "1.1"
0105    TDUP     4  96
0106    TDUP     5  92
0107    TDUP     6  91
0108    TDUP     7  90
0109    TSETS    7   6  27  ; "_any"
0110    TSETS    6   5  93  ; "labels"
0111    TDUP     6  94
0112    TSETS    6   5  95  ; "issues_url"
0113    TSETS    5   4  22  ; "description"
0114    TDUP     5  98
0115    TDUP     6  97
0116    TSETS    6   5  27  ; "_any"
0117    TSETS    5   4  28  ; "dependencies"
0118    TDUP     5  99
0119    TGETS    6   1  23  ; "MAGIC_PLATFORMS"
0120    TSETS    6   5  25  ; "platforms"
0121    TDUP     6 100
0122    TSETS    6   5  27  ; "_any"
0123    TSETS    5   4 101  ; "build_dependencies"
0124    TDUP     5 102
0125    TGETS    6   1  23  ; "MAGIC_PLATFORMS"
0126    TSETS    6   5  25  ; "platforms"
0127    TDUP     6 103
0128    TSETS    6   5  27  ; "_any"
0129    TSETS    5   4 104  ; "test_dependencies"
0130    TDUP     5 105
0131    TSETS    5   4  77  ; "build"
0132    TDUP     5 106
0133    TGETS    6   1  23  ; "MAGIC_PLATFORMS"
0134    TSETS    6   5  25  ; "platforms"
0135    TDUP     6 107
0136    TSETS    6   5  63  ; "type"
0137    TSETS    5   4 108  ; "test"
0138    TSETS    4   3   3  ; "3.0"
0139    CALL     2   3   2
0140    TDUP     4 110
0141    TDUP     5 111
0142    TDUP     6 112
0143    TSETB    6   5   2
0144    TSETB    5   4   4
0145    TDUP     5 113
0146    TDUP     6 114
0147    TSETB    6   5   2
0148    TSETB    5   4   5
0149    TDUP     5 115
0150    TDUP     6 116
0151    TSETB    6   5   2
0152    TSETB    5   4  10
0153    TDUP     5 117
0154    TDUP     6 118
0155    TSETB    6   5   2
0156    TSETB    5   4  12
0157    TSETS    4   0 109  ; "order"
0158    FNEW     4 119      ; rockspec.lua:146
0159    FNEW     5 121      ; rockspec.lua:168
0160    TSETS    5   0 120  ; "check"
0161    UCLO     0 => 0162
0162 => RET1     0   2

-----------------------
-- BYTECODE -- fetch.lua:13-38
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "^(.*)/([^/]+)$"
0004    CALL     1   3   3
0005    MOV      4   1
0006    TGETS    3   1   2  ; "gsub"
0007    KSTR     5   3      ; "[/:]"
0008    KSTR     6   4      ; "_"
0009    CALL     3   2   4
0010    UGET     4   0      ; dir
0011    TGETS    4   4   5  ; "path"
0012    UGET     5   1      ; cfg
0013    TGETS    5   5   6  ; "local_cache"
0014    MOV      6   3
0015    CALL     4   2   3
0016    UGET     5   2      ; fs
0017    TGETS    5   5   7  ; "make_dir"
0018    MOV      6   4
0019    CALL     5   2   2
0020    IST          5
0021    JMP      6 => 0047
0022    UGET     6   1      ; cfg
0023    UGET     7   2      ; fs
0024    TGETS    7   7   8  ; "make_temp_dir"
0025    KSTR     8   6      ; "local_cache"
0026    CALL     7   2   2
0027    TSETS    7   6   6  ; "local_cache"
0028    UGET     6   0      ; dir
0029    TGETS    6   6   5  ; "path"
0030    UGET     7   1      ; cfg
0031    TGETS    7   7   6  ; "local_cache"
0032    MOV      8   3
0033    CALL     6   2   3
0034    MOV      4   6
0035    UGET     6   2      ; fs
0036    TGETS    6   6   7  ; "make_dir"
0037    MOV      7   4
0038    CALL     6   2   2
0039    MOV      5   6
0040    IST          5
0041    JMP      6 => 0047
0042    KPRI     6   0
0043    KSTR     7   9      ; "Failed creating temporary cache director"~
0044    MOV      8   4
0045    CAT      7   7   8
0046    RET      6   3
0047 => UGET     6   0      ; dir
0048    TGETS    6   6   5  ; "path"
0049    MOV      7   4
0050    MOV      8   2
0051    CALL     6   2   3
0052    UGET     7   1      ; cfg
0053    TGETS    7   7  10  ; "aggressive_cache"
0054    ISF          7
0055    JMP      8 => 0077
0056    MOV      8   3
0057    TGETS    7   3   0  ; "match"
0058    KSTR     9  11      ; "^manifest"
0059    CALL     7   2   3
0060    IST          7
0061    JMP      7 => 0077
0062    UGET     7   2      ; fs
0063    TGETS    7   7  12  ; "exists"
0064    MOV      8   6
0065    CALL     7   2   2
0066    ISF          7
0067    JMP      8 => 0077
0068    GGET     7  13      ; "print"
0069    KSTR     8  14      ; "FAST TRACK!"
0070    UGET     9   1      ; cfg
0071    TGETS    9   9  10  ; "aggressive_cache"
0072    CALL     7   1   3
0073    MOV      7   6
0074    KNIL     8   9
0075    KPRI    10   2
0076    RET      7   5
0077 => UGET     7   3      ; fetch
0078    TGETS    7   7  15  ; "fetch_url"
0079    MOV      8   0
0080    MOV      9   6
0081    KPRI    10   2
0082    CALL     7   5   4
0083    IST          7
0084    JMP     11 => 0099
0085    KPRI    11   0
0086    KSTR    12  16      ; "Failed downloading "
0087    MOV     13   1
0088    ISF          8
0089    JMP     14 => 0095
0090    KSTR    14  17      ; " - "
0091    MOV     15   8
0092    CAT     14  14  15
0093    IST         14
0094    JMP     15 => 0096
0095 => KSTR    14  18      ; ""
0096 => CAT     12  12  14
0097    MOV     13   9
0098    RET     11   4
0099 => MOV     11   7
0100    KNIL    12  13
0101    MOV     14  10
0102    RET     11   5

-- BYTECODE -- fetch.lua:61-77
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   1
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    UGET     3   0      ; dir
0024    TGETS    3   3   3  ; "split_url"
0025    MOV      4   0
0026    CALL     3   3   2
0027    ISNES    3   4      ; "file"
0028    JMP      5 => 0034
0029    UGET     5   1      ; fs
0030    TGETS    5   5   5  ; "absolute_name"
0031    MOV      6   4
0032    CALLT    5   2
0033    JMP      5 => 0072
0034 => UGET     5   0      ; dir
0035    TGETS    5   5   6  ; "is_basic_protocol"
0036    MOV      6   3
0037    CALL     5   2   2
0038    ISF          5
0039    JMP      6 => 0067
0040    UGET     5   1      ; fs
0041    TGETS    5   5   7  ; "download"
0042    MOV      6   0
0043    MOV      7   1
0044    MOV      8   2
0045    CALL     5   4   4
0046    IST          5
0047    JMP      8 => 0062
0048    KPRI     8   0
0049    KSTR     9   8      ; "Failed downloading "
0050    MOV     10   0
0051    ISF          1
0052    JMP     11 => 0058
0053    KSTR    11   9      ; " - "
0054    MOV     12   1
0055    CAT     11  11  12
0056    IST         11
0057    JMP     12 => 0059
0058 => KSTR    11  10      ; ""
0059 => CAT      9   9  11
0060    KSTR    10  11      ; "network"
0061    RET      8   4
0062 => MOV      8   6
0063    KNIL     9  10
0064    MOV     11   7
0065    RET      8   5
0066    JMP      5 => 0072
0067 => KPRI     5   0
0068    KSTR     6  12      ; "Unsupported protocol "
0069    MOV      7   3
0070    CAT      6   6   7
0071    RET      5   3
0072 => RET0     0   1

-- BYTECODE -- fetch.lua:90-133
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISEQS    5   2      ; "string"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   2
0024    CALL     5   2   2
0025    ISEQS    5   2      ; "string"
0026    JMP      5 => 0031
0027    NOT      5   2
0028    JMP      6 => 0032
0029    KPRI     5   1
0030    JMP      6 => 0032
0031 => KPRI     5   2
0032 => CALL     4   1   2
0033    IST          2
0034    JMP      4 => 0040
0035    UGET     4   0      ; dir
0036    TGETS    4   4   3  ; "base_name"
0037    MOV      5   0
0038    CALL     4   2   2
0039    MOV      2   4
0040 => UGET     4   0      ; dir
0041    TGETS    4   4   4  ; "split_url"
0042    MOV      5   0
0043    CALL     4   3   2
0044    ISNES    4   5      ; "file"
0045    JMP      6 => 0068
0046    UGET     6   1      ; fs
0047    TGETS    6   6   6  ; "exists"
0048    MOV      7   5
0049    CALL     6   2   2
0050    ISF          6
0051    JMP      7 => 0062
0052    MOV      6   5
0053    UGET     7   0      ; dir
0054    TGETS    7   7   7  ; "dir_name"
0055    UGET     8   1      ; fs
0056    TGETS    8   8   8  ; "absolute_name"
0057    MOV      9   5
0058    CALL     8   0   2
0059    CALLM    7   0   0
0060    RETM     6   1
0061    JMP      6 => 0144
0062 => KPRI     6   0
0063    KSTR     7   9      ; "File not found: "
0064    MOV      8   5
0065    CAT      7   7   8
0066    RET      6   3
0067    JMP      6 => 0144
0068 => UGET     6   1      ; fs
0069    TGETS    6   6  10  ; "make_temp_dir"
0070    MOV      7   1
0071    CALL     6   3   2
0072    IST          6
0073    JMP      8 => 0081
0074    KPRI     8   0
0075    KSTR     9  11      ; "Failed creating temporary directory "
0076    MOV     10   1
0077    KSTR    11  12      ; ": "
0078    MOV     12   7
0079    CAT      9   9  12
0080    RET      8   3
0081 => UGET     8   2      ; util
0082    TGETS    8   8  13  ; "schedule_function"
0083    UGET     9   1      ; fs
0084    TGETS    9   9  14  ; "delete"
0085    MOV     10   6
0086    CALL     8   1   3
0087    UGET     8   1      ; fs
0088    TGETS    8   8  15  ; "change_dir"
0089    MOV      9   6
0090    CALL     8   3   2
0091    IST          8
0092    JMP     10 => 0096
0093    KPRI    10   0
0094    MOV     11   9
0095    RET     10   3
0096 => KNIL    10  12
0097    ISF          3
0098    JMP     13 => 0121
0099    KPRI    13   0
0100    UGET    14   3      ; fetch
0101    TGETS   14  14  16  ; "fetch_caching"
0102    MOV     15   0
0103    CALL    14   4   2
0104    MOV     12  16
0105    MOV     11  15
0106    MOV     13  14
0107    ISF         13
0108    JMP     14 => 0130
0109    UGET    14   0      ; dir
0110    TGETS   14  14  17  ; "path"
0111    MOV     15   6
0112    MOV     16   2
0113    CALL    14   2   3
0114    MOV     10  14
0115    UGET    14   1      ; fs
0116    TGETS   14  14  18  ; "copy"
0117    MOV     15  13
0118    MOV     16  10
0119    CALL    14   1   3
0120    JMP     13 => 0130
0121 => UGET    13   3      ; fetch
0122    TGETS   13  13  19  ; "fetch_url"
0123    MOV     14   0
0124    MOV     15   2
0125    MOV     16   3
0126    CALL    13   4   4
0127    MOV     12  15
0128    MOV     11  14
0129    MOV     10  13
0130 => UGET    13   1      ; fs
0131    TGETS   13  13  20  ; "pop_dir"
0132    CALL    13   1   1
0133    IST         10
0134    JMP     13 => 0141
0135    KPRI    13   0
0136    KSTR    14  21      ; "Error fetching file: "
0137    MOV     15  11
0138    CAT     14  14  15
0139    MOV     15  12
0140    RET     13   4
0141 => MOV     13  10
0142    MOV     14   6
0143    RET     13   3
0144 => RET0     0   1

-- BYTECODE -- fetch.lua:147-171
0001    UGET     4   0      ; fs
0002    TGETS    4   4   0  ; "change_dir"
0003    MOV      5   1
0004    CALL     4   3   2
0005    IST          4
0006    JMP      6 => 0010
0007    KPRI     6   0
0008    MOV      7   5
0009    RET      6   3
0010 => UGET     6   0      ; fs
0011    TGETS    6   6   1  ; "unpack_archive"
0012    MOV      7   0
0013    CALL     6   1   2
0014    ISTC     6   3
0015    JMP      6 => 0020
0016    UGET     6   1      ; dir
0017    TGETS    6   6   2  ; "deduce_base_dir"
0018    MOV      7   2
0019    CALL     6   2   2
0020 => KPRI     7   0
0021    UGET     8   0      ; fs
0022    TGETS    8   8   3  ; "exists"
0023    MOV      9   6
0024    CALL     8   2   2
0025    ISF          8
0026    JMP      9 => 0029
0027    MOV      7   6
0028    JMP      8 => 0065
0029 => UGET     8   2      ; util
0030    TGETS    8   8   4  ; "printerr"
0031    KSTR     9   5      ; "Directory "
0032    MOV     10   6
0033    KSTR    11   6      ; " not found"
0034    CAT      9   9  11
0035    CALL     8   1   2
0036    UGET     8   0      ; fs
0037    TGETS    8   8   7  ; "list_dir"
0038    CALL     8   2   1
0039    ISF          8
0040    JMP      9 => 0065
0041    GGET     9   8      ; "table"
0042    TGETS    9   9   9  ; "sort"
0043    MOV     10   8
0044    CALL     9   1   2
0045    GGET     9  10      ; "ipairs"
0046    MOV     10   8
0047    CALL     9   4   2
0048    JMP     12 => 0063
0049 => UGET    14   0      ; fs
0050    TGETS   14  14  11  ; "is_dir"
0051    MOV     15  13
0052    CALL    14   2   2
0053    ISF         14
0054    JMP     15 => 0063
0055    UGET    14   2      ; util
0056    TGETS   14  14   4  ; "printerr"
0057    KSTR    15  12      ; "Found "
0058    MOV     16  13
0059    CAT     15  15  16
0060    CALL    14   1   2
0061    MOV      7  13
0062    JMP      9 => 0065
0063 => ITERC   12   3   3
0064    ITERL   12 => 0049
0065 => UGET     8   0      ; fs
0066    TGETS    8   8  13  ; "pop_dir"
0067    CALL     8   1   1
0068    MOV      8   6
0069    MOV      9   7
0070    RET      8   3

-- BYTECODE -- fetch.lua:173-186
0001    UGET     3   0      ; signing
0002    TGETS    3   3   0  ; "signature_url"
0003    MOV      4   0
0004    CALL     3   2   2
0005    UGET     4   1      ; fetch
0006    TGETS    4   4   1  ; "fetch_url_at_temp_dir"
0007    MOV      5   3
0008    MOV      6   2
0009    CALL     4   4   3
0010    IST          4
0011    JMP      7 => 0018
0012    KPRI     7   0
0013    KSTR     8   2      ; "Could not fetch signature file for verif"~
0014    MOV      9   5
0015    CAT      8   8   9
0016    MOV      9   6
0017    RET      7   4
0018 => UGET     7   0      ; signing
0019    TGETS    7   7   3  ; "verify_signature"
0020    MOV      8   1
0021    MOV      9   4
0022    CALL     7   3   3
0023    IST          7
0024    JMP      9 => 0030
0025    KPRI     9   0
0026    KSTR    10   4      ; "Failed signature verification: "
0027    MOV     11   8
0028    CAT     10  10  11
0029    RET      9   3
0030 => UGET     9   2      ; fs
0031    TGETS    9   9   5  ; "absolute_name"
0032    MOV     10   4
0033    CALLT    9   2

-- BYTECODE -- fetch.lua:197-249
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   1
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    UGET     3   0      ; dir
0024    TGETS    3   3   3  ; "base_name"
0025    MOV      4   0
0026    CALL     3   2   2
0027    MOV      4   3
0028    TGETS    3   3   4  ; "match"
0029    KSTR     5   5      ; "(.*)%.[^.]*%.rock"
0030    CALL     3   2   3
0031    KSTR     4   6      ; "luarocks-rock-"
0032    MOV      5   3
0033    CAT      4   4   5
0034    UGET     5   1      ; fetch
0035    TGETS    5   5   7  ; "fetch_url_at_temp_dir"
0036    MOV      6   0
0037    MOV      7   4
0038    KPRI     8   0
0039    KPRI     9   2
0040    CALL     5   4   5
0041    IST          5
0042    JMP      8 => 0049
0043    KPRI     8   0
0044    KSTR     9   8      ; "Could not fetch rock file: "
0045    MOV     10   6
0046    CAT      9   9  10
0047    MOV     10   7
0048    RET      8   4
0049 => KPRI     8   0
0050    ISF          2
0051    JMP      9 => 0064
0052    UGET     9   2      ; fetch_and_verify_signature_for
0053    MOV     10   0
0054    MOV     11   5
0055    MOV     12   4
0056    CALL     9   3   4
0057    MOV      6  10
0058    MOV      8   9
0059    ISF          6
0060    JMP      9 => 0064
0061    KPRI     9   0
0062    MOV     10   6
0063    RET      9   3
0064 => UGET     9   3      ; fs
0065    TGETS    9   9   9  ; "absolute_name"
0066    MOV     10   5
0067    CALL     9   2   2
0068    MOV      5   9
0069    KPRI     9   0
0070    ISF          1
0071    JMP     10 => 0085
0072    MOV      9   1
0073    UGET    10   3      ; fs
0074    TGETS   10  10  10  ; "make_dir"
0075    MOV     11   9
0076    CALL    10   3   2
0077    IST         10
0078    JMP     12 => 0098
0079    KPRI    12   0
0080    KSTR    13  11      ; "Failed unpacking rock file: "
0081    MOV     14  11
0082    CAT     13  13  14
0083    RET     12   3
0084    JMP     10 => 0098
0085 => UGET    10   3      ; fs
0086    TGETS   10  10  12  ; "make_temp_dir"
0087    MOV     11   3
0088    CALL    10   3   2
0089    MOV      6  11
0090    MOV      9  10
0091    IST          9
0092    JMP     10 => 0098
0093    KPRI    10   0
0094    KSTR    11  13      ; "Failed creating temporary dir: "
0095    MOV     12   6
0096    CAT     11  11  12
0097    RET     10   3
0098 => IST          1
0099    JMP     10 => 0106
0100    UGET    10   4      ; util
0101    TGETS   10  10  14  ; "schedule_function"
0102    UGET    11   3      ; fs
0103    TGETS   11  11  15  ; "delete"
0104    MOV     12   9
0105    CALL    10   1   3
0106 => UGET    10   3      ; fs
0107    TGETS   10  10  16  ; "change_dir"
0108    MOV     11   9
0109    CALL    10   3   2
0110    IST         10
0111    JMP     12 => 0115
0112    KPRI    12   0
0113    MOV     13  11
0114    RET     12   3
0115 => UGET    12   3      ; fs
0116    TGETS   12  12  17  ; "unzip"
0117    MOV     13   5
0118    CALL    12   3   2
0119    MOV     11  13
0120    MOV     10  12
0121    IST         10
0122    JMP     12 => 0130
0123    KPRI    12   0
0124    KSTR    13  11      ; "Failed unpacking rock file: "
0125    MOV     14   5
0126    KSTR    15  18      ; ": "
0127    MOV     16  11
0128    CAT     13  13  16
0129    RET     12   3
0130 => ISF          8
0131    JMP     12 => 0144
0132    UGET    12   3      ; fs
0133    TGETS   12  12  19  ; "copy"
0134    MOV     13   8
0135    KSTR    14  20      ; "."
0136    CALL    12   3   3
0137    MOV     11  13
0138    MOV     10  12
0139    IST         10
0140    JMP     12 => 0144
0141    KPRI    12   0
0142    KSTR    13  21      ; "Failed copying signature file"
0143    RET     12   3
0144 => UGET    12   3      ; fs
0145    TGETS   12  12  22  ; "pop_dir"
0146    CALL    12   1   1
0147    RET1     9   2

-- BYTECODE -- fetch.lua:258-285
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    UGET     2   0      ; fs
0012    TGETS    2   2   3  ; "absolute_name"
0013    MOV      3   0
0014    CALL     2   2   2
0015    UGET     3   1      ; dir
0016    TGETS    3   3   4  ; "base_name"
0017    MOV      4   2
0018    CALL     3   2   2
0019    ISEQS    3   5      ; "rockspec"
0020    JMP      4 => 0030
0021    MOV      5   3
0022    TGETS    4   3   6  ; "match"
0023    KSTR     6   7      ; "(.*)%-[^-]*%-[0-9]*"
0024    CALL     4   2   3
0025    IST          4
0026    JMP      4 => 0030
0027    KPRI     4   0
0028    KSTR     5   8      ; "Expected filename in format 'name-versio"~
0029    RET      4   3
0030 => UGET     4   2      ; persist
0031    TGETS    4   4   9  ; "load_into_table"
0032    MOV      5   2
0033    CALL     4   3   2
0034    IST          4
0035    JMP      6 => 0044
0036    KPRI     6   0
0037    KSTR     7  10      ; "Could not load rockspec file "
0038    MOV      8   2
0039    KSTR     9  11      ; " ("
0040    MOV     10   5
0041    KSTR    11  12      ; ")"
0042    CAT      7   7  11
0043    RET      6   3
0044 => UGET     6   3      ; rockspecs
0045    TGETS    6   6  13  ; "from_persisted_table"
0046    MOV      7   2
0047    MOV      8   4
0048    MOV      9   5
0049    MOV     10   1
0050    CALL     6   3   5
0051    IST          6
0052    JMP      8 => 0059
0053    KPRI     8   0
0054    MOV      9   2
0055    KSTR    10  14      ; ": "
0056    MOV     11   7
0057    CAT      9   9  11
0058    RET      8   3
0059 => TGETS    8   6  15  ; "package"
0060    MOV      9   8
0061    TGETS    8   8  16  ; "lower"
0062    CALL     8   2   2
0063    KSTR     9  17      ; "-"
0064    TGETS   10   6  18  ; "version"
0065    CAT      8   8  10
0066    ISEQS    3   5      ; "rockspec"
0067    JMP      9 => 0081
0068    MOV      9   8
0069    KSTR    10  19      ; ".rockspec"
0070    CAT      9   9  10
0071    ISEQV    3   9
0072    JMP      9 => 0081
0073    KPRI     9   0
0074    KSTR    10  20      ; "Inconsistency between rockspec filename "~
0075    MOV     11   3
0076    KSTR    12  21      ; ") and its contents ("
0077    MOV     13   8
0078    KSTR    14  22      ; ".rockspec)."
0079    CAT     10  10  14
0080    RET      9   3
0081 => RET1     6   2

-- BYTECODE -- fetch.lua:297-333
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    KPRI     3   0
0012    UGET     4   0      ; dir
0013    TGETS    4   4   3  ; "base_name"
0014    MOV      5   0
0015    CALL     4   2   2
0016    ISNES    4   4      ; "rockspec"
0017    JMP      5 => 0020
0018    KSTR     3   4      ; "rockspec"
0019    JMP      5 => 0033
0020 => MOV      6   4
0021    TGETS    5   4   5  ; "match"
0022    KSTR     7   6      ; "(.*)%.rockspec"
0023    CALL     5   2   3
0024    MOV      3   5
0025    IST          3
0026    JMP      5 => 0033
0027    KPRI     5   0
0028    KSTR     6   7      ; "Filename '"
0029    MOV      7   0
0030    KSTR     8   8      ; "' does not look like a rockspec."
0031    CAT      6   6   8
0032    RET      5   3
0033 => KSTR     5   9      ; "luarocks-rockspec-"
0034    MOV      6   3
0035    CAT      5   5   6
0036    KNIL     6   8
0037    ISF          1
0038    JMP      9 => 0058
0039    UGET     9   1      ; fs
0040    TGETS    9   9  10  ; "change_dir"
0041    MOV     10   1
0042    CALL     9   3   2
0043    IST          9
0044    JMP     11 => 0048
0045    KPRI    11   0
0046    MOV     12  10
0047    RET     11   3
0048 => UGET    11   2      ; fetch
0049    TGETS   11  11  11  ; "fetch_url"
0050    MOV     12   0
0051    CALL    11   3   2
0052    MOV     10  12
0053    MOV      6  11
0054    UGET    11   1      ; fs
0055    TGETS   11  11  12  ; "pop_dir"
0056    CALL    11   1   1
0057    JMP      9 => 0068
0058 => UGET     9   2      ; fetch
0059    TGETS    9   9  13  ; "fetch_url_at_temp_dir"
0060    MOV     10   0
0061    MOV     11   5
0062    KPRI    12   0
0063    KPRI    13   2
0064    CALL     9   4   5
0065    MOV      8  11
0066    MOV      7  10
0067    MOV      6   9
0068 => IST          6
0069    JMP      9 => 0074
0070    KPRI     9   0
0071    MOV     10   7
0072    MOV     11   8
0073    RET      9   4
0074 => ISF          2
0075    JMP      9 => 0086
0076    UGET     9   3      ; fetch_and_verify_signature_for
0077    MOV     10   0
0078    MOV     11   6
0079    MOV     12   5
0080    CALL     9   3   4
0081    ISF         10
0082    JMP     11 => 0086
0083    KPRI    11   0
0084    MOV     12  10
0085    RET     11   3
0086 => UGET     9   2      ; fetch
0087    TGETS    9   9  14  ; "load_local_rockspec"
0088    MOV     10   6
0089    CALLT    9   2

-- BYTECODE -- fetch.lua:344-403
0001    GGET     3   0      ; "assert"
0002    MOV      5   0
0003    TGETS    4   0   1  ; "type"
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "rockspec"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "boolean"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    GGET     3   0      ; "assert"
0022    GGET     4   1      ; "type"
0023    MOV      5   2
0024    CALL     4   2   2
0025    ISEQS    4   4      ; "string"
0026    JMP      4 => 0031
0027    NOT      4   2
0028    JMP      5 => 0032
0029    KPRI     4   1
0030    JMP      5 => 0032
0031 => KPRI     4   2
0032 => CALL     3   1   2
0033    TGETS    3   0   5  ; "source"
0034    TGETS    3   3   6  ; "url"
0035    TGETS    4   0   7  ; "name"
0036    KSTR     5   8      ; "-"
0037    TGETS    6   0   9  ; "version"
0038    CAT      4   4   6
0039    TGETS    5   0   5  ; "source"
0040    TGETS    5   5  10  ; "file"
0041    KNIL     6  10
0042    ISF          2
0043    JMP     11 => 0069
0044    UGET    11   0      ; fs
0045    TGETS   11  11  11  ; "change_dir"
0046    MOV     12   2
0047    CALL    11   3   2
0048    MOV      9  12
0049    MOV      8  11
0050    IST          8
0051    JMP     11 => 0056
0052    KPRI    11   0
0053    MOV     12   9
0054    KSTR    13  12      ; "dest_dir"
0055    RET     11   4
0056 => UGET    11   1      ; fetch
0057    TGETS   11  11  13  ; "fetch_url"
0058    MOV     12   3
0059    MOV     13   5
0060    CALL    11   4   3
0061    MOV     10  13
0062    MOV      9  12
0063    MOV      6  11
0064    UGET    11   0      ; fs
0065    TGETS   11  11  14  ; "pop_dir"
0066    CALL    11   1   1
0067    MOV      7   2
0068    JMP     11 => 0080
0069 => UGET    11   1      ; fetch
0070    TGETS   11  11  15  ; "fetch_url_at_temp_dir"
0071    MOV     12   3
0072    KSTR    13  16      ; "luarocks-source-"
0073    MOV     14   4
0074    CAT     13  13  14
0075    MOV     14   5
0076    CALL    11   4   4
0077    MOV     10  13
0078    MOV      7  12
0079    MOV      6  11
0080 => IST          6
0081    JMP     11 => 0088
0082    KPRI    11   0
0083    ISTC    12   9
0084    JMP     12 => 0086
0085    MOV     12   7
0086 => MOV     13  10
0087    RET     11   4
0088 => TGETS   11   0   5  ; "source"
0089    TGETS   11  11  17  ; "md5"
0090    ISF         11
0091    JMP     12 => 0107
0092    UGET    11   0      ; fs
0093    TGETS   11  11  18  ; "check_md5"
0094    MOV     12   6
0095    TGETS   13   0   5  ; "source"
0096    TGETS   13  13  17  ; "md5"
0097    CALL    11   2   3
0098    IST         11
0099    JMP     11 => 0107
0100    KPRI    11   0
0101    KSTR    12  19      ; "MD5 check for "
0102    MOV     13   5
0103    KSTR    14  20      ; " has failed."
0104    CAT     12  12  14
0105    KSTR    13  17      ; "md5"
0106    RET     11   4
0107 => ISF          1
0108    JMP     11 => 0185
0109    UGET    11   0      ; fs
0110    TGETS   11  11  11  ; "change_dir"
0111    MOV     12   7
0112    CALL    11   3   2
0113    IST         11
0114    JMP     13 => 0118
0115    KPRI    13   0
0116    MOV     14  12
0117    RET     13   3
0118 => UGET    13   0      ; fs
0119    TGETS   13  13  21  ; "unpack_archive"
0120    TGETS   14   0   5  ; "source"
0121    TGETS   14  14  10  ; "file"
0122    CALL    13   3   2
0123    MOV     12  14
0124    MOV     11  13
0125    IST         11
0126    JMP     13 => 0130
0127    KPRI    13   0
0128    MOV     14  12
0129    RET     13   3
0130 => UGET    13   0      ; fs
0131    TGETS   13  13  22  ; "exists"
0132    TGETS   14   0   5  ; "source"
0133    TGETS   14  14  23  ; "dir"
0134    CALL    13   2   2
0135    IST         13
0136    JMP     13 => 0182
0137    KSHORT  13   0
0138    KPRI    14   0
0139    TGETS   15   0   5  ; "source"
0140    TGETS   15  15  24  ; "dir_set"
0141    IST         15
0142    JMP     15 => 0163
0143    MOV     16   0
0144    TGETS   15   0  25  ; "format_is_at_least"
0145    KSTR    17  26      ; "3.0"
0146    CALL    15   2   3
0147    ISF         15
0148    JMP     16 => 0163
0149    UGET    15   0      ; fs
0150    TGETS   15  15  23  ; "dir"
0151    CALL    15   4   1
0152    JMP     18 => 0161
0153 => ADDVN   13  13   0  ; 1
0154    UGET    19   0      ; fs
0155    TGETS   19  19  27  ; "is_dir"
0156    MOV     20  18
0157    CALL    19   2   2
0158    ISF         19
0159    JMP     20 => 0161
0160    MOV     14  18
0161 => ITERC   18   2   3
0162    ITERL   18 => 0153
0163 => ISNEN   13   0      ; 1
0164    JMP     15 => 0170
0165    ISF         14
0166    JMP     15 => 0170
0167    TGETS   15   0   5  ; "source"
0168    TSETS   14  15  23  ; "dir"
0169    JMP     15 => 0182
0170 => KPRI    15   0
0171    KSTR    16  28      ; "Directory "
0172    TGETS   17   0   5  ; "source"
0173    TGETS   17  17  23  ; "dir"
0174    KSTR    18  29      ; " not found inside archive "
0175    TGETS   19   0   5  ; "source"
0176    TGETS   19  19  10  ; "file"
0177    CAT     16  16  19
0178    KSTR    17  30      ; "source.dir"
0179    MOV     18   6
0180    MOV     19   7
0181    RET     15   6
0182 => UGET    13   0      ; fs
0183    TGETS   13  13  14  ; "pop_dir"
0184    CALL    13   1   1
0185 => MOV     11   6
0186    MOV     12   7
0187    RET     11   3

-- BYTECODE -- fetch.lua:414-440
0001    GGET     3   0      ; "assert"
0002    MOV      5   0
0003    TGETS    4   0   1  ; "type"
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "rockspec"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "boolean"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    GGET     3   0      ; "assert"
0022    GGET     4   1      ; "type"
0023    MOV      5   2
0024    CALL     4   2   2
0025    ISEQS    4   4      ; "string"
0026    JMP      4 => 0031
0027    NOT      4   2
0028    JMP      5 => 0032
0029    KPRI     4   1
0030    JMP      5 => 0032
0031 => KPRI     4   2
0032 => CALL     3   1   2
0033    TGETS    3   0   5  ; "source"
0034    TGETS    3   3   6  ; "protocol"
0035    KNIL     4   5
0036    UGET     6   0      ; dir
0037    TGETS    6   6   7  ; "is_basic_protocol"
0038    MOV      7   3
0039    CALL     6   2   2
0040    ISF          6
0041    JMP      7 => 0044
0042    UGET     5   1      ; fetch
0043    JMP      6 => 0063
0044 => GGET     6   8      ; "pcall"
0045    GGET     7   9      ; "require"
0046    KSTR     8  10      ; "luarocks.fetch."
0047    MOV     10   3
0048    TGETS    9   3  11  ; "gsub"
0049    KSTR    11  12      ; "[+-]"
0050    KSTR    12  13      ; "_"
0051    CALL     9   2   4
0052    CAT      8   8   9
0053    CALL     6   3   3
0054    MOV      5   7
0055    MOV      4   6
0056    IST          4
0057    JMP      6 => 0063
0058    KPRI     6   0
0059    KSTR     7  14      ; "Unknown protocol "
0060    MOV      8   3
0061    CAT      7   7   8
0062    RET      6   3
0063 => UGET     6   2      ; cfg
0064    TGETS    6   6  15  ; "only_sources_from"
0065    ISF          6
0066    JMP      7 => 0110
0067    TGETS    6   0   5  ; "source"
0068    TGETS    6   6  16  ; "pathname"
0069    ISF          6
0070    JMP      7 => 0110
0071    TGETS    6   0   5  ; "source"
0072    TGETS    6   6  16  ; "pathname"
0073    LEN      6   6
0074    KSHORT   7   0
0075    ISGE     7   6
0076    JMP      6 => 0110
0077    UGET     6   2      ; cfg
0078    TGETS    6   6  15  ; "only_sources_from"
0079    LEN      6   6
0080    ISNEN    6   0      ; 0
0081    JMP      6 => 0090
0082    KPRI     6   0
0083    KSTR     7  17      ; "Can't download "
0084    TGETS    8   0   5  ; "source"
0085    TGETS    8   8  18  ; "url"
0086    KSTR     9  19      ; " -- download from remote servers disable"~
0087    CAT      7   7   9
0088    RET      6   3
0089    JMP      6 => 0110
0090 => TGETS    6   0   5  ; "source"
0091    TGETS    6   6  16  ; "pathname"
0092    MOV      7   6
0093    TGETS    6   6  20  ; "find"
0094    UGET     8   2      ; cfg
0095    TGETS    8   8  15  ; "only_sources_from"
0096    KSHORT   9   1
0097    KPRI    10   2
0098    CALL     6   2   5
0099    ISEQN    6   1      ; 1
0100    JMP      6 => 0110
0101    KPRI     6   0
0102    KSTR     7  17      ; "Can't download "
0103    TGETS    8   0   5  ; "source"
0104    TGETS    8   8  18  ; "url"
0105    KSTR     9  21      ; " -- only downloading from "
0106    UGET    10   2      ; cfg
0107    TGETS   10  10  15  ; "only_sources_from"
0108    CAT      7   7  10
0109    RET      6   3
0110 => TGETS    6   5  22  ; "get_sources"
0111    MOV      7   0
0112    MOV      8   1
0113    MOV      9   2
0114    CALLT    6   4

-- BYTECODE -- fetch.lua:0-443
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.rockspecs"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.signing"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.persist"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.util"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.core.cfg"
0022    CALL     7   2   2
0023    FNEW     8   9      ; fetch.lua:13
0024    TSETS    8   0   8  ; "fetch_caching"
0025    FNEW     8  11      ; fetch.lua:61
0026    TSETS    8   0  10  ; "fetch_url"
0027    FNEW     8  13      ; fetch.lua:90
0028    TSETS    8   0  12  ; "fetch_url_at_temp_dir"
0029    FNEW     8  15      ; fetch.lua:147
0030    TSETS    8   0  14  ; "find_base_dir"
0031    FNEW     8  16      ; fetch.lua:173
0032    FNEW     9  18      ; fetch.lua:197
0033    TSETS    9   0  17  ; "fetch_and_unpack_rock"
0034    FNEW     9  20      ; fetch.lua:258
0035    TSETS    9   0  19  ; "load_local_rockspec"
0036    FNEW     9  22      ; fetch.lua:297
0037    TSETS    9   0  21  ; "load_rockspec"
0038    FNEW     9  24      ; fetch.lua:344
0039    TSETS    9   0  23  ; "get_sources"
0040    FNEW     9  26      ; fetch.lua:414
0041    TSETS    9   0  25  ; "fetch_sources"
0042    UCLO     0 => 0043
0043 => RET1     0   2

-----------------------
-- BYTECODE -- cmd.lua:31-42
0001    GGET     0   0      ; "pcall"
0002    GGET     1   1      ; "io"
0003    TGETS    1   1   2  ; "popen"
0004    KSTR     2   3      ; ""
0005    CALL     0   3   3
0006    ISF          0
0007    JMP      2 => 0014
0008    ISF          1
0009    JMP      2 => 0032
0010    MOV      3   1
0011    TGETS    2   1   4  ; "close"
0012    CALL     2   1   2
0013    JMP      2 => 0032
0014 => GGET     2   1      ; "io"
0015    TGETS    2   2   5  ; "stderr"
0016    MOV      3   2
0017    TGETS    2   2   6  ; "write"
0018    KSTR     4   7      ; "Your version of Lua does not support io."~
0019    CALL     2   1   3
0020    GGET     2   1      ; "io"
0021    TGETS    2   2   5  ; "stderr"
0022    MOV      3   2
0023    TGETS    2   2   6  ; "write"
0024    KSTR     4   8      ; "which is required by LuaRocks. Please ch"~
0025    CALL     2   1   3
0026    GGET     2   9      ; "os"
0027    TGETS    2   2  10  ; "exit"
0028    UGET     3   0      ; cmd
0029    TGETS    3   3  11  ; "errorcodes"
0030    TGETS    3   3  12  ; "UNSPECIFIED"
0031    CALL     2   1   2
0032 => RET0     0   1

-- BYTECODE -- cmd.lua:46-50
0001    UGET     3   0      ; dir
0002    TGETS    3   3   0  ; "normalize"
0003    MOV      4   1
0004    CALL     3   2   2
0005    MOV      1   3
0006    TSETS    1   0   1  ; "tree"
0007    UGET     3   1      ; path
0008    TGETS    3   3   2  ; "use_tree"
0009    ISTC     4   2
0010    JMP      4 => 0012
0011    MOV      4   1
0012 => CALL     3   1   2
0013    RET0     0   1

-- BYTECODE -- cmd.lua:52-62
0001    GGET     0   0      ; "type"
0002    UGET     1   0      ; cfg
0003    TGETS    1   1   1  ; "root_dir"
0004    CALL     0   2   2
0005    ISNES    0   2      ; "string"
0006    JMP      0 => 0017
0007    UGET     0   0      ; cfg
0008    UGET     1   0      ; cfg
0009    TGETS    1   1   1  ; "root_dir"
0010    MOV      2   1
0011    TGETS    1   1   3  ; "gsub"
0012    KSTR     3   4      ; "/+$"
0013    KSTR     4   5      ; ""
0014    CALL     1   2   4
0015    TSETS    1   0   1  ; "root_dir"
0016    JMP      0 => 0028
0017 => UGET     0   0      ; cfg
0018    TGETS    0   0   1  ; "root_dir"
0019    UGET     1   0      ; cfg
0020    TGETS    1   1   1  ; "root_dir"
0021    TGETS    1   1   6  ; "root"
0022    MOV      2   1
0023    TGETS    1   1   3  ; "gsub"
0024    KSTR     3   4      ; "/+$"
0025    KSTR     4   5      ; ""
0026    CALL     1   2   4
0027    TSETS    1   0   6  ; "root"
0028 => UGET     0   0      ; cfg
0029    UGET     1   0      ; cfg
0030    TGETS    1   1   7  ; "rocks_dir"
0031    MOV      2   1
0032    TGETS    1   1   3  ; "gsub"
0033    KSTR     3   4      ; "/+$"
0034    KSTR     4   5      ; ""
0035    CALL     1   2   4
0036    TSETS    1   0   7  ; "rocks_dir"
0037    UGET     0   0      ; cfg
0038    UGET     1   0      ; cfg
0039    TGETS    1   1   8  ; "deploy_bin_dir"
0040    MOV      2   1
0041    TGETS    1   1   3  ; "gsub"
0042    KSTR     3   4      ; "/+$"
0043    KSTR     4   5      ; ""
0044    CALL     1   2   4
0045    TSETS    1   0   8  ; "deploy_bin_dir"
0046    UGET     0   0      ; cfg
0047    UGET     1   0      ; cfg
0048    TGETS    1   1   9  ; "deploy_lua_dir"
0049    MOV      2   1
0050    TGETS    1   1   3  ; "gsub"
0051    KSTR     3   4      ; "/+$"
0052    KSTR     4   5      ; ""
0053    CALL     1   2   4
0054    TSETS    1   0   9  ; "deploy_lua_dir"
0055    UGET     0   0      ; cfg
0056    UGET     1   0      ; cfg
0057    TGETS    1   1  10  ; "deploy_lib_dir"
0058    MOV      2   1
0059    TGETS    1   1   3  ; "gsub"
0060    KSTR     3   4      ; "/+$"
0061    KSTR     4   5      ; ""
0062    CALL     1   2   4
0063    TSETS    1   0  10  ; "deploy_lib_dir"
0064    RET0     0   1

-- BYTECODE -- cmd.lua:64-119
0001    TGETS    2   0   0  ; "global"
0002    ISF          2
0003    JMP      3 => 0007
0004    UGET     2   0      ; cfg
0005    KPRI     3   1
0006    TSETS    3   2   1  ; "local_by_default"
0007 => TGETS    2   0   2  ; "tree"
0008    ISF          2
0009    JMP      3 => 0054
0010    KPRI     2   1
0011    GGET     3   3      ; "ipairs"
0012    UGET     4   0      ; cfg
0013    TGETS    4   4   4  ; "rocks_trees"
0014    CALL     3   4   2
0015    JMP      6 => 0041
0016 => GGET     8   5      ; "type"
0017    MOV      9   7
0018    CALL     8   2   2
0019    ISNES    8   6      ; "table"
0020    JMP      8 => 0041
0021    TGETS    8   0   2  ; "tree"
0022    TGETS    9   7   7  ; "name"
0023    ISNEV    8   9
0024    JMP      8 => 0041
0025    TGETS    8   7   8  ; "root"
0026    IST          8
0027    JMP      8 => 0034
0028    KPRI     8   0
0029    KSTR     9   9      ; "Configuration error: tree '"
0030    TGETS   10   7   7  ; "name"
0031    KSTR    11  10      ; "' has no 'root' field."
0032    CAT      9   9  11
0033    RET      8   3
0034 => UGET     8   1      ; replace_tree
0035    MOV      9   0
0036    TGETS   10   7   8  ; "root"
0037    MOV     11   7
0038    CALL     8   1   4
0039    KPRI     2   2
0040    JMP      3 => 0043
0041 => ITERC    6   3   3
0042    ITERL    6 => 0016
0043 => IST          2
0044    JMP      3 => 0136
0045    UGET     3   2      ; fs
0046    TGETS    3   3  11  ; "absolute_name"
0047    TGETS    4   0   2  ; "tree"
0048    CALL     3   2   2
0049    UGET     4   1      ; replace_tree
0050    MOV      5   0
0051    MOV      6   3
0052    CALL     4   1   3
0053    JMP      2 => 0136
0054 => TGETS    2   0  12  ; "local"
0055    ISF          2
0056    JMP      3 => 0074
0057    UGET     2   0      ; cfg
0058    TGETS    2   2  13  ; "home_tree"
0059    IST          2
0060    JMP      2 => 0068
0061    KPRI     2   0
0062    KSTR     3  14      ; "The --local flag is meant for operating "~
0063    KSTR     4  15      ; "You are running as a superuser, which is"~
0064    KSTR     5  16      ; "To force using the superuser's home, use"~
0065    CAT      3   3   5
0066    RET      2   3
0067    JMP      2 => 0136
0068 => UGET     2   1      ; replace_tree
0069    MOV      3   0
0070    UGET     4   0      ; cfg
0071    TGETS    4   4  13  ; "home_tree"
0072    CALL     2   1   3
0073    JMP      2 => 0136
0074 => TGETS    2   0  17  ; "project_tree"
0075    ISF          2
0076    JMP      3 => 0094
0077    TGETS    2   0  17  ; "project_tree"
0078    GGET     3   6      ; "table"
0079    TGETS    3   3  18  ; "insert"
0080    UGET     4   0      ; cfg
0081    TGETS    4   4   4  ; "rocks_trees"
0082    KSHORT   5   1
0083    TDUP     6  19
0084    TSETS    2   6   8  ; "root"
0085    CALL     3   1   4
0086    UGET     3   3      ; manif
0087    TGETS    3   3  20  ; "load_rocks_tree_manifests"
0088    CALL     3   1   1
0089    UGET     3   4      ; path
0090    TGETS    3   3  21  ; "use_tree"
0091    MOV      4   2
0092    CALL     3   1   2
0093    JMP      2 => 0136
0094 => UGET     2   0      ; cfg
0095    TGETS    2   2   1  ; "local_by_default"
0096    ISF          2
0097    JMP      3 => 0108
0098    UGET     2   0      ; cfg
0099    TGETS    2   2  13  ; "home_tree"
0100    ISF          2
0101    JMP      3 => 0136
0102    UGET     2   1      ; replace_tree
0103    MOV      3   0
0104    UGET     4   0      ; cfg
0105    TGETS    4   4  13  ; "home_tree"
0106    CALL     2   1   3
0107    JMP      2 => 0136
0108 => ISF          1
0109    JMP      2 => 0129
0110    MOV      2   1
0111    KSTR     3  22      ; "/lua_modules"
0112    CAT      2   2   3
0113    GGET     3   6      ; "table"
0114    TGETS    3   3  18  ; "insert"
0115    UGET     4   0      ; cfg
0116    TGETS    4   4   4  ; "rocks_trees"
0117    KSHORT   5   1
0118    TDUP     6  23
0119    TSETS    2   6   8  ; "root"
0120    CALL     3   1   4
0121    UGET     3   3      ; manif
0122    TGETS    3   3  20  ; "load_rocks_tree_manifests"
0123    CALL     3   1   1
0124    UGET     3   4      ; path
0125    TGETS    3   3  21  ; "use_tree"
0126    MOV      4   2
0127    CALL     3   1   2
0128    JMP      2 => 0136
0129 => UGET     2   0      ; cfg
0130    TGETS    2   2   4  ; "rocks_trees"
0131    UGET     3   4      ; path
0132    TGETS    3   3  21  ; "use_tree"
0133    LEN      4   2
0134    TGETV    4   2   4
0135    CALL     3   1   2
0136 => UGET     2   5      ; strip_trailing_slashes
0137    CALL     2   1   1
0138    UGET     2   0      ; cfg
0139    TGETS    2   2  24  ; "variables"
0140    UGET     3   0      ; cfg
0141    TGETS    3   3  26  ; "rocks_dir"
0142    TSETS    3   2  25  ; "ROCKS_TREE"
0143    UGET     2   0      ; cfg
0144    TGETS    2   2  24  ; "variables"
0145    UGET     3   0      ; cfg
0146    TGETS    3   3  28  ; "deploy_bin_dir"
0147    TSETS    3   2  27  ; "SCRIPTS_DIR"
0148    KPRI     2   2
0149    RET1     2   2

-- BYTECODE -- cmd.lua:129-129
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "path"
0003    MOV      2   0
0004    KSTR     3   1      ; "dev"
0005    CALLT    1   3

-- BYTECODE -- cmd.lua:122-145
0001    TGETS    1   0   0  ; "server"
0002    ISF          1
0003    JMP      2 => 0018
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "split_url"
0006    TGETS    2   0   0  ; "server"
0007    CALL     1   3   2
0008    GGET     3   2      ; "table"
0009    TGETS    3   3   3  ; "insert"
0010    UGET     4   1      ; cfg
0011    TGETS    4   4   4  ; "rocks_servers"
0012    KSHORT   5   1
0013    MOV      6   1
0014    KSTR     7   5      ; "://"
0015    MOV      8   2
0016    CAT      6   6   8
0017    CALL     3   1   4
0018 => TGETS    1   0   6  ; "dev"
0019    ISF          1
0020    JMP      2 => 0036
0021    FNEW     1   7      ; cmd.lua:129
0022    UGET     2   2      ; fun
0023    TGETS    2   2   8  ; "traverse"
0024    UGET     3   1      ; cfg
0025    TGETS    3   3   4  ; "rocks_servers"
0026    MOV      4   1
0027    CALL     2   2   3
0028    UGET     3   1      ; cfg
0029    UGET     4   2      ; fun
0030    TGETS    4   4   9  ; "concat"
0031    MOV      5   2
0032    UGET     6   1      ; cfg
0033    TGETS    6   6   4  ; "rocks_servers"
0034    CALL     4   2   3
0035    TSETS    4   3   4  ; "rocks_servers"
0036 => TGETS    1   0  10  ; "only_server"
0037    ISF          1
0038    JMP      2 => 0058
0039    TGETS    1   0   6  ; "dev"
0040    ISF          1
0041    JMP      2 => 0046
0042    KPRI     1   0
0043    KSTR     2  11      ; "--only-server cannot be used with --dev"
0044    UCLO     0 => 0045
0045 => RET      1   3
0046 => TGETS    1   0   0  ; "server"
0047    ISF          1
0048    JMP      2 => 0053
0049    KPRI     1   0
0050    KSTR     2  12      ; "--only-server cannot be used with --serv"~
0051    UCLO     0 => 0052
0052 => RET      1   3
0053 => UGET     1   1      ; cfg
0054    TNEW     2   3
0055    TGETS    3   0  10  ; "only_server"
0056    TSETB    3   2   1
0057    TSETS    2   1   4  ; "rocks_servers"
0058 => KPRI     1   2
0059    UCLO     0 => 0060
0060 => RET1     1   2

-- BYTECODE -- cmd.lua:147-157
0001    KSTR     1   0      ; "Arch.: "
0002    UGET     2   0      ; cfg
0003    ISF          2
0004    JMP      3 => 0009
0005    UGET     2   0      ; cfg
0006    TGETS    2   2   1  ; "arch"
0007    IST          2
0008    JMP      3 => 0010
0009 => KSTR     2   2      ; "unknown"
0010 => CAT      1   1   2
0011    GGET     2   3      ; "package"
0012    TGETS    2   2   4  ; "config"
0013    MOV      3   2
0014    TGETS    2   2   5  ; "sub"
0015    KSHORT   4   1
0016    KSHORT   5   1
0017    CALL     2   2   4
0018    ISNES    2   6      ; "\"
0019    JMP      2 => 0030
0020    UGET     2   0      ; cfg
0021    ISF          2
0022    JMP      3 => 0030
0023    UGET     2   0      ; cfg
0024    TGETS    2   2   7  ; "fs_use_modules"
0025    ISF          2
0026    JMP      3 => 0030
0027    MOV      2   1
0028    KSTR     3   8      ; " (fs_use_modules = true)"
0029    CAT      1   2   3
0030 => GGET     2   9      ; "debug"
0031    TGETS    2   2  10  ; "traceback"
0032    KSTR     3  11      ; "LuaRocks "
0033    UGET     4   0      ; cfg
0034    TGETS    4   4  12  ; "program_version"
0035    KSTR     5  13      ; " bug (please report at https://github.co"~
0036    MOV      6   1
0037    KSTR     7  14      ; "\n"
0038    MOV      8   0
0039    CAT      3   3   8
0040    KSHORT   4   2
0041    CALLT    2   3

-- BYTECODE -- cmd.lua:162-173
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => KSTR     4   3      ; "bad error, expected string, got: "
0011    GGET     5   1      ; "type"
0012    MOV      6   0
0013    CALL     5   2   2
0014    CAT      4   4   5
0015    CALL     2   1   3
0016    UGET     2   0      ; util
0017    TGETS    2   2   4  ; "printerr"
0018    KSTR     3   5      ; "\nError: "
0019    MOV      4   0
0020    CAT      3   3   4
0021    CALL     2   1   2
0022    GGET     2   6      ; "xpcall"
0023    UGET     3   0      ; util
0024    TGETS    3   3   7  ; "run_scheduled_functions"
0025    UGET     4   1      ; error_handler
0026    CALL     2   3   3
0027    IST          2
0028    JMP      4 => 0038
0029    UGET     4   0      ; util
0030    TGETS    4   4   4  ; "printerr"
0031    KSTR     5   5      ; "\nError: "
0032    MOV      6   3
0033    CAT      5   5   6
0034    CALL     4   1   2
0035    UGET     4   2      ; cmd
0036    TGETS    4   4   8  ; "errorcodes"
0037    TGETS    1   4   9  ; "CRASH"
0038 => GGET     4  10      ; "os"
0039    TGETS    4   4  11  ; "exit"
0040    ISTC     5   1
0041    JMP      5 => 0045
0042    UGET     5   2      ; cmd
0043    TGETS    5   5   8  ; "errorcodes"
0044    TGETS    5   5  12  ; "UNSPECIFIED"
0045 => CALL     4   1   2
0046    RET0     0   1

-- BYTECODE -- cmd.lua:175-198
0001    GGET     2   0      ; "package"
0002    TGETS    2   2   1  ; "config"
0003    MOV      3   2
0004    TGETS    2   2   2  ; "sub"
0005    KSHORT   4   1
0006    KSHORT   5   1
0007    CALL     2   2   4
0008    ISNES    2   3      ; "\"
0009    JMP      2 => 0012
0010    KSTR     2   4      ; ";"
0011    JMP      3 => 0013
0012 => KSTR     2   5      ; ":"
0013 => TNEW     3   0
0014    GGET     4   6      ; "os"
0015    TGETS    4   4   7  ; "getenv"
0016    KSTR     5   8      ; "PATH"
0017    CALL     4   2   2
0018    MOV      5   4
0019    TGETS    4   4   9  ; "gmatch"
0020    KSTR     6  10      ; "[^"
0021    MOV      7   2
0022    KSTR     8  11      ; "]+"
0023    CAT      6   6   8
0024    CALL     4   4   3
0025    JMP      7 => 0068
0026 => UGET     8   0      ; dir
0027    TGETS    8   8  12  ; "path"
0028    MOV     10   7
0029    TGETS    9   7  13  ; "gsub"
0030    KSTR    11  14      ; "[\/][^\/]+[\/]?$"
0031    KSTR    12  15      ; ""
0032    CALL     9   2   4
0033    CALL     8   2   2
0034    UGET     9   1      ; util
0035    TGETS    9   9  16  ; "find_lua"
0036    MOV     10   8
0037    MOV     11   0
0038    CALL     9   3   3
0039    ISF          9
0040    JMP     11 => 0043
0041    RET1     9   2
0042    JMP     11 => 0048
0043 => GGET    11  17      ; "table"
0044    TGETS   11  11  18  ; "insert"
0045    MOV     12   3
0046    MOV     13  10
0047    CALL    11   1   3
0048 => UGET    11   0      ; dir
0049    TGETS   11  11  12  ; "path"
0050    MOV     12   7
0051    CALL    11   2   2
0052    MOV      7  11
0053    UGET    11   1      ; util
0054    TGETS   11  11  16  ; "find_lua"
0055    MOV     12   7
0056    MOV     13   0
0057    CALL    11   2   3
0058    MOV      9  11
0059    ISF          9
0060    JMP     11 => 0063
0061    RET1     9   2
0062    JMP     11 => 0068
0063 => GGET    11  17      ; "table"
0064    TGETS   11  11  18  ; "insert"
0065    MOV     12   3
0066    MOV     13  10
0067    CALL    11   1   3
0068 => ITERC    7   2   3
0069    ITERL    7 => 0026
0070    KPRI     4   0
0071    KSTR     5  19      ; "Could not find "
0072    ISF          0
0073    JMP      6 => 0079
0074    KSTR     6  20      ; "Lua "
0075    MOV      7   0
0076    CAT      6   6   7
0077    IST          6
0078    JMP      7 => 0080
0079 => KSTR     6  21      ; "Lua"
0080 => KSTR     7  22      ; " in PATH."
0081    ISF          1
0082    JMP      8 => 0092
0083    KSTR     8  23      ; " Tried:\n"
0084    GGET     9  17      ; "table"
0085    TGETS    9   9  24  ; "concat"
0086    MOV     10   3
0087    KSTR    11  25      ; "\n"
0088    CALL     9   2   3
0089    CAT      8   8   9
0090    IST          8
0091    JMP      9 => 0093
0092 => KSTR     8  15      ; ""
0093 => CAT      5   5   8
0094    RET      4   3

-- BYTECODE -- cmd.lua:204-219
0001    ISF          0
0002    JMP      1 => 0011
0003    MOV      2   0
0004    TGETS    1   0   0  ; "gsub"
0005    KSTR     3   1      ; "[/\][^/\]+$"
0006    KSTR     4   2      ; ""
0007    CALL     1   2   4
0008    KPRI     2   2
0009    RET      1   3
0010    JMP      1 => 0049
0011 => KSTR     1   3      ; "."
0012    KSHORT   2   1
0013    KSHORT   3  10
0014    KSHORT   4   1
0015    FORI     2 => 0049
0016 => UGET     6   0      ; util
0017    TGETS    6   6   4  ; "exists"
0018    MOV      7   1
0019    KSTR     8   5      ; "/.luarocks"
0020    CAT      7   7   8
0021    CALL     6   2   2
0022    ISF          6
0023    JMP      7 => 0036
0024    UGET     6   0      ; util
0025    TGETS    6   6   4  ; "exists"
0026    MOV      7   1
0027    KSTR     8   6      ; "/lua_modules"
0028    CAT      7   7   8
0029    CALL     6   2   2
0030    ISF          6
0031    JMP      7 => 0036
0032    MOV      6   1
0033    KPRI     7   1
0034    RET      6   3
0035    JMP      6 => 0045
0036 => UGET     6   0      ; util
0037    TGETS    6   6   4  ; "exists"
0038    MOV      7   1
0039    KSTR     8   7      ; "/.luarocks-no-project"
0040    CAT      7   7   8
0041    CALL     6   2   2
0042    ISF          6
0043    JMP      7 => 0045
0044    JMP      2 => 0049
0045 => MOV      6   1
0046    KSTR     7   8      ; "/.."
0047    CAT      1   6   7
0048    FORL     2 => 0016
0049 => KPRI     1   0
0050    RET1     1   2

-- BYTECODE -- cmd.lua:221-248
0001    UGET     2   0      ; hardcoded
0002    TGETS    2   2   0  ; "FORCE_CONFIG"
0003    ISF          2
0004    JMP      3 => 0007
0005    KPRI     2   0
0006    RET1     2   2
0007 => TNEW     2   0
0008    ISF          1
0009    JMP      3 => 0019
0010    GGET     3   1      ; "table"
0011    TGETS    3   3   2  ; "insert"
0012    MOV      4   2
0013    UGET     5   1      ; dir
0014    TGETS    5   5   3  ; "path"
0015    MOV      6   1
0016    KSTR     7   4      ; ".luarocks"
0017    CALL     5   0   3
0018    CALLM    3   1   1
0019 => UGET     3   2      ; cfg
0020    TGETS    3   3   5  ; "home_tree"
0021    ISF          3
0022    JMP      4 => 0033
0023    GGET     3   1      ; "table"
0024    TGETS    3   3   2  ; "insert"
0025    MOV      4   2
0026    UGET     5   1      ; dir
0027    TGETS    5   5   3  ; "path"
0028    UGET     6   2      ; cfg
0029    TGETS    6   6   5  ; "home_tree"
0030    KSTR     7   4      ; ".luarocks"
0031    CALL     5   0   3
0032    CALLM    3   1   1
0033 => GGET     3   1      ; "table"
0034    TGETS    3   3   2  ; "insert"
0035    MOV      4   2
0036    UGET     5   2      ; cfg
0037    TGETS    5   5   6  ; "sysconfdir"
0038    CALL     3   1   3
0039    GGET     3   7      ; "ipairs"
0040    MOV      4   2
0041    CALL     3   4   2
0042    JMP      6 => 0083
0043 => UGET     8   1      ; dir
0044    TGETS    8   8   3  ; "path"
0045    MOV      9   7
0046    KSTR    10   8      ; "default-lua-version.lua"
0047    CALL     8   2   3
0048    GGET     9   9      ; "loadfile"
0049    MOV     10   8
0050    KSTR    11  10      ; "t"
0051    CALL     9   3   3
0052    ISF          9
0053    JMP     11 => 0083
0054    GGET    11  11      ; "pcall"
0055    MOV     12   9
0056    CALL    11   3   2
0057    ISF         11
0058    JMP     13 => 0083
0059    GGET    13  12      ; "type"
0060    MOV     14  12
0061    CALL    13   2   2
0062    ISNES   13  13      ; "string"
0063    JMP     13 => 0083
0064    MOV     14  12
0065    TGETS   13  12  14  ; "match"
0066    KSTR    15  15      ; "%d+.%d+"
0067    CALL    13   2   3
0068    ISF         13
0069    JMP     14 => 0083
0070    TGETS   13   0  16  ; "verbose"
0071    ISF         13
0072    JMP     14 => 0082
0073    UGET    13   3      ; util
0074    TGETS   13  13  17  ; "printout"
0075    KSTR    14  18      ; "Defaulting to Lua "
0076    MOV     15  12
0077    KSTR    16  19      ; " based on "
0078    MOV     17   8
0079    KSTR    18  20      ; " ..."
0080    CAT     14  14  18
0081    CALL    13   1   2
0082 => RET1    12   2
0083 => ITERC    6   3   3
0084    ITERL    6 => 0043
0085    KPRI     3   0
0086    RET1     3   2

-- BYTECODE -- cmd.lua:251-255
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "exists"
0003    UGET     2   1      ; dir
0004    TGETS    2   2   1  ; "path"
0005    UGET     3   2      ; dirname
0006    KSTR     4   2      ; ".luarocks"
0007    KSTR     5   3      ; "config-"
0008    MOV      6   0
0009    KSTR     7   4      ; ".lua"
0010    CAT      5   5   7
0011    CALL     2   0   4
0012    CALLM    1   2   0
0013    ISF          1
0014    JMP      2 => 0016
0015    RET1     0   2
0016 => RET0     0   1

-- BYTECODE -- cmd.lua:250-256
0001    UGET     1   0      ; fun
0002    TGETS    1   1   0  ; "find"
0003    UGET     2   1      ; util
0004    TGETS    2   2   1  ; "lua_versions"
0005    KSTR     3   2      ; "descending"
0006    CALL     2   2   2
0007    FNEW     3   3      ; cmd.lua:251
0008    UCLO     0 => 0009
0009 => CALLT    1   3

-- BYTECODE -- cmd.lua:258-282
0001    TGETS    2   0   0  ; "lua_version"
0002    IST          2
0003    JMP      3 => 0015
0004    UGET     2   0      ; find_default_lua_version
0005    MOV      3   0
0006    MOV      4   1
0007    CALL     2   2   3
0008    IST          2
0009    JMP      3 => 0015
0010    ISFC     2   1
0011    JMP      2 => 0015
0012    UGET     2   1      ; find_version_from_config
0013    MOV      3   1
0014    CALL     2   2   2
0015 => TGETS    3   0   1  ; "lua_dir"
0016    ISF          3
0017    JMP      4 => 0029
0018    UGET     3   2      ; util
0019    TGETS    3   3   2  ; "find_lua"
0020    TGETS    4   0   1  ; "lua_dir"
0021    MOV      5   2
0022    CALL     3   3   3
0023    IST          3
0024    JMP      5 => 0028
0025    UGET     5   3      ; die
0026    MOV      6   4
0027    CALL     5   1   2
0028 => RET1     3   2
0029 => ISF          2
0030    JMP      3 => 0040
0031    UGET     3   4      ; search_lua_in_path
0032    MOV      4   2
0033    CALL     3   2   2
0034    ISF          3
0035    JMP      4 => 0037
0036    RET1     3   2
0037 => TDUP     4   3
0038    TSETS    2   4   0  ; "lua_version"
0039    RET1     4   2
0040 => TNEW     3   0
0041    RET1     3   2

-- BYTECODE -- cmd.lua:284-298
0001    UGET     1   0      ; find_project_dir
0002    TGETS    2   0   0  ; "project_tree"
0003    CALL     1   3   2
0004    UGET     3   1      ; detect_lua_via_args
0005    MOV      4   0
0006    MOV      5   1
0007    CALL     3   2   3
0008    TGETS    4   0   1  ; "lua_version"
0009    ISF          4
0010    JMP      5 => 0013
0011    TGETS    4   0   1  ; "lua_version"
0012    TSETS    4   3   2  ; "given_lua_version"
0013 => TGETS    4   0   3  ; "lua_dir"
0014    ISF          4
0015    JMP      5 => 0018
0016    TGETS    4   0   3  ; "lua_dir"
0017    TSETS    4   3   4  ; "given_lua_dir"
0018 => ISF          2
0019    JMP      4 => 0021
0020    TSETS    1   3   5  ; "given_project_dir"
0021 => TSETS    1   3   6  ; "project_dir"
0022    RET1     3   2

-- BYTECODE -- cmd.lua:301-310
0001    UGET     1   0      ; detect_config_via_args
0002    MOV      2   0
0003    CALL     1   2   2
0004    UGET     2   1      ; cfg
0005    TGETS    2   2   0  ; "init"
0006    MOV      3   1
0007    UGET     4   2      ; util
0008    TGETS    4   4   1  ; "warning"
0009    CALL     2   3   3
0010    IST          2
0011    JMP      4 => 0015
0012    KPRI     4   0
0013    MOV      5   3
0014    RET      4   3
0015 => TGETS    4   1   2  ; "lua_dir"
0016    ISNEP    4   0
0017    JMP      4 => 0020
0018    KPRI     4   1
0019    JMP      5 => 0021
0020 => KPRI     4   2
0021 => RET1     4   2

-- BYTECODE -- cmd.lua:320-322
0001    ISF          0
0002    JMP      1 => 0005
0003    KSTR     1   0      ; "ok"
0004    JMP      2 => 0006
0005 => KSTR     1   1      ; "not found"
0006 => RET1     1   2

-- BYTECODE -- cmd.lua:324-352
0001    KSTR     1   0      ; "Configuration:\n   Lua version: "
0002    TGETS    2   0   1  ; "lua_version"
0003    KSTR     3   2      ; "\n"
0004    CAT      1   1   3
0005    TGETS    2   0   3  ; "luajit_version"
0006    ISF          2
0007    JMP      3 => 0013
0008    MOV      2   1
0009    KSTR     3   4      ; "   LuaJIT version: "
0010    TGETS    4   0   3  ; "luajit_version"
0011    KSTR     5   2      ; "\n"
0012    CAT      1   2   5
0013 => MOV      2   1
0014    KSTR     3   5      ; "\n   Configuration files:\n"
0015    CAT      1   2   3
0016    TGETS    2   0   6  ; "config_files"
0017    MOV      3   1
0018    KSTR     4   7      ; "      System  : "
0019    UGET     5   0      ; fs
0020    TGETS    5   5   8  ; "absolute_name"
0021    TGETS    6   2   9  ; "system"
0022    TGETS    6   6  10  ; "file"
0023    CALL     5   2   2
0024    KSTR     6  11      ; " ("
0025    UGET     7   1      ; get_status
0026    TGETS    8   2   9  ; "system"
0027    TGETS    8   8  12  ; "found"
0028    CALL     7   2   2
0029    KSTR     8  13      ; ")\n"
0030    CAT      1   3   8
0031    TGETS    3   2  14  ; "user"
0032    TGETS    3   3  10  ; "file"
0033    ISF          3
0034    JMP      4 => 0050
0035    MOV      3   1
0036    KSTR     4  15      ; "      User    : "
0037    UGET     5   0      ; fs
0038    TGETS    5   5   8  ; "absolute_name"
0039    TGETS    6   2  14  ; "user"
0040    TGETS    6   6  10  ; "file"
0041    CALL     5   2   2
0042    KSTR     6  11      ; " ("
0043    UGET     7   1      ; get_status
0044    TGETS    8   2  14  ; "user"
0045    TGETS    8   8  12  ; "found"
0046    CALL     7   2   2
0047    KSTR     8  13      ; ")\n"
0048    CAT      1   3   8
0049    JMP      3 => 0053
0050 => MOV      3   1
0051    KSTR     4  16      ; "      User    : disabled in this LuaRock"~
0052    CAT      1   3   4
0053 => TGETS    3   2  17  ; "project"
0054    ISF          3
0055    JMP      4 => 0070
0056    MOV      3   1
0057    KSTR     4  18      ; "      Project : "
0058    UGET     5   0      ; fs
0059    TGETS    5   5   8  ; "absolute_name"
0060    TGETS    6   2  17  ; "project"
0061    TGETS    6   6  10  ; "file"
0062    CALL     5   2   2
0063    KSTR     6  11      ; " ("
0064    UGET     7   1      ; get_status
0065    TGETS    8   2  17  ; "project"
0066    TGETS    8   8  12  ; "found"
0067    CALL     7   2   2
0068    KSTR     8  13      ; ")\n"
0069    CAT      1   3   8
0070 => MOV      3   1
0071    KSTR     4  19      ; "\n   Rocks trees in use: \n"
0072    CAT      1   3   4
0073    GGET     3  20      ; "ipairs"
0074    TGETS    4   0  21  ; "rocks_trees"
0075    CALL     3   4   2
0076    JMP      6 => 0111
0077 => GGET     8  22      ; "type"
0078    MOV      9   7
0079    CALL     8   2   2
0080    ISNES    8  23      ; "string"
0081    JMP      8 => 0090
0082    MOV      8   1
0083    KSTR     9  24      ; "      "
0084    UGET    10   0      ; fs
0085    TGETS   10  10   8  ; "absolute_name"
0086    MOV     11   7
0087    CALL    10   2   2
0088    CAT      1   8  10
0089    JMP      8 => 0108
0090 => TGETS    8   7  25  ; "name"
0091    ISF          8
0092    JMP      9 => 0099
0093    KSTR     8  26      ; " (""
0094    TGETS    9   7  25  ; "name"
0095    KSTR    10  27      ; "")"
0096    CAT      8   8  10
0097    IST          8
0098    JMP      9 => 0100
0099 => KSTR     8  28      ; ""
0100 => MOV      9   1
0101    KSTR    10  24      ; "      "
0102    UGET    11   0      ; fs
0103    TGETS   11  11   8  ; "absolute_name"
0104    TGETS   12   7  29  ; "root"
0105    CALL    11   2   2
0106    MOV     12   8
0107    CAT      1   9  12
0108 => MOV      8   1
0109    KSTR     9   2      ; "\n"
0110    CAT      1   8   9
0111 => ITERC    6   3   3
0112    ITERL    6 => 0077
0113    RET1     1   2

-- BYTECODE -- cmd.lua:397-402
0001    UGET     0   0      ; util
0002    TGETS    0   0   0  ; "printout"
0003    UGET     1   1      ; program
0004    KSTR     2   1      ; " "
0005    UGET     3   2      ; cfg
0006    TGETS    3   3   2  ; "program_version"
0007    CAT      1   1   3
0008    CALL     0   1   2
0009    UGET     0   0      ; util
0010    TGETS    0   0   0  ; "printout"
0011    UGET     1   3      ; description
0012    CALL     0   1   2
0013    UGET     0   0      ; util
0014    TGETS    0   0   0  ; "printout"
0015    CALL     0   1   1
0016    GGET     0   3      ; "os"
0017    TGETS    0   0   4  ; "exit"
0018    UGET     1   4      ; cmd
0019    TGETS    1   1   5  ; "errorcodes"
0020    TGETS    1   1   6  ; "OK"
0021    CALL     0   1   2
0022    RET0     0   1

-- BYTECODE -- cmd.lua:354-441
0001    UGET     2   0      ; dir
0002    TGETS    2   2   0  ; "base_name"
0003    UGET     3   1      ; program
0004    CALL     2   2   2
0005    UGET     3   2      ; argparse
0006    MOV      4   2
0007    KSTR     5   1      ; "LuaRocks "
0008    UGET     6   3      ; cfg
0009    TGETS    6   6   2  ; "program_version"
0010    KSTR     7   3      ; ", the Lua package manager\n\n"
0011    UGET     8   1      ; program
0012    KSTR     9   4      ; " - "
0013    MOV     10   0
0014    CAT      5   5  10
0015    UGET     6   4      ; variables_help
0016    KSTR     7   5      ; "Run '"
0017    MOV      8   2
0018    KSTR     9   6      ; "' without any arguments to see the confi"~
0019    CAT      6   6   9
0020    CALL     3   2   4
0021    MOV      4   3
0022    TGETS    3   3   7  ; "help_max_width"
0023    KSHORT   5  80
0024    CALL     3   2   3
0025    MOV      4   3
0026    TGETS    3   3   8  ; "add_help_command"
0027    CALL     3   2   2
0028    MOV      4   3
0029    TGETS    3   3   9  ; "add_complete_command"
0030    TDUP     5  10
0031    KSTR     6  11      ; "Output a shell completion script.\n\nEna"~
0032    MOV      7   2
0033    KSTR     8  12      ; " completion bash)\n   or save the comple"~
0034    MOV      9   2
0035    KSTR    10  13      ; " completion bash > ~/.local/share/bash-c"~
0036    MOV     11   2
0037    KSTR    12  14      ; "\n\nEnabling completions for Zsh:\n\n   "~
0038    MOV     13   2
0039    KSTR    14  15      ; " completion zsh > ~/.zfunc/_"
0040    MOV     15   2
0041    KSTR    16  16      ; "\n\nEnabling completion for Fish:\n\n   "~
0042    MOV     17   2
0043    KSTR    18  17      ; " completion fish | source\n   or save th"~
0044    MOV     19   2
0045    KSTR    20  18      ; " completion fish > ~/.config/fish/comple"~
0046    MOV     21   2
0047    KSTR    22  19      ; ".fish\n"
0048    CAT      6   6  22
0049    TSETS    6   5  20  ; "description"
0050    CALL     3   2   3
0051    MOV      4   3
0052    TGETS    3   3  21  ; "command_target"
0053    KSTR     5  22      ; "command"
0054    CALL     3   2   3
0055    MOV      4   3
0056    TGETS    3   3  23  ; "require_command"
0057    KPRI     5   1
0058    CALL     3   2   3
0059    MOV      5   3
0060    TGETS    4   3  24  ; "flag"
0061    KSTR     6  25      ; "--version"
0062    KSTR     7  26      ; "Show version info and exit."
0063    CALL     4   2   4
0064    MOV      5   4
0065    TGETS    4   4  27  ; "action"
0066    FNEW     6  28      ; cmd.lua:397
0067    CALL     4   1   3
0068    MOV      5   3
0069    TGETS    4   3  24  ; "flag"
0070    KSTR     6  29      ; "--dev"
0071    KSTR     7  30      ; "Enable the sub-repositories in rocks ser"~
0072    KSTR     8  31      ; "rockspecs of in-development versions."
0073    CAT      7   7   8
0074    CALL     4   1   4
0075    MOV      5   3
0076    TGETS    4   3  32  ; "option"
0077    KSTR     6  33      ; "--server"
0078    KSTR     7  34      ; "Fetch rocks/rockspecs from this server "
0079    KSTR     8  35      ; "(takes priority over config file)."
0080    CAT      7   7   8
0081    CALL     4   2   4
0082    MOV      5   4
0083    TGETS    4   4  36  ; "hidden_name"
0084    KSTR     6  37      ; "--from"
0085    CALL     4   1   3
0086    MOV      5   3
0087    TGETS    4   3  32  ; "option"
0088    KSTR     6  38      ; "--only-server"
0089    KSTR     7  39      ; "Fetch rocks/rockspecs from this server o"~
0090    KSTR     8  40      ; "(overrides any entries in the config fil"~
0091    CAT      7   7   8
0092    CALL     4   2   4
0093    MOV      5   4
0094    TGETS    4   4  41  ; "argname"
0095    KSTR     6  42      ; "<server>"
0096    CALL     4   2   3
0097    MOV      5   4
0098    TGETS    4   4  36  ; "hidden_name"
0099    KSTR     6  43      ; "--only-from"
0100    CALL     4   1   3
0101    MOV      5   3
0102    TGETS    4   3  32  ; "option"
0103    KSTR     6  44      ; "--only-sources"
0104    KSTR     7  45      ; "Restrict downloads to paths matching the"~
0105    CALL     4   2   4
0106    MOV      5   4
0107    TGETS    4   4  41  ; "argname"
0108    KSTR     6  46      ; "<url>"
0109    CALL     4   2   3
0110    MOV      5   4
0111    TGETS    4   4  36  ; "hidden_name"
0112    KSTR     6  47      ; "--only-sources-from"
0113    CALL     4   1   3
0114    MOV      5   3
0115    TGETS    4   3  32  ; "option"
0116    KSTR     6  48      ; "--namespace"
0117    KSTR     7  49      ; "Specify the rocks server namespace to us"~
0118    CALL     4   2   4
0119    MOV      5   4
0120    TGETS    4   4  50  ; "convert"
0121    GGET     6  51      ; "string"
0122    TGETS    6   6  52  ; "lower"
0123    CALL     4   1   3
0124    MOV      5   3
0125    TGETS    4   3  32  ; "option"
0126    KSTR     6  53      ; "--lua-dir"
0127    KSTR     7  54      ; "Which Lua installation to use."
0128    CALL     4   2   4
0129    MOV      5   4
0130    TGETS    4   4  41  ; "argname"
0131    KSTR     6  55      ; "<prefix>"
0132    CALL     4   1   3
0133    MOV      5   3
0134    TGETS    4   3  32  ; "option"
0135    KSTR     6  56      ; "--lua-version"
0136    KSTR     7  57      ; "Which Lua version to use."
0137    CALL     4   2   4
0138    MOV      5   4
0139    TGETS    4   4  41  ; "argname"
0140    KSTR     6  58      ; "<ver>"
0141    CALL     4   1   3
0142    MOV      5   3
0143    TGETS    4   3  32  ; "option"
0144    KSTR     6  59      ; "--tree"
0145    KSTR     7  60      ; "Which tree to operate on."
0146    CALL     4   2   4
0147    MOV      5   4
0148    TGETS    4   4  36  ; "hidden_name"
0149    KSTR     6  61      ; "--to"
0150    CALL     4   1   3
0151    MOV      5   3
0152    TGETS    4   3  24  ; "flag"
0153    KSTR     6  62      ; "--local"
0154    KSTR     7  63      ; "Use the tree in the user's home director"~
0155    KSTR     8  64      ; "To enable it, see '"
0156    UGET     9   1      ; program
0157    KSTR    10  65      ; " help path'."
0158    CAT      7   7  10
0159    CALL     4   1   4
0160    MOV      5   3
0161    TGETS    4   3  24  ; "flag"
0162    KSTR     6  66      ; "--global"
0163    KSTR     7  67      ; "Use the system tree when `local_by_defau"~
0164    CALL     4   1   4
0165    MOV      5   3
0166    TGETS    4   3  24  ; "flag"
0167    KSTR     6  68      ; "--verbose"
0168    KSTR     7  69      ; "Display verbose output of commands execu"~
0169    CALL     4   1   4
0170    MOV      5   3
0171    TGETS    4   3  32  ; "option"
0172    KSTR     6  70      ; "--timeout"
0173    KSTR     7  71      ; "Timeout on network operations, in second"~
0174    KSTR     8  72      ; "0 means no timeout (wait forever). Defau"~
0175    GGET     9  73      ; "tostring"
0176    UGET    10   3      ; cfg
0177    TGETS   10  10  74  ; "connection_timeout"
0178    CALL     9   2   2
0179    KSTR    10  75      ; "."
0180    CAT      7   7  10
0181    CALL     4   2   4
0182    MOV      5   4
0183    TGETS    4   4  41  ; "argname"
0184    KSTR     6  76      ; "<seconds>"
0185    CALL     4   2   3
0186    MOV      5   4
0187    TGETS    4   4  50  ; "convert"
0188    GGET     6  77      ; "tonumber"
0189    CALL     4   1   3
0190    MOV      5   3
0191    TGETS    4   3  32  ; "option"
0192    KSTR     6  78      ; "--project-tree"
0193    CALL     4   2   3
0194    MOV      5   4
0195    TGETS    4   4  79  ; "hidden"
0196    KPRI     6   2
0197    CALL     4   1   3
0198    UGET     4   5      ; util
0199    TGETS    4   4  80  ; "sortedpairs"
0200    MOV      5   1
0201    CALL     4   4   2
0202    JMP      7 => 0206
0203 => TGETS    9   8  81  ; "add_to_parser"
0204    MOV     10   3
0205    CALL     9   1   2
0206 => ITERC    7   3   3
0207    ITERL    7 => 0203
0208    UCLO     0 => 0209
0209 => RET1     3   2

-- BYTECODE -- cmd.lua:473-479
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    UGET     3   0      ; name
0004    UGET     4   1      ; mod
0005    TGETS    4   4   1  ; "help"
0006    UGET     5   2      ; util
0007    TGETS    5   5   2  ; "see_also"
0008    CALL     5   0   1
0009    CALLM    1   2   3
0010    MOV      2   1
0011    TGETS    1   1   3  ; "summary"
0012    UGET     3   1      ; mod
0013    TGETS    3   3   4  ; "help_summary"
0014    CALL     1   2   3
0015    MOV      2   1
0016    TGETS    1   1   5  ; "handle_options"
0017    KPRI     3   1
0018    CALL     1   2   3
0019    MOV      2   1
0020    TGETS    1   1   6  ; "argument"
0021    KSTR     3   7      ; "input"
0022    CALL     1   2   3
0023    MOV      2   1
0024    TGETS    1   1   8  ; "args"
0025    KSTR     3   9      ; "*"
0026    CALL     1   1   3
0027    RET0     0   1

-- BYTECODE -- cmd.lua:481-483
0001    UGET     1   0      ; original_command
0002    MOV      2   0
0003    UGET     3   1      ; unpack
0004    TGETS    4   0   0  ; "input"
0005    CALL     3   0   2
0006    CALLMT   1   1

-- BYTECODE -- cmd.lua:494-518
0001    TNEW     0   3
0002    VARG     1   0   0
0003    TSETM    1   0      ; 1
0004    TNEW     1   0
0005    LEN      2   0
0006    KSHORT   3   1
0007    LEN      4   0
0008    KSHORT   5   1
0009    FORI     3 => 0016
0010 => TGETV    7   0   6
0011    ISNES    7   0      ; "--"
0012    JMP      7 => 0015
0013    SUBVN    2   6   1  ; 1
0014    JMP      3 => 0016
0015 => FORL     3 => 0010
0016 => MOV      3   2
0017    KSHORT   4   1
0018    KSHORT   5  -1
0019    FORI     3 => 0046
0020 => TGETV    7   0   6
0021    MOV      9   7
0022    TGETS    8   7   1  ; "match"
0023    KSTR    10   2      ; "^[^-][^=]*="
0024    CALL     8   2   3
0025    ISF          8
0026    JMP      9 => 0045
0027    MOV      9   7
0028    TGETS    8   7   1  ; "match"
0029    KSTR    10   3      ; "^([A-Z_][A-Z0-9_]*)=(.*)"
0030    CALL     8   3   3
0031    ISF          9
0032    JMP     10 => 0040
0033    TSETV    9   1   8
0034    GGET    10   4      ; "table"
0035    TGETS   10  10   5  ; "remove"
0036    MOV     11   0
0037    MOV     12   6
0038    CALL    10   1   3
0039    JMP     10 => 0045
0040 => UGET    10   0      ; die
0041    KSTR    11   6      ; "Invalid assignment: "
0042    MOV     12   7
0043    CAT     11  11  12
0044    CALL    10   1   2
0045 => FORL     3 => 0020
0046 => MOV      3   0
0047    MOV      4   1
0048    RET      3   3

-- BYTECODE -- cmd.lua:620-622
0001    UGET     0   0      ; cmd_mod
0002    TGETS    0   0   0  ; "command"
0003    UGET     1   1      ; args
0004    CALLT    0   2

-- BYTECODE -- cmd.lua:451-630
0001    UGET     3   0      ; check_popen
0002    CALL     3   1   1
0003    UGET     3   1      ; cfg
0004    TGETS    3   3   0  ; "init"
0005    CALL     3   1   1
0006    UGET     3   2      ; fs
0007    TGETS    3   3   0  ; "init"
0008    CALL     3   1   1
0009    GGET     3   1      ; "ipairs"
0010    UGET     4   2      ; fs
0011    TGETS    4   4   2  ; "modules"
0012    MOV      5   2
0013    CALL     4   0   2
0014    CALLM    3   4   0
0015    JMP      6 => 0024
0016 => TGETV    8   1   7
0017    IST          8
0018    JMP      8 => 0024
0019    MOV      8   2
0020    KSTR     9   3      ; "."
0021    MOV     10   7
0022    CAT      8   8  10
0023    TSETV    8   1   7
0024 => ITERC    6   3   3
0025    ITERL    6 => 0016
0026    TNEW     3   0
0027    GGET     4   4      ; "pairs"
0028    MOV      5   1
0029    CALL     4   4   2
0030    ISNEXT   7 => 0070
0031 => GGET     9   5      ; "pcall"
0032    GGET    10   6      ; "require"
0033    MOV     11   8
0034    CALL     9   3   3
0035    ISF          9
0036    JMP     11 => 0062
0037    GGET    11   7      ; "type"
0038    MOV     12  10
0039    CALL    11   2   2
0040    ISNES   11   8      ; "table"
0041    JMP     11 => 0062
0042    TGETS   11  10   9  ; "command"
0043    ISF         11
0044    JMP     12 => 0054
0045    TGETS   12  10  10  ; "add_to_parser"
0046    IST         12
0047    JMP     12 => 0052
0048    FNEW    12  11      ; cmd.lua:473
0049    TSETS   12  10  10  ; "add_to_parser"
0050    FNEW    12  12      ; cmd.lua:481
0051    TSETS   12  10   9  ; "command"
0052 => TSETV   10   3   7
0053    JMP     12 => 0061
0054 => UGET    12   3      ; util
0055    TGETS   12  12  13  ; "warning"
0056    KSTR    13  14      ; "command module "
0057    MOV     14   8
0058    KSTR    15  15      ; " does not implement command(), skipping"
0059    CAT     13  13  15
0060    CALL    12   1   2
0061 => UCLO    11 => 0068
0062 => UGET    11   3      ; util
0063    TGETS   11  11  13  ; "warning"
0064    KSTR    12  16      ; "failed to load command module "
0065    MOV     13   8
0066    CAT     12  12  13
0067    CALL    11   1   2
0068 => UCLO     9 => 0069
0069 => UCLO     7 => 0070
0070 => ITERN    7   3   3
0071    ITERL    7 => 0031
0072    FNEW     4  17      ; cmd.lua:494
0073    MOV      5   4
0074    VARG     6   0   3
0075    CALLM    5   3   0
0076    UGET     7   6      ; get_parser
0077    MOV      8   0
0078    MOV      9   3
0079    CALL     7   2   3
0080    MOV      9   7
0081    TGETS    8   7  18  ; "parse"
0082    MOV     10   5
0083    CALL     8   2   3
0084    MOV      5   8
0085    TGETS    8   5  19  ; "nodeps"
0086    ISF          8
0087    JMP      9 => 0090
0088    KSTR     8  21      ; "none"
0089    TSETS    8   5  20  ; "deps_mode"
0090 => TGETS    8   5  22  ; "timeout"
0091    ISF          8
0092    JMP      9 => 0096
0093    UGET     8   1      ; cfg
0094    TGETS    9   5  22  ; "timeout"
0095    TSETS    9   8  23  ; "connection_timeout"
0096 => TGETS    8   5   9  ; "command"
0097    ISNES    8  24      ; "config"
0098    JMP      8 => 0116
0099    TGETS    8   5  25  ; "key"
0100    ISNES    8  26      ; "lua_version"
0101    JMP      8 => 0108
0102    TGETS    8   5  27  ; "value"
0103    ISF          8
0104    JMP      9 => 0108
0105    TGETS    8   5  27  ; "value"
0106    TSETS    8   5  26  ; "lua_version"
0107    JMP      8 => 0116
0108 => TGETS    8   5  25  ; "key"
0109    ISNES    8  28      ; "lua_dir"
0110    JMP      8 => 0116
0111    TGETS    8   5  27  ; "value"
0112    ISF          8
0113    JMP      9 => 0116
0114    TGETS    8   5  27  ; "value"
0115    TSETS    8   5  28  ; "lua_dir"
0116 => UGET     8   7      ; init_config
0117    MOV      9   5
0118    CALL     8   3   2
0119    ISF          9
0120    JMP     10 => 0124
0121    UGET    10   5      ; die
0122    MOV     11   9
0123    CALL    10   1   2
0124 => UGET    10   2      ; fs
0125    TGETS   10  10   0  ; "init"
0126    CALL    10   1   1
0127    KPRI    10   0
0128    IST          8
0129    JMP     11 => 0154
0130    UGET    11   1      ; cfg
0131    TGETS   11  11  29  ; "variables"
0132    TGETS   11  11  30  ; "LUA_DIR"
0133    ISF         11
0134    JMP     12 => 0147
0135    UGET    11   3      ; util
0136    TGETS   11  11  31  ; "find_lua"
0137    UGET    12   1      ; cfg
0138    TGETS   12  12  29  ; "variables"
0139    TGETS   12  12  30  ; "LUA_DIR"
0140    UGET    13   1      ; cfg
0141    TGETS   13  13  26  ; "lua_version"
0142    TGETS   14   5  32  ; "verbose"
0143    CALL    11   3   4
0144    MOV     10  12
0145    MOV      8  11
0146    JMP     11 => 0154
0147 => UGET    11   8      ; search_lua_in_path
0148    UGET    12   1      ; cfg
0149    TGETS   12  12  26  ; "lua_version"
0150    TGETS   13   5  32  ; "verbose"
0151    CALL    11   3   3
0152    MOV     10  12
0153    MOV      8  11
0154 => IST          8
0155    JMP     11 => 0173
0156    TGETS   11   5   9  ; "command"
0157    ISEQS   11  24      ; "config"
0158    JMP     11 => 0173
0159    TGETS   11   5   9  ; "command"
0160    ISEQS   11  33      ; "help"
0161    JMP     11 => 0173
0162    UGET    11   3      ; util
0163    TGETS   11  11  13  ; "warning"
0164    MOV     12  10
0165    KSTR    13  34      ; "\nModules may not install with the corre"~
0166    KSTR    14  35      ; "You may want to specify the path prefix "~
0167    KSTR    15  36      ; "of Lua "
0168    UGET    16   1      ; cfg
0169    TGETS   16  16  26  ; "lua_version"
0170    KSTR    17  37      ; " using --lua-dir"
0171    CAT     12  12  17
0172    CALL    11   1   2
0173 => UGET    11   1      ; cfg
0174    TSETS    8  11  38  ; "lua_found"
0175    UGET    11   1      ; cfg
0176    TGETS   11  11  39  ; "project_dir"
0177    ISF         11
0178    JMP     12 => 0186
0179    UGET    11   1      ; cfg
0180    UGET    12   2      ; fs
0181    TGETS   12  12  40  ; "absolute_name"
0182    UGET    13   1      ; cfg
0183    TGETS   13  13  39  ; "project_dir"
0184    CALL    12   2   2
0185    TSETS   12  11  39  ; "project_dir"
0186 => TGETS   11   5  32  ; "verbose"
0187    ISF         11
0188    JMP     12 => 0195
0189    UGET    11   1      ; cfg
0190    KPRI    12   2
0191    TSETS   12  11  32  ; "verbose"
0192    UGET    11   2      ; fs
0193    TGETS   11  11  32  ; "verbose"
0194    CALL    11   1   1
0195 => UGET    11   2      ; fs
0196    TGETS   11  11  41  ; "current_dir"
0197    CALL    11   2   1
0198    ISF         11
0199    JMP     11 => 0205
0200    UGET    11   2      ; fs
0201    TGETS   11  11  41  ; "current_dir"
0202    CALL    11   2   1
0203    ISNES   11  42      ; ""
0204    JMP     11 => 0208
0205 => UGET    11   5      ; die
0206    KSTR    12  43      ; "Current directory does not exist. Please"~
0207    CALL    11   1   2
0208 => UGET    11   9      ; process_tree_args
0209    MOV     12   5
0210    UGET    13   1      ; cfg
0211    TGETS   13  13  39  ; "project_dir"
0212    CALL    11   3   3
0213    IST         11
0214    JMP     13 => 0218
0215    UGET    13   5      ; die
0216    MOV     14  12
0217    CALL    13   1   2
0218 => UGET    13  10      ; process_server_args
0219    MOV     14   5
0220    CALL    13   3   2
0221    MOV     12  14
0222    MOV     11  13
0223    IST         11
0224    JMP     13 => 0228
0225    UGET    13   5      ; die
0226    MOV     14  12
0227    CALL    13   1   2
0228 => TGETS   13   5  44  ; "only_sources"
0229    ISF         13
0230    JMP     14 => 0234
0231    UGET    13   1      ; cfg
0232    TGETS   14   5  44  ; "only_sources"
0233    TSETS   14  13  45  ; "only_sources_from"
0234 => GGET    13   4      ; "pairs"
0235    MOV     14   6
0236    CALL    13   4   2
0237    ISNEXT  16 => 0241
0238 => UGET    18   1      ; cfg
0239    TGETS   18  18  29  ; "variables"
0240    TSETV   17  18  16
0241 => ITERN   16   3   3
0242    ITERL   16 => 0238
0243    UGET    13   1      ; cfg
0244    TGETS   13  13  46  ; "home_tree"
0245    IST         13
0246    JMP     13 => 0256
0247    UGET    13   1      ; cfg
0248    UGET    14  11      ; dir
0249    TGETS   14  14  48  ; "path"
0250    UGET    15   2      ; fs
0251    TGETS   15  15  49  ; "system_cache_dir"
0252    CALL    15   2   1
0253    KSTR    16  50      ; "luarocks"
0254    CALL    14   2   3
0255    TSETS   14  13  47  ; "local_cache"
0256 => TGETS   13   5  51  ; "no_manifest"
0257    ISF         13
0258    JMP     14 => 0262
0259    UGET    13   1      ; cfg
0260    KPRI    14   2
0261    TSETS   14  13  51  ; "no_manifest"
0262 => TGETS   13   5   9  ; "command"
0263    IST         13
0264    JMP     13 => 0291
0265    MOV     14   7
0266    TGETS   13   7  52  ; "epilog"
0267    UGET    15  12      ; variables_help
0268    UGET    16  13      ; get_config_text
0269    UGET    17   1      ; cfg
0270    CALL    16   2   2
0271    CAT     15  15  16
0272    CALL    13   1   3
0273    UGET    13   3      ; util
0274    TGETS   13  13  53  ; "printout"
0275    CALL    13   1   1
0276    UGET    13   3      ; util
0277    TGETS   13  13  53  ; "printout"
0278    MOV     15   7
0279    TGETS   14   7  54  ; "get_help"
0280    CALL    14   0   2
0281    CALLM   13   1   0
0282    UGET    13   3      ; util
0283    TGETS   13  13  53  ; "printout"
0284    CALL    13   1   1
0285    GGET    13  55      ; "os"
0286    TGETS   13  13  56  ; "exit"
0287    UGET    14  14      ; cmd
0288    TGETS   14  14  57  ; "errorcodes"
0289    TGETS   14  14  58  ; "OK"
0290    CALL    13   1   2
0291 => TGETS   13   5   9  ; "command"
0292    TGETV   13   3  13
0293    GGET    14  59      ; "xpcall"
0294    FNEW    15  60      ; cmd.lua:620
0295    UGET    16  15      ; error_handler
0296    CALL    14   5   3
0297    IST         14
0298    JMP     18 => 0306
0299    UGET    18   5      ; die
0300    MOV     19  15
0301    UGET    20  14      ; cmd
0302    TGETS   20  20  57  ; "errorcodes"
0303    TGETS   20  20  61  ; "CRASH"
0304    CALL    18   1   3
0305    JMP     18 => 0312
0306 => IST         15
0307    JMP     18 => 0312
0308    UGET    18   5      ; die
0309    MOV     19  16
0310    MOV     20  17
0311    CALL    18   1   3
0312 => UGET    18   3      ; util
0313    TGETS   18  18  62  ; "run_scheduled_functions"
0314    CALL    18   1   1
0315    UCLO     0 => 0316
0316 => RET0     0   1

-- BYTECODE -- cmd.lua:0-633
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.manif"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.path"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.core.cfg"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.dir"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.fun"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.fs"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.argparse"
0025    CALL     8   2   2
0026    GGET     9   9      ; "table"
0027    TGETS    9   9  10  ; "unpack"
0028    IST          9
0029    JMP     10 => 0031
0030    GGET     9  10      ; "unpack"
0031 => GGET    10  11      ; "pcall"
0032    GGET    11   0      ; "require"
0033    KSTR    12  12      ; "luarocks.core.hardcoded"
0034    CALL    10   3   3
0035    IST         10
0036    JMP     12 => 0038
0037    TNEW    11   0
0038 => TGETS   12   2  13  ; "this_program"
0039    KSTR    13  14      ; "luarocks"
0040    CALL    12   2   2
0041    TDUP    13  16
0042    TSETS   13   0  15  ; "errorcodes"
0043    FNEW    13  17      ; cmd.lua:31
0044    KPRI    14   0
0045    FNEW    15  18      ; cmd.lua:46
0046    FNEW    16  19      ; cmd.lua:52
0047    FNEW    14  20      ; cmd.lua:64
0048    UCLO    15 => 0049
0049 => FNEW    15  21      ; cmd.lua:122
0050    FNEW    16  22      ; cmd.lua:147
0051    FNEW    17  23      ; cmd.lua:162
0052    FNEW    18  24      ; cmd.lua:175
0053    KNIL    19  20
0054    FNEW    21  25      ; cmd.lua:204
0055    FNEW    22  26      ; cmd.lua:221
0056    FNEW    23  27      ; cmd.lua:250
0057    FNEW    24  28      ; cmd.lua:258
0058    FNEW    20  29      ; cmd.lua:284
0059    UCLO    21 => 0060
0060 => FNEW    19  30      ; cmd.lua:301
0061    UCLO    20 => 0062
0062 => KSTR    20  31      ; "Variables:\n   Variables from the "varia"~
0063    FNEW    21  32      ; cmd.lua:320
0064    FNEW    22  33      ; cmd.lua:324
0065    FNEW    23  34      ; cmd.lua:354
0066    FNEW    24  36      ; cmd.lua:451
0067    TSETS   24   0  35  ; "run_command"
0068    UCLO     0 => 0069
0069 => RET1     0   2

-----------------------
-- BYTECODE -- remove.lua:18-41
0001    TNEW     3   0
0002    TNEW     4   0
0003    TNEW     5   0
0004    TSETV    5   4   0
0005    GGET     5   0      ; "pairs"
0006    MOV      6   1
0007    CALL     5   4   2
0008    ISNEXT   8 => 0012
0009 => TGETV   10   4   0
0010    KPRI    11   2
0011    TSETV   11  10   8
0012 => ITERN    8   3   3
0013    ITERL    8 => 0009
0014    TNEW     5   0
0015    UGET     6   0      ; queries
0016    TGETS    6   6   1  ; "all"
0017    CALL     6   2   1
0018    UGET     7   1      ; search
0019    TGETS    7   7   2  ; "local_manifest_search"
0020    MOV      8   5
0021    UGET     9   2      ; cfg
0022    TGETS    9   9   3  ; "rocks_dir"
0023    MOV     10   6
0024    CALL     7   1   4
0025    KPRI     7   0
0026    TSETV    7   5   0
0027    GGET     7   0      ; "pairs"
0028    MOV      8   5
0029    CALL     7   4   2
0030    ISNEXT  10 => 0064
0031 => GGET    12   0      ; "pairs"
0032    MOV     13  11
0033    CALL    12   4   2
0034    ISNEXT  15 => 0062
0035 => UGET    17   3      ; fetch
0036    TGETS   17  17   4  ; "load_rockspec"
0037    UGET    18   4      ; path
0038    TGETS   18  18   5  ; "rockspec_file"
0039    MOV     19  10
0040    MOV     20  15
0041    CALL    18   0   3
0042    CALLM   17   3   0
0043    ISF         17
0044    JMP     19 => 0062
0045    UGET    19   5      ; deps
0046    TGETS   19  19   6  ; "match_deps"
0047    TGETS   20  17   7  ; "dependencies"
0048    TGETS   21  17   8  ; "rocks_provided"
0049    MOV     22   4
0050    MOV     23   2
0051    CALL    19   3   5
0052    TGETV   21  20   0
0053    ISF         21
0054    JMP     22 => 0062
0055    GGET    21   9      ; "table"
0056    TGETS   21  21  10  ; "insert"
0057    MOV     22   3
0058    TDUP    23  11
0059    TSETS   10  23  12  ; "name"
0060    TSETS   15  23  13  ; "version"
0061    CALL    21   1   3
0062 => ITERN   15   3   3
0063    ITERL   15 => 0035
0064 => ITERN   10   3   3
0065    ITERL   10 => 0031
0066    RET1     3   2

-- BYTECODE -- remove.lua:50-59
0001    GGET     3   0      ; "pairs"
0002    MOV      4   1
0003    CALL     3   4   2
0004    ISNEXT   6 => 0025
0005 => UGET     8   0      ; util
0006    TGETS    8   8   1  ; "printout"
0007    KSTR     9   2      ; "Removing "
0008    MOV     10   0
0009    KSTR    11   3      ; " "
0010    MOV     12   6
0011    KSTR    13   4      ; "..."
0012    CAT      9   9  13
0013    CALL     8   1   2
0014    UGET     8   1      ; repos
0015    TGETS    8   8   5  ; "delete_version"
0016    MOV      9   0
0017    MOV     10   6
0018    MOV     11   2
0019    CALL     8   3   4
0020    IST          8
0021    JMP     10 => 0025
0022    KPRI    10   0
0023    MOV     11   9
0024    RET     10   3
0025 => ITERN    6   3   3
0026    ITERL    6 => 0005
0027    KPRI     3   2
0028    RET1     3   2

-- BYTECODE -- remove.lua:61-104
0001    TGETV    5   0   1
0002    GGET     6   0      ; "next"
0003    MOV      7   5
0004    CALL     6   2   2
0005    GGET     7   0      ; "next"
0006    MOV      8   5
0007    MOV      9   6
0008    CALL     7   2   3
0009    TNEW     8   0
0010    IST          4
0011    JMP      9 => 0040
0012    UGET     9   0      ; util
0013    TGETS    9   9   1  ; "printout"
0014    KSTR    10   2      ; "Checking stability of dependencies in th"~
0015    CALL     9   1   2
0016    UGET     9   0      ; util
0017    TGETS    9   9   1  ; "printout"
0018    MOV     10   1
0019    KSTR    11   3      ; " "
0020    GGET    12   4      ; "table"
0021    TGETS   12  12   5  ; "concat"
0022    UGET    13   0      ; util
0023    TGETS   13  13   6  ; "keys"
0024    MOV     14   5
0025    CALL    13   2   2
0026    KSTR    14   7      ; ", "
0027    CALL    12   2   3
0028    KSTR    13   8      ; "..."
0029    CAT     10  10  13
0030    CALL     9   1   2
0031    UGET     9   0      ; util
0032    TGETS    9   9   1  ; "printout"
0033    CALL     9   1   1
0034    UGET     9   1      ; check_dependents
0035    MOV     10   1
0036    MOV     11   5
0037    MOV     12   2
0038    CALL     9   2   4
0039    MOV      8   9
0040 => LEN      9   8
0041    KSHORT  10   0
0042    ISGE    10   9
0043    JMP      9 => 0119
0044    IST          3
0045    JMP      9 => 0048
0046    ISF          4
0047    JMP      9 => 0069
0048 => UGET     9   0      ; util
0049    TGETS    9   9   9  ; "printerr"
0050    KSTR    10  10      ; "The following packages may be broken by "~
0051    CALL     9   1   2
0052    GGET     9  11      ; "ipairs"
0053    MOV     10   8
0054    CALL     9   4   2
0055    JMP     12 => 0063
0056 => UGET    14   0      ; util
0057    TGETS   14  14   9  ; "printerr"
0058    TGETS   15  13  12  ; "name"
0059    KSTR    16   3      ; " "
0060    TGETS   17  13  13  ; "version"
0061    CAT     15  15  17
0062    CALL    14   1   2
0063 => ITERC   12   3   3
0064    ITERL   12 => 0056
0065    UGET     9   0      ; util
0066    TGETS    9   9   9  ; "printerr"
0067    CALL     9   1   1
0068    JMP      9 => 0119
0069 => IST          7
0070    JMP      9 => 0085
0071    UGET     9   0      ; util
0072    TGETS    9   9   9  ; "printerr"
0073    KSTR    10  14      ; "Will not remove "
0074    MOV     11   1
0075    KSTR    12   3      ; " "
0076    MOV     13   6
0077    KSTR    14  15      ; "."
0078    CAT     10  10  14
0079    CALL     9   1   2
0080    UGET     9   0      ; util
0081    TGETS    9   9   9  ; "printerr"
0082    KSTR    10  16      ; "Removing it would break dependencies for"~
0083    CALL     9   1   2
0084    JMP      9 => 0096
0085 => UGET     9   0      ; util
0086    TGETS    9   9   9  ; "printerr"
0087    KSTR    10  17      ; "Will not remove installed versions of "
0088    MOV     11   1
0089    KSTR    12  15      ; "."
0090    CAT     10  10  12
0091    CALL     9   1   2
0092    UGET     9   0      ; util
0093    TGETS    9   9   9  ; "printerr"
0094    KSTR    10  18      ; "Removing them would break dependencies f"~
0095    CALL     9   1   2
0096 => GGET     9  11      ; "ipairs"
0097    MOV     10   8
0098    CALL     9   4   2
0099    JMP     12 => 0107
0100 => UGET    14   0      ; util
0101    TGETS   14  14   9  ; "printerr"
0102    TGETS   15  13  12  ; "name"
0103    KSTR    16   3      ; " "
0104    TGETS   17  13  13  ; "version"
0105    CAT     15  15  17
0106    CALL    14   1   2
0107 => ITERC   12   3   3
0108    ITERL   12 => 0100
0109    UGET     9   0      ; util
0110    TGETS    9   9   9  ; "printerr"
0111    CALL     9   1   1
0112    UGET     9   0      ; util
0113    TGETS    9   9   9  ; "printerr"
0114    KSTR    10  19      ; "Use --force to force removal (warning: t"~
0115    CALL     9   1   2
0116    KPRI     9   0
0117    KSTR    10  20      ; "Failed removing."
0118    RET      9   3
0119 => UGET     9   2      ; delete_versions
0120    MOV     10   1
0121    MOV     11   5
0122    MOV     12   2
0123    CALL     9   3   4
0124    IST          9
0125    JMP     11 => 0129
0126    KPRI    11   0
0127    MOV     12  10
0128    RET     11   3
0129 => UGET    11   0      ; util
0130    TGETS   11  11   1  ; "printout"
0131    KSTR    12  21      ; "Removal successful."
0132    CALL    11   1   2
0133    KPRI    11   2
0134    RET1    11   2

-- BYTECODE -- remove.lua:106-114
0001    TNEW     4   0
0002    UGET     5   0      ; queries
0003    TGETS    5   5   0  ; "new"
0004    MOV      6   0
0005    KPRI     7   0
0006    MOV      8   1
0007    KPRI     9   1
0008    KPRI    10   0
0009    KSTR    11   1      ; "~="
0010    CALL     5   2   7
0011    UGET     6   1      ; search
0012    TGETS    6   6   2  ; "local_manifest_search"
0013    MOV      7   4
0014    UGET     8   2      ; cfg
0015    TGETS    8   8   3  ; "rocks_dir"
0016    MOV      9   5
0017    CALL     6   1   4
0018    TGETV    6   4   0
0019    ISF          6
0020    JMP      7 => 0030
0021    UGET     6   3      ; remove
0022    TGETS    6   6   4  ; "remove_search_results"
0023    MOV      7   4
0024    MOV      8   0
0025    UGET     9   2      ; cfg
0026    TGETS    9   9   5  ; "deps_mode"
0027    MOV     10   2
0028    MOV     11   3
0029    CALLT    6   6
0030 => KPRI     6   2
0031    RET1     6   2

-- BYTECODE -- remove.lua:0-117
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.search"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.deps"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.fetch"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.repos"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.path"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.util"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.core.cfg"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.queries"
0025    CALL     8   2   2
0026    FNEW     9   9      ; remove.lua:18
0027    FNEW    10  10      ; remove.lua:50
0028    FNEW    11  12      ; remove.lua:61
0029    TSETS   11   0  11  ; "remove_search_results"
0030    FNEW    11  14      ; remove.lua:106
0031    TSETS   11   0  13  ; "remove_other_versions"
0032    UCLO     0 => 0033
0033 => RET1     0   2

-----------------------
-- BYTECODE -- argparse.lua:23-33
0001    GGET     2   0      ; "pairs"
0002    MOV      3   1
0003    CALL     2   4   2
0004    ISNEXT   5 => 0016
0005 => GGET     7   1      ; "type"
0006    MOV      8   6
0007    CALL     7   2   2
0008    ISNES    7   2      ; "table"
0009    JMP      7 => 0015
0010    UGET     7   0      ; deep_update
0011    TNEW     8   0
0012    MOV      9   6
0013    CALL     7   2   3
0014    MOV      6   7
0015 => TSETV    6   0   5
0016 => ITERN    5   3   3
0017    ITERL    5 => 0005
0018    RET1     0   2

-- BYTECODE -- argparse.lua:56-62
0001    UGET     2   0      ; callback
0002    MOV      3   0
0003    MOV      4   1
0004    CALL     2   2   3
0005    IST          2
0006    JMP      2 => 0011
0007    KSTR     2   0      ; "_"
0008    UGET     3   1      ; name
0009    CAT      2   2   3
0010    TSETV    1   0   2
0011 => RET1     0   2

-- BYTECODE -- argparse.lua:67-94
0001    GGET     1   0      ; "type"
0002    VARG     2   2   1
0003    CALL     1   2   2
0004    ISNES    1   1      ; "table"
0005    JMP      1 => 0021
0006    GGET     1   2      ; "pairs"
0007    VARG     2   2   1
0008    CALL     1   4   2
0009    ISNEXT   4 => 0018
0010 => UGET     6   0      ; names
0011    TGETV    6   6   4
0012    ISF          6
0013    JMP      7 => 0018
0014    TGETV    6   0   4
0015    MOV      7   0
0016    MOV      8   5
0017    CALL     6   1   3
0018 => ITERN    4   3   3
0019    ITERL    4 => 0010
0020    JMP      1 => 0049
0021 => GGET     1   3      ; "select"
0022    KSTR     2   4      ; "#"
0023    VARG     3   0   1
0024    CALLM    1   2   1
0025    GGET     2   5      ; "ipairs"
0026    UGET     3   1      ; properties
0027    CALL     2   4   2
0028    JMP      5 => 0047
0029 => ISLT     1   5
0030    JMP      7 => 0049
0031    UGET     7   1      ; properties
0032    TGETS    7   7   6  ; "args"
0033    ISGE     7   5
0034    JMP      7 => 0036
0035    JMP      2 => 0049
0036 => GGET     7   3      ; "select"
0037    MOV      8   5
0038    VARG     9   0   1
0039    CALLM    7   2   1
0040    ISEQP    7   0
0041    JMP      8 => 0047
0042    TGETB    8   6   1
0043    TGETV    8   0   8
0044    MOV      9   0
0045    MOV     10   7
0046    CALL     8   1   3
0047 => ITERC    5   3   3
0048    ITERL    5 => 0029
0049 => RET1     0   2

-- BYTECODE -- argparse.lua:101-107
0001    UGET     1   0      ; deep_update
0002    TNEW     2   0
0003    TGETS    3   0   0  ; "__prototype"
0004    CALL     1   2   3
0005    GGET     2   1      ; "setmetatable"
0006    MOV      3   1
0007    MOV      4   0
0008    CALL     2   1   3
0009    MOV      2   1
0010    VARG     3   0   1
0011    CALLMT   2   0

-- BYTECODE -- argparse.lua:38-110
0001    TNEW     3   0
0002    TSETS    3   3   0  ; "__index"
0003    ISF          2
0004    JMP      4 => 0014
0005    UGET     4   0      ; deep_update
0006    UGET     5   0      ; deep_update
0007    TNEW     6   0
0008    TGETS    7   2   1  ; "__prototype"
0009    CALL     5   2   3
0010    MOV      6   0
0011    CALL     4   2   3
0012    TSETS    4   3   1  ; "__prototype"
0013    JMP      4 => 0015
0014 => TSETS    0   3   1  ; "__prototype"
0015 => ISF          1
0016    JMP      4 => 0034
0017    TNEW     4   0
0018    GGET     5   2      ; "ipairs"
0019    MOV      6   1
0020    CALL     5   4   2
0021    JMP      8 => 0029
0022 => TGETB   10   9   1
0023    TGETB   11   9   2
0024    FNEW    12   3      ; argparse.lua:56
0025    TSETV   12   3  10
0026    KPRI    12   2
0027    TSETV   12   4  10
0028    UCLO    10 => 0029
0029 => ITERC    8   3   3
0030    ITERL    8 => 0022
0031    FNEW     5   5      ; argparse.lua:67
0032    TSETS    5   3   4  ; "__call"
0033    UCLO     4 => 0034
0034 => TNEW     4   0
0035    TSETS    2   4   0  ; "__index"
0036    FNEW     5   6      ; argparse.lua:101
0037    TSETS    5   4   4  ; "__call"
0038    GGET     5   7      ; "setmetatable"
0039    MOV      6   3
0040    MOV      7   4
0041    UCLO     0 => 0042
0042 => CALLT    5   3

-- BYTECODE -- argparse.lua:112-120
0001    GGET     3   0      ; "ipairs"
0002    MOV      4   1
0003    CALL     3   4   2
0004    JMP      6 => 0012
0005 => GGET     8   1      ; "type"
0006    MOV      9   2
0007    CALL     8   2   2
0008    ISNEV    8   7
0009    JMP      8 => 0012
0010    KPRI     8   2
0011    RET1     8   2
0012 => ITERC    6   3   3
0013    ITERL    6 => 0005
0014    GGET     3   2      ; "error"
0015    KSTR     4   3      ; "bad property '%s' (%s expected, got %s)"
0016    MOV      5   4
0017    TGETS    4   4   4  ; "format"
0018    MOV      6   0
0019    GGET     7   5      ; "table"
0020    TGETS    7   7   6  ; "concat"
0021    MOV      8   1
0022    KSTR     9   7      ; " or "
0023    CALL     7   2   3
0024    GGET     8   1      ; "type"
0025    MOV      9   2
0026    CALL     8   0   2
0027    CALLM    4   0   3
0028    CALLM    3   1   0
0029    RET0     0   1

-- BYTECODE -- argparse.lua:124-124
0001    UGET     2   0      ; typecheck
0002    UGET     3   1      ; name
0003    UGET     4   2      ; types
0004    MOV      5   1
0005    CALL     2   1   4
0006    RET0     0   1

-- BYTECODE -- argparse.lua:122-125
0001    TNEW     1   3
0002    VARG     2   0   1
0003    TSETM    2   0      ; 1
0004    TNEW     2   3
0005    TSETB    0   2   1
0006    FNEW     3   0      ; argparse.lua:124
0007    TSETB    3   2   2
0008    UCLO     0 => 0009
0009 => RET1     2   2

-- BYTECODE -- argparse.lua:127-142
0001    UGET     2   0      ; typecheck
0002    KSTR     3   0      ; "name"
0003    TDUP     4   1
0004    MOV      5   1
0005    CALL     2   1   4
0006    MOV      3   1
0007    TGETS    2   1   2  ; "gmatch"
0008    KSTR     4   3      ; "%S+"
0009    CALL     2   4   3
0010    JMP      5 => 0043
0011 => TGETS    6   0   4  ; "_name"
0012    IST          6
0013    JMP      7 => 0015
0014    MOV      6   5
0015 => TSETS    6   0   4  ; "_name"
0016    GGET     6   5      ; "table"
0017    TGETS    6   6   6  ; "insert"
0018    TGETS    7   0   7  ; "_aliases"
0019    MOV      8   5
0020    CALL     6   1   3
0021    GGET     6   5      ; "table"
0022    TGETS    6   6   6  ; "insert"
0023    TGETS    7   0   8  ; "_public_aliases"
0024    MOV      8   5
0025    CALL     6   1   3
0026    MOV      7   5
0027    TGETS    6   5   9  ; "find"
0028    KSTR     8  10      ; "_"
0029    KSHORT   9   1
0030    KPRI    10   2
0031    CALL     6   2   5
0032    ISF          6
0033    JMP      7 => 0043
0034    GGET     6   5      ; "table"
0035    TGETS    6   6   6  ; "insert"
0036    TGETS    7   0   7  ; "_aliases"
0037    MOV      9   5
0038    TGETS    8   5  11  ; "gsub"
0039    KSTR    10  10      ; "_"
0040    KSTR    11  12      ; "-"
0041    CALL     8   2   4
0042    CALL     6   1   3
0043 => ITERC    5   2   3
0044    ITERL    5 => 0011
0045    KPRI     2   2
0046    RET1     2   2

-- BYTECODE -- argparse.lua:144-155
0001    UGET     2   0      ; typecheck
0002    KSTR     3   0      ; "hidden_name"
0003    TDUP     4   1
0004    MOV      5   1
0005    CALL     2   1   4
0006    MOV      3   1
0007    TGETS    2   1   2  ; "gmatch"
0008    KSTR     4   3      ; "%S+"
0009    CALL     2   4   3
0010    JMP      5 => 0033
0011 => GGET     6   4      ; "table"
0012    TGETS    6   6   5  ; "insert"
0013    TGETS    7   0   6  ; "_aliases"
0014    MOV      8   5
0015    CALL     6   1   3
0016    MOV      7   5
0017    TGETS    6   5   7  ; "find"
0018    KSTR     8   8      ; "_"
0019    KSHORT   9   1
0020    KPRI    10   2
0021    CALL     6   2   5
0022    ISF          6
0023    JMP      7 => 0033
0024    GGET     6   4      ; "table"
0025    TGETS    6   6   5  ; "insert"
0026    TGETS    7   0   6  ; "_aliases"
0027    MOV      9   5
0028    TGETS    8   5   9  ; "gsub"
0029    KSTR    10   8      ; "_"
0030    KSTR    11  10      ; "-"
0031    CALL     8   2   4
0032    CALL     6   1   3
0033 => ITERC    5   2   3
0034    ITERL    5 => 0011
0035    KPRI     2   2
0036    RET1     2   2

-- BYTECODE -- argparse.lua:157-183
0001    GGET     1   0      ; "tonumber"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISF          1
0005    JMP      2 => 0013
0006    GGET     1   0      ; "tonumber"
0007    MOV      2   0
0008    CALL     1   2   2
0009    GGET     2   0      ; "tonumber"
0010    MOV      3   0
0011    CALL     2   0   2
0012    RETM     1   1
0013 => ISNES    0   1      ; "*"
0014    JMP      1 => 0019
0015    KSHORT   1   0
0016    GGET     2   2      ; "math"
0017    TGETS    2   2   3  ; "huge"
0018    RET      1   3
0019 => ISNES    0   4      ; "+"
0020    JMP      1 => 0025
0021    KSHORT   1   1
0022    GGET     2   2      ; "math"
0023    TGETS    2   2   3  ; "huge"
0024    RET      1   3
0025 => ISNES    0   5      ; "?"
0026    JMP      1 => 0030
0027    KSHORT   1   0
0028    KSHORT   2   1
0029    RET      1   3
0030 => MOV      2   0
0031    TGETS    1   0   6  ; "match"
0032    KSTR     3   7      ; "^%d+%-%d+$"
0033    CALL     1   2   3
0034    ISF          1
0035    JMP      2 => 0047
0036    MOV      2   0
0037    TGETS    1   0   6  ; "match"
0038    KSTR     3   8      ; "^(%d+)%-(%d+)$"
0039    CALL     1   3   3
0040    GGET     3   0      ; "tonumber"
0041    MOV      4   1
0042    CALL     3   2   2
0043    GGET     4   0      ; "tonumber"
0044    MOV      5   2
0045    CALL     4   0   2
0046    RETM     3   1
0047 => MOV      2   0
0048    TGETS    1   0   6  ; "match"
0049    KSTR     3   9      ; "^%d+%+$"
0050    CALL     1   2   3
0051    ISF          1
0052    JMP      2 => 0063
0053    MOV      2   0
0054    TGETS    1   0   6  ; "match"
0055    KSTR     3  10      ; "^(%d+)%+$"
0056    CALL     1   2   3
0057    GGET     2   0      ; "tonumber"
0058    MOV      3   1
0059    CALL     2   2   2
0060    GGET     3   2      ; "math"
0061    TGETS    3   3   3  ; "huge"
0062    RET      2   3
0063 => RET0     0   1

-- BYTECODE -- argparse.lua:186-196
0001    UGET     2   0      ; typecheck
0002    UGET     3   1      ; name
0003    TDUP     4   0
0004    MOV      5   1
0005    CALL     2   1   4
0006    UGET     2   2      ; parse_boundaries
0007    MOV      3   1
0008    CALL     2   3   2
0009    IST          2
0010    JMP      4 => 0018
0011    GGET     4   1      ; "error"
0012    KSTR     5   2      ; "bad property '%s'"
0013    MOV      6   5
0014    TGETS    5   5   3  ; "format"
0015    UGET     7   1      ; name
0016    CALL     5   0   3
0017    CALLM    4   1   0
0018 => KSTR     4   4      ; "_min"
0019    UGET     5   1      ; name
0020    CAT      4   4   5
0021    KSTR     5   5      ; "_max"
0022    UGET     6   1      ; name
0023    CAT      5   5   6
0024    MOV      6   2
0025    TSETV    3   0   5
0026    TSETV    6   0   4
0027    RET0     0   1

-- BYTECODE -- argparse.lua:185-197
0001    TNEW     1   3
0002    TSETB    0   1   1
0003    FNEW     2   0      ; argparse.lua:186
0004    TSETB    2   1   2
0005    UCLO     0 => 0006
0006 => RET1     1   2

-- BYTECODE -- argparse.lua:201-207
0001    UGET     2   0      ; typecheck
0002    KSTR     3   0      ; "action"
0003    TDUP     4   1
0004    MOV      5   1
0005    CALL     2   1   4
0006    GGET     2   2      ; "type"
0007    MOV      3   1
0008    CALL     2   2   2
0009    ISNES    2   3      ; "string"
0010    JMP      2 => 0022
0011    UGET     2   1      ; actions
0012    TGETV    2   2   1
0013    IST          2
0014    JMP      2 => 0022
0015    GGET     2   4      ; "error"
0016    KSTR     3   5      ; "unknown action '%s'"
0017    MOV      4   3
0018    TGETS    3   3   6  ; "format"
0019    MOV      5   1
0020    CALL     3   0   3
0021    CALLM    2   1   0
0022 => RET0     0   1

-- BYTECODE -- argparse.lua:209-211
0001    KPRI     1   2
0002    TSETS    1   0   0  ; "_has_init"
0003    RET0     0   1

-- BYTECODE -- argparse.lua:213-219
0001    GGET     2   0      ; "type"
0002    MOV      3   1
0003    CALL     2   2   2
0004    ISEQS    2   1      ; "string"
0005    JMP      2 => 0011
0006    TSETS    1   0   2  ; "_init"
0007    KPRI     2   2
0008    TSETS    2   0   3  ; "_has_init"
0009    KPRI     2   2
0010    RET1     2   2
0011 => RET0     0   1

-- BYTECODE -- argparse.lua:232-235
0001    GGET     0   0      ; "print"
0002    UGET     1   0      ; self
0003    MOV      2   1
0004    TGETS    1   1   1  ; "get_help"
0005    CALL     1   0   2
0006    CALLM    0   1   0
0007    GGET     0   2      ; "os"
0008    TGETS    0   0   3  ; "exit"
0009    KSHORT   1   0
0010    CALL     0   1   2
0011    RET0     0   1

-- BYTECODE -- argparse.lua:221-247
0001    UGET     2   0      ; typecheck
0002    KSTR     3   0      ; "add_help"
0003    TDUP     4   1
0004    MOV      5   1
0005    CALL     2   1   4
0006    TGETS    2   0   2  ; "_help_option_idx"
0007    ISF          2
0008    JMP      3 => 0016
0009    GGET     2   3      ; "table"
0010    TGETS    2   2   4  ; "remove"
0011    TGETS    3   0   5  ; "_options"
0012    TGETS    4   0   2  ; "_help_option_idx"
0013    CALL     2   1   3
0014    KPRI     2   0
0015    TSETS    2   0   2  ; "_help_option_idx"
0016 => ISF          1
0017    JMP      2 => 0046
0018    MOV      3   0
0019    TGETS    2   0   6  ; "flag"
0020    CALL     2   2   2
0021    MOV      3   2
0022    TGETS    2   2   7  ; "description"
0023    KSTR     4   8      ; "Show this help message and exit."
0024    CALL     2   2   3
0025    MOV      3   2
0026    TGETS    2   2   9  ; "action"
0027    FNEW     4  10      ; argparse.lua:232
0028    CALL     2   2   3
0029    ISEQP    1   2
0030    JMP      3 => 0035
0031    MOV      3   2
0032    MOV      4   1
0033    CALL     3   2   2
0034    MOV      2   3
0035 => TGETS    3   2  11  ; "_name"
0036    IST          3
0037    JMP      3 => 0043
0038    MOV      3   2
0039    KSTR     4  12      ; "-h"
0040    CALL     3   2   2
0041    KSTR     4  13      ; "--help"
0042    CALL     3   1   2
0043 => TGETS    3   0   5  ; "_options"
0044    LEN      3   3
0045    TSETS    3   0   2  ; "_help_option_idx"
0046 => UCLO     0 => 0047
0047 => RET0     0   1

-- BYTECODE -- argparse.lua:353-369
0001    MOV      3   0
0002 => LOOP     4 => 0016
0003    KSTR     4   0      ; "_"
0004    MOV      5   1
0005    CAT      4   4   5
0006    TGETV    4   3   4
0007    ISEQP    4   0
0008    JMP      5 => 0010
0009    RET1     4   2
0010 => TGETS    5   3   1  ; "_parent"
0011    IST          5
0012    JMP      5 => 0014
0013    RET1     2   2
0014 => TGETS    3   3   1  ; "_parent"
0015    JMP      4 => 0002
0016 => RET0     0   1

-- BYTECODE -- argparse.lua:371-400
0001    TNEW     1   0
0002    KSHORT   2   1
0003 => GGET     3   0      ; "math"
0004    TGETS    3   3   1  ; "min"
0005    TGETS    4   0   2  ; "_minargs"
0006    KSHORT   5   3
0007    CALL     3   2   3
0008    ISGT     2   3
0009    JMP      3 => 0036
0010    LOOP     3 => 0036
0011    MOV      4   0
0012    TGETS    3   0   3  ; "_get_argname"
0013    MOV      5   2
0014    CALL     3   2   3
0015    TGETS    4   0   4  ; "_default"
0016    ISF          4
0017    JMP      5 => 0029
0018    TGETS    4   0   5  ; "_defmode"
0019    MOV      5   4
0020    TGETS    4   4   6  ; "find"
0021    KSTR     6   7      ; "a"
0022    CALL     4   2   3
0023    ISF          4
0024    JMP      5 => 0029
0025    KSTR     4   8      ; "["
0026    MOV      5   3
0027    KSTR     6   9      ; "]"
0028    CAT      3   4   6
0029 => GGET     4  10      ; "table"
0030    TGETS    4   4  11  ; "insert"
0031    MOV      5   1
0032    MOV      6   3
0033    CALL     4   1   3
0034    ADDVN    2   2   0  ; 1
0035    JMP      3 => 0003
0036 => GGET     3   0      ; "math"
0037    TGETS    3   3   1  ; "min"
0038    TGETS    4   0  12  ; "_maxargs"
0039    KSHORT   5   3
0040    CALL     3   2   3
0041    ISGT     2   3
0042    JMP      3 => 0063
0043    LOOP     3 => 0063
0044    GGET     3  10      ; "table"
0045    TGETS    3   3  11  ; "insert"
0046    MOV      4   1
0047    KSTR     5   8      ; "["
0048    MOV      7   0
0049    TGETS    6   0   3  ; "_get_argname"
0050    MOV      8   2
0051    CALL     6   2   3
0052    KSTR     7   9      ; "]"
0053    CAT      5   5   7
0054    CALL     3   1   3
0055    ADDVN    2   2   0  ; 1
0056    TGETS    3   0  12  ; "_maxargs"
0057    GGET     4   0      ; "math"
0058    TGETS    4   4  13  ; "huge"
0059    ISNEV    3   4
0060    JMP      3 => 0036
0061    JMP      3 => 0063
0062    JMP      3 => 0036
0063 => TGETS    3   0  12  ; "_maxargs"
0064    ISGE     2   3
0065    JMP      3 => 0071
0066    GGET     3  10      ; "table"
0067    TGETS    3   3  11  ; "insert"
0068    MOV      4   1
0069    KSTR     5  14      ; "..."
0070    CALL     3   1   3
0071 => RET1     1   2

-- BYTECODE -- argparse.lua:402-412
0001    GGET     1   0      ; "table"
0002    TGETS    1   1   1  ; "concat"
0003    MOV      3   0
0004    TGETS    2   0   2  ; "_get_argument_list"
0005    CALL     2   2   2
0006    KSTR     3   3      ; " "
0007    CALL     1   2   3
0008    TGETS    2   0   4  ; "_default"
0009    ISF          2
0010    JMP      3 => 0036
0011    TGETS    2   0   5  ; "_defmode"
0012    MOV      3   2
0013    TGETS    2   2   6  ; "find"
0014    KSTR     4   7      ; "u"
0015    CALL     2   2   3
0016    ISF          2
0017    JMP      3 => 0036
0018    TGETS    2   0   8  ; "_maxargs"
0019    KSHORT   3   1
0020    ISLT     3   2
0021    JMP      2 => 0032
0022    TGETS    2   0   9  ; "_minargs"
0023    ISNEN    2   0      ; 1
0024    JMP      2 => 0036
0025    TGETS    2   0   5  ; "_defmode"
0026    MOV      3   2
0027    TGETS    2   2   6  ; "find"
0028    KSTR     4  10      ; "a"
0029    CALL     2   2   3
0030    IST          2
0031    JMP      2 => 0036
0032 => KSTR     2  11      ; "["
0033    MOV      3   1
0034    KSTR     4  12      ; "]"
0035    CAT      1   2   4
0036 => RET1     1   2

-- BYTECODE -- argparse.lua:414-416
0001    KPRI     2   2
0002    TSETV    2   0   1
0003    RET0     0   1

-- BYTECODE -- argparse.lua:418-420
0001    KPRI     2   1
0002    TSETV    2   0   1
0003    RET0     0   1

-- BYTECODE -- argparse.lua:422-424
0001    TSETV    2   0   1
0002    RET0     0   1

-- BYTECODE -- argparse.lua:426-430
0001    IST          3
0002    JMP      4 => 0006
0003    TGETV    4   0   1
0004    ADDVN    4   4   0  ; 1
0005    TSETV    4   0   1
0006 => RET0     0   1

-- BYTECODE -- argparse.lua:432-439
0001    TGETV    4   0   1
0002    IST          4
0003    JMP      5 => 0005
0004    TNEW     4   0
0005 => TSETV    4   0   1
0006    GGET     4   0      ; "table"
0007    TGETS    4   4   1  ; "insert"
0008    TGETV    5   0   1
0009    MOV      6   2
0010    CALL     4   1   3
0011    ISF          3
0012    JMP      4 => 0018
0013    GGET     4   0      ; "table"
0014    TGETS    4   4   2  ; "remove"
0015    TGETV    5   0   1
0016    KSHORT   6   1
0017    CALL     4   1   3
0018 => RET0     0   1

-- BYTECODE -- argparse.lua:441-451
0001    ISF          3
0002    JMP      4 => 0006
0003    GGET     4   0      ; "error"
0004    KSTR     5   1      ; "'concat' action can't handle too many in"~
0005    CALL     4   1   2
0006 => TGETV    4   0   1
0007    IST          4
0008    JMP      5 => 0010
0009    TNEW     4   0
0010 => TSETV    4   0   1
0011    GGET     4   2      ; "ipairs"
0012    MOV      5   2
0013    CALL     4   4   2
0014    JMP      7 => 0020
0015 => GGET     9   3      ; "table"
0016    TGETS    9   9   4  ; "insert"
0017    TGETV   10   0   1
0018    MOV     11   8
0019    CALL     9   1   3
0020 => ITERC    7   3   3
0021    ITERL    7 => 0015
0022    RET0     0   1

-- BYTECODE -- argparse.lua:453-483
0001    KNIL     1   2
0002    TGETS    3   0   0  ; "_maxcount"
0003    ISNEN    3   0      ; 1
0004    JMP      3 => 0016
0005    TGETS    3   0   1  ; "_maxargs"
0006    ISNEN    3   1      ; 0
0007    JMP      3 => 0012
0008    KSTR     3   2      ; "store_true"
0009    KPRI     2   0
0010    MOV      1   3
0011    JMP      3 => 0026
0012 => KSTR     3   3      ; "store"
0013    KPRI     2   0
0014    MOV      1   3
0015    JMP      3 => 0026
0016 => TGETS    3   0   1  ; "_maxargs"
0017    ISNEN    3   1      ; 0
0018    JMP      3 => 0023
0019    KSTR     3   4      ; "count"
0020    KSHORT   2   0
0021    MOV      1   3
0022    JMP      3 => 0026
0023 => KSTR     3   5      ; "append"
0024    TNEW     2   0
0025    MOV      1   3
0026 => TGETS    3   0   6  ; "_action"
0027    ISF          3
0028    JMP      4 => 0030
0029    TGETS    1   0   6  ; "_action"
0030 => TGETS    3   0   7  ; "_has_init"
0031    ISF          3
0032    JMP      4 => 0034
0033    TGETS    2   0   8  ; "_init"
0034 => GGET     3   9      ; "type"
0035    MOV      4   1
0036    CALL     3   2   2
0037    ISNES    3  10      ; "string"
0038    JMP      3 => 0041
0039    UGET     3   0      ; actions
0040    TGETV    1   3   1
0041 => MOV      3   1
0042    MOV      4   2
0043    RET      3   3

-- BYTECODE -- argparse.lua:486-494
0001    TGETS    2   0   0  ; "_argname"
0002    IST          2
0003    JMP      3 => 0007
0004    MOV      3   0
0005    TGETS    2   0   1  ; "_get_default_argname"
0006    CALL     2   2   2
0007 => GGET     3   2      ; "type"
0008    MOV      4   2
0009    CALL     3   2   2
0010    ISNES    3   3      ; "table"
0011    JMP      3 => 0015
0012    TGETV    3   2   1
0013    RET1     3   2
0014    JMP      3 => 0016
0015 => RET1     2   2
0016 => RET0     0   1

-- BYTECODE -- argparse.lua:496-498
0001    KSTR     1   0      ; "{"
0002    GGET     2   1      ; "table"
0003    TGETS    2   2   2  ; "concat"
0004    TGETS    3   0   3  ; "_choices"
0005    KSTR     4   4      ; ","
0006    CALL     2   2   3
0007    KSTR     3   5      ; "}"
0008    CAT      1   1   3
0009    RET1     1   2

-- BYTECODE -- argparse.lua:500-506
0001    TGETS    1   0   0  ; "_choices"
0002    ISF          1
0003    JMP      2 => 0008
0004    MOV      2   0
0005    TGETS    1   0   1  ; "_get_choices_list"
0006    CALLT    1   2
0007    JMP      1 => 0013
0008 => KSTR     1   2      ; "<"
0009    TGETS    2   0   3  ; "_name"
0010    KSTR     3   4      ; ">"
0011    CAT      1   1   3
0012    RET1     1   2
0013 => RET0     0   1

-- BYTECODE -- argparse.lua:508-514
0001    TGETS    1   0   0  ; "_choices"
0002    ISF          1
0003    JMP      2 => 0008
0004    MOV      2   0
0005    TGETS    1   0   1  ; "_get_choices_list"
0006    CALLT    1   2
0007    JMP      1 => 0015
0008 => KSTR     1   2      ; "<"
0009    MOV      3   0
0010    TGETS    2   0   3  ; "_get_default_target"
0011    CALL     2   2   2
0012    KSTR     3   4      ; ">"
0013    CAT      1   1   3
0014    RET1     1   2
0015 => RET0     0   1

-- BYTECODE -- argparse.lua:517-523
0001    TGETS    1   0   0  ; "_choices"
0002    ISF          1
0003    JMP      2 => 0011
0004    TNEW     1   3
0005    MOV      3   0
0006    TGETS    2   0   1  ; "_get_choices_list"
0007    CALL     2   0   2
0008    TSETM    2   0      ; 1
0009    RET1     1   2
0010    JMP      1 => 0015
0011 => TNEW     1   3
0012    TGETS    2   0   2  ; "_name"
0013    TSETB    2   1   1
0014    RET1     1   2
0015 => RET0     0   1

-- BYTECODE -- argparse.lua:525-553
0001    MOV      2   0
0002    TGETS    1   0   0  ; "_get_argument_list"
0003    CALL     1   2   2
0004    LEN      2   1
0005    ISNEN    2   0      ; 0
0006    JMP      2 => 0015
0007    TNEW     2   3
0008    GGET     3   1      ; "table"
0009    TGETS    3   3   2  ; "concat"
0010    TGETS    4   0   3  ; "_public_aliases"
0011    KSTR     5   4      ; ", "
0012    CALL     3   0   3
0013    TSETM    3   1      ; 1
0014    RET1     2   2
0015 => KSHORT   2  -1
0016    GGET     3   5      ; "ipairs"
0017    TGETS    4   0   3  ; "_public_aliases"
0018    CALL     3   4   2
0019    JMP      6 => 0026
0020 => GGET     8   6      ; "math"
0021    TGETS    8   8   7  ; "max"
0022    MOV      9   2
0023    LEN     10   7
0024    CALL     8   2   3
0025    MOV      2   8
0026 => ITERC    6   3   3
0027    ITERL    6 => 0020
0028    GGET     3   1      ; "table"
0029    TGETS    3   3   2  ; "concat"
0030    MOV      4   1
0031    KSTR     5   8      ; " "
0032    CALL     3   2   3
0033    TNEW     4   0
0034    GGET     5   5      ; "ipairs"
0035    TGETS    6   0   3  ; "_public_aliases"
0036    CALL     5   4   2
0037    JMP      8 => 0060
0038 => KSTR    10   8      ; " "
0039    MOV     11  10
0040    TGETS   10  10   9  ; "rep"
0041    LEN     12   9
0042    SUBVV   12   2  12
0043    CALL    10   2   3
0044    MOV     11   9
0045    KSTR    12   8      ; " "
0046    MOV     13   3
0047    CAT     10  10  13
0048    TGETS   11   0   3  ; "_public_aliases"
0049    LEN     11  11
0050    ISEQV    8  11
0051    JMP     11 => 0055
0052    MOV     11  10
0053    KSTR    12  10      ; ","
0054    CAT     10  11  12
0055 => GGET    11   1      ; "table"
0056    TGETS   11  11  11  ; "insert"
0057    MOV     12   4
0058    MOV     13  10
0059    CALL    11   1   3
0060 => ITERC    8   3   3
0061    ITERL    8 => 0038
0062    RET1     4   2

-- BYTECODE -- argparse.lua:555-557
0001    TNEW     1   3
0002    GGET     2   0      ; "table"
0003    TGETS    2   2   1  ; "concat"
0004    TGETS    3   0   2  ; "_public_aliases"
0005    KSTR     4   3      ; ", "
0006    CALL     2   0   3
0007    TSETM    2   0      ; 1
0008    RET1     1   2

-- BYTECODE -- argparse.lua:559-569
0001    TGETS    1   0   0  ; "_default"
0002    ISF          1
0003    JMP      2 => 0023
0004    TGETS    1   0   1  ; "_show_default"
0005    ISF          1
0006    JMP      2 => 0023
0007    TGETS    1   0   2  ; "_description"
0008    ISF          1
0009    JMP      2 => 0017
0010    KSTR     1   3      ; "%s (default: %s)"
0011    MOV      2   1
0012    TGETS    1   1   4  ; "format"
0013    TGETS    3   0   2  ; "_description"
0014    TGETS    4   0   0  ; "_default"
0015    CALLT    1   4
0016    JMP      1 => 0028
0017 => KSTR     1   5      ; "default: %s"
0018    MOV      2   1
0019    TGETS    1   1   4  ; "format"
0020    TGETS    3   0   0  ; "_default"
0021    CALLT    1   3
0022    JMP      1 => 0028
0023 => TGETS    1   0   2  ; "_description"
0024    IST          1
0025    JMP      2 => 0027
0026    KSTR     1   6      ; ""
0027 => RET1     1   2
0028 => RET0     0   1

-- BYTECODE -- argparse.lua:571-573
0001    TGETS    1   0   0  ; "_summary"
0002    IST          1
0003    JMP      2 => 0008
0004    TGETS    1   0   1  ; "_description"
0005    IST          1
0006    JMP      2 => 0008
0007    KSTR     1   2      ; ""
0008 => RET1     1   2

-- BYTECODE -- argparse.lua:575-585
0001    MOV      2   0
0002    TGETS    1   0   0  ; "_get_argument_list"
0003    CALL     1   2   2
0004    GGET     2   1      ; "table"
0005    TGETS    2   2   2  ; "insert"
0006    MOV      3   1
0007    KSHORT   4   1
0008    TGETS    5   0   3  ; "_name"
0009    CALL     2   1   4
0010    GGET     2   1      ; "table"
0011    TGETS    2   2   4  ; "concat"
0012    MOV      3   1
0013    KSTR     4   5      ; " "
0014    CALL     2   2   3
0015    MOV      1   2
0016    TGETS    2   0   6  ; "_mincount"
0017    ISEQN    2   0      ; 0
0018    JMP      2 => 0022
0019    TGETS    2   0   7  ; "_default"
0020    ISF          2
0021    JMP      3 => 0026
0022 => KSTR     2   8      ; "["
0023    MOV      3   1
0024    KSTR     4   9      ; "]"
0025    CAT      1   2   4
0026 => RET1     1   2

-- BYTECODE -- argparse.lua:587-589
0001    TGETS    1   0   0  ; "_name"
0002    RET1     1   2

-- BYTECODE -- argparse.lua:591-603
0001    KPRI     1   0
0002    GGET     2   0      ; "ipairs"
0003    TGETS    3   0   1  ; "_public_aliases"
0004    CALL     2   4   2
0005    JMP      5 => 0024
0006 => MOV      8   6
0007    TGETS    7   6   2  ; "sub"
0008    KSHORT   9   1
0009    KSHORT  10   1
0010    CALL     7   2   4
0011    MOV      9   6
0012    TGETS    8   6   2  ; "sub"
0013    KSHORT  10   2
0014    KSHORT  11   2
0015    CALL     8   2   4
0016    ISNEV    7   8
0017    JMP      7 => 0024
0018    MOV      8   6
0019    TGETS    7   6   2  ; "sub"
0020    KSHORT   9   3
0021    CALL     7   2   3
0022    MOV      1   7
0023    JMP      2 => 0026
0024 => ITERC    5   3   3
0025    ITERL    5 => 0006
0026 => IST          1
0027    JMP      2 => 0034
0028    TGETS    2   0   3  ; "_name"
0029    MOV      3   2
0030    TGETS    2   2   2  ; "sub"
0031    KSHORT   4   2
0032    CALL     2   2   3
0033    MOV      1   2
0034 => MOV      3   1
0035    TGETS    2   1   4  ; "gsub"
0036    KSTR     4   5      ; "-"
0037    KSTR     5   6      ; "_"
0038    CALL     2   2   4
0039    RET1     2   2

-- BYTECODE -- argparse.lua:605-607
0001    TGETS    1   0   0  ; "_maxargs"
0002    TGETS    2   0   1  ; "_minargs"
0003    ISNEV    1   2
0004    JMP      1 => 0007
0005    KPRI     1   1
0006    JMP      2 => 0008
0007 => KPRI     1   2
0008 => RET1     1   2

-- BYTECODE -- argparse.lua:609-624
0001    TGETS    2   0   0  ; "_parent"
0002    ISF          1
0003    JMP      3 => 0008
0004    IST          2
0005    JMP      3 => 0008
0006    KSTR     3   1      ; ""
0007    RET1     3   2
0008 => TNEW     3   3
0009    TGETS    4   0   2  ; "_name"
0010    TSETB    4   3   1
0011 => ISF          2
0012    JMP      4 => 0027
0013    LOOP     4 => 0027
0014    ISF          1
0015    JMP      4 => 0019
0016    TGETS    4   2   0  ; "_parent"
0017    ISF          4
0018    JMP      5 => 0025
0019 => GGET     4   3      ; "table"
0020    TGETS    4   4   4  ; "insert"
0021    MOV      5   3
0022    KSHORT   6   1
0023    TGETS    7   2   2  ; "_name"
0024    CALL     4   1   4
0025 => TGETS    2   2   0  ; "_parent"
0026    JMP      4 => 0011
0027 => GGET     4   3      ; "table"
0028    TGETS    4   4   5  ; "concat"
0029    MOV      5   3
0030    KSTR     6   6      ; " "
0031    CALLT    4   3

-- BYTECODE -- argparse.lua:626-640
0001    IST          1
0002    JMP      2 => 0004
0003    TNEW     1   0
0004 => GGET     2   0      ; "ipairs"
0005    TGETS    3   0   1  ; "_commands"
0006    CALL     2   4   2
0007    JMP      5 => 0012
0008 => MOV      8   6
0009    TGETS    7   6   2  ; "_update_charset"
0010    MOV      9   1
0011    CALL     7   1   3
0012 => ITERC    5   3   3
0013    ITERL    5 => 0008
0014    GGET     2   0      ; "ipairs"
0015    TGETS    3   0   3  ; "_options"
0016    CALL     2   4   2
0017    JMP      5 => 0031
0018 => GGET     7   0      ; "ipairs"
0019    TGETS    8   6   4  ; "_aliases"
0020    CALL     7   4   2
0021    JMP     10 => 0029
0022 => MOV     13  11
0023    TGETS   12  11   5  ; "sub"
0024    KSHORT  14   1
0025    KSHORT  15   1
0026    CALL    12   2   4
0027    KPRI    13   2
0028    TSETV   13   1  12
0029 => ITERC   10   3   3
0030    ITERL   10 => 0022
0031 => ITERC    5   3   3
0032    ITERL    5 => 0018
0033    RET1     1   2

-- BYTECODE -- argparse.lua:642-646
0001    UGET     1   0      ; Argument
0002    VARG     2   0   1
0003    CALLM    1   2   0
0004    GGET     2   0      ; "table"
0005    TGETS    2   2   1  ; "insert"
0006    TGETS    3   0   2  ; "_arguments"
0007    MOV      4   1
0008    CALL     2   1   3
0009    RET1     1   2

-- BYTECODE -- argparse.lua:648-652
0001    UGET     1   0      ; Option
0002    VARG     2   0   1
0003    CALLM    1   2   0
0004    GGET     2   0      ; "table"
0005    TGETS    2   2   1  ; "insert"
0006    TGETS    3   0   2  ; "_options"
0007    MOV      4   1
0008    CALL     2   1   3
0009    RET1     1   2

-- BYTECODE -- argparse.lua:654-656
0001    MOV      2   0
0002    TGETS    1   0   0  ; "option"
0003    CALL     1   2   2
0004    MOV      2   1
0005    TGETS    1   1   1  ; "args"
0006    KSHORT   3   0
0007    CALL     1   2   3
0008    VARG     2   0   1
0009    CALLMT   1   0

-- BYTECODE -- argparse.lua:658-663
0001    UGET     1   0      ; Command
0002    CALL     1   2   1
0003    MOV      2   1
0004    TGETS    1   1   0  ; "add_help"
0005    KPRI     3   2
0006    CALL     1   2   3
0007    VARG     2   0   1
0008    CALLM    1   2   0
0009    TSETS    0   1   1  ; "_parent"
0010    GGET     2   2      ; "table"
0011    TGETS    2   2   3  ; "insert"
0012    TGETS    3   0   4  ; "_commands"
0013    MOV      4   1
0014    CALL     2   1   3
0015    RET1     1   2

-- BYTECODE -- argparse.lua:665-675
0001    TNEW     1   3
0002    VARG     2   0   1
0003    TSETM    2   0      ; 1
0004    GGET     2   0      ; "ipairs"
0005    MOV      3   1
0006    CALL     2   4   2
0007    JMP      5 => 0027
0008 => GGET     7   1      ; "getmetatable"
0009    MOV      8   6
0010    CALL     7   2   2
0011    GGET     8   2      ; "assert"
0012    UGET     9   0      ; Option
0013    ISEQV    7   9
0014    JMP      9 => 0020
0015    UGET     9   1      ; Argument
0016    ISEQV    7   9
0017    JMP      9 => 0020
0018    KPRI     9   1
0019    JMP     10 => 0021
0020 => KPRI     9   2
0021 => KSTR    10   3      ; "bad argument #%d to 'mutex' (Option or A"~
0022    MOV     11  10
0023    TGETS   10  10   4  ; "format"
0024    MOV     12   5
0025    CALL    10   0   3
0026    CALLM    8   1   1
0027 => ITERC    5   3   3
0028    ITERL    5 => 0008
0029    GGET     2   5      ; "table"
0030    TGETS    2   2   6  ; "insert"
0031    TGETS    3   0   7  ; "_mutexes"
0032    MOV      4   1
0033    CALL     2   1   3
0034    RET1     0   2

-- BYTECODE -- argparse.lua:677-690
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   1
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => KSTR     4   3      ; "bad argument #1 to 'group' (string expec"~
0011    MOV      5   4
0012    TGETS    4   4   4  ; "format"
0013    GGET     6   1      ; "type"
0014    MOV      7   1
0015    CALL     6   0   2
0016    CALLM    4   0   1
0017    CALLM    2   1   1
0018    TDUP     2   5
0019    TSETS    1   2   6  ; "name"
0020    VARG     3   0   2
0021    TSETM    3   0      ; 1
0022    GGET     3   7      ; "ipairs"
0023    MOV      4   2
0024    CALL     3   4   2
0025    JMP      6 => 0048
0026 => GGET     8   8      ; "getmetatable"
0027    MOV      9   7
0028    CALL     8   2   2
0029    GGET     9   0      ; "assert"
0030    UGET    10   0      ; Option
0031    ISEQV    8  10
0032    JMP     10 => 0041
0033    UGET    10   1      ; Argument
0034    ISEQV    8  10
0035    JMP     10 => 0041
0036    UGET    10   2      ; Command
0037    ISEQV    8  10
0038    JMP     10 => 0041
0039    KPRI    10   1
0040    JMP     11 => 0042
0041 => KPRI    10   2
0042 => KSTR    11   9      ; "bad argument #%d to 'group' (Option or A"~
0043    MOV     12  11
0044    TGETS   11  11   4  ; "format"
0045    ADDVN   13   6   1  ; 1
0046    CALL    11   0   3
0047    CALLM    9   1   1
0048 => ITERC    6   3   3
0049    ITERL    6 => 0026
0050    GGET     3  10      ; "table"
0051    TGETS    3   3  11  ; "insert"
0052    TGETS    4   0  12  ; "_groups"
0053    MOV      5   2
0054    CALL     3   1   3
0055    RET1     0   2

-- BYTECODE -- argparse.lua:703-709
0001    UGET     1   0      ; lines
0002    UGET     2   0      ; lines
0003    LEN      2   2
0004    TGETV    1   1   2
0005    LEN      1   1
0006    ADDVN    1   1   0  ; 1
0007    LEN      2   0
0008    ADDVV    1   1   2
0009    UGET     2   1      ; max_usage_width
0010    ISGT     1   2
0011    JMP      1 => 0024
0012    UGET     1   0      ; lines
0013    UGET     2   0      ; lines
0014    LEN      2   2
0015    UGET     3   0      ; lines
0016    UGET     4   0      ; lines
0017    LEN      4   4
0018    TGETV    3   3   4
0019    KSTR     4   0      ; " "
0020    MOV      5   0
0021    CAT      3   3   5
0022    TSETV    3   1   2
0023    JMP      1 => 0036
0024 => UGET     1   0      ; lines
0025    UGET     2   0      ; lines
0026    LEN      2   2
0027    ADDVN    2   2   0  ; 1
0028    KSTR     3   0      ; " "
0029    MOV      4   3
0030    TGETS    3   3   1  ; "rep"
0031    UGET     5   2      ; usage_margin
0032    CALL     3   2   3
0033    MOV      4   0
0034    CAT      3   3   4
0035    TSETV    3   1   2
0036 => RET0     0   1

-- BYTECODE -- argparse.lua:727-749
0001    UGET     2   0      ; added_mutexes
0002    TGETV    2   2   0
0003    ISF          2
0004    JMP      3 => 0006
0005    RET0     0   1
0006 => UGET     2   0      ; added_mutexes
0007    KPRI     3   2
0008    TSETV    3   2   0
0009    TNEW     2   0
0010    GGET     3   0      ; "ipairs"
0011    MOV      4   0
0012    CALL     3   4   2
0013    JMP      6 => 0039
0014 => TGETS    8   7   1  ; "_hidden"
0015    IST          8
0016    JMP      8 => 0039
0017    UGET     8   1      ; added_elements
0018    TGETV    8   8   7
0019    IST          8
0020    JMP      8 => 0039
0021    GGET     8   2      ; "getmetatable"
0022    MOV      9   7
0023    CALL     8   2   2
0024    UGET     9   2      ; Option
0025    ISEQV    8   9
0026    JMP      8 => 0029
0027    ISNEV    7   1
0028    JMP      8 => 0039
0029 => GGET     8   3      ; "table"
0030    TGETS    8   8   4  ; "insert"
0031    MOV      9   2
0032    MOV     11   7
0033    TGETS   10   7   5  ; "_get_usage"
0034    CALL    10   0   2
0035    CALLM    8   1   1
0036    UGET     8   1      ; added_elements
0037    KPRI     9   2
0038    TSETV    9   8   7
0039 => ITERC    6   3   3
0040    ITERL    6 => 0014
0041    LEN      3   2
0042    ISNEN    3   0      ; 1
0043    JMP      3 => 0048
0044    UGET     3   3      ; add
0045    TGETB    4   2   1
0046    CALL     3   1   2
0047    JMP      3 => 0062
0048 => LEN      3   2
0049    KSHORT   4   1
0050    ISGE     4   3
0051    JMP      3 => 0062
0052    UGET     3   3      ; add
0053    KSTR     4   6      ; "("
0054    GGET     5   3      ; "table"
0055    TGETS    5   5   7  ; "concat"
0056    MOV      6   2
0057    KSTR     7   8      ; " | "
0058    CALL     5   2   3
0059    KSTR     6   9      ; ")"
0060    CAT      4   4   6
0061    CALL     3   1   2
0062 => RET0     0   1

-- BYTECODE -- argparse.lua:751-756
0001    TGETS    1   0   0  ; "_hidden"
0002    IST          1
0003    JMP      1 => 0016
0004    UGET     1   0      ; added_elements
0005    TGETV    1   1   0
0006    IST          1
0007    JMP      1 => 0016
0008    UGET     1   1      ; add
0009    MOV      3   0
0010    TGETS    2   0   1  ; "_get_usage"
0011    CALL     2   0   2
0012    CALLM    1   1   0
0013    UGET     1   0      ; added_elements
0014    KPRI     2   2
0015    TSETV    2   1   0
0016 => RET0     0   1

-- BYTECODE -- argparse.lua:694-826
0001    TGETS    1   0   0  ; "_usage"
0002    ISF          1
0003    JMP      2 => 0006
0004    TGETS    1   0   0  ; "_usage"
0005    UCLO     0 => 0167
0006 => MOV      2   0
0007    TGETS    1   0   1  ; "_inherit_property"
0008    KSTR     3   2      ; "usage_margin"
0009    UGET     4   0      ; usage_welcome
0010    LEN      4   4
0011    CALL     1   2   4
0012    MOV      3   0
0013    TGETS    2   0   1  ; "_inherit_property"
0014    KSTR     4   3      ; "usage_max_width"
0015    KSHORT   5  70
0016    CALL     2   2   4
0017    TNEW     3   3
0018    UGET     4   0      ; usage_welcome
0019    MOV      6   0
0020    TGETS    5   0   4  ; "_get_fullname"
0021    CALL     5   2   2
0022    CAT      4   4   5
0023    TSETB    4   3   1
0024    FNEW     4   5      ; argparse.lua:703
0025    TNEW     5   0
0026    TNEW     6   0
0027    TNEW     7   0
0028    TNEW     8   0
0029    FNEW     9   6      ; argparse.lua:727
0030    FNEW    10   7      ; argparse.lua:751
0031    GGET    11   8      ; "ipairs"
0032    TGETS   12   0   9  ; "_mutexes"
0033    CALL    11   4   2
0034    JMP     14 => 0076
0035 => KPRI    16   1
0036    KPRI    17   1
0037    GGET    18   8      ; "ipairs"
0038    MOV     19  15
0039    CALL    18   4   2
0040    JMP     21 => 0067
0041 => GGET    23  10      ; "getmetatable"
0042    MOV     24  22
0043    CALL    23   2   2
0044    UGET    24   1      ; Option
0045    ISNEV   23  24
0046    JMP     23 => 0054
0047    MOV     24  22
0048    TGETS   23  22  11  ; "_is_vararg"
0049    CALL    23   2   2
0050    ISF         23
0051    JMP     24 => 0065
0052    KPRI    16   2
0053    JMP     23 => 0065
0054 => KPRI    17   2
0055    TGETV   23   8  22
0056    IST         23
0057    JMP     24 => 0059
0058    TNEW    23   0
0059 => TSETV   23   8  22
0060    GGET    23  12      ; "table"
0061    TGETS   23  23  13  ; "insert"
0062    TGETV   24   8  22
0063    MOV     25  15
0064    CALL    23   1   3
0065 => KPRI    23   2
0066    TSETV   23   5  22
0067 => ITERC   21   3   3
0068    ITERL   21 => 0041
0069    IST         16
0070    JMP     18 => 0076
0071    IST         17
0072    JMP     18 => 0076
0073    MOV     18   9
0074    MOV     19  15
0075    CALL    18   1   2
0076 => ITERC   14   3   3
0077    ITERL   14 => 0035
0078    GGET    11   8      ; "ipairs"
0079    TGETS   12   0  14  ; "_options"
0080    CALL    11   4   2
0081    JMP     14 => 0093
0082 => TGETV   16   5  15
0083    IST         16
0084    JMP     16 => 0093
0085    MOV     17  15
0086    TGETS   16  15  11  ; "_is_vararg"
0087    CALL    16   2   2
0088    IST         16
0089    JMP     16 => 0093
0090    MOV     16  10
0091    MOV     17  15
0092    CALL    16   1   2
0093 => ITERC   14   3   3
0094    ITERL   14 => 0082
0095    GGET    11   8      ; "ipairs"
0096    TGETS   12   0  15  ; "_arguments"
0097    CALL    11   4   2
0098    JMP     14 => 0123
0099 => KPRI    16   0
0100    TGETV   17   5  15
0101    ISF         17
0102    JMP     18 => 0113
0103    GGET    17   8      ; "ipairs"
0104    TGETV   18   8  15
0105    CALL    17   4   2
0106    JMP     20 => 0111
0107 => TGETV   22   7  21
0108    IST         22
0109    JMP     22 => 0111
0110    MOV     16  21
0111 => ITERC   20   3   3
0112    ITERL   20 => 0107
0113 => ISF         16
0114    JMP     17 => 0120
0115    MOV     17   9
0116    MOV     18  16
0117    MOV     19  15
0118    CALL    17   1   3
0119    JMP     17 => 0123
0120 => MOV     17  10
0121    MOV     18  15
0122    CALL    17   1   2
0123 => ITERC   14   3   3
0124    ITERL   14 => 0099
0125    GGET    11   8      ; "ipairs"
0126    TGETS   12   0   9  ; "_mutexes"
0127    CALL    11   4   2
0128    JMP     14 => 0132
0129 => MOV     16   9
0130    MOV     17  15
0131    CALL    16   1   2
0132 => ITERC   14   3   3
0133    ITERL   14 => 0129
0134    GGET    11   8      ; "ipairs"
0135    TGETS   12   0  14  ; "_options"
0136    CALL    11   4   2
0137    JMP     14 => 0141
0138 => MOV     16  10
0139    MOV     17  15
0140    CALL    16   1   2
0141 => ITERC   14   3   3
0142    ITERL   14 => 0138
0143    TGETS   11   0  16  ; "_commands"
0144    LEN     11  11
0145    KSHORT  12   0
0146    ISGE    12  11
0147    JMP     11 => 0161
0148    TGETS   11   0  17  ; "_require_command"
0149    ISF         11
0150    JMP     12 => 0155
0151    MOV     11   4
0152    KSTR    12  18      ; "<command>"
0153    CALL    11   1   2
0154    JMP     11 => 0158
0155 => MOV     11   4
0156    KSTR    12  19      ; "[<command>]"
0157    CALL    11   1   2
0158 => MOV     11   4
0159    KSTR    12  20      ; "..."
0160    CALL    11   1   2
0161 => GGET    11  12      ; "table"
0162    TGETS   11  11  21  ; "concat"
0163    MOV     12   3
0164    KSTR    13  22      ; "\n"
0165    UCLO     0 => 0166
0166 => CALLT   11   3
0167 => RET1     1   2

-- BYTECODE -- argparse.lua:828-844
0001    ISNES    0   0      ; ""
0002    JMP      1 => 0005
0003    TNEW     1   0
0004    RET1     1   2
0005 => TNEW     1   0
0006    MOV      3   0
0007    TGETS    2   0   1  ; "sub"
0008    KSHORT   4  -1
0009    CALL     2   2   3
0010    ISEQS    2   2      ; "\n"
0011    JMP      2 => 0015
0012    MOV      2   0
0013    KSTR     3   2      ; "\n"
0014    CAT      0   2   3
0015 => MOV      3   0
0016    TGETS    2   0   3  ; "gmatch"
0017    KSTR     4   4      ; "([^\n]*)\n"
0018    CALL     2   4   3
0019    JMP      5 => 0025
0020 => GGET     6   5      ; "table"
0021    TGETS    6   6   6  ; "insert"
0022    MOV      7   1
0023    MOV      8   5
0024    CALL     6   1   3
0025 => ITERC    5   2   3
0026    ITERL    5 => 0020
0027    RET1     1   2

-- BYTECODE -- argparse.lua:846-902
0001    TNEW     2   0
0002    MOV      4   0
0003    TGETS    3   0   0  ; "match"
0004    KSTR     5   1      ; "^ *"
0005    CALL     3   2   3
0006    MOV      5   0
0007    TGETS    4   0   2  ; "find"
0008    KSTR     6   3      ; "^ *[%*%+%-]"
0009    CALL     4   2   3
0010    ISF          4
0011    JMP      5 => 0019
0012    MOV      4   3
0013    KSTR     5   4      ; " "
0014    MOV      7   0
0015    TGETS    6   0   0  ; "match"
0016    KSTR     8   5      ; "^ *[%*%+%-]( *)"
0017    CALL     6   2   3
0018    CAT      3   4   6
0019 => TNEW     4   0
0020    KSHORT   5   0
0021    KSHORT   6   1
0022 => LOOP     7 => 0077
0023    MOV      8   0
0024    TGETS    7   0   2  ; "find"
0025    KSTR     9   6      ; "([^ ]+)"
0026    MOV     10   6
0027    CALL     7   4   4
0028    IST          7
0029    JMP     10 => 0031
0030    JMP      7 => 0077
0031 => MOV     11   0
0032    TGETS   10   0   7  ; "sub"
0033    MOV     12   6
0034    SUBVN   13   7   0  ; 1
0035    CALL    10   2   4
0036    ADDVN    6   8   0  ; 1
0037    LEN     11   4
0038    ISEQN   11   1      ; 0
0039    JMP     11 => 0046
0040    LEN     11  10
0041    ADDVV   11   5  11
0042    LEN     12   9
0043    ADDVV   11  11  12
0044    ISGT    11   1
0045    JMP     11 => 0061
0046 => GGET    11   8      ; "table"
0047    TGETS   11  11   9  ; "insert"
0048    MOV     12   4
0049    MOV     13  10
0050    CALL    11   1   3
0051    GGET    11   8      ; "table"
0052    TGETS   11  11   9  ; "insert"
0053    MOV     12   4
0054    MOV     13   9
0055    CALL    11   1   3
0056    LEN     11  10
0057    ADDVV   11   5  11
0058    LEN     12   9
0059    ADDVV    5  11  12
0060    JMP     11 => 0022
0061 => GGET    11   8      ; "table"
0062    TGETS   11  11   9  ; "insert"
0063    MOV     12   2
0064    GGET    13   8      ; "table"
0065    TGETS   13  13  10  ; "concat"
0066    MOV     14   4
0067    CALL    13   0   2
0068    CALLM   11   1   1
0069    TNEW    11   3
0070    TSETB    3  11   1
0071    TSETB    9  11   2
0072    MOV      4  11
0073    LEN     11   3
0074    LEN     12   9
0075    ADDVV    5  11  12
0076    JMP      7 => 0022
0077 => LEN      7   4
0078    KSHORT   8   0
0079    ISGE     8   7
0080    JMP      7 => 0089
0081    GGET     7   8      ; "table"
0082    TGETS    7   7   9  ; "insert"
0083    MOV      8   2
0084    GGET     9   8      ; "table"
0085    TGETS    9   9  10  ; "concat"
0086    MOV     10   4
0087    CALL     9   0   2
0088    CALLM    7   1   1
0089 => LEN      7   2
0090    ISNEN    7   1      ; 0
0091    JMP      7 => 0094
0092    KSTR     7  11      ; ""
0093    TSETB    7   2   1
0094 => RET1     2   2

-- BYTECODE -- argparse.lua:907-919
0001    TNEW     2   0
0002    GGET     3   0      ; "ipairs"
0003    MOV      4   0
0004    CALL     3   4   2
0005    JMP      6 => 0021
0006 => UGET     8   0      ; autowrap_line
0007    MOV      9   7
0008    MOV     10   1
0009    CALL     8   2   3
0010    GGET     9   0      ; "ipairs"
0011    MOV     10   8
0012    CALL     9   4   2
0013    JMP     12 => 0019
0014 => GGET    14   1      ; "table"
0015    TGETS   14  14   2  ; "insert"
0016    MOV     15   2
0017    MOV     16  13
0018    CALL    14   1   3
0019 => ITERC   12   3   3
0020    ITERL   12 => 0014
0021 => ITERC    6   3   3
0022    ITERL    6 => 0006
0023    RET1     2   2

-- BYTECODE -- argparse.lua:921-971
0001    MOV      3   1
0002    TGETS    2   1   0  ; "_get_label_lines"
0003    CALL     2   2   2
0004    UGET     3   0      ; split_lines
0005    MOV      5   1
0006    TGETS    4   1   1  ; "_get_description"
0007    CALL     4   0   2
0008    CALLM    3   2   0
0009    TNEW     4   0
0010    MOV      6   0
0011    TGETS    5   0   2  ; "_inherit_property"
0012    KSTR     7   3      ; "help_usage_margin"
0013    KSHORT   8   3
0014    CALL     5   2   4
0015    KSTR     6   4      ; " "
0016    MOV      7   6
0017    TGETS    6   6   5  ; "rep"
0018    MOV      8   5
0019    CALL     6   2   3
0020    MOV      8   0
0021    TGETS    7   0   2  ; "_inherit_property"
0022    KSTR     9   6      ; "help_description_margin"
0023    KSHORT  10  25
0024    CALL     7   2   4
0025    KSTR     8   4      ; " "
0026    MOV      9   8
0027    TGETS    8   8   5  ; "rep"
0028    MOV     10   7
0029    CALL     8   2   3
0030    MOV     10   0
0031    TGETS    9   0   2  ; "_inherit_property"
0032    KSTR    11   7      ; "help_max_width"
0033    CALL     9   2   3
0034    ISF          9
0035    JMP     10 => 0046
0036    GGET    10   8      ; "math"
0037    TGETS   10  10   9  ; "max"
0038    SUBVV   11   9   7
0039    KSHORT  12  10
0040    CALL    10   2   3
0041    UGET    11   1      ; autowrap
0042    MOV     12   3
0043    MOV     13  10
0044    CALL    11   2   3
0045    MOV      3  11
0046 => TGETB   10   2   1
0047    LEN     10  10
0048    SUBVV   11   7   5
0049    ISGT    11  10
0050    JMP     10 => 0078
0051    GGET    10  10      ; "ipairs"
0052    MOV     11   2
0053    CALL    10   4   2
0054    JMP     13 => 0062
0055 => GGET    15  11      ; "table"
0056    TGETS   15  15  12  ; "insert"
0057    MOV     16   4
0058    MOV     17   6
0059    MOV     18  14
0060    CAT     17  17  18
0061    CALL    15   1   3
0062 => ITERC   13   3   3
0063    ITERL   13 => 0055
0064    GGET    10  10      ; "ipairs"
0065    MOV     11   3
0066    CALL    10   4   2
0067    JMP     13 => 0075
0068 => GGET    15  11      ; "table"
0069    TGETS   15  15  12  ; "insert"
0070    MOV     16   4
0071    MOV     17   8
0072    MOV     18  14
0073    CAT     17  17  18
0074    CALL    15   1   3
0075 => ITERC   13   3   3
0076    ITERL   13 => 0068
0077    JMP     10 => 0113
0078 => KSHORT  10   1
0079    GGET    11   8      ; "math"
0080    TGETS   11  11   9  ; "max"
0081    LEN     12   2
0082    LEN     13   3
0083    CALL    11   2   3
0084    KSHORT  12   1
0085    FORI    10 => 0113
0086 => TGETV   14   2  13
0087    TGETV   15   3  13
0088    KSTR    16  13      ; ""
0089    ISF         14
0090    JMP     17 => 0094
0091    MOV     17   6
0092    MOV     18  14
0093    CAT     16  17  18
0094 => ISF         15
0095    JMP     17 => 0107
0096    ISEQS   15  13      ; ""
0097    JMP     17 => 0107
0098    MOV     17  16
0099    KSTR    18   4      ; " "
0100    MOV     19  18
0101    TGETS   18  18   5  ; "rep"
0102    LEN     20  16
0103    SUBVV   20   7  20
0104    CALL    18   2   3
0105    MOV     19  15
0106    CAT     16  17  19
0107 => GGET    17  11      ; "table"
0108    TGETS   17  17  12  ; "insert"
0109    MOV     18   4
0110    MOV     19  16
0111    CALL    17   1   3
0112    FORL    10 => 0086
0113 => GGET    10  11      ; "table"
0114    TGETS   10  10  14  ; "concat"
0115    MOV     11   4
0116    KSTR    12  15      ; "\n"
0117    CALLT   10   3

-- BYTECODE -- argparse.lua:973-981
0001    TNEW     1   0
0002    GGET     2   0      ; "ipairs"
0003    MOV      3   0
0004    CALL     2   4   2
0005    JMP      5 => 0011
0006 => GGET     7   1      ; "getmetatable"
0007    MOV      8   6
0008    CALL     7   2   2
0009    KPRI     8   2
0010    TSETV    8   1   7
0011 => ITERC    5   3   3
0012    ITERL    5 => 0006
0013    RET1     1   2

-- BYTECODE -- argparse.lua:983-996
0001    TNEW     5   3
0002    TSETB    3   5   1
0003    GGET     6   0      ; "ipairs"
0004    MOV      7   4
0005    CALL     6   4   2
0006    JMP      9 => 0023
0007 => TGETS   11  10   1  ; "_hidden"
0008    IST         11
0009    JMP     11 => 0023
0010    TGETV   11   2  10
0011    IST         11
0012    JMP     11 => 0023
0013    KPRI    11   2
0014    TSETV   11   2  10
0015    GGET    11   2      ; "table"
0016    TGETS   11  11   3  ; "insert"
0017    MOV     12   5
0018    MOV     14   0
0019    TGETS   13   0   4  ; "_get_element_help"
0020    MOV     15  10
0021    CALL    13   0   3
0022    CALLM   11   1   1
0023 => ITERC    9   3   3
0024    ITERL    9 => 0007
0025    LEN      6   5
0026    KSHORT   7   1
0027    ISGE     7   6
0028    JMP      6 => 0047
0029    GGET     6   2      ; "table"
0030    TGETS    6   6   3  ; "insert"
0031    MOV      7   1
0032    GGET     8   2      ; "table"
0033    TGETS    8   8   5  ; "concat"
0034    MOV      9   5
0035    KSTR    10   6      ; "\n"
0036    MOV     11  10
0037    TGETS   10  10   7  ; "rep"
0038    MOV     13   0
0039    TGETS   12   0   8  ; "_inherit_property"
0040    KSTR    14   9      ; "help_vertical_space"
0041    KSHORT  15   0
0042    CALL    12   2   4
0043    ADDVN   12  12   0  ; 1
0044    CALL    10   0   3
0045    CALLM    8   0   1
0046    CALLM    6   1   1
0047 => RET0     0   1

-- BYTECODE -- argparse.lua:998-1073
0001    TGETS    1   0   0  ; "_help"
0002    ISF          1
0003    JMP      2 => 0006
0004    TGETS    1   0   0  ; "_help"
0005    RET1     1   2
0006 => TNEW     1   3
0007    MOV      3   0
0008    TGETS    2   0   1  ; "get_usage"
0009    CALL     2   0   2
0010    TSETM    2   0      ; 1
0011    MOV      3   0
0012    TGETS    2   0   2  ; "_inherit_property"
0013    KSTR     4   3      ; "help_max_width"
0014    CALL     2   2   3
0015    TGETS    3   0   4  ; "_description"
0016    ISF          3
0017    JMP      4 => 0037
0018    TGETS    3   0   4  ; "_description"
0019    ISF          2
0020    JMP      4 => 0032
0021    GGET     4   5      ; "table"
0022    TGETS    4   4   6  ; "concat"
0023    UGET     5   0      ; autowrap
0024    UGET     6   1      ; split_lines
0025    MOV      7   3
0026    CALL     6   2   2
0027    MOV      7   2
0028    CALL     5   2   3
0029    KSTR     6   7      ; "\n"
0030    CALL     4   2   3
0031    MOV      3   4
0032 => GGET     4   5      ; "table"
0033    TGETS    4   4   8  ; "insert"
0034    MOV      5   1
0035    MOV      6   3
0036    CALL     4   1   3
0037 => TNEW     3 4096
0038    UGET     4   2      ; Argument
0039    TNEW     5   0
0040    TSETV    5   3   4
0041    UGET     4   3      ; Option
0042    TNEW     5   0
0043    TSETV    5   3   4
0044    UGET     4   4      ; Command
0045    TNEW     5   0
0046    TSETV    5   3   4
0047    GGET     4   9      ; "ipairs"
0048    TGETS    5   0  10  ; "_groups"
0049    CALL     4   4   2
0050    JMP      7 => 0075
0051 => UGET     9   5      ; get_group_types
0052    MOV     10   8
0053    CALL     9   2   2
0054    GGET    10   9      ; "ipairs"
0055    TNEW    11   4
0056    UGET    12   2      ; Argument
0057    TSETB   12  11   1
0058    UGET    12   3      ; Option
0059    TSETB   12  11   2
0060    UGET    12   4      ; Command
0061    TSETB   12  11   3
0062    CALL    10   4   2
0063    JMP     13 => 0073
0064 => TGETV   15   9  14
0065    ISF         15
0066    JMP     16 => 0073
0067    GGET    15   5      ; "table"
0068    TGETS   15  15   8  ; "insert"
0069    TGETV   16   3  14
0070    MOV     17   8
0071    CALL    15   1   3
0072    JMP     10 => 0075
0073 => ITERC   13   3   3
0074    ITERL   13 => 0064
0075 => ITERC    7   3   3
0076    ITERL    7 => 0051
0077    TNEW     4   4
0078    TDUP     5  11
0079    UGET     6   2      ; Argument
0080    TSETS    6   5  12  ; "type"
0081    TGETS    6   0  13  ; "_arguments"
0082    TSETS    6   5  14  ; "elements"
0083    TSETB    5   4   1
0084    TDUP     5  15
0085    UGET     6   3      ; Option
0086    TSETS    6   5  12  ; "type"
0087    TGETS    6   0  16  ; "_options"
0088    TSETS    6   5  14  ; "elements"
0089    TSETB    5   4   2
0090    TDUP     5  17
0091    UGET     6   4      ; Command
0092    TSETS    6   5  12  ; "type"
0093    TGETS    6   0  18  ; "_commands"
0094    TSETS    6   5  14  ; "elements"
0095    TSETB    5   4   3
0096    TNEW     5   0
0097    GGET     6   9      ; "ipairs"
0098    MOV      7   4
0099    CALL     6   4   2
0100    JMP      9 => 0140
0101 => TGETS   11  10  12  ; "type"
0102    TGETV   11   3  11
0103    GGET    12   9      ; "ipairs"
0104    MOV     13  11
0105    CALL    12   4   2
0106    JMP     15 => 0116
0107 => MOV     18   0
0108    TGETS   17   0  19  ; "_add_group_help"
0109    MOV     19   1
0110    MOV     20   5
0111    TGETS   21  16  20  ; "name"
0112    KSTR    22  21      ; ":"
0113    CAT     21  21  22
0114    MOV     22  16
0115    CALL    17   1   6
0116 => ITERC   15   3   3
0117    ITERL   15 => 0107
0118    TGETS   12  10  20  ; "name"
0119    KSTR    13  21      ; ":"
0120    CAT     12  12  13
0121    LEN     13  11
0122    KSHORT  14   0
0123    ISGE    14  13
0124    JMP     13 => 0133
0125    KSTR    13  22      ; "Other "
0126    MOV     15  12
0127    TGETS   14  12  23  ; "gsub"
0128    KSTR    16  24      ; "^."
0129    GGET    17  25      ; "string"
0130    TGETS   17  17  26  ; "lower"
0131    CALL    14   2   4
0132    CAT     12  13  14
0133 => MOV     14   0
0134    TGETS   13   0  19  ; "_add_group_help"
0135    MOV     15   1
0136    MOV     16   5
0137    MOV     17  12
0138    TGETS   18  10  14  ; "elements"
0139    CALL    13   1   6
0140 => ITERC    9   3   3
0141    ITERL    9 => 0101
0142    TGETS    6   0  27  ; "_epilog"
0143    ISF          6
0144    JMP      7 => 0164
0145    TGETS    6   0  27  ; "_epilog"
0146    ISF          2
0147    JMP      7 => 0159
0148    GGET     7   5      ; "table"
0149    TGETS    7   7   6  ; "concat"
0150    UGET     8   0      ; autowrap
0151    UGET     9   1      ; split_lines
0152    MOV     10   6
0153    CALL     9   2   2
0154    MOV     10   2
0155    CALL     8   2   3
0156    KSTR     9   7      ; "\n"
0157    CALL     7   2   3
0158    MOV      6   7
0159 => GGET     7   5      ; "table"
0160    TGETS    7   7   8  ; "insert"
0161    MOV      8   1
0162    MOV      9   6
0163    CALL     7   1   3
0164 => GGET     6   5      ; "table"
0165    TGETS    6   6   6  ; "concat"
0166    MOV      7   1
0167    KSTR     8  28      ; "\n\n"
0168    CALLT    6   3

-- BYTECODE -- argparse.lua:1086-1101
0001    IST          2
0002    JMP      3 => 0014
0003    GGET     3   0      ; "print"
0004    UGET     4   0      ; self
0005    MOV      5   4
0006    TGETS    4   4   1  ; "get_help"
0007    CALL     4   0   2
0008    CALLM    3   1   0
0009    GGET     3   2      ; "os"
0010    TGETS    3   3   3  ; "exit"
0011    KSHORT   4   0
0012    CALL     3   1   2
0013    JMP      3 => 0038
0014 => GGET     3   4      ; "ipairs"
0015    UGET     4   0      ; self
0016    TGETS    4   4   5  ; "_commands"
0017    CALL     3   4   2
0018    JMP      6 => 0036
0019 => GGET     8   4      ; "ipairs"
0020    TGETS    9   7   6  ; "_aliases"
0021    CALL     8   4   2
0022    JMP     11 => 0034
0023 => ISNEV   12   2
0024    JMP     13 => 0034
0025    GGET    13   0      ; "print"
0026    MOV     15   7
0027    TGETS   14   7   1  ; "get_help"
0028    CALL    14   0   2
0029    CALLM   13   1   0
0030    GGET    13   2      ; "os"
0031    TGETS   13  13   3  ; "exit"
0032    KSHORT  14   0
0033    CALL    13   1   2
0034 => ITERC   11   3   3
0035    ITERL   11 => 0023
0036 => ITERC    6   3   3
0037    ITERL    6 => 0019
0038 => UGET     3   1      ; help
0039    MOV      4   3
0040    TGETS    3   3   7  ; "error"
0041    KSTR     5   8      ; "unknown command '%s'"
0042    MOV      6   5
0043    TGETS    5   5   9  ; "format"
0044    MOV      7   2
0045    CALL     5   0   3
0046    CALLM    3   1   1
0047    RET0     0   1

-- BYTECODE -- argparse.lua:1075-1113
0001    ISF          1
0002    JMP      2 => 0025
0003    GGET     2   0      ; "assert"
0004    GGET     3   1      ; "type"
0005    MOV      4   1
0006    CALL     3   2   2
0007    ISEQS    3   2      ; "string"
0008    JMP      3 => 0016
0009    GGET     3   1      ; "type"
0010    MOV      4   1
0011    CALL     3   2   2
0012    ISEQS    3   3      ; "table"
0013    JMP      3 => 0016
0014    KPRI     3   1
0015    JMP      4 => 0017
0016 => KPRI     3   2
0017 => KSTR     4   4      ; "bad argument #1 to 'add_help_command' (s"~
0018    MOV      5   4
0019    TGETS    4   4   5  ; "format"
0020    GGET     6   1      ; "type"
0021    MOV      7   1
0022    CALL     6   0   2
0023    CALLM    4   0   1
0024    CALLM    2   1   1
0025 => MOV      3   0
0026    TGETS    2   0   6  ; "command"
0027    CALL     2   2   2
0028    MOV      3   2
0029    TGETS    2   2   7  ; "description"
0030    KSTR     4   8      ; "Show help for commands."
0031    CALL     2   2   3
0032    MOV      4   2
0033    TGETS    3   2   9  ; "argument"
0034    KSTR     5   6      ; "command"
0035    CALL     3   2   3
0036    MOV      4   3
0037    TGETS    3   3   7  ; "description"
0038    KSTR     5  10      ; "The command to show help for."
0039    CALL     3   2   3
0040    MOV      4   3
0041    TGETS    3   3  11  ; "args"
0042    KSTR     5  12      ; "?"
0043    CALL     3   2   3
0044    MOV      4   3
0045    TGETS    3   3  13  ; "action"
0046    FNEW     5  14      ; argparse.lua:1086
0047    CALL     3   1   3
0048    ISF          1
0049    JMP      3 => 0054
0050    MOV      3   2
0051    MOV      4   1
0052    CALL     3   2   2
0053    MOV      2   3
0054 => TGETS    3   2  15  ; "_name"
0055    IST          3
0056    JMP      3 => 0060
0057    MOV      3   2
0058    KSTR     4  16      ; "help"
0059    CALL     3   1   2
0060 => KPRI     3   2
0061    TSETS    3   2  17  ; "_is_help_command"
0062    UCLO     0 => 0063
0063 => RET1     0   2

-- BYTECODE -- argparse.lua:1115-1156
0001    TGETS    1   0   0  ; "_basename"
0002    ISF          1
0003    JMP      2 => 0014
0004    TGETS    1   0   0  ; "_basename"
0005    MOV      2   1
0006    TGETS    1   1   1  ; "find"
0007    KSTR     3   2      ; "[^%w_%-%+%.]"
0008    CALL     1   2   3
0009    ISF          1
0010    JMP      2 => 0028
0011    KPRI     1   1
0012    RET1     1   2
0013    JMP      1 => 0028
0014 => GGET     1   3      ; "ipairs"
0015    TGETS    2   0   4  ; "_aliases"
0016    CALL     1   4   2
0017    JMP      4 => 0026
0018 => MOV      7   5
0019    TGETS    6   5   1  ; "find"
0020    KSTR     8   2      ; "[^%w_%-%+%.]"
0021    CALL     6   2   3
0022    ISF          6
0023    JMP      7 => 0026
0024    KPRI     6   1
0025    RET1     6   2
0026 => ITERC    4   3   3
0027    ITERL    4 => 0018
0028 => GGET     1   3      ; "ipairs"
0029    TGETS    2   0   5  ; "_options"
0030    CALL     1   4   2
0031    JMP      4 => 0063
0032 => GGET     6   3      ; "ipairs"
0033    TGETS    7   5   4  ; "_aliases"
0034    CALL     6   4   2
0035    JMP      9 => 0044
0036 => MOV     12  10
0037    TGETS   11  10   1  ; "find"
0038    KSTR    13   2      ; "[^%w_%-%+%.]"
0039    CALL    11   2   3
0040    ISF         11
0041    JMP     12 => 0044
0042    KPRI    11   1
0043    RET1    11   2
0044 => ITERC    9   3   3
0045    ITERL    9 => 0036
0046    TGETS    6   5   6  ; "_choices"
0047    ISF          6
0048    JMP      7 => 0063
0049    GGET     6   3      ; "ipairs"
0050    TGETS    7   5   6  ; "_choices"
0051    CALL     6   4   2
0052    JMP      9 => 0061
0053 => MOV     12  10
0054    TGETS   11  10   1  ; "find"
0055    KSTR    13   7      ; "[%s'"]"
0056    CALL    11   2   3
0057    ISF         11
0058    JMP     12 => 0061
0059    KPRI    11   1
0060    RET1    11   2
0061 => ITERC    9   3   3
0062    ITERL    9 => 0053
0063 => ITERC    4   3   3
0064    ITERL    4 => 0032
0065    GGET     1   3      ; "ipairs"
0066    TGETS    2   0   8  ; "_arguments"
0067    CALL     1   4   2
0068    JMP      4 => 0086
0069 => TGETS    6   5   6  ; "_choices"
0070    ISF          6
0071    JMP      7 => 0086
0072    GGET     6   3      ; "ipairs"
0073    TGETS    7   5   6  ; "_choices"
0074    CALL     6   4   2
0075    JMP      9 => 0084
0076 => MOV     12  10
0077    TGETS   11  10   1  ; "find"
0078    KSTR    13   7      ; "[%s'"]"
0079    CALL    11   2   3
0080    ISF         11
0081    JMP     12 => 0084
0082    KPRI    11   1
0083    RET1    11   2
0084 => ITERC    9   3   3
0085    ITERL    9 => 0076
0086 => ITERC    4   3   3
0087    ITERL    4 => 0069
0088    GGET     1   3      ; "ipairs"
0089    TGETS    2   0   9  ; "_commands"
0090    CALL     1   4   2
0091    JMP      4 => 0099
0092 => MOV      7   5
0093    TGETS    6   5  10  ; "_is_shell_safe"
0094    CALL     6   2   2
0095    IST          6
0096    JMP      6 => 0099
0097    KPRI     6   1
0098    RET1     6   2
0099 => ITERC    4   3   3
0100    ITERL    4 => 0092
0101    KPRI     1   2
0102    RET1     1   2

-- BYTECODE -- argparse.lua:1168-1171
0001    GGET     3   0      ; "io"
0002    TGETS    3   3   1  ; "write"
0003    UGET     4   0      ; self
0004    KSTR     5   2      ; "get_"
0005    MOV      6   2
0006    KSTR     7   3      ; "_complete"
0007    CAT      5   5   7
0008    TGETV    4   4   5
0009    UGET     5   0      ; self
0010    CALL     4   0   2
0011    CALLM    3   1   0
0012    GGET     3   4      ; "os"
0013    TGETS    3   3   5  ; "exit"
0014    KSHORT   4   0
0015    CALL     3   1   2
0016    RET0     0   1

-- BYTECODE -- argparse.lua:1158-1182
0001    ISF          1
0002    JMP      2 => 0025
0003    GGET     2   0      ; "assert"
0004    GGET     3   1      ; "type"
0005    MOV      4   1
0006    CALL     3   2   2
0007    ISEQS    3   2      ; "string"
0008    JMP      3 => 0016
0009    GGET     3   1      ; "type"
0010    MOV      4   1
0011    CALL     3   2   2
0012    ISEQS    3   3      ; "table"
0013    JMP      3 => 0016
0014    KPRI     3   1
0015    JMP      4 => 0017
0016 => KPRI     3   2
0017 => KSTR     4   4      ; "bad argument #1 to 'add_complete' (strin"~
0018    MOV      5   4
0019    TGETS    4   4   5  ; "format"
0020    GGET     6   1      ; "type"
0021    MOV      7   1
0022    CALL     6   0   2
0023    CALLM    4   0   1
0024    CALLM    2   1   1
0025 => MOV      3   0
0026    TGETS    2   0   6  ; "option"
0027    CALL     2   2   2
0028    MOV      3   2
0029    TGETS    2   2   7  ; "description"
0030    KSTR     4   8      ; "Output a shell completion script for the"~
0031    CALL     2   2   3
0032    MOV      3   2
0033    TGETS    2   2   9  ; "args"
0034    KSHORT   4   1
0035    CALL     2   2   3
0036    MOV      3   2
0037    TGETS    2   2  10  ; "choices"
0038    TDUP     4  11
0039    CALL     2   2   3
0040    MOV      3   2
0041    TGETS    2   2  12  ; "action"
0042    FNEW     4  13      ; argparse.lua:1168
0043    CALL     2   2   3
0044    ISF          1
0045    JMP      3 => 0050
0046    MOV      3   2
0047    MOV      4   1
0048    CALL     3   2   2
0049    MOV      2   3
0050 => TGETS    3   2  14  ; "_name"
0051    IST          3
0052    JMP      3 => 0056
0053    MOV      3   2
0054    KSTR     4  15      ; "--completion"
0055    CALL     3   1   2
0056 => UCLO     0 => 0057
0057 => RET1     0   2

-- BYTECODE -- argparse.lua:1195-1198
0001    GGET     3   0      ; "io"
0002    TGETS    3   3   1  ; "write"
0003    UGET     4   0      ; self
0004    KSTR     5   2      ; "get_"
0005    MOV      6   2
0006    KSTR     7   3      ; "_complete"
0007    CAT      5   5   7
0008    TGETV    4   4   5
0009    UGET     5   0      ; self
0010    CALL     4   0   2
0011    CALLM    3   1   0
0012    GGET     3   4      ; "os"
0013    TGETS    3   3   5  ; "exit"
0014    KSHORT   4   0
0015    CALL     3   1   2
0016    RET0     0   1

-- BYTECODE -- argparse.lua:1184-1209
0001    ISF          1
0002    JMP      2 => 0025
0003    GGET     2   0      ; "assert"
0004    GGET     3   1      ; "type"
0005    MOV      4   1
0006    CALL     3   2   2
0007    ISEQS    3   2      ; "string"
0008    JMP      3 => 0016
0009    GGET     3   1      ; "type"
0010    MOV      4   1
0011    CALL     3   2   2
0012    ISEQS    3   3      ; "table"
0013    JMP      3 => 0016
0014    KPRI     3   1
0015    JMP      4 => 0017
0016 => KPRI     3   2
0017 => KSTR     4   4      ; "bad argument #1 to 'add_complete_command"~
0018    MOV      5   4
0019    TGETS    4   4   5  ; "format"
0020    GGET     6   1      ; "type"
0021    MOV      7   1
0022    CALL     6   0   2
0023    CALLM    4   0   1
0024    CALLM    2   1   1
0025 => MOV      3   0
0026    TGETS    2   0   6  ; "command"
0027    CALL     2   2   2
0028    MOV      3   2
0029    TGETS    2   2   7  ; "description"
0030    KSTR     4   8      ; "Output a shell completion script."
0031    CALL     2   2   3
0032    MOV      4   2
0033    TGETS    3   2   9  ; "argument"
0034    KSTR     5  10      ; "shell"
0035    CALL     3   2   3
0036    MOV      4   3
0037    TGETS    3   3   7  ; "description"
0038    KSTR     5  11      ; "The shell to output a completion script "~
0039    CALL     3   2   3
0040    MOV      4   3
0041    TGETS    3   3  12  ; "choices"
0042    TDUP     5  13
0043    CALL     3   2   3
0044    MOV      4   3
0045    TGETS    3   3  14  ; "action"
0046    FNEW     5  15      ; argparse.lua:1195
0047    CALL     3   1   3
0048    ISF          1
0049    JMP      3 => 0054
0050    MOV      3   2
0051    MOV      4   1
0052    CALL     3   2   2
0053    MOV      2   3
0054 => TGETS    3   2  16  ; "_name"
0055    IST          3
0056    JMP      3 => 0060
0057    MOV      3   2
0058    KSTR     4  17      ; "completion"
0059    CALL     3   1   2
0060 => UCLO     0 => 0061
0061 => RET1     0   2

-- BYTECODE -- argparse.lua:1211-1213
0001    MOV      2   0
0002    TGETS    1   0   0  ; "gsub"
0003    KSTR     3   1      ; "[/\]*$"
0004    KSTR     4   2      ; ""
0005    CALL     1   2   4
0006    MOV      2   1
0007    TGETS    1   1   3  ; "match"
0008    KSTR     3   4      ; ".*[/\]([^/\]*)"
0009    CALL     1   2   3
0010    IST          1
0011    JMP      2 => 0013
0012    MOV      1   0
0013 => RET1     1   2

-- BYTECODE -- argparse.lua:1215-1218
0001    MOV      2   0
0002    TGETS    1   0   0  ; "_get_description"
0003    CALL     1   2   2
0004    MOV      2   1
0005    TGETS    1   1   1  ; "match"
0006    KSTR     3   2      ; "^(.-)%.%s"
0007    CALL     1   2   3
0008    ISTC     2   1
0009    JMP      2 => 0017
0010    MOV      3   0
0011    TGETS    2   0   0  ; "_get_description"
0012    CALL     2   2   2
0013    MOV      3   2
0014    TGETS    2   2   1  ; "match"
0015    KSTR     4   3      ; "^(.-)%.?$"
0016    CALL     2   2   3
0017 => RET1     2   2

-- BYTECODE -- argparse.lua:1220-1228
0001    TNEW     1   0
0002    GGET     2   0      ; "ipairs"
0003    TGETS    3   0   1  ; "_options"
0004    CALL     2   4   2
0005    JMP      5 => 0017
0006 => GGET     7   0      ; "ipairs"
0007    TGETS    8   6   2  ; "_aliases"
0008    CALL     7   4   2
0009    JMP     10 => 0015
0010 => GGET    12   3      ; "table"
0011    TGETS   12  12   4  ; "insert"
0012    MOV     13   1
0013    MOV     14  11
0014    CALL    12   1   3
0015 => ITERC   10   3   3
0016    ITERL   10 => 0010
0017 => ITERC    5   3   3
0018    ITERL    5 => 0006
0019    GGET     2   3      ; "table"
0020    TGETS    2   2   5  ; "concat"
0021    MOV      3   1
0022    KSTR     4   6      ; " "
0023    CALLT    2   3

-- BYTECODE -- argparse.lua:1230-1238
0001    TNEW     1   0
0002    GGET     2   0      ; "ipairs"
0003    TGETS    3   0   1  ; "_commands"
0004    CALL     2   4   2
0005    JMP      5 => 0017
0006 => GGET     7   0      ; "ipairs"
0007    TGETS    8   6   2  ; "_aliases"
0008    CALL     7   4   2
0009    JMP     10 => 0015
0010 => GGET    12   3      ; "table"
0011    TGETS   12  12   4  ; "insert"
0012    MOV     13   1
0013    MOV     14  11
0014    CALL    12   1   3
0015 => ITERC   10   3   3
0016    ITERL   10 => 0010
0017 => ITERC    5   3   3
0018    ITERL    5 => 0006
0019    GGET     2   3      ; "table"
0020    TGETS    2   2   5  ; "concat"
0021    MOV      3   1
0022    KSTR     4   6      ; " "
0023    CALLT    2   3

-- BYTECODE -- argparse.lua:1240-1262
0001    TNEW     3   0
0002    GGET     4   0      ; "ipairs"
0003    TGETS    5   0   1  ; "_options"
0004    CALL     4   4   2
0005    JMP      7 => 0076
0006 => TGETS    9   8   2  ; "_choices"
0007    IST          9
0008    JMP     10 => 0013
0009    TGETS    9   8   3  ; "_minargs"
0010    KSHORT  10   0
0011    ISGE    10   9
0012    JMP      9 => 0076
0013 => KPRI     9   0
0014    TGETS   10   8   2  ; "_choices"
0015    ISF         10
0016    JMP     11 => 0026
0017    KSTR    10   4      ; "COMPREPLY=($(compgen -W ""
0018    GGET    11   5      ; "table"
0019    TGETS   11  11   6  ; "concat"
0020    TGETS   12   8   2  ; "_choices"
0021    KSTR    13   7      ; " "
0022    CALL    11   2   3
0023    KSTR    12   8      ; "" -- "$cur"))"
0024    CAT      9  10  12
0025    JMP     10 => 0027
0026 => KSTR     9   9      ; "COMPREPLY=($(compgen -f -- "$cur"))"
0027 => GGET    10   5      ; "table"
0028    TGETS   10  10  10  ; "insert"
0029    MOV     11   3
0030    KSTR    12   7      ; " "
0031    MOV     13  12
0032    TGETS   12  12  11  ; "rep"
0033    ADDVN   14   2   0  ; 4
0034    CALL    12   2   3
0035    GGET    13   5      ; "table"
0036    TGETS   13  13   6  ; "concat"
0037    TGETS   14   8  12  ; "_aliases"
0038    KSTR    15  13      ; "|"
0039    CALL    13   2   3
0040    KSTR    14  14      ; ")"
0041    CAT     12  12  14
0042    CALL    10   1   3
0043    GGET    10   5      ; "table"
0044    TGETS   10  10  10  ; "insert"
0045    MOV     11   3
0046    KSTR    12   7      ; " "
0047    MOV     13  12
0048    TGETS   12  12  11  ; "rep"
0049    ADDVN   14   2   1  ; 8
0050    CALL    12   2   3
0051    MOV     13   9
0052    CAT     12  12  13
0053    CALL    10   1   3
0054    GGET    10   5      ; "table"
0055    TGETS   10  10  10  ; "insert"
0056    MOV     11   3
0057    KSTR    12   7      ; " "
0058    MOV     13  12
0059    TGETS   12  12  11  ; "rep"
0060    ADDVN   14   2   1  ; 8
0061    CALL    12   2   3
0062    KSTR    13  15      ; "return 0"
0063    CAT     12  12  13
0064    CALL    10   1   3
0065    GGET    10   5      ; "table"
0066    TGETS   10  10  10  ; "insert"
0067    MOV     11   3
0068    KSTR    12   7      ; " "
0069    MOV     13  12
0070    TGETS   12  12  11  ; "rep"
0071    ADDVN   14   2   1  ; 8
0072    CALL    12   2   3
0073    KSTR    13  16      ; ";;"
0074    CAT     12  12  13
0075    CALL    10   1   3
0076 => ITERC    7   3   3
0077    ITERL    7 => 0006
0078    LEN      4   3
0079    KSHORT   5   0
0080    ISGE     5   4
0081    JMP      4 => 0113
0082    GGET     4   5      ; "table"
0083    TGETS    4   4  10  ; "insert"
0084    MOV      5   1
0085    KSTR     6   7      ; " "
0086    MOV      7   6
0087    TGETS    6   6  11  ; "rep"
0088    MOV      8   2
0089    CALL     6   2   3
0090    KSTR     7  17      ; "case "$prev" in"
0091    CAT      6   6   7
0092    CALL     4   1   3
0093    GGET     4   5      ; "table"
0094    TGETS    4   4  10  ; "insert"
0095    MOV      5   1
0096    GGET     6   5      ; "table"
0097    TGETS    6   6   6  ; "concat"
0098    MOV      7   3
0099    KSTR     8  18      ; "\n"
0100    CALL     6   0   3
0101    CALLM    4   1   1
0102    GGET     4   5      ; "table"
0103    TGETS    4   4  10  ; "insert"
0104    MOV      5   1
0105    KSTR     6   7      ; " "
0106    MOV      7   6
0107    TGETS    6   6  11  ; "rep"
0108    MOV      8   2
0109    CALL     6   2   3
0110    KSTR     7  19      ; "esac\n"
0111    CAT      6   6   7
0112    CALL     4   1   3
0113 => RET0     0   1

-- BYTECODE -- argparse.lua:1264-1288
0001    TGETS    3   0   0  ; "_commands"
0002    LEN      3   3
0003    ISNEN    3   0      ; 0
0004    JMP      3 => 0006
0005    RET0     0   1
0006 => GGET     3   1      ; "table"
0007    TGETS    3   3   2  ; "insert"
0008    MOV      4   1
0009    KSTR     5   3      ; " "
0010    MOV      6   5
0011    TGETS    5   5   4  ; "rep"
0012    MOV      7   2
0013    CALL     5   2   3
0014    KSTR     6   5      ; "args=("${args[@]:1}")"
0015    CAT      5   5   6
0016    CALL     3   1   3
0017    GGET     3   1      ; "table"
0018    TGETS    3   3   2  ; "insert"
0019    MOV      4   1
0020    KSTR     5   3      ; " "
0021    MOV      6   5
0022    TGETS    5   5   4  ; "rep"
0023    MOV      7   2
0024    CALL     5   2   3
0025    KSTR     6   6      ; "for arg in "${args[@]}"; do"
0026    CAT      5   5   6
0027    CALL     3   1   3
0028    GGET     3   1      ; "table"
0029    TGETS    3   3   2  ; "insert"
0030    MOV      4   1
0031    KSTR     5   3      ; " "
0032    MOV      6   5
0033    TGETS    5   5   4  ; "rep"
0034    ADDVN    7   2   1  ; 4
0035    CALL     5   2   3
0036    KSTR     6   7      ; "case "$arg" in"
0037    CAT      5   5   6
0038    CALL     3   1   3
0039    GGET     3   8      ; "ipairs"
0040    TGETS    4   0   0  ; "_commands"
0041    CALL     3   4   2
0042    JMP      6 => 0131
0043 => GGET     8   1      ; "table"
0044    TGETS    8   8   2  ; "insert"
0045    MOV      9   1
0046    KSTR    10   3      ; " "
0047    MOV     11  10
0048    TGETS   10  10   4  ; "rep"
0049    ADDVN   12   2   2  ; 8
0050    CALL    10   2   3
0051    GGET    11   1      ; "table"
0052    TGETS   11  11   9  ; "concat"
0053    TGETS   12   7  10  ; "_aliases"
0054    KSTR    13  11      ; "|"
0055    CALL    11   2   3
0056    KSTR    12  12      ; ")"
0057    CAT     10  10  12
0058    CALL     8   1   3
0059    TGETS    8   0  13  ; "_parent"
0060    ISF          8
0061    JMP      9 => 0076
0062    GGET     8   1      ; "table"
0063    TGETS    8   8   2  ; "insert"
0064    MOV      9   1
0065    KSTR    10   3      ; " "
0066    MOV     11  10
0067    TGETS   10  10   4  ; "rep"
0068    ADDVN   12   2   3  ; 12
0069    CALL    10   2   3
0070    KSTR    11  14      ; "cmd="$cmd "
0071    TGETS   12   7  15  ; "_name"
0072    KSTR    13  16      ; """
0073    CAT     10  10  13
0074    CALL     8   1   3
0075    JMP      8 => 0089
0076 => GGET     8   1      ; "table"
0077    TGETS    8   8   2  ; "insert"
0078    MOV      9   1
0079    KSTR    10   3      ; " "
0080    MOV     11  10
0081    TGETS   10  10   4  ; "rep"
0082    ADDVN   12   2   3  ; 12
0083    CALL    10   2   3
0084    KSTR    11  17      ; "cmd=""
0085    TGETS   12   7  15  ; "_name"
0086    KSTR    13  16      ; """
0087    CAT     10  10  13
0088    CALL     8   1   3
0089 => GGET     8   1      ; "table"
0090    TGETS    8   8   2  ; "insert"
0091    MOV      9   1
0092    KSTR    10   3      ; " "
0093    MOV     11  10
0094    TGETS   10  10   4  ; "rep"
0095    ADDVN   12   2   3  ; 12
0096    CALL    10   2   3
0097    KSTR    11  18      ; "opts="$opts "
0098    MOV     13   7
0099    TGETS   12   7  19  ; "_get_options"
0100    CALL    12   2   2
0101    KSTR    13  16      ; """
0102    CAT     10  10  13
0103    CALL     8   1   3
0104    MOV      9   7
0105    TGETS    8   7  20  ; "_bash_get_cmd"
0106    MOV     10   1
0107    ADDVN   11   2   3  ; 12
0108    CALL     8   1   4
0109    GGET     8   1      ; "table"
0110    TGETS    8   8   2  ; "insert"
0111    MOV      9   1
0112    KSTR    10   3      ; " "
0113    MOV     11  10
0114    TGETS   10  10   4  ; "rep"
0115    ADDVN   12   2   3  ; 12
0116    CALL    10   2   3
0117    KSTR    11  21      ; "break"
0118    CAT     10  10  11
0119    CALL     8   1   3
0120    GGET     8   1      ; "table"
0121    TGETS    8   8   2  ; "insert"
0122    MOV      9   1
0123    KSTR    10   3      ; " "
0124    MOV     11  10
0125    TGETS   10  10   4  ; "rep"
0126    ADDVN   12   2   3  ; 12
0127    CALL    10   2   3
0128    KSTR    11  22      ; ";;"
0129    CAT     10  10  11
0130    CALL     8   1   3
0131 => ITERC    6   3   3
0132    ITERL    6 => 0043
0133    GGET     3   1      ; "table"
0134    TGETS    3   3   2  ; "insert"
0135    MOV      4   1
0136    KSTR     5   3      ; " "
0137    MOV      6   5
0138    TGETS    5   5   4  ; "rep"
0139    ADDVN    7   2   1  ; 4
0140    CALL     5   2   3
0141    KSTR     6  23      ; "esac"
0142    CAT      5   5   6
0143    CALL     3   1   3
0144    GGET     3   1      ; "table"
0145    TGETS    3   3   2  ; "insert"
0146    MOV      4   1
0147    KSTR     5   3      ; " "
0148    MOV      6   5
0149    TGETS    5   5   4  ; "rep"
0150    MOV      7   2
0151    CALL     5   2   3
0152    KSTR     6  24      ; "done"
0153    CAT      5   5   6
0154    CALL     3   1   3
0155    RET0     0   1

-- BYTECODE -- argparse.lua:1290-1312
0001    TNEW     2   0
0002    TGETS    3   0   0  ; "_parent"
0003    ISF          3
0004    JMP      4 => 0010
0005    MOV      4   0
0006    TGETS    3   0   1  ; "_bash_option_args"
0007    MOV      5   2
0008    KSHORT   6  12
0009    CALL     3   1   4
0010 => TGETS    3   0   2  ; "_commands"
0011    LEN      3   3
0012    KSHORT   4   0
0013    ISGE     4   3
0014    JMP      3 => 0031
0015    GGET     3   3      ; "table"
0016    TGETS    3   3   4  ; "insert"
0017    MOV      4   2
0018    KSTR     5   5      ; " "
0019    MOV      6   5
0020    TGETS    5   5   6  ; "rep"
0021    KSHORT   7  12
0022    CALL     5   2   3
0023    KSTR     6   7      ; "COMPREPLY=($(compgen -W ""
0024    MOV      8   0
0025    TGETS    7   0   8  ; "_get_commands"
0026    CALL     7   2   2
0027    KSTR     8   9      ; "" -- "$cur"))"
0028    CAT      5   5   8
0029    CALL     3   1   3
0030    JMP      3 => 0050
0031 => TGETS    3   0  10  ; "_is_help_command"
0032    ISF          3
0033    JMP      4 => 0050
0034    GGET     3   3      ; "table"
0035    TGETS    3   3   4  ; "insert"
0036    MOV      4   2
0037    KSTR     5   5      ; " "
0038    MOV      6   5
0039    TGETS    5   5   6  ; "rep"
0040    KSHORT   7  12
0041    CALL     5   2   3
0042    KSTR     6   7      ; "COMPREPLY=($(compgen -W ""
0043    TGETS    7   0   0  ; "_parent"
0044    MOV      8   7
0045    TGETS    7   7   8  ; "_get_commands"
0046    CALL     7   2   2
0047    KSTR     8   9      ; "" -- "$cur"))"
0048    CAT      5   5   8
0049    CALL     3   1   3
0050 => LEN      3   2
0051    KSHORT   4   0
0052    ISGE     4   3
0053    JMP      3 => 0090
0054    GGET     3   3      ; "table"
0055    TGETS    3   3   4  ; "insert"
0056    MOV      4   1
0057    KSTR     5   5      ; " "
0058    MOV      6   5
0059    TGETS    5   5   6  ; "rep"
0060    KSHORT   7   8
0061    CALL     5   2   3
0062    KSTR     6  11      ; "'"
0063    MOV      8   0
0064    TGETS    7   0  12  ; "_get_fullname"
0065    KPRI     9   2
0066    CALL     7   2   3
0067    KSTR     8  13      ; "')"
0068    CAT      5   5   8
0069    CALL     3   1   3
0070    GGET     3   3      ; "table"
0071    TGETS    3   3   4  ; "insert"
0072    MOV      4   1
0073    GGET     5   3      ; "table"
0074    TGETS    5   5  14  ; "concat"
0075    MOV      6   2
0076    KSTR     7  15      ; "\n"
0077    CALL     5   0   3
0078    CALLM    3   1   1
0079    GGET     3   3      ; "table"
0080    TGETS    3   3   4  ; "insert"
0081    MOV      4   1
0082    KSTR     5   5      ; " "
0083    MOV      6   5
0084    TGETS    5   5   6  ; "rep"
0085    KSHORT   7  12
0086    CALL     5   2   3
0087    KSTR     6  16      ; ";;"
0088    CAT      5   5   6
0089    CALL     3   1   3
0090 => GGET     3  17      ; "ipairs"
0091    TGETS    4   0   2  ; "_commands"
0092    CALL     3   4   2
0093    JMP      6 => 0098
0094 => MOV      9   7
0095    TGETS    8   7  18  ; "_bash_cmd_completions"
0096    MOV     10   1
0097    CALL     8   1   3
0098 => ITERC    6   3   3
0099    ITERL    6 => 0094
0100    RET0     0   1

-- BYTECODE -- argparse.lua:1314-1346
0001    UGET     1   0      ; base_name
0002    TGETS    2   0   1  ; "_name"
0003    CALL     1   2   2
0004    TSETS    1   0   0  ; "_basename"
0005    GGET     1   2      ; "assert"
0006    MOV      3   0
0007    TGETS    2   0   3  ; "_is_shell_safe"
0008    CALL     2   0   2
0009    CALLM    1   1   0
0010    TNEW     1   3
0011    KSTR     2   4      ; "_%s() {\n    local IFS=$' \t\n'\n    loc"~
0012    MOV      3   2
0013    TGETS    2   2   5  ; "format"
0014    TGETS    4   0   0  ; "_basename"
0015    MOV      6   0
0016    TGETS    5   0   6  ; "_get_options"
0017    CALL     5   0   2
0018    CALLM    2   0   2
0019    TSETM    2   0      ; 1
0020    MOV      3   0
0021    TGETS    2   0   7  ; "_bash_option_args"
0022    MOV      4   1
0023    KSHORT   5   4
0024    CALL     2   1   4
0025    MOV      3   0
0026    TGETS    2   0   8  ; "_bash_get_cmd"
0027    MOV      4   1
0028    KSHORT   5   4
0029    CALL     2   1   4
0030    TGETS    2   0   9  ; "_commands"
0031    LEN      2   2
0032    KSHORT   3   0
0033    ISGE     3   2
0034    JMP      2 => 0066
0035    GGET     2  10      ; "table"
0036    TGETS    2   2  11  ; "insert"
0037    MOV      3   1
0038    KSTR     4  12      ; ""
0039    CALL     2   1   3
0040    GGET     2  10      ; "table"
0041    TGETS    2   2  11  ; "insert"
0042    MOV      3   1
0043    KSTR     4  13      ; " "
0044    MOV      5   4
0045    TGETS    4   4  14  ; "rep"
0046    KSHORT   6   4
0047    CALL     4   2   3
0048    KSTR     5  15      ; "case "$cmd" in"
0049    CAT      4   4   5
0050    CALL     2   1   3
0051    MOV      3   0
0052    TGETS    2   0  16  ; "_bash_cmd_completions"
0053    MOV      4   1
0054    CALL     2   1   3
0055    GGET     2  10      ; "table"
0056    TGETS    2   2  11  ; "insert"
0057    MOV      3   1
0058    KSTR     4  13      ; " "
0059    MOV      5   4
0060    TGETS    4   4  14  ; "rep"
0061    KSHORT   6   4
0062    CALL     4   2   3
0063    KSTR     5  17      ; "esac\n"
0064    CAT      4   4   5
0065    CALL     2   1   3
0066 => GGET     2  10      ; "table"
0067    TGETS    2   2  11  ; "insert"
0068    MOV      3   1
0069    KSTR     4  18      ; "    if [[ "$cur" = -* ]]; then\n        "~
0070    MOV      5   4
0071    TGETS    4   4   5  ; "format"
0072    TGETS    6   0   0  ; "_basename"
0073    TGETS    7   0   0  ; "_basename"
0074    CALL     4   0   4
0075    CALLM    2   1   1
0076    GGET     2  10      ; "table"
0077    TGETS    2   2  19  ; "concat"
0078    MOV      3   1
0079    KSTR     4  20      ; "\n"
0080    CALLT    2   3

-- BYTECODE -- argparse.lua:1348-1416
0001    TGETS    4   0   0  ; "_parent"
0002    ISF          4
0003    JMP      5 => 0027
0004    GGET     4   1      ; "table"
0005    TGETS    4   4   2  ; "insert"
0006    MOV      5   1
0007    KSTR     6   3      ; " "
0008    MOV      7   6
0009    TGETS    6   6   4  ; "rep"
0010    MOV      8   3
0011    CALL     6   2   3
0012    KSTR     7   5      ; "options=("
0013    CAT      6   6   7
0014    CALL     4   1   3
0015    GGET     4   1      ; "table"
0016    TGETS    4   4   2  ; "insert"
0017    MOV      5   1
0018    KSTR     6   3      ; " "
0019    MOV      7   6
0020    TGETS    6   6   4  ; "rep"
0021    ADDVN    8   3   0  ; 2
0022    CALL     6   2   3
0023    KSTR     7   6      ; "$options"
0024    CAT      6   6   7
0025    CALL     4   1   3
0026    JMP      4 => 0038
0027 => GGET     4   1      ; "table"
0028    TGETS    4   4   2  ; "insert"
0029    MOV      5   1
0030    KSTR     6   3      ; " "
0031    MOV      7   6
0032    TGETS    6   6   4  ; "rep"
0033    MOV      8   3
0034    CALL     6   2   3
0035    KSTR     7   7      ; "local -a options=("
0036    CAT      6   6   7
0037    CALL     4   1   3
0038 => GGET     4   8      ; "ipairs"
0039    TGETS    5   0   9  ; "_options"
0040    CALL     4   4   2
0041    JMP      7 => 0162
0042 => TNEW     9   0
0043    TGETS   10   8  10  ; "_aliases"
0044    LEN     10  10
0045    KSHORT  11   1
0046    ISGE    11  10
0047    JMP     10 => 0070
0048    TGETS   10   8  11  ; "_maxcount"
0049    KSHORT  11   1
0050    ISGE    11  10
0051    JMP     10 => 0057
0052    GGET    10   1      ; "table"
0053    TGETS   10  10   2  ; "insert"
0054    MOV     11   9
0055    KSTR    12  12      ; ""*""
0056    CALL    10   1   3
0057 => GGET    10   1      ; "table"
0058    TGETS   10  10   2  ; "insert"
0059    MOV     11   9
0060    KSTR    12  13      ; "{"
0061    GGET    13   1      ; "table"
0062    TGETS   13  13  14  ; "concat"
0063    TGETS   14   8  10  ; "_aliases"
0064    KSTR    15  15      ; ","
0065    CALL    13   2   3
0066    KSTR    14  16      ; "}""
0067    CAT     12  12  14
0068    CALL    10   1   3
0069    JMP     10 => 0089
0070 => GGET    10   1      ; "table"
0071    TGETS   10  10   2  ; "insert"
0072    MOV     11   9
0073    KSTR    12  17      ; """
0074    CALL    10   1   3
0075    TGETS   10   8  11  ; "_maxcount"
0076    KSHORT  11   1
0077    ISGE    11  10
0078    JMP     10 => 0084
0079    GGET    10   1      ; "table"
0080    TGETS   10  10   2  ; "insert"
0081    MOV     11   9
0082    KSTR    12  18      ; "*"
0083    CALL    10   1   3
0084 => GGET    10   1      ; "table"
0085    TGETS   10  10   2  ; "insert"
0086    MOV     11   9
0087    TGETS   12   8  19  ; "_name"
0088    CALL    10   1   3
0089 => TGETS   10   8  20  ; "_description"
0090    ISF         10
0091    JMP     11 => 0108
0092    UGET    10   0      ; get_short_description
0093    MOV     11   8
0094    CALL    10   2   2
0095    MOV     11  10
0096    TGETS   10  10  21  ; "gsub"
0097    KSTR    12  22      ; "["%]:`$]"
0098    KSTR    13  23      ; "\%0"
0099    CALL    10   2   4
0100    GGET    11   1      ; "table"
0101    TGETS   11  11   2  ; "insert"
0102    MOV     12   9
0103    KSTR    13  24      ; "["
0104    MOV     14  10
0105    KSTR    15  25      ; "]"
0106    CAT     13  13  15
0107    CALL    11   1   3
0108 => TGETS   10   8  26  ; "_maxargs"
0109    GGET    11  27      ; "math"
0110    TGETS   11  11  28  ; "huge"
0111    ISNEV   10  11
0112    JMP     10 => 0118
0113    GGET    10   1      ; "table"
0114    TGETS   10  10   2  ; "insert"
0115    MOV     11   9
0116    KSTR    12  29      ; ":*"
0117    CALL    10   1   3
0118 => TGETS   10   8  30  ; "_choices"
0119    ISF         10
0120    JMP     11 => 0134
0121    GGET    10   1      ; "table"
0122    TGETS   10  10   2  ; "insert"
0123    MOV     11   9
0124    KSTR    12  31      ; ": :("
0125    GGET    13   1      ; "table"
0126    TGETS   13  13  14  ; "concat"
0127    TGETS   14   8  30  ; "_choices"
0128    KSTR    15   3      ; " "
0129    CALL    13   2   3
0130    KSTR    14  32      ; ")"
0131    CAT     12  12  14
0132    CALL    10   1   3
0133    JMP     10 => 0143
0134 => TGETS   10   8  26  ; "_maxargs"
0135    KSHORT  11   0
0136    ISGE    11  10
0137    JMP     10 => 0143
0138    GGET    10   1      ; "table"
0139    TGETS   10  10   2  ; "insert"
0140    MOV     11   9
0141    KSTR    12  33      ; ": :_files"
0142    CALL    10   1   3
0143 => GGET    10   1      ; "table"
0144    TGETS   10  10   2  ; "insert"
0145    MOV     11   9
0146    KSTR    12  17      ; """
0147    CALL    10   1   3
0148    GGET    10   1      ; "table"
0149    TGETS   10  10   2  ; "insert"
0150    MOV     11   1
0151    KSTR    12   3      ; " "
0152    MOV     13  12
0153    TGETS   12  12   4  ; "rep"
0154    ADDVN   14   3   0  ; 2
0155    CALL    12   2   3
0156    GGET    13   1      ; "table"
0157    TGETS   13  13  14  ; "concat"
0158    MOV     14   9
0159    CALL    13   2   2
0160    CAT     12  12  13
0161    CALL    10   1   3
0162 => ITERC    7   3   3
0163    ITERL    7 => 0042
0164    GGET     4   1      ; "table"
0165    TGETS    4   4   2  ; "insert"
0166    MOV      5   1
0167    KSTR     6   3      ; " "
0168    MOV      7   6
0169    TGETS    6   6   4  ; "rep"
0170    MOV      8   3
0171    CALL     6   2   3
0172    KSTR     7  32      ; ")"
0173    CAT      6   6   7
0174    CALL     4   1   3
0175    GGET     4   1      ; "table"
0176    TGETS    4   4   2  ; "insert"
0177    MOV      5   1
0178    KSTR     6   3      ; " "
0179    MOV      7   6
0180    TGETS    6   6   4  ; "rep"
0181    MOV      8   3
0182    CALL     6   2   3
0183    KSTR     7  34      ; "_arguments -s -S \"
0184    CAT      6   6   7
0185    CALL     4   1   3
0186    GGET     4   1      ; "table"
0187    TGETS    4   4   2  ; "insert"
0188    MOV      5   1
0189    KSTR     6   3      ; " "
0190    MOV      7   6
0191    TGETS    6   6   4  ; "rep"
0192    ADDVN    8   3   0  ; 2
0193    CALL     6   2   3
0194    KSTR     7  35      ; "$options \"
0195    CAT      6   6   7
0196    CALL     4   1   3
0197    TGETS    4   0  36  ; "_is_help_command"
0198    ISF          4
0199    JMP      5 => 0217
0200    GGET     4   1      ; "table"
0201    TGETS    4   4   2  ; "insert"
0202    MOV      5   1
0203    KSTR     6   3      ; " "
0204    MOV      7   6
0205    TGETS    6   6   4  ; "rep"
0206    ADDVN    8   3   0  ; 2
0207    CALL     6   2   3
0208    KSTR     7  37      ; "": :("
0209    TGETS    8   0   0  ; "_parent"
0210    MOV      9   8
0211    TGETS    8   8  38  ; "_get_commands"
0212    CALL     8   2   2
0213    KSTR     9  39      ; ")" \"
0214    CAT      6   6   9
0215    CALL     4   1   3
0216    JMP      4 => 0303
0217 => GGET     4   8      ; "ipairs"
0218    TGETS    5   0  40  ; "_arguments"
0219    CALL     4   4   2
0220    JMP      7 => 0272
0221 => KPRI     9   0
0222    TGETS   10   8  30  ; "_choices"
0223    ISF         10
0224    JMP     11 => 0234
0225    KSTR    10  31      ; ": :("
0226    GGET    11   1      ; "table"
0227    TGETS   11  11  14  ; "concat"
0228    TGETS   12   8  30  ; "_choices"
0229    KSTR    13   3      ; " "
0230    CALL    11   2   3
0231    KSTR    12  32      ; ")"
0232    CAT      9  10  12
0233    JMP     10 => 0235
0234 => KSTR     9  33      ; ": :_files"
0235 => TGETS   10   8  26  ; "_maxargs"
0236    GGET    11  27      ; "math"
0237    TGETS   11  11  28  ; "huge"
0238    ISNEV   10  11
0239    JMP     10 => 0254
0240    GGET    10   1      ; "table"
0241    TGETS   10  10   2  ; "insert"
0242    MOV     11   1
0243    KSTR    12   3      ; " "
0244    MOV     13  12
0245    TGETS   12  12   4  ; "rep"
0246    ADDVN   14   3   0  ; 2
0247    CALL    12   2   3
0248    KSTR    13  41      ; ""*"
0249    MOV     14   9
0250    KSTR    15  42      ; "" \"
0251    CAT     12  12  15
0252    CALL    10   1   3
0253    JMP      4 => 0274
0254 => KSHORT  10   1
0255    TGETS   11   8  26  ; "_maxargs"
0256    KSHORT  12   1
0257    FORI    10 => 0272
0258 => GGET    14   1      ; "table"
0259    TGETS   14  14   2  ; "insert"
0260    MOV     15   1
0261    KSTR    16   3      ; " "
0262    MOV     17  16
0263    TGETS   16  16   4  ; "rep"
0264    ADDVN   18   3   0  ; 2
0265    CALL    16   2   3
0266    KSTR    17  17      ; """
0267    MOV     18   9
0268    KSTR    19  42      ; "" \"
0269    CAT     16  16  19
0270    CALL    14   1   3
0271    FORL    10 => 0258
0272 => ITERC    7   3   3
0273    ITERL    7 => 0221
0274 => TGETS    4   0  43  ; "_commands"
0275    LEN      4   4
0276    KSHORT   5   0
0277    ISGE     5   4
0278    JMP      4 => 0303
0279    GGET     4   1      ; "table"
0280    TGETS    4   4   2  ; "insert"
0281    MOV      5   1
0282    KSTR     6   3      ; " "
0283    MOV      7   6
0284    TGETS    6   6   4  ; "rep"
0285    ADDVN    8   3   0  ; 2
0286    CALL     6   2   3
0287    KSTR     7  44      ; "": :_"
0288    MOV      8   2
0289    KSTR     9  45      ; "_cmds" \"
0290    CAT      6   6   9
0291    CALL     4   1   3
0292    GGET     4   1      ; "table"
0293    TGETS    4   4   2  ; "insert"
0294    MOV      5   1
0295    KSTR     6   3      ; " "
0296    MOV      7   6
0297    TGETS    6   6   4  ; "rep"
0298    ADDVN    8   3   0  ; 2
0299    CALL     6   2   3
0300    KSTR     7  46      ; ""*:: :->args" \"
0301    CAT      6   6   7
0302    CALL     4   1   3
0303 => GGET     4   1      ; "table"
0304    TGETS    4   4   2  ; "insert"
0305    MOV      5   1
0306    KSTR     6   3      ; " "
0307    MOV      7   6
0308    TGETS    6   6   4  ; "rep"
0309    ADDVN    8   3   0  ; 2
0310    CALL     6   2   3
0311    KSTR     7  47      ; "&& return 0"
0312    CAT      6   6   7
0313    CALL     4   1   3
0314    RET0     0   1

-- BYTECODE -- argparse.lua:1418-1436
0001    GGET     3   0      ; "table"
0002    TGETS    3   3   1  ; "insert"
0003    MOV      4   1
0004    KSTR     5   2      ; "\n_"
0005    MOV      6   2
0006    KSTR     7   3      ; "_cmds() {"
0007    CAT      5   5   7
0008    CALL     3   1   3
0009    GGET     3   0      ; "table"
0010    TGETS    3   3   1  ; "insert"
0011    MOV      4   1
0012    KSTR     5   4      ; "  local -a commands=("
0013    CALL     3   1   3
0014    GGET     3   5      ; "ipairs"
0015    TGETS    4   0   6  ; "_commands"
0016    CALL     3   4   2
0017    JMP      6 => 0072
0018 => TNEW     8   0
0019    TGETS    9   7   7  ; "_aliases"
0020    LEN      9   9
0021    KSHORT  10   1
0022    ISGE    10   9
0023    JMP      9 => 0037
0024    GGET     9   0      ; "table"
0025    TGETS    9   9   1  ; "insert"
0026    MOV     10   8
0027    KSTR    11   8      ; "{"
0028    GGET    12   0      ; "table"
0029    TGETS   12  12   9  ; "concat"
0030    TGETS   13   7   7  ; "_aliases"
0031    KSTR    14  10      ; ","
0032    CALL    12   2   3
0033    KSTR    13  11      ; "}""
0034    CAT     11  11  13
0035    CALL     9   1   3
0036    JMP      9 => 0044
0037 => GGET     9   0      ; "table"
0038    TGETS    9   9   1  ; "insert"
0039    MOV     10   8
0040    KSTR    11  12      ; """
0041    TGETS   12   7  13  ; "_name"
0042    CAT     11  11  12
0043    CALL     9   1   3
0044 => TGETS    9   7  14  ; "_description"
0045    ISF          9
0046    JMP     10 => 0061
0047    GGET     9   0      ; "table"
0048    TGETS    9   9   1  ; "insert"
0049    MOV     10   8
0050    KSTR    11  15      ; ":"
0051    UGET    12   0      ; get_short_description
0052    MOV     13   7
0053    CALL    12   2   2
0054    MOV     13  12
0055    TGETS   12  12  16  ; "gsub"
0056    KSTR    14  17      ; "["`$]"
0057    KSTR    15  18      ; "\%0"
0058    CALL    12   2   4
0059    CAT     11  11  12
0060    CALL     9   1   3
0061 => GGET     9   0      ; "table"
0062    TGETS    9   9   1  ; "insert"
0063    MOV     10   1
0064    KSTR    11  19      ; "    "
0065    GGET    12   0      ; "table"
0066    TGETS   12  12   9  ; "concat"
0067    MOV     13   8
0068    CALL    12   2   2
0069    KSTR    13  12      ; """
0070    CAT     11  11  13
0071    CALL     9   1   3
0072 => ITERC    6   3   3
0073    ITERL    6 => 0018
0074    GGET     3   0      ; "table"
0075    TGETS    3   3   1  ; "insert"
0076    MOV      4   1
0077    KSTR     5  20      ; "  )\n  _describe "command" commands\n}"
0078    CALL     3   1   3
0079    RET0     0   1

-- BYTECODE -- argparse.lua:1438-1455
0001    TGETS    5   0   0  ; "_commands"
0002    LEN      5   5
0003    ISNEN    5   0      ; 0
0004    JMP      5 => 0006
0005    RET0     0   1
0006 => MOV      6   0
0007    TGETS    5   0   1  ; "_zsh_cmds"
0008    MOV      7   2
0009    MOV      8   3
0010    CALL     5   1   4
0011    GGET     5   2      ; "table"
0012    TGETS    5   5   3  ; "insert"
0013    MOV      6   1
0014    KSTR     7   4      ; "\n"
0015    KSTR     8   5      ; " "
0016    MOV      9   8
0017    TGETS    8   8   6  ; "rep"
0018    MOV     10   4
0019    CALL     8   2   3
0020    KSTR     9   7      ; "case $words[1] in"
0021    CAT      7   7   9
0022    CALL     5   1   3
0023    GGET     5   8      ; "ipairs"
0024    TGETS    6   0   0  ; "_commands"
0025    CALL     5   4   2
0026    JMP      8 => 0071
0027 => MOV     10   3
0028    KSTR    11   9      ; "_"
0029    TGETS   12   9  10  ; "_name"
0030    CAT     10  10  12
0031    GGET    11   2      ; "table"
0032    TGETS   11  11   3  ; "insert"
0033    MOV     12   1
0034    KSTR    13   5      ; " "
0035    MOV     14  13
0036    TGETS   13  13   6  ; "rep"
0037    ADDVN   15   4   1  ; 2
0038    CALL    13   2   3
0039    GGET    14   2      ; "table"
0040    TGETS   14  14  11  ; "concat"
0041    TGETS   15   9  12  ; "_aliases"
0042    KSTR    16  13      ; "|"
0043    CALL    14   2   3
0044    KSTR    15  14      ; ")"
0045    CAT     13  13  15
0046    CALL    11   1   3
0047    MOV     12   9
0048    TGETS   11   9  15  ; "_zsh_arguments"
0049    MOV     13   1
0050    MOV     14  10
0051    ADDVN   15   4   2  ; 4
0052    CALL    11   1   5
0053    MOV     12   9
0054    TGETS   11   9  16  ; "_zsh_complete_help"
0055    MOV     13   1
0056    MOV     14   2
0057    MOV     15  10
0058    ADDVN   16   4   2  ; 4
0059    CALL    11   1   6
0060    GGET    11   2      ; "table"
0061    TGETS   11  11   3  ; "insert"
0062    MOV     12   1
0063    KSTR    13   5      ; " "
0064    MOV     14  13
0065    TGETS   13  13   6  ; "rep"
0066    ADDVN   15   4   2  ; 4
0067    CALL    13   2   3
0068    KSTR    14  17      ; ";;\n"
0069    CAT     13  13  14
0070    CALL    11   1   3
0071 => ITERC    8   3   3
0072    ITERL    8 => 0027
0073    GGET     5   2      ; "table"
0074    TGETS    5   5   3  ; "insert"
0075    MOV      6   1
0076    KSTR     7   5      ; " "
0077    MOV      8   7
0078    TGETS    7   7   6  ; "rep"
0079    MOV      9   4
0080    CALL     7   2   3
0081    KSTR     8  18      ; "esac"
0082    CAT      7   7   8
0083    CALL     5   1   3
0084    RET0     0   1

-- BYTECODE -- argparse.lua:1457-1477
0001    UGET     1   0      ; base_name
0002    TGETS    2   0   1  ; "_name"
0003    CALL     1   2   2
0004    TSETS    1   0   0  ; "_basename"
0005    GGET     1   2      ; "assert"
0006    MOV      3   0
0007    TGETS    2   0   3  ; "_is_shell_safe"
0008    CALL     2   0   2
0009    CALLM    1   1   0
0010    TNEW     1   3
0011    KSTR     2   4      ; "#compdef %s\n"
0012    MOV      3   2
0013    TGETS    2   2   5  ; "format"
0014    TGETS    4   0   0  ; "_basename"
0015    CALL     2   0   3
0016    TSETM    2   0      ; 1
0017    TNEW     2   0
0018    GGET     3   6      ; "table"
0019    TGETS    3   3   7  ; "insert"
0020    MOV      4   1
0021    KSTR     5   8      ; "_"
0022    TGETS    6   0   0  ; "_basename"
0023    KSTR     7   9      ; "() {"
0024    CAT      5   5   7
0025    CALL     3   1   3
0026    TGETS    3   0  10  ; "_commands"
0027    LEN      3   3
0028    KSHORT   4   0
0029    ISGE     4   3
0030    JMP      3 => 0041
0031    GGET     3   6      ; "table"
0032    TGETS    3   3   7  ; "insert"
0033    MOV      4   1
0034    KSTR     5  11      ; "  local context state state_descr line"
0035    CALL     3   1   3
0036    GGET     3   6      ; "table"
0037    TGETS    3   3   7  ; "insert"
0038    MOV      4   1
0039    KSTR     5  12      ; "  typeset -A opt_args\n"
0040    CALL     3   1   3
0041 => MOV      4   0
0042    TGETS    3   0  13  ; "_zsh_arguments"
0043    MOV      5   1
0044    TGETS    6   0   0  ; "_basename"
0045    KSHORT   7   2
0046    CALL     3   1   5
0047    MOV      4   0
0048    TGETS    3   0  14  ; "_zsh_complete_help"
0049    MOV      5   1
0050    MOV      6   2
0051    TGETS    7   0   0  ; "_basename"
0052    KSHORT   8   2
0053    CALL     3   1   6
0054    GGET     3   6      ; "table"
0055    TGETS    3   3   7  ; "insert"
0056    MOV      4   1
0057    KSTR     5  15      ; "\n  return 1"
0058    CALL     3   1   3
0059    GGET     3   6      ; "table"
0060    TGETS    3   3   7  ; "insert"
0061    MOV      4   1
0062    KSTR     5  16      ; "}"
0063    CALL     3   1   3
0064    GGET     3   6      ; "table"
0065    TGETS    3   3  17  ; "concat"
0066    MOV      4   1
0067    KSTR     5  18      ; "\n"
0068    CALL     3   2   3
0069    LEN      4   2
0070    KSHORT   5   0
0071    ISGE     5   4
0072    JMP      4 => 0081
0073    MOV      4   3
0074    KSTR     5  18      ; "\n"
0075    GGET     6   6      ; "table"
0076    TGETS    6   6  17  ; "concat"
0077    MOV      7   2
0078    KSTR     8  18      ; "\n"
0079    CALL     6   2   3
0080    CAT      3   4   6
0081 => MOV      4   3
0082    KSTR     5  19      ; "\n\n_"
0083    TGETS    6   0   0  ; "_basename"
0084    KSTR     7  18      ; "\n"
0085    CAT      4   4   7
0086    RET1     4   2

-- BYTECODE -- argparse.lua:1479-1481
0001    MOV      2   0
0002    TGETS    1   0   0  ; "gsub"
0003    KSTR     3   1      ; "[\']"
0004    KSTR     4   2      ; "\%0"
0005    CALLT    1   4

-- BYTECODE -- argparse.lua:1483-1501
0001    TGETS    3   0   0  ; "_commands"
0002    LEN      3   3
0003    ISNEN    3   0      ; 0
0004    JMP      3 => 0006
0005    RET0     0   1
0006 => GGET     3   1      ; "table"
0007    TGETS    3   3   2  ; "insert"
0008    MOV      4   1
0009    KSTR     5   3      ; " "
0010    MOV      6   5
0011    TGETS    5   5   4  ; "rep"
0012    MOV      7   2
0013    CALL     5   2   3
0014    KSTR     6   5      ; "set -e cmdline[1]"
0015    CAT      5   5   6
0016    CALL     3   1   3
0017    GGET     3   1      ; "table"
0018    TGETS    3   3   2  ; "insert"
0019    MOV      4   1
0020    KSTR     5   3      ; " "
0021    MOV      6   5
0022    TGETS    5   5   4  ; "rep"
0023    MOV      7   2
0024    CALL     5   2   3
0025    KSTR     6   6      ; "for arg in $cmdline"
0026    CAT      5   5   6
0027    CALL     3   1   3
0028    GGET     3   1      ; "table"
0029    TGETS    3   3   2  ; "insert"
0030    MOV      4   1
0031    KSTR     5   3      ; " "
0032    MOV      6   5
0033    TGETS    5   5   4  ; "rep"
0034    ADDVN    7   2   1  ; 4
0035    CALL     5   2   3
0036    KSTR     6   7      ; "switch $arg"
0037    CAT      5   5   6
0038    CALL     3   1   3
0039    GGET     3   8      ; "ipairs"
0040    TGETS    4   0   0  ; "_commands"
0041    CALL     3   4   2
0042    JMP      6 => 0087
0043 => GGET     8   1      ; "table"
0044    TGETS    8   8   2  ; "insert"
0045    MOV      9   1
0046    KSTR    10   3      ; " "
0047    MOV     11  10
0048    TGETS   10  10   4  ; "rep"
0049    ADDVN   12   2   2  ; 8
0050    CALL    10   2   3
0051    KSTR    11   9      ; "case "
0052    GGET    12   1      ; "table"
0053    TGETS   12  12  10  ; "concat"
0054    TGETS   13   7  11  ; "_aliases"
0055    KSTR    14   3      ; " "
0056    CALL    12   2   3
0057    CAT     10  10  12
0058    CALL     8   1   3
0059    GGET     8   1      ; "table"
0060    TGETS    8   8   2  ; "insert"
0061    MOV      9   1
0062    KSTR    10   3      ; " "
0063    MOV     11  10
0064    TGETS   10  10   4  ; "rep"
0065    ADDVN   12   2   3  ; 12
0066    CALL    10   2   3
0067    KSTR    11  12      ; "set cmd $cmd "
0068    TGETS   12   7  13  ; "_name"
0069    CAT     10  10  12
0070    CALL     8   1   3
0071    MOV      9   7
0072    TGETS    8   7  14  ; "_fish_get_cmd"
0073    MOV     10   1
0074    ADDVN   11   2   3  ; 12
0075    CALL     8   1   4
0076    GGET     8   1      ; "table"
0077    TGETS    8   8   2  ; "insert"
0078    MOV      9   1
0079    KSTR    10   3      ; " "
0080    MOV     11  10
0081    TGETS   10  10   4  ; "rep"
0082    ADDVN   12   2   3  ; 12
0083    CALL    10   2   3
0084    KSTR    11  15      ; "break"
0085    CAT     10  10  11
0086    CALL     8   1   3
0087 => ITERC    6   3   3
0088    ITERL    6 => 0043
0089    GGET     3   1      ; "table"
0090    TGETS    3   3   2  ; "insert"
0091    MOV      4   1
0092    KSTR     5   3      ; " "
0093    MOV      6   5
0094    TGETS    5   5   4  ; "rep"
0095    ADDVN    7   2   1  ; 4
0096    CALL     5   2   3
0097    KSTR     6  16      ; "end"
0098    CAT      5   5   6
0099    CALL     3   1   3
0100    GGET     3   1      ; "table"
0101    TGETS    3   3   2  ; "insert"
0102    MOV      4   1
0103    KSTR     5   3      ; " "
0104    MOV      6   5
0105    TGETS    5   5   4  ; "rep"
0106    MOV      7   2
0107    CALL     5   2   3
0108    KSTR     6  16      ; "end"
0109    CAT      5   5   6
0110    CALL     3   1   3
0111    RET0     0   1

-- BYTECODE -- argparse.lua:1503-1559
0001    KSTR     3   0      ; "complete -c "
0002    MOV      4   2
0003    CAT      3   3   4
0004    GGET     4   1      ; "table"
0005    TGETS    4   4   2  ; "insert"
0006    MOV      5   1
0007    KSTR     6   3      ; ""
0008    CALL     4   1   3
0009    GGET     4   4      ; "ipairs"
0010    TGETS    5   0   5  ; "_commands"
0011    CALL     4   4   2
0012    JMP      7 => 0062
0013 => GGET     9   1      ; "table"
0014    TGETS    9   9   6  ; "concat"
0015    TGETS   10   8   7  ; "_aliases"
0016    KSTR    11   8      ; " "
0017    CALL     9   2   3
0018    KPRI    10   0
0019    TGETS   11   0   9  ; "_parent"
0020    ISF         11
0021    JMP     12 => 0035
0022    KSTR    11  10      ; "%s -n '__fish_%s_using_command %s' -xa '"~
0023    MOV     12  11
0024    TGETS   11  11  11  ; "format"
0025    MOV     13   3
0026    MOV     14   2
0027    MOV     16   0
0028    TGETS   15   0  12  ; "_get_fullname"
0029    KPRI    17   2
0030    CALL    15   2   3
0031    MOV     16   9
0032    CALL    11   2   6
0033    MOV     10  11
0034    JMP     11 => 0043
0035 => KSTR    11  13      ; "%s -n '__fish_%s_using_command' -xa '%s'"
0036    MOV     12  11
0037    TGETS   11  11  11  ; "format"
0038    MOV     13   3
0039    MOV     14   2
0040    MOV     15   9
0041    CALL    11   2   5
0042    MOV     10  11
0043 => TGETS   11   8  14  ; "_description"
0044    ISF         11
0045    JMP     12 => 0057
0046    KSTR    11  15      ; "%s -d '%s'"
0047    MOV     12  11
0048    TGETS   11  11  11  ; "format"
0049    MOV     13  10
0050    UGET    14   0      ; fish_escape
0051    UGET    15   1      ; get_short_description
0052    MOV     16   8
0053    CALL    15   0   2
0054    CALLM   14   0   0
0055    CALLM   11   2   2
0056    MOV     10  11
0057 => GGET    11   1      ; "table"
0058    TGETS   11  11   2  ; "insert"
0059    MOV     12   1
0060    MOV     13  10
0061    CALL    11   1   3
0062 => ITERC    7   3   3
0063    ITERL    7 => 0013
0064    TGETS    4   0  16  ; "_is_help_command"
0065    ISF          4
0066    JMP      5 => 0086
0067    KSTR     4  10      ; "%s -n '__fish_%s_using_command %s' -xa '"~
0068    MOV      5   4
0069    TGETS    4   4  11  ; "format"
0070    MOV      6   3
0071    MOV      7   2
0072    MOV      9   0
0073    TGETS    8   0  12  ; "_get_fullname"
0074    KPRI    10   2
0075    CALL     8   2   3
0076    TGETS    9   0   9  ; "_parent"
0077    MOV     10   9
0078    TGETS    9   9  17  ; "_get_commands"
0079    CALL     9   0   2
0080    CALLM    4   2   4
0081    GGET     5   1      ; "table"
0082    TGETS    5   5   2  ; "insert"
0083    MOV      6   1
0084    MOV      7   4
0085    CALL     5   1   3
0086 => GGET     4   4      ; "ipairs"
0087    TGETS    5   0  18  ; "_options"
0088    CALL     4   4   2
0089    JMP      7 => 0196
0090 => TNEW     9   3
0091    TSETB    3   9   1
0092    TGETS   10   0   9  ; "_parent"
0093    ISF         10
0094    JMP     11 => 0108
0095    GGET    10   1      ; "table"
0096    TGETS   10  10   2  ; "insert"
0097    MOV     11   9
0098    KSTR    12  19      ; "-n '__fish_"
0099    MOV     13   2
0100    KSTR    14  20      ; "_seen_command "
0101    MOV     16   0
0102    TGETS   15   0  12  ; "_get_fullname"
0103    KPRI    17   2
0104    CALL    15   2   3
0105    KSTR    16  21      ; "'"
0106    CAT     12  12  16
0107    CALL    10   1   3
0108 => GGET    10   4      ; "ipairs"
0109    TGETS   11   8   7  ; "_aliases"
0110    CALL    10   4   2
0111    JMP     13 => 0145
0112 => MOV     16  14
0113    TGETS   15  14  22  ; "match"
0114    KSTR    17  23      ; "^%-.$"
0115    CALL    15   2   3
0116    ISF         15
0117    JMP     16 => 0129
0118    GGET    15   1      ; "table"
0119    TGETS   15  15   2  ; "insert"
0120    MOV     16   9
0121    KSTR    17  24      ; "-s "
0122    MOV     19  14
0123    TGETS   18  14  25  ; "sub"
0124    KSHORT  20   2
0125    CALL    18   2   3
0126    CAT     17  17  18
0127    CALL    15   1   3
0128    JMP     15 => 0145
0129 => MOV     16  14
0130    TGETS   15  14  22  ; "match"
0131    KSTR    17  26      ; "^%-%-.+"
0132    CALL    15   2   3
0133    ISF         15
0134    JMP     16 => 0145
0135    GGET    15   1      ; "table"
0136    TGETS   15  15   2  ; "insert"
0137    MOV     16   9
0138    KSTR    17  27      ; "-l "
0139    MOV     19  14
0140    TGETS   18  14  25  ; "sub"
0141    KSHORT  20   3
0142    CALL    18   2   3
0143    CAT     17  17  18
0144    CALL    15   1   3
0145 => ITERC   13   3   3
0146    ITERL   13 => 0112
0147    TGETS   10   8  28  ; "_choices"
0148    ISF         10
0149    JMP     11 => 0163
0150    GGET    10   1      ; "table"
0151    TGETS   10  10   2  ; "insert"
0152    MOV     11   9
0153    KSTR    12  29      ; "-xa '"
0154    GGET    13   1      ; "table"
0155    TGETS   13  13   6  ; "concat"
0156    TGETS   14   8  28  ; "_choices"
0157    KSTR    15   8      ; " "
0158    CALL    13   2   3
0159    KSTR    14  21      ; "'"
0160    CAT     12  12  14
0161    CALL    10   1   3
0162    JMP     10 => 0172
0163 => TGETS   10   8  30  ; "_minargs"
0164    KSHORT  11   0
0165    ISGE    11  10
0166    JMP     10 => 0172
0167    GGET    10   1      ; "table"
0168    TGETS   10  10   2  ; "insert"
0169    MOV     11   9
0170    KSTR    12  31      ; "-r"
0171    CALL    10   1   3
0172 => TGETS   10   8  14  ; "_description"
0173    ISF         10
0174    JMP     11 => 0187
0175    GGET    10   1      ; "table"
0176    TGETS   10  10   2  ; "insert"
0177    MOV     11   9
0178    KSTR    12  32      ; "-d '"
0179    UGET    13   0      ; fish_escape
0180    UGET    14   1      ; get_short_description
0181    MOV     15   8
0182    CALL    14   0   2
0183    CALLM   13   2   0
0184    KSTR    14  21      ; "'"
0185    CAT     12  12  14
0186    CALL    10   1   3
0187 => GGET    10   1      ; "table"
0188    TGETS   10  10   2  ; "insert"
0189    MOV     11   1
0190    GGET    12   1      ; "table"
0191    TGETS   12  12   6  ; "concat"
0192    MOV     13   9
0193    KSTR    14   8      ; " "
0194    CALL    12   0   3
0195    CALLM   10   1   1
0196 => ITERC    7   3   3
0197    ITERL    7 => 0090
0198    GGET     4   4      ; "ipairs"
0199    TGETS    5   0   5  ; "_commands"
0200    CALL     4   4   2
0201    JMP      7 => 0207
0202 => MOV     10   8
0203    TGETS    9   8  33  ; "_fish_complete_help"
0204    MOV     11   1
0205    MOV     12   2
0206    CALL     9   1   4
0207 => ITERC    7   3   3
0208    ITERL    7 => 0202
0209    RET0     0   1

-- BYTECODE -- argparse.lua:1561-1591
0001    UGET     1   0      ; base_name
0002    TGETS    2   0   1  ; "_name"
0003    CALL     1   2   2
0004    TSETS    1   0   0  ; "_basename"
0005    GGET     1   2      ; "assert"
0006    MOV      3   0
0007    TGETS    2   0   3  ; "_is_shell_safe"
0008    CALL     2   0   2
0009    CALLM    1   1   0
0010    TNEW     1   0
0011    TGETS    2   0   4  ; "_commands"
0012    LEN      2   2
0013    KSHORT   3   0
0014    ISGE     3   2
0015    JMP      2 => 0042
0016    GGET     2   5      ; "table"
0017    TGETS    2   2   6  ; "insert"
0018    MOV      3   1
0019    KSTR     4   7      ; "function __fish_%s_print_command\n    se"~
0020    MOV      5   4
0021    TGETS    4   4   8  ; "format"
0022    TGETS    6   0   0  ; "_basename"
0023    CALL     4   0   3
0024    CALLM    2   1   1
0025    MOV      3   0
0026    TGETS    2   0   9  ; "_fish_get_cmd"
0027    MOV      4   1
0028    KSHORT   5   4
0029    CALL     2   1   4
0030    GGET     2   5      ; "table"
0031    TGETS    2   2   6  ; "insert"
0032    MOV      3   1
0033    KSTR     4  10      ; "    echo "$cmd"\nend\n\nfunction __fish_"~
0034    MOV      5   4
0035    TGETS    4   4   8  ; "format"
0036    TGETS    6   0   0  ; "_basename"
0037    TGETS    7   0   0  ; "_basename"
0038    TGETS    8   0   0  ; "_basename"
0039    TGETS    9   0   0  ; "_basename"
0040    CALL     4   0   6
0041    CALLM    2   1   1
0042 => MOV      3   0
0043    TGETS    2   0  11  ; "_fish_complete_help"
0044    MOV      4   1
0045    TGETS    5   0   0  ; "_basename"
0046    CALL     2   1   4
0047    GGET     2   5      ; "table"
0048    TGETS    2   2  12  ; "concat"
0049    MOV      3   1
0050    KSTR     4  13      ; "\n"
0051    CALL     2   2   3
0052    KSTR     3  13      ; "\n"
0053    CAT      2   2   3
0054    RET1     2   2

-- BYTECODE -- argparse.lua:1593-1642
0001    TNEW     2   0
0002    KPRI     3   0
0003    TNEW     4   0
0004    GGET     5   0      ; "pairs"
0005    MOV      6   0
0006    CALL     5   4   2
0007    ISNEXT   8 => 0038
0008 => GGET     9   1      ; "type"
0009    MOV     10   8
0010    CALL     9   2   2
0011    ISNES    9   2      ; "string"
0012    JMP      9 => 0038
0013    KSHORT   9   1
0014    LEN     10   8
0015    KSHORT  11   1
0016    FORI     9 => 0038
0017 => MOV     14   8
0018    TGETS   13   8   3  ; "sub"
0019    KSHORT  15   1
0020    SUBVN   16  12   0  ; 1
0021    CALL    13   2   4
0022    MOV     15   8
0023    TGETS   14   8   3  ; "sub"
0024    ADDVN   16  12   0  ; 1
0025    CALL    14   2   3
0026    CAT      3  13  14
0027    TGETV   13   2   3
0028    IST         13
0029    JMP     13 => 0032
0030    TNEW    13   0
0031    TSETV   13   2   3
0032 => GGET    13   4      ; "table"
0033    TGETS   13  13   5  ; "insert"
0034    TGETV   14   2   3
0035    MOV     15   8
0036    CALL    13   1   3
0037    FORL     9 => 0017
0038 => ITERN    8   2   3
0039    ITERL    8 => 0008
0040    KSHORT   5   1
0041    LEN      6   1
0042    ADDVN    6   6   0  ; 1
0043    KSHORT   7   1
0044    FORI     5 => 0073
0045 => MOV     10   1
0046    TGETS    9   1   3  ; "sub"
0047    KSHORT  11   1
0048    SUBVN   12   8   0  ; 1
0049    CALL     9   2   4
0050    MOV     11   1
0051    TGETS   10   1   3  ; "sub"
0052    ADDVN   12   8   0  ; 1
0053    CALL    10   2   3
0054    CAT      3   9  10
0055    TGETV    9   0   3
0056    ISF          9
0057    JMP     10 => 0061
0058    KPRI     9   2
0059    TSETV    9   4   3
0060    JMP      9 => 0072
0061 => TGETV    9   2   3
0062    ISF          9
0063    JMP     10 => 0072
0064    GGET     9   6      ; "ipairs"
0065    TGETV   10   2   3
0066    CALL     9   4   2
0067    JMP     12 => 0070
0068 => KPRI    14   2
0069    TSETV   14   4  13
0070 => ITERC   12   3   3
0071    ITERL   12 => 0068
0072 => FORL     5 => 0045
0073 => GGET     5   7      ; "next"
0074    MOV      6   4
0075    CALL     5   2   2
0076    ISF          5
0077    JMP      6 => 0119
0078    GGET     6   7      ; "next"
0079    MOV      7   4
0080    MOV      8   5
0081    CALL     6   2   3
0082    ISF          6
0083    JMP      7 => 0113
0084    TNEW     6   0
0085    GGET     7   0      ; "pairs"
0086    MOV      8   4
0087    CALL     7   4   2
0088    ISNEXT  10 => 0097
0089 => GGET    11   4      ; "table"
0090    TGETS   11  11   5  ; "insert"
0091    MOV     12   6
0092    KSTR    13   8      ; "'"
0093    MOV     14  10
0094    KSTR    15   8      ; "'"
0095    CAT     13  13  15
0096    CALL    11   1   3
0097 => ITERN   10   2   3
0098    ITERL   10 => 0089
0099    GGET     7   4      ; "table"
0100    TGETS    7   7   9  ; "sort"
0101    MOV      8   6
0102    CALL     7   1   2
0103    KSTR     7  10      ; "\nDid you mean one of these: "
0104    GGET     8   4      ; "table"
0105    TGETS    8   8  11  ; "concat"
0106    MOV      9   6
0107    KSTR    10  12      ; " "
0108    CALL     8   2   3
0109    KSTR     9  13      ; "?"
0110    CAT      7   7   9
0111    RET1     7   2
0112    JMP      6 => 0121
0113 => KSTR     6  14      ; "\nDid you mean '"
0114    MOV      7   5
0115    KSTR     8  15      ; "'?"
0116    CAT      6   6   8
0117    RET1     6   2
0118    JMP      6 => 0121
0119 => KSTR     6  16      ; ""
0120    RET1     6   2
0121 => RET0     0   1

-- BYTECODE -- argparse.lua:1648-1655
0001    TSETS    1   0   0  ; "state"
0002    TGETS    3   1   1  ; "result"
0003    TSETS    3   0   1  ; "result"
0004    TSETS    2   0   2  ; "element"
0005    TGETS    3   2   4  ; "_target"
0006    IST          3
0007    JMP      4 => 0011
0008    MOV      4   2
0009    TGETS    3   2   5  ; "_get_default_target"
0010    CALL     3   2   2
0011 => TSETS    3   0   3  ; "target"
0012    TGETS    3   0   1  ; "result"
0013    TGETS    4   0   3  ; "target"
0014    MOV      6   2
0015    TGETS    5   2   7  ; "_get_action"
0016    CALL     5   3   2
0017    TSETV    6   3   4
0018    TSETS    5   0   6  ; "action"
0019    RET1     0   2

-- BYTECODE -- argparse.lua:1657-1659
0001    TGETS    2   0   0  ; "state"
0002    MOV      3   2
0003    TGETS    2   2   1  ; "error"
0004    MOV      4   1
0005    VARG     5   0   2
0006    CALLM    2   1   2
0007    RET0     0   1

-- BYTECODE -- argparse.lua:1661-1683
0001    TGETS    3   0   0  ; "element"
0002    TGETS    3   3   1  ; "_convert"
0003    ISF          3
0004    JMP      4 => 0043
0005    KNIL     4   5
0006    GGET     6   2      ; "type"
0007    MOV      7   3
0008    CALL     6   2   2
0009    ISNES    6   3      ; "function"
0010    JMP      6 => 0017
0011    MOV      6   3
0012    MOV      7   1
0013    CALL     6   3   2
0014    MOV      5   7
0015    MOV      4   6
0016    JMP      6 => 0029
0017 => GGET     6   2      ; "type"
0018    TGETV    7   3   2
0019    CALL     6   2   2
0020    ISNES    6   3      ; "function"
0021    JMP      6 => 0028
0022    TGETV    6   3   2
0023    MOV      7   1
0024    CALL     6   3   2
0025    MOV      5   7
0026    MOV      4   6
0027    JMP      6 => 0029
0028 => TGETV    4   3   1
0029 => ISNEP    4   0
0030    JMP      6 => 0042
0031    MOV      7   0
0032    TGETS    6   0   4  ; "error"
0033    ISF          5
0034    JMP      8 => 0037
0035    KSTR     8   5      ; "%s"
0036    JMP      9 => 0038
0037 => KSTR     8   6      ; "malformed argument '%s'"
0038 => ISTC     9   5
0039    JMP      9 => 0041
0040    MOV      9   1
0041 => CALL     6   1   4
0042 => MOV      1   4
0043 => RET1     1   2

-- BYTECODE -- argparse.lua:1685-1687
0001    TGETS    2   0   0  ; "element"
0002    TGETS    2   2   1  ; "_defmode"
0003    MOV      3   2
0004    TGETS    2   2   2  ; "find"
0005    MOV      4   1
0006    CALL     2   2   3
0007    ISF          2
0008    JMP      3 => 0011
0009    TGETS    2   0   0  ; "element"
0010    TGETS    2   2   3  ; "_default"
0011 => RET1     2   2

-- BYTECODE -- argparse.lua:1689-1698
0001    KSTR     4   0      ; ""
0002    ISEQV    1   2
0003    JMP      5 => 0012
0004    KSTR     5   1      ; "at "
0005    ISF          3
0006    JMP      6 => 0009
0007    KSTR     6   2      ; "most"
0008    JMP      7 => 0010
0009 => KSTR     6   3      ; "least"
0010 => KSTR     7   4      ; " "
0011    CAT      4   5   7
0012 => ISF          3
0013    JMP      5 => 0016
0014    ISTC     5   2
0015    JMP      5 => 0017
0016 => MOV      5   1
0017 => MOV      6   4
0018    GGET     7   5      ; "tostring"
0019    MOV      8   5
0020    CALL     7   2   2
0021    KSTR     8   4      ; " "
0022    MOV      9   0
0023    ISNEN    5   0      ; 1
0024    JMP     10 => 0027
0025    KSTR    10   0      ; ""
0026    JMP     11 => 0028
0027 => KSTR    10   6      ; "s"
0028 => CAT      6   6  10
0029    RET1     6   2

-- BYTECODE -- argparse.lua:1700-1702
0001    KSTR     2   1      ; "%s '%s'"
0002    MOV      3   2
0003    TGETS    2   2   2  ; "format"
0004    ISF          1
0005    JMP      4 => 0008
0006    KSTR     4   3      ; "option"
0007    JMP      5 => 0009
0008 => KSTR     4   4      ; "argument"
0009 => ISTC     5   1
0010    JMP      5 => 0013
0011    TGETS    5   0   5  ; "element"
0012    TGETS    5   5   6  ; "_name"
0013 => CALL     2   2   4
0014    TSETS    2   0   0  ; "name"
0015    RET0     0   1

-- BYTECODE -- argparse.lua:1704-1726
0001    KPRI     1   2
0002    TSETS    1   0   0  ; "open"
0003    KPRI     1   1
0004    TSETS    1   0   1  ; "overwrite"
0005    TGETS    1   0   2  ; "invocations"
0006    TGETS    2   0   3  ; "element"
0007    TGETS    2   2   4  ; "_maxcount"
0008    ISGT     2   1
0009    JMP      1 => 0032
0010    TGETS    1   0   3  ; "element"
0011    TGETS    1   1   5  ; "_overwrite"
0012    ISF          1
0013    JMP      2 => 0017
0014    KPRI     1   2
0015    TSETS    1   0   1  ; "overwrite"
0016    JMP      1 => 0035
0017 => UGET     1   0      ; bound
0018    KSTR     2   6      ; "time"
0019    TGETS    3   0   3  ; "element"
0020    TGETS    3   3   7  ; "_mincount"
0021    TGETS    4   0   3  ; "element"
0022    TGETS    4   4   4  ; "_maxcount"
0023    KPRI     5   2
0024    CALL     1   2   5
0025    MOV      3   0
0026    TGETS    2   0   8  ; "error"
0027    KSTR     4   9      ; "%s must be used %s"
0028    TGETS    5   0  10  ; "name"
0029    MOV      6   1
0030    CALL     2   1   5
0031    JMP      1 => 0035
0032 => TGETS    1   0   2  ; "invocations"
0033    ADDVN    1   1   0  ; 1
0034    TSETS    1   0   2  ; "invocations"
0035 => TNEW     1   0
0036    TSETS    1   0  11  ; "args"
0037    TGETS    1   0   3  ; "element"
0038    TGETS    1   1  12  ; "_maxargs"
0039    KSHORT   2   0
0040    ISGT     1   2
0041    JMP      1 => 0045
0042    MOV      2   0
0043    TGETS    1   0  13  ; "close"
0044    CALL     1   1   2
0045 => TGETS    1   0   0  ; "open"
0046    RET1     1   2

-- BYTECODE -- argparse.lua:1728-1739
0001    TGETS    2   0   0  ; "element"
0002    TGETS    2   2   1  ; "_choices"
0003    ISF          2
0004    JMP      3 => 0044
0005    GGET     2   2      ; "ipairs"
0006    TGETS    3   0   0  ; "element"
0007    TGETS    3   3   1  ; "_choices"
0008    CALL     2   4   2
0009    JMP      5 => 0013
0010 => ISNEV    1   6
0011    JMP      7 => 0013
0012    RET0     0   1
0013 => ITERC    5   3   3
0014    ITERL    5 => 0010
0015    KSTR     2   3      ; "'"
0016    GGET     3   4      ; "table"
0017    TGETS    3   3   5  ; "concat"
0018    TGETS    4   0   0  ; "element"
0019    TGETS    4   4   1  ; "_choices"
0020    KSTR     5   6      ; "', '"
0021    CALL     3   2   3
0022    KSTR     4   3      ; "'"
0023    CAT      2   2   4
0024    GGET     3   7      ; "getmetatable"
0025    TGETS    4   0   0  ; "element"
0026    CALL     3   2   2
0027    UGET     4   0      ; Option
0028    ISEQV    3   4
0029    JMP      3 => 0032
0030    KPRI     3   1
0031    JMP      4 => 0033
0032 => KPRI     3   2
0033 => MOV      5   0
0034    TGETS    4   0   8  ; "error"
0035    KSTR     6   9      ; "%s%s must be one of %s"
0036    ISF          3
0037    JMP      7 => 0040
0038    KSTR     7  10      ; "argument for "
0039    JMP      8 => 0041
0040 => KSTR     7  11      ; ""
0041 => TGETS    8   0  12  ; "name"
0042    MOV      9   2
0043    CALL     4   1   6
0044 => RET0     0   1

-- BYTECODE -- argparse.lua:1741-1751
0001    MOV      3   0
0002    TGETS    2   0   0  ; "check_choices"
0003    MOV      4   1
0004    CALL     2   1   3
0005    MOV      3   0
0006    TGETS    2   0   1  ; "convert"
0007    MOV      4   1
0008    TGETS    5   0   2  ; "args"
0009    LEN      5   5
0010    ADDVN    5   5   0  ; 1
0011    CALL     2   2   4
0012    MOV      1   2
0013    GGET     2   3      ; "table"
0014    TGETS    2   2   4  ; "insert"
0015    TGETS    3   0   2  ; "args"
0016    MOV      4   1
0017    CALL     2   1   3
0018    TGETS    2   0   2  ; "args"
0019    LEN      2   2
0020    TGETS    3   0   5  ; "element"
0021    TGETS    3   3   6  ; "_maxargs"
0022    ISGT     3   2
0023    JMP      2 => 0027
0024    MOV      3   0
0025    TGETS    2   0   7  ; "close"
0026    CALL     2   1   2
0027 => TGETS    2   0   8  ; "open"
0028    RET1     2   2

-- BYTECODE -- argparse.lua:1753-1757
0001 => TGETS    1   0   0  ; "args"
0002    LEN      1   1
0003    TGETS    2   0   1  ; "element"
0004    TGETS    2   2   2  ; "_minargs"
0005    ISGE     1   2
0006    JMP      1 => 0014
0007    LOOP     1 => 0014
0008    MOV      2   0
0009    TGETS    1   0   3  ; "pass"
0010    TGETS    3   0   1  ; "element"
0011    TGETS    3   3   4  ; "_default"
0012    CALL     1   1   3
0013    JMP      1 => 0001
0014 => RET0     0   1

-- BYTECODE -- argparse.lua:1759-1795
0001    TGETS    1   0   0  ; "open"
0002    ISF          1
0003    JMP      2 => 0093
0004    KPRI     1   1
0005    TSETS    1   0   0  ; "open"
0006    TGETS    1   0   1  ; "args"
0007    LEN      1   1
0008    TGETS    2   0   2  ; "element"
0009    TGETS    2   2   3  ; "_minargs"
0010    ISGE     1   2
0011    JMP      1 => 0059
0012    MOV      2   0
0013    TGETS    1   0   4  ; "default"
0014    KSTR     3   5      ; "a"
0015    CALL     1   2   3
0016    ISF          1
0017    JMP      2 => 0022
0018    MOV      2   0
0019    TGETS    1   0   6  ; "complete_invocation"
0020    CALL     1   1   2
0021    JMP      1 => 0059
0022 => TGETS    1   0   1  ; "args"
0023    LEN      1   1
0024    ISNEN    1   0      ; 0
0025    JMP      1 => 0047
0026    GGET     1   7      ; "getmetatable"
0027    TGETS    2   0   2  ; "element"
0028    CALL     1   2   2
0029    UGET     2   0      ; Argument
0030    ISNEV    1   2
0031    JMP      1 => 0038
0032    MOV      2   0
0033    TGETS    1   0   8  ; "error"
0034    KSTR     3   9      ; "missing %s"
0035    TGETS    4   0  10  ; "name"
0036    CALL     1   1   4
0037    JMP      1 => 0047
0038 => TGETS    1   0   2  ; "element"
0039    TGETS    1   1  11  ; "_maxargs"
0040    ISNEN    1   1      ; 1
0041    JMP      1 => 0047
0042    MOV      2   0
0043    TGETS    1   0   8  ; "error"
0044    KSTR     3  12      ; "%s requires an argument"
0045    TGETS    4   0  10  ; "name"
0046    CALL     1   1   4
0047 => MOV      2   0
0048    TGETS    1   0   8  ; "error"
0049    KSTR     3  13      ; "%s requires %s"
0050    TGETS    4   0  10  ; "name"
0051    UGET     5   1      ; bound
0052    KSTR     6  14      ; "argument"
0053    TGETS    7   0   2  ; "element"
0054    TGETS    7   7   3  ; "_minargs"
0055    TGETS    8   0   2  ; "element"
0056    TGETS    8   8  11  ; "_maxargs"
0057    CALL     5   0   4
0058    CALLM    1   1   3
0059 => KPRI     1   0
0060    TGETS    2   0   2  ; "element"
0061    TGETS    2   2  11  ; "_maxargs"
0062    ISNEN    2   0      ; 0
0063    JMP      2 => 0067
0064    TGETS    2   0   1  ; "args"
0065    TGETB    1   2   1
0066    JMP      2 => 0087
0067 => TGETS    2   0   2  ; "element"
0068    TGETS    2   2  11  ; "_maxargs"
0069    ISNEN    2   1      ; 1
0070    JMP      2 => 0086
0071    TGETS    2   0   2  ; "element"
0072    TGETS    2   2   3  ; "_minargs"
0073    ISNEN    2   0      ; 0
0074    JMP      2 => 0083
0075    TGETS    2   0   2  ; "element"
0076    TGETS    2   2  15  ; "_mincount"
0077    TGETS    3   0   2  ; "element"
0078    TGETS    3   3  16  ; "_maxcount"
0079    ISEQV    2   3
0080    JMP      2 => 0083
0081    TGETS    1   0   1  ; "args"
0082    JMP      2 => 0087
0083 => TGETS    2   0   1  ; "args"
0084    TGETB    1   2   1
0085    JMP      2 => 0087
0086 => TGETS    1   0   1  ; "args"
0087 => TGETS    2   0  17  ; "action"
0088    TGETS    3   0  18  ; "result"
0089    TGETS    4   0  19  ; "target"
0090    MOV      5   1
0091    TGETS    6   0  20  ; "overwrite"
0092    CALL     2   1   5
0093 => RET0     0   1

-- BYTECODE -- argparse.lua:1807-1813
0001    TSETS    1   0   0  ; "parser"
0002    TSETS    2   0   1  ; "error_handler"
0003    MOV      4   1
0004    TGETS    3   1   3  ; "_update_charset"
0005    CALL     3   2   2
0006    TSETS    3   0   2  ; "charset"
0007    MOV      4   0
0008    TGETS    3   0   4  ; "switch"
0009    MOV      5   1
0010    CALL     3   1   3
0011    RET1     0   2

-- BYTECODE -- argparse.lua:1815-1817
0001    TGETS    2   0   0  ; "error_handler"
0002    TGETS    3   0   1  ; "parser"
0003    MOV      5   1
0004    TGETS    4   1   2  ; "format"
0005    VARG     6   0   2
0006    CALLM    4   0   1
0007    CALLM    2   1   1
0008    RET0     0   1

-- BYTECODE -- argparse.lua:1819-1861
0001    TSETS    1   0   0  ; "parser"
0002    TGETS    2   1   1  ; "_action"
0003    ISF          2
0004    JMP      3 => 0014
0005    GGET     2   2      ; "table"
0006    TGETS    2   2   3  ; "insert"
0007    TGETS    3   0   4  ; "command_actions"
0008    TDUP     4   5
0009    TGETS    5   1   1  ; "_action"
0010    TSETS    5   4   6  ; "action"
0011    TGETS    5   1   7  ; "_name"
0012    TSETS    5   4   8  ; "name"
0013    CALL     2   1   3
0014 => GGET     2   9      ; "ipairs"
0015    TGETS    3   1  10  ; "_options"
0016    CALL     2   4   2
0017    JMP      5 => 0037
0018 => UGET     7   0      ; ElementState
0019    MOV      8   0
0020    MOV      9   6
0021    CALL     7   2   3
0022    MOV      6   7
0023    GGET     7   2      ; "table"
0024    TGETS    7   7   3  ; "insert"
0025    TGETS    8   0  11  ; "options"
0026    MOV      9   6
0027    CALL     7   1   3
0028    GGET     7   9      ; "ipairs"
0029    TGETS    8   6  12  ; "element"
0030    TGETS    8   8  13  ; "_aliases"
0031    CALL     7   4   2
0032    JMP     10 => 0035
0033 => TGETS   12   0  11  ; "options"
0034    TSETV    6  12  11
0035 => ITERC   10   3   3
0036    ITERL   10 => 0033
0037 => ITERC    5   3   3
0038    ITERL    5 => 0018
0039    GGET     2   9      ; "ipairs"
0040    TGETS    3   1  14  ; "_mutexes"
0041    CALL     2   4   2
0042    JMP      5 => 0062
0043 => GGET     7   9      ; "ipairs"
0044    MOV      8   6
0045    CALL     7   4   2
0046    JMP     10 => 0060
0047 => TGETS   12   0  15  ; "element_to_mutexes"
0048    TGETV   12  12  11
0049    IST         12
0050    JMP     12 => 0054
0051    TGETS   12   0  15  ; "element_to_mutexes"
0052    TNEW    13   0
0053    TSETV   13  12  11
0054 => GGET    12   2      ; "table"
0055    TGETS   12  12   3  ; "insert"
0056    TGETS   13   0  15  ; "element_to_mutexes"
0057    TGETV   13  13  11
0058    MOV     14   6
0059    CALL    12   1   3
0060 => ITERC   10   3   3
0061    ITERL   10 => 0047
0062 => ITERC    5   3   3
0063    ITERL    5 => 0043
0064    GGET     2   9      ; "ipairs"
0065    TGETS    3   1  16  ; "_arguments"
0066    CALL     2   4   2
0067    JMP      5 => 0084
0068 => UGET     7   0      ; ElementState
0069    MOV      8   0
0070    MOV      9   6
0071    CALL     7   2   3
0072    MOV      6   7
0073    GGET     7   2      ; "table"
0074    TGETS    7   7   3  ; "insert"
0075    TGETS    8   0  17  ; "arguments"
0076    MOV      9   6
0077    CALL     7   1   3
0078    MOV      8   6
0079    TGETS    7   6  18  ; "set_name"
0080    CALL     7   1   2
0081    MOV      8   6
0082    TGETS    7   6  19  ; "invoke"
0083    CALL     7   1   2
0084 => ITERC    5   3   3
0085    ITERL    5 => 0068
0086    TGETS    2   1  21  ; "_handle_options"
0087    TSETS    2   0  20  ; "handle_options"
0088    TGETS    2   0  17  ; "arguments"
0089    TGETS    3   0  23  ; "argument_i"
0090    TGETV    2   2   3
0091    TSETS    2   0  22  ; "argument"
0092    TGETS    2   1  25  ; "_commands"
0093    TSETS    2   0  24  ; "commands"
0094    GGET     2   9      ; "ipairs"
0095    TGETS    3   0  24  ; "commands"
0096    CALL     2   4   2
0097    JMP      5 => 0106
0098 => GGET     7   9      ; "ipairs"
0099    TGETS    8   6  13  ; "_aliases"
0100    CALL     7   4   2
0101    JMP     10 => 0104
0102 => TGETS   12   0  24  ; "commands"
0103    TSETV    6  12  11
0104 => ITERC   10   3   3
0105    ITERL   10 => 0102
0106 => ITERC    5   3   3
0107    ITERL    5 => 0098
0108    RET0     0   1

-- BYTECODE -- argparse.lua:1863-1871
0001    TGETS    2   0   0  ; "options"
0002    TGETV    2   2   1
0003    IST          2
0004    JMP      3 => 0015
0005    MOV      4   0
0006    TGETS    3   0   1  ; "error"
0007    KSTR     5   2      ; "unknown option '%s'%s"
0008    MOV      6   1
0009    UGET     7   0      ; get_tip
0010    TGETS    8   0   0  ; "options"
0011    MOV      9   1
0012    CALL     7   0   3
0013    CALLM    3   1   3
0014    JMP      3 => 0016
0015 => RET1     2   2
0016 => RET0     0   1

-- BYTECODE -- argparse.lua:1873-1885
0001    TGETS    2   0   0  ; "commands"
0002    TGETV    2   2   1
0003    IST          2
0004    JMP      3 => 0025
0005    TGETS    3   0   0  ; "commands"
0006    LEN      3   3
0007    KSHORT   4   0
0008    ISGE     4   3
0009    JMP      3 => 0020
0010    MOV      4   0
0011    TGETS    3   0   1  ; "error"
0012    KSTR     5   2      ; "unknown command '%s'%s"
0013    MOV      6   1
0014    UGET     7   0      ; get_tip
0015    TGETS    8   0   0  ; "commands"
0016    MOV      9   1
0017    CALL     7   0   3
0018    CALLM    3   1   3
0019    JMP      3 => 0026
0020 => MOV      4   0
0021    TGETS    3   0   1  ; "error"
0022    KSTR     5   3      ; "too many arguments"
0023    CALL     3   1   3
0024    JMP      3 => 0026
0025 => RET1     2   2
0026 => RET0     0   1

-- BYTECODE -- argparse.lua:1887-1899
0001    TGETS    2   0   0  ; "element_to_mutexes"
0002    TGETS    3   1   1  ; "element"
0003    TGETV    2   2   3
0004    ISF          2
0005    JMP      3 => 0029
0006    GGET     2   2      ; "ipairs"
0007    TGETS    3   0   0  ; "element_to_mutexes"
0008    TGETS    4   1   1  ; "element"
0009    TGETV    3   3   4
0010    CALL     2   4   2
0011    JMP      5 => 0027
0012 => TGETS    7   0   3  ; "mutex_to_element_state"
0013    TGETV    7   7   6
0014    ISF          7
0015    JMP      8 => 0025
0016    ISEQV    7   1
0017    JMP      8 => 0025
0018    MOV      9   0
0019    TGETS    8   0   4  ; "error"
0020    KSTR    10   5      ; "%s can not be used together with %s"
0021    TGETS   11   1   6  ; "name"
0022    TGETS   12   7   6  ; "name"
0023    CALL     8   1   5
0024    JMP      8 => 0027
0025 => TGETS    8   0   3  ; "mutex_to_element_state"
0026    TSETV    1   8   6
0027 => ITERC    5   3   3
0028    ITERL    5 => 0012
0029 => RET0     0   1

-- BYTECODE -- argparse.lua:1901-1909
0001    MOV      4   0
0002    TGETS    3   0   0  ; "close"
0003    CALL     3   1   2
0004    MOV      4   1
0005    TGETS    3   1   1  ; "set_name"
0006    MOV      5   2
0007    CALL     3   1   3
0008    MOV      4   0
0009    TGETS    3   0   2  ; "check_mutexes"
0010    MOV      5   1
0011    MOV      6   2
0012    CALL     3   1   4
0013    MOV      4   1
0014    TGETS    3   1   3  ; "invoke"
0015    CALL     3   2   2
0016    ISF          3
0017    JMP      4 => 0019
0018    TSETS    1   0   4  ; "option"
0019 => RET0     0   1

-- BYTECODE -- argparse.lua:1911-1933
0001    TGETS    2   0   0  ; "option"
0002    ISF          2
0003    JMP      3 => 0014
0004    TGETS    2   0   0  ; "option"
0005    MOV      3   2
0006    TGETS    2   2   1  ; "pass"
0007    MOV      4   1
0008    CALL     2   2   3
0009    IST          2
0010    JMP      2 => 0060
0011    KPRI     2   0
0012    TSETS    2   0   0  ; "option"
0013    JMP      2 => 0060
0014 => TGETS    2   0   2  ; "argument"
0015    ISF          2
0016    JMP      3 => 0036
0017    MOV      3   0
0018    TGETS    2   0   3  ; "check_mutexes"
0019    TGETS    4   0   2  ; "argument"
0020    CALL     2   1   3
0021    TGETS    2   0   2  ; "argument"
0022    MOV      3   2
0023    TGETS    2   2   1  ; "pass"
0024    MOV      4   1
0025    CALL     2   2   3
0026    IST          2
0027    JMP      2 => 0060
0028    TGETS    2   0   4  ; "argument_i"
0029    ADDVN    2   2   0  ; 1
0030    TSETS    2   0   4  ; "argument_i"
0031    TGETS    2   0   5  ; "arguments"
0032    TGETS    3   0   4  ; "argument_i"
0033    TGETV    2   2   3
0034    TSETS    2   0   2  ; "argument"
0035    JMP      2 => 0060
0036 => MOV      3   0
0037    TGETS    2   0   6  ; "get_command"
0038    MOV      4   1
0039    CALL     2   2   3
0040    TGETS    3   0   7  ; "result"
0041    TGETS    4   2   8  ; "_target"
0042    IST          4
0043    JMP      5 => 0045
0044    TGETS    4   2   9  ; "_name"
0045 => KPRI     5   2
0046    TSETV    5   3   4
0047    TGETS    3   0  10  ; "parser"
0048    TGETS    3   3  11  ; "_command_target"
0049    ISF          3
0050    JMP      4 => 0056
0051    TGETS    3   0   7  ; "result"
0052    TGETS    4   0  10  ; "parser"
0053    TGETS    4   4  11  ; "_command_target"
0054    TGETS    5   2   9  ; "_name"
0055    TSETV    5   3   4
0056 => MOV      4   0
0057    TGETS    3   0  12  ; "switch"
0058    MOV      5   2
0059    CALL     3   1   3
0060 => RET0     0   1

-- BYTECODE -- argparse.lua:1935-1940
0001    TGETS    1   0   0  ; "option"
0002    ISF          1
0003    JMP      2 => 0010
0004    TGETS    1   0   0  ; "option"
0005    MOV      2   1
0006    TGETS    1   1   1  ; "close"
0007    CALL     1   1   2
0008    KPRI     1   0
0009    TSETS    1   0   0  ; "option"
0010 => RET0     0   1

-- BYTECODE -- argparse.lua:1942-1988
0001    MOV      2   0
0002    TGETS    1   0   0  ; "close"
0003    CALL     1   1   2
0004    TGETS    1   0   1  ; "argument_i"
0005    TGETS    2   0   2  ; "arguments"
0006    LEN      2   2
0007    KSHORT   3   1
0008    FORI     1 => 0029
0009 => TGETS    5   0   2  ; "arguments"
0010    TGETV    5   5   4
0011    TGETS    6   5   3  ; "args"
0012    LEN      6   6
0013    ISNEN    6   0      ; 0
0014    JMP      6 => 0025
0015    MOV      7   5
0016    TGETS    6   5   4  ; "default"
0017    KSTR     8   5      ; "u"
0018    CALL     6   2   3
0019    ISF          6
0020    JMP      7 => 0025
0021    MOV      7   5
0022    TGETS    6   5   6  ; "complete_invocation"
0023    CALL     6   1   2
0024    JMP      6 => 0028
0025 => MOV      7   5
0026    TGETS    6   5   0  ; "close"
0027    CALL     6   1   2
0028 => FORL     1 => 0009
0029 => TGETS    1   0   7  ; "parser"
0030    TGETS    1   1   8  ; "_require_command"
0031    ISF          1
0032    JMP      2 => 0042
0033    TGETS    1   0   9  ; "commands"
0034    LEN      1   1
0035    KSHORT   2   0
0036    ISGE     2   1
0037    JMP      1 => 0042
0038    MOV      2   0
0039    TGETS    1   0  10  ; "error"
0040    KSTR     3  11      ; "a command is required"
0041    CALL     1   1   3
0042 => GGET     1  12      ; "ipairs"
0043    TGETS    2   0  13  ; "options"
0044    CALL     1   4   2
0045    JMP      4 => 0117
0046 => TGETS    6   5  14  ; "name"
0047    IST          6
0048    JMP      7 => 0055
0049    KSTR     6  15      ; "option '%s'"
0050    MOV      7   6
0051    TGETS    6   6  16  ; "format"
0052    TGETS    8   5  17  ; "element"
0053    TGETS    8   8  18  ; "_name"
0054    CALL     6   2   3
0055 => TSETS    6   5  14  ; "name"
0056    TGETS    6   5  19  ; "invocations"
0057    ISNEN    6   0      ; 0
0058    JMP      6 => 0074
0059    MOV      7   5
0060    TGETS    6   5   4  ; "default"
0061    KSTR     8   5      ; "u"
0062    CALL     6   2   3
0063    ISF          6
0064    JMP      7 => 0074
0065    MOV      7   5
0066    TGETS    6   5  20  ; "invoke"
0067    CALL     6   1   2
0068    MOV      7   5
0069    TGETS    6   5   6  ; "complete_invocation"
0070    CALL     6   1   2
0071    MOV      7   5
0072    TGETS    6   5   0  ; "close"
0073    CALL     6   1   2
0074 => TGETS    6   5  17  ; "element"
0075    TGETS    6   6  21  ; "_mincount"
0076    TGETS    7   5  19  ; "invocations"
0077    ISGE     7   6
0078    JMP      7 => 0117
0079    MOV      8   5
0080    TGETS    7   5   4  ; "default"
0081    KSTR     9  22      ; "a"
0082    CALL     7   2   3
0083    ISF          7
0084    JMP      8 => 0097
0085 => TGETS    7   5  19  ; "invocations"
0086    ISGE     7   6
0087    JMP      7 => 0117
0088    LOOP     7 => 0096
0089    MOV      8   5
0090    TGETS    7   5  20  ; "invoke"
0091    CALL     7   1   2
0092    MOV      8   5
0093    TGETS    7   5   0  ; "close"
0094    CALL     7   1   2
0095    JMP      7 => 0085
0096 => JMP      7 => 0117
0097 => TGETS    7   5  19  ; "invocations"
0098    ISNEN    7   0      ; 0
0099    JMP      7 => 0106
0100    MOV      8   0
0101    TGETS    7   0  10  ; "error"
0102    KSTR     9  23      ; "missing %s"
0103    TGETS   10   5  14  ; "name"
0104    CALL     7   1   4
0105    JMP      7 => 0117
0106 => MOV      8   0
0107    TGETS    7   0  10  ; "error"
0108    KSTR     9  24      ; "%s must be used %s"
0109    TGETS   10   5  14  ; "name"
0110    UGET    11   0      ; bound
0111    KSTR    12  25      ; "time"
0112    MOV     13   6
0113    TGETS   14   5  17  ; "element"
0114    TGETS   14  14  26  ; "_maxcount"
0115    CALL    11   0   4
0116    CALLM    7   1   3
0117 => ITERC    4   3   3
0118    ITERL    4 => 0046
0119    TGETS    1   0  27  ; "command_actions"
0120    LEN      1   1
0121    KSHORT   2   1
0122    KSHORT   3  -1
0123    FORI     1 => 0133
0124 => TGETS    5   0  27  ; "command_actions"
0125    TGETV    5   5   4
0126    TGETS    5   5  28  ; "action"
0127    TGETS    6   0  29  ; "result"
0128    TGETS    7   0  27  ; "command_actions"
0129    TGETV    7   7   4
0130    TGETS    7   7  14  ; "name"
0131    CALL     5   1   3
0132    FORL     1 => 0124
0133 => RET0     0   1

-- BYTECODE -- argparse.lua:1990-2051
0001    GGET     2   0      ; "ipairs"
0002    MOV      3   1
0003    CALL     2   4   2
0004    JMP      5 => 0144
0005 => KPRI     7   2
0006    TGETS    8   0   1  ; "handle_options"
0007    ISF          8
0008    JMP      9 => 0138
0009    MOV      9   6
0010    TGETS    8   6   2  ; "sub"
0011    KSHORT  10   1
0012    KSHORT  11   1
0013    CALL     8   2   4
0014    TGETS    9   0   3  ; "charset"
0015    TGETV    9   9   8
0016    ISF          9
0017    JMP     10 => 0138
0018    LEN      9   6
0019    KSHORT  10   1
0020    ISGE    10   9
0021    JMP      9 => 0138
0022    KPRI     7   1
0023    MOV     10   6
0024    TGETS    9   6   2  ; "sub"
0025    KSHORT  11   2
0026    KSHORT  12   2
0027    CALL     9   2   4
0028    ISNEV    9   8
0029    JMP      9 => 0101
0030    LEN      9   6
0031    ISNEN    9   0      ; 2
0032    JMP      9 => 0053
0033    TGETS    9   0   4  ; "options"
0034    TGETV    9   9   6
0035    ISF          9
0036    JMP     10 => 0047
0037    MOV     10   0
0038    TGETS    9   0   5  ; "get_option"
0039    MOV     11   6
0040    CALL     9   2   3
0041    MOV     11   0
0042    TGETS   10   0   6  ; "invoke"
0043    MOV     12   9
0044    MOV     13   6
0045    CALL    10   1   4
0046    JMP      9 => 0050
0047 => MOV     10   0
0048    TGETS    9   0   7  ; "close"
0049    CALL     9   1   2
0050 => KPRI     9   1
0051    TSETS    9   0   1  ; "handle_options"
0052    JMP      9 => 0138
0053 => MOV     10   6
0054    TGETS    9   6   8  ; "find"
0055    KSTR    11   9      ; "="
0056    CALL     9   2   3
0057    ISF          9
0058    JMP     10 => 0091
0059    MOV     11   6
0060    TGETS   10   6   2  ; "sub"
0061    KSHORT  12   1
0062    SUBVN   13   9   1  ; 1
0063    CALL    10   2   4
0064    MOV     12   0
0065    TGETS   11   0   5  ; "get_option"
0066    MOV     13  10
0067    CALL    11   2   3
0068    TGETS   12  11  10  ; "element"
0069    TGETS   12  12  11  ; "_maxargs"
0070    KSHORT  13   0
0071    ISGT    12  13
0072    JMP     12 => 0078
0073    MOV     13   0
0074    TGETS   12   0  12  ; "error"
0075    KSTR    14  13      ; "option '%s' does not take arguments"
0076    MOV     15  10
0077    CALL    12   1   4
0078 => MOV     13   0
0079    TGETS   12   0   6  ; "invoke"
0080    MOV     14  11
0081    MOV     15  10
0082    CALL    12   1   4
0083    MOV     13   0
0084    TGETS   12   0  14  ; "pass"
0085    MOV     15   6
0086    TGETS   14   6   2  ; "sub"
0087    ADDVN   16   9   1  ; 1
0088    CALL    14   0   3
0089    CALLM   12   1   1
0090    JMP     10 => 0138
0091 => MOV     11   0
0092    TGETS   10   0   5  ; "get_option"
0093    MOV     12   6
0094    CALL    10   2   3
0095    MOV     12   0
0096    TGETS   11   0   6  ; "invoke"
0097    MOV     13  10
0098    MOV     14   6
0099    CALL    11   1   4
0100    JMP      9 => 0138
0101 => KSHORT   9   2
0102    LEN     10   6
0103    KSHORT  11   1
0104    FORI     9 => 0138
0105 => MOV     13   8
0106    MOV     15   6
0107    TGETS   14   6   2  ; "sub"
0108    MOV     16  12
0109    MOV     17  12
0110    CALL    14   2   4
0111    CAT     13  13  14
0112    MOV     15   0
0113    TGETS   14   0   5  ; "get_option"
0114    MOV     16  13
0115    CALL    14   2   3
0116    MOV     16   0
0117    TGETS   15   0   6  ; "invoke"
0118    MOV     17  14
0119    MOV     18  13
0120    CALL    15   1   4
0121    LEN     15   6
0122    ISEQV   12  15
0123    JMP     15 => 0137
0124    TGETS   15  14  10  ; "element"
0125    TGETS   15  15  11  ; "_maxargs"
0126    KSHORT  16   0
0127    ISGE    16  15
0128    JMP     15 => 0137
0129    MOV     16   0
0130    TGETS   15   0  14  ; "pass"
0131    MOV     18   6
0132    TGETS   17   6   2  ; "sub"
0133    ADDVN   19  12   1  ; 1
0134    CALL    17   0   3
0135    CALLM   15   1   1
0136    JMP      9 => 0138
0137 => FORL     9 => 0105
0138 => ISF          7
0139    JMP      8 => 0144
0140    MOV      9   0
0141    TGETS    8   0  14  ; "pass"
0142    MOV     10   6
0143    CALL     8   1   3
0144 => ITERC    5   3   3
0145    ITERL    5 => 0005
0146    MOV      3   0
0147    TGETS    2   0  15  ; "finalize"
0148    CALL     2   1   2
0149    TGETS    2   0  16  ; "result"
0150    RET1     2   2

-- BYTECODE -- argparse.lua:2053-2056
0001    GGET     2   0      ; "io"
0002    TGETS    2   2   1  ; "stderr"
0003    MOV      3   2
0004    TGETS    2   2   2  ; "write"
0005    KSTR     4   3      ; "%s\n\nError: %s\n"
0006    MOV      5   4
0007    TGETS    4   4   4  ; "format"
0008    MOV      7   0
0009    TGETS    6   0   5  ; "get_usage"
0010    CALL     6   2   2
0011    MOV      7   1
0012    CALL     4   0   4
0013    CALLM    2   1   1
0014    GGET     2   6      ; "os"
0015    TGETS    2   2   7  ; "exit"
0016    KSHORT   3   1
0017    CALL     2   1   2
0018    RET0     0   1

-- BYTECODE -- argparse.lua:2061-2063
0001    UGET     3   0      ; ParseState
0002    MOV      4   0
0003    MOV      5   2
0004    CALL     3   2   3
0005    MOV      4   3
0006    TGETS    3   3   0  ; "parse"
0007    ISTC     5   1
0008    JMP      5 => 0010
0009    UGET     5   1      ; default_cmdline
0010 => CALLT    3   3

-- BYTECODE -- argparse.lua:2065-2067
0001    MOV      3   0
0002    TGETS    2   0   0  ; "_parse"
0003    MOV      4   1
0004    TGETS    5   0   1  ; "error"
0005    CALLT    2   4

-- BYTECODE -- argparse.lua:2069-2071
0001    GGET     1   0      ; "tostring"
0002    MOV      2   0
0003    CALL     1   2   2
0004    KSTR     2   1      ; "\noriginal "
0005    GGET     3   2      ; "debug"
0006    TGETS    3   3   3  ; "traceback"
0007    KSTR     4   4      ; ""
0008    KSHORT   5   2
0009    CALL     3   2   3
0010    MOV      4   3
0011    TGETS    3   3   5  ; "sub"
0012    KSHORT   5   2
0013    CALL     3   2   3
0014    CAT      1   1   3
0015    RET1     1   2

-- BYTECODE -- argparse.lua:2077-2080
0001    USETV    0   1      ; parse_error
0002    GGET     2   0      ; "error"
0003    MOV      3   1
0004    KSHORT   4   0
0005    CALL     2   1   3
0006    RET0     0   1

-- BYTECODE -- argparse.lua:2076-2081
0001    UGET     0   0      ; self
0002    MOV      1   0
0003    TGETS    0   0   0  ; "_parse"
0004    UGET     2   1      ; args
0005    FNEW     3   1      ; argparse.lua:2077
0006    UCLO     0 => 0007
0007 => CALLT    0   4

-- BYTECODE -- argparse.lua:2073-2090
0001    KPRI     2   0
0002    GGET     3   0      ; "xpcall"
0003    FNEW     4   1      ; argparse.lua:2076
0004    UGET     5   0      ; xpcall_error_handler
0005    CALL     3   3   3
0006    ISF          3
0007    JMP      5 => 0013
0008    KPRI     5   2
0009    MOV      6   4
0010    UCLO     0 => 0011
0011 => RET      5   3
0012    JMP      5 => 0024
0013 => IST          2
0014    JMP      5 => 0020
0015    GGET     5   2      ; "error"
0016    MOV      6   4
0017    KSHORT   7   0
0018    CALL     5   1   3
0019    JMP      5 => 0024
0020 => KPRI     5   1
0021    MOV      6   2
0022    UCLO     0 => 0023
0023 => RET      5   3
0024 => UCLO     0 => 0025
0025 => RET0     0   1

-- BYTECODE -- argparse.lua:2096-2098
0001    UGET     1   0      ; Parser
0002    UGET     2   1      ; default_cmdline
0003    TGETB    2   2   0
0004    CALL     1   2   2
0005    MOV      2   1
0006    TGETS    1   1   0  ; "add_help"
0007    KPRI     3   2
0008    CALL     1   2   3
0009    VARG     2   0   1
0010    CALLMT   1   0

-- BYTECODE -- argparse.lua:0-2101
0001    FNEW     0   0      ; argparse.lua:23
0002    FNEW     1   1      ; argparse.lua:38
0003    FNEW     2   2      ; argparse.lua:112
0004    FNEW     3   3      ; argparse.lua:122
0005    TDUP     4   4
0006    FNEW     5   5      ; argparse.lua:127
0007    TSETB    5   4   2
0008    TDUP     5   6
0009    FNEW     6   7      ; argparse.lua:144
0010    TSETB    6   5   2
0011    FNEW     6   8      ; argparse.lua:157
0012    FNEW     7   9      ; argparse.lua:185
0013    TNEW     8   0
0014    TDUP     9  10
0015    FNEW    10  11      ; argparse.lua:201
0016    TSETB   10   9   2
0017    TDUP    10  12
0018    FNEW    11  13      ; argparse.lua:209
0019    TSETB   11  10   2
0020    TDUP    11  14
0021    FNEW    12  15      ; argparse.lua:213
0022    TSETB   12  11   2
0023    TDUP    12  16
0024    FNEW    13  17      ; argparse.lua:221
0025    TSETB   13  12   2
0026    MOV     13   1
0027    TDUP    14  18
0028    TNEW    15   0
0029    TSETS   15  14  19  ; "_arguments"
0030    TNEW    15   0
0031    TSETS   15  14  20  ; "_options"
0032    TNEW    15   0
0033    TSETS   15  14  21  ; "_commands"
0034    TNEW    15   0
0035    TSETS   15  14  22  ; "_mutexes"
0036    TNEW    15   0
0037    TSETS   15  14  23  ; "_groups"
0038    TDUP    15  24
0039    MOV     16   3
0040    KSTR    17  25      ; "name"
0041    KSTR    18  26      ; "string"
0042    CALL    16   2   3
0043    TSETB   16  15   1
0044    MOV     16   3
0045    KSTR    17  27      ; "description"
0046    KSTR    18  26      ; "string"
0047    CALL    16   2   3
0048    TSETB   16  15   2
0049    MOV     16   3
0050    KSTR    17  28      ; "epilog"
0051    KSTR    18  26      ; "string"
0052    CALL    16   2   3
0053    TSETB   16  15   3
0054    MOV     16   3
0055    KSTR    17  29      ; "usage"
0056    KSTR    18  26      ; "string"
0057    CALL    16   2   3
0058    TSETB   16  15   4
0059    MOV     16   3
0060    KSTR    17  30      ; "help"
0061    KSTR    18  26      ; "string"
0062    CALL    16   2   3
0063    TSETB   16  15   5
0064    MOV     16   3
0065    KSTR    17  31      ; "require_command"
0066    KSTR    18  32      ; "boolean"
0067    CALL    16   2   3
0068    TSETB   16  15   6
0069    MOV     16   3
0070    KSTR    17  33      ; "handle_options"
0071    KSTR    18  32      ; "boolean"
0072    CALL    16   2   3
0073    TSETB   16  15   7
0074    MOV     16   3
0075    KSTR    17  34      ; "action"
0076    KSTR    18  35      ; "function"
0077    CALL    16   2   3
0078    TSETB   16  15   8
0079    MOV     16   3
0080    KSTR    17  36      ; "command_target"
0081    KSTR    18  26      ; "string"
0082    CALL    16   2   3
0083    TSETB   16  15   9
0084    MOV     16   3
0085    KSTR    17  37      ; "help_vertical_space"
0086    KSTR    18  38      ; "number"
0087    CALL    16   2   3
0088    TSETB   16  15  10
0089    MOV     16   3
0090    KSTR    17  39      ; "usage_margin"
0091    KSTR    18  38      ; "number"
0092    CALL    16   2   3
0093    TSETB   16  15  11
0094    MOV     16   3
0095    KSTR    17  40      ; "usage_max_width"
0096    KSTR    18  38      ; "number"
0097    CALL    16   2   3
0098    TSETB   16  15  12
0099    MOV     16   3
0100    KSTR    17  41      ; "help_usage_margin"
0101    KSTR    18  38      ; "number"
0102    CALL    16   2   3
0103    TSETB   16  15  13
0104    MOV     16   3
0105    KSTR    17  42      ; "help_description_margin"
0106    KSTR    18  38      ; "number"
0107    CALL    16   2   3
0108    TSETB   16  15  14
0109    MOV     16   3
0110    KSTR    17  43      ; "help_max_width"
0111    KSTR    18  38      ; "number"
0112    CALL    16   2   3
0113    TSETB   16  15  15
0114    TSETB   12  15  16
0115    CALL    13   2   3
0116    MOV     14   1
0117    TDUP    15  44
0118    TNEW    16   0
0119    TSETS   16  15  45  ; "_aliases"
0120    TNEW    16   0
0121    TSETS   16  15  46  ; "_public_aliases"
0122    TDUP    16  47
0123    TSETB    4  16   1
0124    MOV     17   3
0125    KSTR    18  27      ; "description"
0126    KSTR    19  26      ; "string"
0127    CALL    17   2   3
0128    TSETB   17  16   2
0129    MOV     17   3
0130    KSTR    18  28      ; "epilog"
0131    KSTR    19  26      ; "string"
0132    CALL    17   2   3
0133    TSETB   17  16   3
0134    TSETB    5  16   4
0135    MOV     17   3
0136    KSTR    18  48      ; "summary"
0137    KSTR    19  26      ; "string"
0138    CALL    17   2   3
0139    TSETB   17  16   5
0140    MOV     17   3
0141    KSTR    18  49      ; "target"
0142    KSTR    19  26      ; "string"
0143    CALL    17   2   3
0144    TSETB   17  16   6
0145    MOV     17   3
0146    KSTR    18  29      ; "usage"
0147    KSTR    19  26      ; "string"
0148    CALL    17   2   3
0149    TSETB   17  16   7
0150    MOV     17   3
0151    KSTR    18  30      ; "help"
0152    KSTR    19  26      ; "string"
0153    CALL    17   2   3
0154    TSETB   17  16   8
0155    MOV     17   3
0156    KSTR    18  31      ; "require_command"
0157    KSTR    19  32      ; "boolean"
0158    CALL    17   2   3
0159    TSETB   17  16   9
0160    MOV     17   3
0161    KSTR    18  33      ; "handle_options"
0162    KSTR    19  32      ; "boolean"
0163    CALL    17   2   3
0164    TSETB   17  16  10
0165    MOV     17   3
0166    KSTR    18  34      ; "action"
0167    KSTR    19  35      ; "function"
0168    CALL    17   2   3
0169    TSETB   17  16  11
0170    MOV     17   3
0171    KSTR    18  36      ; "command_target"
0172    KSTR    19  26      ; "string"
0173    CALL    17   2   3
0174    TSETB   17  16  12
0175    MOV     17   3
0176    KSTR    18  37      ; "help_vertical_space"
0177    KSTR    19  38      ; "number"
0178    CALL    17   2   3
0179    TSETB   17  16  13
0180    MOV     17   3
0181    KSTR    18  39      ; "usage_margin"
0182    KSTR    19  38      ; "number"
0183    CALL    17   2   3
0184    TSETB   17  16  14
0185    MOV     17   3
0186    KSTR    18  40      ; "usage_max_width"
0187    KSTR    19  38      ; "number"
0188    CALL    17   2   3
0189    TSETB   17  16  15
0190    MOV     17   3
0191    KSTR    18  41      ; "help_usage_margin"
0192    KSTR    19  38      ; "number"
0193    CALL    17   2   3
0194    TSETB   17  16  16
0195    MOV     17   3
0196    KSTR    18  42      ; "help_description_margin"
0197    KSTR    19  38      ; "number"
0198    CALL    17   2   3
0199    TSETB   17  16  17
0200    MOV     17   3
0201    KSTR    18  43      ; "help_max_width"
0202    KSTR    19  38      ; "number"
0203    CALL    17   2   3
0204    TSETB   17  16  18
0205    MOV     17   3
0206    KSTR    18  50      ; "hidden"
0207    KSTR    19  32      ; "boolean"
0208    CALL    17   2   3
0209    TSETB   17  16  19
0210    TSETB   12  16  20
0211    MOV     17  13
0212    CALL    14   2   4
0213    MOV     15   1
0214    TDUP    16  51
0215    TDUP    17  52
0216    MOV     18   3
0217    KSTR    19  25      ; "name"
0218    KSTR    20  26      ; "string"
0219    CALL    18   2   3
0220    TSETB   18  17   1
0221    MOV     18   3
0222    KSTR    19  27      ; "description"
0223    KSTR    20  26      ; "string"
0224    CALL    18   2   3
0225    TSETB   18  17   2
0226    TSETB   11  17   3
0227    MOV     18   3
0228    KSTR    19  53      ; "convert"
0229    KSTR    20  35      ; "function"
0230    KSTR    21  54      ; "table"
0231    CALL    18   2   4
0232    TSETB   18  17   4
0233    MOV     18   7
0234    KSTR    19  55      ; "args"
0235    CALL    18   2   2
0236    TSETB   18  17   5
0237    MOV     18   3
0238    KSTR    19  49      ; "target"
0239    KSTR    20  26      ; "string"
0240    CALL    18   2   3
0241    TSETB   18  17   6
0242    MOV     18   3
0243    KSTR    19  56      ; "defmode"
0244    KSTR    20  26      ; "string"
0245    CALL    18   2   3
0246    TSETB   18  17   7
0247    MOV     18   3
0248    KSTR    19  57      ; "show_default"
0249    KSTR    20  32      ; "boolean"
0250    CALL    18   2   3
0251    TSETB   18  17   8
0252    MOV     18   3
0253    KSTR    19  58      ; "argname"
0254    KSTR    20  26      ; "string"
0255    KSTR    21  54      ; "table"
0256    CALL    18   2   4
0257    TSETB   18  17   9
0258    MOV     18   3
0259    KSTR    19  59      ; "choices"
0260    KSTR    20  54      ; "table"
0261    CALL    18   2   3
0262    TSETB   18  17  10
0263    MOV     18   3
0264    KSTR    19  50      ; "hidden"
0265    KSTR    20  32      ; "boolean"
0266    CALL    18   2   3
0267    TSETB   18  17  11
0268    TSETB    9  17  12
0269    TSETB   10  17  13
0270    CALL    15   2   3
0271    MOV     16   1
0272    TDUP    17  60
0273    TNEW    18   0
0274    TSETS   18  17  45  ; "_aliases"
0275    TNEW    18   0
0276    TSETS   18  17  46  ; "_public_aliases"
0277    TDUP    18  61
0278    TSETB    4  18   1
0279    MOV     19   3
0280    KSTR    20  27      ; "description"
0281    KSTR    21  26      ; "string"
0282    CALL    19   2   3
0283    TSETB   19  18   2
0284    TSETB   11  18   3
0285    MOV     19   3
0286    KSTR    20  53      ; "convert"
0287    KSTR    21  35      ; "function"
0288    KSTR    22  54      ; "table"
0289    CALL    19   2   4
0290    TSETB   19  18   4
0291    MOV     19   7
0292    KSTR    20  55      ; "args"
0293    CALL    19   2   2
0294    TSETB   19  18   5
0295    MOV     19   7
0296    KSTR    20  62      ; "count"
0297    CALL    19   2   2
0298    TSETB   19  18   6
0299    TSETB    5  18   7
0300    MOV     19   3
0301    KSTR    20  49      ; "target"
0302    KSTR    21  26      ; "string"
0303    CALL    19   2   3
0304    TSETB   19  18   8
0305    MOV     19   3
0306    KSTR    20  56      ; "defmode"
0307    KSTR    21  26      ; "string"
0308    CALL    19   2   3
0309    TSETB   19  18   9
0310    MOV     19   3
0311    KSTR    20  57      ; "show_default"
0312    KSTR    21  32      ; "boolean"
0313    CALL    19   2   3
0314    TSETB   19  18  10
0315    MOV     19   3
0316    KSTR    20  63      ; "overwrite"
0317    KSTR    21  32      ; "boolean"
0318    CALL    19   2   3
0319    TSETB   19  18  11
0320    MOV     19   3
0321    KSTR    20  58      ; "argname"
0322    KSTR    21  26      ; "string"
0323    KSTR    22  54      ; "table"
0324    CALL    19   2   4
0325    TSETB   19  18  12
0326    MOV     19   3
0327    KSTR    20  59      ; "choices"
0328    KSTR    21  54      ; "table"
0329    CALL    19   2   3
0330    TSETB   19  18  13
0331    MOV     19   3
0332    KSTR    20  50      ; "hidden"
0333    KSTR    21  32      ; "boolean"
0334    CALL    19   2   3
0335    TSETB   19  18  14
0336    TSETB    9  18  15
0337    TSETB   10  18  16
0338    MOV     19  15
0339    CALL    16   2   4
0340    FNEW    17  65      ; argparse.lua:353
0341    TSETS   17  13  64  ; "_inherit_property"
0342    FNEW    17  67      ; argparse.lua:371
0343    TSETS   17  15  66  ; "_get_argument_list"
0344    FNEW    17  69      ; argparse.lua:402
0345    TSETS   17  15  68  ; "_get_usage"
0346    FNEW    17  71      ; argparse.lua:414
0347    TSETS   17   8  70  ; "store_true"
0348    FNEW    17  73      ; argparse.lua:418
0349    TSETS   17   8  72  ; "store_false"
0350    FNEW    17  75      ; argparse.lua:422
0351    TSETS   17   8  74  ; "store"
0352    FNEW    17  76      ; argparse.lua:426
0353    TSETS   17   8  62  ; "count"
0354    FNEW    17  78      ; argparse.lua:432
0355    TSETS   17   8  77  ; "append"
0356    FNEW    17  80      ; argparse.lua:441
0357    TSETS   17   8  79  ; "concat"
0358    FNEW    17  82      ; argparse.lua:453
0359    TSETS   17  15  81  ; "_get_action"
0360    FNEW    17  84      ; argparse.lua:486
0361    TSETS   17  15  83  ; "_get_argname"
0362    FNEW    17  86      ; argparse.lua:496
0363    TSETS   17  15  85  ; "_get_choices_list"
0364    FNEW    17  88      ; argparse.lua:500
0365    TSETS   17  15  87  ; "_get_default_argname"
0366    FNEW    17  89      ; argparse.lua:508
0367    TSETS   17  16  87  ; "_get_default_argname"
0368    FNEW    17  91      ; argparse.lua:517
0369    TSETS   17  15  90  ; "_get_label_lines"
0370    FNEW    17  92      ; argparse.lua:525
0371    TSETS   17  16  90  ; "_get_label_lines"
0372    FNEW    17  93      ; argparse.lua:555
0373    TSETS   17  14  90  ; "_get_label_lines"
0374    FNEW    17  95      ; argparse.lua:559
0375    TSETS   17  15  94  ; "_get_description"
0376    FNEW    17  96      ; argparse.lua:571
0377    TSETS   17  14  94  ; "_get_description"
0378    FNEW    17  97      ; argparse.lua:575
0379    TSETS   17  16  68  ; "_get_usage"
0380    FNEW    17  99      ; argparse.lua:587
0381    TSETS   17  15  98  ; "_get_default_target"
0382    FNEW    17 100      ; argparse.lua:591
0383    TSETS   17  16  98  ; "_get_default_target"
0384    FNEW    17 102      ; argparse.lua:605
0385    TSETS   17  16 101  ; "_is_vararg"
0386    FNEW    17 104      ; argparse.lua:609
0387    TSETS   17  13 103  ; "_get_fullname"
0388    FNEW    17 106      ; argparse.lua:626
0389    TSETS   17  13 105  ; "_update_charset"
0390    FNEW    17 108      ; argparse.lua:642
0391    TSETS   17  13 107  ; "argument"
0392    FNEW    17 110      ; argparse.lua:648
0393    TSETS   17  13 109  ; "option"
0394    FNEW    17 112      ; argparse.lua:654
0395    TSETS   17  13 111  ; "flag"
0396    FNEW    17 114      ; argparse.lua:658
0397    TSETS   17  13 113  ; "command"
0398    FNEW    17 116      ; argparse.lua:665
0399    TSETS   17  13 115  ; "mutex"
0400    FNEW    17 118      ; argparse.lua:677
0401    TSETS   17  13 117  ; "group"
0402    KSTR    17 119      ; "Usage: "
0403    FNEW    18 121      ; argparse.lua:694
0404    TSETS   18  13 120  ; "get_usage"
0405    FNEW    18 122      ; argparse.lua:828
0406    FNEW    19 123      ; argparse.lua:846
0407    FNEW    20 124      ; argparse.lua:907
0408    FNEW    21 126      ; argparse.lua:921
0409    TSETS   21  13 125  ; "_get_element_help"
0410    FNEW    21 127      ; argparse.lua:973
0411    FNEW    22 129      ; argparse.lua:983
0412    TSETS   22  13 128  ; "_add_group_help"
0413    FNEW    22 131      ; argparse.lua:998
0414    TSETS   22  13 130  ; "get_help"
0415    FNEW    22 133      ; argparse.lua:1075
0416    TSETS   22  13 132  ; "add_help_command"
0417    FNEW    22 135      ; argparse.lua:1115
0418    TSETS   22  13 134  ; "_is_shell_safe"
0419    FNEW    22 137      ; argparse.lua:1158
0420    TSETS   22  13 136  ; "add_complete"
0421    FNEW    22 139      ; argparse.lua:1184
0422    TSETS   22  13 138  ; "add_complete_command"
0423    FNEW    22 140      ; argparse.lua:1211
0424    FNEW    23 141      ; argparse.lua:1215
0425    FNEW    24 143      ; argparse.lua:1220
0426    TSETS   24  13 142  ; "_get_options"
0427    FNEW    24 145      ; argparse.lua:1230
0428    TSETS   24  13 144  ; "_get_commands"
0429    FNEW    24 147      ; argparse.lua:1240
0430    TSETS   24  13 146  ; "_bash_option_args"
0431    FNEW    24 149      ; argparse.lua:1264
0432    TSETS   24  13 148  ; "_bash_get_cmd"
0433    FNEW    24 151      ; argparse.lua:1290
0434    TSETS   24  13 150  ; "_bash_cmd_completions"
0435    FNEW    24 153      ; argparse.lua:1314
0436    TSETS   24  13 152  ; "get_bash_complete"
0437    FNEW    24 155      ; argparse.lua:1348
0438    TSETS   24  13 154  ; "_zsh_arguments"
0439    FNEW    24 157      ; argparse.lua:1418
0440    TSETS   24  13 156  ; "_zsh_cmds"
0441    FNEW    24 159      ; argparse.lua:1438
0442    TSETS   24  13 158  ; "_zsh_complete_help"
0443    FNEW    24 161      ; argparse.lua:1457
0444    TSETS   24  13 160  ; "get_zsh_complete"
0445    FNEW    24 162      ; argparse.lua:1479
0446    FNEW    25 164      ; argparse.lua:1483
0447    TSETS   25  13 163  ; "_fish_get_cmd"
0448    FNEW    25 166      ; argparse.lua:1503
0449    TSETS   25  13 165  ; "_fish_complete_help"
0450    FNEW    25 168      ; argparse.lua:1561
0451    TSETS   25  13 167  ; "get_fish_complete"
0452    FNEW    25 169      ; argparse.lua:1593
0453    MOV     26   1
0454    TDUP    27 170
0455    CALL    26   2   2
0456    FNEW    27 172      ; argparse.lua:1648
0457    TSETS   27  26 171  ; "__call"
0458    FNEW    27 174      ; argparse.lua:1657
0459    TSETS   27  26 173  ; "error"
0460    FNEW    27 175      ; argparse.lua:1661
0461    TSETS   27  26  53  ; "convert"
0462    FNEW    27 177      ; argparse.lua:1685
0463    TSETS   27  26 176  ; "default"
0464    FNEW    27 178      ; argparse.lua:1689
0465    FNEW    28 180      ; argparse.lua:1700
0466    TSETS   28  26 179  ; "set_name"
0467    FNEW    28 182      ; argparse.lua:1704
0468    TSETS   28  26 181  ; "invoke"
0469    FNEW    28 184      ; argparse.lua:1728
0470    TSETS   28  26 183  ; "check_choices"
0471    FNEW    28 186      ; argparse.lua:1741
0472    TSETS   28  26 185  ; "pass"
0473    FNEW    28 188      ; argparse.lua:1753
0474    TSETS   28  26 187  ; "complete_invocation"
0475    FNEW    28 190      ; argparse.lua:1759
0476    TSETS   28  26 189  ; "close"
0477    MOV     28   1
0478    TDUP    29 191
0479    TNEW    30   0
0480    TSETS   30  29 192  ; "result"
0481    TNEW    30   0
0482    TSETS   30  29 193  ; "options"
0483    TNEW    30   0
0484    TSETS   30  29 194  ; "arguments"
0485    TNEW    30   0
0486    TSETS   30  29 195  ; "element_to_mutexes"
0487    TNEW    30   0
0488    TSETS   30  29 196  ; "mutex_to_element_state"
0489    TNEW    30   0
0490    TSETS   30  29 197  ; "command_actions"
0491    CALL    28   2   2
0492    FNEW    29 198      ; argparse.lua:1807
0493    TSETS   29  28 171  ; "__call"
0494    FNEW    29 199      ; argparse.lua:1815
0495    TSETS   29  28 173  ; "error"
0496    FNEW    29 201      ; argparse.lua:1819
0497    TSETS   29  28 200  ; "switch"
0498    FNEW    29 203      ; argparse.lua:1863
0499    TSETS   29  28 202  ; "get_option"
0500    FNEW    29 205      ; argparse.lua:1873
0501    TSETS   29  28 204  ; "get_command"
0502    FNEW    29 207      ; argparse.lua:1887
0503    TSETS   29  28 206  ; "check_mutexes"
0504    FNEW    29 208      ; argparse.lua:1901
0505    TSETS   29  28 181  ; "invoke"
0506    FNEW    29 209      ; argparse.lua:1911
0507    TSETS   29  28 185  ; "pass"
0508    FNEW    29 210      ; argparse.lua:1935
0509    TSETS   29  28 189  ; "close"
0510    FNEW    29 212      ; argparse.lua:1942
0511    TSETS   29  28 211  ; "finalize"
0512    FNEW    29 214      ; argparse.lua:1990
0513    TSETS   29  28 213  ; "parse"
0514    FNEW    29 215      ; argparse.lua:2053
0515    TSETS   29  13 173  ; "error"
0516    GGET    29 216      ; "rawget"
0517    GGET    30 217      ; "_G"
0518    KSTR    31 218      ; "arg"
0519    CALL    29   2   3
0520    IST         29
0521    JMP     30 => 0523
0522    TNEW    29   0
0523 => FNEW    30 220      ; argparse.lua:2061
0524    TSETS   30  13 219  ; "_parse"
0525    FNEW    30 221      ; argparse.lua:2065
0526    TSETS   30  13 213  ; "parse"
0527    FNEW    30 222      ; argparse.lua:2069
0528    FNEW    31 224      ; argparse.lua:2073
0529    TSETS   31  13 223  ; "pparse"
0530    TNEW    31   0
0531    KSTR    32 226      ; "0.7.0"
0532    TSETS   32  31 225  ; "version"
0533    GGET    32 227      ; "setmetatable"
0534    MOV     33  31
0535    TDUP    34 229
0536    FNEW    35 228      ; argparse.lua:2096
0537    TSETS   35  34 171  ; "__call"
0538    CALL    32   1   3
0539    UCLO     0 => 0540
0540 => RET1    31   2

-----------------------
-- BYTECODE -- type_check.lua:15-24
0001    GGET     2   0      ; "pairs"
0002    MOV      3   0
0003    CALL     2   4   2
0004    ISNEXT   5 => 0017
0005 => GGET     7   1      ; "type"
0006    MOV      8   6
0007    CALL     7   2   2
0008    ISNES    7   2      ; "table"
0009    JMP      7 => 0017
0010    TGETS    7   6   3  ; "_version"
0011    ISNEP    7   0
0012    JMP      7 => 0014
0013    TSETS    1   6   3  ; "_version"
0014 => UGET     7   0      ; fill_in_version
0015    MOV      8   6
0016    CALL     7   1   2
0017 => ITERN    5   3   3
0018    ITERL    5 => 0005
0019    RET0     0   1

-- BYTECODE -- type_check.lua:26-37
0001    GGET     1   0      ; "pairs"
0002    MOV      2   0
0003    CALL     1   4   2
0004    ISNEXT   4 => 0029
0005 => UGET     6   0      ; type_check
0006    TGETS    6   6   1  ; "MAGIC_PLATFORMS"
0007    ISNEV    5   6
0008    JMP      6 => 0021
0009    TDUP     6   3
0010    UGET     7   1      ; util
0011    TGETS    7   7   2  ; "deep_copy"
0012    MOV      8   0
0013    CALL     7   2   2
0014    TSETS    7   6   4  ; "_any"
0015    TSETV    6   0   4
0016    TGETV    6   0   4
0017    TGETS    6   6   4  ; "_any"
0018    KPRI     7   0
0019    TSETV    7   6   4
0020    JMP      6 => 0029
0021 => GGET     6   5      ; "type"
0022    MOV      7   5
0023    CALL     6   2   2
0024    ISNES    6   6      ; "table"
0025    JMP      6 => 0029
0026    UGET     6   2      ; expand_magic_platforms
0027    MOV      7   5
0028    CALL     6   1   2
0029 => ITERN    4   3   3
0030    ITERL    4 => 0005
0031    RET0     0   1

-- BYTECODE -- type_check.lua:44-64
0001    TNEW     1   0
0002    KPRI     2   0
0003    UGET     3   0      ; fun
0004    TGETS    3   3   0  ; "reverse_in"
0005    UGET     4   0      ; fun
0006    TGETS    4   4   1  ; "sort_in"
0007    UGET     5   1      ; util
0008    TGETS    5   5   2  ; "keys"
0009    MOV      6   0
0010    CALL     5   2   2
0011    UGET     6   2      ; vers
0012    TGETS    6   6   3  ; "compare_versions"
0013    CALL     4   0   3
0014    CALLM    3   2   0
0015    GGET     4   4      ; "ipairs"
0016    MOV      5   3
0017    CALL     4   4   2
0018    JMP      7 => 0041
0019 => TGETV    9   0   8
0020    ISEQP    2   0
0021    JMP     10 => 0032
0022    UGET    10   1      ; util
0023    TGETS   10  10   5  ; "deep_copy"
0024    TGETV   11   1   2
0025    CALL    10   2   2
0026    UGET    11   1      ; util
0027    TGETS   11  11   6  ; "deep_merge"
0028    MOV     12  10
0029    MOV     13   9
0030    CALL    11   1   3
0031    MOV      9  10
0032 => UGET    10   3      ; fill_in_version
0033    MOV     11   9
0034    MOV     12   8
0035    CALL    10   1   3
0036    UGET    10   4      ; expand_magic_platforms
0037    MOV     11   9
0038    CALL    10   1   2
0039    MOV      2   8
0040    TSETV    9   1   8
0041 => ITERC    7   3   3
0042    ITERL    7 => 0019
0043    MOV      4   1
0044    MOV      5   3
0045    RET      4   3

-- BYTECODE -- type_check.lua:69-79
0001    TGETS    3   1   0  ; "_version"
0002    IST          3
0003    JMP      4 => 0005
0004    KSTR     3   1      ; "1.0"
0005 => UGET     4   0      ; vers
0006    TGETS    4   4   2  ; "compare_versions"
0007    MOV      5   3
0008    MOV      6   0
0009    CALL     4   2   3
0010    ISF          4
0011    JMP      5 => 0027
0012    ISNES    2   3      ; ""
0013    JMP      4 => 0018
0014    KPRI     4   0
0015    KSTR     5   4      ; "Invalid rockspec_format version number i"~
0016    RET      4   3
0017    JMP      4 => 0027
0018 => KPRI     4   0
0019    MOV      5   2
0020    KSTR     6   5      ; " is not supported in rockspec format "
0021    MOV      7   0
0022    KSTR     8   6      ; " (requires version "
0023    MOV      9   3
0024    KSTR    10   7      ; "), please fix the rockspec_format field "~
0025    CAT      5   5  10
0026    RET      4   3
0027 => KPRI     4   2
0028    RET1     4   2

-- BYTECODE -- type_check.lua:93-131
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    TGETS    4   2   3  ; "_version"
0012    ISF          4
0013    JMP      5 => 0027
0014    TGETS    4   2   3  ; "_version"
0015    ISEQS    4   4      ; "1.0"
0016    JMP      4 => 0027
0017    UGET     4   0      ; check_version
0018    MOV      5   0
0019    MOV      6   2
0020    MOV      7   3
0021    CALL     4   3   4
0022    IST          4
0023    JMP      6 => 0027
0024    KPRI     6   0
0025    MOV      7   5
0026    RET      6   3
0027 => GGET     4   1      ; "type"
0028    MOV      5   1
0029    CALL     4   2   2
0030    IST          4
0031    JMP      5 => 0033
0032    KSTR     4   5      ; "nil"
0033 => TGETS    5   2   6  ; "_type"
0034    IST          5
0035    JMP      6 => 0037
0036    KSTR     5   7      ; "table"
0037 => ISNES    5   8      ; "number"
0038    JMP      6 => 0051
0039    GGET     6   9      ; "tonumber"
0040    MOV      7   1
0041    CALL     6   2   2
0042    IST          6
0043    JMP      6 => 0119
0044    KPRI     6   0
0045    KSTR     7  10      ; "Type mismatch on field "
0046    MOV      8   3
0047    KSTR     9  11      ; ": expected a number"
0048    CAT      7   7   9
0049    RET      6   3
0050    JMP      6 => 0119
0051 => ISNES    5   2      ; "string"
0052    JMP      6 => 0091
0053    ISEQS    4   2      ; "string"
0054    JMP      6 => 0062
0055    KPRI     6   0
0056    KSTR     7  10      ; "Type mismatch on field "
0057    MOV      8   3
0058    KSTR     9  12      ; ": expected a string, got "
0059    MOV     10   4
0060    CAT      7   7  10
0061    RET      6   3
0062 => TGETS    6   2  13  ; "_pattern"
0063    ISF          6
0064    JMP      7 => 0119
0065    MOV      8   1
0066    TGETS    7   1  14  ; "match"
0067    KSTR     9  15      ; "^"
0068    MOV     10   6
0069    KSTR    11  16      ; "$"
0070    CAT      9   9  11
0071    CALL     7   2   3
0072    IST          7
0073    JMP      7 => 0119
0074    TGETS    7   2  17  ; "_name"
0075    IST          7
0076    JMP      8 => 0081
0077    KSTR     7  18      ; "'"
0078    MOV      8   6
0079    KSTR     9  18      ; "'"
0080    CAT      7   7   9
0081 => KPRI     8   0
0082    KSTR     9  10      ; "Type mismatch on field "
0083    MOV     10   3
0084    KSTR    11  19      ; ": invalid value '"
0085    MOV     12   1
0086    KSTR    13  20      ; "' does not match "
0087    MOV     14   7
0088    CAT      9   9  14
0089    RET      8   3
0090    JMP      6 => 0119
0091 => ISNES    5   7      ; "table"
0092    JMP      6 => 0110
0093    ISEQV    4   5
0094    JMP      6 => 0102
0095    KPRI     6   0
0096    KSTR     7  10      ; "Type mismatch on field "
0097    MOV      8   3
0098    KSTR     9  21      ; ": expected a table"
0099    CAT      7   7   9
0100    RET      6   3
0101    JMP      6 => 0119
0102 => UGET     6   1      ; type_check
0103    TGETS    6   6  22  ; "type_check_table"
0104    MOV      7   0
0105    MOV      8   1
0106    MOV      9   2
0107    MOV     10   3
0108    CALLT    6   5
0109    JMP      6 => 0119
0110 => ISEQV    4   5
0111    JMP      6 => 0119
0112    KPRI     6   0
0113    KSTR     7  10      ; "Type mismatch on field "
0114    MOV      8   3
0115    KSTR     9  23      ; ": expected "
0116    MOV     10   5
0117    CAT      7   7  10
0118    RET      6   3
0119 => KPRI     6   2
0120    RET1     6   2

-- BYTECODE -- type_check.lua:133-141
0001    ISNES    0   0      ; ""
0002    JMP      2 => 0007
0003    GGET     2   1      ; "tostring"
0004    MOV      3   1
0005    CALLT    2   2
0006    JMP      2 => 0026
0007 => GGET     2   2      ; "type"
0008    MOV      3   1
0009    CALL     2   2   2
0010    ISNES    2   3      ; "string"
0011    JMP      2 => 0018
0012    MOV      2   0
0013    KSTR     3   4      ; "."
0014    MOV      4   1
0015    CAT      2   2   4
0016    RET1     2   2
0017    JMP      2 => 0026
0018 => MOV      2   0
0019    KSTR     3   5      ; "["
0020    GGET     4   1      ; "tostring"
0021    MOV      5   1
0022    CALL     4   2   2
0023    KSTR     5   6      ; "]"
0024    CAT      2   2   5
0025    RET1     2   2
0026 => RET0     0   1

-- BYTECODE -- type_check.lua:165-196
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISEQS    5   3      ; "table"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   2
0024    CALL     5   2   2
0025    ISEQS    5   3      ; "table"
0026    JMP      5 => 0029
0027    KPRI     5   1
0028    JMP      6 => 0030
0029 => KPRI     5   2
0030 => CALL     4   1   2
0031    UGET     4   0      ; check_version
0032    MOV      5   0
0033    MOV      6   2
0034    MOV      7   3
0035    CALL     4   3   4
0036    IST          4
0037    JMP      6 => 0041
0038    KPRI     6   0
0039    MOV      7   5
0040    RET      6   3
0041 => GGET     6   4      ; "pairs"
0042    MOV      7   1
0043    CALL     6   4   2
0044    ISNEXT   9 => 0079
0045 => TGETV   11   2   9
0046    IST         11
0047    JMP     12 => 0049
0048    TGETS   11   2   5  ; "_any"
0049 => ISF         11
0050    JMP     12 => 0066
0051    UGET    12   1      ; type_check_item
0052    MOV     13   0
0053    MOV     14  10
0054    MOV     15  11
0055    UGET    16   2      ; mkfield
0056    MOV     17   3
0057    MOV     18   9
0058    CALL    16   0   3
0059    CALLM   12   3   3
0060    IST         12
0061    JMP     14 => 0079
0062    KPRI    14   0
0063    MOV     15  13
0064    RET     14   3
0065    JMP     12 => 0079
0066 => TGETS   12   2   6  ; "_more"
0067    ISF         12
0068    JMP     13 => 0070
0069    JMP     12 => 0079
0070 => UGET    12   3      ; cfg
0071    TGETS   12  12   7  ; "accept_unknown_fields"
0072    IST         12
0073    JMP     12 => 0079
0074    KPRI    12   0
0075    KSTR    13   8      ; "Unknown field "
0076    MOV     14   9
0077    CAT     13  13  14
0078    RET     12   3
0079 => ITERN    9   3   3
0080    ITERL    9 => 0045
0081    GGET     6   4      ; "pairs"
0082    MOV      7   2
0083    CALL     6   4   2
0084    ISNEXT   9 => 0107
0085 => MOV     12   9
0086    TGETS   11   9   9  ; "sub"
0087    KSHORT  13   1
0088    KSHORT  14   1
0089    CALL    11   2   4
0090    ISEQS   11  10      ; "_"
0091    JMP     11 => 0107
0092    TGETS   11  10  11  ; "_mandatory"
0093    ISF         11
0094    JMP     12 => 0107
0095    TGETV   11   1   9
0096    IST         11
0097    JMP     11 => 0107
0098    KPRI    11   0
0099    KSTR    12  12      ; "Mandatory field "
0100    UGET    13   2      ; mkfield
0101    MOV     14   3
0102    MOV     15   9
0103    CALL    13   2   3
0104    KSTR    14  13      ; " is missing."
0105    CAT     12  12  14
0106    RET     11   3
0107 => ITERN    9   3   3
0108    ITERL    9 => 0085
0109    KPRI     6   2
0110    RET1     6   2

-- BYTECODE -- type_check.lua:198-211
0001    TNEW     2   0
0002    GGET     3   0      ; "pairs"
0003    MOV      4   0
0004    CALL     3   4   2
0005    ISNEXT   6 => 0020
0006 => TGETV    8   1   6
0007    IST          8
0008    JMP      9 => 0020
0009    KSTR     8   1      ; "MUST_"
0010    MOV      9   6
0011    CAT      8   8   9
0012    TGETV    8   1   8
0013    IST          8
0014    JMP      8 => 0020
0015    GGET     8   2      ; "table"
0016    TGETS    8   8   3  ; "insert"
0017    MOV      9   2
0018    MOV     10   6
0019    CALL     8   1   3
0020 => ITERN    6   3   3
0021    ITERL    6 => 0006
0022    LEN      3   2
0023    ISNEN    3   0      ; 1
0024    JMP      3 => 0031
0025    KPRI     3   0
0026    KSTR     4   4      ; "Unknown variable: "
0027    TGETB    5   2   1
0028    CAT      4   4   5
0029    RET      3   3
0030    JMP      3 => 0044
0031 => LEN      3   2
0032    KSHORT   4   1
0033    ISGE     4   3
0034    JMP      3 => 0044
0035    KPRI     3   0
0036    KSTR     4   5      ; "Unknown variables: "
0037    GGET     5   2      ; "table"
0038    TGETS    5   5   6  ; "concat"
0039    MOV      6   2
0040    KSTR     7   7      ; ", "
0041    CALL     5   2   3
0042    CAT      4   4   5
0043    RET      3   3
0044 => KPRI     3   2
0045    RET1     3   2

-- BYTECODE -- type_check.lua:0-214
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fun"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.util"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.core.vers"
0013    CALL     4   2   2
0014    KNUM     5   0      ; 3953913772
0015    TSETS    5   0   5  ; "MAGIC_PLATFORMS"
0016    FNEW     5   6      ; type_check.lua:15
0017    FNEW     6   7      ; type_check.lua:26
0018    FNEW     7   9      ; type_check.lua:44
0019    TSETS    7   0   8  ; "declare_schemas"
0020    UCLO     5 => 0021
0021 => FNEW     5  10      ; type_check.lua:69
0022    FNEW     6  11      ; type_check.lua:93
0023    FNEW     7  12      ; type_check.lua:133
0024    FNEW     8  14      ; type_check.lua:165
0025    TSETS    8   0  13  ; "type_check_table"
0026    FNEW     8  16      ; type_check.lua:198
0027    TSETS    8   0  15  ; "check_undeclared_globals"
0028    UCLO     0 => 0029
0029 => RET1     0   2

-----------------------
-- BYTECODE -- pack.lua:26-54
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; fetch
0012    TGETS    1   1   3  ; "load_rockspec"
0013    MOV      2   0
0014    CALL     1   3   2
0015    ISF          2
0016    JMP      3 => 0022
0017    KPRI     3   0
0018    KSTR     4   4      ; "Error loading rockspec: "
0019    MOV      5   2
0020    CAT      4   4   5
0021    RET      3   3
0022 => TGETS    0   1   5  ; "local_abs_filename"
0023    TGETS    3   1   6  ; "name"
0024    KSTR     4   7      ; "-"
0025    TGETS    5   1   8  ; "version"
0026    CAT      3   3   5
0027    UGET     4   1      ; fs
0028    TGETS    4   4   9  ; "absolute_name"
0029    MOV      5   3
0030    KSTR     6  10      ; ".src.rock"
0031    CAT      5   5   6
0032    CALL     4   2   2
0033    UGET     5   0      ; fetch
0034    TGETS    5   5  11  ; "fetch_sources"
0035    MOV      6   1
0036    KPRI     7   1
0037    CALL     5   3   3
0038    IST          5
0039    JMP      7 => 0043
0040    KPRI     7   0
0041    MOV      8   6
0042    RET      7   3
0043 => UGET     7   1      ; fs
0044    TGETS    7   7  12  ; "change_dir"
0045    MOV      8   6
0046    CALL     7   3   2
0047    IST          7
0048    JMP      9 => 0052
0049    KPRI     9   0
0050    MOV     10   8
0051    RET      9   3
0052 => UGET     9   1      ; fs
0053    TGETS    9   9  13  ; "delete"
0054    MOV     10   4
0055    CALL     9   1   2
0056    UGET     9   1      ; fs
0057    TGETS    9   9  14  ; "copy"
0058    MOV     10   0
0059    MOV     11   6
0060    KSTR    12  15      ; "read"
0061    CALL     9   1   4
0062    UGET     9   1      ; fs
0063    TGETS    9   9  16  ; "zip"
0064    MOV     10   4
0065    UGET    11   2      ; dir
0066    TGETS   11  11  17  ; "base_name"
0067    MOV     12   0
0068    CALL    11   2   2
0069    UGET    12   2      ; dir
0070    TGETS   12  12  17  ; "base_name"
0071    MOV     13   5
0072    CALL    12   0   2
0073    CALLM    9   3   2
0074    MOV      8  10
0075    MOV      7   9
0076    IST          7
0077    JMP      9 => 0085
0078    KPRI     9   0
0079    KSTR    10  18      ; "Failed packing "
0080    MOV     11   4
0081    KSTR    12  19      ; " - "
0082    MOV     13   8
0083    CAT     10  10  13
0084    RET      9   3
0085 => UGET     9   1      ; fs
0086    TGETS    9   9  20  ; "pop_dir"
0087    CALL     9   1   1
0088    RET1     4   2

-- BYTECODE -- pack.lua:56-75
0001    UGET     6   0      ; fs
0002    TGETS    6   6   0  ; "make_dir"
0003    MOV      7   4
0004    CALL     6   3   2
0005    IST          6
0006    JMP      8 => 0010
0007    KPRI     8   0
0008    MOV      9   7
0009    RET      8   3
0010 => GGET     8   1      ; "pairs"
0011    MOV      9   2
0012    CALL     8   4   2
0013    ISNEXT  11 => 0068
0014 => UGET    13   1      ; dir
0015    TGETS   13  13   2  ; "path"
0016    MOV     14   3
0017    MOV     15  11
0018    CALL    13   2   3
0019    UGET    14   1      ; dir
0020    TGETS   14  14   2  ; "path"
0021    MOV     15   4
0022    MOV     16  11
0023    CALL    14   2   3
0024    GGET    15   3      ; "type"
0025    MOV     16  12
0026    CALL    15   2   2
0027    ISNES   15   4      ; "table"
0028    JMP     15 => 0042
0029    UGET    15   2      ; copy_back_files
0030    MOV     16   0
0031    MOV     17   1
0032    MOV     18  12
0033    MOV     19  13
0034    MOV     20  14
0035    CALL    15   3   6
0036    IST         15
0037    JMP     17 => 0068
0038    KPRI    17   0
0039    MOV     18  16
0040    RET     17   3
0041    JMP     15 => 0068
0042 => UGET    15   3      ; path
0043    TGETS   15  15   5  ; "versioned_name"
0044    MOV     16  13
0045    MOV     17   3
0046    MOV     18   0
0047    MOV     19   1
0048    CALL    15   2   5
0049    UGET    16   0      ; fs
0050    TGETS   16  16   6  ; "exists"
0051    MOV     17  15
0052    CALL    16   2   2
0053    ISF         16
0054    JMP     17 => 0062
0055    UGET    16   0      ; fs
0056    TGETS   16  16   7  ; "copy"
0057    MOV     17  15
0058    MOV     18  14
0059    MOV     19   5
0060    CALL    16   1   4
0061    JMP     16 => 0068
0062 => UGET    16   0      ; fs
0063    TGETS   16  16   7  ; "copy"
0064    MOV     17  13
0065    MOV     18  14
0066    MOV     19   5
0067    CALL    16   1   4
0068 => ITERN   11   3   3
0069    ITERL   11 => 0014
0070    KPRI     8   2
0071    RET1     8   2

-- BYTECODE -- pack.lua:82-127
0001    UGET     2   0      ; search
0002    TGETS    2   2   0  ; "pick_installed_rock"
0003    MOV      3   0
0004    MOV      4   1
0005    CALL     2   5   3
0006    IST          2
0007    JMP      6 => 0011
0008    KPRI     6   0
0009    MOV      7   3
0010    RET      6   3
0011 => UGET     6   1      ; path
0012    TGETS    6   6   1  ; "root_from_rocks_dir"
0013    MOV      7   5
0014    CALL     6   2   2
0015    UGET     7   1      ; path
0016    TGETS    7   7   2  ; "install_dir"
0017    MOV      8   2
0018    MOV      9   3
0019    MOV     10   6
0020    CALL     7   2   4
0021    UGET     8   2      ; fs
0022    TGETS    8   8   3  ; "exists"
0023    MOV      9   7
0024    CALL     8   2   2
0025    IST          8
0026    JMP      8 => 0035
0027    KPRI     8   0
0028    KSTR     9   4      ; "'"
0029    MOV     10   2
0030    KSTR    11   5      ; " "
0031    MOV     12   3
0032    KSTR    13   6      ; "' does not seem to be an installed rock."
0033    CAT      9   9  13
0034    RET      8   3
0035 => UGET     8   3      ; manif
0036    TGETS    8   8   7  ; "load_rock_manifest"
0037    MOV      9   2
0038    MOV     10   3
0039    MOV     11   6
0040    CALL     8   3   4
0041    IST          8
0042    JMP     10 => 0046
0043    KPRI    10   0
0044    MOV     11   9
0045    RET     10   3
0046 => MOV     10   2
0047    KSTR    11   8      ; "-"
0048    MOV     12   3
0049    CAT     10  10  12
0050    UGET    11   2      ; fs
0051    TGETS   11  11   9  ; "absolute_name"
0052    MOV     12  10
0053    KSTR    13  10      ; "."
0054    UGET    14   4      ; cfg
0055    TGETS   14  14  11  ; "arch"
0056    KSTR    15  12      ; ".rock"
0057    CAT     12  12  15
0058    CALL    11   2   2
0059    UGET    12   2      ; fs
0060    TGETS   12  12  13  ; "make_temp_dir"
0061    KSTR    13  14      ; "pack"
0062    CALL    12   2   2
0063    UGET    13   2      ; fs
0064    TGETS   13  13  15  ; "copy_contents"
0065    MOV     14   7
0066    MOV     15  12
0067    CALL    13   1   3
0068    KPRI    13   1
0069    TGETS   14   8  16  ; "lib"
0070    ISF         14
0071    JMP     15 => 0095
0072    UGET    14   5      ; copy_back_files
0073    MOV     15   2
0074    MOV     16   3
0075    TGETS   17   8  16  ; "lib"
0076    UGET    18   1      ; path
0077    TGETS   18  18  17  ; "deploy_lib_dir"
0078    MOV     19   4
0079    CALL    18   2   2
0080    UGET    19   6      ; dir
0081    TGETS   19  19  18  ; "path"
0082    MOV     20  12
0083    KSTR    21  16      ; "lib"
0084    CALL    19   2   3
0085    KSTR    20  19      ; "exec"
0086    CALL    14   3   7
0087    IST         14
0088    JMP     16 => 0094
0089    KPRI    16   0
0090    KSTR    17  20      ; "Failed copying back files: "
0091    MOV     18  15
0092    CAT     17  17  18
0093    RET     16   3
0094 => KPRI    13   2
0095 => TGETS   14   8  21  ; "lua"
0096    ISF         14
0097    JMP     15 => 0120
0098    UGET    14   5      ; copy_back_files
0099    MOV     15   2
0100    MOV     16   3
0101    TGETS   17   8  21  ; "lua"
0102    UGET    18   1      ; path
0103    TGETS   18  18  22  ; "deploy_lua_dir"
0104    MOV     19   4
0105    CALL    18   2   2
0106    UGET    19   6      ; dir
0107    TGETS   19  19  18  ; "path"
0108    MOV     20  12
0109    KSTR    21  21      ; "lua"
0110    CALL    19   2   3
0111    KSTR    20  23      ; "read"
0112    CALL    14   3   7
0113    IST         14
0114    JMP     16 => 0120
0115    KPRI    16   0
0116    KSTR    17  20      ; "Failed copying back files: "
0117    MOV     18  15
0118    CAT     17  17  18
0119    RET     16   3
0120 => UGET    14   2      ; fs
0121    TGETS   14  14  24  ; "change_dir"
0122    MOV     15  12
0123    CALL    14   3   2
0124    IST         14
0125    JMP     16 => 0129
0126    KPRI    16   0
0127    MOV     17  15
0128    RET     16   3
0129 => IST         13
0130    JMP     16 => 0153
0131    UGET    16   7      ; repos
0132    TGETS   16  16  25  ; "has_binaries"
0133    MOV     17   2
0134    MOV     18   3
0135    CALL    16   2   3
0136    IST         16
0137    JMP     16 => 0153
0138    MOV     17  11
0139    TGETS   16  11  26  ; "gsub"
0140    KSTR    18  27      ; "%."
0141    UGET    19   4      ; cfg
0142    TGETS   19  19  11  ; "arch"
0143    MOV     20  19
0144    TGETS   19  19  26  ; "gsub"
0145    KSTR    21  28      ; "%-"
0146    KSTR    22  29      ; "%%-"
0147    CALL    19   2   4
0148    KSTR    20  27      ; "%."
0149    CAT     18  18  20
0150    KSTR    19  30      ; ".all."
0151    CALL    16   2   4
0152    MOV     11  16
0153 => UGET    16   2      ; fs
0154    TGETS   16  16  31  ; "delete"
0155    MOV     17  11
0156    CALL    16   1   2
0157    UGET    16   2      ; fs
0158    TGETS   16  16  32  ; "zip"
0159    MOV     17  11
0160    UGET    18   8      ; unpack
0161    UGET    19   2      ; fs
0162    TGETS   19  19  33  ; "list_dir"
0163    CALL    19   0   1
0164    CALLM   18   0   0
0165    CALLM   16   2   1
0166    IST         16
0167    JMP     16 => 0173
0168    KPRI    16   0
0169    KSTR    17  34      ; "Failed packing "
0170    MOV     18  11
0171    CAT     17  17  18
0172    RET     16   3
0173 => UGET    16   2      ; fs
0174    TGETS   16  16  35  ; "pop_dir"
0175    CALL    16   1   1
0176    UGET    16   2      ; fs
0177    TGETS   16  16  31  ; "delete"
0178    MOV     17  12
0179    CALL    16   1   2
0180    RET1    11   2

-- BYTECODE -- pack.lua:129-146
0001    ISF          1
0002    JMP      3 => 0006
0003    KPRI     3   0
0004    MOV      4   1
0005    RET      3   3
0006 => KPRI     3   0
0007    ISF          2
0008    JMP      4 => 0018
0009    UGET     4   0      ; signing
0010    TGETS    4   4   0  ; "sign_file"
0011    MOV      5   0
0012    CALL     4   3   2
0013    MOV      1   5
0014    MOV      3   4
0015    UGET     4   1      ; util
0016    TGETS    4   4   1  ; "printout"
0017    CALL     4   1   1
0018 => UGET     4   1      ; util
0019    TGETS    4   4   1  ; "printout"
0020    KSTR     5   2      ; "Packed: "
0021    MOV      6   0
0022    CAT      5   5   6
0023    CALL     4   1   2
0024    ISF          3
0025    JMP      4 => 0032
0026    UGET     4   1      ; util
0027    TGETS    4   4   1  ; "printout"
0028    KSTR     5   3      ; "Signature stored in: "
0029    MOV      6   3
0030    CAT      5   5   6
0031    CALL     4   1   2
0032 => ISF          1
0033    JMP      4 => 0037
0034    KPRI     4   0
0035    MOV      5   1
0036    RET      4   3
0037 => KPRI     4   2
0038    RET1     4   2

-- BYTECODE -- pack.lua:148-175
0001    UGET     5   0      ; fs
0002    TGETS    5   5   0  ; "make_temp_dir"
0003    KSTR     6   1      ; "luarocks-build-pack-"
0004    UGET     7   1      ; dir
0005    TGETS    7   7   2  ; "base_name"
0006    MOV      8   0
0007    CALL     7   2   2
0008    CAT      6   6   7
0009    CALL     5   3   2
0010    IST          5
0011    JMP      7 => 0017
0012    KPRI     7   0
0013    KSTR     8   3      ; "Failed creating temporary directory: "
0014    MOV      9   6
0015    CAT      8   8   9
0016    RET      7   3
0017 => UGET     7   2      ; util
0018    TGETS    7   7   4  ; "schedule_function"
0019    UGET     8   0      ; fs
0020    TGETS    8   8   5  ; "delete"
0021    MOV      9   5
0022    CALL     7   1   3
0023    UGET     7   3      ; path
0024    TGETS    7   7   6  ; "use_tree"
0025    MOV      8   5
0026    CALL     7   1   2
0027    MOV      7   4
0028    CALL     7   3   1
0029    IST          7
0030    JMP      9 => 0034
0031    KPRI     9   0
0032    MOV     10   8
0033    RET      9   3
0034 => UGET     9   3      ; path
0035    TGETS    9   9   7  ; "parse_name"
0036    MOV     10   0
0037    CALL     9   3   2
0038    IST          9
0039    JMP     11 => 0043
0040    MOV     11   0
0041    MOV     10   2
0042    MOV      9  11
0043 => UGET    11   4      ; queries
0044    TGETS   11  11   8  ; "new"
0045    MOV     12   9
0046    MOV     13   1
0047    MOV     14  10
0048    CALL    11   2   4
0049    UGET    12   5      ; pack
0050    TGETS   12  12   9  ; "pack_installed_rock"
0051    MOV     13  11
0052    MOV     14   5
0053    CALL    12   3   3
0054    UGET    14   5      ; pack
0055    TGETS   14  14  10  ; "report_and_sign_local_file"
0056    MOV     15  12
0057    MOV     16  13
0058    MOV     17   3
0059    CALLT   14   4

-- BYTECODE -- pack.lua:0-178
0001    TNEW     0   0
0002    GGET     1   0      ; "unpack"
0003    IST          1
0004    JMP      2 => 0007
0005    GGET     1   1      ; "table"
0006    TGETS    1   1   0  ; "unpack"
0007 => GGET     2   2      ; "require"
0008    KSTR     3   3      ; "luarocks.queries"
0009    CALL     2   2   2
0010    GGET     3   2      ; "require"
0011    KSTR     4   4      ; "luarocks.path"
0012    CALL     3   2   2
0013    GGET     4   2      ; "require"
0014    KSTR     5   5      ; "luarocks.repos"
0015    CALL     4   2   2
0016    GGET     5   2      ; "require"
0017    KSTR     6   6      ; "luarocks.fetch"
0018    CALL     5   2   2
0019    GGET     6   2      ; "require"
0020    KSTR     7   7      ; "luarocks.fs"
0021    CALL     6   2   2
0022    GGET     7   2      ; "require"
0023    KSTR     8   8      ; "luarocks.core.cfg"
0024    CALL     7   2   2
0025    GGET     8   2      ; "require"
0026    KSTR     9   9      ; "luarocks.util"
0027    CALL     8   2   2
0028    GGET     9   2      ; "require"
0029    KSTR    10  10      ; "luarocks.dir"
0030    CALL     9   2   2
0031    GGET    10   2      ; "require"
0032    KSTR    11  11      ; "luarocks.manif"
0033    CALL    10   2   2
0034    GGET    11   2      ; "require"
0035    KSTR    12  12      ; "luarocks.search"
0036    CALL    11   2   2
0037    GGET    12   2      ; "require"
0038    KSTR    13  13      ; "luarocks.signing"
0039    CALL    12   2   2
0040    FNEW    13  15      ; pack.lua:26
0041    TSETS   13   0  14  ; "pack_source_rock"
0042    FNEW    13  16      ; pack.lua:56
0043    FNEW    14  18      ; pack.lua:82
0044    TSETS   14   0  17  ; "pack_installed_rock"
0045    FNEW    14  20      ; pack.lua:129
0046    TSETS   14   0  19  ; "report_and_sign_local_file"
0047    FNEW    14  22      ; pack.lua:148
0048    TSETS   14   0  21  ; "pack_binary_rock"
0049    UCLO     0 => 0050
0050 => RET1     0   2

-----------------------
-- BYTECODE -- util.lua:34-40
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "function"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    TDUP     1   3
0012    TSETS    0   1   4  ; "fn"
0013    TNEW     2   3
0014    VARG     3   0   1
0015    TSETM    3   0      ; 1
0016    TSETS    2   1   5  ; "args"
0017    GGET     2   6      ; "table"
0018    TGETS    2   2   7  ; "insert"
0019    UGET     3   0      ; scheduled_functions
0020    MOV      4   1
0021    CALL     2   1   3
0022    RET1     1   2

-- BYTECODE -- util.lua:46-53
0001    GGET     1   0      ; "pairs"
0002    UGET     2   0      ; scheduled_functions
0003    CALL     1   4   2
0004    ISNEXT   4 => 0013
0005 => ISNEV    5   0
0006    JMP      6 => 0013
0007    GGET     6   1      ; "table"
0008    TGETS    6   6   2  ; "remove"
0009    UGET     7   0      ; scheduled_functions
0010    MOV      8   4
0011    CALL     6   1   3
0012    RET0     0   1
0013 => ITERN    4   3   3
0014    ITERL    4 => 0005
0015    RET0     0   1

-- BYTECODE -- util.lua:60-69
0001    GGET     0   0      ; "require"
0002    KSTR     1   1      ; "luarocks.fs"
0003    CALL     0   2   2
0004    TGETS    1   0   2  ; "change_dir_to_root"
0005    ISF          1
0006    JMP      2 => 0009
0007    TGETS    1   0   2  ; "change_dir_to_root"
0008    CALL     1   1   1
0009 => UGET     1   0      ; scheduled_functions
0010    LEN      1   1
0011    KSHORT   2   1
0012    KSHORT   3  -1
0013    FORI     1 => 0022
0014 => UGET     5   0      ; scheduled_functions
0015    TGETV    5   5   4
0016    TGETS    6   5   3  ; "fn"
0017    UGET     7   1      ; unpack
0018    TGETS    8   5   4  ; "args"
0019    CALL     7   0   2
0020    CALLM    6   1   0
0021    FORL     1 => 0014
0022 => RET0     0   1

-- BYTECODE -- util.lua:76-78
0001    MOV      2   0
0002    TGETS    1   0   0  ; "gsub"
0003    KSTR     3   1      ; "[?%-+*%[%].%%()$^]"
0004    KSTR     4   2      ; "%%%1"
0005    CALL     1   2   4
0006    RET1     1   2

-- BYTECODE -- util.lua:92-102
0001    UGET     3   0      ; core
0002    TGETS    3   3   0  ; "make_shallow_copy"
0003    MOV      4   1
0004    CALL     3   2   2
0005    MOV      1   3
0006    GGET     3   1      ; "pairs"
0007    MOV      4   0
0008    CALL     3   4   2
0009    ISNEXT   6 => 0019
0010 => MOV      9   7
0011    TGETS    8   7   2  ; "gmatch"
0012    UGET    10   1      ; var_format_pattern
0013    CALL     8   4   3
0014    JMP     11 => 0017
0015 => KPRI    12   0
0016    TSETV   12   1  11
0017 => ITERC   11   2   3
0018    ITERL   11 => 0015
0019 => ITERN    6   3   3
0020    ITERL    6 => 0010
0021    GGET     3   1      ; "pairs"
0022    MOV      4   1
0023    CALL     3   4   2
0024    ISNEXT   6 => 0032
0025 => UGET     8   2      ; util
0026    TGETS    8   8   3  ; "warning"
0027    MOV     10   2
0028    TGETS    9   2   4  ; "format"
0029    MOV     11   6
0030    CALL     9   0   3
0031    CALLM    8   1   0
0032 => ITERN    6   3   3
0033    ITERL    6 => 0025
0034    RET0     0   1

-- BYTECODE -- util.lua:107-116
0001    KPRI     1   1
0002    MOV      3   0
0003    TGETS    2   0   0  ; "match"
0004    UGET     4   0      ; var_format_pattern
0005    CALL     2   2   3
0006    ISF          2
0007    JMP      3 => 0022
0008    MOV      3   0
0009    TGETS    2   0   1  ; "gmatch"
0010    UGET     4   0      ; var_format_pattern
0011    CALL     2   4   3
0012    JMP      5 => 0020
0013 => UGET     6   1      ; util
0014    TGETS    6   6   2  ; "warning"
0015    KSTR     7   3      ; "unmatched variable "
0016    MOV      8   5
0017    CAT      7   7   8
0018    CALL     6   1   2
0019    KPRI     1   2
0020 => ITERC    5   2   3
0021    ITERL    5 => 0013
0022 => RET1     1   2

-- BYTECODE -- util.lua:126-142
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "table"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    TNEW     2   0
0022    GGET     3   3      ; "pairs"
0023    MOV      4   0
0024    CALL     3   4   2
0025    ISNEXT   6 => 0049
0026 => GGET     8   1      ; "type"
0027    MOV      9   7
0028    CALL     8   2   2
0029    ISNES    8   4      ; "string"
0030    JMP      8 => 0049
0031    MOV      9   7
0032    TGETS    8   7   5  ; "gsub"
0033    UGET    10   0      ; var_format_pattern
0034    MOV     11   1
0035    CALL     8   2   4
0036    TSETV    8   2   6
0037    UGET     8   1      ; warn_failed_matches
0038    TGETV    9   2   6
0039    CALL     8   2   2
0040    ISF          8
0041    JMP      9 => 0049
0042    TGETV    8   2   6
0043    MOV      9   8
0044    TGETS    8   8   5  ; "gsub"
0045    UGET    10   0      ; var_format_pattern
0046    KSTR    11   6      ; ""
0047    CALL     8   2   4
0048    TSETV    8   2   6
0049 => ITERN    6   3   3
0050    ITERL    6 => 0026
0051    GGET     3   3      ; "pairs"
0052    MOV      4   2
0053    CALL     3   4   2
0054    ISNEXT   6 => 0056
0055 => TSETV    7   0   6
0056 => ITERN    6   3   3
0057    ITERL    6 => 0055
0058    RET0     0   1

-- BYTECODE -- util.lua:149-152
0001    UGET     0   0      ; i
0002    SUBVN    0   0   0  ; 1
0003    USETV    0   0      ; i
0004    UGET     0   1      ; versions
0005    UGET     1   0      ; i
0006    TGETV    0   0   1
0007    RET1     0   2

-- BYTECODE -- util.lua:154-157
0001    UGET     0   0      ; i
0002    ADDVN    0   0   0  ; 1
0003    USETV    0   0      ; i
0004    UGET     0   1      ; versions
0005    UGET     1   0      ; i
0006    TGETV    0   0   1
0007    RET1     0   2

-- BYTECODE -- util.lua:144-159
0001    TDUP     1   0
0002    KSHORT   2   0
0003    ISNES    0   1      ; "descending"
0004    JMP      3 => 0011
0005    LEN      3   1
0006    ADDVN    2   3   0  ; 1
0007    FNEW     3   2      ; util.lua:149
0008    UCLO     0 => 0009
0009 => RET1     3   2
0010    JMP      3 => 0014
0011 => FNEW     3   3      ; util.lua:154
0012    UCLO     0 => 0013
0013 => RET1     3   2
0014 => UCLO     0 => 0015
0015 => RET0     0   1

-- BYTECODE -- util.lua:161-176
0001    GGET     0   0      ; "require"
0002    KSTR     1   1      ; "luarocks.core.cfg"
0003    CALL     0   2   2
0004    KSTR     1   2      ; "LUA_PATH"
0005    KSTR     2   3      ; "LUA_CPATH"
0006    TGETS    3   0   4  ; "lua_version"
0007    MOV      4   3
0008    TGETS    3   3   5  ; "gsub"
0009    KSTR     5   6      ; "%."
0010    KSTR     6   7      ; "_"
0011    CALL     3   2   4
0012    ISEQS    3   8      ; "5_1"
0013    JMP      4 => 0036
0014    GGET     4   9      ; "os"
0015    TGETS    4   4  10  ; "getenv"
0016    KSTR     5  11      ; "LUA_PATH_"
0017    MOV      6   3
0018    CAT      5   5   6
0019    CALL     4   2   2
0020    ISF          4
0021    JMP      5 => 0025
0022    KSTR     4  11      ; "LUA_PATH_"
0023    MOV      5   3
0024    CAT      1   4   5
0025 => GGET     4   9      ; "os"
0026    TGETS    4   4  10  ; "getenv"
0027    KSTR     5  12      ; "LUA_CPATH_"
0028    MOV      6   3
0029    CAT      5   5   6
0030    CALL     4   2   2
0031    ISF          4
0032    JMP      5 => 0036
0033    KSTR     4  12      ; "LUA_CPATH_"
0034    MOV      5   3
0035    CAT      2   4   5
0036 => MOV      4   1
0037    MOV      5   2
0038    RET      4   3

-- BYTECODE -- util.lua:178-180
0001    MOV      3   0
0002    TGETS    2   0   0  ; "sub"
0003    KSHORT   4   1
0004    LEN      5   1
0005    CALL     2   2   4
0006    ISEQV    2   1
0007    JMP      2 => 0010
0008    KPRI     2   1
0009    JMP      3 => 0011
0010 => KPRI     2   2
0011 => RET1     2   2

-- BYTECODE -- util.lua:183-186
0001    GGET     0   0      ; "io"
0002    TGETS    0   0   1  ; "stdout"
0003    MOV      1   0
0004    TGETS    0   0   2  ; "write"
0005    GGET     2   3      ; "table"
0006    TGETS    2   2   4  ; "concat"
0007    TNEW     3   3
0008    VARG     4   0   0
0009    TSETM    4   0      ; 1
0010    KSTR     4   5      ; "\t"
0011    CALL     2   0   3
0012    CALLM    0   1   1
0013    GGET     0   0      ; "io"
0014    TGETS    0   0   1  ; "stdout"
0015    MOV      1   0
0016    TGETS    0   0   2  ; "write"
0017    KSTR     2   6      ; "\n"
0018    CALL     0   1   3
0019    RET0     0   1

-- BYTECODE -- util.lua:188-194
0001    ISF          1
0002    JMP      3 => 0004
0003    RET0     0   1
0004 => UGET     3   0      ; util
0005    TGETS    3   3   0  ; "printout"
0006    CALL     3   1   1
0007    UGET     3   0      ; util
0008    TGETS    3   3   0  ; "printout"
0009    MOV      4   0
0010    CALL     3   1   2
0011    UGET     3   0      ; util
0012    TGETS    3   3   0  ; "printout"
0013    ISTC     4   2
0014    JMP      4 => 0016
0015    KSTR     4   1      ; "-"
0016 => MOV      5   4
0017    TGETS    4   4   2  ; "rep"
0018    LEN      6   0
0019    CALL     4   0   3
0020    CALLM    3   1   0
0021    UGET     3   0      ; util
0022    TGETS    3   3   0  ; "printout"
0023    CALL     3   1   1
0024    RET0     0   1

-- BYTECODE -- util.lua:196-216
0001    KSHORT   1   1
0002    MOV      2   0
0003    MOV      3   0
0004 => ISF          1
0005    JMP      4 => 0019
0006    LOOP     4 => 0019
0007    UGET     4   0      ; debug
0008    TGETS    4   4   0  ; "getinfo"
0009    MOV      5   1
0010    KSTR     6   1      ; "S"
0011    CALL     4   2   3
0012    IST          4
0013    JMP      5 => 0015
0014    JMP      4 => 0019
0015 => MOV      2   3
0016    TGETS    3   4   2  ; "source"
0017    ADDVN    1   1   0  ; 1
0018    JMP      4 => 0004
0019 => MOV      5   2
0020    TGETS    4   2   3  ; "sub"
0021    KSHORT   6   1
0022    KSHORT   7   1
0023    CALL     4   2   4
0024    ISNES    4   4      ; "@"
0025    JMP      4 => 0032
0026    MOV      5   2
0027    TGETS    4   2   3  ; "sub"
0028    KSHORT   6   2
0029    CALL     4   2   3
0030    IST          4
0031    JMP      5 => 0033
0032 => MOV      4   2
0033 => MOV      6   4
0034    TGETS    5   4   5  ; "match"
0035    KSTR     7   6      ; "^(.*)/lib/luarocks/rocks%-[0-9.]*/[^/]+/"~
0036    CALL     5   3   3
0037    ISF          5
0038    JMP      7 => 0043
0039    MOV      7   5
0040    MOV      8   6
0041    CAT      7   7   8
0042    RET1     7   2
0043 => RET1     4   2

-- BYTECODE -- util.lua:218-220
0001    ISF          1
0002    JMP      3 => 0008
0003    MOV      3   1
0004    KSTR     4   0      ; "/"
0005    CAT      3   3   4
0006    IST          3
0007    JMP      4 => 0009
0008 => KSTR     3   1      ; ""
0009 => MOV      4   0
0010    ISF          2
0011    JMP      5 => 0017
0012    KSTR     5   2      ; " "
0013    MOV      6   2
0014    CAT      5   5   6
0015    IST          5
0016    JMP      6 => 0018
0017 => KSTR     5   1      ; ""
0018 => CAT      3   3   5
0019    RET1     3   2

-- BYTECODE -- util.lua:222-238
0001    GGET     2   0      ; "require"
0002    KSTR     3   1      ; "luarocks.core.cfg"
0003    CALL     2   2   2
0004    MOV      4   0
0005    TGETS    3   0   2  ; "option"
0006    KSTR     5   3      ; "--deps-mode"
0007    KSTR     6   4      ; "How to handle dependencies. Four modes a"~
0008    KSTR     7   5      ; "* all - use all trees from the rocks_tre"~
0009    KSTR     8   6      ; "* one - use only the current tree (possi"~
0010    KSTR     9   7      ; "* order - use trees based on order (use "~
0011    KSTR    10   8      ; "trees below it on the rocks_trees list)\n"
0012    KSTR    11   9      ; "* none - ignore dependencies altogether."~
0013    KSTR    12  10      ; "The default mode may be set with the dep"~
0014    KSTR    13  11      ; "The current default is ""
0015    TGETS   14   2  12  ; "deps_mode"
0016    KSTR    15  13      ; "".\n"
0017    KSTR    16  14      ; "Type '"
0018    UGET    17   0      ; util
0019    TGETS   17  17  15  ; "this_program"
0020    ISTC    18   1
0021    JMP     18 => 0023
0022    KSTR    18  16      ; "luarocks"
0023 => CALL    17   2   2
0024    KSTR    18  17      ; "' with no "
0025    KSTR    19  18      ; "arguments to see your list of rocks tree"~
0026    CAT      6   6  19
0027    CALL     3   2   4
0028    MOV      4   3
0029    TGETS    3   3  19  ; "argname"
0030    KSTR     5  20      ; "<mode>"
0031    CALL     3   2   3
0032    MOV      4   3
0033    TGETS    3   3  21  ; "choices"
0034    TDUP     5  22
0035    CALL     3   1   3
0036    MOV      4   0
0037    TGETS    3   0  23  ; "flag"
0038    KSTR     5  24      ; "--nodeps"
0039    CALL     3   2   3
0040    MOV      4   3
0041    TGETS    3   3  25  ; "hidden"
0042    KPRI     5   2
0043    CALL     3   1   3
0044    RET0     0   1

-- BYTECODE -- util.lua:240-242
0001    KSTR     2   0      ; "See '"
0002    UGET     3   0      ; util
0003    TGETS    3   3   1  ; "this_program"
0004    ISTC     4   1
0005    JMP      4 => 0007
0006    KSTR     4   2      ; "luarocks"
0007 => CALL     3   2   2
0008    KSTR     4   3      ; " help"
0009    ISF          0
0010    JMP      5 => 0016
0011    KSTR     5   4      ; " "
0012    MOV      6   0
0013    CAT      5   5   6
0014    IST          5
0015    JMP      6 => 0017
0016 => KSTR     5   5      ; ""
0017 => KSTR     6   6      ; "'."
0018    CAT      2   2   6
0019    RET1     2   2

-- BYTECODE -- util.lua:244-250
0001    KSTR     1   0      ; "See also:\n"
0002    ISF          0
0003    JMP      2 => 0008
0004    MOV      2   1
0005    MOV      3   0
0006    KSTR     4   1      ; "\n"
0007    CAT      1   2   4
0008 => MOV      2   1
0009    KSTR     3   2      ; "   '"
0010    UGET     4   0      ; util
0011    TGETS    4   4   3  ; "this_program"
0012    KSTR     5   4      ; "luarocks"
0013    CALL     4   2   2
0014    KSTR     5   5      ; " help' for general options and configura"~
0015    CAT      2   2   5
0016    RET1     2   2

-- BYTECODE -- util.lua:252-263
0001    GGET     1   0      ; "require"
0002    KSTR     2   1      ; "luarocks.core.cfg"
0003    CALL     1   2   2
0004    GGET     2   0      ; "require"
0005    KSTR     3   2      ; "luarocks.path"
0006    CALL     2   2   2
0007    KSTR     3   3      ; ""
0008    TGETS    4   0   4  ; "description"
0009    ISF          4
0010    JMP      5 => 0020
0011    TGETS    4   0   4  ; "description"
0012    TGETS    4   4   5  ; "license"
0013    ISF          4
0014    JMP      5 => 0020
0015    KSTR     4   6      ; " (license: "
0016    TGETS    5   0   4  ; "description"
0017    TGETS    5   5   5  ; "license"
0018    KSTR     6   7      ; ")"
0019    CAT      3   4   6
0020 => UGET     4   0      ; util
0021    TGETS    4   4   8  ; "printout"
0022    TGETS    5   0   9  ; "name"
0023    KSTR     6  10      ; " "
0024    TGETS    7   0  11  ; "version"
0025    KSTR     8  12      ; " is now installed in "
0026    TGETS    9   2  13  ; "root_dir"
0027    TGETS   10   1  13  ; "root_dir"
0028    CALL     9   2   2
0029    MOV     10   3
0030    CAT      5   5  10
0031    CALL     4   1   2
0032    UGET     4   0      ; util
0033    TGETS    4   4   8  ; "printout"
0034    CALL     4   1   1
0035    RET0     0   1

-- BYTECODE -- util.lua:271-295
0001    GGET     4   0      ; "require"
0002    KSTR     5   1      ; "luarocks.fs"
0003    CALL     4   2   2
0004    GGET     5   0      ; "require"
0005    KSTR     6   2      ; "luarocks.dir"
0006    CALL     5   2   2
0007    GGET     6   0      ; "require"
0008    KSTR     7   3      ; "luarocks.path"
0009    CALL     6   2   2
0010    GGET     7   0      ; "require"
0011    KSTR     8   4      ; "luarocks.core.vers"
0012    CALL     7   2   2
0013    TGETS    8   4   5  ; "is_dir"
0014    MOV      9   3
0015    CALL     8   2   2
0016    ISF          8
0017    JMP      9 => 0062
0018    TGETS    8   4   6  ; "dir"
0019    MOV      9   3
0020    CALL     8   4   2
0021    JMP     11 => 0060
0022 => TGETS   12   5   7  ; "path"
0023    MOV     13   3
0024    MOV     14  11
0025    CALL    12   2   3
0026    MOV     11  12
0027    MOV     13  11
0028    TGETS   12  11   8  ; "match"
0029    KSTR    14   9      ; "rockspec$"
0030    CALL    12   2   3
0031    ISF         12
0032    JMP     13 => 0060
0033    TGETS   12   4  10  ; "is_file"
0034    MOV     13  11
0035    CALL    12   2   2
0036    ISF         12
0037    JMP     13 => 0060
0038    TGETS   12   6  11  ; "parse_name"
0039    MOV     13  11
0040    CALL    12   3   2
0041    ISF         12
0042    JMP     14 => 0055
0043    TGETV   14   0  12
0044    ISF         14
0045    JMP     14 => 0052
0046    TGETS   14   7  12  ; "compare_versions"
0047    MOV     15  13
0048    TGETV   16   0  12
0049    CALL    14   2   3
0050    ISF         14
0051    JMP     15 => 0060
0052 => TSETV   13   0  12
0053    TSETV   11   1  12
0054    JMP     14 => 0060
0055 => GGET    14  13      ; "table"
0056    TGETS   14  14  14  ; "insert"
0057    MOV     15   2
0058    MOV     16  11
0059    CALL    14   1   3
0060 => ITERC   11   2   3
0061    ITERL   11 => 0022
0062 => RET0     0   1

-- BYTECODE -- util.lua:299-336
0001    TNEW     0   0
0002    TNEW     1   0
0003    TNEW     2   0
0004    UGET     3   0      ; collect_rockspecs
0005    MOV      4   0
0006    MOV      5   1
0007    MOV      6   2
0008    KSTR     7   0      ; "."
0009    CALL     3   1   5
0010    UGET     3   0      ; collect_rockspecs
0011    MOV      4   0
0012    MOV      5   1
0013    MOV      6   2
0014    KSTR     7   1      ; "rockspec"
0015    CALL     3   1   5
0016    UGET     3   0      ; collect_rockspecs
0017    MOV      4   0
0018    MOV      5   1
0019    MOV      6   2
0020    KSTR     7   2      ; "rockspecs"
0021    CALL     3   1   5
0022    LEN      3   2
0023    KSHORT   4   0
0024    ISGE     4   3
0025    JMP      3 => 0037
0026    LEN      3   2
0027    KSHORT   4   1
0028    ISGE     4   3
0029    JMP      3 => 0034
0030    KPRI     3   0
0031    KSTR     4   3      ; "Please specify which rockspec file to us"~
0032    RET      3   3
0033    JMP      3 => 0073
0034 => TGETB    3   2   1
0035    RET1     3   2
0036    JMP      3 => 0073
0037 => GGET     3   4      ; "require"
0038    KSTR     4   5      ; "luarocks.fs"
0039    CALL     3   2   2
0040    GGET     4   4      ; "require"
0041    KSTR     5   6      ; "luarocks.dir"
0042    CALL     4   2   2
0043    TGETS    5   4   7  ; "base_name"
0044    TGETS    6   3   8  ; "current_dir"
0045    CALL     6   0   1
0046    CALLM    5   2   0
0047    TGETV    6   1   5
0048    ISF          6
0049    JMP      7 => 0052
0050    TGETV    6   1   5
0051    RET1     6   2
0052 => GGET     6   9      ; "next"
0053    MOV      7   0
0054    CALL     6   2   2
0055    ISF          6
0056    JMP      7 => 0070
0057    GGET     7   9      ; "next"
0058    MOV      8   0
0059    MOV      9   6
0060    CALL     7   2   3
0061    ISF          7
0062    JMP      8 => 0067
0063    KPRI     7   0
0064    KSTR     8   3      ; "Please specify which rockspec file to us"~
0065    RET      7   3
0066    JMP      7 => 0073
0067 => TGETV    7   1   6
0068    RET1     7   2
0069    JMP      7 => 0073
0070 => KPRI     7   0
0071    KSTR     8  10      ; "Argument missing: please specify a rocks"~
0072    RET      7   3
0073 => RET0     0   1

-- BYTECODE -- util.lua:341-343
0001    KSTR     1   0      ; "%q"
0002    MOV      2   1
0003    TGETS    1   1   1  ; "format"
0004    MOV      3   0
0005    CALLT    1   3

-- BYTECODE -- util.lua:348-354
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "^([^/]+)/([^/]+)$"
0004    CALL     1   3   3
0005    ISF          1
0006    JMP      3 => 0010
0007    MOV      3   2
0008    MOV      4   1
0009    RET      3   3
0010 => RET1     0   2

-- BYTECODE -- util.lua:357-375
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "table"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   3      ; "string"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    GGET     3   0      ; "assert"
0022    GGET     4   1      ; "type"
0023    MOV      5   2
0024    CALL     4   2   2
0025    ISEQS    4   3      ; "string"
0026    JMP      4 => 0031
0027    NOT      4   2
0028    JMP      5 => 0032
0029    KPRI     4   1
0030    JMP      5 => 0032
0031 => KPRI     4   2
0032 => CALL     3   1   2
0033    IST          2
0034    JMP      3 => 0036
0035    RET0     0   1
0036 => MOV      4   2
0037    TGETS    3   2   4  ; "match"
0038    KSTR     5   5      ; "%.rockspec$"
0039    CALL     3   2   3
0040    IST          3
0041    JMP      4 => 0048
0042    MOV      4   2
0043    TGETS    3   2   4  ; "match"
0044    KSTR     5   6      ; "%.rock$"
0045    CALL     3   2   3
0046    ISF          3
0047    JMP      4 => 0050
0048 => TSETV    2   0   1
0049    JMP      3 => 0064
0050 => UGET     3   0      ; util
0051    TGETS    3   3   7  ; "split_namespace"
0052    MOV      4   2
0053    CALL     3   3   2
0054    MOV      6   3
0055    TGETS    5   3   8  ; "lower"
0056    CALL     5   2   2
0057    TSETV    5   0   1
0058    ISF          4
0059    JMP      5 => 0064
0060    MOV      6   4
0061    TGETS    5   4   8  ; "lower"
0062    CALL     5   2   2
0063    TSETS    5   0   9  ; "namespace"
0064 => RET0     0   1

-- BYTECODE -- util.lua:377-387
0001    TNEW     1   0
0002    GGET     2   0      ; "pairs"
0003    MOV      3   0
0004    CALL     2   4   2
0005    ISNEXT   5 => 0018
0006 => GGET     7   1      ; "type"
0007    MOV      8   6
0008    CALL     7   2   2
0009    ISNES    7   2      ; "table"
0010    JMP      7 => 0017
0011    UGET     7   0      ; util
0012    TGETS    7   7   3  ; "deep_copy"
0013    MOV      8   6
0014    CALL     7   2   2
0015    TSETV    7   1   5
0016    JMP      7 => 0018
0017 => TSETV    6   1   5
0018 => ITERN    5   3   3
0019    ITERL    5 => 0006
0020    RET1     1   2

-- BYTECODE -- util.lua:390-408
0001    TDUP     0   0
0002    GGET     1   1      ; "ipairs"
0003    MOV      2   0
0004    CALL     1   4   2
0005    JMP      4 => 0018
0006 => GGET     6   2      ; "pcall"
0007    GGET     7   3      ; "require"
0008    MOV      8   5
0009    CALL     6   3   3
0010    ISF          6
0011    JMP      8 => 0018
0012    GGET     8   2      ; "pcall"
0013    TGETS    9   7   4  ; "use_lpeg"
0014    CALL     8   1   2
0015    MOV      8   6
0016    MOV      9   7
0017    RET      8   3
0018 => ITERC    4   3   3
0019    ITERL    4 => 0006
0020    KSTR     1   5      ; "Failed loading "
0021    GGET     2   1      ; "ipairs"
0022    MOV      3   0
0023    CALL     2   4   2
0024    JMP      5 => 0039
0025 => LEN      7   0
0026    ISNEV    5   7
0027    JMP      7 => 0034
0028    MOV      7   1
0029    KSTR     8   6      ; "and '"
0030    MOV      9   6
0031    KSTR    10   7      ; "'. Use 'luarocks search <partial-name>' "~
0032    CAT      1   7  10
0033    JMP      7 => 0039
0034 => MOV      7   1
0035    KSTR     8   8      ; "'"
0036    MOV      9   6
0037    KSTR    10   9      ; "', "
0038    CAT      1   7  10
0039 => ITERC    5   3   3
0040    ITERL    5 => 0025
0041    KPRI     2   0
0042    MOV      3   1
0043    RET      2   3

-- BYTECODE -- util.lua:413-425
0001    GGET     1   0      ; "io"
0002    TGETS    1   1   1  ; "open"
0003    MOV      2   0
0004    KSTR     3   2      ; "r"
0005    CALL     1   4   3
0006    ISNEN    3   0      ; 13
0007    JMP      4 => 0010
0008    KPRI     4   2
0009    RET1     4   2
0010 => ISF          1
0011    JMP      4 => 0017
0012    MOV      5   1
0013    TGETS    4   1   3  ; "close"
0014    CALL     4   1   2
0015    KPRI     4   2
0016    RET1     4   2
0017 => KPRI     4   1
0018    RET1     4   2

-- BYTECODE -- util.lua:428-433
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "^.:"
0004    CALL     1   2   3
0005    ISF          1
0006    JMP      2 => 0020
0007    MOV      2   0
0008    TGETS    1   0   2  ; "sub"
0009    KSHORT   3   1
0010    KSHORT   4   2
0011    CALL     1   2   4
0012    KSTR     2   3      ; """
0013    MOV      4   0
0014    TGETS    3   0   2  ; "sub"
0015    KSHORT   5   3
0016    CALL     3   2   3
0017    KSTR     4   3      ; """
0018    CAT      1   1   4
0019    RET1     1   2
0020 => KSTR     1   3      ; """
0021    MOV      2   0
0022    KSTR     3   3      ; """
0023    CAT      1   1   3
0024    RET1     1   2

-- BYTECODE -- util.lua:435-447
0001    UGET     2   0      ; util
0002    TGETS    2   2   0  ; "exists"
0003    MOV      3   0
0004    CALL     2   2   2
0005    IST          2
0006    JMP      2 => 0009
0007    KPRI     2   0
0008    RET1     2   2
0009 => UGET     2   0      ; util
0010    TGETS    2   2   1  ; "popen_read"
0011    UGET     3   1      ; Q
0012    MOV      4   0
0013    CALL     3   2   2
0014    KSTR     4   2      ; " -e "io.write(_VERSION:sub(5))""
0015    CAT      3   3   4
0016    CALL     2   3   2
0017    ISNES    2   3      ; ""
0018    JMP      4 => 0021
0019    KPRI     4   0
0020    RET1     4   2
0021 => ISF          1
0022    JMP      4 => 0027
0023    ISEQV    1   2
0024    JMP      4 => 0027
0025    KPRI     4   0
0026    RET1     4   2
0027 => RET1     2   2

-- BYTECODE -- util.lua:449-465
0001    GGET     0   0      ; "require"
0002    KSTR     1   1      ; "luarocks.core.cfg"
0003    CALL     0   2   2
0004    TGETS    1   0   2  ; "cache"
0005    TGETS    1   1   3  ; "luajit_version_checked"
0006    ISF          1
0007    JMP      2 => 0011
0008    TGETS    1   0   2  ; "cache"
0009    TGETS    1   1   4  ; "luajit_version"
0010    RET1     1   2
0011 => TGETS    1   0   2  ; "cache"
0012    KPRI     2   2
0013    TSETS    2   1   3  ; "luajit_version_checked"
0014    KPRI     1   0
0015    TGETS    2   0   5  ; "lua_version"
0016    ISNES    2   6      ; "5.1"
0017    JMP      2 => 0034
0018    UGET     2   0      ; util
0019    TGETS    2   2   7  ; "popen_read"
0020    UGET     3   1      ; Q
0021    TGETS    4   0   8  ; "variables"
0022    TGETS    4   4   9  ; "LUA_BINDIR"
0023    KSTR     5  10      ; "/"
0024    TGETS    6   0  11  ; "lua_interpreter"
0025    CAT      4   4   6
0026    CALL     3   2   2
0027    KSTR     4  12      ; " -e "io.write(tostring(jit and jit.versi"~
0028    CAT      3   3   4
0029    CALL     2   2   2
0030    MOV      1   2
0031    ISNES    1  13      ; "nil"
0032    JMP      2 => 0034
0033    KPRI     1   0
0034 => TGETS    2   0   2  ; "cache"
0035    TSETS    1   2   4  ; "luajit_version"
0036    RET1     1   2

-- BYTECODE -- util.lua:471-482
0001    TNEW     2   5
0002    KSTR     3   0      ; "lua"
0003    MOV      4   1
0004    UGET     5   0      ; exe_suffix
0005    CAT      3   3   5
0006    TSETB    3   2   1
0007    KSTR     3   0      ; "lua"
0008    MOV      5   1
0009    TGETS    4   1   1  ; "gsub"
0010    KSTR     6   2      ; "%."
0011    KSTR     7   3      ; ""
0012    CALL     4   2   4
0013    UGET     5   0      ; exe_suffix
0014    CAT      3   3   5
0015    TSETB    3   2   2
0016    KSTR     3   4      ; "lua-"
0017    MOV      4   1
0018    UGET     5   0      ; exe_suffix
0019    CAT      3   3   5
0020    TSETB    3   2   3
0021    KSTR     3   4      ; "lua-"
0022    MOV      5   1
0023    TGETS    4   1   1  ; "gsub"
0024    KSTR     6   2      ; "%."
0025    KSTR     7   3      ; ""
0026    CALL     4   2   4
0027    UGET     5   0      ; exe_suffix
0028    CAT      3   3   5
0029    TSETB    3   2   4
0030    GGET     3   5      ; "ipairs"
0031    MOV      4   2
0032    CALL     3   4   2
0033    JMP      6 => 0040
0034 => TSETV    1   0   7
0035    GGET     8   6      ; "table"
0036    TGETS    8   8   7  ; "insert"
0037    MOV      9   0
0038    MOV     10   7
0039    CALL     8   1   3
0040 => ITERC    6   3   3
0041    ITERL    6 => 0034
0042    RET0     0   1

-- BYTECODE -- util.lua:484-521
0001    TNEW     3   0
0002    ISF          1
0003    JMP      4 => 0009
0004    UGET     4   0      ; insert_lua_variants
0005    MOV      5   3
0006    MOV      6   1
0007    CALL     4   1   3
0008    JMP      4 => 0020
0009 => UGET     4   1      ; util
0010    TGETS    4   4   0  ; "lua_versions"
0011    KSTR     5   1      ; "descending"
0012    CALL     4   4   2
0013    JMP      7 => 0018
0014 => UGET     8   0      ; insert_lua_variants
0015    MOV      9   3
0016    MOV     10   7
0017    CALL     8   1   3
0018 => ITERC    7   2   3
0019    ITERL    7 => 0014
0020 => ISEQS    1   2      ; "5.1"
0021    JMP      4 => 0024
0022    IST          1
0023    JMP      4 => 0031
0024 => GGET     4   3      ; "table"
0025    TGETS    4   4   4  ; "insert"
0026    MOV      5   3
0027    KSTR     6   5      ; "luajit"
0028    UGET     7   2      ; exe_suffix
0029    CAT      6   6   7
0030    CALL     4   1   3
0031 => GGET     4   3      ; "table"
0032    TGETS    4   4   4  ; "insert"
0033    MOV      5   3
0034    KSTR     6   6      ; "lua"
0035    UGET     7   2      ; exe_suffix
0036    CAT      6   6   7
0037    CALL     4   1   3
0038    TNEW     4   0
0039    GGET     5   7      ; "package"
0040    TGETS    5   5   8  ; "config"
0041    MOV      6   5
0042    TGETS    5   5   9  ; "sub"
0043    KSHORT   7   1
0044    KSHORT   8   1
0045    CALL     5   2   4
0046    GGET     6  10      ; "ipairs"
0047    TNEW     7   3
0048    MOV      8   0
0049    MOV      9   5
0050    KSTR    10  11      ; "bin"
0051    CAT      8   8  10
0052    TSETB    8   7   1
0053    TSETB    0   7   2
0054    CALL     6   4   2
0055    JMP      9 => 0104
0056 => GGET    11  10      ; "ipairs"
0057    MOV     12   3
0058    CALL    11   4   2
0059    JMP     14 => 0102
0060 => MOV     16  10
0061    MOV     17   5
0062    MOV     18  15
0063    CAT     16  16  18
0064    UGET    17   1      ; util
0065    TGETS   17  17  12  ; "lua_is_wrapper"
0066    MOV     18  16
0067    CALL    17   3   2
0068    ISNEP   17   1
0069    JMP     19 => 0082
0070    UGET    19   1      ; util
0071    TGETS   19  19  13  ; "check_lua_version"
0072    MOV     20  16
0073    MOV     21   1
0074    CALL    19   2   3
0075    ISF         19
0076    JMP     20 => 0102
0077    MOV     20  15
0078    MOV     21  10
0079    MOV     22  19
0080    RET     20   4
0081    JMP     19 => 0102
0082 => ISEQP   17   2
0083    JMP     19 => 0086
0084    ISNEP   18   0
0085    JMP     19 => 0092
0086 => GGET    19   3      ; "table"
0087    TGETS   19  19   4  ; "insert"
0088    MOV     20   4
0089    MOV     21  16
0090    CALL    19   1   3
0091    JMP     19 => 0102
0092 => GGET    19   3      ; "table"
0093    TGETS   19  19   4  ; "insert"
0094    MOV     20   4
0095    GGET    21  14      ; "string"
0096    TGETS   21  21  15  ; "format"
0097    KSTR    22  16      ; "%-13s (%s)"
0098    MOV     23  16
0099    MOV     24  18
0100    CALL    21   0   4
0101    CALLM   19   1   1
0102 => ITERC   14   3   3
0103    ITERL   14 => 0060
0104 => ITERC    9   3   3
0105    ITERL    9 => 0056
0106    ISF          1
0107    JMP      6 => 0114
0108    KSTR     6  17      ; "Lua "
0109    MOV      7   1
0110    KSTR     8  18      ; " interpreter"
0111    CAT      6   6   8
0112    IST          6
0113    JMP      7 => 0115
0114 => KSTR     6  19      ; "Lua interpreter"
0115 => KPRI     7   0
0116    MOV      8   6
0117    KSTR     9  20      ; " not found at "
0118    MOV     10   0
0119    KSTR    11  21      ; "\n"
0120    ISF          2
0121    JMP     12 => 0131
0122    KSTR    12  22      ; "Tried:\t"
0123    GGET    13   3      ; "table"
0124    TGETS   13  13  23  ; "concat"
0125    MOV     14   4
0126    KSTR    15  24      ; "\n\t"
0127    CALL    13   2   3
0128    CAT     12  12  13
0129    IST         12
0130    JMP     13 => 0132
0131 => KSTR    12  25      ; ""
0132 => CAT      8   8  12
0133    RET      7   3

-- BYTECODE -- util.lua:524-537
0001    KNIL     3   4
0002    UGET     5   0      ; find_lua_bindir
0003    MOV      6   0
0004    MOV      7   1
0005    MOV      8   2
0006    CALL     5   4   4
0007    MOV      1   7
0008    MOV      4   6
0009    MOV      3   5
0010    IST          3
0011    JMP      5 => 0015
0012    KPRI     5   0
0013    MOV      6   4
0014    RET      5   3
0015 => TDUP     5   0
0016    TSETS    1   5   1  ; "lua_version"
0017    TSETS    3   5   2  ; "lua_interpreter"
0018    TSETS    0   5   3  ; "lua_dir"
0019    TSETS    4   5   4  ; "lua_bindir"
0020    RET1     5   2

-- BYTECODE -- util.lua:540-551
0001    GGET     1   0      ; "io"
0002    TGETS    1   1   1  ; "open"
0003    MOV      2   0
0004    KSTR     3   2      ; "r"
0005    CALL     1   3   3
0006    IST          1
0007    JMP      3 => 0011
0008    KPRI     3   0
0009    MOV      4   2
0010    RET      3   3
0011 => MOV      4   1
0012    TGETS    3   1   3  ; "read"
0013    KSHORT   5 1000
0014    CALL     3   3   3
0015    MOV      6   1
0016    TGETS    5   1   4  ; "close"
0017    CALL     5   1   2
0018    IST          3
0019    JMP      5 => 0023
0020    KPRI     5   0
0021    MOV      6   4
0022    RET      5   3
0023 => MOV      6   3
0024    TGETS    5   3   5  ; "match"
0025    KSTR     7   6      ; "LUAROCKS_SYSCONFDIR"
0026    CALL     5   2   3
0027    NOT      5   5
0028    NOT      5   5
0029    RET1     5   2

-- BYTECODE -- util.lua:558-560
0001    UGET     0   0      ; type_name
0002    RET1     0   2

-- BYTECODE -- util.lua:562-579
0001    GGET     1   0      ; "pairs"
0002    MOV      2   0
0003    CALL     1   4   2
0004    ISNEXT   4 => 0038
0005 => GGET     6   1      ; "type"
0006    MOV      7   5
0007    CALL     6   2   2
0008    UGET     7   0      ; valid_opts
0009    TGETV    7   7   4
0010    IST          7
0011    JMP      7 => 0017
0012    GGET     7   2      ; "error"
0013    KSTR     8   3      ; "invalid option: "
0014    MOV      9   4
0015    CAT      8   8   9
0016    CALL     7   1   2
0017 => UGET     7   0      ; valid_opts
0018    TGETV    7   7   4
0019    MOV      8   7
0020    TGETS    7   7   4  ; "match"
0021    KSTR     9   5      ; "^(.-)(%??)$"
0022    CALL     7   3   3
0023    ISEQV    6   7
0024    JMP      9 => 0038
0025    ISNES    8   6      ; "?"
0026    JMP      9 => 0029
0027    ISEQP    6   0
0028    JMP      9 => 0038
0029 => GGET     9   2      ; "error"
0030    KSTR    10   7      ; "invalid type option: "
0031    MOV     11   4
0032    KSTR    12   8      ; " - got "
0033    MOV     13   6
0034    KSTR    14   9      ; ", expected "
0035    MOV     15   7
0036    CAT     10  10  15
0037    CALL     9   1   2
0038 => ITERN    4   3   3
0039    ITERL    4 => 0005
0040    GGET     1   0      ; "pairs"
0041    UGET     2   0      ; valid_opts
0042    CALL     1   4   2
0043    ISNEXT   4 => 0060
0044 => MOV      7   5
0045    TGETS    6   5  10  ; "find"
0046    KSTR     8   6      ; "?"
0047    KSHORT   9   1
0048    KPRI    10   2
0049    CALL     6   2   5
0050    IST          6
0051    JMP      6 => 0060
0052    TGETV    6   0   4
0053    ISNEP    6   0
0054    JMP      6 => 0060
0055    GGET     6   2      ; "error"
0056    KSTR     7  11      ; "missing option: "
0057    MOV      8   4
0058    CAT      7   7   8
0059    CALL     6   1   2
0060 => ITERN    4   3   3
0061    ITERL    4 => 0044
0062    GGET     1  12      ; "setmetatable"
0063    MOV      2   0
0064    UGET     3   1      ; opts_mt
0065    CALLT    1   3

-- BYTECODE -- util.lua:553-580
0001    TNEW     2   0
0002    TSETS    2   2   0  ; "__index"
0003    FNEW     3   2      ; util.lua:558
0004    TSETS    3   2   1  ; "type"
0005    FNEW     3   3      ; util.lua:562
0006    UCLO     0 => 0007
0007 => RET1     3   2

-- BYTECODE -- util.lua:590-630
0001    GGET     1   0      ; "require"
0002    KSTR     2   1      ; "luarocks.core.cfg"
0003    CALL     1   2   2
0004    IST          0
0005    JMP      2 => 0013
0006    TGETS    2   1   2  ; "cache"
0007    TGETS    2   2   3  ; "rocks_provided"
0008    ISF          2
0009    JMP      3 => 0013
0010    TGETS    2   1   2  ; "cache"
0011    TGETS    2   2   3  ; "rocks_provided"
0012    RET1     2   2
0013 => TNEW     2   0
0014    TGETS    3   1   4  ; "lua_version"
0015    MOV      4   3
0016    KSTR     5   6      ; "-1"
0017    CAT      4   4   5
0018    TSETS    4   2   5  ; "lua"
0019    ISEQS    3   7      ; "5.2"
0020    JMP      4 => 0023
0021    ISNES    3   8      ; "5.3"
0022    JMP      4 => 0027
0023 => MOV      4   3
0024    KSTR     5   6      ; "-1"
0025    CAT      4   4   5
0026    TSETS    4   2   9  ; "bit32"
0027 => ISEQS    3   8      ; "5.3"
0028    JMP      4 => 0031
0029    ISNES    3  10      ; "5.4"
0030    JMP      4 => 0035
0031 => MOV      4   3
0032    KSTR     5   6      ; "-1"
0033    CAT      4   4   5
0034    TSETS    4   2  11  ; "utf8"
0035 => ISNES    3  12      ; "5.1"
0036    JMP      4 => 0058
0037    UGET     4   0      ; util
0038    TGETS    4   4  13  ; "get_luajit_version"
0039    CALL     4   2   1
0040    ISF          4
0041    JMP      5 => 0058
0042    MOV      5   4
0043    KSTR     6   6      ; "-1"
0044    CAT      5   5   6
0045    TSETS    5   2  14  ; "luabitop"
0046    ISF          0
0047    JMP      5 => 0054
0048    MOV      6   0
0049    TGETS    5   0  15  ; "format_is_at_least"
0050    KSTR     7  16      ; "3.0"
0051    CALL     5   2   3
0052    ISF          5
0053    JMP      6 => 0058
0054 => MOV      5   4
0055    KSTR     6   6      ; "-1"
0056    CAT      5   5   6
0057    TSETS    5   2  17  ; "luajit"
0058 => TGETS    4   1   3  ; "rocks_provided"
0059    ISF          4
0060    JMP      5 => 0066
0061    UGET     4   0      ; util
0062    TGETS    4   4  18  ; "deep_merge_under"
0063    MOV      5   2
0064    TGETS    6   1   3  ; "rocks_provided"
0065    CALL     4   1   3
0066 => IST          0
0067    JMP      4 => 0070
0068    TGETS    4   1   2  ; "cache"
0069    TSETS    2   4   3  ; "rocks_provided"
0070 => RET1     2   2

-- BYTECODE -- util.lua:632-646
0001    GGET     2   0      ; "require"
0002    KSTR     3   1      ; "luarocks.path"
0003    CALL     2   2   2
0004    GGET     3   0      ; "require"
0005    KSTR     4   2      ; "luarocks.fs"
0006    CALL     3   2   2
0007    GGET     4   0      ; "require"
0008    KSTR     5   3      ; "luarocks.dir"
0009    CALL     4   2   2
0010    TGETS    5   2   4  ; "install_dir"
0011    MOV      6   0
0012    MOV      7   1
0013    CALL     5   2   3
0014    GGET     6   5      ; "ipairs"
0015    TGETS    7   3   6  ; "list_dir"
0016    MOV      8   5
0017    CALL     7   0   2
0018    CALLM    6   4   0
0019    JMP      9 => 0035
0020 => TDUP    11   7
0021    GGET    12   5      ; "ipairs"
0022    MOV     13  11
0023    CALL    12   4   2
0024    JMP     15 => 0033
0025 => ISNEV   10  16
0026    JMP     17 => 0033
0027    TGETS   17   3   8  ; "delete"
0028    TGETS   18   4   9  ; "path"
0029    MOV     19   5
0030    MOV     20  10
0031    CALL    18   0   3
0032    CALLM   17   1   0
0033 => ITERC   15   3   3
0034    ITERL   15 => 0025
0035 => ITERC    9   3   3
0036    ITERL    9 => 0020
0037    RET0     0   1

-- BYTECODE -- util.lua:0-649
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.util"
0004    CALL     1   2   2
0005    TGETS    2   1   2  ; "cleanup_path"
0006    TSETS    2   0   2  ; "cleanup_path"
0007    TGETS    2   1   3  ; "split_string"
0008    TSETS    2   0   3  ; "split_string"
0009    TGETS    2   1   4  ; "sortedpairs"
0010    TSETS    2   0   4  ; "sortedpairs"
0011    TGETS    2   1   5  ; "deep_merge"
0012    TSETS    2   0   5  ; "deep_merge"
0013    TGETS    2   1   6  ; "deep_merge_under"
0014    TSETS    2   0   6  ; "deep_merge_under"
0015    TGETS    2   1   7  ; "popen_read"
0016    TSETS    2   0   7  ; "popen_read"
0017    TGETS    2   1   8  ; "show_table"
0018    TSETS    2   0   8  ; "show_table"
0019    TGETS    2   1   9  ; "printerr"
0020    TSETS    2   0   9  ; "printerr"
0021    TGETS    2   1  10  ; "warning"
0022    TSETS    2   0  10  ; "warning"
0023    TGETS    2   1  11  ; "keys"
0024    TSETS    2   0  11  ; "keys"
0025    GGET     2  12      ; "unpack"
0026    IST          2
0027    JMP      3 => 0030
0028    GGET     2  13      ; "table"
0029    TGETS    2   2  12  ; "unpack"
0030 => TNEW     3   0
0031    GGET     4   0      ; "require"
0032    KSTR     5  14      ; "debug"
0033    CALL     4   2   2
0034    FNEW     5  16      ; util.lua:34
0035    TSETS    5   0  15  ; "schedule_function"
0036    FNEW     5  18      ; util.lua:46
0037    TSETS    5   0  17  ; "remove_scheduled_function"
0038    FNEW     5  20      ; util.lua:60
0039    TSETS    5   0  19  ; "run_scheduled_functions"
0040    FNEW     5  22      ; util.lua:76
0041    TSETS    5   0  21  ; "matchquote"
0042    KSTR     5  23      ; "%$%((%a[%a%d_]+)%)"
0043    FNEW     6  25      ; util.lua:92
0044    TSETS    6   0  24  ; "warn_if_not_used"
0045    FNEW     6  26      ; util.lua:107
0046    FNEW     7  28      ; util.lua:126
0047    TSETS    7   0  27  ; "variable_substitutions"
0048    FNEW     7  30      ; util.lua:144
0049    TSETS    7   0  29  ; "lua_versions"
0050    FNEW     7  32      ; util.lua:161
0051    TSETS    7   0  31  ; "lua_path_variables"
0052    FNEW     7  34      ; util.lua:178
0053    TSETS    7   0  33  ; "starts_with"
0054    FNEW     7  36      ; util.lua:183
0055    TSETS    7   0  35  ; "printout"
0056    FNEW     7  38      ; util.lua:188
0057    TSETS    7   0  37  ; "title"
0058    FNEW     7  40      ; util.lua:196
0059    TSETS    7   0  39  ; "this_program"
0060    FNEW     7  42      ; util.lua:218
0061    TSETS    7   0  41  ; "format_rock_name"
0062    FNEW     7  44      ; util.lua:222
0063    TSETS    7   0  43  ; "deps_mode_option"
0064    FNEW     7  46      ; util.lua:240
0065    TSETS    7   0  45  ; "see_help"
0066    FNEW     7  48      ; util.lua:244
0067    TSETS    7   0  47  ; "see_also"
0068    FNEW     7  50      ; util.lua:252
0069    TSETS    7   0  49  ; "announce_install"
0070    FNEW     7  51      ; util.lua:271
0071    FNEW     8  53      ; util.lua:299
0072    TSETS    8   0  52  ; "get_default_rockspec"
0073    FNEW     8  55      ; util.lua:341
0074    TSETS    8   0  54  ; "LQ"
0075    FNEW     8  57      ; util.lua:348
0076    TSETS    8   0  56  ; "split_namespace"
0077    FNEW     8  59      ; util.lua:357
0078    TSETS    8   0  58  ; "namespaced_name_action"
0079    FNEW     8  61      ; util.lua:377
0080    TSETS    8   0  60  ; "deep_copy"
0081    FNEW     8  63      ; util.lua:390
0082    TSETS    8   0  62  ; "require_json"
0083    FNEW     8  65      ; util.lua:413
0084    TSETS    8   0  64  ; "exists"
0085    FNEW     8  66      ; util.lua:428
0086    FNEW     9  68      ; util.lua:435
0087    TSETS    9   0  67  ; "check_lua_version"
0088    FNEW     9  70      ; util.lua:449
0089    TSETS    9   0  69  ; "get_luajit_version"
0090    KPRI     9   0
0091    GGET    10  71      ; "package"
0092    TGETS   10  10  72  ; "config"
0093    MOV     11  10
0094    TGETS   10  10  73  ; "sub"
0095    KSHORT  12   1
0096    KSHORT  13   1
0097    CALL    10   2   4
0098    ISNES   10  74      ; "\"
0099    JMP     10 => 0102
0100    KSTR    10  75      ; ".exe"
0101    JMP     11 => 0103
0102 => KSTR    10  76      ; ""
0103 => FNEW    11  77      ; util.lua:471
0104    FNEW     9  78      ; util.lua:484
0105    UCLO    10 => 0106
0106 => FNEW    10  80      ; util.lua:524
0107    TSETS   10   0  79  ; "find_lua"
0108    UCLO     8 => 0109
0109 => FNEW     8  82      ; util.lua:540
0110    TSETS    8   0  81  ; "lua_is_wrapper"
0111    FNEW     8  84      ; util.lua:553
0112    TSETS    8   0  83  ; "opts_table"
0113    FNEW     8  86      ; util.lua:590
0114    TSETS    8   0  85  ; "get_rocks_provided"
0115    FNEW     8  88      ; util.lua:632
0116    TSETS    8   0  87  ; "remove_doc_dir"
0117    UCLO     0 => 0118
0118 => RET1     0   2

-----------------------
-- BYTECODE -- builtin.lua:13-43
0001    ISF          0
0002    JMP      1 => 0006
0003    TGETS    1   0   0  ; "modules"
0004    IST          1
0005    JMP      1 => 0008
0006 => KPRI     1   0
0007    RET1     1   2
0008 => TNEW     1   0
0009    KPRI     2   1
0010    GGET     3   1      ; "pairs"
0011    TGETS    4   0   0  ; "modules"
0012    CALL     3   4   2
0013    ISNEXT   6 => 0080
0014 => GGET     8   2      ; "type"
0015    MOV      9   7
0016    CALL     8   2   2
0017    ISNES    8   3      ; "table"
0018    JMP      8 => 0080
0019    TGETS    8   7   4  ; "libraries"
0020    ISF          8
0021    JMP      9 => 0080
0022    TGETS    8   7   4  ; "libraries"
0023    GGET     9   2      ; "type"
0024    MOV     10   8
0025    CALL     9   2   2
0026    ISNES    9   5      ; "string"
0027    JMP      9 => 0031
0028    TNEW     9   3
0029    TSETB    8   9   1
0030    MOV      8   9
0031 => TNEW     9   0
0032    TNEW    10   0
0033    GGET    11   6      ; "ipairs"
0034    MOV     12   8
0035    CALL    11   4   2
0036    JMP     14 => 0070
0037 => MOV     17  15
0038    TGETS   16  15   7  ; "upper"
0039    CALL    16   2   2
0040    MOV     17  16
0041    TGETS   16  16   8  ; "gsub"
0042    KSTR    18   9      ; "%+"
0043    KSTR    19  10      ; "P"
0044    CALL    16   2   4
0045    MOV     17  16
0046    TGETS   16  16   8  ; "gsub"
0047    KSTR    18  11      ; "[^%w]"
0048    KSTR    19  12      ; "_"
0049    CALL    16   2   4
0050    KPRI     2   2
0051    TDUP    17  13
0052    TSETS   15  17  14  ; "library"
0053    TSETV   17   1  16
0054    GGET    17   3      ; "table"
0055    TGETS   17  17  15  ; "insert"
0056    MOV     18   9
0057    KSTR    19  16      ; "$("
0058    MOV     20  16
0059    KSTR    21  17      ; "_INCDIR)"
0060    CAT     19  19  21
0061    CALL    17   1   3
0062    GGET    17   3      ; "table"
0063    TGETS   17  17  15  ; "insert"
0064    MOV     18  10
0065    KSTR    19  16      ; "$("
0066    MOV     20  16
0067    KSTR    21  18      ; "_LIBDIR)"
0068    CAT     19  19  21
0069    CALL    17   1   3
0070 => ITERC   14   3   3
0071    ITERL   14 => 0037
0072    TGETS   11   7  19  ; "incdirs"
0073    IST         11
0074    JMP     11 => 0076
0075    TSETS    9   7  19  ; "incdirs"
0076 => TGETS   11   7  20  ; "libdirs"
0077    IST         11
0078    JMP     11 => 0080
0079    TSETS   10   7  20  ; "libdirs"
0080 => ITERN    6   3   3
0081    ITERL    6 => 0014
0082    ISF          2
0083    JMP      3 => 0086
0084    ISTC     3   1
0085    JMP      3 => 0087
0086 => KPRI     3   0
0087 => RET1     3   2

-- BYTECODE -- builtin.lua:45-60
0001    IST          0
0002    JMP      2 => 0005
0003    KNIL     2   4
0004    RET      2   4
0005 => TNEW     2   0
0006    TNEW     3   0
0007    TNEW     4   0
0008    GGET     5   0      ; "pairs"
0009    MOV      6   0
0010    CALL     5   4   2
0011    ISNEXT   8 => 0036
0012 => TGETS   10   9   1  ; "library"
0013    ISF         10
0014    JMP     11 => 0036
0015    GGET    10   2      ; "table"
0016    TGETS   10  10   3  ; "insert"
0017    MOV     11   2
0018    TGETS   12   9   1  ; "library"
0019    CALL    10   1   3
0020    GGET    10   2      ; "table"
0021    TGETS   10  10   3  ; "insert"
0022    MOV     11   3
0023    MOV     12   8
0024    KSTR    13   4      ; "_INCDIR"
0025    CAT     12  12  13
0026    TGETV   12   1  12
0027    CALL    10   1   3
0028    GGET    10   2      ; "table"
0029    TGETS   10  10   3  ; "insert"
0030    MOV     11   4
0031    MOV     12   8
0032    KSTR    13   5      ; "_LIBDIR"
0033    CAT     12  12  13
0034    TGETV   12   1  12
0035    CALL    10   1   3
0036 => ITERN    8   3   3
0037    ITERL    8 => 0012
0038    MOV      5   2
0039    MOV      6   3
0040    MOV      7   4
0041    RET      5   4

-- BYTECODE -- builtin.lua:63-69
0001    GGET     1   0      ; "io"
0002    TGETS    1   1   1  ; "open"
0003    UGET     2   0      ; dir
0004    TGETS    2   2   2  ; "path"
0005    UGET     3   1      ; fs
0006    TGETS    3   3   3  ; "current_dir"
0007    CALL     3   2   1
0008    MOV      4   0
0009    CALL     2   2   3
0010    KSTR     3   4      ; "r"
0011    CALL     1   2   3
0012    IST          1
0013    JMP      2 => 0016
0014    KPRI     2   0
0015    RET1     2   2
0016 => MOV      3   1
0017    TGETS    2   1   5  ; "read"
0018    KSTR     4   6      ; "*a"
0019    CALL     2   2   3
0020    MOV      4   1
0021    TGETS    3   1   7  ; "close"
0022    CALL     3   1   2
0023    MOV      4   2
0024    TGETS    3   2   8  ; "match"
0025    KSTR     5   9      ; "int%s+luaopen_([a-zA-Z0-9_]+)"
0026    CALL     3   2   3
0027    RET1     3   2

-- BYTECODE -- builtin.lua:79-137
0001    TNEW     3   0
0002    KNIL     4   5
0003    KSTR     6   0      ; ""
0004    GGET     7   1      ; "ipairs"
0005    TDUP     8   2
0006    CALL     7   4   2
0007    JMP     10 => 0022
0008 => UGET    12   0      ; fs
0009    TGETS   12  12   3  ; "is_dir"
0010    MOV     13  11
0011    CALL    12   2   2
0012    ISF         12
0013    JMP     13 => 0022
0014    UGET    12   0      ; fs
0015    TGETS   12  12   4  ; "change_dir"
0016    MOV     13  11
0017    CALL    12   1   2
0018    MOV     12  11
0019    KSTR    13   5      ; "/"
0020    CAT      6  12  13
0021    JMP      7 => 0024
0022 => ITERC   10   3   3
0023    ITERL   10 => 0008
0024 => GGET     7   1      ; "ipairs"
0025    UGET     8   0      ; fs
0026    TGETS    8   8   6  ; "find"
0027    CALL     8   0   1
0028    CALLM    7   4   0
0029    JMP     10 => 0081
0030 => MOV     13  11
0031    TGETS   12  11   7  ; "match"
0032    KSTR    14   8      ; "^([^\/]*)"
0033    CALL    12   2   3
0034    UGET    13   1      ; skiplist
0035    TGETV   13  13  12
0036    IST         13
0037    JMP     13 => 0081
0038    MOV     14  11
0039    TGETS   13  11   7  ; "match"
0040    KSTR    15   9      ; "(.*)%.lua$"
0041    CALL    13   2   3
0042    ISF         13
0043    JMP     14 => 0053
0044    UGET    14   2      ; path
0045    TGETS   14  14  10  ; "path_to_module"
0046    MOV     15  11
0047    CALL    14   2   2
0048    MOV     15   6
0049    MOV     16  11
0050    CAT     15  15  16
0051    TSETV   15   3  14
0052    JMP     14 => 0081
0053 => MOV     15  11
0054    TGETS   14  11   7  ; "match"
0055    KSTR    16  11      ; "(.*)%.c$"
0056    CALL    14   2   3
0057    ISF         14
0058    JMP     15 => 0081
0059    UGET    15   3      ; get_cmod_name
0060    MOV     16  11
0061    CALL    15   2   2
0062    IST         15
0063    JMP     16 => 0072
0064    UGET    15   2      ; path
0065    TGETS   15  15  10  ; "path_to_module"
0066    MOV     17  11
0067    TGETS   16  11  12  ; "gsub"
0068    KSTR    18  13      ; "%.c$"
0069    KSTR    19  14      ; ".lua"
0070    CALL    16   0   4
0071    CALLM   15   2   0
0072 => TDUP    16  15
0073    MOV     17   6
0074    MOV     18  11
0075    CAT     17  17  18
0076    TSETS   17  16  16  ; "sources"
0077    TSETS    0  16  17  ; "libraries"
0078    TSETS    1  16  18  ; "incdirs"
0079    TSETS    2  16  19  ; "libdirs"
0080    TSETV   16   3  15
0081 => ITERC   10   3   3
0082    ITERL   10 => 0030
0083    ISEQS    6   0      ; ""
0084    JMP      7 => 0088
0085    UGET     7   0      ; fs
0086    TGETS    7   7  20  ; "pop_dir"
0087    CALL     7   1   1
0088 => UGET     7   0      ; fs
0089    TGETS    7   7   3  ; "is_dir"
0090    KSTR     8  21      ; "src/bin"
0091    CALL     7   2   2
0092    ISF          7
0093    JMP      8 => 0096
0094    KSTR     7  21      ; "src/bin"
0095    JMP      8 => 0103
0096 => UGET     7   0      ; fs
0097    TGETS    7   7   3  ; "is_dir"
0098    KSTR     8  22      ; "bin"
0099    CALL     7   2   2
0100    ISF          7
0101    JMP      8 => 0103
0102    KSTR     7  22      ; "bin"
0103 => ISF          7
0104    JMP      8 => 0127
0105    TDUP     8  23
0106    TNEW     9   0
0107    TSETS    9   8  22  ; "bin"
0108    MOV      4   8
0109    GGET     8   1      ; "ipairs"
0110    UGET     9   0      ; fs
0111    TGETS    9   9  24  ; "list_dir"
0112    MOV     10   7
0113    CALL     9   0   2
0114    CALLM    8   4   0
0115    JMP     11 => 0125
0116 => GGET    13  25      ; "table"
0117    TGETS   13  13  26  ; "insert"
0118    TGETS   14   4  22  ; "bin"
0119    UGET    15   4      ; dir
0120    TGETS   15  15  27  ; "path"
0121    MOV     16   7
0122    MOV     17  12
0123    CALL    15   0   3
0124    CALLM   13   1   1
0125 => ITERC   11   3   3
0126    ITERL   11 => 0116
0127 => GGET     8   1      ; "ipairs"
0128    TDUP     9  28
0129    CALL     8   4   2
0130    JMP     11 => 0145
0131 => UGET    13   0      ; fs
0132    TGETS   13  13   3  ; "is_dir"
0133    MOV     14  12
0134    CALL    13   2   2
0135    ISF         13
0136    JMP     14 => 0145
0137    IST          5
0138    JMP     13 => 0140
0139    TNEW     5   0
0140 => GGET    13  25      ; "table"
0141    TGETS   13  13  26  ; "insert"
0142    MOV     14   5
0143    MOV     15  12
0144    CALL    13   1   3
0145 => ITERC   11   3   3
0146    ITERL   11 => 0131
0147    MOV      8   3
0148    MOV      9   4
0149    MOV     10   5
0150    RET      8   4

-- BYTECODE -- builtin.lua:143-146
0001    GGET     0   0      ; "io"
0002    TGETS    0   0   1  ; "stdout"
0003    MOV      1   0
0004    TGETS    0   0   2  ; "write"
0005    GGET     2   3      ; "table"
0006    TGETS    2   2   4  ; "concat"
0007    TNEW     3   3
0008    VARG     4   0   0
0009    TSETM    4   0      ; 1
0010    KSTR     4   5      ; " "
0011    CALL     2   2   3
0012    KSTR     3   6      ; "\n"
0013    CAT      2   2   3
0014    CALL     0   1   3
0015    UGET     0   0      ; fs
0016    TGETS    0   0   7  ; "execute"
0017    VARG     1   0   0
0018    CALLMT   0   0

-- BYTECODE -- builtin.lua:160-170
0001    ISF          2
0002    JMP      3 => 0033
0003    GGET     3   0      ; "type"
0004    MOV      4   2
0005    CALL     3   2   2
0006    ISEQS    3   1      ; "table"
0007    JMP      3 => 0014
0008    TNEW     3   3
0009    GGET     4   2      ; "tostring"
0010    MOV      5   2
0011    CALL     4   0   2
0012    TSETM    4   0      ; 1
0013    MOV      2   3
0014 => UGET     3   0      ; util
0015    TGETS    3   3   3  ; "variable_substitutions"
0016    MOV      4   2
0017    UGET     5   1      ; variables
0018    CALL     3   1   3
0019    GGET     3   4      ; "ipairs"
0020    MOV      4   2
0021    CALL     3   4   2
0022    JMP      6 => 0031
0023 => GGET     8   1      ; "table"
0024    TGETS    8   8   5  ; "insert"
0025    MOV      9   0
0026    MOV     11   1
0027    TGETS   10   1   6  ; "format"
0028    MOV     12   7
0029    CALL    10   0   3
0030    CALLM    8   1   1
0031 => ITERC    6   3   3
0032    ITERL    6 => 0023
0033 => RET0     0   1

-- BYTECODE -- builtin.lua:173-178
0001    TNEW     4   0
0002    UGET     5   0      ; add_flags
0003    MOV      6   4
0004    KSTR     7   0      ; "-D%s"
0005    MOV      8   2
0006    CALL     5   1   4
0007    UGET     5   0      ; add_flags
0008    MOV      6   4
0009    KSTR     7   1      ; "-I%s"
0010    MOV      8   3
0011    CALL     5   1   4
0012    UGET     5   1      ; execute
0013    UGET     6   2      ; variables
0014    TGETS    6   6   2  ; "CC"
0015    KSTR     7   3      ; " "
0016    UGET     8   2      ; variables
0017    TGETS    8   8   4  ; "CFLAGS"
0018    CAT      6   6   8
0019    KSTR     7   5      ; "-c"
0020    KSTR     8   6      ; "-o"
0021    MOV      9   0
0022    KSTR    10   7      ; "-I"
0023    UGET    11   2      ; variables
0024    TGETS   11  11   8  ; "LUA_INCDIR"
0025    CAT     10  10  11
0026    MOV     11   1
0027    UGET    12   3      ; unpack
0028    MOV     13   4
0029    CALL    12   0   2
0030    CALLMT   5   6

-- BYTECODE -- builtin.lua:179-187
0001    TNEW     4   3
0002    UGET     5   0      ; unpack
0003    MOV      6   1
0004    CALL     5   0   2
0005    TSETM    5   0      ; 1
0006    UGET     5   1      ; add_flags
0007    MOV      6   4
0008    KSTR     7   0      ; "-L%s"
0009    MOV      8   3
0010    CALL     5   1   4
0011    UGET     5   1      ; add_flags
0012    MOV      6   4
0013    KSTR     7   1      ; "-l%s"
0014    MOV      8   2
0015    CALL     5   1   4
0016    LEN      5   4
0017    ADDVN    5   5   1  ; 1
0018    UGET     6   2      ; dir
0019    TGETS    6   6   2  ; "path"
0020    UGET     7   3      ; variables
0021    TGETS    7   7   3  ; "LUA_LIBDIR"
0022    UGET     8   3      ; variables
0023    TGETS    8   8   4  ; "LUALIB"
0024    CALL     6   2   3
0025    TSETV    6   4   5
0026    LEN      5   4
0027    ADDVN    5   5   1  ; 1
0028    KSTR     6   5      ; "-l"
0029    UGET     7   3      ; variables
0030    TGETS    7   7   6  ; "MSVCRT"
0031    IST          7
0032    JMP      8 => 0034
0033    KSTR     7   7      ; "m"
0034 => CAT      6   6   7
0035    TSETV    6   4   5
0036    UGET     5   4      ; execute
0037    UGET     6   3      ; variables
0038    TGETS    6   6   8  ; "LD"
0039    KSTR     7   9      ; " "
0040    UGET     8   3      ; variables
0041    TGETS    8   8  10  ; "LIBFLAG"
0042    CAT      6   6   8
0043    KSTR     7  11      ; "-o"
0044    MOV      8   0
0045    UGET     9   0      ; unpack
0046    MOV     10   4
0047    CALL     9   0   2
0048    CALLM    5   2   3
0049    RET1     5   2

-- BYTECODE -- builtin.lua:198-203
0001    TNEW     4   0
0002    UGET     5   0      ; add_flags
0003    MOV      6   4
0004    KSTR     7   0      ; "-D%s"
0005    MOV      8   2
0006    CALL     5   1   4
0007    UGET     5   0      ; add_flags
0008    MOV      6   4
0009    KSTR     7   1      ; "-I%s"
0010    MOV      8   3
0011    CALL     5   1   4
0012    UGET     5   1      ; execute
0013    UGET     6   2      ; variables
0014    TGETS    6   6   2  ; "CC"
0015    KSTR     7   3      ; " "
0016    UGET     8   2      ; variables
0017    TGETS    8   8   4  ; "CFLAGS"
0018    CAT      6   6   8
0019    KSTR     7   5      ; "-c"
0020    KSTR     8   6      ; "-Fo"
0021    MOV      9   0
0022    CAT      8   8   9
0023    KSTR     9   7      ; "-I"
0024    UGET    10   2      ; variables
0025    TGETS   10  10   8  ; "LUA_INCDIR"
0026    CAT      9   9  10
0027    MOV     10   1
0028    UGET    11   3      ; unpack
0029    MOV     12   4
0030    CALL    11   0   2
0031    CALLMT   5   5

-- BYTECODE -- builtin.lua:204-228
0001    TNEW     5   3
0002    UGET     6   0      ; unpack
0003    MOV      7   1
0004    CALL     6   0   2
0005    TSETM    6   0      ; 1
0006    UGET     6   1      ; add_flags
0007    MOV      7   5
0008    KSTR     8   0      ; "-libpath:%s"
0009    MOV      9   3
0010    CALL     6   1   4
0011    UGET     6   1      ; add_flags
0012    MOV      7   5
0013    KSTR     8   1      ; "%s.lib"
0014    MOV      9   2
0015    CALL     6   1   4
0016    UGET     6   2      ; dir
0017    TGETS    6   6   2  ; "base_name"
0018    MOV      7   0
0019    CALL     6   2   2
0020    MOV      7   6
0021    TGETS    6   6   3  ; "gsub"
0022    KSTR     8   4      ; ".[^.]*$"
0023    KSTR     9   5      ; ""
0024    CALL     6   2   4
0025    MOV      7   6
0026    KSTR     8   6      ; ".def"
0027    CAT      7   7   8
0028    GGET     8   7      ; "io"
0029    TGETS    8   8   8  ; "open"
0030    UGET     9   2      ; dir
0031    TGETS    9   9   9  ; "path"
0032    UGET    10   3      ; fs
0033    TGETS   10  10  10  ; "current_dir"
0034    CALL    10   2   1
0035    MOV     11   7
0036    CALL     9   2   3
0037    KSTR    10  11      ; "w+"
0038    CALL     8   2   3
0039    MOV     10   4
0040    TGETS    9   4   3  ; "gsub"
0041    KSTR    11  12      ; "%."
0042    KSTR    12  13      ; "_"
0043    CALL     9   2   4
0044    MOV     11   9
0045    TGETS   10   9  14  ; "match"
0046    KSTR    12  15      ; "^[^%-]+%-(.+)$"
0047    CALL    10   2   3
0048    ISTC     9  10
0049    JMP     11 => 0050
0050 => MOV     11   8
0051    TGETS   10   8  16  ; "write"
0052    KSTR    12  17      ; "EXPORTS\n"
0053    CALL    10   1   3
0054    MOV     11   8
0055    TGETS   10   8  16  ; "write"
0056    KSTR    12  18      ; "luaopen_"
0057    MOV     13   9
0058    KSTR    14  19      ; "\n"
0059    CAT     12  12  14
0060    CALL    10   1   3
0061    MOV     11   8
0062    TGETS   10   8  20  ; "close"
0063    CALL    10   1   2
0064    UGET    10   4      ; execute
0065    UGET    11   5      ; variables
0066    TGETS   11  11  21  ; "LD"
0067    KSTR    12  22      ; "-dll"
0068    KSTR    13  23      ; "-def:"
0069    MOV     14   7
0070    CAT     13  13  14
0071    KSTR    14  24      ; "-out:"
0072    MOV     15   0
0073    CAT     14  14  15
0074    UGET    15   2      ; dir
0075    TGETS   15  15   9  ; "path"
0076    UGET    16   5      ; variables
0077    TGETS   16  16  25  ; "LUA_LIBDIR"
0078    UGET    17   5      ; variables
0079    TGETS   17  17  26  ; "LUALIB"
0080    CALL    15   2   3
0081    UGET    16   0      ; unpack
0082    MOV     17   5
0083    CALL    16   0   2
0084    CALLM   10   2   5
0085    KSTR    11   5      ; ""
0086    MOV     13   4
0087    TGETS   12   4  27  ; "find"
0088    KSTR    14  12      ; "%."
0089    CALL    12   2   3
0090    ISEQP   12   0
0091    JMP     12 => 0104
0092    MOV     13   4
0093    TGETS   12   4   3  ; "gsub"
0094    KSTR    14  28      ; "%.%w+$"
0095    KSTR    15  29      ; "\"
0096    CALL    12   2   4
0097    MOV     11  12
0098    MOV     13  11
0099    TGETS   12  11   3  ; "gsub"
0100    KSTR    14  12      ; "%."
0101    KSTR    15  29      ; "\"
0102    CALL    12   2   4
0103    MOV     11  12
0104 => MOV     12  11
0105    MOV     13   6
0106    KSTR    14  30      ; ".dll.manifest"
0107    CAT     12  12  14
0108    ISF         10
0109    JMP     13 => 0128
0110    UGET    13   3      ; fs
0111    TGETS   13  13  31  ; "exists"
0112    MOV     14  12
0113    CALL    13   2   2
0114    ISF         13
0115    JMP     14 => 0128
0116    UGET    13   4      ; execute
0117    UGET    14   5      ; variables
0118    TGETS   14  14  32  ; "MT"
0119    KSTR    15  33      ; "-manifest"
0120    MOV     16  12
0121    KSTR    17  34      ; "-outputresource:"
0122    MOV     18  11
0123    MOV     19   6
0124    KSTR    20  35      ; ".dll;2"
0125    CAT     17  17  20
0126    CALL    13   2   5
0127    MOV     10  13
0128 => RET1    10   2

-- BYTECODE -- builtin.lua:236-241
0001    TNEW     4   0
0002    UGET     5   0      ; add_flags
0003    MOV      6   4
0004    KSTR     7   0      ; "-D%s"
0005    MOV      8   2
0006    CALL     5   1   4
0007    UGET     5   0      ; add_flags
0008    MOV      6   4
0009    KSTR     7   1      ; "-I%s"
0010    MOV      8   3
0011    CALL     5   1   4
0012    UGET     5   1      ; execute
0013    UGET     6   2      ; variables
0014    TGETS    6   6   2  ; "CC"
0015    KSTR     7   3      ; " "
0016    UGET     8   2      ; variables
0017    TGETS    8   8   4  ; "CFLAGS"
0018    CAT      6   6   8
0019    KSTR     7   5      ; "-I"
0020    UGET     8   2      ; variables
0021    TGETS    8   8   6  ; "LUA_INCDIR"
0022    CAT      7   7   8
0023    KSTR     8   7      ; "-c"
0024    MOV      9   1
0025    KSTR    10   8      ; "-o"
0026    MOV     11   0
0027    UGET    12   3      ; unpack
0028    MOV     13   4
0029    CALL    12   0   2
0030    CALLMT   5   6

-- BYTECODE -- builtin.lua:242-254
0001    TNEW     4   3
0002    UGET     5   0      ; unpack
0003    MOV      6   1
0004    CALL     5   0   2
0005    TSETM    5   0      ; 1
0006    UGET     5   1      ; add_flags
0007    MOV      6   4
0008    KSTR     7   0      ; "-L%s"
0009    MOV      8   3
0010    CALL     5   1   4
0011    UGET     5   2      ; cfg
0012    TGETS    5   5   1  ; "gcc_rpath"
0013    ISF          5
0014    JMP      6 => 0020
0015    UGET     5   1      ; add_flags
0016    MOV      6   4
0017    KSTR     7   2      ; "-Wl,-rpath,%s"
0018    MOV      8   3
0019    CALL     5   1   4
0020 => UGET     5   1      ; add_flags
0021    MOV      6   4
0022    KSTR     7   3      ; "-l%s"
0023    MOV      8   2
0024    CALL     5   1   4
0025    UGET     5   2      ; cfg
0026    TGETS    5   5   4  ; "link_lua_explicitly"
0027    ISF          5
0028    JMP      6 => 0040
0029    LEN      5   4
0030    ADDVN    5   5   1  ; 1
0031    KSTR     6   5      ; "-L"
0032    UGET     7   3      ; variables
0033    TGETS    7   7   6  ; "LUA_LIBDIR"
0034    CAT      6   6   7
0035    TSETV    6   4   5
0036    LEN      5   4
0037    ADDVN    5   5   1  ; 1
0038    KSTR     6   7      ; "-llua"
0039    TSETV    6   4   5
0040 => UGET     5   4      ; execute
0041    UGET     6   3      ; variables
0042    TGETS    6   6   8  ; "LD"
0043    KSTR     7   9      ; " "
0044    UGET     8   3      ; variables
0045    TGETS    8   8  10  ; "LIBFLAG"
0046    CAT      6   6   8
0047    KSTR     7  11      ; "-o"
0048    MOV      8   0
0049    UGET     9   0      ; unpack
0050    MOV     10   4
0051    CALL     9   0   2
0052    CALLMT   5   3

-- BYTECODE -- builtin.lua:255-261
0001    UGET     5   0      ; execute
0002    UGET     6   1      ; variables
0003    TGETS    6   6   0  ; "AR"
0004    KSTR     7   1      ; "rc"
0005    MOV      8   0
0006    UGET     9   2      ; unpack
0007    MOV     10   1
0008    CALL     9   0   2
0009    CALLM    5   2   3
0010    ISF          5
0011    JMP      6 => 0018
0012    UGET     6   0      ; execute
0013    UGET     7   1      ; variables
0014    TGETS    7   7   2  ; "RANLIB"
0015    MOV      8   0
0016    CALL     6   2   3
0017    MOV      5   6
0018 => RET1     5   2

-- BYTECODE -- builtin.lua:152-363
0001    GGET     1   0      ; "assert"
0002    MOV      3   0
0003    TGETS    2   0   1  ; "type"
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "rockspec"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    KNIL     1   3
0012    TGETS    4   0   3  ; "build"
0013    TGETS    5   0   4  ; "variables"
0014    KPRI     6   1
0015    FNEW     7   5      ; builtin.lua:160
0016    UGET     8   1      ; cfg
0017    TGETS    8   8   6  ; "is_platform"
0018    KSTR     9   7      ; "mingw32"
0019    CALL     8   2   2
0020    ISF          8
0021    JMP      9 => 0025
0022    FNEW     1   8      ; builtin.lua:173
0023    FNEW     2   9      ; builtin.lua:179
0024    JMP      8 => 0037
0025 => UGET     8   1      ; cfg
0026    TGETS    8   8   6  ; "is_platform"
0027    KSTR     9  10      ; "win32"
0028    CALL     8   2   2
0029    ISF          8
0030    JMP      9 => 0034
0031    FNEW     1  11      ; builtin.lua:198
0032    FNEW     2  12      ; builtin.lua:204
0033    JMP      8 => 0037
0034 => FNEW     1  13      ; builtin.lua:236
0035    FNEW     2  14      ; builtin.lua:242
0036    FNEW     3  15      ; builtin.lua:255
0037 => KNIL     8   9
0038    TNEW    10   0
0039    TNEW    11   0
0040    UGET    12   6      ; path
0041    TGETS   12  12  16  ; "lua_dir"
0042    TGETS   13   0  17  ; "name"
0043    TGETS   14   0  18  ; "version"
0044    CALL    12   2   3
0045    UGET    13   6      ; path
0046    TGETS   13  13  19  ; "lib_dir"
0047    TGETS   14   0  17  ; "name"
0048    TGETS   15   0  18  ; "version"
0049    CALL    13   2   3
0050    TGETS   14   4  20  ; "modules"
0051    IST         14
0052    JMP     14 => 0088
0053    MOV     15   0
0054    TGETS   14   0  21  ; "format_is_at_least"
0055    KSTR    16  22      ; "3.0"
0056    CALL    14   2   3
0057    ISF         14
0058    JMP     15 => 0084
0059    UGET    14   7      ; autoextract_libs
0060    TGETS   15   0  23  ; "external_dependencies"
0061    TGETS   16   0   4  ; "variables"
0062    CALL    14   4   3
0063    KNIL    17  18
0064    UGET    19   8      ; builtin
0065    TGETS   19  19  24  ; "autodetect_modules"
0066    MOV     20  14
0067    MOV     21  15
0068    MOV     22  16
0069    CALL    19   4   4
0070    MOV     18  21
0071    MOV     17  20
0072    TSETS   19   4  20  ; "modules"
0073    TGETS   19   4  25  ; "install"
0074    IST         19
0075    JMP     20 => 0077
0076    MOV     19  17
0077 => TSETS   19   4  25  ; "install"
0078    TGETS   19   4  26  ; "copy_directories"
0079    IST         19
0080    JMP     20 => 0082
0081    MOV     19  18
0082 => TSETS   19   4  26  ; "copy_directories"
0083    JMP     14 => 0088
0084 => KPRI    14   0
0085    KSTR    15  27      ; "Missing build.modules table"
0086    UCLO     0 => 0087
0087 => RET     14   3
0088 => GGET    14  28      ; "pairs"
0089    TGETS   15   4  20  ; "modules"
0090    CALL    14   4   2
0091    ISNEXT  17 => 0283
0092 => UGET    19   6      ; path
0093    TGETS   19  19  29  ; "module_to_path"
0094    MOV     20  17
0095    CALL    19   2   2
0096    GGET    20   1      ; "type"
0097    MOV     21  18
0098    CALL    20   2   2
0099    ISNES   20  30      ; "string"
0100    JMP     20 => 0145
0101    MOV     21  18
0102    TGETS   20  18  31  ; "match"
0103    KSTR    22  32      ; "%.([^.]+)$"
0104    CALL    20   2   3
0105    ISNES   20  33      ; "lua"
0106    JMP     21 => 0142
0107    UGET    21   4      ; dir
0108    TGETS   21  21  34  ; "base_name"
0109    MOV     22  18
0110    CALL    21   2   2
0111    ISNES   21  35      ; "init.lua"
0112    JMP     22 => 0127
0113    MOV     23  17
0114    TGETS   22  17  31  ; "match"
0115    KSTR    24  36      ; "%.init$"
0116    CALL    22   2   3
0117    IST         22
0118    JMP     22 => 0127
0119    UGET    22   6      ; path
0120    TGETS   22  22  29  ; "module_to_path"
0121    MOV     23  17
0122    KSTR    24  37      ; ".init"
0123    CAT     23  23  24
0124    CALL    22   2   2
0125    MOV     19  22
0126    JMP     22 => 0134
0127 => MOV     23  17
0128    TGETS   22  17  31  ; "match"
0129    KSTR    24  38      ; "([^.]+)$"
0130    CALL    22   2   3
0131    MOV     23  22
0132    KSTR    24  39      ; ".lua"
0133    CAT     21  23  24
0134 => UGET    22   4      ; dir
0135    TGETS   22  22  40  ; "path"
0136    MOV     23  12
0137    MOV     24  19
0138    MOV     25  21
0139    CALL    22   2   4
0140    TSETV   22  10  18
0141    JMP     21 => 0145
0142 => TNEW    21   3
0143    TSETB   18  21   1
0144    MOV     18  21
0145 => GGET    20   1      ; "type"
0146    MOV     21  18
0147    CALL    20   2   2
0148    ISNES   20  41      ; "table"
0149    JMP     20 => 0283
0150    IST          6
0151    JMP     20 => 0175
0152    TGETS   20   5  42  ; "LUA_INCDIR"
0153    KSTR    21  43      ; "lua.h"
0154    UGET    22   5      ; fs
0155    TGETS   22  22  44  ; "exists"
0156    UGET    23   4      ; dir
0157    TGETS   23  23  40  ; "path"
0158    MOV     24  20
0159    MOV     25  21
0160    CALL    23   0   3
0161    CALLM   22   2   0
0162    IST         22
0163    JMP     22 => 0174
0164    KPRI    22   0
0165    KSTR    23  45      ; "Lua header file "
0166    MOV     24  21
0167    KSTR    25  46      ; " not found (looked in "
0168    MOV     26  20
0169    KSTR    27  47      ; "). \n"
0170    KSTR    28  48      ; "You need to install the Lua development "~
0171    CAT     23  23  28
0172    UCLO     0 => 0173
0173 => RET     22   3
0174 => KPRI     6   2
0175 => TNEW    20   0
0176    TGETS   21  18  49  ; "sources"
0177    TGETB   22  18   1
0178    ISF         22
0179    JMP     23 => 0181
0180    MOV     21  18
0181 => GGET    22   1      ; "type"
0182    MOV     23  21
0183    CALL    22   2   2
0184    ISNES   22  30      ; "string"
0185    JMP     22 => 0189
0186    TNEW    22   3
0187    TSETB   21  22   1
0188    MOV     21  22
0189 => GGET    22  50      ; "ipairs"
0190    MOV     23  21
0191    CALL    22   4   2
0192    JMP     25 => 0228
0193 => MOV     28  26
0194    TGETS   27  26  51  ; "gsub"
0195    KSTR    29  52      ; "%.[^.]*$"
0196    KSTR    30  53      ; "."
0197    UGET    31   1      ; cfg
0198    TGETS   31  31  54  ; "obj_extension"
0199    CAT     30  30  31
0200    CALL    27   2   4
0201    IST         27
0202    JMP     28 => 0208
0203    MOV     28  26
0204    KSTR    29  53      ; "."
0205    UGET    30   1      ; cfg
0206    TGETS   30  30  54  ; "obj_extension"
0207    CAT     27  28  30
0208 => MOV     28   1
0209    MOV     29  27
0210    MOV     30  26
0211    TGETS   31  18  55  ; "defines"
0212    TGETS   32  18  56  ; "incdirs"
0213    CALL    28   2   5
0214    MOV      8  28
0215    IST          8
0216    JMP     28 => 0223
0217    KPRI    28   0
0218    KSTR    29  57      ; "Failed compiling object "
0219    MOV     30  27
0220    CAT     29  29  30
0221    UCLO     0 => 0222
0222 => RET     28   3
0223 => GGET    28  41      ; "table"
0224    TGETS   28  28  58  ; "insert"
0225    MOV     29  20
0226    MOV     30  27
0227    CALL    28   1   3
0228 => ITERC   25   3   3
0229    ITERL   25 => 0193
0230    MOV     23  17
0231    TGETS   22  17  31  ; "match"
0232    KSTR    24  59      ; "([^.]*)$"
0233    CALL    22   2   3
0234    KSTR    23  53      ; "."
0235    UGET    24   0      ; util
0236    TGETS   24  24  60  ; "matchquote"
0237    UGET    25   1      ; cfg
0238    TGETS   25  25  61  ; "lib_extension"
0239    CALL    24   2   2
0240    CAT     22  22  24
0241    ISEQS   19  62      ; ""
0242    JMP     23 => 0261
0243    UGET    23   4      ; dir
0244    TGETS   23  23  40  ; "path"
0245    MOV     24  19
0246    MOV     25  22
0247    CALL    23   2   3
0248    MOV     22  23
0249    UGET    23   5      ; fs
0250    TGETS   23  23  63  ; "make_dir"
0251    MOV     24  19
0252    CALL    23   3   2
0253    MOV      9  24
0254    MOV      8  23
0255    IST          8
0256    JMP     23 => 0261
0257    KPRI    23   0
0258    MOV     24   9
0259    UCLO     0 => 0260
0260 => RET     23   3
0261 => UGET    23   4      ; dir
0262    TGETS   23  23  40  ; "path"
0263    MOV     24  13
0264    MOV     25  22
0265    CALL    23   2   3
0266    TSETV   23  11  22
0267    MOV     23   2
0268    MOV     24  22
0269    MOV     25  20
0270    TGETS   26  18  64  ; "libraries"
0271    TGETS   27  18  65  ; "libdirs"
0272    MOV     28  17
0273    CALL    23   2   6
0274    MOV      8  23
0275    IST          8
0276    JMP     23 => 0283
0277    KPRI    23   0
0278    KSTR    24  66      ; "Failed compiling module "
0279    MOV     25  22
0280    CAT     24  24  25
0281    UCLO     0 => 0282
0282 => RET     23   3
0283 => ITERN   17   3   3
0284    ITERL   17 => 0092
0285    GGET    14  50      ; "ipairs"
0286    TNEW    15   3
0287    TDUP    16  67
0288    TSETS   10  16  68  ; "tbl"
0289    TSETB   16  15   1
0290    TDUP    16  69
0291    TSETS   11  16  68  ; "tbl"
0292    TSETB   16  15   2
0293    CALL    14   4   2
0294    JMP     17 => 0328
0295 => GGET    19  28      ; "pairs"
0296    TGETS   20  18  68  ; "tbl"
0297    CALL    19   4   2
0298    ISNEXT  22 => 0326
0299 => UGET    24   5      ; fs
0300    TGETS   24  24  63  ; "make_dir"
0301    UGET    25   4      ; dir
0302    TGETS   25  25  70  ; "dir_name"
0303    MOV     26  23
0304    CALL    25   0   2
0305    CALLM   24   1   0
0306    UGET    24   5      ; fs
0307    TGETS   24  24  71  ; "copy"
0308    MOV     25  22
0309    MOV     26  23
0310    TGETS   27  18  72  ; "perms"
0311    CALL    24   3   4
0312    MOV      9  25
0313    MOV      8  24
0314    IST          8
0315    JMP     24 => 0326
0316    KPRI    24   0
0317    KSTR    25  73      ; "Failed installing "
0318    MOV     26  22
0319    KSTR    27  74      ; " in "
0320    MOV     28  23
0321    KSTR    29  75      ; ": "
0322    MOV     30   9
0323    CAT     25  25  30
0324    UCLO     0 => 0325
0325 => RET     24   3
0326 => ITERN   22   3   3
0327    ITERL   22 => 0299
0328 => ITERC   17   3   3
0329    ITERL   17 => 0295
0330    UGET    14   5      ; fs
0331    TGETS   14  14  76  ; "is_dir"
0332    KSTR    15  33      ; "lua"
0333    CALL    14   2   2
0334    ISF         14
0335    JMP     15 => 0351
0336    UGET    14   5      ; fs
0337    TGETS   14  14  77  ; "copy_contents"
0338    KSTR    15  33      ; "lua"
0339    MOV     16  12
0340    CALL    14   3   3
0341    MOV      9  15
0342    MOV      8  14
0343    IST          8
0344    JMP     14 => 0351
0345    KPRI    14   0
0346    KSTR    15  78      ; "Failed copying contents of 'lua' directo"~
0347    MOV     16   9
0348    CAT     15  15  16
0349    UCLO     0 => 0350
0350 => RET     14   3
0351 => KPRI    14   2
0352    UCLO     0 => 0353
0353 => RET1    14   2

-- BYTECODE -- builtin.lua:0-366
0001    TNEW     0   0
0002    GGET     1   0      ; "unpack"
0003    IST          1
0004    JMP      2 => 0007
0005    GGET     1   1      ; "table"
0006    TGETS    1   1   0  ; "unpack"
0007 => GGET     2   2      ; "require"
0008    KSTR     3   3      ; "luarocks.fs"
0009    CALL     2   2   2
0010    GGET     3   2      ; "require"
0011    KSTR     4   4      ; "luarocks.path"
0012    CALL     3   2   2
0013    GGET     4   2      ; "require"
0014    KSTR     5   5      ; "luarocks.util"
0015    CALL     4   2   2
0016    GGET     5   2      ; "require"
0017    KSTR     6   6      ; "luarocks.core.cfg"
0018    CALL     5   2   2
0019    GGET     6   2      ; "require"
0020    KSTR     7   7      ; "luarocks.dir"
0021    CALL     6   2   2
0022    FNEW     7   9      ; builtin.lua:13
0023    TSETS    7   0   8  ; "autodetect_external_dependencies"
0024    FNEW     7  10      ; builtin.lua:45
0025    FNEW     8  11      ; builtin.lua:63
0026    TDUP     9  12
0027    FNEW    10  14      ; builtin.lua:79
0028    TSETS   10   0  13  ; "autodetect_modules"
0029    UCLO     8 => 0030
0030 => FNEW     8  15      ; builtin.lua:143
0031    FNEW     9  17      ; builtin.lua:152
0032    TSETS    9   0  16  ; "run"
0033    UCLO     0 => 0034
0034 => RET1     0   2

-----------------------
-- BYTECODE -- make.lua:21-35
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   1
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "boolean"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   2
0014    CALL     5   2   2
0015    ISEQS    5   3      ; "string"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   3
0024    CALL     5   2   2
0025    ISEQS    5   4      ; "table"
0026    JMP      5 => 0029
0027    KPRI     5   1
0028    JMP      6 => 0030
0029 => KPRI     5   2
0030 => CALL     4   1   2
0031    TNEW     4   0
0032    GGET     5   5      ; "pairs"
0033    MOV      6   3
0034    CALL     5   4   2
0035    ISNEXT   8 => 0044
0036 => GGET    10   4      ; "table"
0037    TGETS   10  10   6  ; "insert"
0038    MOV     11   4
0039    MOV     12   8
0040    KSTR    13   7      ; "="
0041    MOV     14   9
0042    CAT     12  12  14
0043    CALL    10   1   3
0044 => ITERN    8   3   3
0045    ITERL    8 => 0036
0046    ISF          1
0047    JMP      5 => 0059
0048    UGET     5   0      ; fs
0049    TGETS    5   5   8  ; "execute"
0050    MOV      6   0
0051    KSTR     7   9      ; " "
0052    MOV      8   2
0053    CAT      6   6   8
0054    UGET     7   1      ; unpack
0055    MOV      8   4
0056    CALL     7   0   2
0057    CALLMT   5   1
0058    JMP      5 => 0061
0059 => KPRI     5   2
0060    RET1     5   2
0061 => RET0     0   1

-- BYTECODE -- make.lua:41-94
0001    GGET     1   0      ; "assert"
0002    MOV      3   0
0003    TGETS    2   0   1  ; "type"
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "rockspec"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    TGETS    1   0   3  ; "build"
0012    TGETS    2   1   4  ; "build_pass"
0013    ISNEP    2   0
0014    JMP      2 => 0017
0015    KPRI     2   2
0016    TSETS    2   1   4  ; "build_pass"
0017 => TGETS    2   1   5  ; "install_pass"
0018    ISNEP    2   0
0019    JMP      2 => 0022
0020    KPRI     2   2
0021    TSETS    2   1   5  ; "install_pass"
0022 => TGETS    2   1   6  ; "build_variables"
0023    IST          2
0024    JMP      3 => 0026
0025    TNEW     2   0
0026 => TSETS    2   1   6  ; "build_variables"
0027    TGETS    2   1   7  ; "install_variables"
0028    IST          2
0029    JMP      3 => 0031
0030    TNEW     2   0
0031 => TSETS    2   1   7  ; "install_variables"
0032    TGETS    2   1   8  ; "build_target"
0033    IST          2
0034    JMP      3 => 0036
0035    KSTR     2   9      ; ""
0036 => TSETS    2   1   8  ; "build_target"
0037    TGETS    2   1  10  ; "install_target"
0038    IST          2
0039    JMP      3 => 0041
0040    KSTR     2  11      ; "install"
0041 => TSETS    2   1  10  ; "install_target"
0042    TGETS    2   1  12  ; "makefile"
0043    IST          2
0044    JMP      3 => 0047
0045    UGET     2   0      ; cfg
0046    TGETS    2   2  12  ; "makefile"
0047 => ISF          2
0048    JMP      3 => 0061
0049    KSTR     3  13      ; "-f "
0050    MOV      4   2
0051    KSTR     5  14      ; " "
0052    TGETS    6   1   8  ; "build_target"
0053    CAT      3   3   6
0054    TSETS    3   1   8  ; "build_target"
0055    KSTR     3  13      ; "-f "
0056    MOV      4   2
0057    KSTR     5  14      ; " "
0058    TGETS    6   1  10  ; "install_target"
0059    CAT      3   3   6
0060    TSETS    3   1  10  ; "install_target"
0061 => TGETS    3   1  15  ; "variables"
0062    ISF          3
0063    JMP      4 => 0074
0064    GGET     3  16      ; "pairs"
0065    TGETS    4   1  15  ; "variables"
0066    CALL     3   4   2
0067    ISNEXT   6 => 0072
0068 => TGETS    8   1   6  ; "build_variables"
0069    TSETV    7   8   6
0070    TGETS    8   1   7  ; "install_variables"
0071    TSETV    7   8   6
0072 => ITERN    6   3   3
0073    ITERL    6 => 0068
0074 => UGET     3   1      ; util
0075    TGETS    3   3  17  ; "warn_if_not_used"
0076    TGETS    4   1   6  ; "build_variables"
0077    TDUP     5  18
0078    KSTR     6  19      ; "variable %s was not passed in build_vari"~
0079    CALL     3   1   4
0080    UGET     3   1      ; util
0081    TGETS    3   3  20  ; "variable_substitutions"
0082    TGETS    4   1   6  ; "build_variables"
0083    TGETS    5   0  15  ; "variables"
0084    CALL     3   1   3
0085    UGET     3   1      ; util
0086    TGETS    3   3  20  ; "variable_substitutions"
0087    TGETS    4   1   7  ; "install_variables"
0088    TGETS    5   0  15  ; "variables"
0089    CALL     3   1   3
0090    TDUP     3  21
0091    GGET     4  16      ; "pairs"
0092    MOV      5   3
0093    CALL     4   4   2
0094    ISNEXT   7 => 0111
0095 => TGETS    9   1   6  ; "build_variables"
0096    TGETV    9   9   8
0097    IST          9
0098    JMP      9 => 0103
0099    TGETS    9   1   6  ; "build_variables"
0100    TGETS   10   0  15  ; "variables"
0101    TGETV   10  10   8
0102    TSETV   10   9   8
0103 => TGETS    9   1   7  ; "install_variables"
0104    TGETV    9   9   8
0105    IST          9
0106    JMP      9 => 0111
0107    TGETS    9   1   7  ; "install_variables"
0108    TGETS   10   0  15  ; "variables"
0109    TGETV   10  10   8
0110    TSETV   10   9   8
0111 => ITERN    7   3   3
0112    ITERL    7 => 0095
0113    UGET     4   0      ; cfg
0114    TGETS    4   4  22  ; "make"
0115    IST          4
0116    JMP      5 => 0119
0117    TGETS    4   0  15  ; "variables"
0118    TGETS    4   4  23  ; "MAKE"
0119 => UGET     5   2      ; make_pass
0120    MOV      6   4
0121    TGETS    7   1   4  ; "build_pass"
0122    TGETS    8   1   8  ; "build_target"
0123    TGETS    9   1   6  ; "build_variables"
0124    CALL     5   2   5
0125    IST          5
0126    JMP      6 => 0130
0127    KPRI     6   0
0128    KSTR     7  24      ; "Failed building."
0129    RET      6   3
0130 => UGET     6   2      ; make_pass
0131    MOV      7   4
0132    TGETS    8   1   5  ; "install_pass"
0133    TGETS    9   1  10  ; "install_target"
0134    TGETS   10   1   7  ; "install_variables"
0135    CALL     6   2   5
0136    MOV      5   6
0137    IST          5
0138    JMP      6 => 0142
0139    KPRI     6   0
0140    KSTR     7  25      ; "Failed installing."
0141    RET      6   3
0142 => KPRI     6   2
0143    RET1     6   2

-- BYTECODE -- make.lua:0-97
0001    TNEW     0   0
0002    GGET     1   0      ; "unpack"
0003    IST          1
0004    JMP      2 => 0007
0005    GGET     1   1      ; "table"
0006    TGETS    1   1   0  ; "unpack"
0007 => GGET     2   2      ; "require"
0008    KSTR     3   3      ; "luarocks.fs"
0009    CALL     2   2   2
0010    GGET     3   2      ; "require"
0011    KSTR     4   4      ; "luarocks.util"
0012    CALL     3   2   2
0013    GGET     4   2      ; "require"
0014    KSTR     5   5      ; "luarocks.core.cfg"
0015    CALL     4   2   2
0016    FNEW     5   6      ; make.lua:21
0017    FNEW     6   8      ; make.lua:41
0018    TSETS    6   0   7  ; "run"
0019    UCLO     0 => 0020
0020 => RET1     0   2

-----------------------
-- BYTECODE -- cmake.lua:13-76
0001    GGET     1   0      ; "assert"
0002    MOV      3   0
0003    TGETS    2   0   1  ; "type"
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "rockspec"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    TGETS    1   0   3  ; "build"
0012    TGETS    2   1   4  ; "variables"
0013    IST          2
0014    JMP      3 => 0016
0015    TNEW     2   0
0016 => GGET     3   6      ; "os"
0017    TGETS    3   3   7  ; "getenv"
0018    KSTR     4   5      ; "CMAKE_MODULE_PATH"
0019    CALL     3   2   2
0020    TSETS    3   2   5  ; "CMAKE_MODULE_PATH"
0021    GGET     3   6      ; "os"
0022    TGETS    3   3   7  ; "getenv"
0023    KSTR     4   8      ; "CMAKE_LIBRARY_PATH"
0024    CALL     3   2   2
0025    TSETS    3   2   8  ; "CMAKE_LIBRARY_PATH"
0026    GGET     3   6      ; "os"
0027    TGETS    3   3   7  ; "getenv"
0028    KSTR     4   9      ; "CMAKE_INCLUDE_PATH"
0029    CALL     3   2   2
0030    TSETS    3   2   9  ; "CMAKE_INCLUDE_PATH"
0031    UGET     3   0      ; util
0032    TGETS    3   3  10  ; "variable_substitutions"
0033    MOV      4   2
0034    TGETS    5   0   4  ; "variables"
0035    CALL     3   1   3
0036    UGET     3   1      ; fs
0037    TGETS    3   3  11  ; "is_tool_available"
0038    TGETS    4   0   4  ; "variables"
0039    TGETS    4   4  12  ; "CMAKE"
0040    KSTR     5  13      ; "CMake"
0041    CALL     3   3   3
0042    IST          3
0043    JMP      5 => 0047
0044    KPRI     5   0
0045    MOV      6   4
0046    RET      5   3
0047 => GGET     5   1      ; "type"
0048    TGETS    6   1  14  ; "cmake"
0049    CALL     5   2   2
0050    ISNES    5  15      ; "string"
0051    JMP      5 => 0070
0052    GGET     5   0      ; "assert"
0053    GGET     6  16      ; "io"
0054    TGETS    6   6  17  ; "open"
0055    UGET     7   1      ; fs
0056    TGETS    7   7  18  ; "current_dir"
0057    CALL     7   2   1
0058    KSTR     8  19      ; "/CMakeLists.txt"
0059    CAT      7   7   8
0060    KSTR     8  20      ; "w"
0061    CALL     6   0   3
0062    CALLM    5   2   0
0063    MOV      7   5
0064    TGETS    6   5  21  ; "write"
0065    TGETS    8   1  14  ; "cmake"
0066    CALL     6   1   3
0067    MOV      7   5
0068    TGETS    6   5  22  ; "close"
0069    CALL     6   1   2
0070 => KSTR     5  23      ; ""
0071    UGET     6   2      ; cfg
0072    TGETS    6   6  24  ; "cmake_generator"
0073    ISF          6
0074    JMP      7 => 0082
0075    MOV      6   5
0076    KSTR     7  25      ; " -G""
0077    UGET     8   2      ; cfg
0078    TGETS    8   8  24  ; "cmake_generator"
0079    KSTR     9  26      ; """
0080    CAT      5   6   9
0081    JMP      6 => 0099
0082 => UGET     6   2      ; cfg
0083    TGETS    6   6  27  ; "is_platform"
0084    KSTR     7  28      ; "windows"
0085    CALL     6   2   2
0086    ISF          6
0087    JMP      7 => 0099
0088    UGET     6   2      ; cfg
0089    TGETS    6   6  29  ; "target_cpu"
0090    MOV      7   6
0091    TGETS    6   6  30  ; "match"
0092    KSTR     8  31      ; "x86_64$"
0093    CALL     6   2   3
0094    ISF          6
0095    JMP      7 => 0099
0096    MOV      6   5
0097    KSTR     7  32      ; " -DCMAKE_GENERATOR_PLATFORM=x64"
0098    CAT      5   6   7
0099 => GGET     6  33      ; "pairs"
0100    MOV      7   2
0101    CALL     6   4   2
0102    ISNEXT   9 => 0112
0103 => MOV     11   5
0104    KSTR    12  34      ; " -D"
0105    MOV     13   9
0106    KSTR    14  35      ; "=""
0107    GGET    15  36      ; "tostring"
0108    MOV     16  10
0109    CALL    15   2   2
0110    KSTR    16  26      ; """
0111    CAT      5  11  16
0112 => ITERN    9   3   3
0113    ITERL    9 => 0103
0114    UGET     6   1      ; fs
0115    TGETS    6   6  37  ; "execute_string"
0116    TGETS    7   0   4  ; "variables"
0117    TGETS    7   7  12  ; "CMAKE"
0118    KSTR     8  38      ; " -H. -Bbuild.luarocks "
0119    MOV      9   5
0120    CAT      7   7   9
0121    CALL     6   2   2
0122    IST          6
0123    JMP      6 => 0127
0124    KPRI     6   0
0125    KSTR     7  39      ; "Failed cmake."
0126    RET      6   3
0127 => KNIL     6   7
0128    MOV      9   0
0129    TGETS    8   0  40  ; "format_is_at_least"
0130    KSTR    10  41      ; "3.0"
0131    CALL     8   2   3
0132    ISF          8
0133    JMP      9 => 0147
0134    TGETS    8   1  42  ; "build_pass"
0135    ISNEP    8   0
0136    JMP      8 => 0139
0137    KPRI     6   2
0138    JMP      8 => 0140
0139 => TGETS    6   1  42  ; "build_pass"
0140 => TGETS    8   1  43  ; "install_pass"
0141    ISNEP    8   0
0142    JMP      8 => 0145
0143    KPRI     7   2
0144    JMP      8 => 0146
0145 => TGETS    7   1  43  ; "install_pass"
0146 => JMP      8 => 0149
0147 => KPRI     6   2
0148    KPRI     7   2
0149 => ISF          6
0150    JMP      8 => 0163
0151    UGET     8   1      ; fs
0152    TGETS    8   8  37  ; "execute_string"
0153    TGETS    9   0   4  ; "variables"
0154    TGETS    9   9  12  ; "CMAKE"
0155    KSTR    10  44      ; " --build build.luarocks --config Release"
0156    CAT      9   9  10
0157    CALL     8   2   2
0158    IST          8
0159    JMP      8 => 0163
0160    KPRI     8   0
0161    KSTR     9  45      ; "Failed building."
0162    RET      8   3
0163 => ISF          7
0164    JMP      8 => 0177
0165    UGET     8   1      ; fs
0166    TGETS    8   8  37  ; "execute_string"
0167    TGETS    9   0   4  ; "variables"
0168    TGETS    9   9  12  ; "CMAKE"
0169    KSTR    10  46      ; " --build build.luarocks --target install"~
0170    CAT      9   9  10
0171    CALL     8   2   2
0172    IST          8
0173    JMP      8 => 0177
0174    KPRI     8   0
0175    KSTR     9  47      ; "Failed installing."
0176    RET      8   3
0177 => KPRI     8   2
0178    RET1     8   2

-- BYTECODE -- cmake.lua:0-79
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    FNEW     4   5      ; cmake.lua:13
0012    TSETS    4   0   4  ; "run"
0013    UCLO     0 => 0014
0014 => RET1     0   2

-----------------------
-- BYTECODE -- command.lua:13-39
0001    GGET     1   0      ; "assert"
0002    MOV      3   0
0003    TGETS    2   0   1  ; "type"
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "rockspec"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    TGETS    1   0   3  ; "build"
0012    UGET     2   0      ; util
0013    TGETS    2   2   4  ; "variable_substitutions"
0014    MOV      3   1
0015    TGETS    4   0   5  ; "variables"
0016    CALL     2   1   3
0017    TDUP     2   7
0018    UGET     3   1      ; cfg
0019    TGETS    3   3   5  ; "variables"
0020    TGETS    3   3   6  ; "CC"
0021    TSETS    3   2   6  ; "CC"
0022    TGETS    3   1   8  ; "build_command"
0023    ISF          3
0024    JMP      4 => 0039
0025    UGET     3   0      ; util
0026    TGETS    3   3   9  ; "printout"
0027    TGETS    4   1   8  ; "build_command"
0028    CALL     3   1   2
0029    UGET     3   2      ; fs
0030    TGETS    3   3  10  ; "execute_env"
0031    MOV      4   2
0032    TGETS    5   1   8  ; "build_command"
0033    CALL     3   2   3
0034    IST          3
0035    JMP      3 => 0039
0036    KPRI     3   0
0037    KSTR     4  11      ; "Failed building."
0038    RET      3   3
0039 => TGETS    3   1  12  ; "install_command"
0040    ISF          3
0041    JMP      4 => 0056
0042    UGET     3   0      ; util
0043    TGETS    3   3   9  ; "printout"
0044    TGETS    4   1  12  ; "install_command"
0045    CALL     3   1   2
0046    UGET     3   2      ; fs
0047    TGETS    3   3  10  ; "execute_env"
0048    MOV      4   2
0049    TGETS    5   1  12  ; "install_command"
0050    CALL     3   2   3
0051    IST          3
0052    JMP      3 => 0056
0053    KPRI     3   0
0054    KSTR     4  13      ; "Failed installing."
0055    RET      3   3
0056 => KPRI     3   2
0057    RET1     3   2

-- BYTECODE -- command.lua:0-42
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    FNEW     4   5      ; command.lua:13
0012    TSETS    4   0   4  ; "run"
0013    UCLO     0 => 0014
0014 => RET1     0   2

-----------------------
-- BYTECODE -- lua.lua:37-53
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    MOV      2   0
0007    CALL     1   2   2
0008    MOV      0   1
0009    KPRI     1   0
0010    UGET     2   1      ; fs
0011    TGETS    2   2   2  ; "is_dir"
0012    MOV      3   0
0013    CALL     2   2   2
0014    ISF          2
0015    JMP      3 => 0041
0016    UGET     2   0      ; dir
0017    TGETS    2   2   3  ; "path"
0018    MOV      3   0
0019    KSTR     4   4      ; ".tmpluarockstestwritable"
0020    CALL     2   2   3
0021    GGET     3   5      ; "io"
0022    TGETS    3   3   6  ; "open"
0023    MOV      4   2
0024    KSTR     5   7      ; "wb"
0025    CALL     3   2   3
0026    ISNEP    3   0
0027    JMP      4 => 0030
0028    KPRI     1   1
0029    JMP      4 => 0031
0030 => KPRI     1   2
0031 => ISF          3
0032    JMP      4 => 0036
0033    MOV      5   3
0034    TGETS    4   3   8  ; "close"
0035    CALL     4   1   2
0036 => GGET     4   9      ; "os"
0037    TGETS    4   4  10  ; "remove"
0038    MOV      5   2
0039    CALL     4   1   2
0040    JMP      2 => 0056
0041 => GGET     2   5      ; "io"
0042    TGETS    2   2   6  ; "open"
0043    MOV      3   0
0044    KSTR     4  11      ; "r+b"
0045    CALL     2   2   3
0046    ISNEP    2   0
0047    JMP      3 => 0050
0048    KPRI     1   1
0049    JMP      3 => 0051
0050 => KPRI     1   2
0051 => ISF          2
0052    JMP      3 => 0056
0053    MOV      4   2
0054    TGETS    3   2   8  ; "close"
0055    CALL     3   1   2
0056 => RET1     1   2

-- BYTECODE -- lua.lua:55-62
0001    TNEW     1   3
0002    TSETB    0   1   1
0003    GGET     2   0      ; "ipairs"
0004    TNEW     3   3
0005    VARG     4   0   1
0006    TSETM    4   0      ; 1
0007    CALL     2   4   2
0008    JMP      5 => 0026
0009 => GGET     7   1      ; "assert"
0010    GGET     8   2      ; "type"
0011    MOV      9   6
0012    CALL     8   2   2
0013    ISEQS    8   3      ; "string"
0014    JMP      8 => 0017
0015    KPRI     8   1
0016    JMP      9 => 0018
0017 => KPRI     8   2
0018 => CALL     7   1   2
0019    LEN      7   1
0020    ADDVN    7   7   1  ; 1
0021    UGET     8   0      ; fs
0022    TGETS    8   8   4  ; "Q"
0023    MOV      9   6
0024    CALL     8   2   2
0025    TSETV    8   1   7
0026 => ITERC    5   3   3
0027    ITERL    5 => 0009
0028    GGET     2   5      ; "table"
0029    TGETS    2   2   6  ; "concat"
0030    MOV      3   1
0031    KSTR     4   7      ; " "
0032    CALLT    2   3

-- BYTECODE -- lua.lua:71-74
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; fs
0012    TGETS    1   1   3  ; "execute_string"
0013    UGET     2   1      ; quote_args
0014    MOV      3   0
0015    VARG     4   0   1
0016    CALLM    2   0   1
0017    CALLMT   1   0

-- BYTECODE -- lua.lua:84-91
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; cfg
0012    TGETS    1   1   3  ; "verbose"
0013    ISF          1
0014    JMP      2 => 0023
0015    UGET     1   1      ; fs
0016    TGETS    1   1   4  ; "execute_string"
0017    UGET     2   2      ; quote_args
0018    MOV      3   0
0019    VARG     4   0   1
0020    CALLM    2   0   1
0021    CALLMT   1   0
0022    JMP      1 => 0033
0023 => UGET     1   1      ; fs
0024    TGETS    1   1   4  ; "execute_string"
0025    UGET     2   1      ; fs
0026    TGETS    2   2   5  ; "quiet"
0027    UGET     3   2      ; quote_args
0028    MOV      4   0
0029    VARG     5   0   1
0030    CALLM    3   0   1
0031    CALLM    2   0   0
0032    CALLMT   1   0
0033 => RET0     0   1

-- BYTECODE -- lua.lua:93-100
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   1
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    TNEW     2   0
0012    GGET     3   3      ; "pairs"
0013    MOV      4   0
0014    CALL     3   4   2
0015    ISNEXT   6 => 0025
0016 => GGET     8   4      ; "table"
0017    TGETS    8   8   5  ; "insert"
0018    MOV      9   2
0019    UGET    10   0      ; fs
0020    TGETS   10  10   6  ; "export_cmd"
0021    MOV     11   6
0022    MOV     12   7
0023    CALL    10   0   3
0024    CALLM    8   1   1
0025 => ITERN    6   3   3
0026    ITERL    6 => 0016
0027    UGET     3   0      ; fs
0028    TGETS    3   3   7  ; "execute_string"
0029    GGET     4   4      ; "table"
0030    TGETS    4   4   8  ; "concat"
0031    MOV      5   2
0032    KSTR     6   9      ; "\n"
0033    CALL     4   2   3
0034    KSTR     5   9      ; "\n"
0035    UGET     6   1      ; quote_args
0036    MOV      7   1
0037    VARG     8   0   2
0038    CALLM    6   2   1
0039    CAT      4   4   6
0040    CALLT    3   2

-- BYTECODE -- lua.lua:104-107
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   1
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "boolean"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    UGET     2   0      ; tool_available_cache
0012    TSETV    1   2   0
0013    RET0     0   1

-- BYTECODE -- lua.lua:114-136
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    IST          2
0022    JMP      3 => 0024
0023    KSTR     2   3      ; "--version"
0024 => GGET     3   0      ; "assert"
0025    GGET     4   1      ; "type"
0026    MOV      5   2
0027    CALL     4   2   2
0028    ISEQS    4   2      ; "string"
0029    JMP      4 => 0032
0030    KPRI     4   1
0031    JMP      5 => 0033
0032 => KPRI     4   2
0033 => CALL     3   1   2
0034    KPRI     3   0
0035    UGET     4   0      ; tool_available_cache
0036    TGETV    4   4   1
0037    ISEQP    4   0
0038    JMP      4 => 0042
0039    UGET     4   0      ; tool_available_cache
0040    TGETV    3   4   1
0041    JMP      4 => 0055
0042 => UGET     4   1      ; fs
0043    TGETS    4   4   4  ; "execute_quiet"
0044    MOV      5   0
0045    MOV      6   2
0046    CALL     4   2   3
0047    MOV      3   4
0048    UGET     4   0      ; tool_available_cache
0049    ISEQP    3   2
0050    JMP      5 => 0053
0051    KPRI     5   1
0052    JMP      6 => 0054
0053 => KPRI     5   2
0054 => TSETV    5   4   1
0055 => ISF          3
0056    JMP      4 => 0060
0057    KPRI     4   2
0058    RET1     4   2
0059    JMP      4 => 0076
0060 => KSTR     4   5      ; "'%s' program not found. Make sure %s is "~
0061    KSTR     5   6      ; "(or you may want to edit the 'variables."~
0062    CAT      4   4   5
0063    KPRI     5   0
0064    MOV      7   4
0065    TGETS    6   4   7  ; "format"
0066    MOV      8   0
0067    MOV      9   1
0068    MOV     11   1
0069    TGETS   10   1   8  ; "upper"
0070    CALL    10   2   2
0071    UGET    11   2      ; cfg
0072    TGETS   11  11   9  ; "config_files"
0073    TGETS   11  11  10  ; "nearest"
0074    CALL     6   0   6
0075    RETM     5   1
0076 => RET0     0   1

-- BYTECODE -- lua.lua:143-154
0001    UGET     2   0      ; dir
0002    TGETS    2   2   0  ; "normalize"
0003    MOV      3   0
0004    CALL     2   2   2
0005    MOV      0   2
0006    UGET     2   1      ; fs
0007    TGETS    2   2   1  ; "get_md5"
0008    MOV      3   0
0009    CALL     2   3   2
0010    IST          2
0011    JMP      4 => 0015
0012    KPRI     4   1
0013    MOV      5   3
0014    RET      4   3
0015 => MOV      5   2
0016    TGETS    4   2   2  ; "match"
0017    KSTR     6   3      ; "^"
0018    MOV      7   1
0019    CAT      6   6   7
0020    CALL     4   2   3
0021    ISF          4
0022    JMP      5 => 0026
0023    KPRI     4   2
0024    RET1     4   2
0025    JMP      4 => 0031
0026 => KPRI     4   1
0027    KSTR     5   4      ; "Mismatch MD5 hash for file "
0028    MOV      6   0
0029    CAT      5   5   6
0030    RET      4   3
0031 => RET0     0   1

-- BYTECODE -- lua.lua:161-167
0001    TNEW     1   0
0002    UGET     2   0      ; fs
0003    TGETS    2   2   0  ; "dir"
0004    MOV      3   0
0005    CALL     2   4   2
0006    JMP      5 => 0010
0007 => LEN      6   1
0008    ADDVN    6   6   0  ; 1
0009    TSETV    5   1   6
0010 => ITERC    5   2   3
0011    ITERL    5 => 0007
0012    RET1     1   2

-- BYTECODE -- lua.lua:180-180
0001    RET0     0   1

-- BYTECODE -- lua.lua:182-182
0001    UGET     0   0      ; fs
0002    TGETS    0   0   0  ; "dir_iterator"
0003    UGET     1   1      ; at
0004    CALL     0   1   2
0005    RET0     0   1

-- BYTECODE -- lua.lua:174-183
0001    IST          0
0002    JMP      1 => 0007
0003    UGET     1   0      ; fs
0004    TGETS    1   1   0  ; "current_dir"
0005    CALL     1   2   1
0006    MOV      0   1
0007 => UGET     1   1      ; dir
0008    TGETS    1   1   1  ; "normalize"
0009    MOV      2   0
0010    CALL     1   2   2
0011    MOV      0   1
0012    UGET     1   0      ; fs
0013    TGETS    1   1   2  ; "is_dir"
0014    MOV      2   0
0015    CALL     1   2   2
0016    IST          1
0017    JMP      1 => 0021
0018    FNEW     1   3      ; lua.lua:180
0019    UCLO     0 => 0020
0020 => RET1     1   2
0021 => GGET     1   4      ; "coroutine"
0022    TGETS    1   1   5  ; "wrap"
0023    FNEW     2   6      ; lua.lua:182
0024    UCLO     0 => 0025
0025 => CALLT    1   2

-- BYTECODE -- lua.lua:188-228
0001    IST          0
0002    JMP      1 => 0004
0003    KSTR     0   0      ; ""
0004 => LEN      1   0
0005    KSHORT   2   0
0006    ISGE     2   1
0007    JMP      1 => 0027
0008    MOV      2   0
0009    TGETS    1   0   1  ; "gsub"
0010    KSTR     3   2      ; "%."
0011    GGET     4   3      ; "package"
0012    TGETS    4   4   4  ; "config"
0013    MOV      5   4
0014    TGETS    4   4   5  ; "sub"
0015    KSHORT   6   1
0016    KSHORT   7   1
0017    CALL     4   0   4
0018    CALLM    1   2   2
0019    GGET     2   3      ; "package"
0020    TGETS    2   2   4  ; "config"
0021    MOV      3   2
0022    TGETS    2   2   5  ; "sub"
0023    KSHORT   4   1
0024    KSHORT   5   1
0025    CALL     2   2   4
0026    CAT      0   1   2
0027 => GGET     1   3      ; "package"
0028    TGETS    1   1   6  ; "path"
0029    MOV      2   1
0030    TGETS    1   1   5  ; "sub"
0031    KSHORT   3  -1
0032    KSHORT   4  -1
0033    CALL     1   2   4
0034    ISNES    1   7      ; ";"
0035    JMP      1 => 0040
0036    GGET     1   3      ; "package"
0037    TGETS    1   1   6  ; "path"
0038    IST          1
0039    JMP      2 => 0044
0040 => GGET     1   3      ; "package"
0041    TGETS    1   1   6  ; "path"
0042    KSTR     2   7      ; ";"
0043    CAT      1   1   2
0044 => TNEW     2   0
0045    MOV      4   1
0046    TGETS    3   1   8  ; "gmatch"
0047    KSTR     5   9      ; "(.-);"
0048    CALL     3   4   3
0049    JMP      6 => 0080
0050 => MOV      8   6
0051    TGETS    7   6  10  ; "lower"
0052    CALL     7   2   2
0053    ISNES    7  11      ; "?.lua"
0054    JMP      7 => 0056
0055    KSTR     6  12      ; "./?.lua"
0056 => MOV      8   6
0057    TGETS    7   6   1  ; "gsub"
0058    KSTR     9  13      ; "%?"
0059    KSTR    10   0      ; ""
0060    CALL     7   3   4
0061    MOV     10   6
0062    TGETS    9   6  14  ; "match"
0063    KSTR    11  15      ; "%?%.[lL][uU][aA]$"
0064    CALL     9   2   3
0065    ISF          9
0066    JMP     10 => 0080
0067    ISNEN    8   0      ; 1
0068    JMP      9 => 0080
0069    MOV     10   6
0070    TGETS    9   6   1  ; "gsub"
0071    KSTR    11  15      ; "%?%.[lL][uU][aA]$"
0072    MOV     12   0
0073    CALL     9   2   4
0074    MOV      6   9
0075    GGET     9  16      ; "table"
0076    TGETS    9   9  17  ; "insert"
0077    MOV     10   2
0078    MOV     11   6
0079    CALL     9   1   3
0080 => ITERC    6   2   3
0081    ITERL    6 => 0050
0082    LEN      3   2
0083    ISNEN    3   1      ; 0
0084    JMP      3 => 0087
0085    TNEW     3   0
0086    RET1     3   2
0087 => TNEW     3   0
0088    TNEW     4   0
0089    GGET     5  18      ; "ipairs"
0090    MOV      6   2
0091    CALL     5   4   2
0092    JMP      8 => 0127
0093 => UGET    10   0      ; fs
0094    TGETS   10  10  19  ; "list_dir"
0095    MOV     11   9
0096    CALL    10   2   2
0097    GGET    11  18      ; "ipairs"
0098    ISTC    12  10
0099    JMP     12 => 0101
0100    TNEW    12   0
0101 => CALL    11   4   2
0102    JMP     14 => 0125
0103 => MOV     17  15
0104    TGETS   16  15  14  ; "match"
0105    KSTR    18  20      ; "%.[lL][uU][aA]$"
0106    CALL    16   2   3
0107    ISF         16
0108    JMP     17 => 0125
0109    MOV     17  15
0110    TGETS   16  15   5  ; "sub"
0111    KSHORT  18   1
0112    KSHORT  19  -5
0113    CALL    16   2   4
0114    MOV     15  16
0115    TGETV   16   4  15
0116    IST         16
0117    JMP     16 => 0125
0118    KPRI    16   2
0119    TSETV   16   4  15
0120    GGET    16  16      ; "table"
0121    TGETS   16  16  17  ; "insert"
0122    MOV     17   3
0123    MOV     18  15
0124    CALL    16   1   3
0125 => ITERC   14   3   3
0126    ITERL   14 => 0103
0127 => ITERC    8   3   3
0128    ITERL    8 => 0093
0129    RET1     3   2

-- BYTECODE -- lua.lua:230-259
0001    GGET     3   0      ; "io"
0002    TGETS    3   3   1  ; "open"
0003    MOV      4   1
0004    KSTR     5   2      ; "rb"
0005    CALL     3   3   3
0006    IST          3
0007    JMP      5 => 0011
0008    KPRI     5   0
0009    MOV      6   4
0010    RET      5   3
0011 => MOV      6   3
0012    TGETS    5   3   3  ; "read"
0013    KSTR     7   4      ; "*a"
0014    CALL     5   3   3
0015    MOV      8   3
0016    TGETS    7   3   5  ; "close"
0017    CALL     7   1   2
0018    IST          5
0019    JMP      7 => 0023
0020    KPRI     7   0
0021    MOV      8   6
0022    RET      7   3
0023 => MOV      7   0
0024    MOV      8   5
0025    CALL     7   3   2
0026    IST          7
0027    JMP      9 => 0031
0028    KPRI     9   0
0029    MOV     10   8
0030    RET      9   3
0031 => GGET     9   0      ; "io"
0032    TGETS    9   9   1  ; "open"
0033    MOV     10   2
0034    KSTR    11   6      ; "wb"
0035    CALL     9   3   3
0036    MOV      8  10
0037    MOV      3   9
0038    IST          3
0039    JMP      9 => 0043
0040    KPRI     9   0
0041    MOV     10   8
0042    RET      9   3
0043 => MOV     10   3
0044    TGETS    9   3   7  ; "write"
0045    MOV     11   7
0046    CALL     9   3   3
0047    MOV     12   3
0048    TGETS   11   3   5  ; "close"
0049    CALL    11   1   2
0050    IST          9
0051    JMP     11 => 0055
0052    KPRI    11   0
0053    MOV     12  10
0054    RET     11   3
0055 => KPRI    11   2
0056    RET1    11   2

-- BYTECODE -- lua.lua:261-263
0001    GGET     0   0      ; "os"
0002    TGETS    0   0   1  ; "getenv"
0003    KSTR     1   2      ; "TMPDIR"
0004    CALL     0   2   2
0005    IST          0
0006    JMP      1 => 0014
0007    GGET     0   0      ; "os"
0008    TGETS    0   0   1  ; "getenv"
0009    KSTR     1   3      ; "TEMP"
0010    CALL     0   2   2
0011    IST          0
0012    JMP      1 => 0014
0013    KSTR     0   4      ; "/tmp"
0014 => RET1     0   2

-- BYTECODE -- lua.lua:276-279
0001    GGET     1   0      ; "os"
0002    TGETS    1   1   1  ; "execute"
0003    MOV      2   0
0004    CALL     1   2   2
0005    ISEQN    1   0      ; 0
0006    JMP      2 => 0011
0007    ISEQP    1   2
0008    JMP      2 => 0011
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => RET1     2   2

-- BYTECODE -- lua.lua:284-286
0001    UGET     0   0      ; lfs
0002    TGETS    0   0   0  ; "currentdir"
0003    CALLT    0   1

-- BYTECODE -- lua.lua:293-297
0001    GGET     1   0      ; "table"
0002    TGETS    1   1   1  ; "insert"
0003    UGET     2   0      ; dir_stack
0004    UGET     3   1      ; lfs
0005    TGETS    3   3   2  ; "currentdir"
0006    CALL     3   0   1
0007    CALLM    1   1   1
0008    UGET     1   2      ; dir
0009    TGETS    1   1   3  ; "normalize"
0010    MOV      2   0
0011    CALL     1   2   2
0012    MOV      0   1
0013    UGET     1   1      ; lfs
0014    TGETS    1   1   4  ; "chdir"
0015    MOV      2   0
0016    CALLT    1   2

-- BYTECODE -- lua.lua:302-310
0001    UGET     0   0      ; lfs
0002    TGETS    0   0   0  ; "currentdir"
0003    CALL     0   2   1
0004    ISF          0
0005    JMP      1 => 0008
0006    ISNES    0   1      ; ""
0007    JMP      1 => 0010
0008 => KPRI     1   1
0009    RET1     1   2
0010 => GGET     1   2      ; "table"
0011    TGETS    1   1   3  ; "insert"
0012    UGET     2   1      ; dir_stack
0013    MOV      3   0
0014    CALL     1   1   3
0015    UGET     1   0      ; lfs
0016    TGETS    1   1   4  ; "chdir"
0017    KSTR     2   5      ; "/"
0018    CALL     1   1   2
0019    KPRI     1   2
0020    RET1     1   2

-- BYTECODE -- lua.lua:314-322
0001    GGET     0   0      ; "table"
0002    TGETS    0   0   1  ; "remove"
0003    UGET     1   0      ; dir_stack
0004    CALL     0   2   2
0005    ISF          0
0006    JMP      1 => 0014
0007    UGET     1   1      ; lfs
0008    TGETS    1   1   2  ; "chdir"
0009    MOV      2   0
0010    CALL     1   1   2
0011    KPRI     1   2
0012    RET1     1   2
0013    JMP      1 => 0016
0014 => KPRI     1   1
0015    RET1     1   2
0016 => RET0     0   1

-- BYTECODE -- lua.lua:329-358
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; dir
0012    TGETS    1   1   3  ; "normalize"
0013    MOV      2   0
0014    CALL     1   2   2
0015    MOV      0   1
0016    KPRI     1   0
0017    MOV      3   0
0018    TGETS    2   0   4  ; "sub"
0019    KSHORT   4   2
0020    KSHORT   5   2
0021    CALL     2   2   4
0022    ISNES    2   5      ; ":"
0023    JMP      2 => 0036
0024    MOV      3   0
0025    TGETS    2   0   4  ; "sub"
0026    KSHORT   4   1
0027    KSHORT   5   2
0028    CALL     2   2   4
0029    MOV      1   2
0030    MOV      3   0
0031    TGETS    2   0   4  ; "sub"
0032    KSHORT   4   4
0033    CALL     2   2   3
0034    MOV      0   2
0035    JMP      2 => 0043
0036 => MOV      3   0
0037    TGETS    2   0   6  ; "match"
0038    KSTR     4   7      ; "^/"
0039    CALL     2   2   3
0040    ISF          2
0041    JMP      3 => 0043
0042    KSTR     1   8      ; ""
0043 => MOV      3   0
0044    TGETS    2   0   9  ; "gmatch"
0045    KSTR     4  10      ; "([^/]+)/*"
0046    CALL     2   4   3
0047    JMP      5 => 0094
0048 => ISF          1
0049    JMP      6 => 0056
0050    MOV      6   1
0051    KSTR     7  11      ; "/"
0052    MOV      8   5
0053    CAT      6   6   8
0054    ISTC     1   6
0055    JMP      7 => 0057
0056 => MOV      1   5
0057 => UGET     6   1      ; lfs
0058    TGETS    6   6  12  ; "attributes"
0059    MOV      7   1
0060    KSTR     8  13      ; "mode"
0061    CALL     6   2   3
0062    IST          6
0063    JMP      7 => 0087
0064    UGET     7   1      ; lfs
0065    TGETS    7   7  14  ; "mkdir"
0066    MOV      8   1
0067    CALL     7   3   2
0068    IST          7
0069    JMP      9 => 0073
0070    KPRI     9   1
0071    MOV     10   8
0072    RET      9   3
0073 => UGET     9   2      ; fs
0074    TGETS    9   9  15  ; "set_permissions"
0075    MOV     10   1
0076    KSTR    11  16      ; "exec"
0077    KSTR    12  17      ; "all"
0078    CALL     9   3   4
0079    MOV      8  10
0080    MOV      7   9
0081    IST          7
0082    JMP      9 => 0094
0083    KPRI     9   1
0084    MOV     10   8
0085    RET      9   3
0086    JMP      7 => 0094
0087 => ISEQS    6  18      ; "directory"
0088    JMP      7 => 0094
0089    KPRI     7   1
0090    MOV      8   1
0091    KSTR     9  19      ; " is not a directory"
0092    CAT      8   8   9
0093    RET      7   3
0094 => ITERC    5   2   3
0095    ITERL    5 => 0048
0096    KPRI     2   2
0097    RET1     2   2

-- BYTECODE -- lua.lua:364-368
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    MOV      2   0
0007    CALL     1   2   2
0008    MOV      0   1
0009    UGET     1   1      ; lfs
0010    TGETS    1   1   2  ; "rmdir"
0011    MOV      2   0
0012    CALL     1   1   2
0013    RET0     0   1

-- BYTECODE -- lua.lua:374-381
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    MOV      2   0
0007    CALL     1   2   2
0008    MOV      0   1
0009    KSHORT   1   1
0010    KSHORT   2  10
0011    KSHORT   3   1
0012    FORI     1 => 0023
0013 => UGET     5   1      ; lfs
0014    TGETS    5   5   2  ; "rmdir"
0015    MOV      6   0
0016    CALL     5   1   2
0017    UGET     5   0      ; dir
0018    TGETS    5   5   3  ; "dir_name"
0019    MOV      6   0
0020    CALL     5   2   2
0021    MOV      0   5
0022    FORL     1 => 0013
0023 => RET0     0   1

-- BYTECODE -- lua.lua:383-395
0001    ISNEV    0   1
0002    JMP      2 => 0005
0003    KPRI     2   2
0004    RET1     2   2
0005 => UGET     2   0      ; cfg
0006    TGETS    2   2   0  ; "is_platform"
0007    KSTR     3   1      ; "unix"
0008    CALL     2   2   2
0009    ISF          2
0010    JMP      3 => 0027
0011    UGET     2   1      ; lfs
0012    TGETS    2   2   2  ; "attributes"
0013    MOV      3   0
0014    KSTR     4   3      ; "ino"
0015    CALL     2   2   3
0016    UGET     3   1      ; lfs
0017    TGETS    3   3   2  ; "attributes"
0018    MOV      4   1
0019    KSTR     5   3      ; "ino"
0020    CALL     3   2   3
0021    ISEQP    2   0
0022    JMP      4 => 0027
0023    ISNEV    2   3
0024    JMP      4 => 0027
0025    KPRI     4   2
0026    RET1     4   2
0027 => KPRI     2   1
0028    RET1     2   2

-- BYTECODE -- lua.lua:404-439
0001    GGET     3   0      ; "assert"
0002    ISFC     4   0
0003    JMP      4 => 0005
0004    MOV      4   1
0005 => CALL     3   1   2
0006    UGET     3   0      ; dir
0007    TGETS    3   3   1  ; "normalize"
0008    MOV      4   0
0009    CALL     3   2   2
0010    MOV      0   3
0011    UGET     3   0      ; dir
0012    TGETS    3   3   1  ; "normalize"
0013    MOV      4   1
0014    CALL     3   2   2
0015    MOV      1   3
0016    UGET     3   1      ; lfs
0017    TGETS    3   3   2  ; "attributes"
0018    MOV      4   1
0019    KSTR     5   3      ; "mode"
0020    CALL     3   2   3
0021    ISNES    3   4      ; "directory"
0022    JMP      4 => 0032
0023    UGET     4   0      ; dir
0024    TGETS    4   4   5  ; "path"
0025    MOV      5   1
0026    UGET     6   0      ; dir
0027    TGETS    6   6   6  ; "base_name"
0028    MOV      7   0
0029    CALL     6   0   2
0030    CALLM    4   2   1
0031    MOV      1   4
0032 => UGET     4   2      ; are_the_same_file
0033    MOV      5   0
0034    MOV      6   1
0035    CALL     4   2   3
0036    ISF          4
0037    JMP      5 => 0041
0038    KPRI     4   0
0039    KSTR     5   7      ; "The source and destination are the same "~
0040    RET      4   3
0041 => GGET     4   8      ; "io"
0042    TGETS    4   4   9  ; "open"
0043    MOV      5   0
0044    KSTR     6  10      ; "rb"
0045    CALL     4   3   3
0046    IST          4
0047    JMP      6 => 0051
0048    KPRI     6   0
0049    MOV      7   5
0050    RET      6   3
0051 => GGET     6   8      ; "io"
0052    TGETS    6   6   9  ; "open"
0053    MOV      7   1
0054    KSTR     8  11      ; "w+b"
0055    CALL     6   3   3
0056    IST          6
0057    JMP      8 => 0064
0058    MOV      9   4
0059    TGETS    8   4  12  ; "close"
0060    CALL     8   1   2
0061    KPRI     8   0
0062    MOV      9   7
0063    RET      8   3
0064 => LOOP     8 => 0077
0065    MOV      9   4
0066    TGETS    8   4  13  ; "read"
0067    KSHORT  10 8192
0068    CALL     8   2   3
0069    IST          8
0070    JMP      9 => 0072
0071    JMP      8 => 0077
0072 => MOV     10   6
0073    TGETS    9   6  14  ; "write"
0074    MOV     11   8
0075    CALL     9   1   3
0076    JMP      8 => 0064
0077 => MOV      9   4
0078    TGETS    8   4  12  ; "close"
0079    CALL     8   1   2
0080    MOV      9   6
0081    TGETS    8   6  12  ; "close"
0082    CALL     8   1   2
0083    KPRI     8   0
0084    IST          2
0085    JMP      9 => 0092
0086    UGET     9   1      ; lfs
0087    TGETS    9   9   2  ; "attributes"
0088    MOV     10   0
0089    KSTR    11  15      ; "permissions"
0090    CALL     9   2   3
0091    MOV      8   9
0092 => ISF          8
0093    JMP      9 => 0103
0094    UGET     9   3      ; posix_ok
0095    ISF          9
0096    JMP     10 => 0103
0097    UGET     9   4      ; posix
0098    TGETS    9   9  16  ; "chmod"
0099    MOV     10   1
0100    MOV     11   8
0101    CALLT    9   3
0102    JMP      9 => 0120
0103 => IST          2
0104    JMP      9 => 0114
0105    MOV     10   8
0106    TGETS    9   8  17  ; "match"
0107    KSTR    11  18      ; "x"
0108    CALL     9   2   3
0109    ISF          9
0110    JMP     10 => 0113
0111    KSTR     2  19      ; "exec"
0112    JMP      9 => 0114
0113 => KSTR     2  13      ; "read"
0114 => UGET     9   5      ; fs
0115    TGETS    9   9  20  ; "set_permissions"
0116    MOV     10   1
0117    MOV     11   2
0118    KSTR    12  21      ; "all"
0119    CALLT    9   4
0120 => RET0     0   1

-- BYTECODE -- lua.lua:448-469
0001    UGET     3   0      ; lfs
0002    TGETS    3   3   0  ; "attributes"
0003    MOV      4   0
0004    KSTR     5   1      ; "mode"
0005    CALL     3   2   3
0006    ISNES    3   2      ; "file"
0007    JMP      4 => 0019
0008    UGET     4   1      ; fs
0009    TGETS    4   4   3  ; "copy"
0010    MOV      5   0
0011    MOV      6   1
0012    MOV      7   2
0013    CALL     4   2   4
0014    IST          4
0015    JMP      5 => 0071
0016    KPRI     5   1
0017    RET1     5   2
0018    JMP      4 => 0071
0019 => ISNES    3   4      ; "directory"
0020    JMP      4 => 0071
0021    UGET     4   2      ; dir
0022    TGETS    4   4   5  ; "path"
0023    MOV      5   1
0024    UGET     6   2      ; dir
0025    TGETS    6   6   6  ; "base_name"
0026    MOV      7   0
0027    CALL     6   0   2
0028    CALLM    4   2   1
0029    UGET     5   1      ; fs
0030    TGETS    5   5   7  ; "make_dir"
0031    MOV      6   4
0032    CALL     5   3   2
0033    IST          5
0034    JMP      7 => 0038
0035    KPRI     7   0
0036    MOV      8   6
0037    RET      7   3
0038 => GGET     7   8      ; "pcall"
0039    UGET     8   0      ; lfs
0040    TGETS    8   8   9  ; "dir"
0041    MOV      9   0
0042    CALL     7   2   3
0043    ISNEP    7   1
0044    JMP      7 => 0047
0045    KPRI     7   1
0046    RET1     7   2
0047 => UGET     7   0      ; lfs
0048    TGETS    7   7   9  ; "dir"
0049    MOV      8   0
0050    CALL     7   4   2
0051    JMP     10 => 0069
0052 => ISEQS   10  10      ; "."
0053    JMP     11 => 0069
0054    ISEQS   10  11      ; ".."
0055    JMP     11 => 0069
0056    UGET    11   3      ; recursive_copy
0057    UGET    12   2      ; dir
0058    TGETS   12  12   5  ; "path"
0059    MOV     13   0
0060    MOV     14  10
0061    CALL    12   2   3
0062    MOV     13   4
0063    MOV     14   2
0064    CALL    11   2   4
0065    IST         11
0066    JMP     12 => 0069
0067    KPRI    12   1
0068    RET1    12   2
0069 => ITERC   10   2   3
0070    ITERL   10 => 0052
0071 => KPRI     4   2
0072    RET1     4   2

-- BYTECODE -- lua.lua:477-496
0001    GGET     3   0      ; "assert"
0002    ISFC     4   0
0003    JMP      4 => 0005
0004    MOV      4   1
0005 => CALL     3   1   2
0006    UGET     3   0      ; dir
0007    TGETS    3   3   1  ; "normalize"
0008    MOV      4   0
0009    CALL     3   2   2
0010    MOV      0   3
0011    UGET     3   0      ; dir
0012    TGETS    3   3   1  ; "normalize"
0013    MOV      4   1
0014    CALL     3   2   2
0015    MOV      1   3
0016    UGET     3   1      ; fs
0017    TGETS    3   3   2  ; "is_dir"
0018    MOV      4   0
0019    CALL     3   2   2
0020    IST          3
0021    JMP      3 => 0027
0022    KPRI     3   1
0023    MOV      4   0
0024    KSTR     5   3      ; " is not a directory"
0025    CAT      4   4   5
0026    RET      3   3
0027 => GGET     3   4      ; "pcall"
0028    UGET     4   2      ; lfs
0029    TGETS    4   4   5  ; "dir"
0030    MOV      5   0
0031    CALL     3   2   3
0032    ISNEP    3   1
0033    JMP      3 => 0037
0034    KPRI     3   1
0035    KSTR     4   6      ; "Permission denied"
0036    RET      3   3
0037 => UGET     3   2      ; lfs
0038    TGETS    3   3   5  ; "dir"
0039    MOV      4   0
0040    CALL     3   4   2
0041    JMP      6 => 0064
0042 => ISEQS    6   7      ; "."
0043    JMP      7 => 0064
0044    ISEQS    6   8      ; ".."
0045    JMP      7 => 0064
0046    UGET     7   3      ; recursive_copy
0047    UGET     8   0      ; dir
0048    TGETS    8   8   9  ; "path"
0049    MOV      9   0
0050    MOV     10   6
0051    CALL     8   2   3
0052    MOV      9   1
0053    MOV     10   2
0054    CALL     7   2   4
0055    IST          7
0056    JMP      8 => 0064
0057    KPRI     8   1
0058    KSTR     9  10      ; "Failed copying "
0059    MOV     10   0
0060    KSTR    11  11      ; " to "
0061    MOV     12   1
0062    CAT      9   9  12
0063    RET      8   3
0064 => ITERC    6   2   3
0065    ITERL    6 => 0042
0066    KPRI     3   2
0067    RET1     3   2

-- BYTECODE -- lua.lua:506-515
0001    UGET     0   0      ; lfs
0002    TGETS    0   0   0  ; "dir"
0003    UGET     1   1      ; name
0004    CALL     0   4   2
0005    JMP      3 => 0022
0006 => ISEQS    3   1      ; "."
0007    JMP      4 => 0022
0008    ISEQS    3   2      ; ".."
0009    JMP      4 => 0022
0010    UGET     4   2      ; recursive_delete
0011    UGET     5   3      ; dir
0012    TGETS    5   5   3  ; "path"
0013    UGET     6   1      ; name
0014    MOV      7   3
0015    CALL     5   0   3
0016    CALLM    4   3   0
0017    IST          4
0018    JMP      6 => 0022
0019    KPRI     6   0
0020    MOV      7   5
0021    RET      6   3
0022 => ITERC    3   2   3
0023    ITERL    3 => 0006
0024    UGET     0   0      ; lfs
0025    TGETS    0   0   4  ; "rmdir"
0026    UGET     1   1      ; name
0027    CALL     0   3   2
0028    MOV      2   0
0029    IST          0
0030    JMP      3 => 0033
0031    MOV      3   1
0032    JMP      4 => 0036
0033 => KPRI     3   1
0034    JMP      4 => 0036
0035    KPRI     3   2
0036 => RET      2   3

-- BYTECODE -- lua.lua:503-521
0001    GGET     1   0      ; "os"
0002    TGETS    1   1   1  ; "remove"
0003    MOV      2   0
0004    CALL     1   2   2
0005    ISF          1
0006    JMP      2 => 0009
0007    KPRI     2   2
0008    UCLO     0 => 0025
0009 => GGET     2   2      ; "pcall"
0010    FNEW     3   3      ; lua.lua:506
0011    CALL     2   4   2
0012    ISF          2
0013    JMP      5 => 0019
0014    MOV      5   3
0015    MOV      6   4
0016    UCLO     0 => 0017
0017 => RET      5   3
0018    JMP      5 => 0023
0019 => MOV      5   2
0020    MOV      6   3
0021    UCLO     0 => 0022
0022 => RET      5   3
0023 => UCLO     0 => 0024
0024 => RET0     0   1
0025 => RET1     2   2

-- BYTECODE -- lua.lua:526-529
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "normalize"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    UGET     1   1      ; recursive_delete
0007    MOV      2   0
0008    CALL     1   1   2
0009    RET0     0   1

-- BYTECODE -- lua.lua:535-545
0001    GGET     1   0      ; "pcall"
0002    UGET     2   0      ; lfs
0003    TGETS    2   2   1  ; "dir"
0004    MOV      3   0
0005    CALL     1   4   3
0006    IST          1
0007    JMP      4 => 0011
0008    KPRI     4   0
0009    MOV      5   2
0010    RET      4   3
0011 => MOV      4   2
0012    MOV      5   3
0013    KPRI     6   0
0014    JMP      7 => 0023
0015 => ISEQS    7   2      ; "."
0016    JMP      8 => 0023
0017    ISEQS    7   3      ; ".."
0018    JMP      8 => 0023
0019    GGET     8   4      ; "coroutine"
0020    TGETS    8   8   5  ; "yield"
0021    MOV      9   7
0022    CALL     8   1   2
0023 => ITERC    7   2   3
0024    ITERL    7 => 0015
0025    RET0     0   1

-- BYTECODE -- lua.lua:552-567
0001    GGET     3   0      ; "pcall"
0002    UGET     4   0      ; lfs
0003    TGETS    4   4   1  ; "dir"
0004    MOV      5   0
0005    CALL     3   4   3
0006    IST          3
0007    JMP      6 => 0010
0008    KPRI     6   0
0009    RET1     6   2
0010 => MOV      6   4
0011    MOV      7   5
0012    KPRI     8   0
0013    JMP      9 => 0045
0014 => ISEQS    9   2      ; "."
0015    JMP     10 => 0045
0016    ISEQS    9   3      ; ".."
0017    JMP     10 => 0045
0018    MOV     10   1
0019    MOV     11   9
0020    CAT     10  10  11
0021    GGET    11   4      ; "table"
0022    TGETS   11  11   5  ; "insert"
0023    MOV     12   2
0024    MOV     13  10
0025    CALL    11   1   3
0026    UGET    11   1      ; dir
0027    TGETS   11  11   6  ; "path"
0028    MOV     12   0
0029    MOV     13   9
0030    CALL    11   2   3
0031    UGET    12   0      ; lfs
0032    TGETS   12  12   7  ; "attributes"
0033    MOV     13  11
0034    KSTR    14   8      ; "mode"
0035    CALL    12   2   3
0036    ISNES   12   9      ; "directory"
0037    JMP     12 => 0045
0038    UGET    12   2      ; recursive_find
0039    MOV     13  11
0040    MOV     14  10
0041    KSTR    15  10      ; "/"
0042    CAT     14  14  15
0043    MOV     15   2
0044    CALL    12   1   4
0045 => ITERC    9   2   3
0046    ITERL    9 => 0014
0047    RET0     0   1

-- BYTECODE -- lua.lua:574-583
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0011
0007    NOT      2   0
0008    JMP      3 => 0012
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => CALL     1   1   2
0013    IST          0
0014    JMP      1 => 0019
0015    UGET     1   0      ; fs
0016    TGETS    1   1   3  ; "current_dir"
0017    CALL     1   2   1
0018    MOV      0   1
0019 => UGET     1   1      ; dir
0020    TGETS    1   1   4  ; "normalize"
0021    MOV      2   0
0022    CALL     1   2   2
0023    MOV      0   1
0024    TNEW     1   0
0025    UGET     2   2      ; recursive_find
0026    MOV      3   0
0027    KSTR     4   5      ; ""
0028    MOV      5   1
0029    CALL     2   1   4
0030    RET1     1   2

-- BYTECODE -- lua.lua:588-592
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    MOV      2   0
0007    CALL     1   2   2
0008    MOV      0   1
0009    GGET     1   2      ; "type"
0010    UGET     2   1      ; lfs
0011    TGETS    2   2   3  ; "attributes"
0012    MOV      3   0
0013    CALL     2   0   2
0014    CALLM    1   2   0
0015    ISEQS    1   4      ; "table"
0016    JMP      1 => 0019
0017    KPRI     1   1
0018    JMP      2 => 0020
0019 => KPRI     1   2
0020 => RET1     1   2

-- BYTECODE -- lua.lua:597-601
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    MOV      2   0
0007    CALL     1   2   2
0008    MOV      0   1
0009    UGET     1   1      ; lfs
0010    TGETS    1   1   2  ; "attributes"
0011    MOV      2   0
0012    KSTR     3   3      ; "mode"
0013    CALL     1   2   3
0014    ISEQS    1   4      ; "directory"
0015    JMP      1 => 0018
0016    KPRI     1   1
0017    JMP      2 => 0019
0018 => KPRI     1   2
0019 => RET1     1   2

-- BYTECODE -- lua.lua:606-610
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    MOV      2   0
0007    CALL     1   2   2
0008    MOV      0   1
0009    UGET     1   1      ; lfs
0010    TGETS    1   1   2  ; "attributes"
0011    MOV      2   0
0012    KSTR     3   3      ; "mode"
0013    CALL     1   2   3
0014    ISEQS    1   4      ; "file"
0015    JMP      1 => 0018
0016    KPRI     1   1
0017    JMP      2 => 0019
0018 => KPRI     1   2
0019 => RET1     1   2

-- BYTECODE -- lua.lua:617-624
0001    GGET     2   0      ; "assert"
0002    ISEQP    1   0
0003    JMP      3 => 0016
0004    GGET     3   1      ; "type"
0005    MOV      4   1
0006    CALL     3   2   2
0007    ISEQS    3   2      ; "table"
0008    JMP      3 => 0016
0009    GGET     3   1      ; "type"
0010    MOV      4   1
0011    CALL     3   2   2
0012    ISEQS    3   3      ; "number"
0013    JMP      3 => 0016
0014    KPRI     3   1
0015    JMP      4 => 0017
0016 => KPRI     3   2
0017 => CALL     2   1   2
0018    UGET     2   0      ; dir
0019    TGETS    2   2   4  ; "normalize"
0020    MOV      3   0
0021    CALL     2   2   2
0022    MOV      0   2
0023    GGET     2   1      ; "type"
0024    MOV      3   1
0025    CALL     2   2   2
0026    ISNES    2   2      ; "table"
0027    JMP      2 => 0033
0028    GGET     2   5      ; "os"
0029    TGETS    2   2   6  ; "time"
0030    MOV      3   1
0031    CALL     2   2   2
0032    MOV      1   2
0033 => UGET     2   1      ; lfs
0034    TGETS    2   2   7  ; "touch"
0035    MOV      3   0
0036    MOV      4   1
0037    CALLT    2   3

-- BYTECODE -- lua.lua:628-633
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    UGET     2   1      ; fs
0007    TGETS    2   2   2  ; "absolute_name"
0008    MOV      3   0
0009    CALL     2   0   2
0010    CALLM    1   2   0
0011    MOV      0   1
0012    UGET     1   2      ; util
0013    TGETS    1   1   3  ; "exists"
0014    MOV      2   0
0015    CALLT    1   2

-- BYTECODE -- lua.lua:643-651
0001    UGET     1   0      ; bz2
0002    TGETS    1   1   0  ; "initDecompress"
0003    CALL     1   2   1
0004    MOV      3   1
0005    TGETS    2   1   1  ; "update"
0006    MOV      4   0
0007    CALL     2   3   3
0008    IST          2
0009    JMP      4 => 0013
0010    KPRI     4   0
0011    MOV      5   3
0012    RET      4   3
0013 => MOV      5   1
0014    TGETS    4   1   2  ; "close"
0015    CALL     4   1   2
0016    RET1     2   2

-- BYTECODE -- lua.lua:658-666
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    ISEQP    1   0
0013    JMP      3 => 0021
0014    GGET     3   1      ; "type"
0015    MOV      4   1
0016    CALL     3   2   2
0017    ISEQS    3   2      ; "string"
0018    JMP      3 => 0021
0019    KPRI     3   1
0020    JMP      4 => 0022
0021 => KPRI     3   2
0022 => CALL     2   1   2
0023    IST          1
0024    JMP      2 => 0031
0025    MOV      3   0
0026    TGETS    2   0   3  ; "gsub"
0027    KSTR     4   4      ; "%.bz2$"
0028    KSTR     5   5      ; ""
0029    CALL     2   2   4
0030    MOV      1   2
0031 => UGET     2   0      ; fs
0032    TGETS    2   2   6  ; "filter_file"
0033    UGET     3   1      ; bunzip2_string
0034    MOV      4   0
0035    MOV      5   1
0036    CALLT    2   4

-- BYTECODE -- lua.lua:676-678
0001    UGET     1   0      ; zip
0002    TGETS    1   1   0  ; "zip"
0003    MOV      2   0
0004    VARG     3   0   1
0005    CALLMT   1   1

-- BYTECODE -- lua.lua:680-682
0001    UGET     1   0      ; zip
0002    TGETS    1   1   0  ; "unzip"
0003    MOV      2   0
0004    CALLT    1   2

-- BYTECODE -- lua.lua:684-686
0001    UGET     2   0      ; zip
0002    TGETS    2   2   0  ; "gunzip"
0003    MOV      3   0
0004    MOV      4   1
0005    CALLT    2   3

-- BYTECODE -- lua.lua:731-740
0001    GGET     0   0      ; "io"
0002    TGETS    0   0   1  ; "write"
0003    KSTR     1   2      ; "."
0004    CALL     0   1   2
0005    GGET     0   0      ; "io"
0006    TGETS    0   0   3  ; "flush"
0007    CALL     0   1   1
0008    UGET     0   0      ; dots
0009    ADDVN    0   0   0  ; 1
0010    USETV    0   0      ; dots
0011    UGET     0   0      ; dots
0012    ISNEN    0   1      ; 70
0013    JMP      0 => 0019
0014    GGET     0   0      ; "io"
0015    TGETS    0   0   1  ; "write"
0016    KSTR     1   4      ; "\n"
0017    CALL     0   1   2
0018    USETN    0   2      ; dots ; 0
0019 => UGET     0   1      ; ltn12
0020    TGETS    0   0   5  ; "pump"
0021    TGETS    0   0   6  ; "step"
0022    VARG     1   0   0
0023    CALLMT   0   0

-- BYTECODE -- lua.lua:704-772
0001    TNEW     4   0
0002    UGET     5   0      ; cfg
0003    TGETS    5   5   0  ; "verbose"
0004    ISF          5
0005    JMP      6 => 0010
0006    GGET     5   1      ; "print"
0007    MOV      6   1
0008    MOV      7   0
0009    CALL     5   1   3
0010 => GGET     5   2      ; "os"
0011    TGETS    5   5   3  ; "getenv"
0012    KSTR     6   4      ; "http_proxy"
0013    CALL     5   2   2
0014    GGET     6   5      ; "type"
0015    MOV      7   5
0016    CALL     6   2   2
0017    ISEQS    6   6      ; "string"
0018    JMP      6 => 0020
0019    KPRI     5   0
0020 => ISF          5
0021    JMP      6 => 0031
0022    MOV      7   5
0023    TGETS    6   5   7  ; "find"
0024    KSTR     8   8      ; "://"
0025    CALL     6   2   3
0026    IST          6
0027    JMP      6 => 0031
0028    KSTR     6   9      ; "http://"
0029    MOV      7   5
0030    CAT      5   6   7
0031 => UGET     6   0      ; cfg
0032    TGETS    6   6  10  ; "show_downloads"
0033    ISF          6
0034    JMP      7 => 0043
0035    GGET     6  11      ; "io"
0036    TGETS    6   6  12  ; "write"
0037    MOV      7   1
0038    KSTR     8  13      ; " "
0039    MOV      9   0
0040    KSTR    10  14      ; " ...\n"
0041    CAT      7   7  10
0042    CALL     6   1   2
0043 => KSHORT   6   0
0044    UGET     7   0      ; cfg
0045    TGETS    7   7  15  ; "connection_timeout"
0046    ISF          7
0047    JMP      8 => 0056
0048    UGET     7   0      ; cfg
0049    TGETS    7   7  15  ; "connection_timeout"
0050    KSHORT   8   0
0051    ISGE     8   7
0052    JMP      7 => 0056
0053    UGET     7   0      ; cfg
0054    TGETS    7   7  15  ; "connection_timeout"
0055    TSETS    7   2  16  ; "TIMEOUT"
0056 => TGETS    7   2  17  ; "request"
0057    TDUP     8  18
0058    TSETS    0   8  19  ; "url"
0059    TSETS    5   8  20  ; "proxy"
0060    TSETS    1   8  21  ; "method"
0061    UGET     9   1      ; ltn12
0062    TGETS    9   9  22  ; "sink"
0063    TGETS    9   9  23  ; "table"
0064    MOV     10   4
0065    CALL     9   2   2
0066    TSETS    9   8  22  ; "sink"
0067    UGET     9   0      ; cfg
0068    TGETS    9   9  10  ; "show_downloads"
0069    ISF          9
0070    JMP     10 => 0072
0071    FNEW     9  24      ; lua.lua:731
0072 => TSETS    9   8  25  ; "step"
0073    TDUP     9  28
0074    UGET    10   0      ; cfg
0075    TGETS   10  10  26  ; "user_agent"
0076    KSTR    11  27      ; " via LuaSocket"
0077    CAT     10  10  11
0078    TSETS   10   9  29  ; "user-agent"
0079    TSETS    9   8  30  ; "headers"
0080    CALL     7   5   2
0081    UGET    11   0      ; cfg
0082    TGETS   11  11  10  ; "show_downloads"
0083    ISF         11
0084    JMP     12 => 0089
0085    GGET    11  11      ; "io"
0086    TGETS   11  11  12  ; "write"
0087    KSTR    12  31      ; "\n"
0088    CALL    11   1   2
0089 => IST          7
0090    JMP     11 => 0096
0091    KPRI    11   0
0092    MOV     12   8
0093    UCLO     0 => 0094
0094 => RET     11   3
0095    JMP     11 => 0156
0096 => ISEQN    8   0      ; 301
0097    JMP     11 => 0100
0098    ISNEN    8   1      ; 302
0099    JMP     11 => 0143
0100 => TGETS   11   9  32  ; "location"
0101    ISF         11
0102    JMP     12 => 0138
0103    UGET    12   2      ; dir
0104    TGETS   12  12  33  ; "split_url"
0105    MOV     13  11
0106    CALL    12   3   2
0107    UGET    14   3      ; redirect_protocols
0108    TGETV   14  14  12
0109    ISF         14
0110    JMP     15 => 0133
0111    IST          3
0112    JMP     14 => 0115
0113    TNEW     3   0
0114    JMP     14 => 0122
0115 => TGETV   14   3  11
0116    ISF         14
0117    JMP     15 => 0122
0118    KPRI    14   0
0119    KSTR    15  34      ; "Redirection loop -- broken URL?"
0120    UCLO     0 => 0121
0121 => RET     14   3
0122 => KPRI    14   2
0123    TSETV   14   3   0
0124    UGET    14   4      ; request
0125    MOV     15  11
0126    MOV     16   1
0127    UGET    17   3      ; redirect_protocols
0128    TGETV   17  17  12
0129    MOV     18   3
0130    UCLO     0 => 0131
0131 => CALLT   14   5
0132    JMP     14 => 0138
0133 => KPRI    14   0
0134    KSTR    15  35      ; "URL redirected to unsupported protocol -"~
0135    KSTR    16  36      ; "https"
0136    UCLO     0 => 0137
0137 => RET     14   4
0138 => KPRI    12   0
0139    MOV     13  10
0140    UCLO     0 => 0141
0141 => RET     12   3
0142    JMP     11 => 0156
0143 => ISEQN    8   2      ; 200
0144    JMP     11 => 0150
0145    KPRI    11   0
0146    MOV     12  10
0147    UCLO     0 => 0148
0148 => RET     11   3
0149    JMP     11 => 0156
0150 => MOV     11   4
0151    MOV     12   8
0152    MOV     13   9
0153    MOV     14  10
0154    UCLO     0 => 0155
0155 => RET     11   5
0156 => UCLO     0 => 0157
0157 => RET0     0   1

-- BYTECODE -- lua.lua:774-780
0001    GGET     2   0      ; "io"
0002    TGETS    2   2   1  ; "open"
0003    MOV      3   0
0004    KSTR     4   2      ; "w"
0005    CALL     2   2   3
0006    ISF          2
0007    JMP      3 => 0015
0008    MOV      4   2
0009    TGETS    3   2   3  ; "write"
0010    MOV      5   1
0011    CALL     3   1   3
0012    MOV      4   2
0013    TGETS    3   2   4  ; "close"
0014    CALL     3   1   2
0015 => RET0     0   1

-- BYTECODE -- lua.lua:782-789
0001    GGET     1   0      ; "io"
0002    TGETS    1   1   1  ; "open"
0003    MOV      2   0
0004    KSTR     3   2      ; "r"
0005    CALL     1   2   3
0006    ISF          1
0007    JMP      2 => 0016
0008    MOV      3   1
0009    TGETS    2   1   3  ; "read"
0010    KSTR     4   4      ; "*a"
0011    CALL     2   2   3
0012    MOV      4   1
0013    TGETS    3   1   5  ; "close"
0014    CALL     3   1   2
0015    RET1     2   2
0016 => RET0     0   1

-- BYTECODE -- lua.lua:791-795
0001    UGET     3   0      ; write_timestamp
0002    MOV      4   0
0003    KSTR     5   0      ; ".unixtime"
0004    CAT      4   4   5
0005    GGET     5   1      ; "os"
0006    TGETS    5   5   2  ; "time"
0007    CALL     5   0   1
0008    CALLM    3   1   1
0009    UGET     3   0      ; write_timestamp
0010    MOV      4   0
0011    KSTR     5   3      ; ".status"
0012    CAT      4   4   5
0013    MOV      5   1
0014    CALL     3   1   3
0015    KPRI     3   0
0016    MOV      4   1
0017    MOV      5   2
0018    RET      3   4

-- BYTECODE -- lua.lua:804-850
0001    ISF          3
0002    JMP      4 => 0079
0003    UGET     4   0      ; read_timestamp
0004    MOV      5   1
0005    KSTR     6   0      ; ".status"
0006    CAT      5   5   6
0007    CALL     4   2   2
0008    UGET     5   0      ; read_timestamp
0009    MOV      6   1
0010    KSTR     7   1      ; ".timestamp"
0011    CAT      6   6   7
0012    CALL     5   2   2
0013    IST          4
0014    JMP      6 => 0017
0015    ISF          5
0016    JMP      6 => 0079
0017 => UGET     6   0      ; read_timestamp
0018    MOV      7   1
0019    KSTR     8   2      ; ".unixtime"
0020    CAT      7   7   8
0021    CALL     6   2   2
0022    ISF          6
0023    JMP      7 => 0050
0024    GGET     7   3      ; "os"
0025    TGETS    7   7   4  ; "time"
0026    CALL     7   2   1
0027    GGET     8   5      ; "tonumber"
0028    MOV      9   6
0029    CALL     8   2   2
0030    SUBVV    7   7   8
0031    ISF          4
0032    JMP      8 => 0042
0033    UGET     8   1      ; cfg
0034    TGETS    8   8   6  ; "cache_fail_timeout"
0035    ISGE     7   8
0036    JMP      8 => 0050
0037    KPRI     8   0
0038    MOV      9   4
0039    TNEW    10   0
0040    RET      8   4
0041    JMP      8 => 0050
0042 => UGET     8   1      ; cfg
0043    TGETS    8   8   7  ; "cache_timeout"
0044    ISGE     7   8
0045    JMP      8 => 0050
0046    KPRI     8   2
0047    KNIL     9  10
0048    KPRI    11   2
0049    RET      8   5
0050 => UGET     7   2      ; request
0051    MOV      8   0
0052    KSTR     9   8      ; "HEAD"
0053    MOV     10   2
0054    CALL     7   5   4
0055    IST          7
0056    JMP     11 => 0062
0057    UGET    11   3      ; fail_with_status
0058    MOV     12   1
0059    MOV     13   8
0060    MOV     14   9
0061    CALLT   11   4
0062 => ISNEN    8   0      ; 200
0063    JMP     11 => 0079
0064    TGETS   11   9   9  ; "last-modified"
0065    ISNEV   11   5
0066    JMP     11 => 0079
0067    UGET    11   4      ; write_timestamp
0068    MOV     12   1
0069    KSTR    13   2      ; ".unixtime"
0070    CAT     12  12  13
0071    GGET    13   3      ; "os"
0072    TGETS   13  13   4  ; "time"
0073    CALL    13   0   1
0074    CALLM   11   1   1
0075    KPRI    11   2
0076    KNIL    12  13
0077    KPRI    14   2
0078    RET     11   5
0079 => UGET     4   2      ; request
0080    MOV      5   0
0081    KSTR     6  10      ; "GET"
0082    MOV      7   2
0083    CALL     4   5   4
0084    IST          4
0085    JMP      8 => 0093
0086    ISF          5
0087    JMP      8 => 0093
0088    UGET     8   3      ; fail_with_status
0089    MOV      9   1
0090    MOV     10   5
0091    MOV     11   6
0092    CALLT    8   4
0093 => ISF          3
0094    JMP      8 => 0112
0095    TGETS    8   6   9  ; "last-modified"
0096    ISF          8
0097    JMP      9 => 0112
0098    UGET     8   4      ; write_timestamp
0099    MOV      9   1
0100    KSTR    10   1      ; ".timestamp"
0101    CAT      9   9  10
0102    TGETS   10   6   9  ; "last-modified"
0103    CALL     8   1   3
0104    UGET     8   4      ; write_timestamp
0105    MOV      9   1
0106    KSTR    10   2      ; ".unixtime"
0107    CAT      9   9  10
0108    GGET    10   3      ; "os"
0109    TGETS   10  10   4  ; "time"
0110    CALL    10   0   1
0111    CALLM    8   1   1
0112 => GGET     8  11      ; "io"
0113    TGETS    8   8  12  ; "open"
0114    MOV      9   1
0115    KSTR    10  13      ; "wb"
0116    CALL     8   2   3
0117    IST          8
0118    JMP      9 => 0123
0119    KPRI     9   0
0120    KSHORT  10   0
0121    TNEW    11   0
0122    RET      9   4
0123 => GGET     9  14      ; "ipairs"
0124    MOV     10   4
0125    CALL     9   4   2
0126    JMP     12 => 0131
0127 => MOV     15   8
0128    TGETS   14   8  15  ; "write"
0129    MOV     16  13
0130    CALL    14   1   3
0131 => ITERC   12   3   3
0132    ITERL   12 => 0127
0133    MOV     10   8
0134    TGETS    9   8  16  ; "close"
0135    CALL     9   1   2
0136    KPRI     9   2
0137    RET1     9   2

-- BYTECODE -- lua.lua:852-862
0001    UGET     2   0      ; ftp
0002    TGETS    2   2   0  ; "get"
0003    MOV      3   0
0004    CALL     2   3   2
0005    IST          2
0006    JMP      4 => 0010
0007    KPRI     4   1
0008    MOV      5   3
0009    RET      4   3
0010 => GGET     4   1      ; "io"
0011    TGETS    4   4   2  ; "open"
0012    MOV      5   1
0013    KSTR     6   3      ; "wb"
0014    CALL     4   2   3
0015    IST          4
0016    JMP      5 => 0020
0017    KPRI     5   1
0018    MOV      6   3
0019    RET      5   3
0020 => MOV      6   4
0021    TGETS    5   4   4  ; "write"
0022    MOV      7   2
0023    CALL     5   1   3
0024    MOV      6   4
0025    TGETS    5   4   5  ; "close"
0026    CALL     5   1   2
0027    KPRI     5   2
0028    RET1     5   2

-- BYTECODE -- lua.lua:880-918
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   1
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    UGET     3   0      ; fs
0024    TGETS    3   3   3  ; "absolute_name"
0025    ISTC     4   1
0026    JMP      4 => 0031
0027    UGET     4   1      ; dir
0028    TGETS    4   4   4  ; "base_name"
0029    MOV      5   0
0030    CALL     4   2   2
0031 => CALL     3   2   2
0032    MOV      1   3
0033    GGET     3   5      ; "os"
0034    TGETS    3   3   6  ; "getenv"
0035    KSTR     4   7      ; "no_proxy"
0036    CALL     3   2   2
0037    ISF          3
0038    JMP      4 => 0045
0039    UGET     3   0      ; fs
0040    TGETS    3   3   8  ; "use_downloader"
0041    MOV      4   0
0042    MOV      5   1
0043    MOV      6   2
0044    CALLT    3   4
0045 => KNIL     3   6
0046    UGET     7   2      ; util
0047    TGETS    7   7   9  ; "starts_with"
0048    MOV      8   0
0049    KSTR     9  10      ; "http:"
0050    CALL     7   2   3
0051    ISF          7
0052    JMP      8 => 0064
0053    UGET     7   3      ; http_request
0054    MOV      8   0
0055    MOV      9   1
0056    UGET    10   4      ; http
0057    MOV     11   2
0058    CALL     7   5   5
0059    MOV      6  10
0060    MOV      5   9
0061    MOV      4   8
0062    MOV      3   7
0063    JMP      7 => 0109
0064 => UGET     7   2      ; util
0065    TGETS    7   7   9  ; "starts_with"
0066    MOV      8   0
0067    KSTR     9  11      ; "ftp:"
0068    CALL     7   2   3
0069    ISF          7
0070    JMP      8 => 0078
0071    UGET     7   5      ; ftp_request
0072    MOV      8   0
0073    MOV      9   1
0074    CALL     7   3   3
0075    MOV      4   8
0076    MOV      3   7
0077    JMP      7 => 0109
0078 => UGET     7   2      ; util
0079    TGETS    7   7   9  ; "starts_with"
0080    MOV      8   0
0081    KSTR     9  12      ; "https:"
0082    CALL     7   2   3
0083    ISF          7
0084    JMP      8 => 0108
0085    UGET     7   6      ; luasec_ok
0086    ISF          7
0087    JMP      8 => 0106
0088    GGET     7   5      ; "os"
0089    TGETS    7   7   6  ; "getenv"
0090    KSTR     8  13      ; "https_proxy"
0091    CALL     7   2   2
0092    IST          7
0093    JMP      7 => 0106
0094    KPRI     7   0
0095    UGET     8   3      ; http_request
0096    MOV      9   0
0097    MOV     10   1
0098    UGET    11   7      ; https
0099    MOV     12   2
0100    CALL     8   5   5
0101    MOV      6  11
0102    MOV      7  10
0103    MOV      4   9
0104    MOV      3   8
0105    JMP      7 => 0109
0106 => KPRI     5   2
0107    JMP      7 => 0109
0108 => KSTR     4  14      ; "Unsupported protocol"
0109 => ISF          5
0110    JMP      7 => 0133
0111    UGET     7   8      ; downloader_warning
0112    IST          7
0113    JMP      7 => 0126
0114    UGET     7   0      ; fs
0115    TGETS    7   7  15  ; "which_tool"
0116    KSTR     8  16      ; "downloader"
0117    CALL     7   2   2
0118    UGET     8   2      ; util
0119    TGETS    8   8  17  ; "warning"
0120    KSTR     9  18      ; "falling back to "
0121    MOV     10   7
0122    KSTR    11  19      ; " - install luasec to get native HTTPS su"~
0123    CAT      9   9  11
0124    CALL     8   1   2
0125    USETP    8   2      ; downloader_warning
0126 => UGET     7   0      ; fs
0127    TGETS    7   7   8  ; "use_downloader"
0128    MOV      8   0
0129    MOV      9   1
0130    MOV     10   2
0131    CALLT    7   4
0132    JMP      7 => 0138
0133 => IST          3
0134    JMP      7 => 0138
0135    KPRI     7   0
0136    MOV      8   4
0137    RET      7   3
0138 => KPRI     7   2
0139    MOV      8   1
0140    MOV      9   6
0141    RET      7   4

-- BYTECODE -- lua.lua:922-924
0001    UGET     3   0      ; fs
0002    TGETS    3   3   0  ; "use_downloader"
0003    MOV      4   0
0004    MOV      5   1
0005    MOV      6   2
0006    CALLT    3   4

-- BYTECODE -- lua.lua:936-938
0001    UGET     1   0      ; md5
0002    TGETS    1   1   0  ; "digest"
0003    MOV      2   0
0004    CALLT    1   2

-- BYTECODE -- lua.lua:946-954
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "absolute_name"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    GGET     1   1      ; "io"
0007    TGETS    1   1   2  ; "open"
0008    MOV      2   0
0009    KSTR     3   3      ; "rb"
0010    CALL     1   2   3
0011    IST          1
0012    JMP      2 => 0018
0013    KPRI     2   0
0014    KSTR     3   4      ; "Failed to open file for reading: "
0015    MOV      4   0
0016    CAT      3   3   4
0017    RET      2   3
0018 => UGET     2   1      ; md5
0019    TGETS    2   2   5  ; "sumhexa"
0020    MOV      4   1
0021    TGETS    3   1   6  ; "read"
0022    KSTR     5   7      ; "*a"
0023    CALL     3   0   3
0024    CALLM    2   2   0
0025    MOV      4   1
0026    TGETS    3   1   8  ; "close"
0027    CALL     3   1   2
0028    ISF          2
0029    JMP      3 => 0031
0030    RET1     2   2
0031 => KPRI     3   0
0032    KSTR     4   9      ; "Failed to compute MD5 hash for file "
0033    MOV      5   0
0034    CAT      4   4   5
0035    RET      3   3

-- BYTECODE -- lua.lua:963-973
0001    KSHORT   2   0
0002    IST          1
0003    JMP      3 => 0005
0004    KPRI     1   1
0005 => KSHORT   3   1
0006    KSHORT   4   9
0007    KSHORT   5   1
0008    FORI     3 => 0026
0009 => MOV      8   0
0010    TGETS    7   0   0  ; "sub"
0011    SUBNV    9   6   0  ; 10
0012    SUBNV   10   6   0  ; 10
0013    CALL     7   2   4
0014    ISEQS    7   1      ; "-"
0015    JMP      7 => 0018
0016    KPRI     7   1
0017    JMP      8 => 0019
0018 => KPRI     7   2
0019 => ISNEV    1   7
0020    JMP      8 => 0025
0021    SUBVN    8   6   1  ; 1
0022    KSHORT   9   2
0023    POW      8   9   8
0024    ADDVV    2   2   8
0025 => FORL     3 => 0009
0026 => GGET     3   2      ; "math"
0027    TGETS    3   3   3  ; "floor"
0028    MOV      4   2
0029    CALLT    3   2

-- BYTECODE -- lua.lua:990-999
0001    UGET     0   0      ; umask_cache
0002    ISF          0
0003    JMP      1 => 0006
0004    UGET     0   0      ; umask_cache
0005    RET1     0   2
0006 => UGET     0   1      ; posix
0007    TGETS    0   0   0  ; "umask"
0008    CALL     0   2   1
0009    UGET     1   2      ; fs_lua
0010    TGETS    1   1   1  ; "_unix_rwx_to_number"
0011    MOV      2   0
0012    KPRI     3   2
0013    CALL     1   2   3
0014    KSTR     2   2      ; "%03o"
0015    MOV      3   2
0016    TGETS    2   2   3  ; "format"
0017    MOV      4   1
0018    CALL     2   2   3
0019    USETV    0   2      ; umask_cache
0020    UGET     2   0      ; umask_cache
0021    RET1     2   2

-- BYTECODE -- lua.lua:1002-1024
0001    KPRI     3   0
0002    ISNES    1   0      ; "read"
0003    JMP      4 => 0012
0004    ISNES    2   1      ; "user"
0005    JMP      4 => 0012
0006    UGET     4   0      ; fs
0007    TGETS    4   4   2  ; "_unix_moderate_permissions"
0008    KSTR     5   3      ; "600"
0009    CALL     4   2   2
0010    MOV      3   4
0011    JMP      4 => 0049
0012 => ISNES    1   4      ; "exec"
0013    JMP      4 => 0022
0014    ISNES    2   1      ; "user"
0015    JMP      4 => 0022
0016    UGET     4   0      ; fs
0017    TGETS    4   4   2  ; "_unix_moderate_permissions"
0018    KSTR     5   5      ; "700"
0019    CALL     4   2   2
0020    MOV      3   4
0021    JMP      4 => 0049
0022 => ISNES    1   0      ; "read"
0023    JMP      4 => 0032
0024    ISNES    2   6      ; "all"
0025    JMP      4 => 0032
0026    UGET     4   0      ; fs
0027    TGETS    4   4   2  ; "_unix_moderate_permissions"
0028    KSTR     5   7      ; "644"
0029    CALL     4   2   2
0030    MOV      3   4
0031    JMP      4 => 0049
0032 => ISNES    1   4      ; "exec"
0033    JMP      4 => 0042
0034    ISNES    2   6      ; "all"
0035    JMP      4 => 0042
0036    UGET     4   0      ; fs
0037    TGETS    4   4   2  ; "_unix_moderate_permissions"
0038    KSTR     5   8      ; "755"
0039    CALL     4   2   2
0040    MOV      3   4
0041    JMP      4 => 0049
0042 => KPRI     4   1
0043    KSTR     5   9      ; "Invalid permission "
0044    MOV      6   1
0045    KSTR     7  10      ; " for "
0046    MOV      8   2
0047    CAT      5   5   8
0048    RET      4   3
0049 => TNEW     4   0
0050    MOV      6   3
0051    TGETS    5   3  11  ; "sub"
0052    KSHORT   7  -3
0053    CALL     5   2   3
0054    MOV      6   5
0055    TGETS    5   5  12  ; "gmatch"
0056    KSTR     7  13      ; "."
0057    CALL     5   4   3
0058    JMP      8 => 0065
0059 => GGET     9  14      ; "table"
0060    TGETS    9   9  15  ; "insert"
0061    MOV     10   4
0062    UGET    11   1      ; octal_to_rwx
0063    TGETV   11  11   8
0064    CALL     9   1   3
0065 => ITERC    8   2   3
0066    ITERL    8 => 0059
0067    GGET     5  14      ; "table"
0068    TGETS    5   5  16  ; "concat"
0069    MOV      6   4
0070    CALL     5   2   2
0071    MOV      3   5
0072    UGET     5   2      ; posix
0073    TGETS    5   5  17  ; "chmod"
0074    MOV      6   0
0075    MOV      7   3
0076    CALL     5   2   3
0077    ISEQN    5   0      ; 0
0078    JMP      6 => 0081
0079    KPRI     6   1
0080    JMP      7 => 0082
0081 => KPRI     6   2
0082 => RET1     6   2

-- BYTECODE -- lua.lua:1026-1028
0001    UGET     0   0      ; posix
0002    TGETS    0   0   0  ; "getpwuid"
0003    UGET     1   0      ; posix
0004    TGETS    1   1   1  ; "geteuid"
0005    CALL     1   0   1
0006    CALLM    0   2   0
0007    TGETS    0   0   2  ; "pw_name"
0008    RET1     0   2

-- BYTECODE -- lua.lua:1037-1042
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; dir
0012    TGETS    1   1   3  ; "normalize"
0013    MOV      2   0
0014    CALL     1   2   2
0015    MOV      0   1
0016    UGET     1   1      ; posix
0017    TGETS    1   1   4  ; "mkdtemp"
0018    UGET     2   2      ; fs
0019    TGETS    2   2   5  ; "system_temp_dir"
0020    CALL     2   2   1
0021    KSTR     3   6      ; "/luarocks_"
0022    MOV      5   0
0023    TGETS    4   0   7  ; "gsub"
0024    KSTR     6   8      ; "/"
0025    KSTR     7   9      ; "_"
0026    CALL     4   2   4
0027    KSTR     5  10      ; "-XXXXXX"
0028    CAT      2   2   5
0029    CALLT    1   2

-- BYTECODE -- lua.lua:1054-1066
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; dir
0012    TGETS    1   1   3  ; "normalize"
0013    MOV      2   0
0014    CALL     1   2   2
0015    MOV      0   1
0016    UGET     1   1      ; fs
0017    TGETS    1   1   4  ; "system_temp_dir"
0018    CALL     1   2   1
0019    KSTR     2   5      ; "/luarocks_"
0020    MOV      4   0
0021    TGETS    3   0   6  ; "gsub"
0022    KSTR     5   7      ; "/"
0023    KSTR     6   8      ; "_"
0024    CALL     3   2   4
0025    KSTR     4   9      ; "-"
0026    CAT      1   1   4
0027 => LOOP     2 => 0044
0028    MOV      2   1
0029    GGET     3  10      ; "tostring"
0030    GGET     4  11      ; "math"
0031    TGETS    4   4  12  ; "random"
0032    KNUM     5   0      ; 10000000
0033    CALL     4   0   2
0034    CALLM    3   2   0
0035    CAT      2   2   3
0036    UGET     3   2      ; lfs
0037    TGETS    3   3  13  ; "mkdir"
0038    MOV      4   2
0039    CALL     3   2   2
0040    ISF          3
0041    JMP      4 => 0027
0042    RET1     2   2
0043    JMP      2 => 0027
0044 => RET0     0   1

-- BYTECODE -- lua.lua:1074-1082
0001    UGET     3   0      ; patch
0002    TGETS    3   3   0  ; "read_patch"
0003    MOV      4   0
0004    MOV      5   1
0005    CALL     3   3   3
0006    IST          4
0007    JMP      5 => 0013
0008    KPRI     5   0
0009    KSTR     6   1      ; "Failed reading patch "
0010    MOV      7   0
0011    CAT      6   6   7
0012    RET      5   3
0013 => ISF          3
0014    JMP      5 => 0021
0015    UGET     5   0      ; patch
0016    TGETS    5   5   2  ; "apply_patch"
0017    MOV      6   3
0018    KSHORT   7   1
0019    MOV      8   2
0020    CALLT    5   4
0021 => RET0     0   1

-- BYTECODE -- lua.lua:1091-1105
0001    GGET     3   0      ; "assert"
0002    ISFC     4   0
0003    JMP      4 => 0005
0004    MOV      4   1
0005 => CALL     3   1   2
0006    UGET     3   0      ; fs
0007    TGETS    3   3   1  ; "exists"
0008    MOV      4   1
0009    CALL     3   2   2
0010    ISF          3
0011    JMP      4 => 0023
0012    UGET     3   0      ; fs
0013    TGETS    3   3   2  ; "is_dir"
0014    MOV      4   1
0015    CALL     3   2   2
0016    IST          3
0017    JMP      3 => 0023
0018    KPRI     3   1
0019    KSTR     4   3      ; "File already exists: "
0020    MOV      5   1
0021    CAT      4   4   5
0022    RET      3   3
0023 => UGET     3   0      ; fs
0024    TGETS    3   3   4  ; "copy"
0025    MOV      4   0
0026    MOV      5   1
0027    MOV      6   2
0028    CALL     3   3   4
0029    IST          3
0030    JMP      5 => 0034
0031    KPRI     5   1
0032    MOV      6   4
0033    RET      5   3
0034 => UGET     5   0      ; fs
0035    TGETS    5   5   5  ; "delete"
0036    MOV      6   0
0037    CALL     5   1   2
0038    UGET     5   0      ; fs
0039    TGETS    5   5   1  ; "exists"
0040    MOV      6   0
0041    CALL     5   2   2
0042    ISF          5
0043    JMP      6 => 0050
0044    KPRI     5   1
0045    KSTR     6   6      ; "Failed move: could not delete "
0046    MOV      7   0
0047    KSTR     8   7      ; " after copy."
0048    CAT      6   6   8
0049    RET      5   3
0050 => KPRI     5   2
0051    RET1     5   2

-- BYTECODE -- lua.lua:1112-1148
0001    KPRI     1   2
0002    KSTR     2   0      ; ""
0003    GGET     3   1      ; "ipairs"
0004    TNEW     4   5
0005    UGET     5   0      ; cfg
0006    TGETS    5   5   2  ; "rocks_dir"
0007    TSETB    5   4   1
0008    UGET     5   0      ; cfg
0009    TGETS    5   5   3  ; "deploy_lua_dir"
0010    TSETB    5   4   2
0011    UGET     5   0      ; cfg
0012    TGETS    5   5   4  ; "deploy_bin_dir"
0013    TSETB    5   4   3
0014    UGET     5   0      ; cfg
0015    TGETS    5   5   3  ; "deploy_lua_dir"
0016    TSETB    5   4   4
0017    CALL     3   4   2
0018    JMP      6 => 0071
0019 => UGET     8   1      ; fs
0020    TGETS    8   8   5  ; "exists"
0021    MOV      9   7
0022    CALL     8   2   2
0023    ISF          8
0024    JMP      9 => 0037
0025    UGET     8   1      ; fs
0026    TGETS    8   8   6  ; "is_writable"
0027    MOV      9   7
0028    CALL     8   2   2
0029    IST          8
0030    JMP      8 => 0071
0031    KPRI     1   1
0032    KSTR     8   7      ; "Your user does not have write permission"~
0033    MOV      9   7
0034    CAT      2   8   9
0035    JMP      3 => 0073
0036    JMP      8 => 0071
0037 => UGET     8   1      ; fs
0038    TGETS    8   8   8  ; "root_of"
0039    MOV      9   7
0040    CALL     8   2   2
0041    MOV      9   7
0042 => LOOP    10 => 0059
0043    UGET    10   2      ; dir
0044    TGETS   10  10   9  ; "dir_name"
0045    MOV     11   9
0046    CALL    10   2   2
0047    MOV      9  10
0048    ISNES    9   0      ; ""
0049    JMP     10 => 0051
0050    MOV      9   8
0051 => ISEQV    9   8
0052    JMP     10 => 0059
0053    UGET    10   1      ; fs
0054    TGETS   10  10   5  ; "exists"
0055    MOV     11   9
0056    CALL    10   2   2
0057    ISF         10
0058    JMP     11 => 0042
0059 => UGET    10   1      ; fs
0060    TGETS   10  10   6  ; "is_writable"
0061    MOV     11   9
0062    CALL    10   2   2
0063    IST         10
0064    JMP     10 => 0071
0065    KPRI     1   1
0066    MOV     10   7
0067    KSTR    11  10      ; " does not exist and your user does not h"~
0068    MOV     12   9
0069    CAT      2  10  12
0070    JMP      3 => 0073
0071 => ITERC    6   3   3
0072    ITERL    6 => 0019
0073 => ISF          1
0074    JMP      3 => 0078
0075    KPRI     3   2
0076    RET1     3   2
0077    JMP      3 => 0095
0078 => TGETS    3   0  11  ; "local"
0079    IST          3
0080    JMP      4 => 0085
0081    UGET     3   0      ; cfg
0082    TGETS    3   3  12  ; "local_by_default"
0083    ISF          3
0084    JMP      4 => 0089
0085 => MOV      3   2
0086    KSTR     4  13      ; " \n-- please check your permissions."
0087    CAT      2   3   4
0088    JMP      3 => 0092
0089 => MOV      3   2
0090    KSTR     4  14      ; " \n-- you may want to run as a privilege"~
0091    CAT      2   3   4
0092 => KPRI     3   0
0093    MOV      4   2
0094    RET      3   3
0095 => RET0     0   1

-- BYTECODE -- lua.lua:1155-1161
0001    MOV      2   0
0002    TGETS    1   0   0  ; "gsub"
0003    KSTR     3   1      ; "%\"
0004    KSTR     4   2      ; "/"
0005    CALL     1   2   4
0006    MOV      0   1
0007    UGET     1   0      ; fs
0008    TGETS    1   1   3  ; "Q"
0009    UGET     2   1      ; dir
0010    TGETS    2   2   4  ; "path"
0011    UGET     3   2      ; cfg
0012    TGETS    3   3   5  ; "variables"
0013    TGETS    3   3   6  ; "LUA_BINDIR"
0014    UGET     4   2      ; cfg
0015    TGETS    4   4   7  ; "lua_interpreter"
0016    CALL     2   0   3
0017    CALLM    1   2   0
0018    UGET     2   0      ; fs
0019    TGETS    2   2   8  ; "execute_string"
0020    MOV      3   1
0021    KSTR     4   9      ; " -e "if loadfile('"
0022    MOV      5   0
0023    KSTR     6  10      ; "') then os.exit(0) else os.exit(1) end""
0024    CAT      3   3   6
0025    CALL     2   2   2
0026    ISEQP    2   2
0027    JMP      3 => 0030
0028    KPRI     3   1
0029    JMP      4 => 0031
0030 => KPRI     3   2
0031 => RET1     3   2

-- BYTECODE -- lua.lua:1168-1203
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    KNIL     1   2
0012    UGET     3   0      ; fs
0013    TGETS    3   3   3  ; "absolute_name"
0014    MOV      4   0
0015    CALL     3   2   2
0016    MOV      0   3
0017    MOV      4   0
0018    TGETS    3   0   4  ; "match"
0019    KSTR     5   5      ; "%.tar%.gz$"
0020    CALL     3   2   3
0021    ISF          3
0022    JMP      4 => 0045
0023    MOV      4   0
0024    TGETS    3   0   6  ; "gsub"
0025    KSTR     5   7      ; "%.gz$"
0026    KSTR     6   8      ; ""
0027    CALL     3   2   4
0028    UGET     4   0      ; fs
0029    TGETS    4   4   9  ; "gunzip"
0030    MOV      5   0
0031    MOV      6   3
0032    CALL     4   3   3
0033    MOV      2   5
0034    MOV      1   4
0035    ISF          1
0036    JMP      4 => 0135
0037    UGET     4   1      ; tar
0038    TGETS    4   4  10  ; "untar"
0039    MOV      5   3
0040    KSTR     6  11      ; "."
0041    CALL     4   3   3
0042    MOV      2   5
0043    MOV      1   4
0044    JMP      3 => 0135
0045 => MOV      4   0
0046    TGETS    3   0   4  ; "match"
0047    KSTR     5  12      ; "%.tgz$"
0048    CALL     3   2   3
0049    ISF          3
0050    JMP      4 => 0073
0051    MOV      4   0
0052    TGETS    3   0   6  ; "gsub"
0053    KSTR     5  12      ; "%.tgz$"
0054    KSTR     6  13      ; ".tar"
0055    CALL     3   2   4
0056    UGET     4   0      ; fs
0057    TGETS    4   4   9  ; "gunzip"
0058    MOV      5   0
0059    MOV      6   3
0060    CALL     4   3   3
0061    MOV      2   5
0062    MOV      1   4
0063    ISF          1
0064    JMP      4 => 0135
0065    UGET     4   1      ; tar
0066    TGETS    4   4  10  ; "untar"
0067    MOV      5   3
0068    KSTR     6  11      ; "."
0069    CALL     4   3   3
0070    MOV      2   5
0071    MOV      1   4
0072    JMP      3 => 0135
0073 => MOV      4   0
0074    TGETS    3   0   4  ; "match"
0075    KSTR     5  14      ; "%.tar%.bz2$"
0076    CALL     3   2   3
0077    ISF          3
0078    JMP      4 => 0101
0079    MOV      4   0
0080    TGETS    3   0   6  ; "gsub"
0081    KSTR     5  15      ; "%.bz2$"
0082    KSTR     6   8      ; ""
0083    CALL     3   2   4
0084    UGET     4   0      ; fs
0085    TGETS    4   4  16  ; "bunzip2"
0086    MOV      5   0
0087    MOV      6   3
0088    CALL     4   3   3
0089    MOV      2   5
0090    MOV      1   4
0091    ISF          1
0092    JMP      4 => 0135
0093    UGET     4   1      ; tar
0094    TGETS    4   4  10  ; "untar"
0095    MOV      5   3
0096    KSTR     6  11      ; "."
0097    CALL     4   3   3
0098    MOV      2   5
0099    MOV      1   4
0100    JMP      3 => 0135
0101 => MOV      4   0
0102    TGETS    3   0   4  ; "match"
0103    KSTR     5  17      ; "%.zip$"
0104    CALL     3   2   3
0105    ISF          3
0106    JMP      4 => 0114
0107    UGET     3   0      ; fs
0108    TGETS    3   3  18  ; "unzip"
0109    MOV      4   0
0110    CALL     3   3   2
0111    MOV      2   4
0112    MOV      1   3
0113    JMP      3 => 0135
0114 => MOV      4   0
0115    TGETS    3   0   4  ; "match"
0116    KSTR     5  19      ; "%.lua$"
0117    CALL     3   2   3
0118    IST          3
0119    JMP      4 => 0126
0120    MOV      4   0
0121    TGETS    3   0   4  ; "match"
0122    KSTR     5  20      ; "%.c$"
0123    CALL     3   2   3
0124    ISF          3
0125    JMP      4 => 0129
0126 => KPRI     3   2
0127    RET1     3   2
0128    JMP      3 => 0135
0129 => KPRI     3   1
0130    KSTR     4  21      ; "Couldn't extract archive "
0131    MOV      5   0
0132    KSTR     6  22      ; ": unrecognized filename extension"
0133    CAT      4   4   6
0134    RET      3   3
0135 => IST          1
0136    JMP      3 => 0144
0137    KPRI     3   1
0138    KSTR     4  23      ; "Failed extracting "
0139    MOV      5   0
0140    KSTR     6  24      ; ": "
0141    MOV      7   2
0142    CAT      4   4   7
0143    RET      3   3
0144 => KPRI     3   2
0145    RET1     3   2

-- BYTECODE -- lua.lua:0-1206
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.util"
0013    CALL     4   2   2
0014    KNIL     5  18
0015    TGETS   19   2   5  ; "fs_use_modules"
0016    ISF         19
0017    JMP     20 => 0060
0018    GGET    19   6      ; "pcall"
0019    GGET    20   0      ; "require"
0020    KSTR    21   7      ; "socket.http"
0021    CALL    19   3   3
0022    MOV     12  20
0023    MOV      5  19
0024    GGET    19   6      ; "pcall"
0025    GGET    20   0      ; "require"
0026    KSTR    21   8      ; "socket.ftp"
0027    CALL    19   3   3
0028    MOV     13  20
0029    MOV     11  19
0030    GGET    19   6      ; "pcall"
0031    GGET    20   0      ; "require"
0032    KSTR    21   9      ; "luarocks.tools.zip"
0033    CALL    19   3   3
0034    MOV     14  20
0035    MOV      6  19
0036    GGET    19   6      ; "pcall"
0037    GGET    20   0      ; "require"
0038    KSTR    21  10      ; "bz2"
0039    CALL    19   3   3
0040    MOV     18  20
0041    MOV     10  19
0042    GGET    19   6      ; "pcall"
0043    GGET    20   0      ; "require"
0044    KSTR    21  11      ; "lfs"
0045    CALL    19   3   3
0046    MOV     15  20
0047    MOV      7  19
0048    GGET    19   6      ; "pcall"
0049    GGET    20   0      ; "require"
0050    KSTR    21  12      ; "md5"
0051    CALL    19   3   3
0052    MOV     16  20
0053    MOV      8  19
0054    GGET    19   6      ; "pcall"
0055    GGET    20   0      ; "require"
0056    KSTR    21  13      ; "posix"
0057    CALL    19   3   3
0058    MOV     17  20
0059    MOV      9  19
0060 => GGET    19   0      ; "require"
0061    KSTR    20  14      ; "luarocks.tools.patch"
0062    CALL    19   2   2
0063    GGET    20   0      ; "require"
0064    KSTR    21  15      ; "luarocks.tools.tar"
0065    CALL    20   2   2
0066    TNEW    21   0
0067    FNEW    22  17      ; lua.lua:37
0068    TSETS   22   0  16  ; "is_writable"
0069    FNEW    22  18      ; lua.lua:55
0070    FNEW    23  20      ; lua.lua:71
0071    TSETS   23   0  19  ; "execute"
0072    FNEW    23  22      ; lua.lua:84
0073    TSETS   23   0  21  ; "execute_quiet"
0074    FNEW    23  24      ; lua.lua:93
0075    TSETS   23   1  23  ; "execute_env"
0076    TNEW    23   0
0077    FNEW    24  26      ; lua.lua:104
0078    TSETS   24   0  25  ; "set_tool_available"
0079    FNEW    24  28      ; lua.lua:114
0080    TSETS   24   0  27  ; "is_tool_available"
0081    FNEW    24  30      ; lua.lua:143
0082    TSETS   24   0  29  ; "check_md5"
0083    FNEW    24  32      ; lua.lua:161
0084    TSETS   24   0  31  ; "list_dir"
0085    FNEW    24  34      ; lua.lua:174
0086    TSETS   24   0  33  ; "dir"
0087    FNEW    24  36      ; lua.lua:188
0088    TSETS   24   0  35  ; "modules"
0089    FNEW    24  38      ; lua.lua:230
0090    TSETS   24   0  37  ; "filter_file"
0091    FNEW    24  40      ; lua.lua:261
0092    TSETS   24   0  39  ; "system_temp_dir"
0093    ISF          7
0094    JMP     24 => 0134
0095    FNEW    24  42      ; lua.lua:276
0096    TSETS   24   0  41  ; "execute_string"
0097    FNEW    24  44      ; lua.lua:284
0098    TSETS   24   0  43  ; "current_dir"
0099    FNEW    24  46      ; lua.lua:293
0100    TSETS   24   0  45  ; "change_dir"
0101    FNEW    24  48      ; lua.lua:302
0102    TSETS   24   0  47  ; "change_dir_to_root"
0103    FNEW    24  50      ; lua.lua:314
0104    TSETS   24   0  49  ; "pop_dir"
0105    FNEW    24  52      ; lua.lua:329
0106    TSETS   24   0  51  ; "make_dir"
0107    FNEW    24  54      ; lua.lua:364
0108    TSETS   24   0  53  ; "remove_dir_if_empty"
0109    FNEW    24  56      ; lua.lua:374
0110    TSETS   24   0  55  ; "remove_dir_tree_if_empty"
0111    FNEW    24  57      ; lua.lua:383
0112    FNEW    25  59      ; lua.lua:404
0113    TSETS   25   0  58  ; "copy"
0114    FNEW    25  60      ; lua.lua:448
0115    FNEW    26  62      ; lua.lua:477
0116    TSETS   26   0  61  ; "copy_contents"
0117    FNEW    26  63      ; lua.lua:503
0118    FNEW    27  65      ; lua.lua:526
0119    TSETS   27   0  64  ; "delete"
0120    FNEW    27  67      ; lua.lua:535
0121    TSETS   27   0  66  ; "dir_iterator"
0122    FNEW    27  68      ; lua.lua:552
0123    FNEW    28  70      ; lua.lua:574
0124    TSETS   28   0  69  ; "find"
0125    FNEW    28  72      ; lua.lua:588
0126    TSETS   28   0  71  ; "exists"
0127    FNEW    28  74      ; lua.lua:597
0128    TSETS   28   0  73  ; "is_dir"
0129    FNEW    28  76      ; lua.lua:606
0130    TSETS   28   0  75  ; "is_file"
0131    FNEW    28  78      ; lua.lua:617
0132    TSETS   28   0  77  ; "set_time"
0133    UCLO    24 => 0136
0134 => FNEW    24  79      ; lua.lua:628
0135    TSETS   24   0  71  ; "exists"
0136 => ISF         10
0137    JMP     24 => 0142
0138    FNEW    24  80      ; lua.lua:643
0139    FNEW    25  82      ; lua.lua:658
0140    TSETS   25   0  81  ; "bunzip2"
0141    UCLO    24 => 0142
0142 => ISF          6
0143    JMP     24 => 0150
0144    FNEW    24  84      ; lua.lua:676
0145    TSETS   24   0  83  ; "zip"
0146    FNEW    24  86      ; lua.lua:680
0147    TSETS   24   0  85  ; "unzip"
0148    FNEW    24  88      ; lua.lua:684
0149    TSETS   24   0  87  ; "gunzip"
0150 => ISF          5
0151    JMP     24 => 0175
0152    GGET    24   0      ; "require"
0153    KSTR    25  89      ; "ltn12"
0154    CALL    24   2   2
0155    GGET    25   6      ; "pcall"
0156    GGET    26   0      ; "require"
0157    KSTR    27  90      ; "ssl.https"
0158    CALL    25   3   3
0159    TDUP    27  91
0160    TSETS   12  27  92  ; "http"
0161    ISFC    28  25
0162    JMP     28 => 0164
0163    MOV     28  26
0164 => TSETS   28  27  93  ; "https"
0165    FNEW    28  94      ; lua.lua:704
0166    FNEW    29  95      ; lua.lua:774
0167    FNEW    30  96      ; lua.lua:782
0168    FNEW    31  97      ; lua.lua:791
0169    FNEW    32  98      ; lua.lua:804
0170    FNEW    33  99      ; lua.lua:852
0171    KPRI    34   1
0172    FNEW    35 101      ; lua.lua:880
0173    TSETS   35   0 100  ; "download"
0174    UCLO    24 => 0177
0175 => FNEW    24 102      ; lua.lua:922
0176    TSETS   24   0 100  ; "download"
0177 => ISF          8
0178    JMP     24 => 0192
0179    TGETS   24  16 103  ; "sumhexa"
0180    IST         24
0181    JMP     24 => 0187
0182    TGETS   24  16 104  ; "digest"
0183    ISF         24
0184    JMP     25 => 0187
0185    FNEW    24 105      ; lua.lua:936
0186    TSETS   24  16 103  ; "sumhexa"
0187 => TGETS   24  16 103  ; "sumhexa"
0188    ISF         24
0189    JMP     25 => 0192
0190    FNEW    24 107      ; lua.lua:946
0191    TSETS   24   0 106  ; "get_md5"
0192 => FNEW    24 109      ; lua.lua:963
0193    TSETS   24   0 108  ; "_unix_rwx_to_number"
0194    ISF          9
0195    JMP     24 => 0211
0196    TDUP    24 110
0197    KPRI    25   0
0198    FNEW    26 112      ; lua.lua:990
0199    TSETS   26   0 111  ; "_unix_umask"
0200    UCLO    25 => 0201
0201 => FNEW    25 114      ; lua.lua:1002
0202    TSETS   25   0 113  ; "set_permissions"
0203    FNEW    25 116      ; lua.lua:1026
0204    TSETS   25   0 115  ; "current_user"
0205    TGETS   25  17 117  ; "mkdtemp"
0206    ISF         25
0207    JMP     26 => 0210
0208    FNEW    25 119      ; lua.lua:1037
0209    TSETS   25   0 118  ; "make_temp_dir"
0210 => UCLO    24 => 0211
0211 => ISF          7
0212    JMP     24 => 0218
0213    TGETS   24   0 118  ; "make_temp_dir"
0214    IST         24
0215    JMP     24 => 0218
0216    FNEW    24 120      ; lua.lua:1054
0217    TSETS   24   0 118  ; "make_temp_dir"
0218 => FNEW    24 122      ; lua.lua:1074
0219    TSETS   24   0 121  ; "apply_patch"
0220    FNEW    24 124      ; lua.lua:1091
0221    TSETS   24   0 123  ; "move"
0222    FNEW    24 126      ; lua.lua:1112
0223    TSETS   24   0 125  ; "check_command_permissions"
0224    FNEW    24 128      ; lua.lua:1155
0225    TSETS   24   0 127  ; "is_lua"
0226    FNEW    24 130      ; lua.lua:1168
0227    TSETS   24   0 129  ; "unpack_archive"
0228    UCLO     0 => 0229
0229 => RET1     0   2

-----------------------
-- BYTECODE -- macosx.lua:7-28
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "absolute_name"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    UGET     1   1      ; dir
0007    TGETS    1   1   1  ; "normalize"
0008    MOV      2   0
0009    CALL     1   2   2
0010    KSTR     2   2      ; "/."
0011    CAT      0   1   2
0012    GGET     1   3      ; "io"
0013    TGETS    1   1   4  ; "open"
0014    MOV      2   0
0015    KSTR     3   5      ; "r"
0016    CALL     1   4   3
0017    ISNEN    3   0      ; 2
0018    JMP      4 => 0021
0019    KPRI     4   1
0020    RET1     4   2
0021 => ISNEN    3   1      ; 20
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    RET1     4   2
0025 => ISNEN    3   2      ; 13
0026    JMP      4 => 0029
0027    KPRI     4   2
0028    RET1     4   2
0029 => ISF          1
0030    JMP      4 => 0042
0031    MOV      5   1
0032    TGETS    4   1   6  ; "read"
0033    KSHORT   6   1
0034    CALL     4   4   3
0035    MOV      8   1
0036    TGETS    7   1   7  ; "close"
0037    CALL     7   1   2
0038    ISNEN    6   3      ; 21
0039    JMP      7 => 0042
0040    KPRI     7   2
0041    RET1     7   2
0042 => KPRI     4   1
0043    RET1     4   2

-- BYTECODE -- macosx.lua:30-48
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "absolute_name"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    UGET     1   0      ; fs
0007    TGETS    1   1   1  ; "is_dir"
0008    MOV      2   0
0009    CALL     1   2   2
0010    ISF          1
0011    JMP      2 => 0014
0012    KPRI     1   1
0013    RET1     1   2
0014 => UGET     1   1      ; dir
0015    TGETS    1   1   2  ; "normalize"
0016    MOV      2   0
0017    CALL     1   2   2
0018    MOV      0   1
0019    GGET     1   3      ; "io"
0020    TGETS    1   1   4  ; "open"
0021    MOV      2   0
0022    KSTR     3   5      ; "r"
0023    CALL     1   4   3
0024    ISNEN    3   0      ; 2
0025    JMP      4 => 0028
0026    KPRI     4   1
0027    RET1     4   2
0028 => ISNEN    3   1      ; 13
0029    JMP      4 => 0032
0030    KPRI     4   2
0031    RET1     4   2
0032 => ISF          1
0033    JMP      4 => 0039
0034    MOV      5   1
0035    TGETS    4   1   6  ; "close"
0036    CALL     4   1   2
0037    KPRI     4   2
0038    RET1     4   2
0039 => KPRI     4   1
0040    RET1     4   2

-- BYTECODE -- macosx.lua:0-51
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    FNEW     3   4      ; macosx.lua:7
0009    TSETS    3   0   3  ; "is_dir"
0010    FNEW     3   6      ; macosx.lua:30
0011    TSETS    3   0   5  ; "is_file"
0012    UCLO     0 => 0013
0013 => RET1     0   2

-----------------------
-- BYTECODE -- freebsd.lua:6-9
0001    UGET     0   0      ; fs
0002    TGETS    0   0   0  ; "set_tool_available"
0003    KSTR     1   1      ; "zip"
0004    KPRI     2   2
0005    CALL     0   1   3
0006    UGET     0   0      ; fs
0007    TGETS    0   0   0  ; "set_tool_available"
0008    KSTR     1   2      ; "unzip"
0009    KPRI     2   2
0010    CALL     0   1   3
0011    RET0     0   1

-- BYTECODE -- freebsd.lua:0-12
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    FNEW     2   3      ; freebsd.lua:6
0006    TSETS    2   0   2  ; "init"
0007    UCLO     0 => 0008
0008 => RET1     0   2

-----------------------
-- BYTECODE -- linux.lua:7-28
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "absolute_name"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    UGET     1   1      ; dir
0007    TGETS    1   1   1  ; "normalize"
0008    MOV      2   0
0009    CALL     1   2   2
0010    KSTR     2   2      ; "/."
0011    CAT      0   1   2
0012    GGET     1   3      ; "io"
0013    TGETS    1   1   4  ; "open"
0014    MOV      2   0
0015    KSTR     3   5      ; "r"
0016    CALL     1   4   3
0017    ISNEN    3   0      ; 2
0018    JMP      4 => 0021
0019    KPRI     4   1
0020    RET1     4   2
0021 => ISNEN    3   1      ; 20
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    RET1     4   2
0025 => ISNEN    3   2      ; 13
0026    JMP      4 => 0029
0027    KPRI     4   2
0028    RET1     4   2
0029 => ISF          1
0030    JMP      4 => 0042
0031    MOV      5   1
0032    TGETS    4   1   6  ; "read"
0033    KSHORT   6   1
0034    CALL     4   4   3
0035    MOV      8   1
0036    TGETS    7   1   7  ; "close"
0037    CALL     7   1   2
0038    ISNEN    6   3      ; 21
0039    JMP      7 => 0042
0040    KPRI     7   2
0041    RET1     7   2
0042 => KPRI     4   1
0043    RET1     4   2

-- BYTECODE -- linux.lua:30-48
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "absolute_name"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    UGET     1   0      ; fs
0007    TGETS    1   1   1  ; "is_dir"
0008    MOV      2   0
0009    CALL     1   2   2
0010    ISF          1
0011    JMP      2 => 0014
0012    KPRI     1   1
0013    RET1     1   2
0014 => UGET     1   1      ; dir
0015    TGETS    1   1   2  ; "normalize"
0016    MOV      2   0
0017    CALL     1   2   2
0018    MOV      0   1
0019    GGET     1   3      ; "io"
0020    TGETS    1   1   4  ; "open"
0021    MOV      2   0
0022    KSTR     3   5      ; "r"
0023    CALL     1   4   3
0024    ISNEN    3   0      ; 2
0025    JMP      4 => 0028
0026    KPRI     4   1
0027    RET1     4   2
0028 => ISNEN    3   1      ; 13
0029    JMP      4 => 0032
0030    KPRI     4   2
0031    RET1     4   2
0032 => ISF          1
0033    JMP      4 => 0039
0034    MOV      5   1
0035    TGETS    4   1   6  ; "close"
0036    CALL     4   1   2
0037    KPRI     4   2
0038    RET1     4   2
0039 => KPRI     4   1
0040    RET1     4   2

-- BYTECODE -- linux.lua:0-51
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    FNEW     3   4      ; linux.lua:7
0009    TSETS    3   0   3  ; "is_dir"
0010    FNEW     3   6      ; linux.lua:30
0011    TSETS    3   0   5  ; "is_file"
0012    UCLO     0 => 0013
0013 => RET1     0   2

-----------------------
-- BYTECODE -- tools.lua:9-9
0001    UGET     2   0      ; cfg
0002    TGETS    2   2   0  ; "variables"
0003    TGETV    2   2   1
0004    RET1     2   2

-- BYTECODE -- tools.lua:28-43
0001    UGET     1   0      ; tool_cache
0002    TGETV    1   1   0
0003    IST          1
0004    JMP      2 => 0026
0005    GGET     2   0      ; "ipairs"
0006    UGET     3   1      ; tool_options
0007    TGETV    3   3   0
0008    CALL     2   4   2
0009    JMP      5 => 0024
0010 => UGET     7   2      ; fs
0011    TGETS    7   7   1  ; "is_tool_available"
0012    UGET     8   3      ; vars
0013    TGETS    9   6   2  ; "var"
0014    TGETV    8   8   9
0015    TGETS    9   6   3  ; "name"
0016    TGETS   10   6   4  ; "checkarg"
0017    CALL     7   2   4
0018    ISF          7
0019    JMP      8 => 0024
0020    MOV      1   6
0021    UGET     7   0      ; tool_cache
0022    TSETV    6   7   0
0023    JMP      2 => 0026
0024 => ITERC    5   3   3
0025    ITERL    5 => 0010
0026 => IST          1
0027    JMP      2 => 0030
0028    KPRI     2   0
0029    RET1     2   2
0030 => TGETS    2   1   3  ; "name"
0031    UGET     3   3      ; vars
0032    TGETS    4   1   2  ; "var"
0033    TGETV    3   3   4
0034    TGETS    4   1   5  ; "cmdarg"
0035    ISF          4
0036    JMP      5 => 0042
0037    KSTR     4   6      ; " "
0038    TGETS    5   1   5  ; "cmdarg"
0039    CAT      4   4   5
0040    IST          4
0041    JMP      5 => 0043
0042 => KSTR     4   7      ; ""
0043 => CAT      3   3   4
0044    RET      2   3

-- BYTECODE -- tools.lua:51-63
0001    UGET     0   0      ; cache_pwd
0002    IST          0
0003    JMP      1 => 0021
0004    GGET     1   0      ; "io"
0005    TGETS    1   1   1  ; "popen"
0006    UGET     2   1      ; fs
0007    TGETS    2   2   2  ; "quiet_stderr"
0008    UGET     3   2      ; vars
0009    TGETS    3   3   3  ; "PWD"
0010    CALL     2   0   2
0011    CALLM    1   2   0
0012    MOV      3   1
0013    TGETS    2   1   4  ; "read"
0014    KSTR     4   5      ; "*l"
0015    CALL     2   2   3
0016    MOV      0   2
0017    MOV      3   1
0018    TGETS    2   1   6  ; "close"
0019    CALL     2   1   2
0020    USETV    0   0      ; cache_pwd
0021 => GGET     1   7      ; "ipairs"
0022    UGET     2   3      ; dir_stack
0023    CALL     1   4   2
0024    JMP      4 => 0031
0025 => UGET     6   1      ; fs
0026    TGETS    6   6   8  ; "absolute_name"
0027    MOV      7   5
0028    MOV      8   0
0029    CALL     6   2   3
0030    MOV      0   6
0031 => ITERC    4   3   3
0032    ITERL    4 => 0025
0033    RET1     0   2

-- BYTECODE -- tools.lua:72-79
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; fs
0012    TGETS    1   1   3  ; "is_dir"
0013    MOV      2   0
0014    CALL     1   2   2
0015    ISF          1
0016    JMP      2 => 0024
0017    GGET     1   4      ; "table"
0018    TGETS    1   1   5  ; "insert"
0019    UGET     2   1      ; dir_stack
0020    MOV      3   0
0021    CALL     1   1   3
0022    KPRI     1   2
0023    RET1     1   2
0024 => KPRI     1   0
0025    KSTR     2   6      ; "directory not found: "
0026    MOV      3   0
0027    CAT      2   2   3
0028    RET      1   3

-- BYTECODE -- tools.lua:84-91
0001    UGET     0   0      ; fs
0002    TGETS    0   0   0  ; "current_dir"
0003    CALL     0   2   1
0004    ISF          0
0005    JMP      1 => 0012
0006    UGET     1   0      ; fs
0007    TGETS    1   1   1  ; "is_dir"
0008    MOV      2   0
0009    CALL     1   2   2
0010    IST          1
0011    JMP      1 => 0014
0012 => KPRI     1   1
0013    RET1     1   2
0014 => GGET     1   2      ; "table"
0015    TGETS    1   1   3  ; "insert"
0016    UGET     2   1      ; dir_stack
0017    KSTR     3   4      ; "/"
0018    CALL     1   1   3
0019    KPRI     1   2
0020    RET1     1   2

-- BYTECODE -- tools.lua:94-97
0001    GGET     0   0      ; "table"
0002    TGETS    0   0   1  ; "remove"
0003    UGET     1   0      ; dir_stack
0004    CALL     0   2   2
0005    ISNEP    0   0
0006    JMP      1 => 0009
0007    KPRI     1   1
0008    JMP      2 => 0010
0009 => KPRI     1   2
0010 => RET1     1   2

-- BYTECODE -- tools.lua:104-114
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "current_dir"
0003    CALL     1   2   1
0004    IST          1
0005    JMP      2 => 0008
0006    KPRI     2   1
0007    RET1     2   2
0008 => UGET     2   0      ; fs
0009    TGETS    2   2   1  ; "command_at"
0010    MOV      3   1
0011    MOV      4   0
0012    CALL     2   2   3
0013    MOV      0   2
0014    GGET     2   2      ; "os"
0015    TGETS    2   2   3  ; "execute"
0016    MOV      3   0
0017    CALL     2   2   2
0018    ISEQN    2   0      ; 0
0019    JMP      3 => 0022
0020    ISNEP    2   2
0021    JMP      3 => 0025
0022 => KPRI     3   2
0023    RET1     3   2
0024    JMP      3 => 0027
0025 => KPRI     3   1
0026    RET1     3   2
0027 => RET0     0   1

-- BYTECODE -- tools.lua:120-128
0001    GGET     1   0      ; "io"
0002    TGETS    1   1   1  ; "popen"
0003    UGET     2   0      ; fs
0004    TGETS    2   2   2  ; "command_at"
0005    MOV      3   0
0006    UGET     4   1      ; vars
0007    TGETS    4   4   3  ; "LS"
0008    KPRI     5   2
0009    CALL     2   0   4
0010    CALLM    1   2   0
0011    MOV      3   1
0012    TGETS    2   1   4  ; "lines"
0013    CALL     2   4   2
0014    JMP      5 => 0023
0015 => ISEQS    5   5      ; "."
0016    JMP      6 => 0023
0017    ISEQS    5   6      ; ".."
0018    JMP      6 => 0023
0019    GGET     6   7      ; "coroutine"
0020    TGETS    6   6   8  ; "yield"
0021    MOV      7   5
0022    CALL     6   1   2
0023 => ITERC    5   2   3
0024    ITERL    5 => 0015
0025    MOV      3   1
0026    TGETS    2   1   9  ; "close"
0027    CALL     2   1   2
0028    RET0     0   1

-- BYTECODE -- tools.lua:140-184
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0021
0017    NOT      4   1
0018    JMP      5 => 0022
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    UGET     3   0      ; fs
0024    TGETS    3   3   3  ; "absolute_name"
0025    ISTC     4   1
0026    JMP      4 => 0031
0027    UGET     4   1      ; dir
0028    TGETS    4   4   4  ; "base_name"
0029    MOV      5   0
0030    CALL     4   2   2
0031 => CALL     3   2   2
0032    MOV      1   3
0033    UGET     3   0      ; fs
0034    TGETS    3   3   5  ; "which_tool"
0035    KSTR     4   6      ; "downloader"
0036    CALL     3   2   2
0037    KPRI     4   0
0038    ISNES    3   7      ; "wget"
0039    JMP      5 => 0113
0040    UGET     5   2      ; vars
0041    TGETS    5   5   8  ; "WGET"
0042    KSTR     6   9      ; " "
0043    UGET     7   2      ; vars
0044    TGETS    7   7  10  ; "WGETNOCERTFLAG"
0045    KSTR     8  11      ; " --no-cache --user-agent=""
0046    UGET     9   3      ; cfg
0047    TGETS    9   9  12  ; "user_agent"
0048    KSTR    10  13      ; " via wget" --quiet "
0049    CAT      5   5  10
0050    UGET     6   3      ; cfg
0051    TGETS    6   6  14  ; "connection_timeout"
0052    ISF          6
0053    JMP      7 => 0067
0054    UGET     6   3      ; cfg
0055    TGETS    6   6  14  ; "connection_timeout"
0056    KSHORT   7   0
0057    ISGE     7   6
0058    JMP      6 => 0067
0059    MOV      6   5
0060    KSTR     7  15      ; "--timeout="
0061    GGET     8  16      ; "tostring"
0062    UGET     9   3      ; cfg
0063    TGETS    9   9  14  ; "connection_timeout"
0064    CALL     8   2   2
0065    KSTR     9  17      ; " --tries=1 "
0066    CAT      5   6   9
0067 => ISF          2
0068    JMP      6 => 0094
0069    UGET     6   0      ; fs
0070    TGETS    6   6  18  ; "delete"
0071    MOV      7   1
0072    KSTR     8  19      ; ".unixtime"
0073    CAT      7   7   8
0074    CALL     6   1   2
0075    UGET     6   0      ; fs
0076    TGETS    6   6  20  ; "change_dir"
0077    UGET     7   1      ; dir
0078    TGETS    7   7  21  ; "dir_name"
0079    MOV      8   1
0080    CALL     7   0   2
0081    CALLM    6   1   0
0082    UGET     6   0      ; fs
0083    TGETS    6   6  22  ; "execute_quiet"
0084    MOV      7   5
0085    KSTR     8  23      ; " --timestamping "
0086    CAT      7   7   8
0087    MOV      8   0
0088    CALL     6   2   3
0089    MOV      4   6
0090    UGET     6   0      ; fs
0091    TGETS    6   6  24  ; "pop_dir"
0092    CALL     6   1   1
0093    JMP      6 => 0171
0094 => ISF          1
0095    JMP      6 => 0106
0096    UGET     6   0      ; fs
0097    TGETS    6   6  22  ; "execute_quiet"
0098    MOV      7   5
0099    KSTR     8  25      ; " --output-document "
0100    CAT      7   7   8
0101    MOV      8   1
0102    MOV      9   0
0103    CALL     6   2   4
0104    MOV      4   6
0105    JMP      6 => 0171
0106 => UGET     6   0      ; fs
0107    TGETS    6   6  22  ; "execute_quiet"
0108    MOV      7   5
0109    MOV      8   0
0110    CALL     6   2   3
0111    MOV      4   6
0112    JMP      5 => 0171
0113 => ISNES    3  26      ; "curl"
0114    JMP      5 => 0168
0115    UGET     5   2      ; vars
0116    TGETS    5   5  27  ; "CURL"
0117    KSTR     6   9      ; " "
0118    UGET     7   2      ; vars
0119    TGETS    7   7  28  ; "CURLNOCERTFLAG"
0120    KSTR     8  29      ; " -f -L --user-agent ""
0121    UGET     9   3      ; cfg
0122    TGETS    9   9  12  ; "user_agent"
0123    KSTR    10  30      ; " via curl" "
0124    CAT      5   5  10
0125    UGET     6   3      ; cfg
0126    TGETS    6   6  14  ; "connection_timeout"
0127    ISF          6
0128    JMP      7 => 0142
0129    UGET     6   3      ; cfg
0130    TGETS    6   6  14  ; "connection_timeout"
0131    KSHORT   7   0
0132    ISGE     7   6
0133    JMP      6 => 0142
0134    MOV      6   5
0135    KSTR     7  31      ; "--connect-timeout "
0136    GGET     8  16      ; "tostring"
0137    UGET     9   3      ; cfg
0138    TGETS    9   9  14  ; "connection_timeout"
0139    CALL     8   2   2
0140    KSTR     9   9      ; " "
0141    CAT      5   6   9
0142 => ISF          2
0143    JMP      6 => 0149
0144    MOV      6   5
0145    KSTR     7  32      ; " -R -z ""
0146    MOV      8   1
0147    KSTR     9  33      ; "" "
0148    CAT      5   6   9
0149 => UGET     6   0      ; fs
0150    TGETS    6   6  34  ; "execute_string"
0151    UGET     7   0      ; fs
0152    TGETS    7   7  35  ; "quiet_stderr"
0153    MOV      8   5
0154    UGET     9   0      ; fs
0155    TGETS    9   9  36  ; "Q"
0156    MOV     10   0
0157    CALL     9   2   2
0158    KSTR    10  37      ; " --output "
0159    UGET    11   0      ; fs
0160    TGETS   11  11  36  ; "Q"
0161    MOV     12   1
0162    CALL    11   2   2
0163    CAT      8   8  11
0164    CALL     7   0   2
0165    CALLM    6   2   0
0166    MOV      4   6
0167    JMP      5 => 0171
0168 => KPRI     5   1
0169    KSTR     6  38      ; "No downloader tool available -- please i"~
0170    RET      5   3
0171 => ISF          4
0172    JMP      5 => 0177
0173    KPRI     5   2
0174    MOV      6   1
0175    RET      5   3
0176    JMP      5 => 0186
0177 => GGET     5  39      ; "os"
0178    TGETS    5   5  40  ; "remove"
0179    MOV      6   1
0180    CALL     5   1   2
0181    KPRI     5   1
0182    KSTR     6  41      ; "Failed downloading "
0183    MOV      7   0
0184    CAT      6   6   7
0185    RET      5   3
0186 => RET0     0   1

-- BYTECODE -- tools.lua:189-206
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "which_tool"
0003    KSTR     2   1      ; "md5checker"
0004    CALL     1   3   2
0005    ISF          1
0006    JMP      3 => 0056
0007    GGET     3   2      ; "io"
0008    TGETS    3   3   3  ; "popen"
0009    MOV      4   2
0010    KSTR     5   4      ; " "
0011    UGET     6   0      ; fs
0012    TGETS    6   6   5  ; "Q"
0013    UGET     7   0      ; fs
0014    TGETS    7   7   6  ; "absolute_name"
0015    MOV      8   0
0016    CALL     7   0   2
0017    CALLM    6   2   0
0018    CAT      4   4   6
0019    CALL     3   2   2
0020    MOV      5   3
0021    TGETS    4   3   7  ; "read"
0022    KSTR     6   8      ; "*l"
0023    CALL     4   2   3
0024    MOV      6   3
0025    TGETS    5   3   9  ; "close"
0026    CALL     5   1   2
0027    ISF          4
0028    JMP      5 => 0041
0029    MOV      6   4
0030    TGETS    5   4  10  ; "match"
0031    KSTR     7  11      ; "("
0032    KSTR     8  12      ; "%x"
0033    MOV      9   8
0034    TGETS    8   8  13  ; "rep"
0035    KSHORT  10  32
0036    CALL     8   2   3
0037    KSTR     9  14      ; ")"
0038    CAT      7   7   9
0039    CALL     5   2   3
0040    MOV      4   5
0041 => ISF          4
0042    JMP      5 => 0045
0043    RET1     4   2
0044    JMP      5 => 0059
0045 => KPRI     5   0
0046    KSTR     6  15      ; "Failed to compute MD5 hash for file "
0047    GGET     7  16      ; "tostring"
0048    UGET     8   0      ; fs
0049    TGETS    8   8   6  ; "absolute_name"
0050    MOV      9   0
0051    CALL     8   0   2
0052    CALLM    7   2   0
0053    CAT      6   6   7
0054    RET      5   3
0055    JMP      3 => 0059
0056 => KPRI     3   1
0057    KSTR     4  17      ; "No MD5 checking tool available -- please"~
0058    RET      3   3
0059 => RET0     0   1

-- BYTECODE -- tools.lua:0-209
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    GGET     4   4      ; "setmetatable"
0012    TNEW     5   0
0013    TDUP     6   6
0014    FNEW     7   5      ; tools.lua:9
0015    TSETS    7   6   7  ; "__index"
0016    CALL     4   2   3
0017    TNEW     5   0
0018    TNEW     6   0
0019    TDUP     7  10
0020    TNEW     8   3
0021    TDUP     9   8
0022    TSETB    9   8   1
0023    TDUP     9   9
0024    TSETB    9   8   2
0025    TSETS    8   7  11  ; "downloader"
0026    TNEW     8   4
0027    TDUP     9  12
0028    TSETB    9   8   1
0029    TDUP     9  13
0030    TSETB    9   8   2
0031    TDUP     9  14
0032    TSETB    9   8   3
0033    TSETS    8   7  15  ; "md5checker"
0034    FNEW     8  17      ; tools.lua:28
0035    TSETS    8   0  16  ; "which_tool"
0036    UCLO     6 => 0037
0037 => KPRI     6   0
0038    FNEW     7  19      ; tools.lua:51
0039    TSETS    7   0  18  ; "current_dir"
0040    UCLO     6 => 0041
0041 => FNEW     6  21      ; tools.lua:72
0042    TSETS    6   0  20  ; "change_dir"
0043    FNEW     6  23      ; tools.lua:84
0044    TSETS    6   0  22  ; "change_dir_to_root"
0045    FNEW     6  25      ; tools.lua:94
0046    TSETS    6   0  24  ; "pop_dir"
0047    FNEW     6  27      ; tools.lua:104
0048    TSETS    6   0  26  ; "execute_string"
0049    FNEW     6  29      ; tools.lua:120
0050    TSETS    6   0  28  ; "dir_iterator"
0051    FNEW     6  31      ; tools.lua:140
0052    TSETS    6   0  30  ; "use_downloader"
0053    FNEW     6  33      ; tools.lua:189
0054    TSETS    6   0  32  ; "get_md5"
0055    UCLO     0 => 0056
0056 => RET1     0   2

-----------------------
-- BYTECODE -- unix.lua:15-17
0001    MOV      1   0
0002    KSTR     2   0      ; " 1> /dev/null 2> /dev/null"
0003    CAT      1   1   2
0004    RET1     1   2

-- BYTECODE -- unix.lua:22-24
0001    MOV      1   0
0002    KSTR     2   0      ; " 2> /dev/null"
0003    CAT      1   1   2
0004    RET1     1   2

-- BYTECODE -- unix.lua:30-33
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    KSTR     1   3      ; "'"
0012    MOV      3   0
0013    TGETS    2   0   4  ; "gsub"
0014    KSTR     4   3      ; "'"
0015    KSTR     5   5      ; "'\''"
0016    CALL     2   2   4
0017    KSTR     3   3      ; "'"
0018    CAT      1   1   3
0019    RET1     1   2

-- BYTECODE -- unix.lua:41-56
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "string"
0016    JMP      3 => 0021
0017    NOT      3   1
0018    JMP      4 => 0022
0019    KPRI     3   1
0020    JMP      4 => 0022
0021 => KPRI     3   2
0022 => CALL     2   1   2
0023    MOV      3   0
0024    TGETS    2   0   3  ; "match"
0025    KSTR     4   4      ; "^['"](.*)['"]$"
0026    CALL     2   2   3
0027    ISF          2
0028    JMP      3 => 0030
0029    MOV      0   2
0030 => ISTC     3   1
0031    JMP      3 => 0035
0032    UGET     3   0      ; fs
0033    TGETS    3   3   5  ; "current_dir"
0034    CALL     3   2   1
0035 => MOV      4   3
0036    TGETS    3   3   6  ; "gsub"
0037    KSTR     5   7      ; "/*$"
0038    KSTR     6   8      ; ""
0039    CALL     3   2   4
0040    MOV      1   3
0041    MOV      4   0
0042    TGETS    3   0   9  ; "sub"
0043    KSHORT   5   1
0044    KSHORT   6   1
0045    CALL     3   2   4
0046    ISNES    3  10      ; "/"
0047    JMP      3 => 0050
0048    RET1     0   2
0049    JMP      3 => 0055
0050 => MOV      3   1
0051    KSTR     4  10      ; "/"
0052    MOV      5   0
0053    CAT      3   3   5
0054    RET1     3   2
0055 => RET0     0   1

-- BYTECODE -- unix.lua:62-64
0001    KSTR     1   0      ; "/"
0002    RET1     1   2

-- BYTECODE -- unix.lua:73-121
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "string"
0006    JMP      6 => 0011
0007    NOT      6   0
0008    JMP      7 => 0012
0009    KPRI     6   1
0010    JMP      7 => 0012
0011 => KPRI     6   2
0012 => CALL     5   1   2
0013    GGET     5   0      ; "assert"
0014    GGET     6   1      ; "type"
0015    MOV      7   1
0016    CALL     6   2   2
0017    ISEQS    6   2      ; "string"
0018    JMP      6 => 0021
0019    KPRI     6   1
0020    JMP      7 => 0022
0021 => KPRI     6   2
0022 => CALL     5   1   2
0023    GGET     5   0      ; "assert"
0024    GGET     6   1      ; "type"
0025    MOV      7   2
0026    CALL     6   2   2
0027    ISEQS    6   2      ; "string"
0028    JMP      6 => 0031
0029    KPRI     6   1
0030    JMP      7 => 0032
0031 => KPRI     6   2
0032 => CALL     5   1   2
0033    GGET     5   0      ; "assert"
0034    GGET     6   1      ; "type"
0035    MOV      7   3
0036    CALL     6   2   2
0037    ISEQS    6   2      ; "string"
0038    JMP      6 => 0043
0039    NOT      6   3
0040    JMP      7 => 0044
0041    KPRI     6   1
0042    JMP      7 => 0044
0043 => KPRI     6   2
0044 => CALL     5   1   2
0045    GGET     5   0      ; "assert"
0046    GGET     6   1      ; "type"
0047    MOV      7   4
0048    CALL     6   2   2
0049    ISEQS    6   2      ; "string"
0050    JMP      6 => 0055
0051    NOT      6   4
0052    JMP      7 => 0056
0053    KPRI     6   1
0054    JMP      7 => 0056
0055 => KPRI     6   2
0056 => CALL     5   1   2
0057    GGET     5   3      ; "io"
0058    TGETS    5   5   4  ; "open"
0059    MOV      6   1
0060    KSTR     7   5      ; "w"
0061    CALL     5   2   3
0062    IST          5
0063    JMP      6 => 0070
0064    KPRI     6   0
0065    KSTR     7   6      ; "Could not open "
0066    MOV      8   1
0067    KSTR     9   7      ; " for writing."
0068    CAT      7   7   9
0069    RET      6   3
0070 => UGET     6   0      ; path
0071    TGETS    6   6   8  ; "package_paths"
0072    MOV      7   2
0073    CALL     6   3   2
0074    TNEW     8   3
0075    KSTR     9   9      ; "package.path="
0076    UGET    10   1      ; util
0077    TGETS   10  10  10  ; "LQ"
0078    MOV     11   6
0079    KSTR    12  11      ; ";"
0080    CAT     11  11  12
0081    CALL    10   2   2
0082    KSTR    11  12      ; "..package.path"
0083    CAT      9   9  11
0084    TSETB    9   8   1
0085    KSTR     9  13      ; "package.cpath="
0086    UGET    10   1      ; util
0087    TGETS   10  10  10  ; "LQ"
0088    MOV     11   7
0089    KSTR    12  11      ; ";"
0090    CAT     11  11  12
0091    CALL    10   2   2
0092    KSTR    11  14      ; "..package.cpath"
0093    CAT      9   9  11
0094    TSETB    9   8   2
0095    ISEQS    1  15      ; "luarocks"
0096    JMP      9 => 0099
0097    ISNES    1  16      ; "luarocks-admin"
0098    JMP      9 => 0117
0099 => TNEW     9   3
0100    KSTR    10   9      ; "package.path="
0101    UGET    11   1      ; util
0102    TGETS   11  11  10  ; "LQ"
0103    GGET    12  17      ; "package"
0104    TGETS   12  12  18  ; "path"
0105    CALL    11   2   2
0106    CAT     10  10  11
0107    TSETB   10   9   1
0108    KSTR    10  13      ; "package.cpath="
0109    UGET    11   1      ; util
0110    TGETS   11  11  10  ; "LQ"
0111    GGET    12  17      ; "package"
0112    TGETS   12  12  19  ; "cpath"
0113    CALL    11   2   2
0114    CAT     10  10  11
0115    TSETB   10   9   2
0116    MOV      8   9
0117 => ISF          3
0118    JMP      9 => 0144
0119    ISF          4
0120    JMP      9 => 0144
0121    KSTR     9  20      ; "local k,l,_=pcall(require,"
0122    UGET    10   1      ; util
0123    TGETS   10  10  10  ; "LQ"
0124    KSTR    11  21      ; "luarocks.loader"
0125    CALL    10   2   2
0126    KSTR    11  22      ; ") _=k "
0127    KSTR    12  23      ; "and l.add_context("
0128    UGET    13   1      ; util
0129    TGETS   13  13  10  ; "LQ"
0130    MOV     14   3
0131    CALL    13   2   2
0132    KSTR    14  24      ; ","
0133    UGET    15   1      ; util
0134    TGETS   15  15  10  ; "LQ"
0135    MOV     16   4
0136    CALL    15   2   2
0137    KSTR    16  25      ; ")"
0138    CAT      9   9  16
0139    GGET    10  26      ; "table"
0140    TGETS   10  10  27  ; "insert"
0141    MOV     11   8
0142    MOV     12   9
0143    CALL    10   1   3
0144 => TDUP     9  32
0145    UGET    10   2      ; fs
0146    TGETS   10  10  28  ; "Q"
0147    UGET    11   3      ; dir
0148    TGETS   11  11  18  ; "path"
0149    UGET    12   4      ; cfg
0150    TGETS   12  12  29  ; "variables"
0151    TGETS   12  12  30  ; "LUA_BINDIR"
0152    UGET    13   4      ; cfg
0153    TGETS   13  13  31  ; "lua_interpreter"
0154    CALL    11   0   3
0155    CALLM   10   2   0
0156    TSETB   10   9   1
0157    UGET    10   2      ; fs
0158    TGETS   10  10  28  ; "Q"
0159    GGET    11  26      ; "table"
0160    TGETS   11  11  33  ; "concat"
0161    MOV     12   8
0162    KSTR    13  11      ; ";"
0163    CALL    11   0   3
0164    CALLM   10   2   0
0165    TSETB   10   9   3
0166    ISF          0
0167    JMP     10 => 0174
0168    UGET    10   2      ; fs
0169    TGETS   10  10  28  ; "Q"
0170    MOV     11   0
0171    CALL    10   2   2
0172    IST         10
0173    JMP     11 => 0175
0174 => KSTR    10  34      ; "$([ "$*" ] || echo -i)"
0175 => TSETB   10   9   4
0176    VARG    10   0   5
0177    TSETM   10   0      ; 5
0178    MOV     11   5
0179    TGETS   10   5  35  ; "write"
0180    KSTR    12  36      ; "#!/bin/sh\n\n"
0181    CALL    10   1   3
0182    MOV     11   5
0183    TGETS   10   5  35  ; "write"
0184    KSTR    12  37      ; "LUAROCKS_SYSCONFDIR="
0185    UGET    13   2      ; fs
0186    TGETS   13  13  28  ; "Q"
0187    UGET    14   4      ; cfg
0188    TGETS   14  14  38  ; "sysconfdir"
0189    CALL    13   2   2
0190    KSTR    14  39      ; " "
0191    CAT     12  12  14
0192    CALL    10   1   3
0193    MOV     11   5
0194    TGETS   10   5  35  ; "write"
0195    KSTR    12  40      ; "exec "
0196    GGET    13  26      ; "table"
0197    TGETS   13  13  33  ; "concat"
0198    MOV     14   9
0199    KSTR    15  39      ; " "
0200    CALL    13   2   3
0201    KSTR    14  41      ; " "$@"\n"
0202    CAT     12  12  14
0203    CALL    10   1   3
0204    MOV     11   5
0205    TGETS   10   5  42  ; "close"
0206    CALL    10   1   2
0207    UGET    10   2      ; fs
0208    TGETS   10  10  43  ; "set_permissions"
0209    MOV     11   1
0210    KSTR    12  44      ; "exec"
0211    KSTR    13  45      ; "all"
0212    CALL    10   2   4
0213    ISF         10
0214    JMP     11 => 0218
0215    KPRI    10   2
0216    RET1    10   2
0217    JMP     10 => 0224
0218 => KPRI    10   0
0219    KSTR    11  46      ; "Could not make "
0220    MOV     12   1
0221    KSTR    13  47      ; " executable."
0222    CAT     11  11  13
0223    RET     10   3
0224 => RET0     0   1

-- BYTECODE -- unix.lua:128-143
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "%.lua$"
0004    CALL     1   2   3
0005    ISF          1
0006    JMP      2 => 0009
0007    KPRI     1   1
0008    RET1     1   2
0009 => GGET     1   2      ; "io"
0010    TGETS    1   1   3  ; "open"
0011    MOV      2   0
0012    CALL     1   2   2
0013    IST          1
0014    JMP      2 => 0017
0015    KPRI     2   2
0016    RET1     2   2
0017 => MOV      3   1
0018    TGETS    2   1   4  ; "read"
0019    KSHORT   4   2
0020    CALL     2   2   3
0021    MOV      4   1
0022    TGETS    3   1   5  ; "close"
0023    CALL     3   1   2
0024    IST          2
0025    JMP      3 => 0034
0026    UGET     3   0      ; util
0027    TGETS    3   3   6  ; "warning"
0028    KSTR     4   7      ; "could not read "
0029    MOV      5   0
0030    CAT      4   4   5
0031    CALL     3   1   2
0032    KPRI     3   2
0033    RET1     3   2
0034 => ISNES    2   8      ; "#!"
0035    JMP      3 => 0038
0036    KPRI     3   1
0037    JMP      4 => 0039
0038 => KPRI     3   2
0039 => RET1     3   2

-- BYTECODE -- unix.lua:145-147
0001    UGET     2   0      ; fs
0002    TGETS    2   2   0  ; "copy"
0003    MOV      3   0
0004    MOV      4   1
0005    KSTR     5   1      ; "exec"
0006    CALLT    2   4

-- BYTECODE -- unix.lua:159-161
0001    GGET     2   0      ; "os"
0002    TGETS    2   2   1  ; "rename"
0003    MOV      3   1
0004    MOV      4   0
0005    CALLT    2   3

-- BYTECODE -- unix.lua:163-165
0001    GGET     0   0      ; "os"
0002    TGETS    0   0   1  ; "tmpname"
0003    CALLT    0   1

-- BYTECODE -- unix.lua:167-169
0001    GGET     0   0      ; "os"
0002    TGETS    0   0   1  ; "getenv"
0003    KSTR     1   2      ; "USER"
0004    CALLT    0   2

-- BYTECODE -- unix.lua:171-173
0001    KSTR     2   0      ; "export %s='%s'"
0002    MOV      3   2
0003    TGETS    2   2   1  ; "format"
0004    MOV      4   0
0005    MOV      5   1
0006    CALLT    2   4

-- BYTECODE -- unix.lua:192-212
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "_unix_umask"
0003    CALL     1   2   1
0004    KSTR     2   1      ; ""
0005    KSHORT   3   1
0006    KSHORT   4   3
0007    KSHORT   5   1
0008    FORI     3 => 0053
0009 => UGET     7   1      ; octal_to_rwx
0010    MOV      9   0
0011    TGETS    8   0   2  ; "sub"
0012    MOV     10   6
0013    MOV     11   6
0014    CALL     8   2   4
0015    TGETV    7   7   8
0016    UGET     8   1      ; octal_to_rwx
0017    MOV     10   1
0018    TGETS    9   1   2  ; "sub"
0019    MOV     11   6
0020    MOV     12   6
0021    CALL     9   2   4
0022    TGETV    8   8   9
0023    KSTR     9   1      ; ""
0024    KSHORT  10   1
0025    KSHORT  11   3
0026    KSHORT  12   1
0027    FORI    10 => 0048
0028 => MOV     15   7
0029    TGETS   14   7   2  ; "sub"
0030    MOV     16  13
0031    MOV     17  13
0032    CALL    14   2   4
0033    MOV     16   8
0034    TGETS   15   8   2  ; "sub"
0035    MOV     17  13
0036    MOV     18  13
0037    CALL    15   2   4
0038    ISNEV   14  15
0039    JMP     16 => 0044
0040    MOV     16   9
0041    KSTR    17   3      ; "-"
0042    CAT      9  16  17
0043    JMP     16 => 0047
0044 => MOV     16   9
0045    MOV     17  14
0046    CAT      9  16  17
0047 => FORL    10 => 0028
0048 => MOV     10   2
0049    UGET    11   2      ; rwx_to_octal
0050    TGETV   11  11   9
0051    CAT      2  10  11
0052    FORL     3 => 0009
0053 => RET1     2   2

-- BYTECODE -- unix.lua:214-219
0001    UGET     0   0      ; fs
0002    TGETS    0   0   0  ; "is_dir"
0003    KSTR     1   1      ; "/var/cache"
0004    CALL     0   2   2
0005    ISF          0
0006    JMP      1 => 0009
0007    KSTR     0   1      ; "/var/cache"
0008    RET1     0   2
0009 => UGET     0   1      ; dir
0010    TGETS    0   0   2  ; "path"
0011    UGET     1   0      ; fs
0012    TGETS    1   1   3  ; "system_temp_dir"
0013    CALL     1   2   1
0014    KSTR     2   4      ; "cache"
0015    CALLT    0   3

-- BYTECODE -- unix.lua:0-222
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.path"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.util"
0016    CALL     5   2   2
0017    FNEW     6   7      ; unix.lua:15
0018    TSETS    6   0   6  ; "quiet"
0019    FNEW     6   9      ; unix.lua:22
0020    TSETS    6   0   8  ; "quiet_stderr"
0021    FNEW     6  11      ; unix.lua:30
0022    TSETS    6   0  10  ; "Q"
0023    FNEW     6  13      ; unix.lua:41
0024    TSETS    6   0  12  ; "absolute_name"
0025    FNEW     6  15      ; unix.lua:62
0026    TSETS    6   0  14  ; "root_of"
0027    FNEW     6  17      ; unix.lua:73
0028    TSETS    6   0  16  ; "wrap_script"
0029    FNEW     6  19      ; unix.lua:128
0030    TSETS    6   0  18  ; "is_actual_binary"
0031    FNEW     6  21      ; unix.lua:145
0032    TSETS    6   0  20  ; "copy_binary"
0033    FNEW     6  23      ; unix.lua:159
0034    TSETS    6   0  22  ; "replace_file"
0035    FNEW     6  25      ; unix.lua:163
0036    TSETS    6   0  24  ; "tmpname"
0037    FNEW     6  27      ; unix.lua:167
0038    TSETS    6   0  26  ; "current_user"
0039    FNEW     6  29      ; unix.lua:171
0040    TSETS    6   0  28  ; "export_cmd"
0041    TDUP     6  30
0042    TNEW     7   0
0043    GGET     8  31      ; "pairs"
0044    MOV      9   6
0045    CALL     8   4   2
0046    ISNEXT  11 => 0048
0047 => TSETV   11   7  12
0048 => ITERN   11   3   3
0049    ITERL   11 => 0047
0050    FNEW     8  33      ; unix.lua:192
0051    TSETS    8   0  32  ; "_unix_moderate_permissions"
0052    FNEW     8  35      ; unix.lua:214
0053    TSETS    8   0  34  ; "system_cache_dir"
0054    UCLO     0 => 0055
0055 => RET1     0   2

-----------------------
-- BYTECODE -- tools.lua:9-9
0001    UGET     2   0      ; cfg
0002    TGETS    2   2   0  ; "variables"
0003    TGETV    2   2   1
0004    RET1     2   2

-- BYTECODE -- tools.lua:15-17
0001    KSTR     2   0      ; "cd "
0002    UGET     3   0      ; fs
0003    TGETS    3   3   1  ; "Q"
0004    UGET     4   0      ; fs
0005    TGETS    4   4   2  ; "absolute_name"
0006    MOV      5   0
0007    CALL     4   0   2
0008    CALLM    3   2   0
0009    KSTR     4   3      ; " && "
0010    MOV      5   1
0011    CAT      2   2   5
0012    RET1     2   2

-- BYTECODE -- tools.lua:24-31
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "MKDIR"
0008    KSTR     3   3      ; " -p"
0009    CAT      2   2   3
0010    MOV      3   0
0011    CALL     1   3   3
0012    IST          1
0013    JMP      3 => 0017
0014    KSTR     3   4      ; "failed making directory "
0015    MOV      4   0
0016    CAT      2   3   4
0017 => MOV      3   1
0018    MOV      4   2
0019    RET      3   3

-- BYTECODE -- tools.lua:37-40
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute_quiet"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "RMDIR"
0008    MOV      3   0
0009    CALL     1   1   3
0010    RET0     0   1

-- BYTECODE -- tools.lua:46-49
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute_quiet"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "RMDIR"
0008    KSTR     3   3      ; "-p"
0009    MOV      4   0
0010    CALL     1   1   4
0011    RET0     0   1

-- BYTECODE -- tools.lua:58-75
0001    GGET     3   0      ; "assert"
0002    ISFC     4   0
0003    JMP      4 => 0005
0004    MOV      4   1
0005 => CALL     3   1   2
0006    UGET     3   0      ; fs
0007    TGETS    3   3   1  ; "execute"
0008    UGET     4   1      ; vars
0009    TGETS    4   4   2  ; "CP"
0010    MOV      5   0
0011    MOV      6   1
0012    CALL     3   2   4
0013    ISF          3
0014    JMP      4 => 0051
0015    ISF          2
0016    JMP      3 => 0048
0017    UGET     3   0      ; fs
0018    TGETS    3   3   3  ; "is_dir"
0019    MOV      4   1
0020    CALL     3   2   2
0021    ISF          3
0022    JMP      4 => 0032
0023    UGET     3   2      ; dir
0024    TGETS    3   3   4  ; "path"
0025    MOV      4   1
0026    UGET     5   2      ; dir
0027    TGETS    5   5   5  ; "base_name"
0028    MOV      6   0
0029    CALL     5   0   2
0030    CALLM    3   2   1
0031    MOV      1   3
0032 => UGET     3   0      ; fs
0033    TGETS    3   3   6  ; "set_permissions"
0034    MOV      4   1
0035    MOV      5   2
0036    KSTR     6   7      ; "all"
0037    CALL     3   2   4
0038    ISF          3
0039    JMP      4 => 0043
0040    KPRI     3   2
0041    RET1     3   2
0042    JMP      3 => 0048
0043 => KPRI     3   1
0044    KSTR     4   8      ; "Failed setting permissions of "
0045    MOV      5   1
0046    CAT      4   4   5
0047    RET      3   3
0048 => KPRI     3   2
0049    RET1     3   2
0050    JMP      3 => 0058
0051 => KPRI     3   1
0052    KSTR     4   9      ; "Failed copying "
0053    MOV      5   0
0054    KSTR     6  10      ; " to "
0055    MOV      7   1
0056    CAT      4   4   7
0057    RET      3   3
0058 => RET0     0   1

-- BYTECODE -- tools.lua:82-89
0001    GGET     2   0      ; "assert"
0002    ISFC     3   0
0003    JMP      3 => 0005
0004    MOV      3   1
0005 => CALL     2   1   2
0006    UGET     2   0      ; fs
0007    TGETS    2   2   1  ; "execute_quiet"
0008    UGET     3   1      ; vars
0009    TGETS    3   3   2  ; "CP"
0010    KSTR     4   3      ; " -pPR "
0011    UGET     5   0      ; fs
0012    TGETS    5   5   4  ; "Q"
0013    MOV      6   0
0014    CALL     5   2   2
0015    KSTR     6   5      ; "/* "
0016    UGET     7   0      ; fs
0017    TGETS    7   7   4  ; "Q"
0018    MOV      8   1
0019    CALL     7   2   2
0020    CAT      3   3   7
0021    CALL     2   2   2
0022    ISF          2
0023    JMP      3 => 0027
0024    KPRI     2   2
0025    RET1     2   2
0026    JMP      2 => 0034
0027 => KPRI     2   1
0028    KSTR     3   6      ; "Failed copying "
0029    MOV      4   0
0030    KSTR     5   7      ; " to "
0031    MOV      6   1
0032    CAT      3   3   6
0033    RET      2   3
0034 => RET0     0   1

-- BYTECODE -- tools.lua:94-98
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    GGET     1   0      ; "assert"
0005    MOV      3   0
0006    TGETS    2   0   1  ; "sub"
0007    KSHORT   4   1
0008    KSHORT   5   1
0009    CALL     2   2   4
0010    ISEQS    2   2      ; "/"
0011    JMP      2 => 0014
0012    KPRI     2   1
0013    JMP      3 => 0015
0014 => KPRI     2   2
0015 => CALL     1   1   2
0016    UGET     1   0      ; fs
0017    TGETS    1   1   3  ; "execute_quiet"
0018    UGET     2   1      ; vars
0019    TGETS    2   2   4  ; "RM"
0020    KSTR     3   5      ; "-rf"
0021    MOV      4   0
0022    CALL     1   1   4
0023    RET0     0   1

-- BYTECODE -- tools.lua:105-120
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0011
0007    NOT      2   0
0008    JMP      3 => 0012
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => CALL     1   1   2
0013    IST          0
0014    JMP      1 => 0019
0015    UGET     1   0      ; fs
0016    TGETS    1   1   3  ; "current_dir"
0017    CALL     1   2   1
0018    MOV      0   1
0019 => UGET     1   0      ; fs
0020    TGETS    1   1   4  ; "is_dir"
0021    MOV      2   0
0022    CALL     1   2   2
0023    IST          1
0024    JMP      1 => 0027
0025    TNEW     1   0
0026    RET1     1   2
0027 => TNEW     1   0
0028    GGET     2   5      ; "io"
0029    TGETS    2   2   6  ; "popen"
0030    UGET     3   0      ; fs
0031    TGETS    3   3   7  ; "command_at"
0032    MOV      4   0
0033    UGET     5   0      ; fs
0034    TGETS    5   5   8  ; "quiet_stderr"
0035    UGET     6   1      ; vars
0036    TGETS    6   6   9  ; "FIND"
0037    KSTR     7  10      ; " *"
0038    CAT      6   6   7
0039    CALL     5   0   2
0040    CALLM    3   0   1
0041    CALLM    2   2   0
0042    MOV      4   2
0043    TGETS    3   2  11  ; "lines"
0044    CALL     3   4   2
0045    JMP      6 => 0051
0046 => GGET     7  12      ; "table"
0047    TGETS    7   7  13  ; "insert"
0048    MOV      8   1
0049    MOV      9   6
0050    CALL     7   1   3
0051 => ITERC    6   2   3
0052    ITERL    6 => 0046
0053    MOV      4   2
0054    TGETS    3   2  14  ; "close"
0055    CALL     3   1   2
0056    RET1     1   2

-- BYTECODE -- tools.lua:127-137
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "is_tool_available"
0003    UGET     2   1      ; vars
0004    TGETS    2   2   1  ; "ZIP"
0005    KSTR     3   2      ; "zip"
0006    CALL     1   3   3
0007    IST          1
0008    JMP      3 => 0012
0009    KPRI     3   0
0010    MOV      4   2
0011    RET      3   3
0012 => UGET     3   0      ; fs
0013    TGETS    3   3   3  ; "execute_quiet"
0014    UGET     4   1      ; vars
0015    TGETS    4   4   1  ; "ZIP"
0016    KSTR     5   4      ; " -r"
0017    CAT      4   4   5
0018    MOV      5   0
0019    VARG     6   0   1
0020    CALLM    3   2   2
0021    ISF          3
0022    JMP      4 => 0026
0023    KPRI     3   2
0024    RET1     3   2
0025    JMP      3 => 0031
0026 => KPRI     3   0
0027    KSTR     4   5      ; "failed compressing "
0028    MOV      5   0
0029    CAT      4   4   5
0030    RET      3   3
0031 => RET0     0   1

-- BYTECODE -- tools.lua:142-153
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "is_tool_available"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "UNZIP"
0008    KSTR     3   3      ; "unzip"
0009    KSTR     4   4      ; "-h"
0010    CALL     1   3   4
0011    IST          1
0012    JMP      3 => 0016
0013    KPRI     3   0
0014    MOV      4   2
0015    RET      3   3
0016 => UGET     3   0      ; fs
0017    TGETS    3   3   5  ; "execute_quiet"
0018    UGET     4   1      ; vars
0019    TGETS    4   4   2  ; "UNZIP"
0020    MOV      5   0
0021    CALL     3   2   3
0022    ISF          3
0023    JMP      4 => 0027
0024    KPRI     3   2
0025    RET1     3   2
0026    JMP      3 => 0032
0027 => KPRI     3   0
0028    KSTR     4   6      ; "failed extracting "
0029    MOV      5   0
0030    CAT      4   4   5
0031    RET      3   3
0032 => RET0     0   1

-- BYTECODE -- tools.lua:155-166
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   2
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    ISEQP    3   0
0013    JMP      5 => 0021
0014    GGET     5   1      ; "type"
0015    MOV      6   3
0016    CALL     5   2   2
0017    ISEQS    5   2      ; "string"
0018    JMP      5 => 0021
0019    KPRI     5   1
0020    JMP      6 => 0022
0021 => KPRI     5   2
0022 => CALL     4   1   2
0023    IST          3
0024    JMP      4 => 0034
0025    MOV      5   2
0026    TGETS    4   2   3  ; "gsub"
0027    KSTR     6   4      ; "%."
0028    MOV      7   0
0029    KSTR     8   5      ; "$"
0030    CAT      6   6   8
0031    KSTR     7   6      ; ""
0032    CALL     4   2   4
0033    MOV      3   4
0034 => UGET     4   0      ; fs
0035    TGETS    4   4   7  ; "execute"
0036    UGET     5   0      ; fs
0037    TGETS    5   5   8  ; "Q"
0038    MOV      6   1
0039    CALL     5   2   2
0040    KSTR     6   9      ; " -c "
0041    UGET     7   0      ; fs
0042    TGETS    7   7   8  ; "Q"
0043    MOV      8   2
0044    CALL     7   2   2
0045    KSTR     8  10      ; " > "
0046    UGET     9   0      ; fs
0047    TGETS    9   9   8  ; "Q"
0048    MOV     10   3
0049    CALL     9   2   2
0050    CAT      5   5   9
0051    CALL     4   2   2
0052    ISF          4
0053    JMP      5 => 0057
0054    KPRI     4   2
0055    RET1     4   2
0056    JMP      4 => 0062
0057 => KPRI     4   0
0058    KSTR     5  11      ; "failed extracting "
0059    MOV      6   2
0060    CAT      5   5   6
0061    RET      4   3
0062 => RET0     0   1

-- BYTECODE -- tools.lua:173-175
0001    UGET     2   0      ; uncompress
0002    KSTR     3   0      ; "gz"
0003    KSTR     4   1      ; "gunzip"
0004    MOV      5   0
0005    MOV      6   1
0006    CALLT    2   5

-- BYTECODE -- tools.lua:182-184
0001    UGET     2   0      ; uncompress
0002    KSTR     3   0      ; "bz2"
0003    KSTR     4   1      ; "bunzip2"
0004    MOV      5   0
0005    MOV      6   1
0006    CALLT    2   5

-- BYTECODE -- tools.lua:187-191
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "r"
0004    CALL     1   2   3
0005    ISF          1
0006    JMP      2 => 0009
0007    KSHORT   1   4
0008    JMP      2 => 0010
0009 => KSHORT   1   0
0010 => MOV      3   0
0011    TGETS    2   0   0  ; "match"
0012    KSTR     4   2      ; "w"
0013    CALL     2   2   3
0014    ISF          2
0015    JMP      3 => 0018
0016    KSHORT   2   2
0017    JMP      3 => 0019
0018 => KSHORT   2   0
0019 => ADDVV    1   1   2
0020    MOV      3   0
0021    TGETS    2   0   0  ; "match"
0022    KSTR     4   3      ; "x"
0023    CALL     2   2   3
0024    ISF          2
0025    JMP      3 => 0028
0026    KSHORT   2   1
0027    JMP      3 => 0029
0028 => KSHORT   2   0
0029 => ADDVV    1   1   2
0030    RET1     1   2

-- BYTECODE -- tools.lua:193-209
0001    UGET     0   0      ; umask_cache
0002    ISF          0
0003    JMP      1 => 0006
0004    UGET     0   0      ; umask_cache
0005    RET1     0   2
0006 => GGET     0   0      ; "assert"
0007    GGET     1   1      ; "io"
0008    TGETS    1   1   2  ; "popen"
0009    KSTR     2   3      ; "umask -S"
0010    CALL     1   0   2
0011    CALLM    0   2   0
0012    GGET     1   0      ; "assert"
0013    MOV      3   0
0014    TGETS    2   0   4  ; "read"
0015    KSTR     4   5      ; "*a"
0016    CALL     2   0   3
0017    CALLM    1   2   0
0018    MOV      3   0
0019    TGETS    2   0   6  ; "close"
0020    CALL     2   1   2
0021    MOV      3   1
0022    TGETS    2   1   7  ; "match"
0023    KSTR     4   8      ; "u=([rwx]*),g=([rwx]*),o=([rwx]*)"
0024    CALL     2   4   3
0025    IST          2
0026    JMP      5 => 0030
0027    GGET     5   9      ; "error"
0028    KSTR     6  10      ; "invalid umask result"
0029    CALL     5   1   2
0030 => GGET     5  11      ; "string"
0031    TGETS    5   5  12  ; "format"
0032    KSTR     6  13      ; "%d%d%d"
0033    UGET     7   1      ; rwx_to_octal
0034    MOV      8   2
0035    CALL     7   2   2
0036    SUBNV    7   7   0  ; 7
0037    UGET     8   1      ; rwx_to_octal
0038    MOV      9   3
0039    CALL     8   2   2
0040    SUBNV    8   8   0  ; 7
0041    UGET     9   1      ; rwx_to_octal
0042    MOV     10   4
0043    CALL     9   2   2
0044    SUBNV    9   9   0  ; 7
0045    CALL     5   2   5
0046    USETV    0   5      ; umask_cache
0047    UGET     5   0      ; umask_cache
0048    RET1     5   2

-- BYTECODE -- tools.lua:218-234
0001    GGET     3   0      ; "assert"
0002    ISFC     4   0
0003    JMP      4 => 0007
0004    ISFC     4   1
0005    JMP      4 => 0007
0006    MOV      4   2
0007 => CALL     3   1   2
0008    KPRI     3   0
0009    ISNES    1   1      ; "read"
0010    JMP      4 => 0019
0011    ISNES    2   2      ; "user"
0012    JMP      4 => 0019
0013    UGET     4   0      ; fs
0014    TGETS    4   4   3  ; "_unix_moderate_permissions"
0015    KSTR     5   4      ; "600"
0016    CALL     4   2   2
0017    MOV      3   4
0018    JMP      4 => 0056
0019 => ISNES    1   5      ; "exec"
0020    JMP      4 => 0029
0021    ISNES    2   2      ; "user"
0022    JMP      4 => 0029
0023    UGET     4   0      ; fs
0024    TGETS    4   4   3  ; "_unix_moderate_permissions"
0025    KSTR     5   6      ; "700"
0026    CALL     4   2   2
0027    MOV      3   4
0028    JMP      4 => 0056
0029 => ISNES    1   1      ; "read"
0030    JMP      4 => 0039
0031    ISNES    2   7      ; "all"
0032    JMP      4 => 0039
0033    UGET     4   0      ; fs
0034    TGETS    4   4   3  ; "_unix_moderate_permissions"
0035    KSTR     5   8      ; "644"
0036    CALL     4   2   2
0037    MOV      3   4
0038    JMP      4 => 0056
0039 => ISNES    1   5      ; "exec"
0040    JMP      4 => 0049
0041    ISNES    2   7      ; "all"
0042    JMP      4 => 0049
0043    UGET     4   0      ; fs
0044    TGETS    4   4   3  ; "_unix_moderate_permissions"
0045    KSTR     5   9      ; "755"
0046    CALL     4   2   2
0047    MOV      3   4
0048    JMP      4 => 0056
0049 => KPRI     4   1
0050    KSTR     5  10      ; "Invalid permission "
0051    MOV      6   1
0052    KSTR     7  11      ; " for "
0053    MOV      8   2
0054    CAT      5   5   8
0055    RET      4   3
0056 => UGET     4   0      ; fs
0057    TGETS    4   4  12  ; "execute"
0058    UGET     5   1      ; vars
0059    TGETS    5   5  13  ; "CHMOD"
0060    MOV      6   3
0061    MOV      7   0
0062    CALLT    4   4

-- BYTECODE -- tools.lua:236-238
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "execute"
0003    UGET     2   1      ; cfg
0004    TGETS    2   2   1  ; "web_browser"
0005    MOV      3   0
0006    CALLT    1   3

-- BYTECODE -- tools.lua:245-256
0001    GGET     2   0      ; "assert"
0002    ISEQP    1   0
0003    JMP      3 => 0016
0004    GGET     3   1      ; "type"
0005    MOV      4   1
0006    CALL     3   2   2
0007    ISEQS    3   2      ; "table"
0008    JMP      3 => 0016
0009    GGET     3   1      ; "type"
0010    MOV      4   1
0011    CALL     3   2   2
0012    ISEQS    3   3      ; "number"
0013    JMP      3 => 0016
0014    KPRI     3   1
0015    JMP      4 => 0017
0016 => KPRI     3   2
0017 => CALL     2   1   2
0018    UGET     2   0      ; dir
0019    TGETS    2   2   4  ; "normalize"
0020    MOV      3   0
0021    CALL     2   2   2
0022    MOV      0   2
0023    KSTR     2   5      ; ""
0024    GGET     3   1      ; "type"
0025    MOV      4   1
0026    CALL     3   2   2
0027    ISNES    3   3      ; "number"
0028    JMP      3 => 0035
0029    GGET     3   6      ; "os"
0030    TGETS    3   3   7  ; "date"
0031    KSTR     4   8      ; "*t"
0032    MOV      5   1
0033    CALL     3   2   3
0034    MOV      1   3
0035 => GGET     3   1      ; "type"
0036    MOV      4   1
0037    CALL     3   2   2
0038    ISNES    3   2      ; "table"
0039    JMP      3 => 0051
0040    KSTR     3   9      ; "-t %04d%02d%02d%02d%02d.%02d"
0041    MOV      4   3
0042    TGETS    3   3  10  ; "format"
0043    TGETS    5   1  11  ; "year"
0044    TGETS    6   1  12  ; "month"
0045    TGETS    7   1  13  ; "day"
0046    TGETS    8   1  14  ; "hour"
0047    TGETS    9   1  15  ; "min"
0048    TGETS   10   1  16  ; "sec"
0049    CALL     3   2   8
0050    MOV      2   3
0051 => UGET     3   1      ; fs
0052    TGETS    3   3  17  ; "execute"
0053    UGET     4   2      ; vars
0054    TGETS    4   4  18  ; "TOUCH"
0055    KSTR     5  19      ; " "
0056    MOV      6   2
0057    CAT      4   4   6
0058    MOV      5   0
0059    CALLT    3   3

-- BYTECODE -- tools.lua:262-274
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; dir
0012    TGETS    1   1   3  ; "normalize"
0013    MOV      2   0
0014    CALL     1   2   2
0015    MOV      0   1
0016    GGET     1   4      ; "os"
0017    TGETS    1   1   5  ; "getenv"
0018    KSTR     2   6      ; "TMPDIR"
0019    CALL     1   2   2
0020    IST          1
0021    JMP      2 => 0023
0022    KSTR     1   7      ; "/tmp"
0023 => KSTR     2   8      ; "/luarocks_"
0024    MOV      4   0
0025    TGETS    3   0   9  ; "gsub"
0026    KSTR     5  10      ; "/"
0027    KSTR     6  11      ; "_"
0028    CALL     3   2   4
0029    KSTR     4  12      ; "-XXXXXX"
0030    CAT      1   1   4
0031    GGET     2  13      ; "io"
0032    TGETS    2   2  14  ; "popen"
0033    UGET     3   1      ; vars
0034    TGETS    3   3  15  ; "MKTEMP"
0035    KSTR     4  16      ; " -d "
0036    UGET     5   2      ; fs
0037    TGETS    5   5  17  ; "Q"
0038    MOV      6   1
0039    CALL     5   2   2
0040    CAT      3   3   5
0041    CALL     2   2   2
0042    MOV      4   2
0043    TGETS    3   2  18  ; "read"
0044    KSTR     5  19      ; "*l"
0045    CALL     3   2   3
0046    MOV      5   2
0047    TGETS    4   2  20  ; "close"
0048    CALL     4   1   2
0049    ISF          3
0050    JMP      4 => 0058
0051    MOV      5   3
0052    TGETS    4   3  21  ; "match"
0053    KSTR     6  22      ; "^/"
0054    CALL     4   2   3
0055    ISF          4
0056    JMP      5 => 0058
0057    RET1     3   2
0058 => KPRI     4   0
0059    KSTR     5  23      ; "Failed to create temporary directory "
0060    GGET     6  24      ; "tostring"
0061    MOV      7   3
0062    CALL     6   2   2
0063    CAT      5   5   6
0064    RET      4   3

-- BYTECODE -- tools.lua:279-282
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "TEST"
0008    KSTR     3   3      ; "-e"
0009    MOV      4   0
0010    CALLT    1   4

-- BYTECODE -- tools.lua:287-290
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "TEST"
0008    KSTR     3   3      ; "-d"
0009    MOV      4   0
0010    CALLT    1   4

-- BYTECODE -- tools.lua:295-298
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "TEST"
0008    KSTR     3   3      ; "-f"
0009    MOV      4   0
0010    CALLT    1   4

-- BYTECODE -- tools.lua:0-301
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    GGET     4   4      ; "setmetatable"
0012    TNEW     5   0
0013    TDUP     6   6
0014    FNEW     7   5      ; tools.lua:9
0015    TSETS    7   6   7  ; "__index"
0016    CALL     4   2   3
0017    FNEW     5   9      ; tools.lua:15
0018    TSETS    5   0   8  ; "command_at"
0019    FNEW     5  11      ; tools.lua:24
0020    TSETS    5   0  10  ; "make_dir"
0021    FNEW     5  13      ; tools.lua:37
0022    TSETS    5   0  12  ; "remove_dir_if_empty"
0023    FNEW     5  15      ; tools.lua:46
0024    TSETS    5   0  14  ; "remove_dir_tree_if_empty"
0025    FNEW     5  17      ; tools.lua:58
0026    TSETS    5   0  16  ; "copy"
0027    FNEW     5  19      ; tools.lua:82
0028    TSETS    5   0  18  ; "copy_contents"
0029    FNEW     5  21      ; tools.lua:94
0030    TSETS    5   0  20  ; "delete"
0031    FNEW     5  23      ; tools.lua:105
0032    TSETS    5   0  22  ; "find"
0033    FNEW     5  25      ; tools.lua:127
0034    TSETS    5   0  24  ; "zip"
0035    FNEW     5  27      ; tools.lua:142
0036    TSETS    5   0  26  ; "unzip"
0037    FNEW     5  28      ; tools.lua:155
0038    FNEW     6  30      ; tools.lua:173
0039    TSETS    6   0  29  ; "gunzip"
0040    FNEW     6  32      ; tools.lua:182
0041    TSETS    6   0  31  ; "bunzip2"
0042    FNEW     6  33      ; tools.lua:187
0043    KPRI     7   0
0044    FNEW     8  35      ; tools.lua:193
0045    TSETS    8   0  34  ; "_unix_umask"
0046    UCLO     6 => 0047
0047 => FNEW     6  37      ; tools.lua:218
0048    TSETS    6   0  36  ; "set_permissions"
0049    FNEW     6  39      ; tools.lua:236
0050    TSETS    6   0  38  ; "browser"
0051    FNEW     6  41      ; tools.lua:245
0052    TSETS    6   0  40  ; "set_time"
0053    FNEW     6  43      ; tools.lua:262
0054    TSETS    6   0  42  ; "make_temp_dir"
0055    FNEW     6  45      ; tools.lua:279
0056    TSETS    6   0  44  ; "exists"
0057    FNEW     6  47      ; tools.lua:287
0058    TSETS    6   0  46  ; "is_dir"
0059    FNEW     6  49      ; tools.lua:295
0060    TSETS    6   0  48  ; "is_file"
0061    UCLO     0 => 0062
0062 => RET1     0   2

-----------------------
-- BYTECODE -- win32.lua:18-18
0001    UGET     1   0      ; _popen
0002    UGET     2   1      ; _prefix
0003    MOV      3   0
0004    CAT      2   2   3
0005    VARG     3   0   1
0006    CALLMT   1   1

-- BYTECODE -- win32.lua:19-19
0001    UGET     1   0      ; _execute
0002    UGET     2   1      ; _prefix
0003    MOV      3   0
0004    CAT      2   2   3
0005    VARG     3   0   1
0006    CALLMT   1   1

-- BYTECODE -- win32.lua:24-26
0001    MOV      1   0
0002    KSTR     2   0      ; " 2> NUL 1> NUL"
0003    CAT      1   1   2
0004    RET1     1   2

-- BYTECODE -- win32.lua:31-33
0001    MOV      1   0
0002    KSTR     2   0      ; " 2> NUL"
0003    CAT      1   1   2
0004    RET1     1   2

-- BYTECODE -- win32.lua:38-61
0001    KSTR     1   0      ; ""
0002    KSTR     2   0      ; ""
0003    KSTR     3   0      ; ""
0004    MOV      5   0
0005    TGETS    4   0   1  ; "match"
0006    KSTR     6   2      ; "^['"](.*)['"]$"
0007    CALL     4   2   3
0008    ISF          4
0009    JMP      5 => 0011
0010    MOV      0   4
0011 => MOV      6   0
0012    TGETS    5   0   1  ; "match"
0013    KSTR     7   3      ; "^.:"
0014    CALL     5   2   3
0015    ISF          5
0016    JMP      6 => 0028
0017    MOV      6   0
0018    TGETS    5   0   4  ; "sub"
0019    KSHORT   7   1
0020    KSHORT   8   2
0021    CALL     5   2   4
0022    MOV      1   5
0023    MOV      6   0
0024    TGETS    5   0   4  ; "sub"
0025    KSHORT   7   3
0026    CALL     5   2   3
0027    MOV      0   5
0028 => MOV      6   0
0029    TGETS    5   0   1  ; "match"
0030    KSTR     7   5      ; "^[\/]"
0031    CALL     5   2   3
0032    ISF          5
0033    JMP      6 => 0046
0034    MOV      6   0
0035    TGETS    5   0   4  ; "sub"
0036    KSHORT   7   1
0037    KSHORT   8   1
0038    CALL     5   2   4
0039    MOV      2   5
0040    MOV      6   0
0041    TGETS    5   0   4  ; "sub"
0042    KSHORT   7   2
0043    CALL     5   2   3
0044    MOV      3   5
0045    JMP      5 => 0047
0046 => MOV      3   0
0047 => MOV      5   1
0048    MOV      6   2
0049    MOV      7   3
0050    RET      5   4

-- BYTECODE -- win32.lua:67-84
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; split_root
0012    MOV      2   0
0013    CALL     1   4   2
0014    ISEQS    2   3      ; ""
0015    JMP      4 => 0022
0016    MOV      5   0
0017    TGETS    4   0   4  ; "gsub"
0018    KSTR     6   5      ; "/"
0019    KSTR     7   6      ; "\"
0020    CALL     4   2   4
0021    MOV      0   4
0022 => ISNES    0   6      ; "\"
0023    JMP      4 => 0026
0024    KSTR     4   6      ; "\"
0025    RET1     4   2
0026 => MOV      5   0
0027    TGETS    4   0   4  ; "gsub"
0028    KSTR     6   7      ; "\(\*)""
0029    KSTR     7   8      ; "\%1%1""
0030    CALL     4   2   4
0031    MOV      0   4
0032    MOV      5   0
0033    TGETS    4   0   4  ; "gsub"
0034    KSTR     6   9      ; "\+$"
0035    KSTR     7  10      ; "%0%0"
0036    CALL     4   2   4
0037    MOV      0   4
0038    MOV      5   0
0039    TGETS    4   0   4  ; "gsub"
0040    KSTR     6  11      ; """
0041    KSTR     7  12      ; "\""
0042    CALL     4   2   4
0043    MOV      0   4
0044    MOV      5   0
0045    TGETS    4   0   4  ; "gsub"
0046    KSTR     6  13      ; "(\*)%%"
0047    KSTR     7  14      ; "%1%1"%%""
0048    CALL     4   2   4
0049    MOV      0   4
0050    KSTR     4  11      ; """
0051    MOV      5   0
0052    KSTR     6  11      ; """
0053    CAT      4   4   6
0054    RET1     4   2

-- BYTECODE -- win32.lua:90-107
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; split_root
0012    MOV      2   0
0013    CALL     1   4   2
0014    ISEQS    2   3      ; ""
0015    JMP      4 => 0022
0016    MOV      5   0
0017    TGETS    4   0   4  ; "gsub"
0018    KSTR     6   5      ; "/"
0019    KSTR     7   6      ; "\"
0020    CALL     4   2   4
0021    MOV      0   4
0022 => ISNES    0   6      ; "\"
0023    JMP      4 => 0026
0024    KSTR     4   6      ; "\"
0025    RET1     4   2
0026 => MOV      5   0
0027    TGETS    4   0   4  ; "gsub"
0028    KSTR     6   7      ; "\(\*)""
0029    KSTR     7   8      ; "\%1%1""
0030    CALL     4   2   4
0031    MOV      0   4
0032    MOV      5   0
0033    TGETS    4   0   4  ; "gsub"
0034    KSTR     6   9      ; "\+$"
0035    KSTR     7  10      ; "%0%0"
0036    CALL     4   2   4
0037    MOV      0   4
0038    MOV      5   0
0039    TGETS    4   0   4  ; "gsub"
0040    KSTR     6  11      ; """
0041    KSTR     7  12      ; "\""
0042    CALL     4   2   4
0043    MOV      0   4
0044    MOV      5   0
0045    TGETS    4   0   4  ; "gsub"
0046    KSTR     6  13      ; "%%"
0047    KSTR     7  14      ; "%%%%"
0048    CALL     4   2   4
0049    MOV      0   4
0050    KSTR     4  11      ; """
0051    MOV      5   0
0052    KSTR     6  11      ; """
0053    CAT      4   4   6
0054    RET1     4   2

-- BYTECODE -- win32.lua:115-129
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "string"
0016    JMP      3 => 0021
0017    NOT      3   1
0018    JMP      4 => 0022
0019    KPRI     3   1
0020    JMP      4 => 0022
0021 => KPRI     3   2
0022 => CALL     2   1   2
0023    ISTC     2   1
0024    JMP      2 => 0028
0025    UGET     2   0      ; fs
0026    TGETS    2   2   3  ; "current_dir"
0027    CALL     2   2   1
0028 => MOV      3   2
0029    TGETS    2   2   4  ; "gsub"
0030    KSTR     4   5      ; "[\/]*$"
0031    KSTR     5   6      ; ""
0032    CALL     2   2   4
0033    MOV      1   2
0034    UGET     2   1      ; split_root
0035    MOV      3   0
0036    CALL     2   4   2
0037    MOV      6   3
0038    TGETS    5   3   7  ; "match"
0039    KSTR     7   8      ; "[\/]$"
0040    CALL     5   2   3
0041    ISF          5
0042    JMP      6 => 0049
0043    MOV      5   2
0044    MOV      6   3
0045    MOV      7   4
0046    CAT      5   5   7
0047    RET1     5   2
0048    JMP      5 => 0054
0049 => MOV      5   1
0050    KSTR     6   9      ; "/"
0051    MOV      7   4
0052    CAT      5   5   7
0053    RET1     5   2
0054 => RET0     0   1

-- BYTECODE -- win32.lua:135-138
0001    UGET     1   0      ; split_root
0002    UGET     2   1      ; fs
0003    TGETS    2   2   0  ; "absolute_name"
0004    MOV      3   0
0005    CALL     2   0   2
0006    CALLM    1   4   0
0007    MOV      4   1
0008    MOV      5   2
0009    CAT      4   4   5
0010    RET1     4   2

-- BYTECODE -- win32.lua:147-196
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "string"
0006    JMP      6 => 0011
0007    NOT      6   0
0008    JMP      7 => 0012
0009    KPRI     6   1
0010    JMP      7 => 0012
0011 => KPRI     6   2
0012 => CALL     5   1   2
0013    GGET     5   0      ; "assert"
0014    GGET     6   1      ; "type"
0015    MOV      7   1
0016    CALL     6   2   2
0017    ISEQS    6   2      ; "string"
0018    JMP      6 => 0021
0019    KPRI     6   1
0020    JMP      7 => 0022
0021 => KPRI     6   2
0022 => CALL     5   1   2
0023    GGET     5   0      ; "assert"
0024    GGET     6   1      ; "type"
0025    MOV      7   2
0026    CALL     6   2   2
0027    ISEQS    6   2      ; "string"
0028    JMP      6 => 0031
0029    KPRI     6   1
0030    JMP      7 => 0032
0031 => KPRI     6   2
0032 => CALL     5   1   2
0033    GGET     5   0      ; "assert"
0034    GGET     6   1      ; "type"
0035    MOV      7   3
0036    CALL     6   2   2
0037    ISEQS    6   2      ; "string"
0038    JMP      6 => 0043
0039    NOT      6   3
0040    JMP      7 => 0044
0041    KPRI     6   1
0042    JMP      7 => 0044
0043 => KPRI     6   2
0044 => CALL     5   1   2
0045    GGET     5   0      ; "assert"
0046    GGET     6   1      ; "type"
0047    MOV      7   4
0048    CALL     6   2   2
0049    ISEQS    6   2      ; "string"
0050    JMP      6 => 0055
0051    NOT      6   4
0052    JMP      7 => 0056
0053    KPRI     6   1
0054    JMP      7 => 0056
0055 => KPRI     6   2
0056 => CALL     5   1   2
0057    MOV      5   1
0058    KSTR     6   3      ; ".bat"
0059    CAT      5   5   6
0060    GGET     6   4      ; "io"
0061    TGETS    6   6   5  ; "open"
0062    MOV      7   5
0063    KSTR     8   6      ; "wb"
0064    CALL     6   2   3
0065    IST          6
0066    JMP      7 => 0073
0067    KPRI     7   0
0068    KSTR     8   7      ; "Could not open "
0069    MOV      9   5
0070    KSTR    10   8      ; " for writing."
0071    CAT      8   8  10
0072    RET      7   3
0073 => UGET     7   0      ; path
0074    TGETS    7   7   9  ; "package_paths"
0075    MOV      8   2
0076    CALL     7   3   2
0077    TNEW     9   3
0078    KSTR    10  10      ; "package.path="
0079    UGET    11   1      ; util
0080    TGETS   11  11  11  ; "LQ"
0081    MOV     12   7
0082    KSTR    13  12      ; ";"
0083    CAT     12  12  13
0084    CALL    11   2   2
0085    KSTR    12  13      ; "..package.path"
0086    CAT     10  10  12
0087    TSETB   10   9   1
0088    KSTR    10  14      ; "package.cpath="
0089    UGET    11   1      ; util
0090    TGETS   11  11  11  ; "LQ"
0091    MOV     12   8
0092    KSTR    13  12      ; ";"
0093    CAT     12  12  13
0094    CALL    11   2   2
0095    KSTR    12  15      ; "..package.cpath"
0096    CAT     10  10  12
0097    TSETB   10   9   2
0098    ISEQS    1  16      ; "luarocks"
0099    JMP     10 => 0102
0100    ISNES    1  17      ; "luarocks-admin"
0101    JMP     10 => 0120
0102 => TNEW    10   3
0103    KSTR    11  10      ; "package.path="
0104    UGET    12   1      ; util
0105    TGETS   12  12  11  ; "LQ"
0106    GGET    13  18      ; "package"
0107    TGETS   13  13  19  ; "path"
0108    CALL    12   2   2
0109    CAT     11  11  12
0110    TSETB   11  10   1
0111    KSTR    11  14      ; "package.cpath="
0112    UGET    12   1      ; util
0113    TGETS   12  12  11  ; "LQ"
0114    GGET    13  18      ; "package"
0115    TGETS   13  13  20  ; "cpath"
0116    CALL    12   2   2
0117    CAT     11  11  12
0118    TSETB   11  10   2
0119    MOV      9  10
0120 => ISF          3
0121    JMP     10 => 0136
0122    ISF          4
0123    JMP     10 => 0136
0124    KSTR    10  21      ; "local k,l,_=pcall(require,'luarocks.load"~
0125    KSTR    11  22      ; "and l.add_context('"
0126    MOV     12   3
0127    KSTR    13  23      ; "','"
0128    MOV     14   4
0129    KSTR    15  24      ; "')"
0130    CAT     10  10  15
0131    GGET    11  25      ; "table"
0132    TGETS   11  11  26  ; "insert"
0133    MOV     12   9
0134    MOV     13  10
0135    CALL    11   1   3
0136 => TDUP    10  31
0137    UGET    11   2      ; fs
0138    TGETS   11  11  27  ; "Qb"
0139    UGET    12   3      ; dir
0140    TGETS   12  12  19  ; "path"
0141    UGET    13   4      ; cfg
0142    TGETS   13  13  28  ; "variables"
0143    TGETS   13  13  29  ; "LUA_BINDIR"
0144    UGET    14   4      ; cfg
0145    TGETS   14  14  30  ; "lua_interpreter"
0146    CALL    12   0   3
0147    CALLM   11   2   0
0148    TSETB   11  10   1
0149    UGET    11   2      ; fs
0150    TGETS   11  11  27  ; "Qb"
0151    GGET    12  25      ; "table"
0152    TGETS   12  12  32  ; "concat"
0153    MOV     13   9
0154    KSTR    14  12      ; ";"
0155    CALL    12   0   3
0156    CALLM   11   2   0
0157    TSETB   11  10   3
0158    ISF          0
0159    JMP     11 => 0166
0160    UGET    11   2      ; fs
0161    TGETS   11  11  27  ; "Qb"
0162    MOV     12   0
0163    CALL    11   2   2
0164    IST         11
0165    JMP     12 => 0167
0166 => KSTR    11  33      ; "%I%"
0167 => TSETB   11  10   4
0168    VARG    11   0   5
0169    TSETM   11   0      ; 5
0170    MOV     12   6
0171    TGETS   11   6  34  ; "write"
0172    KSTR    13  35      ; "@echo off\r\n"
0173    CALL    11   1   3
0174    MOV     12   6
0175    TGETS   11   6  34  ; "write"
0176    KSTR    13  36      ; "setlocal\r\n"
0177    CALL    11   1   3
0178    IST          0
0179    JMP     11 => 0186
0180    MOV     12   6
0181    TGETS   11   6  34  ; "write"
0182    KSTR    13  37      ; "IF "%*"=="" (set I=-i) ELSE (set I=)"
0183    KSTR    14  38      ; "\r\n"
0184    CAT     13  13  14
0185    CALL    11   1   3
0186 => MOV     12   6
0187    TGETS   11   6  34  ; "write"
0188    KSTR    13  39      ; "set "
0189    UGET    14   2      ; fs
0190    TGETS   14  14  27  ; "Qb"
0191    KSTR    15  40      ; "LUAROCKS_SYSCONFDIR="
0192    UGET    16   4      ; cfg
0193    TGETS   16  16  41  ; "sysconfdir"
0194    CAT     15  15  16
0195    CALL    14   2   2
0196    KSTR    15  38      ; "\r\n"
0197    CAT     13  13  15
0198    CALL    11   1   3
0199    MOV     12   6
0200    TGETS   11   6  34  ; "write"
0201    GGET    13  25      ; "table"
0202    TGETS   13  13  32  ; "concat"
0203    MOV     14  10
0204    KSTR    15  42      ; " "
0205    CALL    13   2   3
0206    KSTR    14  43      ; " %*\r\n"
0207    CAT     13  13  14
0208    CALL    11   1   3
0209    MOV     12   6
0210    TGETS   11   6  34  ; "write"
0211    KSTR    13  44      ; "exit /b %ERRORLEVEL%\r\n"
0212    CALL    11   1   3
0213    MOV     12   6
0214    TGETS   11   6  45  ; "close"
0215    CALL    11   1   2
0216    KPRI    11   2
0217    RET1    11   2

-- BYTECODE -- win32.lua:198-204
0001    MOV      2   0
0002    TGETS    1   0   0  ; "lower"
0003    CALL     1   2   2
0004    MOV      0   1
0005    MOV      2   0
0006    TGETS    1   0   1  ; "match"
0007    KSTR     3   2      ; "%.bat$"
0008    CALL     1   2   3
0009    IST          1
0010    JMP      2 => 0017
0011    MOV      2   0
0012    TGETS    1   0   1  ; "match"
0013    KSTR     3   3      ; "%.exe$"
0014    CALL     1   2   3
0015    ISF          1
0016    JMP      2 => 0019
0017 => KPRI     1   2
0018    RET1     1   2
0019 => KPRI     1   1
0020    RET1     1   2

-- BYTECODE -- win32.lua:206-226
0001    UGET     2   0      ; fs
0002    TGETS    2   2   0  ; "copy"
0003    MOV      3   0
0004    MOV      4   1
0005    CALL     2   3   3
0006    IST          2
0007    JMP      4 => 0011
0008    KPRI     4   0
0009    MOV      5   3
0010    RET      4   3
0011 => KSTR     4   1      ; "%.[Ee][Xx][Ee]$"
0012    UGET     5   1      ; dir
0013    TGETS    5   5   2  ; "base_name"
0014    MOV      6   0
0015    CALL     5   2   2
0016    UGET     6   1      ; dir
0017    TGETS    6   6   3  ; "dir_name"
0018    MOV      7   1
0019    CALL     6   2   2
0020    MOV      1   6
0021    MOV      7   5
0022    TGETS    6   5   4  ; "match"
0023    MOV      8   4
0024    CALL     6   2   3
0025    ISF          6
0026    JMP      7 => 0079
0027    MOV      7   5
0028    TGETS    6   5   5  ; "gsub"
0029    MOV      8   4
0030    KSTR     9   6      ; ".lua"
0031    CALL     6   2   4
0032    MOV      5   6
0033    MOV      6   1
0034    KSTR     7   7      ; "/"
0035    MOV      8   5
0036    CAT      6   6   8
0037    GGET     7   8      ; "io"
0038    TGETS    7   7   9  ; "open"
0039    MOV      8   6
0040    KSTR     9  10      ; "w"
0041    CALL     7   2   3
0042    IST          7
0043    JMP      8 => 0050
0044    KPRI     8   0
0045    KSTR     9  11      ; "Could not open "
0046    MOV     10   6
0047    KSTR    11  12      ; " for writing."
0048    CAT      9   9  11
0049    RET      8   3
0050 => MOV      9   7
0051    TGETS    8   7  13  ; "write"
0052    KSTR    10  14      ; "package.path=""
0053    GGET    11  15      ; "package"
0054    TGETS   11  11  16  ; "path"
0055    MOV     12  11
0056    TGETS   11  11   5  ; "gsub"
0057    KSTR    13  17      ; "\"
0058    KSTR    14  18      ; "\\"
0059    CALL    11   2   4
0060    KSTR    12  19      ; ";"..package.path\n"
0061    CAT     10  10  12
0062    CALL     8   1   3
0063    MOV      9   7
0064    TGETS    8   7  13  ; "write"
0065    KSTR    10  20      ; "package.cpath=""
0066    GGET    11  15      ; "package"
0067    TGETS   11  11  16  ; "path"
0068    MOV     12  11
0069    TGETS   11  11   5  ; "gsub"
0070    KSTR    13  17      ; "\"
0071    KSTR    14  18      ; "\\"
0072    CALL    11   2   4
0073    KSTR    12  21      ; ";"..package.cpath\n"
0074    CAT     10  10  12
0075    CALL     8   1   3
0076    MOV      9   7
0077    TGETS    8   7  22  ; "close"
0078    CALL     8   1   2
0079 => KPRI     6   2
0080    RET1     6   2

-- BYTECODE -- win32.lua:239-242
0001    GGET     2   0      ; "os"
0002    TGETS    2   2   1  ; "remove"
0003    MOV      3   0
0004    CALL     2   1   2
0005    GGET     2   0      ; "os"
0006    TGETS    2   2   2  ; "rename"
0007    MOV      3   1
0008    MOV      4   0
0009    CALLT    2   3

-- BYTECODE -- win32.lua:244-258
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "absolute_name"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    UGET     1   1      ; dir
0007    TGETS    1   1   1  ; "normalize"
0008    MOV      2   0
0009    CALL     1   2   2
0010    MOV      0   1
0011    GGET     1   2      ; "io"
0012    TGETS    1   1   3  ; "open"
0013    MOV      2   0
0014    KSTR     3   4      ; "r"
0015    CALL     1   4   3
0016    ISNEN    3   0      ; 13
0017    JMP      4 => 0032
0018    GGET     4   2      ; "io"
0019    TGETS    4   4   3  ; "open"
0020    MOV      5   0
0021    KSTR     6   5      ; "\"
0022    CAT      5   5   6
0023    KSTR     6   4      ; "r"
0024    CALL     4   4   3
0025    MOV      3   6
0026    MOV      2   5
0027    MOV      1   4
0028    ISNEN    3   1      ; 2
0029    JMP      4 => 0032
0030    KPRI     4   2
0031    RET1     4   2
0032 => ISF          1
0033    JMP      4 => 0037
0034    MOV      5   1
0035    TGETS    4   1   6  ; "close"
0036    CALL     4   1   2
0037 => KPRI     4   1
0038    RET1     4   2

-- BYTECODE -- win32.lua:260-277
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "absolute_name"
0003    MOV      2   0
0004    CALL     1   2   2
0005    MOV      0   1
0006    UGET     1   1      ; dir
0007    TGETS    1   1   1  ; "normalize"
0008    MOV      2   0
0009    CALL     1   2   2
0010    MOV      0   1
0011    GGET     1   2      ; "io"
0012    TGETS    1   1   3  ; "open"
0013    MOV      2   0
0014    KSTR     3   4      ; "r"
0015    CALL     1   4   3
0016    ISNEN    3   0      ; 13
0017    JMP      4 => 0037
0018    GGET     4   2      ; "io"
0019    TGETS    4   4   3  ; "open"
0020    MOV      5   0
0021    KSTR     6   5      ; "\"
0022    CAT      5   5   6
0023    KSTR     6   4      ; "r"
0024    CALL     4   4   3
0025    MOV      3   6
0026    MOV      2   5
0027    MOV      1   4
0028    ISNEN    3   1      ; 2
0029    JMP      4 => 0033
0030    KPRI     4   1
0031    RET1     4   2
0032    JMP      4 => 0037
0033 => ISNEN    3   2      ; 22
0034    JMP      4 => 0037
0035    KPRI     4   2
0036    RET1     4   2
0037 => ISF          1
0038    JMP      4 => 0044
0039    MOV      5   1
0040    TGETS    4   1   6  ; "close"
0041    CALL     4   1   2
0042    KPRI     4   2
0043    RET1     4   2
0044 => KPRI     4   1
0045    RET1     4   2

-- BYTECODE -- win32.lua:285-308
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    MOV      2   0
0007    CALL     1   2   2
0008    MOV      0   1
0009    KPRI     1   0
0010    KSTR     2   2      ; "tmpluarockstestwritable.deleteme"
0011    UGET     3   1      ; fs
0012    TGETS    3   3   3  ; "is_dir"
0013    MOV      4   0
0014    CALL     3   2   2
0015    ISF          3
0016    JMP      4 => 0049
0017    UGET     3   0      ; dir
0018    TGETS    3   3   4  ; "path"
0019    MOV      4   0
0020    MOV      5   2
0021    CALL     3   2   3
0022    GGET     4   5      ; "io"
0023    TGETS    4   4   6  ; "open"
0024    MOV      5   3
0025    KSTR     6   7      ; "wb"
0026    CALL     4   2   3
0027    ISNEP    4   0
0028    JMP      5 => 0031
0029    KPRI     1   1
0030    JMP      5 => 0032
0031 => KPRI     1   2
0032 => ISF          4
0033    JMP      5 => 0037
0034    MOV      6   4
0035    TGETS    5   4   8  ; "close"
0036    CALL     5   1   2
0037 => ISF          1
0038    JMP      5 => 0044
0039    UGET     5   1      ; fs
0040    TGETS    5   5   9  ; "exists"
0041    MOV      6   3
0042    CALL     5   2   2
0043    MOV      1   5
0044 => GGET     5  10      ; "os"
0045    TGETS    5   5  11  ; "remove"
0046    MOV      6   3
0047    CALL     5   1   2
0048    JMP      3 => 0064
0049 => GGET     3   5      ; "io"
0050    TGETS    3   3   6  ; "open"
0051    MOV      4   0
0052    KSTR     5  12      ; "r+b"
0053    CALL     3   2   3
0054    ISNEP    3   0
0055    JMP      4 => 0058
0056    KPRI     1   1
0057    JMP      4 => 0059
0058 => KPRI     1   2
0059 => ISF          3
0060    JMP      4 => 0064
0061    MOV      5   3
0062    TGETS    4   3   8  ; "close"
0063    CALL     4   1   2
0064 => RET1     1   2

-- BYTECODE -- win32.lua:314-325
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    UGET     1   0      ; dir
0012    TGETS    1   1   3  ; "normalize"
0013    MOV      2   0
0014    CALL     1   2   2
0015    MOV      0   1
0016    GGET     1   4      ; "os"
0017    TGETS    1   1   5  ; "getenv"
0018    KSTR     2   6      ; "TMP"
0019    CALL     1   2   2
0020    KSTR     2   7      ; "/luarocks_"
0021    MOV      4   0
0022    TGETS    3   0   8  ; "gsub"
0023    KSTR     5   9      ; "/"
0024    KSTR     6  10      ; "_"
0025    CALL     3   2   4
0026    KSTR     4  11      ; "-"
0027    GGET     5  12      ; "tostring"
0028    GGET     6  13      ; "math"
0029    TGETS    6   6  14  ; "floor"
0030    GGET     7  13      ; "math"
0031    TGETS    7   7  15  ; "random"
0032    CALL     7   2   1
0033    MULVN    7   7   0  ; 10000
0034    CALL     6   0   2
0035    CALLM    5   2   0
0036    CAT      1   1   5
0037    UGET     2   1      ; fs
0038    TGETS    2   2  16  ; "make_dir"
0039    MOV      3   1
0040    CALL     2   3   2
0041    ISF          2
0042    JMP      4 => 0045
0043    RET1     1   2
0044    JMP      4 => 0048
0045 => KPRI     4   0
0046    MOV      5   3
0047    RET      4   3
0048 => RET0     0   1

-- BYTECODE -- win32.lua:327-329
0001    GGET     0   0      ; "os"
0002    TGETS    0   0   1  ; "getenv"
0003    KSTR     1   2      ; "TMP"
0004    CALL     0   2   2
0005    GGET     1   0      ; "os"
0006    TGETS    1   1   3  ; "tmpname"
0007    CALL     1   2   1
0008    CAT      0   0   1
0009    RET1     0   2

-- BYTECODE -- win32.lua:331-333
0001    GGET     0   0      ; "os"
0002    TGETS    0   0   1  ; "getenv"
0003    KSTR     1   2      ; "USERNAME"
0004    CALLT    0   2

-- BYTECODE -- win32.lua:335-337
0001    KSTR     2   0      ; "SET %s=%s"
0002    MOV      3   2
0003    TGETS    2   2   1  ; "format"
0004    MOV      4   0
0005    MOV      5   1
0006    CALLT    2   4

-- BYTECODE -- win32.lua:339-341
0001    UGET     0   0      ; dir
0002    TGETS    0   0   0  ; "path"
0003    UGET     1   1      ; fs
0004    TGETS    1   1   1  ; "system_temp_dir"
0005    CALL     1   2   1
0006    KSTR     2   2      ; "cache"
0007    CALLT    0   3

-- BYTECODE -- win32.lua:0-344
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.core.cfg"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.path"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.util"
0016    CALL     5   2   2
0017    KSTR     6   6      ; "type NUL && "
0018    GGET     7   7      ; "io"
0019    TGETS    7   7   8  ; "popen"
0020    GGET     8   9      ; "os"
0021    TGETS    8   8  10  ; "execute"
0022    GGET     9   7      ; "io"
0023    FNEW    10  11      ; win32.lua:18
0024    TSETS   10   9   8  ; "popen"
0025    GGET     9   9      ; "os"
0026    FNEW    10  12      ; win32.lua:19
0027    TSETS   10   9  10  ; "execute"
0028    FNEW     9  14      ; win32.lua:24
0029    TSETS    9   0  13  ; "quiet"
0030    FNEW     9  16      ; win32.lua:31
0031    TSETS    9   0  15  ; "quiet_stderr"
0032    FNEW     9  17      ; win32.lua:38
0033    FNEW    10  19      ; win32.lua:67
0034    TSETS   10   0  18  ; "Q"
0035    FNEW    10  21      ; win32.lua:90
0036    TSETS   10   0  20  ; "Qb"
0037    FNEW    10  23      ; win32.lua:115
0038    TSETS   10   0  22  ; "absolute_name"
0039    FNEW    10  25      ; win32.lua:135
0040    TSETS   10   0  24  ; "root_of"
0041    FNEW    10  27      ; win32.lua:147
0042    TSETS   10   0  26  ; "wrap_script"
0043    FNEW    10  29      ; win32.lua:198
0044    TSETS   10   0  28  ; "is_actual_binary"
0045    FNEW    10  31      ; win32.lua:206
0046    TSETS   10   0  30  ; "copy_binary"
0047    FNEW    10  33      ; win32.lua:239
0048    TSETS   10   0  32  ; "replace_file"
0049    FNEW    10  35      ; win32.lua:244
0050    TSETS   10   0  34  ; "is_dir"
0051    FNEW    10  37      ; win32.lua:260
0052    TSETS   10   0  36  ; "is_file"
0053    FNEW    10  39      ; win32.lua:285
0054    TSETS   10   0  38  ; "is_writable"
0055    FNEW    10  41      ; win32.lua:314
0056    TSETS   10   0  40  ; "make_temp_dir"
0057    FNEW    10  43      ; win32.lua:327
0058    TSETS   10   0  42  ; "tmpname"
0059    FNEW    10  45      ; win32.lua:331
0060    TSETS   10   0  44  ; "current_user"
0061    FNEW    10  47      ; win32.lua:335
0062    TSETS   10   0  46  ; "export_cmd"
0063    FNEW    10  49      ; win32.lua:339
0064    TSETS   10   0  48  ; "system_cache_dir"
0065    UCLO     0 => 0066
0066 => RET1     0   2

-----------------------
-- BYTECODE -- tools.lua:11-11
0001    UGET     2   0      ; cfg
0002    TGETS    2   2   0  ; "variables"
0003    TGETV    2   2   1
0004    RET1     2   2

-- BYTECODE -- tools.lua:18-29
0001    MOV      4   0
0002    TGETS    3   0   0  ; "match"
0003    KSTR     5   1      ; "^([A-Za-z]:)"
0004    CALL     3   2   3
0005    KSTR     4   2      ; " & "
0006    ISF          2
0007    JMP      5 => 0009
0008    KSTR     4   3      ; " && "
0009 => KSTR     5   4      ; "cd "
0010    UGET     6   0      ; fs
0011    TGETS    6   6   5  ; "Q"
0012    MOV      7   0
0013    CALL     6   2   2
0014    MOV      7   4
0015    MOV      8   1
0016    CAT      5   5   8
0017    ISF          3
0018    JMP      6 => 0023
0019    MOV      6   3
0020    KSTR     7   2      ; " & "
0021    MOV      8   5
0022    CAT      5   6   8
0023 => RET1     5   2

-- BYTECODE -- tools.lua:36-44
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "normalize"
0006    MOV      2   0
0007    CALL     1   2   2
0008    MOV      0   1
0009    UGET     1   1      ; fs
0010    TGETS    1   1   2  ; "execute_quiet"
0011    UGET     2   2      ; vars
0012    TGETS    2   2   3  ; "MKDIR"
0013    KSTR     3   4      ; " -p "
0014    CAT      2   2   3
0015    MOV      3   0
0016    CALL     1   1   3
0017    UGET     1   1      ; fs
0018    TGETS    1   1   5  ; "is_dir"
0019    MOV      2   0
0020    CALL     1   2   2
0021    IST          1
0022    JMP      1 => 0028
0023    KPRI     1   1
0024    KSTR     2   6      ; "failed making directory "
0025    MOV      3   0
0026    CAT      2   2   3
0027    RET      1   3
0028 => KPRI     1   2
0029    RET1     1   2

-- BYTECODE -- tools.lua:50-53
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute_quiet"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "RMDIR"
0008    MOV      3   0
0009    CALL     1   1   3
0010    RET0     0   1

-- BYTECODE -- tools.lua:59-62
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute_quiet"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "RMDIR"
0008    MOV      3   0
0009    CALL     1   1   3
0010    RET0     0   1

-- BYTECODE -- tools.lua:69-78
0001    GGET     2   0      ; "assert"
0002    ISFC     3   0
0003    JMP      3 => 0005
0004    MOV      3   1
0005 => CALL     2   1   2
0006    MOV      3   1
0007    TGETS    2   1   1  ; "match"
0008    KSTR     4   2      ; "[/\]$"
0009    CALL     2   2   3
0010    ISF          2
0011    JMP      3 => 0018
0012    MOV      3   1
0013    TGETS    2   1   3  ; "sub"
0014    KSHORT   4   1
0015    KSHORT   5  -2
0016    CALL     2   2   4
0017    MOV      1   2
0018 => UGET     2   0      ; fs
0019    TGETS    2   2   4  ; "execute"
0020    UGET     3   1      ; vars
0021    TGETS    3   3   5  ; "CP"
0022    MOV      4   0
0023    MOV      5   1
0024    CALL     2   2   4
0025    ISF          2
0026    JMP      3 => 0030
0027    KPRI     3   2
0028    RET1     3   2
0029    JMP      3 => 0037
0030 => KPRI     3   1
0031    KSTR     4   6      ; "Failed copying "
0032    MOV      5   0
0033    KSTR     6   7      ; " to "
0034    MOV      7   1
0035    CAT      4   4   7
0036    RET      3   3
0037 => RET0     0   1

-- BYTECODE -- tools.lua:85-95
0001    GGET     2   0      ; "assert"
0002    ISFC     3   0
0003    JMP      3 => 0005
0004    MOV      3   1
0005 => CALL     2   1   2
0006    UGET     2   0      ; fs
0007    TGETS    2   2   1  ; "is_dir"
0008    MOV      3   0
0009    CALL     2   2   2
0010    IST          2
0011    JMP      2 => 0017
0012    KPRI     2   1
0013    MOV      3   0
0014    KSTR     4   2      ; " is not a directory"
0015    CAT      3   3   4
0016    RET      2   3
0017 => UGET     2   0      ; fs
0018    TGETS    2   2   3  ; "make_dir"
0019    MOV      3   1
0020    CALL     2   2   2
0021    ISF          2
0022    JMP      3 => 0038
0023    UGET     2   0      ; fs
0024    TGETS    2   2   4  ; "execute_quiet"
0025    UGET     3   1      ; vars
0026    TGETS    3   3   5  ; "CP"
0027    KSTR     4   6      ; "-dR"
0028    MOV      5   0
0029    KSTR     6   7      ; "\*.*"
0030    CAT      5   5   6
0031    MOV      6   1
0032    CALL     2   2   5
0033    ISF          2
0034    JMP      3 => 0038
0035    KPRI     2   2
0036    RET1     2   2
0037    JMP      2 => 0045
0038 => KPRI     2   1
0039    KSTR     3   8      ; "Failed copying "
0040    MOV      4   0
0041    KSTR     5   9      ; " to "
0042    MOV      6   1
0043    CAT      3   3   6
0044    RET      2   3
0045 => RET0     0   1

-- BYTECODE -- tools.lua:101-105
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    GGET     1   0      ; "assert"
0005    MOV      3   0
0006    TGETS    2   0   1  ; "match"
0007    KSTR     4   2      ; "^[a-zA-Z]?:?[\/]"
0008    CALL     2   0   3
0009    CALLM    1   1   0
0010    UGET     1   0      ; fs
0011    TGETS    1   1   3  ; "execute_quiet"
0012    KSTR     2   4      ; "if exist "
0013    UGET     3   0      ; fs
0014    TGETS    3   3   5  ; "Q"
0015    MOV      4   0
0016    KSTR     5   6      ; "\*"
0017    CAT      4   4   5
0018    CALL     3   2   2
0019    KSTR     4   7      ; " ( RMDIR /S /Q "
0020    UGET     5   0      ; fs
0021    TGETS    5   5   5  ; "Q"
0022    MOV      6   0
0023    CALL     5   2   2
0024    KSTR     6   8      ; " ) else ( DEL /Q /F "
0025    UGET     7   0      ; fs
0026    TGETS    7   7   5  ; "Q"
0027    MOV      8   0
0028    CALL     7   2   2
0029    KSTR     8   9      ; " )"
0030    CAT      2   2   8
0031    CALL     1   1   2
0032    RET0     0   1

-- BYTECODE -- tools.lua:112-132
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "string"
0006    JMP      2 => 0011
0007    NOT      2   0
0008    JMP      3 => 0012
0009    KPRI     2   1
0010    JMP      3 => 0012
0011 => KPRI     2   2
0012 => CALL     1   1   2
0013    IST          0
0014    JMP      1 => 0019
0015    UGET     1   0      ; fs
0016    TGETS    1   1   3  ; "current_dir"
0017    CALL     1   2   1
0018    MOV      0   1
0019 => UGET     1   0      ; fs
0020    TGETS    1   1   4  ; "is_dir"
0021    MOV      2   0
0022    CALL     1   2   2
0023    IST          1
0024    JMP      1 => 0027
0025    TNEW     1   0
0026    RET1     1   2
0027 => TNEW     1   0
0028    GGET     2   5      ; "io"
0029    TGETS    2   2   6  ; "popen"
0030    UGET     3   0      ; fs
0031    TGETS    3   3   7  ; "command_at"
0032    MOV      4   0
0033    UGET     5   0      ; fs
0034    TGETS    5   5   8  ; "quiet_stderr"
0035    UGET     6   1      ; vars
0036    TGETS    6   6   9  ; "FIND"
0037    CALL     5   2   2
0038    KPRI     6   2
0039    CALL     3   0   4
0040    CALLM    2   2   0
0041    MOV      4   2
0042    TGETS    3   2  10  ; "lines"
0043    CALL     3   4   2
0044    JMP      6 => 0070
0045 => MOV      8   6
0046    TGETS    7   6  11  ; "sub"
0047    KSHORT   9   1
0048    KSHORT  10   2
0049    CALL     7   2   4
0050    ISEQS    7  12      ; ".\"
0051    JMP      8 => 0054
0052    ISNES    7  13      ; "./"
0053    JMP      8 => 0059
0054 => MOV      9   6
0055    TGETS    8   6  11  ; "sub"
0056    KSHORT  10   3
0057    CALL     8   2   3
0058    MOV      6   8
0059 => ISEQS    6  14      ; "."
0060    JMP      8 => 0070
0061    GGET     8  15      ; "table"
0062    TGETS    8   8  16  ; "insert"
0063    MOV      9   1
0064    MOV     11   6
0065    TGETS   10   6  17  ; "gsub"
0066    KSTR    12  18      ; "\"
0067    KSTR    13  19      ; "/"
0068    CALL    10   2   4
0069    CALL     8   1   3
0070 => ITERC    6   2   3
0071    ITERL    6 => 0045
0072    MOV      4   2
0073    TGETS    3   2  20  ; "close"
0074    CALL     3   1   2
0075    RET1     1   2

-- BYTECODE -- tools.lua:139-145
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "execute_quiet"
0003    UGET     2   1      ; vars
0004    TGETS    2   2   1  ; "SEVENZ"
0005    KSTR     3   2      ; " -aoa a -tzip"
0006    CAT      2   2   3
0007    MOV      3   0
0008    VARG     4   0   1
0009    CALLM    1   2   2
0010    ISF          1
0011    JMP      2 => 0015
0012    KPRI     1   2
0013    RET1     1   2
0014    JMP      1 => 0020
0015 => KPRI     1   0
0016    KSTR     2   3      ; "failed compressing "
0017    MOV      3   0
0018    CAT      2   2   3
0019    RET      1   3
0020 => RET0     0   1

-- BYTECODE -- tools.lua:150-157
0001    GGET     1   0      ; "assert"
0002    MOV      2   0
0003    CALL     1   1   2
0004    UGET     1   0      ; fs
0005    TGETS    1   1   1  ; "execute_quiet"
0006    UGET     2   1      ; vars
0007    TGETS    2   2   2  ; "SEVENZ"
0008    KSTR     3   3      ; " -aoa x"
0009    CAT      2   2   3
0010    MOV      3   0
0011    CALL     1   2   3
0012    ISF          1
0013    JMP      2 => 0017
0014    KPRI     1   2
0015    RET1     1   2
0016    JMP      1 => 0022
0017 => KPRI     1   0
0018    KSTR     2   4      ; "failed extracting "
0019    MOV      3   0
0020    CAT      2   2   3
0021    RET      1   3
0022 => RET0     0   1

-- BYTECODE -- tools.lua:159-184
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   1
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    ISEQP    2   0
0013    JMP      4 => 0021
0014    GGET     4   1      ; "type"
0015    MOV      5   2
0016    CALL     4   2   2
0017    ISEQS    4   2      ; "string"
0018    JMP      4 => 0021
0019    KPRI     4   1
0020    JMP      5 => 0022
0021 => KPRI     4   2
0022 => CALL     3   1   2
0023    MOV      4   1
0024    TGETS    3   1   3  ; "gsub"
0025    KSTR     5   4      ; "%."
0026    MOV      6   0
0027    KSTR     7   5      ; "$"
0028    CAT      5   5   7
0029    KSTR     6   6      ; ""
0030    CALL     3   2   4
0031    UGET     4   0      ; dir
0032    TGETS    4   4   7  ; "dir_name"
0033    MOV      5   3
0034    CALL     4   2   2
0035    UGET     5   1      ; fs
0036    TGETS    5   5   8  ; "absolute_name"
0037    MOV      6   1
0038    CALL     5   2   2
0039    MOV      1   5
0040    UGET     5   2      ; vars
0041    TGETS    5   5   9  ; "SEVENZ"
0042    KSTR     6  10      ; " -aoa -t* -o"
0043    UGET     7   1      ; fs
0044    TGETS    7   7  11  ; "Q"
0045    MOV      8   4
0046    CALL     7   2   2
0047    KSTR     8  12      ; " x "
0048    UGET     9   1      ; fs
0049    TGETS    9   9  11  ; "Q"
0050    MOV     10   1
0051    CALL     9   2   2
0052    CAT      5   5   9
0053    UGET     6   1      ; fs
0054    TGETS    6   6  13  ; "execute_quiet"
0055    MOV      7   5
0056    CALL     6   3   2
0057    IST          6
0058    JMP      8 => 0064
0059    KPRI     8   0
0060    KSTR     9  14      ; "failed extracting "
0061    MOV     10   1
0062    CAT      9   9  10
0063    RET      8   3
0064 => ISF          2
0065    JMP      8 => 0090
0066    UGET     8   1      ; fs
0067    TGETS    8   8   8  ; "absolute_name"
0068    MOV      9   2
0069    CALL     8   2   2
0070    MOV      2   8
0071    UGET     8   1      ; fs
0072    TGETS    8   8   8  ; "absolute_name"
0073    MOV      9   3
0074    CALL     8   2   2
0075    MOV      3   8
0076    GGET     8  15      ; "os"
0077    TGETS    8   8  16  ; "rename"
0078    MOV      9   3
0079    MOV     10   2
0080    CALL     8   3   3
0081    MOV      7   9
0082    MOV      6   8
0083    IST          6
0084    JMP      8 => 0090
0085    KPRI     8   0
0086    KSTR     9  17      ; "failed creating new file "
0087    MOV     10   2
0088    CAT      9   9  10
0089    RET      8   3
0090 => KPRI     8   2
0091    RET1     8   2

-- BYTECODE -- tools.lua:191-193
0001    UGET     2   0      ; sevenz
0002    KSTR     3   0      ; "gz"
0003    MOV      4   0
0004    MOV      5   1
0005    CALLT    2   4

-- BYTECODE -- tools.lua:200-202
0001    UGET     2   0      ; sevenz
0002    KSTR     3   0      ; "bz2"
0003    MOV      4   0
0004    MOV      5   1
0005    CALLT    2   4

-- BYTECODE -- tools.lua:206-216
0001    TNEW     0   0
0002    GGET     1   0      ; "assert"
0003    GGET     2   1      ; "io"
0004    TGETS    2   2   2  ; "popen"
0005    KSTR     3   3      ; "wmic UserAccount get name"
0006    CALL     2   0   2
0007    CALLM    1   2   0
0008    MOV      3   1
0009    TGETS    2   1   4  ; "lines"
0010    CALL     2   4   2
0011    JMP      5 => 0029
0012 => MOV      7   5
0013    TGETS    6   5   5  ; "gsub"
0014    KSTR     8   6      ; "%s+$"
0015    KSTR     9   7      ; ""
0016    CALL     6   2   4
0017    MOV      5   6
0018    ISEQS    5   7      ; ""
0019    JMP      6 => 0029
0020    ISEQS    5   8      ; "Name"
0021    JMP      6 => 0029
0022    ISEQS    5   9      ; "Administrator"
0023    JMP      6 => 0029
0024    GGET     6  10      ; "table"
0025    TGETS    6   6  11  ; "insert"
0026    MOV      7   0
0027    MOV      8   5
0028    CALL     6   1   3
0029 => ITERC    5   2   3
0030    ITERL    5 => 0012
0031    RET1     0   2

-- BYTECODE -- tools.lua:224-277
0001    GGET     3   0      ; "assert"
0002    ISFC     4   0
0003    JMP      4 => 0007
0004    ISFC     4   1
0005    JMP      4 => 0007
0006    MOV      4   2
0007 => CALL     3   1   2
0008    ISNES    2   1      ; "user"
0009    JMP      3 => 0090
0010    KPRI     3   0
0011    ISNES    1   2      ; "read"
0012    JMP      4 => 0015
0013    KSTR     3   3      ; "(R,W,M)"
0014    JMP      4 => 0018
0015 => ISNES    1   4      ; "exec"
0016    JMP      4 => 0018
0017    KSTR     3   5      ; "(F)"
0018 => KPRI     4   0
0019    UGET     5   0      ; fs
0020    TGETS    5   5   6  ; "execute_quiet"
0021    KSTR     6   7      ; "takeown /f "
0022    UGET     7   0      ; fs
0023    TGETS    7   7   8  ; "Q"
0024    MOV      8   0
0025    CALL     7   2   2
0026    CAT      6   6   7
0027    CALL     5   2   2
0028    MOV      4   5
0029    IST          4
0030    JMP      5 => 0034
0031    KPRI     5   1
0032    KSTR     6   9      ; "Could not take ownership of the given fi"~
0033    RET      5   3
0034 => UGET     5   0      ; fs
0035    TGETS    5   5   6  ; "execute_quiet"
0036    UGET     6   1      ; vars
0037    TGETS    6   6  10  ; "ICACLS"
0038    KSTR     7  11      ; " "
0039    UGET     8   0      ; fs
0040    TGETS    8   8   8  ; "Q"
0041    MOV      9   0
0042    CALL     8   2   2
0043    KSTR     9  12      ; " /inheritance:d /grant:r "%USERNAME%":"
0044    MOV     10   3
0045    CAT      6   6  10
0046    CALL     5   2   2
0047    MOV      4   5
0048    IST          4
0049    JMP      5 => 0057
0050    KPRI     5   1
0051    KSTR     6  13      ; "Failed setting permission "
0052    MOV      7   1
0053    KSTR     8  14      ; " for "
0054    MOV      9   2
0055    CAT      6   6   9
0056    RET      5   3
0057 => GGET     5  15      ; "pairs"
0058    UGET     6   2      ; get_system_users
0059    CALL     6   0   1
0060    CALLM    5   4   0
0061    ISNEXT   8 => 0087
0062 => UGET    10   0      ; fs
0063    TGETS   10  10   6  ; "execute_quiet"
0064    UGET    11   1      ; vars
0065    TGETS   11  11  10  ; "ICACLS"
0066    KSTR    12  11      ; " "
0067    UGET    13   0      ; fs
0068    TGETS   13  13   8  ; "Q"
0069    MOV     14   0
0070    CALL    13   2   2
0071    KSTR    14  16      ; " /remove "
0072    UGET    15   0      ; fs
0073    TGETS   15  15   8  ; "Q"
0074    MOV     16   9
0075    CALL    15   2   2
0076    CAT     11  11  15
0077    CALL    10   2   2
0078    IST         10
0079    JMP     11 => 0087
0080    KPRI    11   1
0081    KSTR    12  13      ; "Failed setting permission "
0082    MOV     13   1
0083    KSTR    14  14      ; " for "
0084    MOV     15   2
0085    CAT     12  12  15
0086    RET     11   3
0087 => ITERN    8   3   3
0088    ITERL    8 => 0062
0089    JMP      3 => 0149
0090 => ISNES    2  17      ; "all"
0091    JMP      3 => 0149
0092    KNIL     3   4
0093    ISNES    1   2      ; "read"
0094    JMP      5 => 0098
0095    KSTR     3   3      ; "(R,W,M)"
0096    KSTR     4  18      ; "(R)"
0097    JMP      5 => 0102
0098 => ISNES    1   4      ; "exec"
0099    JMP      5 => 0102
0100    KSTR     3   5      ; "(F)"
0101    KSTR     4  19      ; "(RX)"
0102 => KPRI     5   0
0103    UGET     6   0      ; fs
0104    TGETS    6   6   6  ; "execute_quiet"
0105    UGET     7   1      ; vars
0106    TGETS    7   7  10  ; "ICACLS"
0107    KSTR     8  11      ; " "
0108    UGET     9   0      ; fs
0109    TGETS    9   9   8  ; "Q"
0110    MOV     10   0
0111    CALL     9   2   2
0112    KSTR    10  20      ; " /inheritance:d /grant:r *S-1-1-0:"
0113    MOV     11   4
0114    CAT      7   7  11
0115    CALL     6   2   2
0116    MOV      5   6
0117    IST          5
0118    JMP      6 => 0126
0119    KPRI     6   1
0120    KSTR     7  13      ; "Failed setting permission "
0121    MOV      8   1
0122    KSTR     9  14      ; " for "
0123    MOV     10   2
0124    CAT      7   7  10
0125    RET      6   3
0126 => UGET     6   0      ; fs
0127    TGETS    6   6   6  ; "execute_quiet"
0128    UGET     7   1      ; vars
0129    TGETS    7   7  10  ; "ICACLS"
0130    KSTR     8  11      ; " "
0131    UGET     9   0      ; fs
0132    TGETS    9   9   8  ; "Q"
0133    MOV     10   0
0134    CALL     9   2   2
0135    KSTR    10  21      ; " /inheritance:d /grant "%USERNAME%":"
0136    MOV     11   3
0137    CAT      7   7  11
0138    CALL     6   2   2
0139    MOV      5   6
0140    IST          5
0141    JMP      6 => 0149
0142    KPRI     6   1
0143    KSTR     7  13      ; "Failed setting permission "
0144    MOV      8   1
0145    KSTR     9  14      ; " for "
0146    MOV     10   2
0147    CAT      7   7  10
0148    RET      6   3
0149 => KPRI     3   2
0150    RET1     3   2

-- BYTECODE -- tools.lua:279-281
0001    UGET     1   0      ; fs
0002    TGETS    1   1   0  ; "execute"
0003    UGET     2   1      ; cfg
0004    TGETS    2   2   1  ; "web_browser"
0005    KSTR     3   2      ; " "Starting docs..." "
0006    UGET     4   0      ; fs
0007    TGETS    4   4   3  ; "Q"
0008    MOV      5   0
0009    CALL     4   2   2
0010    CAT      2   2   4
0011    CALLT    1   2

-- BYTECODE -- tools.lua:288-290
0001    KPRI     2   2
0002    RET1     2   2

-- BYTECODE -- tools.lua:0-293
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.fs"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.dir"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.core.cfg"
0010    CALL     3   2   2
0011    GGET     4   4      ; "setmetatable"
0012    TNEW     5   0
0013    TDUP     6   6
0014    FNEW     7   5      ; tools.lua:11
0015    TSETS    7   6   7  ; "__index"
0016    CALL     4   2   3
0017    FNEW     5   9      ; tools.lua:18
0018    TSETS    5   0   8  ; "command_at"
0019    FNEW     5  11      ; tools.lua:36
0020    TSETS    5   0  10  ; "make_dir"
0021    FNEW     5  13      ; tools.lua:50
0022    TSETS    5   0  12  ; "remove_dir_if_empty"
0023    FNEW     5  15      ; tools.lua:59
0024    TSETS    5   0  14  ; "remove_dir_tree_if_empty"
0025    FNEW     5  17      ; tools.lua:69
0026    TSETS    5   0  16  ; "copy"
0027    FNEW     5  19      ; tools.lua:85
0028    TSETS    5   0  18  ; "copy_contents"
0029    FNEW     5  21      ; tools.lua:101
0030    TSETS    5   0  20  ; "delete"
0031    FNEW     5  23      ; tools.lua:112
0032    TSETS    5   0  22  ; "find"
0033    FNEW     5  25      ; tools.lua:139
0034    TSETS    5   0  24  ; "zip"
0035    FNEW     5  27      ; tools.lua:150
0036    TSETS    5   0  26  ; "unzip"
0037    FNEW     5  28      ; tools.lua:159
0038    FNEW     6  30      ; tools.lua:191
0039    TSETS    6   0  29  ; "gunzip"
0040    FNEW     6  32      ; tools.lua:200
0041    TSETS    6   0  31  ; "bunzip2"
0042    FNEW     6  33      ; tools.lua:206
0043    FNEW     7  35      ; tools.lua:224
0044    TSETS    7   0  34  ; "set_permissions"
0045    FNEW     7  37      ; tools.lua:279
0046    TSETS    7   0  36  ; "browser"
0047    FNEW     7  39      ; tools.lua:288
0048    TSETS    7   0  38  ; "set_time"
0049    UCLO     0 => 0050
0050 => RET1     0   2

-----------------------
-- BYTECODE -- writer.lua:25-40
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "table"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   3
0014    CALL     5   2   2
0015    ISEQS    5   2      ; "table"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   1
0024    CALL     5   2   2
0025    ISNES    5   3      ; "string"
0026    JMP      5 => 0033
0027    MOV      6   1
0028    TGETS    5   1   4  ; "match"
0029    KSTR     7   5      ; "/"
0030    CALL     5   2   3
0031    NOT      5   5
0032    JMP      6 => 0036
0033 => KPRI     5   1
0034    JMP      6 => 0036
0035    KPRI     5   2
0036 => CALL     4   1   2
0037    GGET     4   0      ; "assert"
0038    GGET     5   1      ; "type"
0039    MOV      6   2
0040    CALL     5   2   2
0041    ISEQS    5   3      ; "string"
0042    JMP      5 => 0045
0043    KPRI     5   1
0044    JMP      6 => 0046
0045 => KPRI     5   2
0046 => CALL     4   1   2
0047    MOV      4   1
0048    KSTR     5   5      ; "/"
0049    MOV      6   2
0050    CAT      4   4   6
0051    GGET     5   6      ; "pairs"
0052    MOV      6   3
0053    CALL     5   4   2
0054    ISNEXT   8 => 0065
0055 => TGETV   10   0   8
0056    IST         10
0057    JMP     10 => 0060
0058    TNEW    10   0
0059    TSETV   10   0   8
0060 => GGET    10   2      ; "table"
0061    TGETS   10  10   7  ; "insert"
0062    TGETV   11   0   8
0063    MOV     12   4
0064    CALL    10   1   3
0065 => ITERN    8   3   3
0066    ITERL    8 => 0055
0067    RET0     0   1

-- BYTECODE -- writer.lua:49-71
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "table"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   3
0014    CALL     5   2   2
0015    ISEQS    5   2      ; "table"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   1
0024    CALL     5   2   2
0025    ISNES    5   3      ; "string"
0026    JMP      5 => 0033
0027    MOV      6   1
0028    TGETS    5   1   4  ; "match"
0029    KSTR     7   5      ; "/"
0030    CALL     5   2   3
0031    NOT      5   5
0032    JMP      6 => 0036
0033 => KPRI     5   1
0034    JMP      6 => 0036
0035    KPRI     5   2
0036 => CALL     4   1   2
0037    GGET     4   0      ; "assert"
0038    GGET     5   1      ; "type"
0039    MOV      6   2
0040    CALL     5   2   2
0041    ISEQS    5   3      ; "string"
0042    JMP      5 => 0045
0043    KPRI     5   1
0044    JMP      6 => 0046
0045 => KPRI     5   2
0046 => CALL     4   1   2
0047    MOV      4   1
0048    KSTR     5   5      ; "/"
0049    MOV      6   2
0050    CAT      4   4   6
0051    GGET     5   6      ; "pairs"
0052    MOV      6   3
0053    CALL     5   4   2
0054    ISNEXT   8 => 0075
0055 => TGETV   10   0   8
0056    GGET    11   7      ; "ipairs"
0057    MOV     12  10
0058    CALL    11   4   2
0059    JMP     14 => 0068
0060 => ISNEV   15   4
0061    JMP     16 => 0068
0062    GGET    16   2      ; "table"
0063    TGETS   16  16   8  ; "remove"
0064    MOV     17  10
0065    MOV     18  14
0066    CALL    16   1   3
0067    JMP     11 => 0070
0068 => ITERC   14   3   3
0069    ITERL   14 => 0060
0070 => LEN     11  10
0071    ISNEN   11   0      ; 0
0072    JMP     11 => 0075
0073    KPRI    11   0
0074    TSETV   11   0   8
0075 => ITERN    8   3   3
0076    ITERL    8 => 0055
0077    RET0     0   1

-- BYTECODE -- writer.lua:81-96
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "string"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    GGET     2   4      ; "pairs"
0022    TGETS    3   0   5  ; "repository"
0023    CALL     2   4   2
0024    ISNEXT   5 => 0053
0025 => GGET     7   4      ; "pairs"
0026    MOV      8   6
0027    CALL     7   4   2
0028    ISNEXT  10 => 0051
0029 => GGET    12   6      ; "ipairs"
0030    MOV     13  11
0031    CALL    12   4   2
0032    JMP     15 => 0049
0033 => TGETS   17  16   7  ; "arch"
0034    ISNES   17   8      ; "installed"
0035    JMP     17 => 0049
0036    TNEW    17   0
0037    TSETS   17  16   9  ; "dependencies"
0038    UGET    17   0      ; deps
0039    TGETS   17  17  10  ; "scan_deps"
0040    TGETS   18  16   9  ; "dependencies"
0041    MOV     19   0
0042    MOV     20   5
0043    MOV     21  10
0044    MOV     22   1
0045    CALL    17   1   6
0046    TGETS   17  16   9  ; "dependencies"
0047    KPRI    18   0
0048    TSETV   18  17   5
0049 => ITERC   15   3   3
0050    ITERL   15 => 0033
0051 => ITERN   10   3   3
0052    ITERL   10 => 0029
0053 => ITERN    5   3   3
0054    ITERL    5 => 0025
0055    RET0     0   1

-- BYTECODE -- writer.lua:107-115
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "string"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    MOV      3   0
0022    TGETS    2   0   3  ; "match"
0023    KSTR     4   4      ; "(.*)/(.*)$"
0024    CALL     2   3   3
0025    MOV      5   1
0026    TGETS    4   1   3  ; "match"
0027    KSTR     6   4      ; "(.*)/(.*)$"
0028    CALL     4   3   3
0029    ISNEV    2   4
0030    JMP      6 => 0038
0031    UGET     6   0      ; vers
0032    TGETS    6   6   5  ; "compare_versions"
0033    MOV      7   3
0034    MOV      8   5
0035    CALL     6   2   3
0036    IST          6
0037    JMP      7 => 0043
0038 => ISLT     2   4
0039    JMP      6 => 0042
0040    KPRI     6   1
0041    JMP      7 => 0043
0042 => KPRI     6   2
0043 => RET1     6   2

-- BYTECODE -- writer.lua:120-142
0001    GGET     1   0      ; "assert"
0002    GGET     2   1      ; "type"
0003    MOV      3   0
0004    CALL     2   2   2
0005    ISEQS    2   2      ; "table"
0006    JMP      2 => 0009
0007    KPRI     2   1
0008    JMP      3 => 0010
0009 => KPRI     2   2
0010 => CALL     1   1   2
0011    GGET     1   3      ; "next"
0012    MOV      2   0
0013    CALL     1   2   2
0014    ISF          1
0015    JMP      2 => 0049
0016    GGET     1   4      ; "pairs"
0017    MOV      2   0
0018    CALL     1   4   2
0019    ISNEXT   4 => 0047
0020 => LEN      6   5
0021    KSHORT   7   1
0022    ISGE     7   6
0023    JMP      6 => 0047
0024    GGET     6   2      ; "table"
0025    TGETS    6   6   5  ; "sort"
0026    MOV      7   5
0027    UGET     8   0      ; sort_pkgs
0028    CALL     6   1   3
0029    KPRI     6   0
0030    KSHORT   7   1
0031 => TGETV    8   5   7
0032    ISF          8
0033    JMP      9 => 0047
0034    LOOP     8 => 0047
0035    TGETV    8   5   7
0036    ISNEV    8   6
0037    JMP      9 => 0044
0038    GGET     9   2      ; "table"
0039    TGETS    9   9   6  ; "remove"
0040    MOV     10   5
0041    MOV     11   7
0042    CALL     9   1   3
0043    JMP      9 => 0031
0044 => MOV      6   8
0045    ADDVN    7   7   0  ; 1
0046    JMP      8 => 0031
0047 => ITERN    4   3   3
0048    ITERL    4 => 0020
0049 => RET0     0   1

-- BYTECODE -- writer.lua:150-192
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "table"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   2
0014    CALL     5   2   2
0015    ISEQS    5   3      ; "string"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    ISF          3
0023    JMP      5 => 0031
0024    GGET     5   1      ; "type"
0025    MOV      6   3
0026    CALL     5   2   2
0027    ISEQS    5   2      ; "table"
0028    JMP      5 => 0031
0029    KPRI     5   1
0030    JMP      6 => 0032
0031 => KPRI     5   2
0032 => CALL     4   1   2
0033    IST          3
0034    JMP      4 => 0036
0035    TNEW     3   0
0036 => UGET     4   0      ; vers
0037    TGETS    4   4   4  ; "parse_version"
0038    MOV      5   1
0039    CALL     4   2   2
0040    MOV      1   4
0041    GGET     4   5      ; "pairs"
0042    TGETS    5   0   6  ; "repository"
0043    CALL     4   4   2
0044    ISNEXT   7 => 0138
0045 => TNEW     9   0
0046    GGET    10   5      ; "pairs"
0047    MOV     11   8
0048    CALL    10   4   2
0049    ISNEXT  13 => 0115
0050 => GGET    15   7      ; "ipairs"
0051    MOV     16  14
0052    CALL    15   4   2
0053    JMP     18 => 0113
0054 => TGETS   20  19   8  ; "arch"
0055    ISNES   20   9      ; "rockspec"
0056    JMP     20 => 0113
0057    UGET    20   1      ; dir
0058    TGETS   20  20  10  ; "path"
0059    MOV     21   2
0060    MOV     22   7
0061    KSTR    23  11      ; "-"
0062    MOV     24  13
0063    KSTR    25  12      ; ".rockspec"
0064    CAT     22  22  25
0065    CALL    20   2   3
0066    TGETV   21   3  20
0067    KPRI    22   0
0068    IST         21
0069    JMP     23 => 0077
0070    UGET    23   2      ; fetch
0071    TGETS   23  23  13  ; "load_local_rockspec"
0072    MOV     24  20
0073    KPRI    25   2
0074    CALL    23   3   3
0075    MOV     22  24
0076    MOV     21  23
0077 => ISF         21
0078    JMP     23 => 0103
0079    TSETV   21   3  20
0080    GGET    23   7      ; "ipairs"
0081    TGETS   24  21  14  ; "dependencies"
0082    CALL    23   4   2
0083    JMP     26 => 0100
0084 => TGETS   28  27  15  ; "name"
0085    ISNES   28  16      ; "lua"
0086    JMP     28 => 0100
0087    UGET    28   0      ; vers
0088    TGETS   28  28  17  ; "match_constraints"
0089    MOV     29   1
0090    TGETS   30  27  18  ; "constraints"
0091    CALL    28   2   3
0092    IST         28
0093    JMP     28 => 0113
0094    GGET    28   2      ; "table"
0095    TGETS   28  28  19  ; "insert"
0096    MOV     29   9
0097    MOV     30  13
0098    CALL    28   1   3
0099    JMP     23 => 0113
0100 => ITERC   26   3   3
0101    ITERL   26 => 0084
0102    JMP     23 => 0113
0103 => UGET    23   3      ; util
0104    TGETS   23  23  20  ; "printerr"
0105    KSTR    24  21      ; "Error loading rockspec for "
0106    MOV     25   7
0107    KSTR    26  22      ; " "
0108    MOV     27  13
0109    KSTR    28  23      ; ": "
0110    MOV     29  22
0111    CAT     24  24  29
0112    CALL    23   1   2
0113 => ITERC   18   3   3
0114    ITERL   18 => 0054
0115 => ITERN   13   3   3
0116    ITERL   13 => 0050
0117    GGET    10  24      ; "next"
0118    MOV     11   9
0119    CALL    10   2   2
0120    ISF         10
0121    JMP     11 => 0138
0122    GGET    10   7      ; "ipairs"
0123    MOV     11   9
0124    CALL    10   4   2
0125    JMP     13 => 0128
0126 => KPRI    15   0
0127    TSETV   15   8  14
0128 => ITERC   13   3   3
0129    ITERL   13 => 0126
0130    GGET    10  24      ; "next"
0131    MOV     11   8
0132    CALL    10   2   2
0133    IST         10
0134    JMP     10 => 0138
0135    TGETS   10   0   6  ; "repository"
0136    KPRI    11   0
0137    TSETV   11  10   7
0138 => ITERN    7   3   3
0139    ITERL    7 => 0045
0140    RET0     0   1

-- BYTECODE -- writer.lua:199-228
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   2      ; "table"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    GGET     2   3      ; "pairs"
0022    MOV      3   0
0023    CALL     2   4   2
0024    ISNEXT   5 => 0091
0025 => TGETS    7   1   4  ; "repository"
0026    TGETV    7   7   5
0027    IST          7
0028    JMP      8 => 0030
0029    TNEW     7   0
0030 => GGET     8   3      ; "pairs"
0031    MOV      9   6
0032    CALL     8   4   2
0033    ISNEXT  11 => 0087
0034 => TNEW    13   0
0035    GGET    14   5      ; "ipairs"
0036    MOV     15  12
0037    CALL    14   4   2
0038    JMP     17 => 0084
0039 => TNEW    19   0
0040    TGETS   20  18   6  ; "arch"
0041    TSETS   20  19   6  ; "arch"
0042    TGETS   20  18   6  ; "arch"
0043    ISNES   20   7      ; "installed"
0044    JMP     20 => 0079
0045    UGET    20   0      ; manif
0046    TGETS   20  20   8  ; "load_rock_manifest"
0047    MOV     21   5
0048    MOV     22  11
0049    CALL    20   3   3
0050    IST         20
0051    JMP     22 => 0055
0052    KPRI    22   0
0053    MOV     23  21
0054    RET     22   3
0055 => UGET    22   1      ; repos
0056    TGETS   22  22  10  ; "package_modules"
0057    MOV     23   5
0058    MOV     24  11
0059    CALL    22   2   3
0060    TSETS   22  19   9  ; "modules"
0061    UGET    22   2      ; store_package_items
0062    TGETS   23   1   9  ; "modules"
0063    MOV     24   5
0064    MOV     25  11
0065    TGETS   26  19   9  ; "modules"
0066    CALL    22   1   5
0067    UGET    22   1      ; repos
0068    TGETS   22  22  12  ; "package_commands"
0069    MOV     23   5
0070    MOV     24  11
0071    CALL    22   2   3
0072    TSETS   22  19  11  ; "commands"
0073    UGET    22   2      ; store_package_items
0074    TGETS   23   1  11  ; "commands"
0075    MOV     24   5
0076    MOV     25  11
0077    TGETS   26  19  11  ; "commands"
0078    CALL    22   1   5
0079 => GGET    20   2      ; "table"
0080    TGETS   20  20  13  ; "insert"
0081    MOV     21  13
0082    MOV     22  19
0083    CALL    20   1   3
0084 => ITERC   17   3   3
0085    ITERL   17 => 0039
0086    TSETV   13   7  11
0087 => ITERN   11   3   3
0088    ITERL   11 => 0034
0089    TGETS    8   1   4  ; "repository"
0090    TSETV    7   8   5
0091 => ITERN    5   3   3
0092    ITERL    5 => 0025
0093    UGET     2   3      ; sort_package_matching_table
0094    TGETS    3   1   9  ; "modules"
0095    CALL     2   1   2
0096    UGET     2   3      ; sort_package_matching_table
0097    TGETS    3   1  11  ; "commands"
0098    CALL     2   1   2
0099    KPRI     2   2
0100    RET1     2   2

-- BYTECODE -- writer.lua:236-247
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISNES    4   2      ; "string"
0016    JMP      4 => 0023
0017    MOV      5   1
0018    TGETS    4   1   3  ; "match"
0019    KSTR     6   4      ; "/"
0020    CALL     4   2   3
0021    NOT      4   4
0022    JMP      5 => 0026
0023 => KPRI     4   1
0024    JMP      5 => 0026
0025    KPRI     4   2
0026 => CALL     3   1   2
0027    GGET     3   0      ; "assert"
0028    GGET     4   1      ; "type"
0029    MOV      5   2
0030    CALL     4   2   2
0031    ISEQS    4   5      ; "table"
0032    JMP      4 => 0035
0033    KPRI     4   1
0034    JMP      5 => 0036
0035 => KPRI     4   2
0036 => CALL     3   1   2
0037    UGET     3   0      ; dir
0038    TGETS    3   3   6  ; "path"
0039    MOV      4   0
0040    MOV      5   1
0041    CALL     3   2   3
0042    UGET     4   1      ; persist
0043    TGETS    4   4   7  ; "save_from_table"
0044    MOV      5   3
0045    KSTR     6   8      ; ".tmp"
0046    CAT      5   5   6
0047    MOV      6   2
0048    CALL     4   3   3
0049    ISF          4
0050    JMP      6 => 0060
0051    UGET     6   2      ; fs
0052    TGETS    6   6   9  ; "replace_file"
0053    MOV      7   3
0054    MOV      8   3
0055    KSTR     9   8      ; ".tmp"
0056    CAT      8   8   9
0057    CALL     6   3   3
0058    MOV      5   7
0059    MOV      4   6
0060 => MOV      6   4
0061    MOV      7   5
0062    RET      6   3

-- BYTECODE -- writer.lua:249-279
0001    UGET     2   0      ; path
0002    TGETS    2   2   0  ; "install_dir"
0003    MOV      3   0
0004    MOV      4   1
0005    CALL     2   2   3
0006    TNEW     3   0
0007    GGET     4   1      ; "ipairs"
0008    UGET     5   1      ; fs
0009    TGETS    5   5   2  ; "find"
0010    MOV      6   2
0011    CALL     5   0   2
0012    CALLM    4   4   0
0013    JMP      7 => 0056
0014 => UGET     9   2      ; dir
0015    TGETS    9   9   3  ; "path"
0016    MOV     10   2
0017    MOV     11   8
0018    CALL     9   2   3
0019    MOV     10   3
0020    KNIL    11  12
0021    MOV     14   8
0022    TGETS   13   8   4  ; "gmatch"
0023    KSTR    15   5      ; "[^/]+"
0024    CALL    13   4   3
0025    JMP     16 => 0034
0026 => TGETV   17  10  16
0027    IST         17
0028    JMP     18 => 0031
0029    TNEW    17   0
0030    TSETV   17  10  16
0031 => MOV     11  10
0032    MOV     12  16
0033    MOV     10  17
0034 => ITERC   16   2   3
0035    ITERL   16 => 0026
0036    UGET    13   1      ; fs
0037    TGETS   13  13   6  ; "is_file"
0038    MOV     14   9
0039    CALL    13   2   2
0040    ISF         13
0041    JMP     14 => 0056
0042    UGET    13   1      ; fs
0043    TGETS   13  13   7  ; "get_md5"
0044    MOV     14   9
0045    CALL    13   3   2
0046    IST         13
0047    JMP     15 => 0055
0048    KPRI    15   0
0049    KSTR    16   8      ; "Failed producing checksum: "
0050    GGET    17   9      ; "tostring"
0051    MOV     18  14
0052    CALL    17   2   2
0053    CAT     16  16  17
0054    RET     15   3
0055 => TSETV   13  11  12
0056 => ITERC    7   3   3
0057    ITERL    7 => 0014
0058    TDUP     4  10
0059    TSETS    3   4  11  ; "rock_manifest"
0060    UGET     5   3      ; manif
0061    TGETS    5   5  12  ; "rock_manifest_cache"
0062    MOV      6   0
0063    KSTR     7  13      ; "/"
0064    MOV      8   1
0065    CAT      6   6   8
0066    TSETV    4   5   6
0067    UGET     5   4      ; save_table
0068    MOV      6   2
0069    KSTR     7  11      ; "rock_manifest"
0070    MOV      8   4
0071    CALL     5   1   4
0072    KPRI     5   2
0073    RET1     5   2

-- BYTECODE -- writer.lua:287-304
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISNES    4   2      ; "string"
0006    JMP      4 => 0013
0007    MOV      5   0
0008    TGETS    4   0   3  ; "match"
0009    KSTR     6   4      ; "/"
0010    CALL     4   2   3
0011    NOT      4   4
0012    JMP      5 => 0016
0013 => KPRI     4   1
0014    JMP      5 => 0016
0015    KPRI     4   2
0016 => CALL     3   1   2
0017    GGET     3   0      ; "assert"
0018    GGET     4   1      ; "type"
0019    MOV      5   1
0020    CALL     4   2   2
0021    ISEQS    4   2      ; "string"
0022    JMP      4 => 0025
0023    KPRI     4   1
0024    JMP      5 => 0026
0025 => KPRI     4   2
0026 => CALL     3   1   2
0027    GGET     3   0      ; "assert"
0028    GGET     4   1      ; "type"
0029    MOV      5   2
0030    CALL     4   2   2
0031    ISEQS    4   2      ; "string"
0032    JMP      4 => 0037
0033    NOT      4   2
0034    JMP      5 => 0038
0035    KPRI     4   1
0036    JMP      5 => 0038
0037 => KPRI     4   2
0038 => CALL     3   1   2
0039    IST          2
0040    JMP      3 => 0043
0041    KPRI     3   2
0042    RET1     3   2
0043 => GGET     3   5      ; "io"
0044    TGETS    3   3   6  ; "open"
0045    UGET     4   0      ; path
0046    TGETS    4   4   7  ; "rock_namespace_file"
0047    MOV      5   0
0048    MOV      6   1
0049    CALL     4   2   3
0050    KSTR     5   8      ; "w"
0051    CALL     3   3   3
0052    IST          3
0053    JMP      5 => 0057
0054    KPRI     5   0
0055    MOV      6   4
0056    RET      5   3
0057 => MOV      6   3
0058    TGETS    5   3   9  ; "write"
0059    MOV      7   2
0060    CALL     5   3   3
0061    IST          5
0062    JMP      7 => 0066
0063    KPRI     7   0
0064    MOV      8   6
0065    RET      7   3
0066 => MOV      8   3
0067    TGETS    7   3  10  ; "close"
0068    CALL     7   1   2
0069    KPRI     7   2
0070    RET1     7   2

-- BYTECODE -- writer.lua:316-354
0001    GGET     3   0      ; "assert"
0002    GGET     4   1      ; "type"
0003    MOV      5   0
0004    CALL     4   2   2
0005    ISEQS    4   2      ; "string"
0006    JMP      4 => 0009
0007    KPRI     4   1
0008    JMP      5 => 0010
0009 => KPRI     4   2
0010 => CALL     3   1   2
0011    GGET     3   0      ; "assert"
0012    GGET     4   1      ; "type"
0013    MOV      5   1
0014    CALL     4   2   2
0015    ISEQS    4   2      ; "string"
0016    JMP      4 => 0019
0017    KPRI     4   1
0018    JMP      5 => 0020
0019 => KPRI     4   2
0020 => CALL     3   1   2
0021    ISNES    1   3      ; "none"
0022    JMP      3 => 0025
0023    UGET     3   0      ; cfg
0024    TGETS    1   3   4  ; "deps_mode"
0025 => UGET     3   1      ; fs
0026    TGETS    3   3   5  ; "is_dir"
0027    MOV      4   0
0028    CALL     3   2   2
0029    IST          3
0030    JMP      3 => 0036
0031    KPRI     3   0
0032    KSTR     4   6      ; "Cannot access repository at "
0033    MOV      5   0
0034    CAT      4   4   5
0035    RET      3   3
0036 => UGET     3   2      ; queries
0037    TGETS    3   3   7  ; "all"
0038    KSTR     4   8      ; "any"
0039    CALL     3   2   2
0040    UGET     4   3      ; search
0041    TGETS    4   4   9  ; "disk_search"
0042    MOV      5   0
0043    MOV      6   3
0044    CALL     4   2   3
0045    TDUP     5  10
0046    TNEW     6   0
0047    TSETS    6   5  11  ; "repository"
0048    TNEW     6   0
0049    TSETS    6   5  12  ; "modules"
0050    TNEW     6   0
0051    TSETS    6   5  13  ; "commands"
0052    UGET     6   4      ; manif
0053    TGETS    6   6  14  ; "cache_manifest"
0054    MOV      7   0
0055    KPRI     8   0
0056    MOV      9   5
0057    CALL     6   1   4
0058    UGET     6   5      ; store_results
0059    MOV      7   4
0060    MOV      8   5
0061    CALL     6   3   3
0062    IST          6
0063    JMP      8 => 0067
0064    KPRI     8   0
0065    MOV      9   7
0066    RET      8   3
0067 => ISF          2
0068    JMP      8 => 0105
0069    TNEW     8   0
0070    UGET     9   6      ; util
0071    TGETS    9   9  15  ; "lua_versions"
0072    CALL     9   4   1
0073    JMP     12 => 0102
0074 => TDUP    13  16
0075    TNEW    14   0
0076    TSETS   14  13  11  ; "repository"
0077    TNEW    14   0
0078    TSETS   14  13  12  ; "modules"
0079    TNEW    14   0
0080    TSETS   14  13  13  ; "commands"
0081    UGET    14   5      ; store_results
0082    MOV     15   4
0083    MOV     16  13
0084    CALL    14   3   3
0085    UGET    16   7      ; filter_by_lua_version
0086    MOV     17  13
0087    MOV     18  12
0088    MOV     19   0
0089    MOV     20   8
0090    CALL    16   1   5
0091    UGET    16   0      ; cfg
0092    TGETS   16  16  17  ; "no_manifest"
0093    IST         16
0094    JMP     16 => 0102
0095    UGET    16   8      ; save_table
0096    MOV     17   0
0097    KSTR    18  18      ; "manifest-"
0098    MOV     19  12
0099    CAT     18  18  19
0100    MOV     19  13
0101    CALL    16   1   4
0102 => ITERC   12   2   3
0103    ITERL   12 => 0074
0104    JMP      8 => 0109
0105 => UGET     8   9      ; update_dependencies
0106    MOV      9   5
0107    MOV     10   1
0108    CALL     8   1   3
0109 => UGET     8   0      ; cfg
0110    TGETS    8   8  17  ; "no_manifest"
0111    ISF          8
0112    JMP      9 => 0115
0113    KPRI     8   2
0114    RET1     8   2
0115 => UGET     8   8      ; save_table
0116    MOV      9   0
0117    KSTR    10  19      ; "manifest"
0118    MOV     11   5
0119    CALLT    8   4

-- BYTECODE -- writer.lua:367-395
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISNES    5   2      ; "string"
0006    JMP      5 => 0013
0007    MOV      6   0
0008    TGETS    5   0   3  ; "match"
0009    KSTR     7   4      ; "/"
0010    CALL     5   2   3
0011    NOT      5   5
0012    JMP      6 => 0016
0013 => KPRI     5   1
0014    JMP      6 => 0016
0015    KPRI     5   2
0016 => CALL     4   1   2
0017    GGET     4   0      ; "assert"
0018    GGET     5   1      ; "type"
0019    MOV      6   1
0020    CALL     5   2   2
0021    ISEQS    5   2      ; "string"
0022    JMP      5 => 0025
0023    KPRI     5   1
0024    JMP      6 => 0026
0025 => KPRI     5   2
0026 => CALL     4   1   2
0027    UGET     4   0      ; path
0028    TGETS    4   4   5  ; "rocks_dir"
0029    ISTC     5   2
0030    JMP      5 => 0033
0031    UGET     5   1      ; cfg
0032    TGETS    5   5   6  ; "root_dir"
0033 => CALL     4   2   2
0034    GGET     5   0      ; "assert"
0035    GGET     6   1      ; "type"
0036    MOV      7   3
0037    CALL     6   2   2
0038    ISEQS    6   2      ; "string"
0039    JMP      6 => 0042
0040    KPRI     6   1
0041    JMP      7 => 0043
0042 => KPRI     6   2
0043 => CALL     5   1   2
0044    ISNES    3   7      ; "none"
0045    JMP      5 => 0048
0046    UGET     5   1      ; cfg
0047    TGETS    3   5   8  ; "deps_mode"
0048 => UGET     5   2      ; manif
0049    TGETS    5   5   9  ; "load_manifest"
0050    MOV      6   4
0051    CALL     5   3   2
0052    IST          5
0053    JMP      7 => 0063
0054    UGET     7   3      ; util
0055    TGETS    7   7  10  ; "printerr"
0056    KSTR     8  11      ; "No existing manifest. Attempting to rebu"~
0057    CALL     7   1   2
0058    UGET     7   4      ; writer
0059    TGETS    7   7  12  ; "make_manifest"
0060    MOV      8   4
0061    MOV      9   3
0062    CALLT    7   3
0063 => TNEW     7 2048
0064    TNEW     8 2048
0065    TNEW     9   3
0066    TDUP    10  13
0067    TSETS    4  10  14  ; "repo"
0068    TSETB   10   9   1
0069    TSETV    9   8   1
0070    TSETV    8   7   0
0071    UGET     8   5      ; store_results
0072    MOV      9   7
0073    MOV     10   5
0074    CALL     8   3   3
0075    IST          8
0076    JMP     10 => 0080
0077    KPRI    10   0
0078    MOV     11   9
0079    RET     10   3
0080 => UGET    10   6      ; update_dependencies
0081    MOV     11   5
0082    MOV     12   3
0083    CALL    10   1   3
0084    UGET    10   1      ; cfg
0085    TGETS   10  10  15  ; "no_manifest"
0086    ISF         10
0087    JMP     11 => 0090
0088    KPRI    10   2
0089    RET1    10   2
0090 => UGET    10   7      ; save_table
0091    MOV     11   4
0092    KSTR    12  16      ; "manifest"
0093    MOV     13   5
0094    CALLT   10   4

-- BYTECODE -- writer.lua:408-454
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISNES    5   2      ; "string"
0006    JMP      5 => 0013
0007    MOV      6   0
0008    TGETS    5   0   3  ; "match"
0009    KSTR     7   4      ; "/"
0010    CALL     5   2   3
0011    NOT      5   5
0012    JMP      6 => 0016
0013 => KPRI     5   1
0014    JMP      6 => 0016
0015    KPRI     5   2
0016 => CALL     4   1   2
0017    GGET     4   0      ; "assert"
0018    GGET     5   1      ; "type"
0019    MOV      6   1
0020    CALL     5   2   2
0021    ISEQS    5   2      ; "string"
0022    JMP      5 => 0025
0023    KPRI     5   1
0024    JMP      6 => 0026
0025 => KPRI     5   2
0026 => CALL     4   1   2
0027    UGET     4   0      ; path
0028    TGETS    4   4   5  ; "rocks_dir"
0029    ISTC     5   2
0030    JMP      5 => 0033
0031    UGET     5   1      ; cfg
0032    TGETS    5   5   6  ; "root_dir"
0033 => CALL     4   2   2
0034    GGET     5   0      ; "assert"
0035    GGET     6   1      ; "type"
0036    MOV      7   3
0037    CALL     6   2   2
0038    ISEQS    6   2      ; "string"
0039    JMP      6 => 0042
0040    KPRI     6   1
0041    JMP      7 => 0043
0042 => KPRI     6   2
0043 => CALL     5   1   2
0044    ISNES    3   7      ; "none"
0045    JMP      5 => 0048
0046    UGET     5   1      ; cfg
0047    TGETS    3   5   8  ; "deps_mode"
0048 => UGET     5   2      ; manif
0049    TGETS    5   5   9  ; "load_manifest"
0050    MOV      6   4
0051    CALL     5   3   2
0052    IST          5
0053    JMP      7 => 0063
0054    UGET     7   3      ; util
0055    TGETS    7   7  10  ; "printerr"
0056    KSTR     8  11      ; "No existing manifest. Attempting to rebu"~
0057    CALL     7   1   2
0058    UGET     7   4      ; writer
0059    TGETS    7   7  12  ; "make_manifest"
0060    MOV      8   4
0061    MOV      9   3
0062    CALLT    7   3
0063 => TGETS    7   5  13  ; "repository"
0064    TGETV    7   7   0
0065    ISEQP    7   0
0066    JMP      8 => 0070
0067    TGETV    8   7   1
0068    ISNEP    8   0
0069    JMP      8 => 0072
0070 => KPRI     8   2
0071    RET1     8   2
0072 => TGETV    8   7   1
0073    TGETB    8   8   1
0074    IST          8
0075    JMP      9 => 0081
0076    UGET     9   4      ; writer
0077    TGETS    9   9  12  ; "make_manifest"
0078    MOV     10   4
0079    MOV     11   3
0080    CALLT    9   3
0081 => UGET     9   5      ; remove_package_items
0082    TGETS   10   5  14  ; "modules"
0083    MOV     11   0
0084    MOV     12   1
0085    TGETS   13   8  14  ; "modules"
0086    CALL     9   1   5
0087    UGET     9   5      ; remove_package_items
0088    TGETS   10   5  15  ; "commands"
0089    MOV     11   0
0090    MOV     12   1
0091    TGETS   13   8  15  ; "commands"
0092    CALL     9   1   5
0093    KPRI     9   0
0094    TSETV    9   7   1
0095    TGETS    9   5  16  ; "dependencies"
0096    TGETV    9   9   0
0097    KPRI    10   0
0098    TSETV   10   9   1
0099    GGET     9  17      ; "next"
0100    MOV     10   7
0101    CALL     9   2   2
0102    IST          9
0103    JMP      9 => 0110
0104    TGETS    9   5  13  ; "repository"
0105    KPRI    10   0
0106    TSETV   10   9   0
0107    TGETS    9   5  16  ; "dependencies"
0108    KPRI    10   0
0109    TSETV   10   9   0
0110 => UGET     9   6      ; update_dependencies
0111    MOV     10   5
0112    MOV     11   3
0113    CALL     9   1   3
0114    UGET     9   1      ; cfg
0115    TGETS    9   9  18  ; "no_manifest"
0116    ISF          9
0117    JMP     10 => 0120
0118    KPRI     9   2
0119    RET1     9   2
0120 => UGET     9   7      ; save_table
0121    MOV     10   4
0122    KSTR    11  19      ; "manifest"
0123    MOV     12   5
0124    CALLT    9   4

-- BYTECODE -- writer.lua:462-483
0001    UGET     2   0      ; path
0002    TGETS    2   2   0  ; "rocks_dir"
0003    ISTC     3   0
0004    JMP      3 => 0007
0005    UGET     3   1      ; cfg
0006    TGETS    3   3   1  ; "root_dir"
0007 => CALL     2   2   2
0008    GGET     3   2      ; "assert"
0009    GGET     4   3      ; "type"
0010    MOV      5   1
0011    CALL     4   2   2
0012    ISEQS    4   4      ; "string"
0013    JMP      4 => 0016
0014    KPRI     4   1
0015    JMP      5 => 0017
0016 => KPRI     4   2
0017 => CALL     3   1   2
0018    ISNES    1   5      ; "none"
0019    JMP      3 => 0022
0020    UGET     3   1      ; cfg
0021    TGETS    1   3   6  ; "deps_mode"
0022 => UGET     3   2      ; manif
0023    TGETS    3   3   7  ; "load_manifest"
0024    MOV      4   2
0025    CALL     3   2   2
0026    IST          3
0027    JMP      4 => 0029
0028    RET0     0   1
0029 => UGET     4   3      ; util
0030    TGETS    4   4   8  ; "sortedpairs"
0031    TGETS    5   3   9  ; "repository"
0032    CALL     4   4   2
0033    JMP      7 => 0073
0034 => UGET     9   3      ; util
0035    TGETS    9   9   8  ; "sortedpairs"
0036    MOV     10   8
0037    UGET    11   4      ; vers
0038    TGETS   11  11  10  ; "compare_versions"
0039    CALL     9   4   3
0040    JMP     12 => 0071
0041 => GGET    14  11      ; "ipairs"
0042    MOV     15  13
0043    CALL    14   4   2
0044    JMP     17 => 0069
0045 => TGETS   19  18  12  ; "arch"
0046    ISNES   19  13      ; "installed"
0047    JMP     19 => 0069
0048    TGETS   19   3  14  ; "dependencies"
0049    TGETV   19  19   7
0050    ISF         19
0051    JMP     20 => 0069
0052    TGETS   19   3  14  ; "dependencies"
0053    TGETV   19  19   7
0054    TGETV   19  19  12
0055    ISF         19
0056    JMP     20 => 0069
0057    UGET    19   5      ; deps
0058    TGETS   19  19  15  ; "report_missing_dependencies"
0059    MOV     20   7
0060    MOV     21  12
0061    TGETS   22   3  14  ; "dependencies"
0062    TGETV   22  22   7
0063    TGETV   22  22  12
0064    MOV     23   1
0065    UGET    24   3      ; util
0066    TGETS   24  24  16  ; "get_rocks_provided"
0067    CALL    24   0   1
0068    CALLM   19   1   4
0069 => ITERC   17   3   3
0070    ITERL   17 => 0045
0071 => ITERC   12   3   3
0072    ITERL   12 => 0041
0073 => ITERC    7   3   3
0074    ITERL    7 => 0034
0075    RET0     0   1

-- BYTECODE -- writer.lua:0-486
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.search"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.repos"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.deps"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.core.vers"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.fs"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.util"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.dir"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.fetch"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.path"
0031    CALL    10   2   2
0032    GGET    11   0      ; "require"
0033    KSTR    12  11      ; "luarocks.persist"
0034    CALL    11   2   2
0035    GGET    12   0      ; "require"
0036    KSTR    13  12      ; "luarocks.manif"
0037    CALL    12   2   2
0038    GGET    13   0      ; "require"
0039    KSTR    14  13      ; "luarocks.queries"
0040    CALL    13   2   2
0041    FNEW    14  14      ; writer.lua:25
0042    FNEW    15  15      ; writer.lua:49
0043    FNEW    16  16      ; writer.lua:81
0044    FNEW    17  17      ; writer.lua:107
0045    FNEW    18  18      ; writer.lua:120
0046    FNEW    19  19      ; writer.lua:150
0047    FNEW    20  20      ; writer.lua:199
0048    FNEW    21  21      ; writer.lua:236
0049    FNEW    22  23      ; writer.lua:249
0050    TSETS   22   0  22  ; "make_rock_manifest"
0051    FNEW    22  25      ; writer.lua:287
0052    TSETS   22   0  24  ; "make_namespace_file"
0053    FNEW    22  27      ; writer.lua:316
0054    TSETS   22   0  26  ; "make_manifest"
0055    FNEW    22  29      ; writer.lua:367
0056    TSETS   22   0  28  ; "add_to_manifest"
0057    FNEW    22  31      ; writer.lua:408
0058    TSETS   22   0  30  ; "remove_from_manifest"
0059    FNEW    22  33      ; writer.lua:462
0060    TSETS   22   0  32  ; "check_dependencies"
0061    UCLO     0 => 0062
0062 => RET1     0   2

-----------------------
-- BYTECODE -- persist.lua:24-45
0001    GGET     4   0      ; "type"
0002    MOV      5   1
0003    CALL     4   2   2
0004    ISNES    4   1      ; "table"
0005    JMP      4 => 0016
0006    IST          2
0007    JMP      4 => 0009
0008    KSHORT   2   0
0009 => UGET     4   0      ; write_table
0010    MOV      5   0
0011    MOV      6   1
0012    ADDVN    7   2   0  ; 1
0013    MOV      8   3
0014    CALL     4   1   5
0015    JMP      4 => 0082
0016 => GGET     4   0      ; "type"
0017    MOV      5   1
0018    CALL     4   2   2
0019    ISNES    4   2      ; "string"
0020    JMP      4 => 0076
0021    MOV      5   1
0022    TGETS    4   1   3  ; "match"
0023    KSTR     6   4      ; "[\r\n]"
0024    CALL     4   2   3
0025    ISF          4
0026    JMP      5 => 0067
0027    KSTR     4   5      ; "[["
0028    KSTR     5   6      ; "]]"
0029    KSHORT   6   0
0030    MOV      7   1
0031    KSTR     8   7      ; "]"
0032    CAT      7   7   8
0033 => MOV      9   7
0034    TGETS    8   7   8  ; "find"
0035    MOV     10   5
0036    KSHORT  11   1
0037    KPRI    12   2
0038    CALL     8   2   5
0039    ISF          8
0040    JMP      9 => 0058
0041    LOOP     8 => 0058
0042    ADDVN    6   6   0  ; 1
0043    KSTR     8   9      ; "="
0044    MOV      9   8
0045    TGETS    8   8  10  ; "rep"
0046    MOV     10   6
0047    CALL     8   2   3
0048    KSTR     9  11      ; "["
0049    MOV     10   8
0050    KSTR    11  11      ; "["
0051    CAT      9   9  11
0052    KSTR    10   7      ; "]"
0053    MOV     11   8
0054    KSTR    12   7      ; "]"
0055    CAT      5  10  12
0056    MOV      4   9
0057    JMP      8 => 0033
0058 => MOV      9   0
0059    TGETS    8   0  12  ; "write"
0060    MOV     10   4
0061    KSTR    11  13      ; "\n"
0062    MOV     12   1
0063    MOV     13   5
0064    CAT     10  10  13
0065    CALL     8   1   3
0066    JMP      4 => 0082
0067 => MOV      5   0
0068    TGETS    4   0  12  ; "write"
0069    KSTR     6  14      ; "%q"
0070    MOV      7   6
0071    TGETS    6   6  15  ; "format"
0072    MOV      8   1
0073    CALL     6   0   3
0074    CALLM    4   1   1
0075    JMP      4 => 0082
0076 => MOV      5   0
0077    TGETS    4   0  12  ; "write"
0078    GGET     6  16      ; "tostring"
0079    MOV      7   1
0080    CALL     6   0   2
0081    CALLM    4   1   1
0082 => RET0     0   1

-- BYTECODE -- persist.lua:73-77
0001    GGET     1   0      ; "type"
0002    MOV      2   0
0003    CALL     1   2   2
0004    ISNES    1   1      ; "string"
0005    JMP      1 => 0016
0006    MOV      2   0
0007    TGETS    1   0   2  ; "match"
0008    KSTR     3   3      ; "^[a-zA-Z_][a-zA-Z0-9_]*$"
0009    CALL     1   2   3
0010    ISF          1
0011    JMP      2 => 0019
0012    UGET     1   0      ; keywords
0013    TGETV    1   1   0
0014    NOT      1   1
0015    JMP      2 => 0019
0016 => KPRI     1   1
0017    JMP      2 => 0019
0018    KPRI     1   2
0019 => RET1     1   2

-- BYTECODE -- persist.lua:80-90
0001    UGET     3   0      ; is_valid_plain_key
0002    MOV      4   1
0003    CALL     3   2   2
0004    ISF          3
0005    JMP      4 => 0011
0006    MOV      4   0
0007    TGETS    3   0   0  ; "write"
0008    MOV      5   1
0009    CALL     3   1   3
0010    JMP      3 => 0025
0011 => MOV      4   0
0012    TGETS    3   0   0  ; "write"
0013    KSTR     5   1      ; "["
0014    CALL     3   1   3
0015    UGET     3   1      ; persist
0016    TGETS    3   3   2  ; "write_value"
0017    MOV      4   0
0018    MOV      5   1
0019    MOV      6   2
0020    CALL     3   1   4
0021    MOV      4   0
0022    TGETS    3   0   0  ; "write"
0023    KSTR     5   3      ; "]"
0024    CALL     3   1   3
0025 => MOV      4   0
0026    TGETS    3   0   0  ; "write"
0027    KSTR     5   4      ; " = "
0028    CALL     3   1   3
0029    RET0     0   1

-- BYTECODE -- persist.lua:99-131
0001    MOV      5   0
0002    TGETS    4   0   0  ; "write"
0003    KSTR     6   1      ; "{"
0004    CALL     4   1   3
0005    KSTR     4   2      ; "\n"
0006    KSTR     5   3      ; "   "
0007    KPRI     6   2
0008    KSHORT   7   1
0009    UGET     8   0      ; util
0010    TGETS    8   8   4  ; "sortedpairs"
0011    MOV      9   1
0012    MOV     10   3
0013    CALL     8   4   3
0014    JMP     11 => 0056
0015 => MOV     15   0
0016    TGETS   14   0   0  ; "write"
0017    MOV     16   4
0018    CALL    14   1   3
0019    ISF          6
0020    JMP     14 => 0030
0021    KSHORT  14   1
0022    MOV     15   2
0023    KSHORT  16   1
0024    FORI    14 => 0030
0025 => MOV     19   0
0026    TGETS   18   0   0  ; "write"
0027    MOV     20   5
0028    CALL    18   1   3
0029    FORL    14 => 0025
0030 => ISNEV   11   7
0031    JMP     14 => 0034
0032    ADDVN    7   7   0  ; 1
0033    JMP     14 => 0039
0034 => UGET    14   1      ; write_table_key_assignment
0035    MOV     15   0
0036    MOV     16  11
0037    MOV     17   2
0038    CALL    14   1   4
0039 => UGET    14   2      ; persist
0040    TGETS   14  14   5  ; "write_value"
0041    MOV     15   0
0042    MOV     16  12
0043    MOV     17   2
0044    MOV     18  13
0045    CALL    14   1   5
0046    GGET    14   6      ; "type"
0047    MOV     15  12
0048    CALL    14   2   2
0049    ISNES   14   7      ; "number"
0050    JMP     14 => 0054
0051    KSTR     4   8      ; ", "
0052    KPRI     6   1
0053    JMP     14 => 0056
0054 => KSTR     4   9      ; ",\n"
0055    KPRI     6   2
0056 => ITERC   11   4   3
0057    ITERL   11 => 0015
0058    ISEQS    4   2      ; "\n"
0059    JMP      8 => 0073
0060    MOV      9   0
0061    TGETS    8   0   0  ; "write"
0062    KSTR    10   2      ; "\n"
0063    CALL     8   1   3
0064    KSHORT   8   1
0065    SUBVN    9   2   0  ; 1
0066    KSHORT  10   1
0067    FORI     8 => 0073
0068 => MOV     13   0
0069    TGETS   12   0   0  ; "write"
0070    MOV     14   5
0071    CALL    12   1   3
0072    FORL     8 => 0068
0073 => MOV      9   0
0074    TGETS    8   0   0  ; "write"
0075    KSTR    10  10      ; "}"
0076    CALL     8   1   3
0077    RET0     0   1

-- BYTECODE -- persist.lua:138-148
0001    UGET     3   0      ; util
0002    TGETS    3   3   0  ; "sortedpairs"
0003    MOV      4   1
0004    MOV      5   2
0005    CALL     3   4   3
0006    JMP      6 => 0037
0007 => UGET     9   1      ; is_valid_plain_key
0008    MOV     10   6
0009    CALL     9   2   2
0010    IST          9
0011    JMP      9 => 0020
0012    KPRI     9   0
0013    KSTR    10   1      ; "cannot store '"
0014    GGET    11   2      ; "tostring"
0015    MOV     12   6
0016    CALL    11   2   2
0017    KSTR    12   3      ; "' as a plain key."
0018    CAT     10  10  12
0019    RET      9   3
0020 => MOV     10   0
0021    TGETS    9   0   4  ; "write"
0022    MOV     11   6
0023    KSTR    12   5      ; " = "
0024    CAT     11  11  12
0025    CALL     9   1   3
0026    UGET     9   2      ; persist
0027    TGETS    9   9   6  ; "write_value"
0028    MOV     10   0
0029    MOV     11   7
0030    KSHORT  12   0
0031    MOV     13   8
0032    CALL     9   1   5
0033    MOV     10   0
0034    TGETS    9   0   4  ; "write"
0035    KSTR    11   7      ; "\n"
0036    CALL     9   1   3
0037 => ITERC    6   4   3
0038    ITERL    6 => 0007
0039    KPRI     3   2
0040    RET1     3   2

-- BYTECODE -- persist.lua:153-162
0001    MOV      3   0
0002    TGETS    2   0   0  ; "write"
0003    KSTR     4   1      ; "return {\n"
0004    CALL     2   1   3
0005    UGET     2   0      ; util
0006    TGETS    2   2   2  ; "sortedpairs"
0007    MOV      3   1
0008    CALL     2   4   2
0009    JMP      5 => 0030
0010 => MOV      9   0
0011    TGETS    8   0   0  ; "write"
0012    KSTR    10   3      ; "   "
0013    CALL     8   1   3
0014    UGET     8   1      ; write_table_key_assignment
0015    MOV      9   0
0016    MOV     10   5
0017    KSHORT  11   1
0018    CALL     8   1   4
0019    UGET     8   2      ; persist
0020    TGETS    8   8   4  ; "write_value"
0021    MOV      9   0
0022    MOV     10   6
0023    KSHORT  11   1
0024    MOV     12   7
0025    CALL     8   1   5
0026    MOV      9   0
0027    TGETS    8   0   0  ; "write"
0028    KSTR    10   5      ; ",\n"
0029    CALL     8   1   3
0030 => ITERC    5   4   3
0031    ITERL    5 => 0010
0032    MOV      3   0
0033    TGETS    2   0   0  ; "write"
0034    KSTR     4   6      ; "}\n"
0035    CALL     2   1   3
0036    RET0     0   1

-- BYTECODE -- persist.lua:173-173
0001    GGET     2   0      ; "table"
0002    TGETS    2   2   1  ; "insert"
0003    TGETS    3   0   2  ; "buffer"
0004    MOV      4   1
0005    CALL     2   1   3
0006    RET0     0   1

-- BYTECODE -- persist.lua:171-179
0001    TDUP     2   0
0002    TNEW     3   0
0003    TSETS    3   2   1  ; "buffer"
0004    FNEW     3   3      ; persist.lua:173
0005    TSETS    3   2   2  ; "write"
0006    UGET     3   0      ; write_table_as_assignments
0007    MOV      4   2
0008    MOV      5   0
0009    MOV      6   1
0010    CALL     3   3   4
0011    IST          3
0012    JMP      5 => 0017
0013    KPRI     5   0
0014    MOV      6   4
0015    UCLO     0 => 0016
0016 => RET      5   3
0017 => GGET     5   4      ; "table"
0018    TGETS    5   5   5  ; "concat"
0019    TGETS    6   2   1  ; "buffer"
0020    UCLO     0 => 0021
0021 => CALLT    5   2

-- BYTECODE -- persist.lua:190-201
0001    GGET     3   0      ; "io"
0002    TGETS    3   3   1  ; "open"
0003    MOV      4   0
0004    KSTR     5   2      ; "w"
0005    CALL     3   2   3
0006    IST          3
0007    JMP      4 => 0013
0008    KPRI     4   0
0009    KSTR     5   3      ; "Cannot create file at "
0010    MOV      6   0
0011    CAT      5   5   6
0012    RET      4   3
0013 => UGET     4   0      ; write_table_as_assignments
0014    MOV      5   3
0015    MOV      6   1
0016    MOV      7   2
0017    CALL     4   3   4
0018    MOV      7   3
0019    TGETS    6   3   4  ; "close"
0020    CALL     6   1   2
0021    IST          4
0022    JMP      6 => 0026
0023    KPRI     6   0
0024    MOV      7   5
0025    RET      6   3
0026 => KPRI     6   2
0027    RET1     6   2

-- BYTECODE -- persist.lua:211-219
0001    GGET     2   0      ; "io"
0002    TGETS    2   2   1  ; "open"
0003    MOV      3   0
0004    KSTR     4   2      ; "w"
0005    CALL     2   2   3
0006    IST          2
0007    JMP      3 => 0013
0008    KPRI     3   0
0009    KSTR     4   3      ; "Cannot create file at "
0010    MOV      5   0
0011    CAT      4   4   5
0012    RET      3   3
0013 => UGET     3   0      ; write_table_as_table
0014    MOV      4   2
0015    MOV      5   1
0016    CALL     3   1   3
0017    MOV      4   2
0018    TGETS    3   2   4  ; "close"
0019    CALL     3   1   2
0020    KPRI     3   2
0021    RET1     3   2

-- BYTECODE -- persist.lua:221-241
0001    TDUP     2   1
0002    TGETS    3   1   0  ; "home"
0003    TSETS    3   2   0  ; "home"
0004    UGET     3   0      ; persist
0005    TGETS    3   3   2  ; "load_into_table"
0006    MOV      4   0
0007    MOV      5   2
0008    CALL     3   4   3
0009    ISEQS    5   3      ; "load"
0010    JMP      6 => 0013
0011    ISNES    5   4      ; "run"
0012    JMP      6 => 0018
0013 => KPRI     6   0
0014    KSTR     7   5      ; "Could not read existing config file "
0015    MOV      8   0
0016    CAT      7   7   8
0017    RET      6   3
0018 => KPRI     6   0
0019    ISNES    5   6      ; "open"
0020    JMP      7 => 0023
0021    TNEW     6   0
0022    JMP      7 => 0026
0023 => MOV      6   3
0024    KPRI     7   0
0025    TSETS    7   6   0  ; "home"
0026 => RET1     6   2

-- BYTECODE -- persist.lua:243-255
0001    UGET     2   0      ; fs
0002    TGETS    2   2   0  ; "make_dir"
0003    MOV      3   0
0004    CALL     2   3   2
0005    IST          2
0006    JMP      4 => 0010
0007    KPRI     4   0
0008    MOV      5   3
0009    RET      4   3
0010 => GGET     4   1      ; "io"
0011    TGETS    4   4   2  ; "open"
0012    UGET     5   1      ; dir
0013    TGETS    5   5   3  ; "path"
0014    MOV      6   0
0015    KSTR     7   4      ; "default-lua-version.lua"
0016    CALL     5   2   3
0017    KSTR     6   5      ; "w"
0018    CALL     4   3   3
0019    IST          4
0020    JMP      6 => 0024
0021    KPRI     6   0
0022    MOV      7   5
0023    RET      6   3
0024 => MOV      7   4
0025    TGETS    6   4   6  ; "write"
0026    KSTR     8   7      ; "return ""
0027    MOV      9   1
0028    KSTR    10   8      ; ""\n"
0029    CAT      8   8  10
0030    CALL     6   1   3
0031    MOV      7   4
0032    TGETS    6   4   9  ; "close"
0033    CALL     6   1   2
0034    KPRI     6   2
0035    RET1     6   2

-- BYTECODE -- persist.lua:0-258
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.persist"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.fs"
0013    CALL     4   2   2
0014    TGETS    5   1   5  ; "run_file"
0015    TSETS    5   0   5  ; "run_file"
0016    TGETS    5   1   6  ; "load_into_table"
0017    TSETS    5   0   6  ; "load_into_table"
0018    KPRI     5   0
0019    FNEW     6   8      ; persist.lua:24
0020    TSETS    6   0   7  ; "write_value"
0021    KPRI     6   0
0022    TDUP     7   9
0023    FNEW     6  10      ; persist.lua:73
0024    UCLO     7 => 0025
0025 => FNEW     7  11      ; persist.lua:80
0026    FNEW     5  12      ; persist.lua:99
0027    FNEW     8  13      ; persist.lua:138
0028    FNEW     9  14      ; persist.lua:153
0029    FNEW    10  16      ; persist.lua:171
0030    TSETS   10   0  15  ; "save_from_table_to_string"
0031    FNEW    10  18      ; persist.lua:190
0032    TSETS   10   0  17  ; "save_from_table"
0033    FNEW    10  20      ; persist.lua:211
0034    TSETS   10   0  19  ; "save_as_module"
0035    FNEW    10  22      ; persist.lua:221
0036    TSETS   10   0  21  ; "load_config_file_if_basic"
0037    FNEW    10  24      ; persist.lua:243
0038    TSETS   10   0  23  ; "save_default_lua_version"
0039    UCLO     0 => 0040
0040 => RET1     0   2

-----------------------
-- BYTECODE -- multipart.lua:10-12
0001    GGET     1   0      ; "string"
0002    TGETS    1   1   1  ; "format"
0003    KSTR     2   2      ; "%%%02x"
0004    GGET     3   0      ; "string"
0005    TGETS    3   3   3  ; "byte"
0006    MOV      4   0
0007    CALL     3   0   2
0008    CALLMT   1   1

-- BYTECODE -- multipart.lua:9-13
0001    GGET     1   0      ; "string"
0002    TGETS    1   1   1  ; "gsub"
0003    MOV      2   0
0004    KSTR     3   2      ; "([^A-Za-z0-9_])"
0005    FNEW     4   3      ; multipart.lua:10
0006    CALL     1   2   4
0007    UCLO     0 => 0008
0008 => RET1     1   2

-- BYTECODE -- multipart.lua:15-24
0001    TGETS    1   0   0  ; "mimetype"
0002    IST          1
0003    JMP      1 => 0019
0004    GGET     1   1      ; "pcall"
0005    GGET     2   2      ; "require"
0006    KSTR     3   3      ; "mimetypes"
0007    CALL     1   3   3
0008    ISF          1
0009    JMP      3 => 0014
0010    TGETS    3   2   4  ; "guess"
0011    TGETS    4   0   5  ; "fname"
0012    CALL     3   2   2
0013    TSETS    3   0   0  ; "mimetype"
0014 => TGETS    3   0   0  ; "mimetype"
0015    IST          3
0016    JMP      4 => 0018
0017    KSTR     3   6      ; "application/octet-stream"
0018 => TSETS    3   0   0  ; "mimetype"
0019 => TGETS    1   0   0  ; "mimetype"
0020    RET1     1   2

-- BYTECODE -- multipart.lua:26-34
0001    GGET     1   0      ; "io"
0002    TGETS    1   1   1  ; "open"
0003    TGETS    2   0   2  ; "fname"
0004    KSTR     3   3      ; "rb"
0005    CALL     1   2   3
0006    IST          1
0007    JMP      2 => 0013
0008    KPRI     2   0
0009    KSTR     3   4      ; "Failed to open file: "
0010    TGETS    4   0   2  ; "fname"
0011    CAT      3   3   4
0012    RET      2   3
0013 => MOV      3   1
0014    TGETS    2   1   5  ; "read"
0015    KSTR     4   6      ; "*a"
0016    CALL     2   2   3
0017    MOV      4   1
0018    TGETS    3   1   7  ; "close"
0019    CALL     3   1   2
0020    RET1     2   2

-- BYTECODE -- multipart.lua:36-46
0001    TNEW     1   0
0002    KSHORT   2   1
0003    MOV      3   0
0004    KSHORT   4   1
0005    FORI     2 => 0020
0006 => GGET     6   0      ; "math"
0007    TGETS    6   6   1  ; "random"
0008    KSHORT   7  97
0009    KSHORT   8 122
0010    CALL     6   2   3
0011    GGET     7   0      ; "math"
0012    TGETS    7   7   1  ; "random"
0013    CALL     7   2   1
0014    KNUM     8   0      ; 0.5
0015    ISGT     8   7
0016    JMP      7 => 0018
0017    SUBVN    6   6   1  ; 32
0018 => TSETV    6   1   5
0019    FORL     2 => 0006
0020 => GGET     2   2      ; "string"
0021    TGETS    2   2   3  ; "char"
0022    UGET     3   0      ; unpack
0023    MOV      4   1
0024    CALL     3   0   2
0025    CALLMT   2   0

-- BYTECODE -- multipart.lua:56-97
0001    TNEW     1   0
0002    KSHORT   2   1
0003    LEN      3   0
0004    KSHORT   4   1
0005    FORI     2 => 0009
0006 => TGETV    6   0   5
0007    TSETV    6   1   5
0008    FORL     2 => 0006
0009 => GGET     2   0      ; "pairs"
0010    MOV      3   0
0011    CALL     2   4   2
0012    ISNEXT   5 => 0025
0013 => GGET     7   1      ; "type"
0014    MOV      8   5
0015    CALL     7   2   2
0016    ISNES    7   2      ; "string"
0017    JMP      7 => 0025
0018    GGET     7   3      ; "table"
0019    TGETS    7   7   4  ; "insert"
0020    MOV      8   1
0021    TNEW     9   3
0022    TSETB    5   9   1
0023    TSETB    6   9   2
0024    CALL     7   1   3
0025 => ITERN    5   3   3
0026    ITERL    5 => 0013
0027    TNEW     2   0
0028    GGET     3   5      ; "ipairs"
0029    MOV      4   1
0030    CALL     3   4   2
0031    JMP      6 => 0101
0032 => UGET     8   0      ; unpack
0033    MOV      9   7
0034    CALL     8   3   2
0035    UGET    10   1      ; multipart
0036    TGETS   10  10   6  ; "url_escape"
0037    MOV     11   8
0038    CALL    10   2   2
0039    MOV      8  10
0040    TNEW    10   3
0041    KSTR    11   7      ; "Content-Disposition: form-data; name=""
0042    MOV     12   8
0043    KSTR    13   8      ; """
0044    CAT     11  11  13
0045    TSETB   11  10   1
0046    KPRI    11   0
0047    GGET    12   1      ; "type"
0048    MOV     13   9
0049    CALL    12   2   2
0050    ISNES   12   3      ; "table"
0051    JMP     12 => 0081
0052    TGETS   12   9   9  ; "__class"
0053    UGET    13   2      ; File
0054    ISNEV   12  13
0055    JMP     12 => 0081
0056    TGETB   12  10   1
0057    KSTR    13  10      ; "; filename=""
0058    TGETS   14   9  11  ; "fname"
0059    MOV     15  14
0060    TGETS   14  14  12  ; "gsub"
0061    KSTR    16  13      ; ".*/"
0062    KSTR    17  14      ; ""
0063    CALL    14   2   4
0064    KSTR    15   8      ; """
0065    CAT     12  12  15
0066    TSETB   12  10   1
0067    GGET    12   3      ; "table"
0068    TGETS   12  12   4  ; "insert"
0069    MOV     13  10
0070    KSTR    14  15      ; "Content-type: "
0071    MOV     16   9
0072    TGETS   15   9  16  ; "mime"
0073    CALL    15   2   2
0074    CAT     14  14  15
0075    CALL    12   1   3
0076    MOV     13   9
0077    TGETS   12   9  17  ; "content"
0078    CALL    12   2   2
0079    MOV     11  12
0080    JMP     12 => 0082
0081 => MOV     11   9
0082 => GGET    12   3      ; "table"
0083    TGETS   12  12   4  ; "insert"
0084    MOV     13  10
0085    KSTR    14  14      ; ""
0086    CALL    12   1   3
0087    GGET    12   3      ; "table"
0088    TGETS   12  12   4  ; "insert"
0089    MOV     13  10
0090    MOV     14  11
0091    CALL    12   1   3
0092    GGET    12   3      ; "table"
0093    TGETS   12  12   4  ; "insert"
0094    MOV     13   2
0095    GGET    14   3      ; "table"
0096    TGETS   14  14  18  ; "concat"
0097    MOV     15  10
0098    KSTR    16  19      ; "\r\n"
0099    CALL    14   0   3
0100    CALLM   12   1   1
0101 => ITERC    6   3   3
0102    ITERL    6 => 0032
0103    KPRI     3   0
0104 => IST          3
0105    JMP      4 => 0127
0106    LOOP     4 => 0127
0107    KSTR     4  20      ; "Boundary"
0108    UGET     5   3      ; rand_string
0109    KSHORT   6  16
0110    CALL     5   2   2
0111    CAT      3   4   5
0112    GGET     4   5      ; "ipairs"
0113    MOV      5   2
0114    CALL     4   4   2
0115    JMP      7 => 0124
0116 => MOV     10   8
0117    TGETS    9   8  21  ; "find"
0118    MOV     11   3
0119    CALL     9   2   3
0120    ISF          9
0121    JMP     10 => 0124
0122    KPRI     3   0
0123    JMP      4 => 0104
0124 => ITERC    7   3   3
0125    ITERL    7 => 0116
0126    JMP      4 => 0104
0127 => KSTR     4  22      ; "\r\n--"
0128    MOV      5   3
0129    KSTR     6  19      ; "\r\n"
0130    CAT      4   4   6
0131    GGET     5   3      ; "table"
0132    TGETS    5   5  18  ; "concat"
0133    TDUP     6  23
0134    TSETB    3   6   2
0135    GGET     7   3      ; "table"
0136    TGETS    7   7  18  ; "concat"
0137    MOV      8   2
0138    MOV      9   4
0139    CALL     7   2   3
0140    TSETB    7   6   4
0141    TSETB    3   6   7
0142    CALL     5   2   2
0143    MOV      6   3
0144    RET      5   3

-- BYTECODE -- multipart.lua:99-106
0001    TNEW     2   0
0002    GGET     3   0      ; "setmetatable"
0003    MOV      4   2
0004    TDUP     5   1
0005    UGET     6   0      ; File
0006    TSETS    6   5   2  ; "__index"
0007    CALL     3   1   3
0008    UGET     3   0      ; File
0009    TSETS    3   2   3  ; "__class"
0010    TSETS    0   2   4  ; "fname"
0011    TSETS    1   2   5  ; "mimetype"
0012    RET1     2   2

-- BYTECODE -- multipart.lua:0-110
0001    TNEW     0   0
0002    TNEW     1   0
0003    GGET     2   0      ; "unpack"
0004    IST          2
0005    JMP      3 => 0008
0006    GGET     2   1      ; "table"
0007    TGETS    2   2   0  ; "unpack"
0008 => FNEW     3   3      ; multipart.lua:9
0009    TSETS    3   0   2  ; "url_escape"
0010    FNEW     3   5      ; multipart.lua:15
0011    TSETS    3   1   4  ; "mime"
0012    FNEW     3   7      ; multipart.lua:26
0013    TSETS    3   1   6  ; "content"
0014    FNEW     3   8      ; multipart.lua:36
0015    FNEW     4  10      ; multipart.lua:56
0016    TSETS    4   0   9  ; "encode"
0017    FNEW     4  12      ; multipart.lua:99
0018    TSETS    4   0  11  ; "new_file"
0019    UCLO     0 => 0020
0020 => RET1     0   2

-----------------------
-- BYTECODE -- api.lua:13-18
0001    UGET     0   0      ; cfg
0002    TGETS    0   0   0  ; "config_files"
0003    TGETS    0   0   1  ; "user"
0004    TGETS    0   0   2  ; "file"
0005    IST          0
0006    JMP      0 => 0009
0007    KPRI     0   0
0008    RET1     0   2
0009 => UGET     0   0      ; cfg
0010    TGETS    0   0   0  ; "config_files"
0011    TGETS    0   0   1  ; "user"
0012    TGETS    0   0   2  ; "file"
0013    MOV      1   0
0014    TGETS    0   0   3  ; "gsub"
0015    KSTR     2   4      ; "/[^/]+$"
0016    KSTR     3   5      ; "/upload_config.lua"
0017    CALL     0   2   4
0018    RET1     0   2

-- BYTECODE -- api.lua:20-25
0001    UGET     1   0      ; upload_config_file
0002    CALL     1   2   1
0003    IST          1
0004    JMP      2 => 0007
0005    KPRI     2   0
0006    RET1     2   2
0007 => UGET     2   1      ; persist
0008    TGETS    2   2   0  ; "load_into_table"
0009    MOV      3   1
0010    CALL     2   3   2
0011    RET1     2   2

-- BYTECODE -- api.lua:27-45
0001    MOV      2   0
0002    TGETS    1   0   0  ; "raw_method"
0003    KSTR     3   1      ; "status"
0004    CALL     1   3   3
0005    IST          1
0006    JMP      3 => 0010
0007    KPRI     3   0
0008    MOV      4   2
0009    RET      3   3
0010 => TGETS    3   1   2  ; "errors"
0011    ISF          3
0012    JMP      4 => 0023
0013    UGET     3   0      ; util
0014    TGETS    3   3   3  ; "printerr"
0015    KSTR     4   4      ; "Server says: "
0016    GGET     5   5      ; "tostring"
0017    TGETS    6   1   2  ; "errors"
0018    TGETB    6   6   1
0019    CALL     5   2   2
0020    CAT      4   4   5
0021    CALL     3   1   2
0022    RET0     0   1
0023 => UGET     3   1      ; upload_config_file
0024    CALL     3   2   1
0025    IST          3
0026    JMP      4 => 0029
0027    KPRI     4   0
0028    RET1     4   2
0029 => UGET     4   2      ; fs
0030    TGETS    4   4   6  ; "make_dir"
0031    UGET     5   3      ; dir
0032    TGETS    5   5   7  ; "dir_name"
0033    MOV      6   3
0034    CALL     5   0   2
0035    CALLM    4   3   0
0036    IST          4
0037    JMP      6 => 0041
0038    KPRI     6   0
0039    MOV      7   5
0040    RET      6   3
0041 => UGET     6   4      ; persist
0042    TGETS    6   6   8  ; "save_from_table"
0043    MOV      7   3
0044    TGETS    8   0   9  ; "config"
0045    CALL     6   1   3
0046    UGET     6   2      ; fs
0047    TGETS    6   6  10  ; "set_permissions"
0048    MOV      7   3
0049    KSTR     8  11      ; "read"
0050    KSTR     9  12      ; "user"
0051    CALL     6   1   4
0052    RET0     0   1

-- BYTECODE -- api.lua:47-68
0001    TGETS    1   0   0  ; "_server_tool_version"
0002    IST          1
0003    JMP      1 => 0044
0004    UGET     1   0      ; cfg
0005    TGETS    1   1   1  ; "upload"
0006    TGETS    1   1   2  ; "tool_version"
0007    MOV      3   0
0008    TGETS    2   0   3  ; "request"
0009    GGET     4   4      ; "tostring"
0010    TGETS    5   0   5  ; "config"
0011    TGETS    5   5   6  ; "server"
0012    CALL     4   2   2
0013    KSTR     5   7      ; "/api/tool_version"
0014    CAT      4   4   5
0015    TDUP     5   8
0016    TSETS    1   5   9  ; "current"
0017    CALL     2   3   4
0018    IST          2
0019    JMP      4 => 0023
0020    KPRI     4   0
0021    MOV      5   3
0022    RET      4   3
0023 => TGETS    4   2  10  ; "version"
0024    IST          4
0025    JMP      4 => 0029
0026    KPRI     4   0
0027    KSTR     5  11      ; "failed to fetch tool version"
0028    RET      4   3
0029 => TGETS    4   2  10  ; "version"
0030    TSETS    4   0   0  ; "_server_tool_version"
0031    TGETS    4   2  12  ; "force_update"
0032    ISF          4
0033    JMP      5 => 0037
0034    KPRI     4   0
0035    KSTR     5  13      ; "Your upload client is too out of date to"~
0036    RET      4   3
0037 => TGETS    4   2  10  ; "version"
0038    ISEQV    4   1
0039    JMP      4 => 0044
0040    UGET     4   1      ; util
0041    TGETS    4   4  14  ; "warning"
0042    KSTR     5  15      ; "your LuaRocks is out of date, consider u"~
0043    CALL     4   1   2
0044 => KPRI     1   2
0045    RET1     1   2

-- BYTECODE -- api.lua:70-83
0001    MOV      2   0
0002    TGETS    1   0   0  ; "raw_method"
0003    VARG     3   0   1
0004    CALLM    1   3   1
0005    IST          1
0006    JMP      3 => 0010
0007    KPRI     3   0
0008    MOV      4   2
0009    RET      3   3
0010 => TGETS    3   1   1  ; "errors"
0011    ISF          3
0012    JMP      4 => 0033
0013    TGETS    3   1   1  ; "errors"
0014    TGETB    3   3   1
0015    ISNES    3   2      ; "Invalid key"
0016    JMP      3 => 0023
0017    KPRI     3   0
0018    TGETS    4   1   1  ; "errors"
0019    TGETB    4   4   1
0020    KSTR     5   3      ; " (use the --api-key flag to change)"
0021    CAT      4   4   5
0022    RET      3   3
0023 => GGET     3   4      ; "table"
0024    TGETS    3   3   5  ; "concat"
0025    TGETS    4   1   1  ; "errors"
0026    KSTR     5   6      ; ", "
0027    CALL     3   2   3
0028    KPRI     4   0
0029    KSTR     5   7      ; "API Failed: "
0030    MOV      6   3
0031    CAT      5   5   6
0032    RET      4   3
0033 => RET1     1   2

-- BYTECODE -- api.lua:85-89
0001    MOV      3   0
0002    TGETS    2   0   0  ; "check_version"
0003    CALL     2   1   2
0004    GGET     2   1      ; "tostring"
0005    TGETS    3   0   2  ; "config"
0006    TGETS    3   3   3  ; "server"
0007    CALL     2   2   2
0008    KSTR     3   4      ; "/api/"
0009    GGET     4   1      ; "tostring"
0010    UGET     5   0      ; cfg
0011    TGETS    5   5   5  ; "upload"
0012    TGETS    5   5   6  ; "api_version"
0013    CALL     4   2   2
0014    KSTR     5   7      ; "/"
0015    GGET     6   1      ; "tostring"
0016    TGETS    7   0   2  ; "config"
0017    TGETS    7   7   8  ; "key"
0018    CALL     6   2   2
0019    KSTR     7   7      ; "/"
0020    GGET     8   1      ; "tostring"
0021    MOV      9   1
0022    CALL     8   2   2
0023    CAT      2   2   8
0024    MOV      4   0
0025    TGETS    3   0   9  ; "request"
0026    MOV      5   2
0027    VARG     6   0   2
0028    CALLMT   3   2

-- BYTECODE -- api.lua:91-109
0001    ISNEP    1   0
0002    JMP      2 => 0004
0003    KSTR     1   0      ; "&"
0004 => KSHORT   2   0
0005    TNEW     3   0
0006    GGET     4   1      ; "pairs"
0007    MOV      5   0
0008    CALL     4   4   2
0009    ISNEXT   7 => 0041
0010 => GGET     9   2      ; "type"
0011    MOV     10   7
0012    CALL     9   2   2
0013    ISNES    9   3      ; "number"
0014    JMP      9 => 0023
0015    GGET     9   2      ; "type"
0016    MOV     10   8
0017    CALL     9   2   2
0018    ISNES    9   4      ; "table"
0019    JMP      9 => 0023
0020    TGETB    9   8   1
0021    TGETB    8   8   2
0022    MOV      7   9
0023 => ADDVN    9   2   0  ; 1
0024    UGET    10   0      ; multipart
0025    TGETS   10  10   5  ; "url_escape"
0026    MOV     11   7
0027    CALL    10   2   2
0028    TSETV   10   3   9
0029    ADDVN    9   2   1  ; 2
0030    KSTR    10   6      ; "="
0031    TSETV   10   3   9
0032    ADDVN    9   2   2  ; 3
0033    UGET    10   0      ; multipart
0034    TGETS   10  10   5  ; "url_escape"
0035    MOV     11   8
0036    CALL    10   2   2
0037    TSETV   10   3   9
0038    ADDVN    9   2   3  ; 4
0039    TSETV    1   3   9
0040    ADDVN    2   2   3  ; 4
0041 => ITERN    7   3   3
0042    ITERL    7 => 0010
0043    KPRI     4   0
0044    TSETV    4   3   2
0045    GGET     4   4      ; "table"
0046    TGETS    4   4   7  ; "concat"
0047    MOV      5   3
0048    CALLT    4   2

-- BYTECODE -- api.lua:111-114
0001    GGET     1   0      ; "tostring"
0002    MOV      2   0
0003    CALL     1   2   2
0004    MOV      0   1
0005    MOV      2   0
0006    TGETS    1   0   1  ; "gsub"
0007    KSTR     3   2      ; ".*/api/[^/]+/[^/]+"
0008    KSTR     4   3      ; ""
0009    CALL     1   2   4
0010    IST          1
0011    JMP      2 => 0013
0012    KSTR     1   3      ; ""
0013 => RET1     1   2

-- BYTECODE -- api.lua:119-178
0001    UGET     4   0      ; cfg
0002    TGETS    4   4   0  ; "variables"
0003    UGET     5   1      ; util
0004    TGETS    5   5   1  ; "require_json"
0005    CALL     5   3   1
0006    IST          5
0007    JMP      7 => 0013
0008    KPRI     7   0
0009    KSTR     8   2      ; "A JSON library is required for this comm"~
0010    MOV      9   6
0011    CAT      8   8   9
0012    RET      7   3
0013 => UGET     7   2      ; fs
0014    TGETS    7   7   3  ; "which_tool"
0015    KSTR     8   4      ; "downloader"
0016    CALL     7   2   2
0017    ISNES    7   5      ; "wget"
0018    JMP      7 => 0029
0019    UGET     7   2      ; fs
0020    TGETS    7   7   6  ; "is_tool_available"
0021    TGETS    8   4   7  ; "CURL"
0022    KSTR     9   8      ; "curl"
0023    CALL     7   3   3
0024    IST          7
0025    JMP      9 => 0029
0026    KPRI     9   0
0027    MOV     10   8
0028    RET      9   3
0029 => TGETS    7   0   9  ; "config"
0030    TGETS    7   7  10  ; "key"
0031    IST          7
0032    JMP      7 => 0036
0033    KPRI     7   0
0034    KSTR     8  11      ; "Must have API key before performing any "~
0035    RET      7   3
0036 => ISF          2
0037    JMP      7 => 0049
0038    GGET     7  12      ; "next"
0039    MOV      8   2
0040    CALL     7   2   2
0041    ISF          7
0042    JMP      8 => 0049
0043    MOV      7   1
0044    KSTR     8  13      ; "?"
0045    UGET     9   3      ; encode_query_string
0046    MOV     10   2
0047    CALL     9   2   2
0048    CAT      1   7   9
0049 => KSTR     7  14      ; "GET"
0050    KPRI     8   0
0051    UGET     9   2      ; fs
0052    TGETS    9   9  15  ; "tmpname"
0053    CALL     9   2   1
0054    ISF          3
0055    JMP     10 => 0126
0056    KSTR     7  16      ; "POST"
0057    TGETS   10   4   7  ; "CURL"
0058    KSTR    11  17      ; " -f -k -L --silent --user-agent ""
0059    UGET    12   0      ; cfg
0060    TGETS   12  12  18  ; "user_agent"
0061    KSTR    13  19      ; " via curl" "
0062    CAT     10  10  13
0063    GGET    11  20      ; "pairs"
0064    MOV     12   3
0065    CALL    11   4   2
0066    ISNEXT  14 => 0083
0067 => MOV     16  15
0068    GGET    17  21      ; "type"
0069    MOV     18  15
0070    CALL    17   2   2
0071    ISNES   17  22      ; "table"
0072    JMP     17 => 0076
0073    KSTR    17  23      ; "@"
0074    TGETS   18  15  24  ; "fname"
0075    CAT     16  17  18
0076 => MOV     17  10
0077    KSTR    18  25      ; "--form ""
0078    MOV     19  14
0079    KSTR    20  26      ; "="
0080    MOV     21  16
0081    KSTR    22  27      ; "" "
0082    CAT     10  17  22
0083 => ITERN   14   3   3
0084    ITERL   14 => 0067
0085    UGET    11   0      ; cfg
0086    TGETS   11  11  28  ; "connection_timeout"
0087    ISF         11
0088    JMP     12 => 0102
0089    UGET    11   0      ; cfg
0090    TGETS   11  11  28  ; "connection_timeout"
0091    KSHORT  12   0
0092    ISGE    12  11
0093    JMP     11 => 0102
0094    MOV     11  10
0095    KSTR    12  29      ; "--connect-timeout "
0096    GGET    13  30      ; "tonumber"
0097    UGET    14   0      ; cfg
0098    TGETS   14  14  28  ; "connection_timeout"
0099    CALL    13   2   2
0100    KSTR    14  31      ; " "
0101    CAT     10  11  14
0102 => UGET    11   2      ; fs
0103    TGETS   11  11  32  ; "execute_string"
0104    MOV     12  10
0105    UGET    13   2      ; fs
0106    TGETS   13  13  33  ; "Q"
0107    MOV     14   1
0108    CALL    13   2   2
0109    KSTR    14  34      ; " -o "
0110    UGET    15   2      ; fs
0111    TGETS   15  15  33  ; "Q"
0112    MOV     16   9
0113    CALL    15   2   2
0114    CAT     12  12  15
0115    CALL    11   2   2
0116    IST         11
0117    JMP     12 => 0144
0118    KPRI    12   0
0119    KSTR    13  35      ; "API failure: "
0120    UGET    14   4      ; redact_api_url
0121    MOV     15   1
0122    CALL    14   2   2
0123    CAT     13  13  14
0124    RET     12   3
0125    JMP     10 => 0144
0126 => UGET    10   2      ; fs
0127    TGETS   10  10  36  ; "download"
0128    MOV     11   1
0129    MOV     12   9
0130    CALL    10   3   3
0131    IST         10
0132    JMP     12 => 0144
0133    KPRI    12   0
0134    KSTR    13  35      ; "API failure: "
0135    GGET    14  37      ; "tostring"
0136    MOV     15  11
0137    CALL    14   2   2
0138    KSTR    15  38      ; " - "
0139    UGET    16   4      ; redact_api_url
0140    MOV     17   1
0141    CALL    16   2   2
0142    CAT     13  13  16
0143    RET     12   3
0144 => GGET    10  39      ; "io"
0145    TGETS   10  10  40  ; "open"
0146    MOV     11   9
0147    CALL    10   2   2
0148    IST         10
0149    JMP     11 => 0161
0150    GGET    11  41      ; "os"
0151    TGETS   11  11  42  ; "remove"
0152    MOV     12   9
0153    CALL    11   1   2
0154    KPRI    11   0
0155    KSTR    12  43      ; "API failure reading temporary file - "
0156    UGET    13   4      ; redact_api_url
0157    MOV     14   1
0158    CALL    13   2   2
0159    CAT     12  12  13
0160    RET     11   3
0161 => MOV     12  10
0162    TGETS   11  10  44  ; "read"
0163    KSTR    13  45      ; "*a"
0164    CALL    11   2   3
0165    MOV      8  11
0166    MOV     12  10
0167    TGETS   11  10  46  ; "close"
0168    CALL    11   1   2
0169    GGET    11  41      ; "os"
0170    TGETS   11  11  42  ; "remove"
0171    MOV     12   9
0172    CALL    11   1   2
0173    TGETS   11   0  47  ; "debug"
0174    ISF         11
0175    JMP     12 => 0189
0176    UGET    11   1      ; util
0177    TGETS   11  11  48  ; "printout"
0178    KSTR    12  49      ; "["
0179    GGET    13  37      ; "tostring"
0180    MOV     14   7
0181    CALL    13   2   2
0182    KSTR    14  50      ; " via curl] "
0183    UGET    15   4      ; redact_api_url
0184    MOV     16   1
0185    CALL    15   2   2
0186    KSTR    16  51      ; " ... "
0187    CAT     12  12  16
0188    CALL    11   1   2
0189 => TGETS   11   6  52  ; "decode"
0190    MOV     12   8
0191    CALLT   11   2

-- BYTECODE -- api.lua:184-244
0001    UGET     4   0      ; util
0002    TGETS    4   4   0  ; "require_json"
0003    CALL     4   3   1
0004    IST          4
0005    JMP      6 => 0011
0006    KPRI     6   0
0007    KSTR     7   1      ; "A JSON library is required for this comm"~
0008    MOV      8   5
0009    CAT      7   7   8
0010    RET      6   3
0011 => GGET     6   2      ; "tostring"
0012    TGETS    7   0   3  ; "config"
0013    TGETS    7   7   4  ; "server"
0014    CALL     6   2   2
0015    KNIL     7   8
0016    KSTR     9   5      ; "luasocket"
0017    MOV     11   6
0018    TGETS   10   6   6  ; "match"
0019    KSTR    12   7      ; "^https://"
0020    CALL    10   2   3
0021    ISF         10
0022    JMP     11 => 0055
0023    GGET    10   8      ; "pcall"
0024    GGET    11   9      ; "require"
0025    KSTR    12  10      ; "ssl.https"
0026    CALL    10   3   3
0027    MOV      8  11
0028    MOV      7  10
0029    ISF          7
0030    JMP     10 => 0033
0031    KSTR     9  11      ; "luasec"
0032    JMP     10 => 0061
0033 => UGET    10   1      ; warned_luasec
0034    IST         10
0035    JMP     10 => 0041
0036    UGET    10   0      ; util
0037    TGETS   10  10  12  ; "printerr"
0038    KSTR    11  13      ; "LuaSec is not available; using plain HTT"~
0039    CALL    10   1   2
0040    USETP    1   2      ; warned_luasec
0041 => GGET    10   8      ; "pcall"
0042    GGET    11   9      ; "require"
0043    KSTR    12  14      ; "socket.http"
0044    CALL    10   3   3
0045    MOV      8  11
0046    MOV      7  10
0047    MOV     11   1
0048    TGETS   10   1  15  ; "gsub"
0049    KSTR    12  16      ; "^https"
0050    KSTR    13  17      ; "http"
0051    CALL    10   2   4
0052    MOV      1  10
0053    KSTR     9   5      ; "luasocket"
0054    JMP     10 => 0061
0055 => GGET    10   8      ; "pcall"
0056    GGET    11   9      ; "require"
0057    KSTR    12  14      ; "socket.http"
0058    CALL    10   3   3
0059    MOV      8  11
0060    MOV      7  10
0061 => IST          7
0062    JMP     10 => 0066
0063    KPRI    10   0
0064    KSTR    11  18      ; "Failed loading socket library!"
0065    RET     10   3
0066 => TGETS   10   0   3  ; "config"
0067    TGETS   10  10  19  ; "key"
0068    IST         10
0069    JMP     10 => 0073
0070    KPRI    10   0
0071    KSTR    11  20      ; "Must have API key before performing any "~
0072    RET     10   3
0073 => KPRI    10   0
0074    TNEW    11   0
0075    ISF          2
0076    JMP     12 => 0088
0077    GGET    12  21      ; "next"
0078    MOV     13   2
0079    CALL    12   2   2
0080    ISF         12
0081    JMP     13 => 0088
0082    MOV     12   1
0083    KSTR    13  22      ; "?"
0084    UGET    14   2      ; encode_query_string
0085    MOV     15   2
0086    CALL    14   2   2
0087    CAT      1  12  14
0088 => ISF          3
0089    JMP     12 => 0105
0090    KPRI    12   0
0091    UGET    13   3      ; multipart
0092    TGETS   13  13  23  ; "encode"
0093    MOV     14   3
0094    CALL    13   3   2
0095    MOV     12  14
0096    MOV     10  13
0097    LEN     13  10
0098    TSETS   13  11  24  ; "Content-length"
0099    KSTR    13  26      ; "multipart/form-data; boundary="
0100    GGET    14   2      ; "tostring"
0101    MOV     15  12
0102    CALL    14   2   2
0103    CAT     13  13  14
0104    TSETS   13  11  25  ; "Content-type"
0105 => ISF          3
0106    JMP     12 => 0109
0107    KSTR    12  27      ; "POST"
0108    JMP     13 => 0110
0109 => KSTR    12  28      ; "GET"
0110 => TGETS   13   0  29  ; "debug"
0111    ISF         13
0112    JMP     14 => 0128
0113    UGET    13   0      ; util
0114    TGETS   13  13  30  ; "printout"
0115    KSTR    14  31      ; "["
0116    GGET    15   2      ; "tostring"
0117    MOV     16  12
0118    CALL    15   2   2
0119    KSTR    16  32      ; " via "
0120    MOV     17   9
0121    KSTR    18  33      ; "] "
0122    UGET    19   4      ; redact_api_url
0123    MOV     20   1
0124    CALL    19   2   2
0125    KSTR    20  34      ; " ... "
0126    CAT     14  14  20
0127    CALL    13   1   2
0128 => TNEW    13   0
0129    TGETS   14   8  35  ; "request"
0130    TDUP    15  36
0131    TSETS    1  15  37  ; "url"
0132    TSETS   11  15  38  ; "headers"
0133    TSETS   12  15  39  ; "method"
0134    UGET    16   5      ; ltn12
0135    TGETS   16  16  40  ; "sink"
0136    TGETS   16  16  41  ; "table"
0137    MOV     17  13
0138    CALL    16   2   2
0139    TSETS   16  15  40  ; "sink"
0140    ISFC    16  10
0141    JMP     16 => 0147
0142    UGET    16   5      ; ltn12
0143    TGETS   16  16  42  ; "source"
0144    TGETS   16  16  43  ; "string"
0145    MOV     17  10
0146    CALL    16   2   2
0147 => TSETS   16  15  42  ; "source"
0148    CALL    14   3   2
0149    TGETS   16   0  29  ; "debug"
0150    ISF         16
0151    JMP     17 => 0158
0152    UGET    16   0      ; util
0153    TGETS   16  16  30  ; "printout"
0154    GGET    17   2      ; "tostring"
0155    MOV     18  15
0156    CALL    17   0   2
0157    CALLM   16   1   0
0158 => GGET    16   8      ; "pcall"
0159    TGETS   17   5  44  ; "decode"
0160    GGET    18  41      ; "table"
0161    TGETS   18  18  45  ; "concat"
0162    MOV     19  13
0163    CALL    18   0   2
0164    CALLM   16   4   1
0165    ISF         16
0166    JMP     19 => 0170
0167    ISF         17
0168    JMP     19 => 0170
0169    RET1    17   2
0170 => KPRI    19   0
0171    KSTR    20  46      ; "API returned "
0172    GGET    21   2      ; "tostring"
0173    MOV     22  15
0174    CALL    21   2   2
0175    KSTR    22  47      ; " - "
0176    UGET    23   4      ; redact_api_url
0177    MOV     24   1
0178    CALL    23   2   2
0179    CAT     20  20  23
0180    RET     19   3

-- BYTECODE -- api.lua:248-265
0001    TNEW     1   0
0002    GGET     2   0      ; "setmetatable"
0003    MOV      3   1
0004    TDUP     4   1
0005    UGET     5   0      ; Api
0006    TSETS    5   4   2  ; "__index"
0007    CALL     2   1   3
0008    MOV      3   1
0009    TGETS    2   1   4  ; "load_config"
0010    CALL     2   2   2
0011    IST          2
0012    JMP      3 => 0014
0013    TNEW     2   0
0014 => TSETS    2   1   3  ; "config"
0015    TGETS    2   1   3  ; "config"
0016    TGETS    3   0   5  ; "server"
0017    IST          3
0018    JMP      4 => 0026
0019    TGETS    3   1   3  ; "config"
0020    TGETS    3   3   5  ; "server"
0021    IST          3
0022    JMP      4 => 0026
0023    UGET     3   1      ; cfg
0024    TGETS    3   3   6  ; "upload"
0025    TGETS    3   3   5  ; "server"
0026 => TSETS    3   2   5  ; "server"
0027    TGETS    2   1   3  ; "config"
0028    TGETS    3   1   3  ; "config"
0029    TGETS    3   3   7  ; "version"
0030    IST          3
0031    JMP      4 => 0035
0032    UGET     3   1      ; cfg
0033    TGETS    3   3   6  ; "upload"
0034    TGETS    3   3   7  ; "version"
0035 => TSETS    3   2   7  ; "version"
0036    TGETS    2   1   3  ; "config"
0037    TGETS    3   0   9  ; "temp_key"
0038    IST          3
0039    JMP      4 => 0045
0040    TGETS    3   0  10  ; "api_key"
0041    IST          3
0042    JMP      4 => 0045
0043    TGETS    3   1   3  ; "config"
0044    TGETS    3   3   8  ; "key"
0045 => TSETS    3   2   8  ; "key"
0046    TGETS    2   0  11  ; "debug"
0047    TSETS    2   1  11  ; "debug"
0048    TGETS    2   1   3  ; "config"
0049    TGETS    2   2   8  ; "key"
0050    IST          2
0051    JMP      2 => 0061
0052    KPRI     2   0
0053    KSTR     3  12      ; "You need an API key to upload rocks.\n"
0054    KSTR     4  13      ; "Navigate to "
0055    TGETS    5   1   3  ; "config"
0056    TGETS    5   5   5  ; "server"
0057    KSTR     6  14      ; "/settings to get a key\n"
0058    KSTR     7  15      ; "and then pass it through the --api-key=<"~
0059    CAT      3   3   7
0060    RET      2   3
0061 => TGETS    2   0  10  ; "api_key"
0062    ISF          2
0063    JMP      3 => 0067
0064    MOV      3   1
0065    TGETS    2   1  16  ; "save_config"
0066    CALL     2   1   2
0067 => RET1     1   2

-- BYTECODE -- api.lua:0-268
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.fs"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.dir"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.util"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.persist"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.upload.multipart"
0019    CALL     6   2   2
0020    TNEW     7   0
0021    FNEW     8   7      ; api.lua:13
0022    FNEW     9   9      ; api.lua:20
0023    TSETS    9   7   8  ; "load_config"
0024    FNEW     9  11      ; api.lua:27
0025    TSETS    9   7  10  ; "save_config"
0026    FNEW     9  13      ; api.lua:47
0027    TSETS    9   7  12  ; "check_version"
0028    FNEW     9  15      ; api.lua:70
0029    TSETS    9   7  14  ; "method"
0030    FNEW     9  17      ; api.lua:85
0031    TSETS    9   7  16  ; "raw_method"
0032    FNEW     9  18      ; api.lua:91
0033    FNEW    10  19      ; api.lua:111
0034    GGET    11  20      ; "pcall"
0035    GGET    12   0      ; "require"
0036    KSTR    13  21      ; "ltn12"
0037    CALL    11   3   3
0038    IST         11
0039    JMP     13 => 0043
0040    FNEW    13  23      ; api.lua:119
0041    TSETS   13   7  22  ; "request"
0042    JMP     13 => 0047
0043 => KPRI    13   1
0044    FNEW    14  24      ; api.lua:184
0045    TSETS   14   7  22  ; "request"
0046    UCLO    13 => 0047
0047 => FNEW    13  26      ; api.lua:248
0048    TSETS   13   0  25  ; "new"
0049    UCLO     0 => 0050
0050 => RET1     0   2

