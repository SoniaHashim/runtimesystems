-- BYTECODE -- deps.lua:38-64
0001    KNIL     1   2
0002    UGET     3   0      ; rocks_provided
0003    TGETS    4   0   0  ; "name"
0004    TGETV    3   3   4
0005    ISF          3
0006    JMP      4 => 0012
0007    TNEW     4   3
0008    TSETB    3   4   1
0009    TNEW     2   0
0010    MOV      1   4
0011    JMP      4 => 0023
0012 => UGET     4   1      ; deps_mode
0013    ISNES    4   1      ; "none"
0014    JMP      4 => 0016
0015    USETS    1   2      ; deps_mode ; "one"
0016 => UGET     4   2      ; manif
0017    TGETS    4   4   3  ; "get_versions"
0018    MOV      5   0
0019    UGET     6   1      ; deps_mode
0020    CALL     4   3   3
0021    MOV      2   5
0022    MOV      1   4
0023 => UGET     4   3      ; blacklist
0024    ISF          4
0025    JMP      5 => 0050
0026    UGET     4   3      ; blacklist
0027    TGETS    5   0   0  ; "name"
0028    TGETV    4   4   5
0029    ISF          4
0030    JMP      5 => 0050
0031    MOV      4   1
0032    TNEW     1   0
0033    GGET     5   4      ; "ipairs"
0034    MOV      6   4
0035    CALL     5   4   2
0036    JMP      8 => 0048
0037 => UGET    10   3      ; blacklist
0038    TGETS   11   0   0  ; "name"
0039    TGETV   10  10  11
0040    TGETV   10  10   9
0041    IST         10
0042    JMP     10 => 0048
0043    GGET    10   5      ; "table"
0044    TGETS   10  10   6  ; "insert"
0045    MOV     11   1
0046    MOV     12   9
0047    CALL    10   1   3
0048 => ITERC    8   3   3
0049    ITERL    8 => 0037
0050 => UGET     4   4      ; deplocks
0051    TGETS    4   4   7  ; "get"
0052    UGET     5   5      ; depskey
0053    TGETS    6   0   0  ; "name"
0054    CALL     4   2   3
0055    MOV      5   1
0056    MOV      6   2
0057    MOV      7   4
0058    ISNEP    3   0
0059    JMP      8 => 0062
0060    KPRI     8   1
0061    JMP      9 => 0063
0062 => KPRI     8   2
0063 => RET      5   5

-- BYTECODE -- deps.lua:32-65
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "string"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISEQS    5   3      ; "table"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   2
0024    CALL     5   2   2
0025    ISEQS    5   2      ; "string"
0026    JMP      5 => 0029
0027    KPRI     5   1
0028    JMP      6 => 0030
0029 => KPRI     5   2
0030 => CALL     4   1   2
0031    GGET     4   0      ; "assert"
0032    GGET     5   1      ; "type"
0033    MOV      6   3
0034    CALL     5   2   2
0035    ISEQS    5   3      ; "table"
0036    JMP      5 => 0041
0037    ISEQP    3   0
0038    JMP      5 => 0041
0039    KPRI     5   1
0040    JMP      6 => 0042
0041 => KPRI     5   2
0042 => CALL     4   1   2
0043    FNEW     4   4      ; deps.lua:38
0044    UCLO     0 => 0045
0045 => RET1     4   2

-- BYTECODE -- deps.lua:81-109
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "function"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    MOV      2   1
0022    MOV      3   0
0023    CALL     2   5   2
0024    KNIL     6   7
0025    GGET     8   4      ; "ipairs"
0026    MOV      9   2
0027    CALL     8   4   2
0028    JMP     11 => 0046
0029 => UGET    13   0      ; vers
0030    TGETS   13  13   5  ; "parse_version"
0031    MOV     14  12
0032    CALL    13   2   2
0033    UGET    14   0      ; vers
0034    TGETS   14  14   6  ; "match_constraints"
0035    MOV     15  13
0036    TGETS   16   0   7  ; "constraints"
0037    CALL    14   2   3
0038    ISF         14
0039    JMP     15 => 0046
0040    ISF          6
0041    JMP     14 => 0044
0042    ISGE     6  13
0043    JMP     14 => 0046
0044 => MOV      6  13
0045    MOV      7  12
0046 => ITERC   11   3   3
0047    ITERL   11 => 0029
0048    ISF          4
0049    JMP      8 => 0079
0050    TGETV    8   3   4
0051    IST          8
0052    JMP      8 => 0079
0053    KSTR     8   8      ; ""
0054    ISF          7
0055    JMP      9 => 0062
0056    ISEQV    7   4
0057    JMP      9 => 0062
0058    KSTR     9   9      ; " (latest matching is "
0059    MOV     10   7
0060    KSTR    11  10      ; ")"
0061    CAT      8   9  11
0062 => UGET     9   1      ; util
0063    TGETS    9   9  11  ; "printout"
0064    KSTR    10  12      ; "Forcing "
0065    TGETS   11   0  13  ; "name"
0066    KSTR    12  14      ; " to pinned version "
0067    MOV     13   4
0068    MOV     14   8
0069    CAT     10  10  14
0070    CALL     9   1   2
0071    KNIL     9  10
0072    UGET    11   2      ; queries
0073    TGETS   11  11  15  ; "new"
0074    TGETS   12   0  13  ; "name"
0075    TGETS   13   0  16  ; "namespace"
0076    MOV     14   4
0077    CALL    11   0   4
0078    RETM     9   2
0079 => MOV      8   7
0080    TGETV    9   3   7
0081    MOV     10   0
0082    MOV     11   5
0083    RET      8   5

-- BYTECODE -- deps.lua:111-133
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "table"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "function"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    TNEW     2   0
0022    TNEW     3   0
0023    TNEW     4   0
0024    GGET     5   4      ; "ipairs"
0025    MOV      6   0
0026    CALL     5   4   2
0027    JMP      8 => 0061
0028 => KNIL    10  12
0029    UGET    13   0      ; match_dep
0030    MOV     14   9
0031    MOV     15   1
0032    CALL    13   5   3
0033    MOV     12  16
0034    MOV      9  15
0035    MOV     11  14
0036    MOV     10  13
0037    ISF         10
0038    JMP     13 => 0047
0039    IST         12
0040    JMP     13 => 0061
0041    TDUP    13   6
0042    TGETS   14   9   5  ; "name"
0043    TSETS   14  13   5  ; "name"
0044    TSETS   10  13   7  ; "version"
0045    TSETV   13   2   9
0046    JMP     13 => 0061
0047 => TGETS   13   9   8  ; "constraints"
0048    TGETB   13  13   1
0049    ISF         13
0050    JMP     14 => 0059
0051    TGETS   13   9   8  ; "constraints"
0052    TGETB   13  13   1
0053    TGETS   13  13   9  ; "no_upgrade"
0054    ISF         13
0055    JMP     14 => 0059
0056    TGETS   13   9   5  ; "name"
0057    TSETV    9   4  13
0058    JMP     13 => 0061
0059 => TGETS   13   9   5  ; "name"
0060    TSETV    9   3  13
0061 => ITERC    8   3   3
0062    ITERL    8 => 0028
0063    MOV      5   2
0064    MOV      6   3
0065    MOV      7   4
0066    RET      5   4

-- BYTECODE -- deps.lua:148-156
0001    GGET     4   0      ; "assert"
0002    GGET     5   1      ; "type"
0003    MOV      6   0
0004    CALL     5   2   2
0005    ISEQS    5   2      ; "table"
0006    JMP      5 => 0009
0007    KPRI     5   1
0008    JMP      6 => 0010
0009 => KPRI     5   2
0010 => CALL     4   1   2
0011    GGET     4   0      ; "assert"
0012    GGET     5   1      ; "type"
0013    MOV      6   1
0014    CALL     5   2   2
0015    ISEQS    5   2      ; "table"
0016    JMP      5 => 0019
0017    KPRI     5   1
0018    JMP      6 => 0020
0019 => KPRI     5   2
0020 => CALL     4   1   2
0021    GGET     4   0      ; "assert"
0022    GGET     5   1      ; "type"
0023    MOV      6   2
0024    CALL     5   2   2
0025    ISEQS    5   2      ; "table"
0026    JMP      5 => 0031
0027    ISEQP    2   0
0028    JMP      5 => 0031
0029    KPRI     5   1
0030    JMP      6 => 0032
0031 => KPRI     5   2
0032 => CALL     4   1   2
0033    GGET     4   0      ; "assert"
0034    GGET     5   1      ; "type"
0035    MOV      6   3
0036    CALL     5   2   2
0037    ISEQS    5   3      ; "string"
0038    JMP      5 => 0041
0039    KPRI     5   1
0040    JMP      6 => 0042
0041 => KPRI     5   2
0042 => CALL     4   1   2
0043    UGET     4   0      ; prepare_get_versions
0044    MOV      5   3
0045    MOV      6   1
0046    KSTR     7   4      ; "dependencies"
0047    MOV      8   2
0048    CALL     4   2   5
0049    UGET     5   1      ; match_all_deps
0050    MOV      6   0
0051    MOV      7   4
0052    CALLT    5   3

-- BYTECODE -- deps.lua:158-165
0001    GGET     2   0      ; "assert"
0002    MOV      4   0
0003    TGETS    3   0   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "query"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    GGET     2   0      ; "assert"
0012    GGET     3   1      ; "type"
0013    MOV      4   1
0014    CALL     3   2   2
0015    ISEQS    3   3      ; "function"
0016    JMP      3 => 0019
0017    KPRI     3   1
0018    JMP      4 => 0020
0019 => KPRI     3   2
0020 => CALL     2   1   2
0021    UGET     2   0      ; match_dep
0022    MOV      3   0
0023    MOV      4   1
0024    CALL     2   5   3
0025    ISF          5
0026    JMP      6 => 0029
0027    KSTR     6   4      ; "provided by VM"
0028    JMP      7 => 0030
0029 => KSTR     6   5      ; "installed"
0030 => ISF          2
0031    JMP      7 => 0038
0032    MOV      7   2
0033    KSTR     8   6      ; " "
0034    MOV      9   6
0035    CAT      7   7   9
0036    IST          7
0037    JMP      8 => 0039
0038 => KSTR     7   7      ; "not installed"
0039 => RET1     7   2

-- BYTECODE -- deps.lua:176-203
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "string"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   2      ; "string"
0016    JMP      6 => 0019
0017    KPRI     6   1
0018    JMP      7 => 0020
0019 => KPRI     6   2
0020 => CALL     5   1   2
0021    GGET     5   0      ; "assert"
0022    GGET     6   1      ; "type"
0023    MOV      7   2
0024    CALL     6   2   2
0025    ISEQS    6   3      ; "table"
0026    JMP      6 => 0029
0027    KPRI     6   1
0028    JMP      7 => 0030
0029 => KPRI     6   2
0030 => CALL     5   1   2
0031    GGET     5   0      ; "assert"
0032    GGET     6   1      ; "type"
0033    MOV      7   3
0034    CALL     6   2   2
0035    ISEQS    6   2      ; "string"
0036    JMP      6 => 0039
0037    KPRI     6   1
0038    JMP      7 => 0040
0039 => KPRI     6   2
0040 => CALL     5   1   2
0041    GGET     5   0      ; "assert"
0042    GGET     6   1      ; "type"
0043    MOV      7   4
0044    CALL     6   2   2
0045    ISEQS    6   3      ; "table"
0046    JMP      6 => 0049
0047    KPRI     6   1
0048    JMP      7 => 0050
0049 => KPRI     6   2
0050 => CALL     5   1   2
0051    ISNES    3   4      ; "none"
0052    JMP      5 => 0054
0053    RET0     0   1
0054 => UGET     5   0      ; prepare_get_versions
0055    MOV      6   3
0056    MOV      7   4
0057    KSTR     8   5      ; "dependencies"
0058    CALL     5   2   4
0059    KPRI     6   2
0060    GGET     7   6      ; "ipairs"
0061    MOV      8   2
0062    CALL     7   4   2
0063    JMP     10 => 0100
0064 => KNIL    12  13
0065    UGET    14   1      ; match_dep
0066    MOV     15  11
0067    MOV     16   5
0068    CALL    14   4   3
0069    MOV     11  16
0070    MOV     13  15
0071    MOV     12  14
0072    IST         12
0073    JMP     14 => 0100
0074    ISF          6
0075    JMP     14 => 0086
0076    UGET    14   2      ; util
0077    TGETS   14  14   7  ; "printout"
0078    KSTR    15   8      ; "Missing dependencies for %s %s:"
0079    MOV     16  15
0080    TGETS   15  15   9  ; "format"
0081    MOV     17   0
0082    MOV     18   1
0083    CALL    15   0   4
0084    CALLM   14   1   0
0085    KPRI     6   1
0086 => UGET    14   2      ; util
0087    TGETS   14  14   7  ; "printout"
0088    KSTR    15  10      ; "   %s (%s)"
0089    MOV     16  15
0090    TGETS   15  15   9  ; "format"
0091    GGET    17  11      ; "tostring"
0092    MOV     18  11
0093    CALL    17   2   2
0094    UGET    18   3      ; rock_status
0095    MOV     19  11
0096    MOV     20   5
0097    CALL    18   0   3
0098    CALLM   15   0   2
0099    CALLM   14   1   0
0100 => ITERC   10   3   3
0101    ITERL   10 => 0064
0102    RET0     0   1

-- BYTECODE -- deps.lua:205-247
0001    GGET     5   0      ; "assert"
0002    MOV      7   0
0003    TGETS    6   0   1  ; "type"
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "query"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   3      ; "string"
0016    JMP      6 => 0021
0017    ISEQP    1   0
0018    JMP      6 => 0021
0019    KPRI     6   1
0020    JMP      7 => 0022
0021 => KPRI     6   2
0022 => CALL     5   1   2
0023    GGET     5   0      ; "assert"
0024    GGET     6   1      ; "type"
0025    MOV      7   2
0026    CALL     6   2   2
0027    ISEQS    6   4      ; "table"
0028    JMP      6 => 0033
0029    ISEQP    2   0
0030    JMP      6 => 0033
0031    KPRI     6   1
0032    JMP      7 => 0034
0033 => KPRI     6   2
0034 => CALL     5   1   2
0035    GGET     5   0      ; "assert"
0036    GGET     6   1      ; "type"
0037    MOV      7   3
0038    CALL     6   2   2
0039    ISEQS    6   5      ; "boolean"
0040    JMP      6 => 0045
0041    ISEQP    3   0
0042    JMP      6 => 0045
0043    KPRI     6   1
0044    JMP      7 => 0046
0045 => KPRI     6   2
0046 => CALL     5   1   2
0047    GGET     5   0      ; "assert"
0048    GGET     6   1      ; "type"
0049    MOV      7   4
0050    CALL     6   2   2
0051    ISEQS    6   3      ; "string"
0052    JMP      6 => 0055
0053    KPRI     6   1
0054    JMP      7 => 0056
0055 => KPRI     6   2
0056 => CALL     5   1   2
0057    IST          1
0058    JMP      5 => 0060
0059    KSTR     1   6      ; "all"
0060 => IST          2
0061    JMP      5 => 0063
0062    TNEW     2   0
0063 => UGET     5   0      ; prepare_get_versions
0064    MOV      6   1
0065    MOV      7   2
0066    MOV      8   4
0067    CALL     5   2   4
0068    KNIL     6   7
0069    UGET     8   1      ; match_dep
0070    MOV      9   0
0071    MOV     10   5
0072    CALL     8   4   3
0073    MOV      0  10
0074    MOV      7   9
0075    MOV      6   8
0076    ISF          6
0077    JMP      8 => 0096
0078    UGET     8   2      ; manif
0079    TGETS    8   8   7  ; "load_rocks_tree_manifests"
0080    MOV      9   1
0081    CALL     8   2   2
0082    UGET     9   2      ; manif
0083    TGETS    9   9   8  ; "scan_dependencies"
0084    TGETS   10   0   9  ; "name"
0085    MOV     11   6
0086    MOV     12   8
0087    UGET    13   3      ; deplocks
0088    TGETS   13  13  10  ; "proxy"
0089    MOV     14   4
0090    CALL    13   0   2
0091    CALLM    9   1   3
0092    KPRI     9   2
0093    MOV     10   6
0094    MOV     11   7
0095    RET      9   4
0096 => GGET     8  11      ; "require"
0097    KSTR     9  12      ; "luarocks.search"
0098    CALL     8   2   2
0099    GGET     9  11      ; "require"
0100    KSTR    10  13      ; "luarocks.cmd.install"
0101    CALL     9   2   2
0102    TGETS   10   8  14  ; "find_suitable_rock"
0103    MOV     11   0
0104    KPRI    12   2
0105    CALL    10   3   3
0106    IST         10
0107    JMP     12 => 0117
0108    KPRI    12   0
0109    KSTR    13  15      ; "Could not satisfy dependency "
0110    GGET    14  16      ; "tostring"
0111    MOV     15   0
0112    CALL    14   2   2
0113    KSTR    15  17      ; ": "
0114    MOV     16  11
0115    CAT     13  13  16
0116    RET     12   3
0117 => UGET    12   4      ; util
0118    TGETS   12  12  18  ; "printout"
0119    KSTR    13  19      ; "Installing "
0120    MOV     14  10
0121    CAT     13  13  14
0122    CALL    12   1   2
0123    TDUP    12  20
0124    TSETS   10  12  21  ; "rock"
0125    TSETS    1  12  22  ; "deps_mode"
0126    TGETS   13   0  23  ; "namespace"
0127    TSETS   13  12  23  ; "namespace"
0128    TSETS    3  12  24  ; "verify"
0129    TGETS   13   9  25  ; "command"
0130    MOV     14  12
0131    CALL    13   4   2
0132    IST         13
0133    JMP     16 => 0142
0134    KPRI    16   0
0135    KSTR    17  26      ; "Failed installing dependency: "
0136    MOV     18  10
0137    KSTR    19  27      ; " - "
0138    MOV     20  14
0139    CAT     17  17  20
0140    MOV     18  15
0141    RET     16   4
0142 => UGET    16   1      ; match_dep
0143    MOV     17   0
0144    MOV     18   5
0145    CALL    16   3   3
0146    MOV      7  17
0147    MOV      6  16
0148    GGET    16   0      ; "assert"
0149    MOV     17   6
0150    CALL    16   1   2
0151    KPRI    16   2
0152    MOV     17   6
0153    MOV     18   7
0154    RET     16   4

-- BYTECODE -- deps.lua:249-275
0001    TGETS    1   0   0  ; "supported_platforms"
0002    ISF          1
0003    JMP      2 => 0065
0004    GGET     1   1      ; "next"
0005    TGETS    2   0   0  ; "supported_platforms"
0006    CALL     1   2   2
0007    ISF          1
0008    JMP      2 => 0065
0009    KPRI     1   2
0010    KPRI     2   1
0011    GGET     3   2      ; "pairs"
0012    TGETS    4   0   0  ; "supported_platforms"
0013    CALL     3   4   2
0014    ISNEXT   6 => 0048
0015 => KPRI     8   0
0016    MOV     10   7
0017    TGETS    9   7   3  ; "match"
0018    KSTR    11   4      ; "^(!?)(.*)"
0019    CALL     9   3   3
0020    MOV      7  10
0021    MOV      8   9
0022    ISNES    8   5      ; "!"
0023    JMP      9 => 0039
0024    UGET     9   0      ; cfg
0025    TGETS    9   9   6  ; "is_platform"
0026    MOV     10   7
0027    CALL     9   2   2
0028    ISF          9
0029    JMP     10 => 0048
0030    KPRI     9   0
0031    KSTR    10   7      ; "This rockspec for "
0032    TGETS   11   0   8  ; "package"
0033    KSTR    12   9      ; " does not support "
0034    MOV     13   7
0035    KSTR    14  10      ; " platforms."
0036    CAT     10  10  14
0037    RET      9   3
0038    JMP      9 => 0048
0039 => KPRI     1   1
0040    UGET     9   0      ; cfg
0041    TGETS    9   9   6  ; "is_platform"
0042    MOV     10   7
0043    CALL     9   2   2
0044    ISF          9
0045    JMP     10 => 0048
0046    KPRI     2   2
0047    JMP      3 => 0050
0048 => ITERN    6   3   3
0049    ITERL    6 => 0015
0050 => ISNEP    2   1
0051    JMP      3 => 0065
0052    IST          1
0053    JMP      3 => 0065
0054    UGET     3   0      ; cfg
0055    TGETS    3   3  11  ; "print_platforms"
0056    CALL     3   2   1
0057    KPRI     4   0
0058    KSTR     5   7      ; "This rockspec for "
0059    TGETS    6   0   8  ; "package"
0060    KSTR     7   9      ; " does not support "
0061    MOV      8   3
0062    KSTR     9  10      ; " platforms."
0063    CAT      5   5   9
0064    RET      4   3
0065 => KPRI     1   2
0066    RET1     1   2

-- BYTECODE -- deps.lua:288-354
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "table"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   3      ; "string"
0016    JMP      6 => 0019
0017    KPRI     6   1
0018    JMP      7 => 0020
0019 => KPRI     6   2
0020 => CALL     5   1   2
0021    GGET     5   0      ; "assert"
0022    GGET     6   1      ; "type"
0023    MOV      7   2
0024    CALL     6   2   2
0025    ISEQS    6   3      ; "string"
0026    JMP      6 => 0029
0027    KPRI     6   1
0028    JMP      7 => 0030
0029 => KPRI     6   2
0030 => CALL     5   1   2
0031    GGET     5   0      ; "assert"
0032    GGET     6   1      ; "type"
0033    MOV      7   3
0034    CALL     6   2   2
0035    ISEQS    6   4      ; "boolean"
0036    JMP      6 => 0041
0037    ISEQP    3   0
0038    JMP      6 => 0041
0039    KPRI     6   1
0040    JMP      7 => 0042
0041 => KPRI     6   2
0042 => CALL     5   1   2
0043    GGET     5   0      ; "assert"
0044    GGET     6   1      ; "type"
0045    MOV      7   4
0046    CALL     6   2   2
0047    ISEQS    6   3      ; "string"
0048    JMP      6 => 0053
0049    ISEQP    4   0
0050    JMP      6 => 0053
0051    KPRI     6   1
0052    JMP      7 => 0054
0053 => KPRI     6   2
0054 => CALL     5   1   2
0055    TGETS    5   0   5  ; "name"
0056    TGETS    6   0   6  ; "version"
0057    TGETS    7   0   7  ; "rocks_provided"
0058    UGET     8   0      ; deplocks
0059    TGETS    8   8   8  ; "load"
0060    MOV      9   5
0061    ISTC    10   4
0062    JMP     10 => 0064
0063    KSTR    10   9      ; "."
0064 => CALL     8   4   3
0065    ISF          9
0066    JMP     11 => 0130
0067    UGET    11   1      ; util
0068    TGETS   11  11  10  ; "printout"
0069    KSTR    12  11      ; "Using dependencies pinned in lockfile: "
0070    MOV     13   9
0071    CAT     12  12  13
0072    CALL    11   1   2
0073    UGET    11   2      ; prepare_get_versions
0074    KSTR    12  12      ; "none"
0075    MOV     13   7
0076    MOV     14   1
0077    CALL    11   2   4
0078    UGET    12   0      ; deplocks
0079    TGETS   12  12  13  ; "each"
0080    MOV     13   1
0081    CALL    12   4   2
0082    JMP     15 => 0122
0083 => UGET    17   1      ; util
0084    TGETS   17  17  14  ; "split_namespace"
0085    MOV     18  15
0086    CALL    17   3   2
0087    UGET    19   3      ; queries
0088    TGETS   19  19  15  ; "new"
0089    MOV     20  17
0090    MOV     21  18
0091    MOV     22  16
0092    CALL    19   2   4
0093    UGET    20   1      ; util
0094    TGETS   20  20  10  ; "printout"
0095    KSTR    21  16      ; "%s %s is pinned to %s (%s)"
0096    MOV     22  21
0097    TGETS   21  21  17  ; "format"
0098    MOV     23   5
0099    MOV     24   6
0100    GGET    25  18      ; "tostring"
0101    MOV     26  19
0102    CALL    25   2   2
0103    UGET    26   4      ; rock_status
0104    MOV     27  19
0105    MOV     28  11
0106    CALL    26   0   3
0107    CALLM   21   0   4
0108    CALLM   20   1   0
0109    UGET    20   5      ; deps
0110    TGETS   20  20  19  ; "fulfill_dependency"
0111    MOV     21  19
0112    KSTR    22  12      ; "none"
0113    MOV     23   7
0114    MOV     24   3
0115    MOV     25   1
0116    CALL    20   3   6
0117    IST         20
0118    JMP     22 => 0122
0119    KPRI    22   0
0120    MOV     23  21
0121    RET     22   3
0122 => ITERC   15   3   3
0123    ITERL   15 => 0083
0124    UGET    12   1      ; util
0125    TGETS   12  12  10  ; "printout"
0126    CALL    12   1   1
0127    KPRI    12   2
0128    RET1    12   2
0129    JMP     11 => 0136
0130 => ISF         10
0131    JMP     11 => 0136
0132    UGET    11   1      ; util
0133    TGETS   11  11  20  ; "warning"
0134    MOV     12  10
0135    CALL    11   1   2
0136 => UGET    11   6      ; check_supported_platforms
0137    MOV     12   0
0138    CALL    11   3   2
0139    MOV     10  12
0140    MOV      8  11
0141    IST          8
0142    JMP     11 => 0146
0143    KPRI    11   0
0144    MOV     12  10
0145    RET     11   3
0146 => UGET    11   5      ; deps
0147    TGETS   11  11  21  ; "report_missing_dependencies"
0148    MOV     12   5
0149    MOV     13   6
0150    TGETV   14   0   1
0151    MOV     15   2
0152    MOV     16   7
0153    CALL    11   1   6
0154    UGET    11   1      ; util
0155    TGETS   11  11  10  ; "printout"
0156    CALL    11   1   1
0157    UGET    11   2      ; prepare_get_versions
0158    MOV     12   2
0159    MOV     13   7
0160    MOV     14   1
0161    CALL    11   2   4
0162    GGET    12  22      ; "ipairs"
0163    TGETV   13   0   1
0164    CALL    12   4   2
0165    JMP     15 => 0245
0166 => UGET    17   1      ; util
0167    TGETS   17  17  10  ; "printout"
0168    KSTR    18  23      ; "%s %s depends on %s (%s)"
0169    MOV     19  18
0170    TGETS   18  18  17  ; "format"
0171    MOV     20   5
0172    MOV     21   6
0173    GGET    22  18      ; "tostring"
0174    MOV     23  16
0175    CALL    22   2   2
0176    UGET    23   4      ; rock_status
0177    MOV     24  16
0178    MOV     25  11
0179    CALL    23   0   3
0180    CALLM   18   0   4
0181    CALLM   17   1   0
0182    UGET    17   5      ; deps
0183    TGETS   17  17  19  ; "fulfill_dependency"
0184    MOV     18  16
0185    MOV     19   2
0186    MOV     20   7
0187    MOV     21   3
0188    MOV     22   1
0189    CALL    17   5   6
0190    ISF         17
0191    JMP     21 => 0199
0192    UGET    21   0      ; deplocks
0193    TGETS   21  21  24  ; "add"
0194    MOV     22   1
0195    TGETS   23  16   5  ; "name"
0196    MOV     24  18
0197    CALL    21   1   4
0198    JMP     21 => 0245
0199 => ISF         20
0200    JMP     21 => 0242
0201    UGET    21   1      ; util
0202    TGETS   21  21  25  ; "printerr"
0203    KSTR    22  26      ; "This version of "
0204    MOV     23   5
0205    KSTR    24  27      ; " is designed for use with"
0206    CAT     22  22  24
0207    CALL    21   1   2
0208    UGET    21   1      ; util
0209    TGETS   21  21  25  ; "printerr"
0210    GGET    22  18      ; "tostring"
0211    MOV     23  16
0212    CALL    22   2   2
0213    KSTR    23  28      ; ", but is configured to avoid upgrading i"~
0214    CAT     22  22  23
0215    CALL    21   1   2
0216    UGET    21   1      ; util
0217    TGETS   21  21  25  ; "printerr"
0218    KSTR    22  29      ; "automatically. Please upgrade "
0219    TGETS   23  16   5  ; "name"
0220    KSTR    24  30      ; " with"
0221    CAT     22  22  24
0222    CALL    21   1   2
0223    UGET    21   1      ; util
0224    TGETS   21  21  25  ; "printerr"
0225    KSTR    22  31      ; "   luarocks install "
0226    TGETS   23  16   5  ; "name"
0227    CAT     22  22  23
0228    CALL    21   1   2
0229    UGET    21   1      ; util
0230    TGETS   21  21  25  ; "printerr"
0231    KSTR    22  32      ; "or look for a suitable version of "
0232    MOV     23   5
0233    KSTR    24  30      ; " with"
0234    CAT     22  22  24
0235    CALL    21   1   2
0236    UGET    21   1      ; util
0237    TGETS   21  21  25  ; "printerr"
0238    KSTR    22  33      ; "   luarocks search "
0239    MOV     23   5
0240    CAT     22  22  23
0241    CALL    21   1   2
0242 => KPRI    21   0
0243    MOV     22  18
0244    RET     21   3
0245 => ITERC   15   3   3
0246    ITERL   15 => 0166
0247    KPRI    12   2
0248    RET1    12   2

-- BYTECODE -- deps.lua:363-366
0001    KSTR     2   0      ; "^"
0002    MOV      4   1
0003    TGETS    3   1   1  ; "gsub"
0004    KSTR     5   2      ; "%."
0005    KSTR     6   3      ; "%%."
0006    CALL     3   2   4
0007    MOV      4   3
0008    TGETS    3   3   1  ; "gsub"
0009    KSTR     5   4      ; "%*"
0010    KSTR     6   5      ; ".*"
0011    CALL     3   2   4
0012    MOV      4   3
0013    TGETS    3   3   1  ; "gsub"
0014    KSTR     5   6      ; "?"
0015    KSTR     6   7      ; "(.*)"
0016    CALL     3   2   4
0017    KSTR     4   8      ; "$"
0018    CAT      2   2   4
0019    MOV      4   0
0020    TGETS    3   0   9  ; "match"
0021    MOV      5   2
0022    CALL     3   2   3
0023    RET1     3   2

-- BYTECODE -- deps.lua:375-379
0001    GGET     3   0      ; "ipairs"
0002    MOV      4   1
0003    CALL     3   4   2
0004    JMP      6 => 0014
0005 => GGET     8   1      ; "table"
0006    TGETS    8   8   2  ; "insert"
0007    MOV      9   2
0008    MOV     11   7
0009    TGETS   10   7   3  ; "gsub"
0010    KSTR    12   4      ; "?"
0011    MOV     13   0
0012    CALL    10   2   4
0013    CALL     8   1   3
0014 => ITERC    6   3   3
0015    ITERL    6 => 0005
0016    RET0     0   1

-- BYTECODE -- deps.lua:381-397
0001    UGET     1   0      ; cfg
0002    TGETS    1   1   0  ; "external_deps_patterns"
0003    UGET     2   0      ; cfg
0004    TGETS    2   2   1  ; "external_deps_subdirs"
0005    ISNES    0   2      ; "install"
0006    JMP      3 => 0011
0007    UGET     3   0      ; cfg
0008    TGETS    1   3   3  ; "runtime_external_deps_patterns"
0009    UGET     3   0      ; cfg
0010    TGETS    2   3   4  ; "runtime_external_deps_subdirs"
0011 => TDUP     3   9
0012    TDUP     4   6
0013    TGETS    5   2   5  ; "bin"
0014    TSETS    5   4   7  ; "subdir"
0015    TGETS    5   1   5  ; "bin"
0016    TSETS    5   4   8  ; "pattern"
0017    TSETS    4   3  10  ; "BINDIR"
0018    TDUP     4  12
0019    TGETS    5   2  11  ; "include"
0020    TSETS    5   4   7  ; "subdir"
0021    TGETS    5   1  11  ; "include"
0022    TSETS    5   4   8  ; "pattern"
0023    TSETS    4   3  13  ; "INCDIR"
0024    TDUP     4  15
0025    TGETS    5   2  14  ; "lib"
0026    TSETS    5   4   7  ; "subdir"
0027    TGETS    5   1  14  ; "lib"
0028    TSETS    5   4   8  ; "pattern"
0029    TSETS    4   3  16  ; "LIBDIR"
0030    ISNES    0   2      ; "install"
0031    JMP      4 => 0034
0032    KPRI     4   0
0033    TSETS    4   3  13  ; "INCDIR"
0034 => RET1     3   2

-- BYTECODE -- deps.lua:399-416
0001    GGET     2   0      ; "type"
0002    MOV      3   0
0003    CALL     2   2   2
0004    ISNES    2   1      ; "string"
0005    JMP      2 => 0008
0006    RET1     0   2
0007    JMP      2 => 0036
0008 => GGET     2   0      ; "type"
0009    MOV      3   0
0010    CALL     2   2   2
0011    ISNES    2   2      ; "table"
0012    JMP      2 => 0036
0013    TGETS    2   0   3  ; "bin"
0014    ISF          2
0015    JMP      3 => 0019
0016    TGETS    2   1   4  ; "BINDIR"
0017    TGETS    3   0   3  ; "bin"
0018    TSETS    3   2   5  ; "subdir"
0019 => TGETS    2   0   6  ; "include"
0020    ISF          2
0021    JMP      3 => 0028
0022    TGETS    2   1   7  ; "INCDIR"
0023    ISF          2
0024    JMP      3 => 0028
0025    TGETS    2   1   7  ; "INCDIR"
0026    TGETS    3   0   6  ; "include"
0027    TSETS    3   2   5  ; "subdir"
0028 => TGETS    2   0   8  ; "lib"
0029    ISF          2
0030    JMP      3 => 0034
0031    TGETS    2   1   9  ; "LIBDIR"
0032    TGETS    3   0   8  ; "lib"
0033    TSETS    3   2   5  ; "subdir"
0034 => TGETS    2   0  10  ; "prefix"
0035    RET1     2   2
0036 => RET0     0   1

-- BYTECODE -- deps.lua:418-431
0001    MOV      4   1
0002    TGETS    3   1   0  ; "match"
0003    KSTR     5   1      ; "%.[a-z]+$"
0004    CALL     3   2   3
0005    IST          3
0006    JMP      4 => 0019
0007    MOV      4   1
0008    TGETS    3   1   0  ; "match"
0009    KSTR     5   2      ; "%.[a-z]+%."
0010    CALL     3   2   3
0011    IST          3
0012    JMP      3 => 0019
0013    UGET     3   0      ; add_all_patterns
0014    MOV      4   1
0015    MOV      5   2
0016    MOV      6   0
0017    CALL     3   1   4
0018    JMP      3 => 0041
0019 => GGET     3   3      ; "ipairs"
0020    MOV      4   2
0021    CALL     3   4   2
0022    JMP      6 => 0034
0023 => UGET     8   1      ; deconstruct_pattern
0024    MOV      9   1
0025    MOV     10   7
0026    CALL     8   2   3
0027    ISF          8
0028    JMP      9 => 0034
0029    UGET     9   0      ; add_all_patterns
0030    MOV     10   8
0031    MOV     11   2
0032    MOV     12   0
0033    CALL     9   1   4
0034 => ITERC    6   3   3
0035    ITERL    6 => 0023
0036    GGET     3   4      ; "table"
0037    TGETS    3   3   5  ; "insert"
0038    MOV      4   0
0039    MOV      5   1
0040    CALL     3   1   3
0041 => RET0     0   1

-- BYTECODE -- deps.lua:463-471
0001    MOV      3   0
0002    TGETS    2   0   0  ; "match"
0003    KSTR     4   1      ; "%*"
0004    CALL     2   2   3
0005    IST          2
0006    JMP      2 => 0016
0007    MOV      3   1
0008    TGETS    2   1   0  ; "match"
0009    KSTR     4   1      ; "%*"
0010    CALL     2   2   3
0011    ISF          2
0012    JMP      3 => 0016
0013    KPRI     2   2
0014    RET1     2   2
0015    JMP      2 => 0037
0016 => MOV      3   0
0017    TGETS    2   0   0  ; "match"
0018    KSTR     4   1      ; "%*"
0019    CALL     2   2   3
0020    ISF          2
0021    JMP      3 => 0031
0022    MOV      3   1
0023    TGETS    2   1   0  ; "match"
0024    KSTR     4   1      ; "%*"
0025    CALL     2   2   3
0026    IST          2
0027    JMP      2 => 0031
0028    KPRI     2   1
0029    RET1     2   2
0030    JMP      2 => 0037
0031 => ISLT     0   1
0032    JMP      2 => 0035
0033    KPRI     2   1
0034    JMP      3 => 0036
0035 => KPRI     2   2
0036 => RET1     2   2
0037 => RET0     0   1

-- BYTECODE -- deps.lua:433-524
0001    GGET     7   0      ; "require"
0002    KSTR     8   1      ; "luarocks.fs"
0003    CALL     7   2   2
0004    IST          6
0005    JMP      8 => 0007
0006    TNEW     6   0
0007 => UGET     8   0      ; util
0008    TGETS    8   8   2  ; "sortedpairs"
0009    MOV      9   4
0010    CALL     8   4   2
0011    JMP     11 => 0212
0012 => KPRI    13   0
0013    MOV     14   1
0014    KSTR    15   3      ; "_"
0015    MOV     16  11
0016    CAT     14  14  16
0017    TGETV   14   3  14
0018    ISF         14
0019    JMP     15 => 0024
0020    TNEW    15   3
0021    TSETB   14  15   1
0022    MOV     13  15
0023    JMP     15 => 0051
0024 => GGET    15   4      ; "type"
0025    TGETS   16  12   5  ; "subdir"
0026    CALL    15   2   2
0027    ISNES   15   6      ; "table"
0028    JMP     15 => 0043
0029    TNEW    13   0
0030    GGET    15   7      ; "ipairs"
0031    TGETS   16  12   5  ; "subdir"
0032    CALL    15   4   2
0033    JMP     18 => 0040
0034 => UGET    20   1      ; dir
0035    TGETS   20  20   8  ; "path"
0036    MOV     21   0
0037    MOV     22  19
0038    CALL    20   2   3
0039    TSETV   20  13  18
0040 => ITERC   18   3   3
0041    ITERL   18 => 0034
0042    JMP     15 => 0051
0043 => TNEW    15   3
0044    UGET    16   1      ; dir
0045    TGETS   16  16   8  ; "path"
0046    MOV     17   0
0047    TGETS   18  12   5  ; "subdir"
0048    CALL    16   0   3
0049    TSETM   16   0      ; 1
0050    MOV     13  15
0051 => TGETB   15  13   1
0052    TSETS   15  12   9  ; "dir"
0053    TGETS   15  12  10  ; "testfile"
0054    TGETV   15   2  15
0055    ISF         15
0056    JMP     16 => 0212
0057    TNEW    16   0
0058    GGET    17   4      ; "type"
0059    MOV     18  15
0060    CALL    17   2   2
0061    ISNES   17  11      ; "string"
0062    JMP     17 => 0069
0063    UGET    17   2      ; add_patterns_for_file
0064    MOV     18  16
0065    MOV     19  15
0066    TGETS   20  12  12  ; "pattern"
0067    CALL    17   1   4
0068    JMP     17 => 0085
0069 => GGET    17   4      ; "type"
0070    MOV     18  15
0071    CALL    17   2   2
0072    ISNES   17   6      ; "table"
0073    JMP     17 => 0085
0074    GGET    17   7      ; "ipairs"
0075    MOV     18  15
0076    CALL    17   4   2
0077    JMP     20 => 0083
0078 => UGET    22   2      ; add_patterns_for_file
0079    MOV     23  16
0080    MOV     24  21
0081    TGETS   25  12  12  ; "pattern"
0082    CALL    22   1   4
0083 => ITERC   20   3   3
0084    ITERL   20 => 0078
0085 => KPRI    17   1
0086    GGET    18   6      ; "table"
0087    TGETS   18  18  13  ; "sort"
0088    MOV     19  16
0089    FNEW    20  14      ; deps.lua:463
0090    CALL    18   1   3
0091    GGET    18   7      ; "ipairs"
0092    MOV     19  16
0093    CALL    18   4   2
0094    JMP     21 => 0203
0095 => MOV     24  22
0096    TGETS   23  22  15  ; "match"
0097    KSTR    25  16      ; "%.so$"
0098    CALL    23   2   3
0099    IST         23
0100    JMP     24 => 0113
0101    MOV     24  22
0102    TGETS   23  22  15  ; "match"
0103    KSTR    25  17      ; "%.dylib$"
0104    CALL    23   2   3
0105    IST         23
0106    JMP     24 => 0113
0107    MOV     24  22
0108    TGETS   23  22  15  ; "match"
0109    KSTR    25  18      ; "%.dll$"
0110    CALL    23   2   3
0111    ISF         23
0112    JMP     24 => 0122
0113 => MOV     24  22
0114    TGETS   23  22  19  ; "gsub"
0115    KSTR    25  20      ; "%.[^.]+$"
0116    KSTR    26  21      ; "."
0117    UGET    27   3      ; cfg
0118    TGETS   27  27  22  ; "external_lib_extension"
0119    CAT     26  26  27
0120    CALL    23   2   4
0121    MOV     22  23
0122 => KPRI    23   0
0123    MOV     25  22
0124    TGETS   24  22  15  ; "match"
0125    KSTR    26  23      ; "%*"
0126    CALL    24   2   3
0127    ISF         24
0128    JMP     25 => 0145
0129    KSTR    24  24      ; "^"
0130    MOV     26  22
0131    TGETS   25  22  19  ; "gsub"
0132    KSTR    27  25      ; "([-.+])"
0133    KSTR    28  26      ; "%%%1"
0134    CALL    25   2   4
0135    MOV     26  25
0136    TGETS   25  25  19  ; "gsub"
0137    KSTR    27  23      ; "%*"
0138    KSTR    28  27      ; ".*"
0139    CALL    25   2   4
0140    KSTR    26  28      ; "$"
0141    CAT     23  24  26
0142    KSTR    24  29      ; "matching "
0143    MOV     25  22
0144    CAT     22  24  25
0145 => GGET    24   7      ; "ipairs"
0146    MOV     25  13
0147    CALL    24   4   2
0148    JMP     27 => 0198
0149 => ISF         23
0150    JMP     29 => 0175
0151    TGETV   29   6  28
0152    IST         29
0153    JMP     29 => 0158
0154    TGETS   29   7  30  ; "list_dir"
0155    MOV     30  28
0156    CALL    29   2   2
0157    TSETV   29   6  28
0158 => GGET    29  11      ; "string"
0159    TGETS   29  29  15  ; "match"
0160    GGET    30   7      ; "ipairs"
0161    TGETV   31   6  28
0162    CALL    30   4   2
0163    JMP     33 => 0172
0164 => MOV     35  29
0165    MOV     36  34
0166    MOV     37  23
0167    CALL    35   2   3
0168    ISF         35
0169    JMP     36 => 0172
0170    KPRI    17   2
0171    JMP     30 => 0183
0172 => ITERC   33   3   3
0173    ITERL   33 => 0164
0174    JMP     29 => 0183
0175 => TGETS   29   7  31  ; "is_file"
0176    UGET    30   1      ; dir
0177    TGETS   30  30   8  ; "path"
0178    MOV     31  28
0179    MOV     32  22
0180    CALL    30   0   3
0181    CALLM   29   2   0
0182    MOV     17  29
0183 => ISF         17
0184    JMP     29 => 0189
0185    TSETS   28  12   9  ; "dir"
0186    TSETS   22  12  32  ; "file"
0187    JMP     24 => 0200
0188    JMP     29 => 0198
0189 => GGET    29   6      ; "table"
0190    TGETS   29  29  33  ; "insert"
0191    TGETS   30  12  10  ; "testfile"
0192    TGETV   30   5  30
0193    MOV     31  22
0194    KSTR    32  34      ; " in "
0195    MOV     33  28
0196    CAT     31  31  33
0197    CALL    29   1   3
0198 => ITERC   27   3   3
0199    ITERL   27 => 0149
0200 => ISF         17
0201    JMP     24 => 0203
0202    JMP     18 => 0205
0203 => ITERC   21   3   3
0204    ITERL   21 => 0095
0205 => IST         17
0206    JMP     18 => 0212
0207    KPRI    18   0
0208    MOV     19  11
0209    TGETS   20  12  10  ; "testfile"
0210    UCLO     0 => 0211
0211 => RET     18   4
0212 => ITERC   11   3   3
0213    ITERL   11 => 0012
0214    GGET     8  35      ; "pairs"
0215    MOV      9   4
0216    CALL     8   4   2
0217    ISNEXT  11 => 0231
0218 => MOV     13   1
0219    KSTR    14   3      ; "_"
0220    MOV     15  11
0221    CAT     13  13  15
0222    TGETS   14  12   9  ; "dir"
0223    TSETV   14   3  13
0224    MOV     13   1
0225    KSTR    14   3      ; "_"
0226    MOV     15  11
0227    KSTR    16  36      ; "_FILE"
0228    CAT     13  13  16
0229    TGETS   14  12  32  ; "file"
0230    TSETV   14   3  13
0231 => ITERN   11   3   3
0232    ITERL   11 => 0218
0233    MOV      8   1
0234    KSTR     9  37      ; "_DIR"
0235    CAT      8   8   9
0236    TSETV    0   3   8
0237    KPRI     8   2
0238    UCLO     0 => 0239
0239 => RET1     8   2

-- BYTECODE -- deps.lua:544-546
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "%.a$"
0004    CALL     1   2   3
0005    NOT      1   1
0006    RET1     1   2

-- BYTECODE -- deps.lua:548-550
0001    MOV      2   0
0002    TGETS    1   0   0  ; "match"
0003    KSTR     3   1      ; "%.dll$"
0004    CALL     1   2   3
0005    NOT      1   1
0006    RET1     1   2

-- BYTECODE -- deps.lua:526-559
0001    KNIL     5   7
0002    TDUP     8   0
0003    TNEW     9   0
0004    TSETS    9   8   1  ; "program"
0005    TNEW     9   0
0006    TSETS    9   8   2  ; "header"
0007    TNEW     9   0
0008    TSETS    9   8   3  ; "library"
0009    UGET     9   0      ; get_external_deps_dirs
0010    MOV     10   3
0011    CALL     9   2   2
0012    KPRI    10   0
0013    MOV     11   0
0014    KSTR    12   4      ; "_DIR"
0015    CAT     11  11  12
0016    TGETV   11   2  11
0017    ISF         11
0018    JMP     12 => 0027
0019    TNEW    11   3
0020    MOV     12   0
0021    KSTR    13   4      ; "_DIR"
0022    CAT     12  12  13
0023    TGETV   12   2  12
0024    TSETB   12  11   1
0025    MOV     10  11
0026    JMP     11 => 0029
0027 => UGET    11   1      ; cfg
0028    TGETS   10  11   5  ; "external_deps_dirs"
0029 => GGET    11   6      ; "ipairs"
0030    MOV     12  10
0031    CALL    11   4   2
0032    JMP     14 => 0094
0033 => UGET    16   2      ; resolve_prefix
0034    MOV     17  15
0035    MOV     18   9
0036    CALL    16   2   3
0037    MOV     15  16
0038    UGET    16   1      ; cfg
0039    TGETS   16  16   7  ; "is_platform"
0040    KSTR    17   8      ; "mingw32"
0041    CALL    16   2   2
0042    ISF         16
0043    JMP     17 => 0058
0044    ISNES    0   9      ; "LUA"
0045    JMP     16 => 0058
0046    TGETS   16   9  10  ; "LIBDIR"
0047    UGET    17   3      ; fun
0048    TGETS   17  17  12  ; "filter"
0049    UGET    18   4      ; util
0050    TGETS   18  18  13  ; "deep_copy"
0051    TGETS   19   9  10  ; "LIBDIR"
0052    TGETS   19  19  11  ; "pattern"
0053    CALL    18   2   2
0054    FNEW    19  14      ; deps.lua:544
0055    CALL    17   2   3
0056    TSETS   17  16  11  ; "pattern"
0057    JMP     16 => 0077
0058 => UGET    16   1      ; cfg
0059    TGETS   16  16   7  ; "is_platform"
0060    KSTR    17  15      ; "windows"
0061    CALL    16   2   2
0062    ISF         16
0063    JMP     17 => 0077
0064    ISNES    0   9      ; "LUA"
0065    JMP     16 => 0077
0066    TGETS   16   9  10  ; "LIBDIR"
0067    UGET    17   3      ; fun
0068    TGETS   17  17  12  ; "filter"
0069    UGET    18   4      ; util
0070    TGETS   18  18  13  ; "deep_copy"
0071    TGETS   19   9  10  ; "LIBDIR"
0072    TGETS   19  19  11  ; "pattern"
0073    CALL    18   2   2
0074    FNEW    19  16      ; deps.lua:548
0075    CALL    17   2   3
0076    TSETS   17  16  11  ; "pattern"
0077 => UGET    16   5      ; check_external_dependency_at
0078    MOV     17  15
0079    MOV     18   0
0080    MOV     19   1
0081    MOV     20   2
0082    MOV     21   9
0083    MOV     22   8
0084    MOV     23   4
0085    CALL    16   4   8
0086    MOV      7  18
0087    MOV      6  17
0088    MOV      5  16
0089    ISF          5
0090    JMP     16 => 0094
0091    KPRI    16   2
0092    UCLO     0 => 0093
0093 => RET1    16   2
0094 => ITERC   14   3   3
0095    ITERL   14 => 0033
0096    KPRI    11   0
0097    MOV     12   6
0098    MOV     13   7
0099    MOV     14   8
0100    UCLO     0 => 0101
0101 => RET     11   5

-- BYTECODE -- deps.lua:574-604
0001    GGET     2   0      ; "assert"
0002    MOV      4   0
0003    TGETS    3   0   1  ; "type"
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "rockspec"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => CALL     2   1   2
0011    TGETS    2   0   3  ; "external_dependencies"
0012    IST          2
0013    JMP      2 => 0019
0014    UGET     2   0      ; builtin
0015    TGETS    2   2   4  ; "autodetect_external_dependencies"
0016    TGETS    3   0   5  ; "build"
0017    CALL     2   2   2
0018    TSETS    2   0   3  ; "external_dependencies"
0019 => TGETS    2   0   3  ; "external_dependencies"
0020    IST          2
0021    JMP      2 => 0024
0022    KPRI     2   2
0023    RET1     2   2
0024 => UGET     2   1      ; util
0025    TGETS    2   2   6  ; "sortedpairs"
0026    TGETS    3   0   3  ; "external_dependencies"
0027    CALL     2   4   2
0028    JMP      5 => 0095
0029 => UGET     7   2      ; check_external_dependency
0030    MOV      8   5
0031    MOV      9   6
0032    TGETS   10   0   7  ; "variables"
0033    MOV     11   1
0034    CALL     7   5   5
0035    IST          7
0036    JMP     11 => 0095
0037    TNEW    11   3
0038    KSTR    12   8      ; "Could not find "
0039    MOV     13   9
0040    KSTR    14   9      ; " file for "
0041    MOV     15   5
0042    CAT     12  12  15
0043    TSETB   12  11   1
0044    TNEW    12   0
0045    GGET    13  10      ; "ipairs"
0046    TGETV   14  10   9
0047    CALL    13   4   2
0048    JMP     16 => 0061
0049 => TGETV   18  12  17
0050    IST         18
0051    JMP     18 => 0061
0052    KPRI    18   2
0053    TSETV   18  12  17
0054    GGET    18  11      ; "table"
0055    TGETS   18  18  12  ; "insert"
0056    MOV     19  11
0057    KSTR    20  13      ; "  No file "
0058    MOV     21  17
0059    CAT     20  20  21
0060    CALL    18   1   3
0061 => ITERC   16   3   3
0062    ITERL   16 => 0049
0063    GGET    13  11      ; "table"
0064    TGETS   13  13  12  ; "insert"
0065    MOV     14  11
0066    KSTR    15  14      ; "You may have to install "
0067    MOV     16   5
0068    KSTR    17  15      ; " in your system and/or pass "
0069    MOV     18   5
0070    KSTR    19  16      ; "_DIR or "
0071    MOV     20   5
0072    KSTR    21  17      ; "_"
0073    MOV     22   8
0074    KSTR    23  18      ; " to the luarocks command."
0075    CAT     15  15  23
0076    CALL    13   1   3
0077    GGET    13  11      ; "table"
0078    TGETS   13  13  12  ; "insert"
0079    MOV     14  11
0080    KSTR    15  19      ; "Example: luarocks install "
0081    TGETS   16   0  20  ; "name"
0082    KSTR    17  21      ; " "
0083    MOV     18   5
0084    KSTR    19  22      ; "_DIR=/usr/local"
0085    CAT     15  15  19
0086    CALL    13   1   3
0087    KPRI    13   0
0088    GGET    14  11      ; "table"
0089    TGETS   14  14  23  ; "concat"
0090    MOV     15  11
0091    KSTR    16  24      ; "\n"
0092    CALL    14   2   3
0093    KSTR    15  25      ; "dependency"
0094    RET     13   4
0095 => ITERC    5   3   3
0096    ITERL    5 => 0029
0097    KPRI     2   2
0098    RET1     2   2

-- BYTECODE -- deps.lua:613-650
0001    GGET     5   0      ; "assert"
0002    GGET     6   1      ; "type"
0003    MOV      7   0
0004    CALL     6   2   2
0005    ISEQS    6   2      ; "table"
0006    JMP      6 => 0009
0007    KPRI     6   1
0008    JMP      7 => 0010
0009 => KPRI     6   2
0010 => CALL     5   1   2
0011    GGET     5   0      ; "assert"
0012    GGET     6   1      ; "type"
0013    MOV      7   1
0014    CALL     6   2   2
0015    ISEQS    6   2      ; "table"
0016    JMP      6 => 0019
0017    KPRI     6   1
0018    JMP      7 => 0020
0019 => KPRI     6   2
0020 => CALL     5   1   2
0021    GGET     5   0      ; "assert"
0022    GGET     6   1      ; "type"
0023    MOV      7   2
0024    CALL     6   2   2
0025    ISNES    6   3      ; "string"
0026    JMP      6 => 0033
0027    MOV      7   2
0028    TGETS    6   2   4  ; "match"
0029    KSTR     8   5      ; "/"
0030    CALL     6   2   3
0031    NOT      6   6
0032    JMP      7 => 0036
0033 => KPRI     6   1
0034    JMP      7 => 0036
0035    KPRI     6   2
0036 => CALL     5   1   2
0037    GGET     5   0      ; "assert"
0038    GGET     6   1      ; "type"
0039    MOV      7   3
0040    CALL     6   2   2
0041    ISEQS    6   3      ; "string"
0042    JMP      6 => 0045
0043    KPRI     6   1
0044    JMP      7 => 0046
0045 => KPRI     6   2
0046 => CALL     5   1   2
0047    GGET     5   6      ; "require"
0048    KSTR     6   7      ; "luarocks.fetch"
0049    CALL     5   2   2
0050    TGETV    6   0   2
0051    ISF          6
0052    JMP      7 => 0054
0053    RET0     0   1
0054 => TGETS    6   1   8  ; "dependencies"
0055    IST          6
0056    JMP      6 => 0059
0057    TNEW     6   0
0058    TSETS    6   1   8  ; "dependencies"
0059 => TGETS    6   1   8  ; "dependencies"
0060    TGETV    7   6   2
0061    IST          7
0062    JMP      7 => 0065
0063    TNEW     7   0
0064    TSETV    7   6   2
0065 => TGETV    7   6   2
0066    TGETV    8   7   3
0067    KPRI     9   0
0068    IST          8
0069    JMP     10 => 0095
0070    TGETS   10   5   9  ; "load_local_rockspec"
0071    UGET    11   0      ; path
0072    TGETS   11  11  10  ; "rockspec_file"
0073    MOV     12   2
0074    MOV     13   3
0075    CALL    11   2   3
0076    KPRI    12   1
0077    CALL    10   3   3
0078    IST         10
0079    JMP     12 => 0091
0080    UGET    12   1      ; util
0081    TGETS   12  12  11  ; "printerr"
0082    KSTR    13  12      ; "Couldn't load rockspec for "
0083    MOV     14   2
0084    KSTR    15  13      ; " "
0085    MOV     16   3
0086    KSTR    17  14      ; ": "
0087    MOV     18  11
0088    CAT     13  13  18
0089    CALL    12   1   2
0090    RET0     0   1
0091 => TGETS    8  10   8  ; "dependencies"
0092    TGETS    9  10  15  ; "rocks_provided"
0093    TSETV    8   7   3
0094    JMP     10 => 0099
0095 => UGET    10   1      ; util
0096    TGETS   10  10  16  ; "get_rocks_provided"
0097    CALL    10   2   1
0098    MOV      9  10
0099 => UGET    10   2      ; prepare_get_versions
0100    MOV     11   4
0101    MOV     12   9
0102    KSTR    13   8      ; "dependencies"
0103    CALL    10   2   4
0104    UGET    11   3      ; match_all_deps
0105    MOV     12   8
0106    MOV     13  10
0107    CALL    11   2   3
0108    TSETV    3   0   2
0109    GGET    12  17      ; "pairs"
0110    MOV     13  11
0111    CALL    12   4   2
0112    ISNEXT  15 => 0121
0113 => UGET    17   4      ; deps
0114    TGETS   17  17  18  ; "scan_deps"
0115    MOV     18   0
0116    MOV     19   1
0117    TGETS   20  16  19  ; "name"
0118    TGETS   21  16  20  ; "version"
0119    MOV     22   4
0120    CALL    17   1   6
0121 => ITERN   15   3   3
0122    ITERL   15 => 0113
0123    RET0     0   1

-- BYTECODE -- deps.lua:652-676
0001    ISF          2
0002    JMP      3 => 0009
0003    MOV      4   2
0004    TGETS    3   2   0  ; "gsub"
0005    KSTR     5   1      ; "%-.*"
0006    KSTR     6   2      ; ""
0007    CALL     3   2   4
0008    MOV      2   3
0009 => MOV      4   1
0010    TGETS    3   1   0  ; "gsub"
0011    KSTR     5   3      ; "%."
0012    KSTR     6   2      ; ""
0013    CALL     3   2   4
0014    TNEW     4   8
0015    MOV      5   0
0016    KSTR     6   4      ; "/include/lua/"
0017    MOV      7   1
0018    CAT      5   5   7
0019    TSETB    5   4   1
0020    MOV      5   0
0021    KSTR     6   5      ; "/include/lua"
0022    MOV      7   1
0023    CAT      5   5   7
0024    TSETB    5   4   2
0025    MOV      5   0
0026    KSTR     6   6      ; "/include/lua-"
0027    MOV      7   1
0028    CAT      5   5   7
0029    TSETB    5   4   3
0030    MOV      5   0
0031    KSTR     6   5      ; "/include/lua"
0032    MOV      7   3
0033    CAT      5   5   7
0034    TSETB    5   4   4
0035    MOV      5   0
0036    KSTR     6   7      ; "/include"
0037    CAT      5   5   6
0038    TSETB    5   4   5
0039    TSETB    0   4   6
0040    ISFC     5   2
0041    JMP      5 => 0049
0042    MOV      5   0
0043    KSTR     6   8      ; "/include/luajit-"
0044    MOV      8   2
0045    TGETS    7   2   9  ; "match"
0046    KSTR     9  10      ; "^(%d+%.%d+)"
0047    CALL     7   2   3
0048    CAT      5   5   7
0049 => TSETB    5   4   7
0050    GGET     5  11      ; "ipairs"
0051    MOV      6   4
0052    CALL     5   4   2
0053    JMP      8 => 0069
0054 => UGET    10   0      ; dir
0055    TGETS   10  10  12  ; "path"
0056    MOV     11   9
0057    KSTR    12  13      ; "lua.h"
0058    CALL    10   2   3
0059    GGET    11  14      ; "io"
0060    TGETS   11  11  15  ; "open"
0061    MOV     12  10
0062    CALL    11   2   2
0063    ISF         11
0064    JMP     12 => 0069
0065    MOV     13  11
0066    TGETS   12  11  16  ; "close"
0067    CALL    12   1   2
0068    RET1     9   2
0069 => ITERC    8   3   3
0070    ITERL    8 => 0054
0071    KPRI     5   0
0072    RET1     5   2

-- BYTECODE -- deps.lua:678-689
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "get_luajit_version"
0003    CALL     1   2   1
0004    TGETS    2   0   1  ; "LUA_INCDIR"
0005    IST          2
0006    JMP      2 => 0024
0007    TGETS    2   0   2  ; "LUA_DIR"
0008    ISF          2
0009    JMP      3 => 0024
0010    UGET     2   1      ; find_lua_incdir
0011    TGETS    3   0   2  ; "LUA_DIR"
0012    UGET     4   2      ; cfg
0013    TGETS    4   4   3  ; "lua_version"
0014    MOV      5   1
0015    CALL     2   2   4
0016    TSETS    2   0   1  ; "LUA_INCDIR"
0017    TGETS    2   0   1  ; "LUA_INCDIR"
0018    ISNEP    2   0
0019    JMP      2 => 0024
0020    KPRI     2   0
0021    KSTR     3   4      ; "Failed finding Lua header files. You may"~
0022    KSTR     4   5      ; "dependency"
0023    RET      2   4
0024 => KPRI     2   2
0025    RET1     2   2

-- BYTECODE -- deps.lua:691-712
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "get_luajit_version"
0003    CALL     1   2   1
0004    UGET     2   1      ; cfg
0005    TGETS    2   2   1  ; "lua_version"
0006    MOV      3   2
0007    TGETS    2   2   2  ; "gsub"
0008    KSTR     4   3      ; "%."
0009    KSTR     5   4      ; ""
0010    CALL     2   2   4
0011    TDUP     3   7
0012    KSTR     4   5      ; "lua"
0013    UGET     5   1      ; cfg
0014    TGETS    5   5   1  ; "lua_version"
0015    CAT      4   4   5
0016    TSETB    4   3   1
0017    KSTR     4   5      ; "lua"
0018    MOV      5   2
0019    CAT      4   4   5
0020    TSETB    4   3   2
0021    KSTR     4   6      ; "lua-"
0022    UGET     5   1      ; cfg
0023    TGETS    5   5   1  ; "lua_version"
0024    CAT      4   4   5
0025    TSETB    4   3   3
0026    KSTR     4   6      ; "lua-"
0027    MOV      5   2
0028    CAT      4   4   5
0029    TSETB    4   3   4
0030    ISF          1
0031    JMP      4 => 0041
0032    GGET     4   8      ; "table"
0033    TGETS    4   4   9  ; "insert"
0034    MOV      5   3
0035    KSHORT   6   1
0036    KSTR     7  10      ; "luajit-"
0037    UGET     8   1      ; cfg
0038    TGETS    8   8   1  ; "lua_version"
0039    CAT      7   7   8
0040    CALL     4   1   4
0041 => TNEW     4   0
0042    UGET     5   2      ; check_external_dependency
0043    KSTR     6  11      ; "LUA"
0044    TDUP     7  12
0045    TSETS    3   7  13  ; "library"
0046    MOV      8   0
0047    KSTR     9  14      ; "build"
0048    MOV     10   4
0049    CALL     5   2   6
0050    ISF          5
0051    JMP      6 => 0056
0052    TGETS    6   0  16  ; "LUA_LIBDIR_FILE"
0053    TSETS    6   0  15  ; "LUALIB"
0054    KPRI     6   2
0055    RET1     6   2
0056 => KPRI     6   0
0057    KSTR     7  17      ; "Failed finding Lua library. You may need"~
0058    KSTR     8  18      ; "dependency"
0059    RET      6   4

-- BYTECODE -- deps.lua:714-716
0001    TGETS    1   0   0  ; "deps_mode"
0002    IST          1
0003    JMP      2 => 0006
0004    UGET     1   0      ; cfg
0005    TGETS    1   1   0  ; "deps_mode"
0006 => RET1     1   2

-- BYTECODE -- deps.lua:0-719
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.core.cfg"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.manif"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.path"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.dir"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.fun"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.util"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.core.vers"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.queries"
0025    CALL     8   2   2
0026    GGET     9   0      ; "require"
0027    KSTR    10   9      ; "luarocks.build.builtin"
0028    CALL     9   2   2
0029    GGET    10   0      ; "require"
0030    KSTR    11  10      ; "luarocks.deplocks"
0031    CALL    10   2   2
0032    FNEW    11  11      ; deps.lua:32
0033    FNEW    12  12      ; deps.lua:81
0034    FNEW    13  13      ; deps.lua:111
0035    FNEW    14  15      ; deps.lua:148
0036    TSETS   14   0  14  ; "match_deps"
0037    FNEW    14  16      ; deps.lua:158
0038    FNEW    15  18      ; deps.lua:176
0039    TSETS   15   0  17  ; "report_missing_dependencies"
0040    FNEW    15  20      ; deps.lua:205
0041    TSETS   15   0  19  ; "fulfill_dependency"
0042    FNEW    15  21      ; deps.lua:249
0043    FNEW    16  23      ; deps.lua:288
0044    TSETS   16   0  22  ; "fulfill_dependencies"
0045    FNEW    16  24      ; deps.lua:363
0046    FNEW    17  25      ; deps.lua:375
0047    FNEW    18  26      ; deps.lua:381
0048    FNEW    19  27      ; deps.lua:399
0049    FNEW    20  28      ; deps.lua:418
0050    FNEW    21  29      ; deps.lua:433
0051    FNEW    22  30      ; deps.lua:526
0052    FNEW    23  32      ; deps.lua:574
0053    TSETS   23   0  31  ; "check_external_deps"
0054    FNEW    23  34      ; deps.lua:613
0055    TSETS   23   0  33  ; "scan_deps"
0056    FNEW    23  35      ; deps.lua:652
0057    FNEW    24  37      ; deps.lua:678
0058    TSETS   24   0  36  ; "check_lua_incdir"
0059    FNEW    24  39      ; deps.lua:691
0060    TSETS   24   0  38  ; "check_lua_libdir"
0061    FNEW    24  41      ; deps.lua:714
0062    TSETS   24   0  40  ; "get_deps_mode"
0063    UCLO     0 => 0064
0064 => RET1     0   2

