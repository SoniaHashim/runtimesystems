-- BYTECODE -- cmd.lua:31-42
0001    GGET     0   0      ; "pcall"
0002    GGET     1   1      ; "io"
0003    TGETS    1   1   2  ; "popen"
0004    KSTR     2   3      ; ""
0005    CALL     0   3   3
0006    ISF          0
0007    JMP      2 => 0014
0008    ISF          1
0009    JMP      2 => 0032
0010    MOV      3   1
0011    TGETS    2   1   4  ; "close"
0012    CALL     2   1   2
0013    JMP      2 => 0032
0014 => GGET     2   1      ; "io"
0015    TGETS    2   2   5  ; "stderr"
0016    MOV      3   2
0017    TGETS    2   2   6  ; "write"
0018    KSTR     4   7      ; "Your version of Lua does not support io."~
0019    CALL     2   1   3
0020    GGET     2   1      ; "io"
0021    TGETS    2   2   5  ; "stderr"
0022    MOV      3   2
0023    TGETS    2   2   6  ; "write"
0024    KSTR     4   8      ; "which is required by LuaRocks. Please ch"~
0025    CALL     2   1   3
0026    GGET     2   9      ; "os"
0027    TGETS    2   2  10  ; "exit"
0028    UGET     3   0      ; cmd
0029    TGETS    3   3  11  ; "errorcodes"
0030    TGETS    3   3  12  ; "UNSPECIFIED"
0031    CALL     2   1   2
0032 => RET0     0   1

-- BYTECODE -- cmd.lua:46-50
0001    UGET     3   0      ; dir
0002    TGETS    3   3   0  ; "normalize"
0003    MOV      4   1
0004    CALL     3   2   2
0005    MOV      1   3
0006    TSETS    1   0   1  ; "tree"
0007    UGET     3   1      ; path
0008    TGETS    3   3   2  ; "use_tree"
0009    ISTC     4   2
0010    JMP      4 => 0012
0011    MOV      4   1
0012 => CALL     3   1   2
0013    RET0     0   1

-- BYTECODE -- cmd.lua:52-62
0001    GGET     0   0      ; "type"
0002    UGET     1   0      ; cfg
0003    TGETS    1   1   1  ; "root_dir"
0004    CALL     0   2   2
0005    ISNES    0   2      ; "string"
0006    JMP      0 => 0017
0007    UGET     0   0      ; cfg
0008    UGET     1   0      ; cfg
0009    TGETS    1   1   1  ; "root_dir"
0010    MOV      2   1
0011    TGETS    1   1   3  ; "gsub"
0012    KSTR     3   4      ; "/+$"
0013    KSTR     4   5      ; ""
0014    CALL     1   2   4
0015    TSETS    1   0   1  ; "root_dir"
0016    JMP      0 => 0028
0017 => UGET     0   0      ; cfg
0018    TGETS    0   0   1  ; "root_dir"
0019    UGET     1   0      ; cfg
0020    TGETS    1   1   1  ; "root_dir"
0021    TGETS    1   1   6  ; "root"
0022    MOV      2   1
0023    TGETS    1   1   3  ; "gsub"
0024    KSTR     3   4      ; "/+$"
0025    KSTR     4   5      ; ""
0026    CALL     1   2   4
0027    TSETS    1   0   6  ; "root"
0028 => UGET     0   0      ; cfg
0029    UGET     1   0      ; cfg
0030    TGETS    1   1   7  ; "rocks_dir"
0031    MOV      2   1
0032    TGETS    1   1   3  ; "gsub"
0033    KSTR     3   4      ; "/+$"
0034    KSTR     4   5      ; ""
0035    CALL     1   2   4
0036    TSETS    1   0   7  ; "rocks_dir"
0037    UGET     0   0      ; cfg
0038    UGET     1   0      ; cfg
0039    TGETS    1   1   8  ; "deploy_bin_dir"
0040    MOV      2   1
0041    TGETS    1   1   3  ; "gsub"
0042    KSTR     3   4      ; "/+$"
0043    KSTR     4   5      ; ""
0044    CALL     1   2   4
0045    TSETS    1   0   8  ; "deploy_bin_dir"
0046    UGET     0   0      ; cfg
0047    UGET     1   0      ; cfg
0048    TGETS    1   1   9  ; "deploy_lua_dir"
0049    MOV      2   1
0050    TGETS    1   1   3  ; "gsub"
0051    KSTR     3   4      ; "/+$"
0052    KSTR     4   5      ; ""
0053    CALL     1   2   4
0054    TSETS    1   0   9  ; "deploy_lua_dir"
0055    UGET     0   0      ; cfg
0056    UGET     1   0      ; cfg
0057    TGETS    1   1  10  ; "deploy_lib_dir"
0058    MOV      2   1
0059    TGETS    1   1   3  ; "gsub"
0060    KSTR     3   4      ; "/+$"
0061    KSTR     4   5      ; ""
0062    CALL     1   2   4
0063    TSETS    1   0  10  ; "deploy_lib_dir"
0064    RET0     0   1

-- BYTECODE -- cmd.lua:64-119
0001    TGETS    2   0   0  ; "global"
0002    ISF          2
0003    JMP      3 => 0007
0004    UGET     2   0      ; cfg
0005    KPRI     3   1
0006    TSETS    3   2   1  ; "local_by_default"
0007 => TGETS    2   0   2  ; "tree"
0008    ISF          2
0009    JMP      3 => 0054
0010    KPRI     2   1
0011    GGET     3   3      ; "ipairs"
0012    UGET     4   0      ; cfg
0013    TGETS    4   4   4  ; "rocks_trees"
0014    CALL     3   4   2
0015    JMP      6 => 0041
0016 => GGET     8   5      ; "type"
0017    MOV      9   7
0018    CALL     8   2   2
0019    ISNES    8   6      ; "table"
0020    JMP      8 => 0041
0021    TGETS    8   0   2  ; "tree"
0022    TGETS    9   7   7  ; "name"
0023    ISNEV    8   9
0024    JMP      8 => 0041
0025    TGETS    8   7   8  ; "root"
0026    IST          8
0027    JMP      8 => 0034
0028    KPRI     8   0
0029    KSTR     9   9      ; "Configuration error: tree '"
0030    TGETS   10   7   7  ; "name"
0031    KSTR    11  10      ; "' has no 'root' field."
0032    CAT      9   9  11
0033    RET      8   3
0034 => UGET     8   1      ; replace_tree
0035    MOV      9   0
0036    TGETS   10   7   8  ; "root"
0037    MOV     11   7
0038    CALL     8   1   4
0039    KPRI     2   2
0040    JMP      3 => 0043
0041 => ITERC    6   3   3
0042    ITERL    6 => 0016
0043 => IST          2
0044    JMP      3 => 0136
0045    UGET     3   2      ; fs
0046    TGETS    3   3  11  ; "absolute_name"
0047    TGETS    4   0   2  ; "tree"
0048    CALL     3   2   2
0049    UGET     4   1      ; replace_tree
0050    MOV      5   0
0051    MOV      6   3
0052    CALL     4   1   3
0053    JMP      2 => 0136
0054 => TGETS    2   0  12  ; "local"
0055    ISF          2
0056    JMP      3 => 0074
0057    UGET     2   0      ; cfg
0058    TGETS    2   2  13  ; "home_tree"
0059    IST          2
0060    JMP      2 => 0068
0061    KPRI     2   0
0062    KSTR     3  14      ; "The --local flag is meant for operating "~
0063    KSTR     4  15      ; "You are running as a superuser, which is"~
0064    KSTR     5  16      ; "To force using the superuser's home, use"~
0065    CAT      3   3   5
0066    RET      2   3
0067    JMP      2 => 0136
0068 => UGET     2   1      ; replace_tree
0069    MOV      3   0
0070    UGET     4   0      ; cfg
0071    TGETS    4   4  13  ; "home_tree"
0072    CALL     2   1   3
0073    JMP      2 => 0136
0074 => TGETS    2   0  17  ; "project_tree"
0075    ISF          2
0076    JMP      3 => 0094
0077    TGETS    2   0  17  ; "project_tree"
0078    GGET     3   6      ; "table"
0079    TGETS    3   3  18  ; "insert"
0080    UGET     4   0      ; cfg
0081    TGETS    4   4   4  ; "rocks_trees"
0082    KSHORT   5   1
0083    TDUP     6  19
0084    TSETS    2   6   8  ; "root"
0085    CALL     3   1   4
0086    UGET     3   3      ; manif
0087    TGETS    3   3  20  ; "load_rocks_tree_manifests"
0088    CALL     3   1   1
0089    UGET     3   4      ; path
0090    TGETS    3   3  21  ; "use_tree"
0091    MOV      4   2
0092    CALL     3   1   2
0093    JMP      2 => 0136
0094 => UGET     2   0      ; cfg
0095    TGETS    2   2   1  ; "local_by_default"
0096    ISF          2
0097    JMP      3 => 0108
0098    UGET     2   0      ; cfg
0099    TGETS    2   2  13  ; "home_tree"
0100    ISF          2
0101    JMP      3 => 0136
0102    UGET     2   1      ; replace_tree
0103    MOV      3   0
0104    UGET     4   0      ; cfg
0105    TGETS    4   4  13  ; "home_tree"
0106    CALL     2   1   3
0107    JMP      2 => 0136
0108 => ISF          1
0109    JMP      2 => 0129
0110    MOV      2   1
0111    KSTR     3  22      ; "/lua_modules"
0112    CAT      2   2   3
0113    GGET     3   6      ; "table"
0114    TGETS    3   3  18  ; "insert"
0115    UGET     4   0      ; cfg
0116    TGETS    4   4   4  ; "rocks_trees"
0117    KSHORT   5   1
0118    TDUP     6  23
0119    TSETS    2   6   8  ; "root"
0120    CALL     3   1   4
0121    UGET     3   3      ; manif
0122    TGETS    3   3  20  ; "load_rocks_tree_manifests"
0123    CALL     3   1   1
0124    UGET     3   4      ; path
0125    TGETS    3   3  21  ; "use_tree"
0126    MOV      4   2
0127    CALL     3   1   2
0128    JMP      2 => 0136
0129 => UGET     2   0      ; cfg
0130    TGETS    2   2   4  ; "rocks_trees"
0131    UGET     3   4      ; path
0132    TGETS    3   3  21  ; "use_tree"
0133    LEN      4   2
0134    TGETV    4   2   4
0135    CALL     3   1   2
0136 => UGET     2   5      ; strip_trailing_slashes
0137    CALL     2   1   1
0138    UGET     2   0      ; cfg
0139    TGETS    2   2  24  ; "variables"
0140    UGET     3   0      ; cfg
0141    TGETS    3   3  26  ; "rocks_dir"
0142    TSETS    3   2  25  ; "ROCKS_TREE"
0143    UGET     2   0      ; cfg
0144    TGETS    2   2  24  ; "variables"
0145    UGET     3   0      ; cfg
0146    TGETS    3   3  28  ; "deploy_bin_dir"
0147    TSETS    3   2  27  ; "SCRIPTS_DIR"
0148    KPRI     2   2
0149    RET1     2   2

-- BYTECODE -- cmd.lua:129-129
0001    UGET     1   0      ; dir
0002    TGETS    1   1   0  ; "path"
0003    MOV      2   0
0004    KSTR     3   1      ; "dev"
0005    CALLT    1   3

-- BYTECODE -- cmd.lua:122-145
0001    TGETS    1   0   0  ; "server"
0002    ISF          1
0003    JMP      2 => 0018
0004    UGET     1   0      ; dir
0005    TGETS    1   1   1  ; "split_url"
0006    TGETS    2   0   0  ; "server"
0007    CALL     1   3   2
0008    GGET     3   2      ; "table"
0009    TGETS    3   3   3  ; "insert"
0010    UGET     4   1      ; cfg
0011    TGETS    4   4   4  ; "rocks_servers"
0012    KSHORT   5   1
0013    MOV      6   1
0014    KSTR     7   5      ; "://"
0015    MOV      8   2
0016    CAT      6   6   8
0017    CALL     3   1   4
0018 => TGETS    1   0   6  ; "dev"
0019    ISF          1
0020    JMP      2 => 0036
0021    FNEW     1   7      ; cmd.lua:129
0022    UGET     2   2      ; fun
0023    TGETS    2   2   8  ; "traverse"
0024    UGET     3   1      ; cfg
0025    TGETS    3   3   4  ; "rocks_servers"
0026    MOV      4   1
0027    CALL     2   2   3
0028    UGET     3   1      ; cfg
0029    UGET     4   2      ; fun
0030    TGETS    4   4   9  ; "concat"
0031    MOV      5   2
0032    UGET     6   1      ; cfg
0033    TGETS    6   6   4  ; "rocks_servers"
0034    CALL     4   2   3
0035    TSETS    4   3   4  ; "rocks_servers"
0036 => TGETS    1   0  10  ; "only_server"
0037    ISF          1
0038    JMP      2 => 0058
0039    TGETS    1   0   6  ; "dev"
0040    ISF          1
0041    JMP      2 => 0046
0042    KPRI     1   0
0043    KSTR     2  11      ; "--only-server cannot be used with --dev"
0044    UCLO     0 => 0045
0045 => RET      1   3
0046 => TGETS    1   0   0  ; "server"
0047    ISF          1
0048    JMP      2 => 0053
0049    KPRI     1   0
0050    KSTR     2  12      ; "--only-server cannot be used with --serv"~
0051    UCLO     0 => 0052
0052 => RET      1   3
0053 => UGET     1   1      ; cfg
0054    TNEW     2   3
0055    TGETS    3   0  10  ; "only_server"
0056    TSETB    3   2   1
0057    TSETS    2   1   4  ; "rocks_servers"
0058 => KPRI     1   2
0059    UCLO     0 => 0060
0060 => RET1     1   2

-- BYTECODE -- cmd.lua:147-157
0001    KSTR     1   0      ; "Arch.: "
0002    UGET     2   0      ; cfg
0003    ISF          2
0004    JMP      3 => 0009
0005    UGET     2   0      ; cfg
0006    TGETS    2   2   1  ; "arch"
0007    IST          2
0008    JMP      3 => 0010
0009 => KSTR     2   2      ; "unknown"
0010 => CAT      1   1   2
0011    GGET     2   3      ; "package"
0012    TGETS    2   2   4  ; "config"
0013    MOV      3   2
0014    TGETS    2   2   5  ; "sub"
0015    KSHORT   4   1
0016    KSHORT   5   1
0017    CALL     2   2   4
0018    ISNES    2   6      ; "\"
0019    JMP      2 => 0030
0020    UGET     2   0      ; cfg
0021    ISF          2
0022    JMP      3 => 0030
0023    UGET     2   0      ; cfg
0024    TGETS    2   2   7  ; "fs_use_modules"
0025    ISF          2
0026    JMP      3 => 0030
0027    MOV      2   1
0028    KSTR     3   8      ; " (fs_use_modules = true)"
0029    CAT      1   2   3
0030 => GGET     2   9      ; "debug"
0031    TGETS    2   2  10  ; "traceback"
0032    KSTR     3  11      ; "LuaRocks "
0033    UGET     4   0      ; cfg
0034    TGETS    4   4  12  ; "program_version"
0035    KSTR     5  13      ; " bug (please report at https://github.co"~
0036    MOV      6   1
0037    KSTR     7  14      ; "\n"
0038    MOV      8   0
0039    CAT      3   3   8
0040    KSHORT   4   2
0041    CALLT    2   3

-- BYTECODE -- cmd.lua:162-173
0001    GGET     2   0      ; "assert"
0002    GGET     3   1      ; "type"
0003    MOV      4   0
0004    CALL     3   2   2
0005    ISEQS    3   2      ; "string"
0006    JMP      3 => 0009
0007    KPRI     3   1
0008    JMP      4 => 0010
0009 => KPRI     3   2
0010 => KSTR     4   3      ; "bad error, expected string, got: "
0011    GGET     5   1      ; "type"
0012    MOV      6   0
0013    CALL     5   2   2
0014    CAT      4   4   5
0015    CALL     2   1   3
0016    UGET     2   0      ; util
0017    TGETS    2   2   4  ; "printerr"
0018    KSTR     3   5      ; "\nError: "
0019    MOV      4   0
0020    CAT      3   3   4
0021    CALL     2   1   2
0022    GGET     2   6      ; "xpcall"
0023    UGET     3   0      ; util
0024    TGETS    3   3   7  ; "run_scheduled_functions"
0025    UGET     4   1      ; error_handler
0026    CALL     2   3   3
0027    IST          2
0028    JMP      4 => 0038
0029    UGET     4   0      ; util
0030    TGETS    4   4   4  ; "printerr"
0031    KSTR     5   5      ; "\nError: "
0032    MOV      6   3
0033    CAT      5   5   6
0034    CALL     4   1   2
0035    UGET     4   2      ; cmd
0036    TGETS    4   4   8  ; "errorcodes"
0037    TGETS    1   4   9  ; "CRASH"
0038 => GGET     4  10      ; "os"
0039    TGETS    4   4  11  ; "exit"
0040    ISTC     5   1
0041    JMP      5 => 0045
0042    UGET     5   2      ; cmd
0043    TGETS    5   5   8  ; "errorcodes"
0044    TGETS    5   5  12  ; "UNSPECIFIED"
0045 => CALL     4   1   2
0046    RET0     0   1

-- BYTECODE -- cmd.lua:175-198
0001    GGET     2   0      ; "package"
0002    TGETS    2   2   1  ; "config"
0003    MOV      3   2
0004    TGETS    2   2   2  ; "sub"
0005    KSHORT   4   1
0006    KSHORT   5   1
0007    CALL     2   2   4
0008    ISNES    2   3      ; "\"
0009    JMP      2 => 0012
0010    KSTR     2   4      ; ";"
0011    JMP      3 => 0013
0012 => KSTR     2   5      ; ":"
0013 => TNEW     3   0
0014    GGET     4   6      ; "os"
0015    TGETS    4   4   7  ; "getenv"
0016    KSTR     5   8      ; "PATH"
0017    CALL     4   2   2
0018    MOV      5   4
0019    TGETS    4   4   9  ; "gmatch"
0020    KSTR     6  10      ; "[^"
0021    MOV      7   2
0022    KSTR     8  11      ; "]+"
0023    CAT      6   6   8
0024    CALL     4   4   3
0025    JMP      7 => 0068
0026 => UGET     8   0      ; dir
0027    TGETS    8   8  12  ; "path"
0028    MOV     10   7
0029    TGETS    9   7  13  ; "gsub"
0030    KSTR    11  14      ; "[\/][^\/]+[\/]?$"
0031    KSTR    12  15      ; ""
0032    CALL     9   2   4
0033    CALL     8   2   2
0034    UGET     9   1      ; util
0035    TGETS    9   9  16  ; "find_lua"
0036    MOV     10   8
0037    MOV     11   0
0038    CALL     9   3   3
0039    ISF          9
0040    JMP     11 => 0043
0041    RET1     9   2
0042    JMP     11 => 0048
0043 => GGET    11  17      ; "table"
0044    TGETS   11  11  18  ; "insert"
0045    MOV     12   3
0046    MOV     13  10
0047    CALL    11   1   3
0048 => UGET    11   0      ; dir
0049    TGETS   11  11  12  ; "path"
0050    MOV     12   7
0051    CALL    11   2   2
0052    MOV      7  11
0053    UGET    11   1      ; util
0054    TGETS   11  11  16  ; "find_lua"
0055    MOV     12   7
0056    MOV     13   0
0057    CALL    11   2   3
0058    MOV      9  11
0059    ISF          9
0060    JMP     11 => 0063
0061    RET1     9   2
0062    JMP     11 => 0068
0063 => GGET    11  17      ; "table"
0064    TGETS   11  11  18  ; "insert"
0065    MOV     12   3
0066    MOV     13  10
0067    CALL    11   1   3
0068 => ITERC    7   2   3
0069    ITERL    7 => 0026
0070    KPRI     4   0
0071    KSTR     5  19      ; "Could not find "
0072    ISF          0
0073    JMP      6 => 0079
0074    KSTR     6  20      ; "Lua "
0075    MOV      7   0
0076    CAT      6   6   7
0077    IST          6
0078    JMP      7 => 0080
0079 => KSTR     6  21      ; "Lua"
0080 => KSTR     7  22      ; " in PATH."
0081    ISF          1
0082    JMP      8 => 0092
0083    KSTR     8  23      ; " Tried:\n"
0084    GGET     9  17      ; "table"
0085    TGETS    9   9  24  ; "concat"
0086    MOV     10   3
0087    KSTR    11  25      ; "\n"
0088    CALL     9   2   3
0089    CAT      8   8   9
0090    IST          8
0091    JMP      9 => 0093
0092 => KSTR     8  15      ; ""
0093 => CAT      5   5   8
0094    RET      4   3

-- BYTECODE -- cmd.lua:204-219
0001    ISF          0
0002    JMP      1 => 0011
0003    MOV      2   0
0004    TGETS    1   0   0  ; "gsub"
0005    KSTR     3   1      ; "[/\][^/\]+$"
0006    KSTR     4   2      ; ""
0007    CALL     1   2   4
0008    KPRI     2   2
0009    RET      1   3
0010    JMP      1 => 0049
0011 => KSTR     1   3      ; "."
0012    KSHORT   2   1
0013    KSHORT   3  10
0014    KSHORT   4   1
0015    FORI     2 => 0049
0016 => UGET     6   0      ; util
0017    TGETS    6   6   4  ; "exists"
0018    MOV      7   1
0019    KSTR     8   5      ; "/.luarocks"
0020    CAT      7   7   8
0021    CALL     6   2   2
0022    ISF          6
0023    JMP      7 => 0036
0024    UGET     6   0      ; util
0025    TGETS    6   6   4  ; "exists"
0026    MOV      7   1
0027    KSTR     8   6      ; "/lua_modules"
0028    CAT      7   7   8
0029    CALL     6   2   2
0030    ISF          6
0031    JMP      7 => 0036
0032    MOV      6   1
0033    KPRI     7   1
0034    RET      6   3
0035    JMP      6 => 0045
0036 => UGET     6   0      ; util
0037    TGETS    6   6   4  ; "exists"
0038    MOV      7   1
0039    KSTR     8   7      ; "/.luarocks-no-project"
0040    CAT      7   7   8
0041    CALL     6   2   2
0042    ISF          6
0043    JMP      7 => 0045
0044    JMP      2 => 0049
0045 => MOV      6   1
0046    KSTR     7   8      ; "/.."
0047    CAT      1   6   7
0048    FORL     2 => 0016
0049 => KPRI     1   0
0050    RET1     1   2

-- BYTECODE -- cmd.lua:221-248
0001    UGET     2   0      ; hardcoded
0002    TGETS    2   2   0  ; "FORCE_CONFIG"
0003    ISF          2
0004    JMP      3 => 0007
0005    KPRI     2   0
0006    RET1     2   2
0007 => TNEW     2   0
0008    ISF          1
0009    JMP      3 => 0019
0010    GGET     3   1      ; "table"
0011    TGETS    3   3   2  ; "insert"
0012    MOV      4   2
0013    UGET     5   1      ; dir
0014    TGETS    5   5   3  ; "path"
0015    MOV      6   1
0016    KSTR     7   4      ; ".luarocks"
0017    CALL     5   0   3
0018    CALLM    3   1   1
0019 => UGET     3   2      ; cfg
0020    TGETS    3   3   5  ; "home_tree"
0021    ISF          3
0022    JMP      4 => 0033
0023    GGET     3   1      ; "table"
0024    TGETS    3   3   2  ; "insert"
0025    MOV      4   2
0026    UGET     5   1      ; dir
0027    TGETS    5   5   3  ; "path"
0028    UGET     6   2      ; cfg
0029    TGETS    6   6   5  ; "home_tree"
0030    KSTR     7   4      ; ".luarocks"
0031    CALL     5   0   3
0032    CALLM    3   1   1
0033 => GGET     3   1      ; "table"
0034    TGETS    3   3   2  ; "insert"
0035    MOV      4   2
0036    UGET     5   2      ; cfg
0037    TGETS    5   5   6  ; "sysconfdir"
0038    CALL     3   1   3
0039    GGET     3   7      ; "ipairs"
0040    MOV      4   2
0041    CALL     3   4   2
0042    JMP      6 => 0083
0043 => UGET     8   1      ; dir
0044    TGETS    8   8   3  ; "path"
0045    MOV      9   7
0046    KSTR    10   8      ; "default-lua-version.lua"
0047    CALL     8   2   3
0048    GGET     9   9      ; "loadfile"
0049    MOV     10   8
0050    KSTR    11  10      ; "t"
0051    CALL     9   3   3
0052    ISF          9
0053    JMP     11 => 0083
0054    GGET    11  11      ; "pcall"
0055    MOV     12   9
0056    CALL    11   3   2
0057    ISF         11
0058    JMP     13 => 0083
0059    GGET    13  12      ; "type"
0060    MOV     14  12
0061    CALL    13   2   2
0062    ISNES   13  13      ; "string"
0063    JMP     13 => 0083
0064    MOV     14  12
0065    TGETS   13  12  14  ; "match"
0066    KSTR    15  15      ; "%d+.%d+"
0067    CALL    13   2   3
0068    ISF         13
0069    JMP     14 => 0083
0070    TGETS   13   0  16  ; "verbose"
0071    ISF         13
0072    JMP     14 => 0082
0073    UGET    13   3      ; util
0074    TGETS   13  13  17  ; "printout"
0075    KSTR    14  18      ; "Defaulting to Lua "
0076    MOV     15  12
0077    KSTR    16  19      ; " based on "
0078    MOV     17   8
0079    KSTR    18  20      ; " ..."
0080    CAT     14  14  18
0081    CALL    13   1   2
0082 => RET1    12   2
0083 => ITERC    6   3   3
0084    ITERL    6 => 0043
0085    KPRI     3   0
0086    RET1     3   2

-- BYTECODE -- cmd.lua:251-255
0001    UGET     1   0      ; util
0002    TGETS    1   1   0  ; "exists"
0003    UGET     2   1      ; dir
0004    TGETS    2   2   1  ; "path"
0005    UGET     3   2      ; dirname
0006    KSTR     4   2      ; ".luarocks"
0007    KSTR     5   3      ; "config-"
0008    MOV      6   0
0009    KSTR     7   4      ; ".lua"
0010    CAT      5   5   7
0011    CALL     2   0   4
0012    CALLM    1   2   0
0013    ISF          1
0014    JMP      2 => 0016
0015    RET1     0   2
0016 => RET0     0   1

-- BYTECODE -- cmd.lua:250-256
0001    UGET     1   0      ; fun
0002    TGETS    1   1   0  ; "find"
0003    UGET     2   1      ; util
0004    TGETS    2   2   1  ; "lua_versions"
0005    KSTR     3   2      ; "descending"
0006    CALL     2   2   2
0007    FNEW     3   3      ; cmd.lua:251
0008    UCLO     0 => 0009
0009 => CALLT    1   3

-- BYTECODE -- cmd.lua:258-282
0001    TGETS    2   0   0  ; "lua_version"
0002    IST          2
0003    JMP      3 => 0015
0004    UGET     2   0      ; find_default_lua_version
0005    MOV      3   0
0006    MOV      4   1
0007    CALL     2   2   3
0008    IST          2
0009    JMP      3 => 0015
0010    ISFC     2   1
0011    JMP      2 => 0015
0012    UGET     2   1      ; find_version_from_config
0013    MOV      3   1
0014    CALL     2   2   2
0015 => TGETS    3   0   1  ; "lua_dir"
0016    ISF          3
0017    JMP      4 => 0029
0018    UGET     3   2      ; util
0019    TGETS    3   3   2  ; "find_lua"
0020    TGETS    4   0   1  ; "lua_dir"
0021    MOV      5   2
0022    CALL     3   3   3
0023    IST          3
0024    JMP      5 => 0028
0025    UGET     5   3      ; die
0026    MOV      6   4
0027    CALL     5   1   2
0028 => RET1     3   2
0029 => ISF          2
0030    JMP      3 => 0040
0031    UGET     3   4      ; search_lua_in_path
0032    MOV      4   2
0033    CALL     3   2   2
0034    ISF          3
0035    JMP      4 => 0037
0036    RET1     3   2
0037 => TDUP     4   3
0038    TSETS    2   4   0  ; "lua_version"
0039    RET1     4   2
0040 => TNEW     3   0
0041    RET1     3   2

-- BYTECODE -- cmd.lua:284-298
0001    UGET     1   0      ; find_project_dir
0002    TGETS    2   0   0  ; "project_tree"
0003    CALL     1   3   2
0004    UGET     3   1      ; detect_lua_via_args
0005    MOV      4   0
0006    MOV      5   1
0007    CALL     3   2   3
0008    TGETS    4   0   1  ; "lua_version"
0009    ISF          4
0010    JMP      5 => 0013
0011    TGETS    4   0   1  ; "lua_version"
0012    TSETS    4   3   2  ; "given_lua_version"
0013 => TGETS    4   0   3  ; "lua_dir"
0014    ISF          4
0015    JMP      5 => 0018
0016    TGETS    4   0   3  ; "lua_dir"
0017    TSETS    4   3   4  ; "given_lua_dir"
0018 => ISF          2
0019    JMP      4 => 0021
0020    TSETS    1   3   5  ; "given_project_dir"
0021 => TSETS    1   3   6  ; "project_dir"
0022    RET1     3   2

-- BYTECODE -- cmd.lua:301-310
0001    UGET     1   0      ; detect_config_via_args
0002    MOV      2   0
0003    CALL     1   2   2
0004    UGET     2   1      ; cfg
0005    TGETS    2   2   0  ; "init"
0006    MOV      3   1
0007    UGET     4   2      ; util
0008    TGETS    4   4   1  ; "warning"
0009    CALL     2   3   3
0010    IST          2
0011    JMP      4 => 0015
0012    KPRI     4   0
0013    MOV      5   3
0014    RET      4   3
0015 => TGETS    4   1   2  ; "lua_dir"
0016    ISNEP    4   0
0017    JMP      4 => 0020
0018    KPRI     4   1
0019    JMP      5 => 0021
0020 => KPRI     4   2
0021 => RET1     4   2

-- BYTECODE -- cmd.lua:320-322
0001    ISF          0
0002    JMP      1 => 0005
0003    KSTR     1   0      ; "ok"
0004    JMP      2 => 0006
0005 => KSTR     1   1      ; "not found"
0006 => RET1     1   2

-- BYTECODE -- cmd.lua:324-352
0001    KSTR     1   0      ; "Configuration:\n   Lua version: "
0002    TGETS    2   0   1  ; "lua_version"
0003    KSTR     3   2      ; "\n"
0004    CAT      1   1   3
0005    TGETS    2   0   3  ; "luajit_version"
0006    ISF          2
0007    JMP      3 => 0013
0008    MOV      2   1
0009    KSTR     3   4      ; "   LuaJIT version: "
0010    TGETS    4   0   3  ; "luajit_version"
0011    KSTR     5   2      ; "\n"
0012    CAT      1   2   5
0013 => MOV      2   1
0014    KSTR     3   5      ; "\n   Configuration files:\n"
0015    CAT      1   2   3
0016    TGETS    2   0   6  ; "config_files"
0017    MOV      3   1
0018    KSTR     4   7      ; "      System  : "
0019    UGET     5   0      ; fs
0020    TGETS    5   5   8  ; "absolute_name"
0021    TGETS    6   2   9  ; "system"
0022    TGETS    6   6  10  ; "file"
0023    CALL     5   2   2
0024    KSTR     6  11      ; " ("
0025    UGET     7   1      ; get_status
0026    TGETS    8   2   9  ; "system"
0027    TGETS    8   8  12  ; "found"
0028    CALL     7   2   2
0029    KSTR     8  13      ; ")\n"
0030    CAT      1   3   8
0031    TGETS    3   2  14  ; "user"
0032    TGETS    3   3  10  ; "file"
0033    ISF          3
0034    JMP      4 => 0050
0035    MOV      3   1
0036    KSTR     4  15      ; "      User    : "
0037    UGET     5   0      ; fs
0038    TGETS    5   5   8  ; "absolute_name"
0039    TGETS    6   2  14  ; "user"
0040    TGETS    6   6  10  ; "file"
0041    CALL     5   2   2
0042    KSTR     6  11      ; " ("
0043    UGET     7   1      ; get_status
0044    TGETS    8   2  14  ; "user"
0045    TGETS    8   8  12  ; "found"
0046    CALL     7   2   2
0047    KSTR     8  13      ; ")\n"
0048    CAT      1   3   8
0049    JMP      3 => 0053
0050 => MOV      3   1
0051    KSTR     4  16      ; "      User    : disabled in this LuaRock"~
0052    CAT      1   3   4
0053 => TGETS    3   2  17  ; "project"
0054    ISF          3
0055    JMP      4 => 0070
0056    MOV      3   1
0057    KSTR     4  18      ; "      Project : "
0058    UGET     5   0      ; fs
0059    TGETS    5   5   8  ; "absolute_name"
0060    TGETS    6   2  17  ; "project"
0061    TGETS    6   6  10  ; "file"
0062    CALL     5   2   2
0063    KSTR     6  11      ; " ("
0064    UGET     7   1      ; get_status
0065    TGETS    8   2  17  ; "project"
0066    TGETS    8   8  12  ; "found"
0067    CALL     7   2   2
0068    KSTR     8  13      ; ")\n"
0069    CAT      1   3   8
0070 => MOV      3   1
0071    KSTR     4  19      ; "\n   Rocks trees in use: \n"
0072    CAT      1   3   4
0073    GGET     3  20      ; "ipairs"
0074    TGETS    4   0  21  ; "rocks_trees"
0075    CALL     3   4   2
0076    JMP      6 => 0111
0077 => GGET     8  22      ; "type"
0078    MOV      9   7
0079    CALL     8   2   2
0080    ISNES    8  23      ; "string"
0081    JMP      8 => 0090
0082    MOV      8   1
0083    KSTR     9  24      ; "      "
0084    UGET    10   0      ; fs
0085    TGETS   10  10   8  ; "absolute_name"
0086    MOV     11   7
0087    CALL    10   2   2
0088    CAT      1   8  10
0089    JMP      8 => 0108
0090 => TGETS    8   7  25  ; "name"
0091    ISF          8
0092    JMP      9 => 0099
0093    KSTR     8  26      ; " (""
0094    TGETS    9   7  25  ; "name"
0095    KSTR    10  27      ; "")"
0096    CAT      8   8  10
0097    IST          8
0098    JMP      9 => 0100
0099 => KSTR     8  28      ; ""
0100 => MOV      9   1
0101    KSTR    10  24      ; "      "
0102    UGET    11   0      ; fs
0103    TGETS   11  11   8  ; "absolute_name"
0104    TGETS   12   7  29  ; "root"
0105    CALL    11   2   2
0106    MOV     12   8
0107    CAT      1   9  12
0108 => MOV      8   1
0109    KSTR     9   2      ; "\n"
0110    CAT      1   8   9
0111 => ITERC    6   3   3
0112    ITERL    6 => 0077
0113    RET1     1   2

-- BYTECODE -- cmd.lua:397-402
0001    UGET     0   0      ; util
0002    TGETS    0   0   0  ; "printout"
0003    UGET     1   1      ; program
0004    KSTR     2   1      ; " "
0005    UGET     3   2      ; cfg
0006    TGETS    3   3   2  ; "program_version"
0007    CAT      1   1   3
0008    CALL     0   1   2
0009    UGET     0   0      ; util
0010    TGETS    0   0   0  ; "printout"
0011    UGET     1   3      ; description
0012    CALL     0   1   2
0013    UGET     0   0      ; util
0014    TGETS    0   0   0  ; "printout"
0015    CALL     0   1   1
0016    GGET     0   3      ; "os"
0017    TGETS    0   0   4  ; "exit"
0018    UGET     1   4      ; cmd
0019    TGETS    1   1   5  ; "errorcodes"
0020    TGETS    1   1   6  ; "OK"
0021    CALL     0   1   2
0022    RET0     0   1

-- BYTECODE -- cmd.lua:354-441
0001    UGET     2   0      ; dir
0002    TGETS    2   2   0  ; "base_name"
0003    UGET     3   1      ; program
0004    CALL     2   2   2
0005    UGET     3   2      ; argparse
0006    MOV      4   2
0007    KSTR     5   1      ; "LuaRocks "
0008    UGET     6   3      ; cfg
0009    TGETS    6   6   2  ; "program_version"
0010    KSTR     7   3      ; ", the Lua package manager\n\n"
0011    UGET     8   1      ; program
0012    KSTR     9   4      ; " - "
0013    MOV     10   0
0014    CAT      5   5  10
0015    UGET     6   4      ; variables_help
0016    KSTR     7   5      ; "Run '"
0017    MOV      8   2
0018    KSTR     9   6      ; "' without any arguments to see the confi"~
0019    CAT      6   6   9
0020    CALL     3   2   4
0021    MOV      4   3
0022    TGETS    3   3   7  ; "help_max_width"
0023    KSHORT   5  80
0024    CALL     3   2   3
0025    MOV      4   3
0026    TGETS    3   3   8  ; "add_help_command"
0027    CALL     3   2   2
0028    MOV      4   3
0029    TGETS    3   3   9  ; "add_complete_command"
0030    TDUP     5  10
0031    KSTR     6  11      ; "Output a shell completion script.\n\nEna"~
0032    MOV      7   2
0033    KSTR     8  12      ; " completion bash)\n   or save the comple"~
0034    MOV      9   2
0035    KSTR    10  13      ; " completion bash > ~/.local/share/bash-c"~
0036    MOV     11   2
0037    KSTR    12  14      ; "\n\nEnabling completions for Zsh:\n\n   "~
0038    MOV     13   2
0039    KSTR    14  15      ; " completion zsh > ~/.zfunc/_"
0040    MOV     15   2
0041    KSTR    16  16      ; "\n\nEnabling completion for Fish:\n\n   "~
0042    MOV     17   2
0043    KSTR    18  17      ; " completion fish | source\n   or save th"~
0044    MOV     19   2
0045    KSTR    20  18      ; " completion fish > ~/.config/fish/comple"~
0046    MOV     21   2
0047    KSTR    22  19      ; ".fish\n"
0048    CAT      6   6  22
0049    TSETS    6   5  20  ; "description"
0050    CALL     3   2   3
0051    MOV      4   3
0052    TGETS    3   3  21  ; "command_target"
0053    KSTR     5  22      ; "command"
0054    CALL     3   2   3
0055    MOV      4   3
0056    TGETS    3   3  23  ; "require_command"
0057    KPRI     5   1
0058    CALL     3   2   3
0059    MOV      5   3
0060    TGETS    4   3  24  ; "flag"
0061    KSTR     6  25      ; "--version"
0062    KSTR     7  26      ; "Show version info and exit."
0063    CALL     4   2   4
0064    MOV      5   4
0065    TGETS    4   4  27  ; "action"
0066    FNEW     6  28      ; cmd.lua:397
0067    CALL     4   1   3
0068    MOV      5   3
0069    TGETS    4   3  24  ; "flag"
0070    KSTR     6  29      ; "--dev"
0071    KSTR     7  30      ; "Enable the sub-repositories in rocks ser"~
0072    KSTR     8  31      ; "rockspecs of in-development versions."
0073    CAT      7   7   8
0074    CALL     4   1   4
0075    MOV      5   3
0076    TGETS    4   3  32  ; "option"
0077    KSTR     6  33      ; "--server"
0078    KSTR     7  34      ; "Fetch rocks/rockspecs from this server "
0079    KSTR     8  35      ; "(takes priority over config file)."
0080    CAT      7   7   8
0081    CALL     4   2   4
0082    MOV      5   4
0083    TGETS    4   4  36  ; "hidden_name"
0084    KSTR     6  37      ; "--from"
0085    CALL     4   1   3
0086    MOV      5   3
0087    TGETS    4   3  32  ; "option"
0088    KSTR     6  38      ; "--only-server"
0089    KSTR     7  39      ; "Fetch rocks/rockspecs from this server o"~
0090    KSTR     8  40      ; "(overrides any entries in the config fil"~
0091    CAT      7   7   8
0092    CALL     4   2   4
0093    MOV      5   4
0094    TGETS    4   4  41  ; "argname"
0095    KSTR     6  42      ; "<server>"
0096    CALL     4   2   3
0097    MOV      5   4
0098    TGETS    4   4  36  ; "hidden_name"
0099    KSTR     6  43      ; "--only-from"
0100    CALL     4   1   3
0101    MOV      5   3
0102    TGETS    4   3  32  ; "option"
0103    KSTR     6  44      ; "--only-sources"
0104    KSTR     7  45      ; "Restrict downloads to paths matching the"~
0105    CALL     4   2   4
0106    MOV      5   4
0107    TGETS    4   4  41  ; "argname"
0108    KSTR     6  46      ; "<url>"
0109    CALL     4   2   3
0110    MOV      5   4
0111    TGETS    4   4  36  ; "hidden_name"
0112    KSTR     6  47      ; "--only-sources-from"
0113    CALL     4   1   3
0114    MOV      5   3
0115    TGETS    4   3  32  ; "option"
0116    KSTR     6  48      ; "--namespace"
0117    KSTR     7  49      ; "Specify the rocks server namespace to us"~
0118    CALL     4   2   4
0119    MOV      5   4
0120    TGETS    4   4  50  ; "convert"
0121    GGET     6  51      ; "string"
0122    TGETS    6   6  52  ; "lower"
0123    CALL     4   1   3
0124    MOV      5   3
0125    TGETS    4   3  32  ; "option"
0126    KSTR     6  53      ; "--lua-dir"
0127    KSTR     7  54      ; "Which Lua installation to use."
0128    CALL     4   2   4
0129    MOV      5   4
0130    TGETS    4   4  41  ; "argname"
0131    KSTR     6  55      ; "<prefix>"
0132    CALL     4   1   3
0133    MOV      5   3
0134    TGETS    4   3  32  ; "option"
0135    KSTR     6  56      ; "--lua-version"
0136    KSTR     7  57      ; "Which Lua version to use."
0137    CALL     4   2   4
0138    MOV      5   4
0139    TGETS    4   4  41  ; "argname"
0140    KSTR     6  58      ; "<ver>"
0141    CALL     4   1   3
0142    MOV      5   3
0143    TGETS    4   3  32  ; "option"
0144    KSTR     6  59      ; "--tree"
0145    KSTR     7  60      ; "Which tree to operate on."
0146    CALL     4   2   4
0147    MOV      5   4
0148    TGETS    4   4  36  ; "hidden_name"
0149    KSTR     6  61      ; "--to"
0150    CALL     4   1   3
0151    MOV      5   3
0152    TGETS    4   3  24  ; "flag"
0153    KSTR     6  62      ; "--local"
0154    KSTR     7  63      ; "Use the tree in the user's home director"~
0155    KSTR     8  64      ; "To enable it, see '"
0156    UGET     9   1      ; program
0157    KSTR    10  65      ; " help path'."
0158    CAT      7   7  10
0159    CALL     4   1   4
0160    MOV      5   3
0161    TGETS    4   3  24  ; "flag"
0162    KSTR     6  66      ; "--global"
0163    KSTR     7  67      ; "Use the system tree when `local_by_defau"~
0164    CALL     4   1   4
0165    MOV      5   3
0166    TGETS    4   3  24  ; "flag"
0167    KSTR     6  68      ; "--verbose"
0168    KSTR     7  69      ; "Display verbose output of commands execu"~
0169    CALL     4   1   4
0170    MOV      5   3
0171    TGETS    4   3  32  ; "option"
0172    KSTR     6  70      ; "--timeout"
0173    KSTR     7  71      ; "Timeout on network operations, in second"~
0174    KSTR     8  72      ; "0 means no timeout (wait forever). Defau"~
0175    GGET     9  73      ; "tostring"
0176    UGET    10   3      ; cfg
0177    TGETS   10  10  74  ; "connection_timeout"
0178    CALL     9   2   2
0179    KSTR    10  75      ; "."
0180    CAT      7   7  10
0181    CALL     4   2   4
0182    MOV      5   4
0183    TGETS    4   4  41  ; "argname"
0184    KSTR     6  76      ; "<seconds>"
0185    CALL     4   2   3
0186    MOV      5   4
0187    TGETS    4   4  50  ; "convert"
0188    GGET     6  77      ; "tonumber"
0189    CALL     4   1   3
0190    MOV      5   3
0191    TGETS    4   3  32  ; "option"
0192    KSTR     6  78      ; "--project-tree"
0193    CALL     4   2   3
0194    MOV      5   4
0195    TGETS    4   4  79  ; "hidden"
0196    KPRI     6   2
0197    CALL     4   1   3
0198    UGET     4   5      ; util
0199    TGETS    4   4  80  ; "sortedpairs"
0200    MOV      5   1
0201    CALL     4   4   2
0202    JMP      7 => 0206
0203 => TGETS    9   8  81  ; "add_to_parser"
0204    MOV     10   3
0205    CALL     9   1   2
0206 => ITERC    7   3   3
0207    ITERL    7 => 0203
0208    UCLO     0 => 0209
0209 => RET1     3   2

-- BYTECODE -- cmd.lua:473-479
0001    MOV      2   0
0002    TGETS    1   0   0  ; "command"
0003    UGET     3   0      ; name
0004    UGET     4   1      ; mod
0005    TGETS    4   4   1  ; "help"
0006    UGET     5   2      ; util
0007    TGETS    5   5   2  ; "see_also"
0008    CALL     5   0   1
0009    CALLM    1   2   3
0010    MOV      2   1
0011    TGETS    1   1   3  ; "summary"
0012    UGET     3   1      ; mod
0013    TGETS    3   3   4  ; "help_summary"
0014    CALL     1   2   3
0015    MOV      2   1
0016    TGETS    1   1   5  ; "handle_options"
0017    KPRI     3   1
0018    CALL     1   2   3
0019    MOV      2   1
0020    TGETS    1   1   6  ; "argument"
0021    KSTR     3   7      ; "input"
0022    CALL     1   2   3
0023    MOV      2   1
0024    TGETS    1   1   8  ; "args"
0025    KSTR     3   9      ; "*"
0026    CALL     1   1   3
0027    RET0     0   1

-- BYTECODE -- cmd.lua:481-483
0001    UGET     1   0      ; original_command
0002    MOV      2   0
0003    UGET     3   1      ; unpack
0004    TGETS    4   0   0  ; "input"
0005    CALL     3   0   2
0006    CALLMT   1   1

-- BYTECODE -- cmd.lua:494-518
0001    TNEW     0   3
0002    VARG     1   0   0
0003    TSETM    1   0      ; 1
0004    TNEW     1   0
0005    LEN      2   0
0006    KSHORT   3   1
0007    LEN      4   0
0008    KSHORT   5   1
0009    FORI     3 => 0016
0010 => TGETV    7   0   6
0011    ISNES    7   0      ; "--"
0012    JMP      7 => 0015
0013    SUBVN    2   6   1  ; 1
0014    JMP      3 => 0016
0015 => FORL     3 => 0010
0016 => MOV      3   2
0017    KSHORT   4   1
0018    KSHORT   5  -1
0019    FORI     3 => 0046
0020 => TGETV    7   0   6
0021    MOV      9   7
0022    TGETS    8   7   1  ; "match"
0023    KSTR    10   2      ; "^[^-][^=]*="
0024    CALL     8   2   3
0025    ISF          8
0026    JMP      9 => 0045
0027    MOV      9   7
0028    TGETS    8   7   1  ; "match"
0029    KSTR    10   3      ; "^([A-Z_][A-Z0-9_]*)=(.*)"
0030    CALL     8   3   3
0031    ISF          9
0032    JMP     10 => 0040
0033    TSETV    9   1   8
0034    GGET    10   4      ; "table"
0035    TGETS   10  10   5  ; "remove"
0036    MOV     11   0
0037    MOV     12   6
0038    CALL    10   1   3
0039    JMP     10 => 0045
0040 => UGET    10   0      ; die
0041    KSTR    11   6      ; "Invalid assignment: "
0042    MOV     12   7
0043    CAT     11  11  12
0044    CALL    10   1   2
0045 => FORL     3 => 0020
0046 => MOV      3   0
0047    MOV      4   1
0048    RET      3   3

-- BYTECODE -- cmd.lua:620-622
0001    UGET     0   0      ; cmd_mod
0002    TGETS    0   0   0  ; "command"
0003    UGET     1   1      ; args
0004    CALLT    0   2

-- BYTECODE -- cmd.lua:451-630
0001    UGET     3   0      ; check_popen
0002    CALL     3   1   1
0003    UGET     3   1      ; cfg
0004    TGETS    3   3   0  ; "init"
0005    CALL     3   1   1
0006    UGET     3   2      ; fs
0007    TGETS    3   3   0  ; "init"
0008    CALL     3   1   1
0009    GGET     3   1      ; "ipairs"
0010    UGET     4   2      ; fs
0011    TGETS    4   4   2  ; "modules"
0012    MOV      5   2
0013    CALL     4   0   2
0014    CALLM    3   4   0
0015    JMP      6 => 0024
0016 => TGETV    8   1   7
0017    IST          8
0018    JMP      8 => 0024
0019    MOV      8   2
0020    KSTR     9   3      ; "."
0021    MOV     10   7
0022    CAT      8   8  10
0023    TSETV    8   1   7
0024 => ITERC    6   3   3
0025    ITERL    6 => 0016
0026    TNEW     3   0
0027    GGET     4   4      ; "pairs"
0028    MOV      5   1
0029    CALL     4   4   2
0030    ISNEXT   7 => 0070
0031 => GGET     9   5      ; "pcall"
0032    GGET    10   6      ; "require"
0033    MOV     11   8
0034    CALL     9   3   3
0035    ISF          9
0036    JMP     11 => 0062
0037    GGET    11   7      ; "type"
0038    MOV     12  10
0039    CALL    11   2   2
0040    ISNES   11   8      ; "table"
0041    JMP     11 => 0062
0042    TGETS   11  10   9  ; "command"
0043    ISF         11
0044    JMP     12 => 0054
0045    TGETS   12  10  10  ; "add_to_parser"
0046    IST         12
0047    JMP     12 => 0052
0048    FNEW    12  11      ; cmd.lua:473
0049    TSETS   12  10  10  ; "add_to_parser"
0050    FNEW    12  12      ; cmd.lua:481
0051    TSETS   12  10   9  ; "command"
0052 => TSETV   10   3   7
0053    JMP     12 => 0061
0054 => UGET    12   3      ; util
0055    TGETS   12  12  13  ; "warning"
0056    KSTR    13  14      ; "command module "
0057    MOV     14   8
0058    KSTR    15  15      ; " does not implement command(), skipping"
0059    CAT     13  13  15
0060    CALL    12   1   2
0061 => UCLO    11 => 0068
0062 => UGET    11   3      ; util
0063    TGETS   11  11  13  ; "warning"
0064    KSTR    12  16      ; "failed to load command module "
0065    MOV     13   8
0066    CAT     12  12  13
0067    CALL    11   1   2
0068 => UCLO     9 => 0069
0069 => UCLO     7 => 0070
0070 => ITERN    7   3   3
0071    ITERL    7 => 0031
0072    FNEW     4  17      ; cmd.lua:494
0073    MOV      5   4
0074    VARG     6   0   3
0075    CALLM    5   3   0
0076    UGET     7   6      ; get_parser
0077    MOV      8   0
0078    MOV      9   3
0079    CALL     7   2   3
0080    MOV      9   7
0081    TGETS    8   7  18  ; "parse"
0082    MOV     10   5
0083    CALL     8   2   3
0084    MOV      5   8
0085    TGETS    8   5  19  ; "nodeps"
0086    ISF          8
0087    JMP      9 => 0090
0088    KSTR     8  21      ; "none"
0089    TSETS    8   5  20  ; "deps_mode"
0090 => TGETS    8   5  22  ; "timeout"
0091    ISF          8
0092    JMP      9 => 0096
0093    UGET     8   1      ; cfg
0094    TGETS    9   5  22  ; "timeout"
0095    TSETS    9   8  23  ; "connection_timeout"
0096 => TGETS    8   5   9  ; "command"
0097    ISNES    8  24      ; "config"
0098    JMP      8 => 0116
0099    TGETS    8   5  25  ; "key"
0100    ISNES    8  26      ; "lua_version"
0101    JMP      8 => 0108
0102    TGETS    8   5  27  ; "value"
0103    ISF          8
0104    JMP      9 => 0108
0105    TGETS    8   5  27  ; "value"
0106    TSETS    8   5  26  ; "lua_version"
0107    JMP      8 => 0116
0108 => TGETS    8   5  25  ; "key"
0109    ISNES    8  28      ; "lua_dir"
0110    JMP      8 => 0116
0111    TGETS    8   5  27  ; "value"
0112    ISF          8
0113    JMP      9 => 0116
0114    TGETS    8   5  27  ; "value"
0115    TSETS    8   5  28  ; "lua_dir"
0116 => UGET     8   7      ; init_config
0117    MOV      9   5
0118    CALL     8   3   2
0119    ISF          9
0120    JMP     10 => 0124
0121    UGET    10   5      ; die
0122    MOV     11   9
0123    CALL    10   1   2
0124 => UGET    10   2      ; fs
0125    TGETS   10  10   0  ; "init"
0126    CALL    10   1   1
0127    KPRI    10   0
0128    IST          8
0129    JMP     11 => 0154
0130    UGET    11   1      ; cfg
0131    TGETS   11  11  29  ; "variables"
0132    TGETS   11  11  30  ; "LUA_DIR"
0133    ISF         11
0134    JMP     12 => 0147
0135    UGET    11   3      ; util
0136    TGETS   11  11  31  ; "find_lua"
0137    UGET    12   1      ; cfg
0138    TGETS   12  12  29  ; "variables"
0139    TGETS   12  12  30  ; "LUA_DIR"
0140    UGET    13   1      ; cfg
0141    TGETS   13  13  26  ; "lua_version"
0142    TGETS   14   5  32  ; "verbose"
0143    CALL    11   3   4
0144    MOV     10  12
0145    MOV      8  11
0146    JMP     11 => 0154
0147 => UGET    11   8      ; search_lua_in_path
0148    UGET    12   1      ; cfg
0149    TGETS   12  12  26  ; "lua_version"
0150    TGETS   13   5  32  ; "verbose"
0151    CALL    11   3   3
0152    MOV     10  12
0153    MOV      8  11
0154 => IST          8
0155    JMP     11 => 0173
0156    TGETS   11   5   9  ; "command"
0157    ISEQS   11  24      ; "config"
0158    JMP     11 => 0173
0159    TGETS   11   5   9  ; "command"
0160    ISEQS   11  33      ; "help"
0161    JMP     11 => 0173
0162    UGET    11   3      ; util
0163    TGETS   11  11  13  ; "warning"
0164    MOV     12  10
0165    KSTR    13  34      ; "\nModules may not install with the corre"~
0166    KSTR    14  35      ; "You may want to specify the path prefix "~
0167    KSTR    15  36      ; "of Lua "
0168    UGET    16   1      ; cfg
0169    TGETS   16  16  26  ; "lua_version"
0170    KSTR    17  37      ; " using --lua-dir"
0171    CAT     12  12  17
0172    CALL    11   1   2
0173 => UGET    11   1      ; cfg
0174    TSETS    8  11  38  ; "lua_found"
0175    UGET    11   1      ; cfg
0176    TGETS   11  11  39  ; "project_dir"
0177    ISF         11
0178    JMP     12 => 0186
0179    UGET    11   1      ; cfg
0180    UGET    12   2      ; fs
0181    TGETS   12  12  40  ; "absolute_name"
0182    UGET    13   1      ; cfg
0183    TGETS   13  13  39  ; "project_dir"
0184    CALL    12   2   2
0185    TSETS   12  11  39  ; "project_dir"
0186 => TGETS   11   5  32  ; "verbose"
0187    ISF         11
0188    JMP     12 => 0195
0189    UGET    11   1      ; cfg
0190    KPRI    12   2
0191    TSETS   12  11  32  ; "verbose"
0192    UGET    11   2      ; fs
0193    TGETS   11  11  32  ; "verbose"
0194    CALL    11   1   1
0195 => UGET    11   2      ; fs
0196    TGETS   11  11  41  ; "current_dir"
0197    CALL    11   2   1
0198    ISF         11
0199    JMP     11 => 0205
0200    UGET    11   2      ; fs
0201    TGETS   11  11  41  ; "current_dir"
0202    CALL    11   2   1
0203    ISNES   11  42      ; ""
0204    JMP     11 => 0208
0205 => UGET    11   5      ; die
0206    KSTR    12  43      ; "Current directory does not exist. Please"~
0207    CALL    11   1   2
0208 => UGET    11   9      ; process_tree_args
0209    MOV     12   5
0210    UGET    13   1      ; cfg
0211    TGETS   13  13  39  ; "project_dir"
0212    CALL    11   3   3
0213    IST         11
0214    JMP     13 => 0218
0215    UGET    13   5      ; die
0216    MOV     14  12
0217    CALL    13   1   2
0218 => UGET    13  10      ; process_server_args
0219    MOV     14   5
0220    CALL    13   3   2
0221    MOV     12  14
0222    MOV     11  13
0223    IST         11
0224    JMP     13 => 0228
0225    UGET    13   5      ; die
0226    MOV     14  12
0227    CALL    13   1   2
0228 => TGETS   13   5  44  ; "only_sources"
0229    ISF         13
0230    JMP     14 => 0234
0231    UGET    13   1      ; cfg
0232    TGETS   14   5  44  ; "only_sources"
0233    TSETS   14  13  45  ; "only_sources_from"
0234 => GGET    13   4      ; "pairs"
0235    MOV     14   6
0236    CALL    13   4   2
0237    ISNEXT  16 => 0241
0238 => UGET    18   1      ; cfg
0239    TGETS   18  18  29  ; "variables"
0240    TSETV   17  18  16
0241 => ITERN   16   3   3
0242    ITERL   16 => 0238
0243    UGET    13   1      ; cfg
0244    TGETS   13  13  46  ; "home_tree"
0245    IST         13
0246    JMP     13 => 0256
0247    UGET    13   1      ; cfg
0248    UGET    14  11      ; dir
0249    TGETS   14  14  48  ; "path"
0250    UGET    15   2      ; fs
0251    TGETS   15  15  49  ; "system_cache_dir"
0252    CALL    15   2   1
0253    KSTR    16  50      ; "luarocks"
0254    CALL    14   2   3
0255    TSETS   14  13  47  ; "local_cache"
0256 => TGETS   13   5  51  ; "no_manifest"
0257    ISF         13
0258    JMP     14 => 0262
0259    UGET    13   1      ; cfg
0260    KPRI    14   2
0261    TSETS   14  13  51  ; "no_manifest"
0262 => TGETS   13   5   9  ; "command"
0263    IST         13
0264    JMP     13 => 0291
0265    MOV     14   7
0266    TGETS   13   7  52  ; "epilog"
0267    UGET    15  12      ; variables_help
0268    UGET    16  13      ; get_config_text
0269    UGET    17   1      ; cfg
0270    CALL    16   2   2
0271    CAT     15  15  16
0272    CALL    13   1   3
0273    UGET    13   3      ; util
0274    TGETS   13  13  53  ; "printout"
0275    CALL    13   1   1
0276    UGET    13   3      ; util
0277    TGETS   13  13  53  ; "printout"
0278    MOV     15   7
0279    TGETS   14   7  54  ; "get_help"
0280    CALL    14   0   2
0281    CALLM   13   1   0
0282    UGET    13   3      ; util
0283    TGETS   13  13  53  ; "printout"
0284    CALL    13   1   1
0285    GGET    13  55      ; "os"
0286    TGETS   13  13  56  ; "exit"
0287    UGET    14  14      ; cmd
0288    TGETS   14  14  57  ; "errorcodes"
0289    TGETS   14  14  58  ; "OK"
0290    CALL    13   1   2
0291 => TGETS   13   5   9  ; "command"
0292    TGETV   13   3  13
0293    GGET    14  59      ; "xpcall"
0294    FNEW    15  60      ; cmd.lua:620
0295    UGET    16  15      ; error_handler
0296    CALL    14   5   3
0297    IST         14
0298    JMP     18 => 0306
0299    UGET    18   5      ; die
0300    MOV     19  15
0301    UGET    20  14      ; cmd
0302    TGETS   20  20  57  ; "errorcodes"
0303    TGETS   20  20  61  ; "CRASH"
0304    CALL    18   1   3
0305    JMP     18 => 0312
0306 => IST         15
0307    JMP     18 => 0312
0308    UGET    18   5      ; die
0309    MOV     19  16
0310    MOV     20  17
0311    CALL    18   1   3
0312 => UGET    18   3      ; util
0313    TGETS   18  18  62  ; "run_scheduled_functions"
0314    CALL    18   1   1
0315    UCLO     0 => 0316
0316 => RET0     0   1

-- BYTECODE -- cmd.lua:0-633
0001    TNEW     0   0
0002    GGET     1   0      ; "require"
0003    KSTR     2   1      ; "luarocks.manif"
0004    CALL     1   2   2
0005    GGET     2   0      ; "require"
0006    KSTR     3   2      ; "luarocks.util"
0007    CALL     2   2   2
0008    GGET     3   0      ; "require"
0009    KSTR     4   3      ; "luarocks.path"
0010    CALL     3   2   2
0011    GGET     4   0      ; "require"
0012    KSTR     5   4      ; "luarocks.core.cfg"
0013    CALL     4   2   2
0014    GGET     5   0      ; "require"
0015    KSTR     6   5      ; "luarocks.dir"
0016    CALL     5   2   2
0017    GGET     6   0      ; "require"
0018    KSTR     7   6      ; "luarocks.fun"
0019    CALL     6   2   2
0020    GGET     7   0      ; "require"
0021    KSTR     8   7      ; "luarocks.fs"
0022    CALL     7   2   2
0023    GGET     8   0      ; "require"
0024    KSTR     9   8      ; "luarocks.argparse"
0025    CALL     8   2   2
0026    GGET     9   9      ; "table"
0027    TGETS    9   9  10  ; "unpack"
0028    IST          9
0029    JMP     10 => 0031
0030    GGET     9  10      ; "unpack"
0031 => GGET    10  11      ; "pcall"
0032    GGET    11   0      ; "require"
0033    KSTR    12  12      ; "luarocks.core.hardcoded"
0034    CALL    10   3   3
0035    IST         10
0036    JMP     12 => 0038
0037    TNEW    11   0
0038 => TGETS   12   2  13  ; "this_program"
0039    KSTR    13  14      ; "luarocks"
0040    CALL    12   2   2
0041    TDUP    13  16
0042    TSETS   13   0  15  ; "errorcodes"
0043    FNEW    13  17      ; cmd.lua:31
0044    KPRI    14   0
0045    FNEW    15  18      ; cmd.lua:46
0046    FNEW    16  19      ; cmd.lua:52
0047    FNEW    14  20      ; cmd.lua:64
0048    UCLO    15 => 0049
0049 => FNEW    15  21      ; cmd.lua:122
0050    FNEW    16  22      ; cmd.lua:147
0051    FNEW    17  23      ; cmd.lua:162
0052    FNEW    18  24      ; cmd.lua:175
0053    KNIL    19  20
0054    FNEW    21  25      ; cmd.lua:204
0055    FNEW    22  26      ; cmd.lua:221
0056    FNEW    23  27      ; cmd.lua:250
0057    FNEW    24  28      ; cmd.lua:258
0058    FNEW    20  29      ; cmd.lua:284
0059    UCLO    21 => 0060
0060 => FNEW    19  30      ; cmd.lua:301
0061    UCLO    20 => 0062
0062 => KSTR    20  31      ; "Variables:\n   Variables from the "varia"~
0063    FNEW    21  32      ; cmd.lua:320
0064    FNEW    22  33      ; cmd.lua:324
0065    FNEW    23  34      ; cmd.lua:354
0066    FNEW    24  36      ; cmd.lua:451
0067    TSETS   24   0  35  ; "run_command"
0068    UCLO     0 => 0069
0069 => RET1     0   2

