
main <./frontend/ui/wikipedia.lua:0,0> (228 instructions, 912 bytes at 0x7ff95cc068c0)
0+ params, 34 slots, 0 upvalues, 33 locals, 154 constants, 16 functions
	1	[1]	GETGLOBAL	0 -1	; require
	2	[1]	LOADK    	1 -2	; "json"
	3	[1]	CALL     	0 2 2
	4	[2]	GETGLOBAL	1 -1	; require
	5	[2]	LOADK    	2 -3	; "ui/renderimage"
	6	[2]	CALL     	1 2 2
	7	[3]	GETGLOBAL	2 -1	; require
	8	[3]	LOADK    	3 -4	; "device"
	9	[3]	CALL     	2 2 2
	10	[3]	GETTABLE 	2 2 -5	; "screen"
	11	[4]	GETGLOBAL	3 -1	; require
	12	[4]	LOADK    	4 -6	; "ffi/util"
	13	[4]	CALL     	3 2 2
	14	[5]	GETGLOBAL	4 -1	; require
	15	[5]	LOADK    	5 -7	; "logger"
	16	[5]	CALL     	4 2 2
	17	[6]	GETGLOBAL	5 -1	; require
	18	[6]	LOADK    	6 -8	; "util"
	19	[6]	CALL     	5 2 2
	20	[7]	GETGLOBAL	6 -1	; require
	21	[7]	LOADK    	7 -9	; "gettext"
	22	[7]	CALL     	6 2 2
	23	[8]	GETTABLE 	7 3 -10	; "template"
	24	[21]	NEWTABLE 	8 0 10
	25	[22]	SETTABLE 	8 -11 -12	; "wiki_server" "https://%s.wikipedia.org"
	26	[23]	SETTABLE 	8 -13 -14	; "wiki_path" "/w/api.php"
	27	[24]	SETTABLE 	8 -15 -16	; "default_lang" "en"
	28	[27]	NEWTABLE 	9 0 9
	29	[28]	SETTABLE 	9 -18 -19	; "action" "query"
	30	[29]	SETTABLE 	9 -20 -21	; "generator" "search"
	31	[30]	SETTABLE 	9 -22 -23	; "gsrnamespace" "0"
	32	[32]	SETTABLE 	9 -24 -25	; "gsrlimit" 20
	33	[33]	SETTABLE 	9 -26 -27	; "exlimit" "max"
	34	[34]	SETTABLE 	9 -28 -29	; "prop" "extracts|info|pageimages"
	35	[35]	SETTABLE 	9 -30 -2	; "format" "json"
	36	[36]	SETTABLE 	9 -31 -32	; "explaintext" ""
	37	[37]	SETTABLE 	9 -33 -32	; "exintro" ""
	38	[41]	SETTABLE 	8 -17 9	; "wiki_search_params" -
	39	[43]	NEWTABLE 	9 0 5
	40	[44]	SETTABLE 	9 -18 -19	; "action" "query"
	41	[45]	SETTABLE 	9 -28 -35	; "prop" "extracts|pageimages"
	42	[46]	SETTABLE 	9 -30 -2	; "format" "json"
	43	[48]	SETTABLE 	9 -31 -32	; "explaintext" ""
	44	[49]	SETTABLE 	9 -36 -32	; "redirects" ""
	45	[51]	SETTABLE 	8 -34 9	; "wiki_full_params" -
	46	[53]	NEWTABLE 	9 0 5
	47	[54]	SETTABLE 	9 -18 -38	; "action" "parse"
	48	[55]	SETTABLE 	9 -30 -2	; "format" "json"
	49	[57]	SETTABLE 	9 -28 -39	; "prop" "text|sections|displaytitle|revid"
	50	[60]	SETTABLE 	9 -40 -32	; "disablelimitreport" ""
	51	[61]	SETTABLE 	9 -41 -32	; "disableeditsection" ""
	52	[62]	SETTABLE 	8 -37 9	; "wiki_phtml_params" -
	53	[65]	NEWTABLE 	9 0 7
	54	[66]	SETTABLE 	9 -18 -38	; "action" "parse"
	55	[67]	SETTABLE 	9 -30 -2	; "format" "json"
	56	[69]	SETTABLE 	9 -28 -43	; "prop" "text"
	57	[71]	SETTABLE 	9 -36 -32	; "redirects" ""
	58	[72]	SETTABLE 	9 -44 -32	; "disabletoc" ""
	59	[73]	SETTABLE 	9 -40 -32	; "disablelimitreport" ""
	60	[74]	SETTABLE 	9 -41 -32	; "disableeditsection" ""
	61	[75]	SETTABLE 	8 -42 9	; "wiki_images_params" -
	62	[83]	GETGLOBAL	9 -46	; G_reader_settings
	63	[83]	SELF     	9 9 -47	; "nilOrTrue"
	64	[83]	LOADK    	11 -48	; "wikipedia_prettify"
	65	[83]	CALL     	9 3 2
	66	[83]	SETTABLE 	8 -45 9	; "wiki_prettify" -
	67	[87]	SETTABLE 	8 -49 -50	; "trap_widget" nil
	68	[91]	SETTABLE 	8 -51 -52	; "dismissed_error_code" "Interrupted by user"
	69	[96]	CLOSURE  	9 0	; 0x7ff95cc072a0
	70	[94]	SETTABLE 	8 -53 9	; "getWikiServer" -
	71	[99]	MOVE     	9 7
	72	[99]	LOADK    	10 -54	; "KOReader/%1 (https://koreader.rocks/) %2"
	73	[100]	GETGLOBAL	11 -55	; lfs
	74	[100]	GETTABLE 	11 11 -56	; "attributes"
	75	[100]	LOADK    	12 -57	; "git-rev"
	76	[100]	LOADK    	13 -58	; "mode"
	77	[100]	CALL     	11 3 2
	78	[100]	EQ       	0 11 -59	; - "file"
	79	[100]	JMP      	9	; to 89
	80	[100]	GETGLOBAL	11 -60	; io
	81	[100]	GETTABLE 	11 11 -61	; "open"
	82	[100]	LOADK    	12 -57	; "git-rev"
	83	[100]	LOADK    	13 -62	; "r"
	84	[100]	CALL     	11 3 2
	85	[100]	SELF     	11 11 -63	; "read"
	86	[100]	CALL     	11 2 2
	87	[100]	TEST     	11 0 1
	88	[100]	JMP      	1	; to 90
	89	[100]	LOADK    	11 -64	; "devel"
	90	[101]	GETGLOBAL	12 -1	; require
	91	[101]	LOADK    	13 -65	; "socket.http"
	92	[101]	CALL     	12 2 2
	93	[101]	GETTABLE 	12 12 -66	; "USERAGENT"
	94	[101]	SELF     	12 12 -67	; "gsub"
	95	[101]	LOADK    	14 -68	; " "
	96	[101]	LOADK    	15 -69	; "/"
	97	[101]	CALL     	12 4 0
	98	[99]	CALL     	9 0 2
	99	[104]	LOADK    	10 -70	; "timeout"
	100	[105]	LOADK    	11 -71	; "maxtime reached"
	101	[122]	CLOSURE  	12 1	; 0x7ff95cc07ae0
	102	[122]	MOVE     	0 3
	103	[122]	MOVE     	0 11
	104	[195]	CLOSURE  	13 2	; 0x7ff95cc08660
	105	[195]	MOVE     	0 9
	106	[195]	MOVE     	0 12
	107	[195]	MOVE     	0 10
	108	[195]	MOVE     	0 11
	109	[195]	MOVE     	0 4
	110	[199]	CLOSURE  	14 3	; 0x7ff95cc08a10
	111	[197]	SETTABLE 	8 -72 14	; "setTrapWidget" -
	112	[203]	CLOSURE  	14 4	; 0x7ff95cc08ba0
	113	[201]	SETTABLE 	8 -73 14	; "resetTrapWidget" -
	114	[206]	LOADK    	14 -74	; 1
	115	[207]	LOADK    	15 -75	; 2
	116	[208]	LOADK    	16 -76	; 3
	117	[209]	LOADK    	17 -77	; 4
	118	[281]	CLOSURE  	18 5	; 0x7ff95cc092c0
	119	[281]	MOVE     	0 14
	120	[281]	MOVE     	0 15
	121	[281]	MOVE     	0 16
	122	[281]	MOVE     	0 17
	123	[281]	MOVE     	0 13
	124	[281]	MOVE     	0 0
	125	[281]	MOVE     	0 4
	126	[214]	SETTABLE 	8 -78 18	; "loadPage" -
	127	[301]	CLOSURE  	18 6	; 0x7ff95cc08fb0
	128	[301]	MOVE     	0 14
	129	[301]	MOVE     	0 2
	130	[284]	SETTABLE 	8 -79 18	; "searchAndGetIntros" -
	131	[328]	CLOSURE  	18 7	; 0x7ff95cc08010
	132	[328]	MOVE     	0 15
	133	[328]	MOVE     	0 2
	134	[304]	SETTABLE 	8 -80 18	; "getFullPage" -
	135	[339]	CLOSURE  	18 8	; 0x7ff95cc075a0
	136	[339]	MOVE     	0 16
	137	[331]	SETTABLE 	8 -81 18	; "getFullPageHtml" -
	138	[415]	CLOSURE  	18 9	; 0x7ff95cc0a1d0
	139	[415]	MOVE     	0 17
	140	[415]	MOVE     	0 4
	141	[415]	MOVE     	0 5
	142	[342]	SETTABLE 	8 -82 18	; "getFullPageImages" -
	143	[487]	CLOSURE  	18 10	; 0x7ff95cc0a740
	144	[487]	MOVE     	0 6
	145	[487]	MOVE     	0 4
	146	[487]	MOVE     	0 13
	147	[487]	MOVE     	0 1
	148	[582]	CLOSURE  	19 11	; 0x7ff95cc0ae10
	149	[582]	MOVE     	0 8
	150	[582]	MOVE     	0 4
	151	[582]	MOVE     	0 18
	152	[489]	SETTABLE 	8 -83 19	; "addImages" -
	153	[589]	LOADK    	19 -84	; "xE2x96x88"
	154	[590]	LOADK    	20 -85	; "xE2x96x89"
	155	[591]	LOADK    	21 -86	; "xC2xA0xE2x97xA4"
	156	[592]	LOADK    	22 -87	; "xE2x97x86"
	157	[593]	LOADK    	23 -88	; "xE2x9CxBF"
	158	[594]	LOADK    	24 -89	; "xE2x9Dx96"
	159	[621]	CLOSURE  	25 12	; 0x7ff95cc0be20
	160	[621]	MOVE     	0 19
	161	[621]	MOVE     	0 20
	162	[621]	MOVE     	0 21
	163	[621]	MOVE     	0 22
	164	[621]	MOVE     	0 23
	165	[621]	MOVE     	0 24
	166	[602]	SETTABLE 	8 -90 25	; "prettifyText" -
	167	[630]	LOADK    	25 -84	; "xE2x96x88"
	168	[631]	LOADK    	26 -85	; "xE2x96x89"
	169	[632]	LOADK    	27 -91	; "xE2x97xA4"
	170	[633]	LOADK    	28 -87	; "xE2x97x86"
	171	[634]	LOADK    	29 -88	; "xE2x9CxBF"
	172	[635]	LOADK    	30 -89	; "xE2x9Dx96"
	173	[642]	NEWTABLE 	31 0 13
	174	[643]	SETTABLE 	31 -92 -93	; "png" "image/png"
	175	[644]	SETTABLE 	31 -94 -95	; "jpg" "image/jpeg"
	176	[645]	SETTABLE 	31 -96 -95	; "jpeg" "image/jpeg"
	177	[646]	SETTABLE 	31 -97 -98	; "gif" "image/gif"
	178	[647]	SETTABLE 	31 -99 -100	; "svg" "image/svg+xml"
	179	[648]	SETTABLE 	31 -101 -102	; "html" "application/xhtml+xml"
	180	[649]	SETTABLE 	31 -103 -102	; "xhtml" "application/xhtml+xml"
	181	[650]	SETTABLE 	31 -104 -105	; "ncx" "application/x-dtbncx+xml"
	182	[651]	SETTABLE 	31 -106 -107	; "js" "text/javascript"
	183	[652]	SETTABLE 	31 -108 -109	; "css" "text/css"
	184	[653]	SETTABLE 	31 -110 -111	; "otf" "application/opentype"
	185	[654]	SETTABLE 	31 -112 -113	; "ttf" "application/truetype"
	186	[655]	SETTABLE 	31 -114 -115	; "woff" "application/font-woff"
	187	[663]	NEWTABLE 	32 0 17
	188	[664]	SETTABLE 	32 -116 -117	; "fa" "Persian"
	189	[665]	SETTABLE 	32 -118 -119	; "ar" "Arabic"
	190	[666]	SETTABLE 	32 -120 -121	; "he" "Hebrew"
	191	[667]	SETTABLE 	32 -122 -123	; "ur" "Urdu"
	192	[668]	SETTABLE 	32 -124 -125	; "azb" "South Azerbaijani"
	193	[669]	SETTABLE 	32 -126 -127	; "pnb" "Western Punjabi"
	194	[670]	SETTABLE 	32 -128 -129	; "ckb" "Sorani"
	195	[671]	SETTABLE 	32 -130 -131	; "arz" "Egyptian Arabic"
	196	[672]	SETTABLE 	32 -132 -133	; "yi" "Yiddish"
	197	[673]	SETTABLE 	32 -134 -135	; "sd" "Sindhi"
	198	[674]	SETTABLE 	32 -136 -137	; "mzn" "Mazandarani"
	199	[675]	SETTABLE 	32 -138 -139	; "ps" "Pashto"
	200	[676]	SETTABLE 	32 -140 -141	; "glk" "Gilaki"
	201	[677]	SETTABLE 	32 -142 -143	; "lrc" "Northern Luri"
	202	[678]	SETTABLE 	32 -144 -145	; "ug" "Uyghur"
	203	[679]	SETTABLE 	32 -146 -147	; "dv" "Divehi"
	204	[680]	SETTABLE 	32 -148 -149	; "arc" "Aramaic"
	205	[681]	SETTABLE 	32 -150 -151	; "ks" "Kashmiri"
	206	[689]	CLOSURE  	33 13	; 0x7ff95cc0d150
	207	[689]	MOVE     	0 32
	208	[684]	SETTABLE 	8 -152 33	; "isWikipediaLanguageRTL" -
	209	[1409]	CLOSURE  	33 14	; 0x7ff95cc0d370
	210	[1409]	MOVE     	0 6
	211	[1409]	MOVE     	0 3
	212	[1409]	MOVE     	0 5
	213	[1409]	MOVE     	0 4
	214	[1409]	MOVE     	0 31
	215	[1409]	MOVE     	0 7
	216	[1409]	MOVE     	0 25
	217	[1409]	MOVE     	0 26
	218	[1409]	MOVE     	0 27
	219	[1409]	MOVE     	0 28
	220	[1409]	MOVE     	0 29
	221	[1409]	MOVE     	0 30
	222	[1409]	MOVE     	0 13
	223	[692]	SETTABLE 	8 -153 33	; "createEpub" -
	224	[1435]	CLOSURE  	33 15	; 0x7ff95cc10a70
	225	[1435]	MOVE     	0 4
	226	[1414]	SETTABLE 	8 -154 33	; "createEpubWithUI" -
	227	[1437]	RETURN   	8 2
	228	[1437]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:94,96> (9 instructions, 36 bytes at 0x7ff95cc072a0)
2 params, 5 slots, 0 upvalues, 2 locals, 4 constants, 0 functions
	1	[95]	GETGLOBAL	2 -1	; string
	2	[95]	GETTABLE 	2 2 -2	; "format"
	3	[95]	GETTABLE 	3 0 -3	; "wiki_server"
	4	[95]	TESTSET  	4 1 1
	5	[95]	JMP      	1	; to 7
	6	[95]	GETTABLE 	4 0 -4	; "default_lang"
	7	[95]	TAILCALL 	2 3 0
	8	[95]	RETURN   	2 0
	9	[96]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:108,122> (19 instructions, 76 bytes at 0x7ff95cc07ae0)
2 params, 8 slots, 2 upvalues, 6 locals, 2 constants, 1 function
	1	[110]	GETUPVAL 	2 0	; ffiutil
	2	[110]	GETTABLE 	2 2 -1	; "gettime"
	3	[110]	CALL     	2 1 3
	4	[111]	DIV      	4 3 -2	; - 1000000
	5	[111]	ADD      	4 2 4
	6	[112]	TEST     	0 0 1
	7	[112]	JMP      	2	; to 10
	8	[112]	NEWTABLE 	5 0 0
	9	[112]	MOVE     	0 5
	10	[120]	CLOSURE  	5 0	; 0x7ff95cc07da0
	11	[120]	GETUPVAL 	0 0	; ffiutil
	12	[120]	MOVE     	0 4
	13	[120]	MOVE     	0 1
	14	[120]	GETUPVAL 	0 1	; MAXTIME_CODE
	15	[120]	MOVE     	0 0
	16	[121]	MOVE     	6 5
	17	[121]	MOVE     	7 0
	18	[121]	RETURN   	6 3
	19	[122]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:113,120> (23 instructions, 92 bytes at 0x7ff95cc07da0)
2 params, 7 slots, 5 upvalues, 4 locals, 5 constants, 0 functions
	1	[114]	GETUPVAL 	2 0	; ffiutil
	2	[114]	GETTABLE 	2 2 -1	; "gettime"
	3	[114]	CALL     	2 1 3
	4	[115]	DIV      	4 3 -2	; - 1000000
	5	[115]	ADD      	4 2 4
	6	[115]	GETUPVAL 	5 1	; starttime
	7	[115]	SUB      	4 4 5
	8	[115]	GETUPVAL 	5 2	; maxtime
	9	[115]	LT       	0 5 4
	10	[115]	JMP      	3	; to 14
	11	[116]	LOADNIL  	4 4
	12	[116]	GETUPVAL 	5 3	; MAXTIME_CODE
	13	[116]	RETURN   	4 3
	14	[118]	TEST     	0 0 0
	15	[118]	JMP      	5	; to 21
	16	[118]	GETGLOBAL	4 -3	; table
	17	[118]	GETTABLE 	4 4 -4	; "insert"
	18	[118]	GETUPVAL 	5 4	; t
	19	[118]	MOVE     	6 0
	20	[118]	CALL     	4 3 1
	21	[119]	LOADK    	4 -5	; 1
	22	[119]	RETURN   	4 2
	23	[120]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:125,195> (131 instructions, 524 bytes at 0x7ff95cc08660)
3 params, 18 slots, 5 upvalues, 15 locals, 36 constants, 0 functions
	1	[126]	GETGLOBAL	3 -1	; require
	2	[126]	LOADK    	4 -2	; "socket"
	3	[126]	CALL     	3 2 2
	4	[127]	GETGLOBAL	4 -1	; require
	5	[127]	LOADK    	5 -3	; "ltn12"
	6	[127]	CALL     	4 2 2
	7	[128]	GETGLOBAL	5 -1	; require
	8	[128]	LOADK    	6 -4	; "socket.http"
	9	[128]	CALL     	5 2 2
	10	[129]	GETGLOBAL	6 -1	; require
	11	[129]	LOADK    	7 -5	; "ssl.https"
	12	[129]	CALL     	6 2 2
	13	[131]	LOADNIL  	7 7
	14	[132]	SELF     	8 0 -6	; "sub"
	15	[132]	LOADK    	10 -7	; 1
	16	[132]	LOADK    	11 -8	; 7
	17	[132]	CALL     	8 4 2
	18	[132]	EQ       	0 8 -9	; - "http://"
	19	[132]	JMP      	2	; to 22
	20	[133]	MOVE     	7 5
	21	[133]	JMP      	11	; to 33
	22	[134]	SELF     	8 0 -6	; "sub"
	23	[134]	LOADK    	10 -7	; 1
	24	[134]	LOADK    	11 -10	; 8
	25	[134]	CALL     	8 4 2
	26	[134]	EQ       	0 8 -11	; - "https://"
	27	[134]	JMP      	2	; to 30
	28	[135]	MOVE     	7 6
	29	[135]	JMP      	3	; to 33
	30	[137]	LOADBOOL 	8 0 0
	31	[137]	LOADK    	9 -12	; "Unsupported protocol"
	32	[137]	RETURN   	8 3
	33	[139]	TEST     	1 0 1
	34	[139]	JMP      	1	; to 36
	35	[139]	LOADK    	1 -13	; 10
	36	[141]	MOVE     	8 1
	37	[141]	SETTABLE 	6 -14 1	; "TIMEOUT" -
	38	[141]	SETTABLE 	5 -14 8	; "TIMEOUT" -
	39	[143]	NEWTABLE 	8 0 0
	40	[144]	NEWTABLE 	9 0 0
	41	[145]	SETTABLE 	8 -15 0	; "url" -
	42	[146]	SETTABLE 	8 -16 -17	; "method" "GET"
	43	[147]	NEWTABLE 	10 0 1
	44	[148]	GETUPVAL 	11 0	; USER_AGENT
	45	[148]	SETTABLE 	10 -19 11	; "User-Agent" -
	46	[149]	SETTABLE 	8 -18 10	; "headers" -
	47	[162]	TEST     	2 0 0
	48	[162]	JMP      	6	; to 55
	49	[163]	GETUPVAL 	10 1	; sink_table_with_maxtime
	50	[163]	MOVE     	11 9
	51	[163]	MOVE     	12 2
	52	[163]	CALL     	10 3 2
	53	[163]	SETTABLE 	8 -20 10	; "sink" -
	54	[163]	JMP      	5	; to 60
	55	[165]	GETTABLE 	10 4 -20	; "sink"
	56	[165]	GETTABLE 	10 10 -21	; "table"
	57	[165]	MOVE     	11 9
	58	[165]	CALL     	10 2 2
	59	[165]	SETTABLE 	8 -20 10	; "sink" -
	60	[168]	GETTABLE 	10 3 -22	; "skip"
	61	[168]	LOADK    	11 -7	; 1
	62	[168]	GETTABLE 	12 7 -23	; "request"
	63	[168]	MOVE     	13 8
	64	[168]	CALL     	12 2 0
	65	[168]	CALL     	10 0 4
	66	[169]	GETGLOBAL	13 -21	; table
	67	[169]	GETTABLE 	13 13 -24	; "concat"
	68	[169]	MOVE     	14 9
	69	[169]	CALL     	13 2 2
	70	[175]	GETUPVAL 	14 2	; TIMEOUT_CODE
	71	[175]	EQ       	1 10 14
	72	[175]	JMP      	3	; to 76
	73	[175]	GETUPVAL 	14 3	; MAXTIME_CODE
	74	[175]	EQ       	0 10 14
	75	[175]	JMP      	8	; to 84
	76	[176]	GETUPVAL 	14 4	; logger
	77	[176]	GETTABLE 	14 14 -25	; "warn"
	78	[176]	LOADK    	15 -26	; "request interrupted:"
	79	[176]	MOVE     	16 10
	80	[176]	CALL     	14 3 1
	81	[177]	LOADBOOL 	14 0 0
	82	[177]	MOVE     	15 10
	83	[177]	RETURN   	14 3
	84	[179]	EQ       	0 11 -27	; - nil
	85	[179]	JMP      	9	; to 95
	86	[180]	GETUPVAL 	14 4	; logger
	87	[180]	GETTABLE 	14 14 -25	; "warn"
	88	[180]	LOADK    	15 -28	; "No HTTP headers:"
	89	[180]	MOVE     	16 10
	90	[180]	MOVE     	17 12
	91	[180]	CALL     	14 4 1
	92	[181]	LOADBOOL 	14 0 0
	93	[181]	LOADK    	15 -29	; "Network or remote server unavailable"
	94	[181]	RETURN   	14 3
	95	[183]	TEST     	10 0 0
	96	[183]	JMP      	8	; to 105
	97	[183]	GETGLOBAL	14 -30	; string
	98	[183]	GETTABLE 	14 14 -6	; "sub"
	99	[183]	MOVE     	15 10
	100	[183]	LOADK    	16 -7	; 1
	101	[183]	LOADK    	17 -7	; 1
	102	[183]	CALL     	14 4 2
	103	[183]	EQ       	1 14 -31	; - "2"
	104	[183]	JMP      	9	; to 114
	105	[184]	GETUPVAL 	14 4	; logger
	106	[184]	GETTABLE 	14 14 -25	; "warn"
	107	[184]	LOADK    	15 -32	; "HTTP status not okay:"
	108	[184]	MOVE     	16 10
	109	[184]	MOVE     	17 12
	110	[184]	CALL     	14 4 1
	111	[185]	LOADBOOL 	14 0 0
	112	[185]	LOADK    	15 -33	; "Remote server error or unavailable"
	113	[185]	RETURN   	14 3
	114	[187]	TEST     	11 0 0
	115	[187]	JMP      	12	; to 128
	116	[187]	GETTABLE 	14 11 -34	; "content-length"
	117	[187]	TEST     	14 0 0
	118	[187]	JMP      	9	; to 128
	119	[189]	GETGLOBAL	14 -35	; tonumber
	120	[189]	GETTABLE 	15 11 -34	; "content-length"
	121	[189]	CALL     	14 2 2
	122	[190]	LEN      	15 13
	123	[190]	EQ       	1 15 14
	124	[190]	JMP      	3	; to 128
	125	[191]	LOADBOOL 	15 0 0
	126	[191]	LOADK    	16 -36	; "Incomplete content received"
	127	[191]	RETURN   	15 3
	128	[194]	LOADBOOL 	14 1 0
	129	[194]	MOVE     	15 13
	130	[194]	RETURN   	14 3
	131	[195]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:197,199> (2 instructions, 8 bytes at 0x7ff95cc08a10)
2 params, 2 slots, 0 upvalues, 2 locals, 1 constant, 0 functions
	1	[198]	SETTABLE 	0 -1 1	; "trap_widget" -
	2	[199]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:201,203> (2 instructions, 8 bytes at 0x7ff95cc08ba0)
1 param, 2 slots, 0 upvalues, 1 local, 2 constants, 0 functions
	1	[202]	SETTABLE 	0 -1 -2	; "trap_widget" nil
	2	[203]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:214,281> (216 instructions, 864 bytes at 0x7ff95cc092c0)
5 params, 19 slots, 7 upvalues, 39 locals, 42 constants, 1 function
	1	[215]	GETGLOBAL	5 -1	; require
	2	[215]	LOADK    	6 -2	; "socket.url"
	3	[215]	CALL     	5 2 2
	4	[216]	LOADK    	6 -3	; ""
	5	[217]	GETTABLE 	7 5 -4	; "parse"
	6	[217]	SELF     	8 0 -5	; "getWikiServer"
	7	[217]	MOVE     	10 2
	8	[217]	CALL     	8 3 0
	9	[217]	CALL     	7 0 2
	10	[218]	GETTABLE 	8 0 -7	; "wiki_path"
	11	[218]	SETTABLE 	7 -6 8	; "path" -
	12	[219]	GETUPVAL 	8 0	; WIKIPEDIA_INTRO
	13	[219]	EQ       	0 3 8
	14	[219]	JMP      	30	; to 45
	15	[220]	GETTABLE 	8 0 -8	; "wiki_search_params"
	16	[220]	TEST     	4 0 0
	17	[220]	JMP      	3	; to 21
	18	[220]	LOADK    	9 -3	; ""
	19	[220]	TEST     	9 0 1
	20	[220]	JMP      	1	; to 22
	21	[220]	LOADNIL  	9 9
	22	[220]	SETTABLE 	8 -9 9	; "explaintext" -
	23	[221]	GETGLOBAL	8 -10	; pairs
	24	[221]	GETTABLE 	9 0 -8	; "wiki_search_params"
	25	[221]	CALL     	8 2 4
	26	[221]	JMP      	8	; to 35
	27	[222]	GETGLOBAL	13 -11	; string
	28	[222]	GETTABLE 	13 13 -12	; "format"
	29	[222]	LOADK    	14 -13	; "%s%s=%s&"
	30	[222]	MOVE     	15 6
	31	[222]	MOVE     	16 11
	32	[222]	MOVE     	17 12
	33	[222]	CALL     	13 5 2
	34	[222]	MOVE     	6 13
	35	[221]	TFORLOOP 	8 2
	36	[222]	JMP      	-10	; to 27
	37	[224]	MOVE     	8 6
	38	[224]	LOADK    	9 -15	; "gsrsearch="
	39	[224]	GETTABLE 	10 5 -16	; "escape"
	40	[224]	MOVE     	11 1
	41	[224]	CALL     	10 2 2
	42	[224]	CONCAT   	8 8 10
	43	[224]	SETTABLE 	7 -14 8	; "query" -
	44	[224]	JMP      	84	; to 129
	45	[225]	GETUPVAL 	8 1	; WIKIPEDIA_FULL
	46	[225]	EQ       	0 3 8
	47	[225]	JMP      	30	; to 78
	48	[226]	GETTABLE 	8 0 -17	; "wiki_full_params"
	49	[226]	TEST     	4 0 0
	50	[226]	JMP      	3	; to 54
	51	[226]	LOADK    	9 -3	; ""
	52	[226]	TEST     	9 0 1
	53	[226]	JMP      	1	; to 55
	54	[226]	LOADNIL  	9 9
	55	[226]	SETTABLE 	8 -9 9	; "explaintext" -
	56	[227]	GETGLOBAL	8 -10	; pairs
	57	[227]	GETTABLE 	9 0 -17	; "wiki_full_params"
	58	[227]	CALL     	8 2 4
	59	[227]	JMP      	8	; to 68
	60	[228]	GETGLOBAL	13 -11	; string
	61	[228]	GETTABLE 	13 13 -12	; "format"
	62	[228]	LOADK    	14 -13	; "%s%s=%s&"
	63	[228]	MOVE     	15 6
	64	[228]	MOVE     	16 11
	65	[228]	MOVE     	17 12
	66	[228]	CALL     	13 5 2
	67	[228]	MOVE     	6 13
	68	[227]	TFORLOOP 	8 2
	69	[228]	JMP      	-10	; to 60
	70	[230]	MOVE     	8 6
	71	[230]	LOADK    	9 -18	; "titles="
	72	[230]	GETTABLE 	10 5 -16	; "escape"
	73	[230]	MOVE     	11 1
	74	[230]	CALL     	10 2 2
	75	[230]	CONCAT   	8 8 10
	76	[230]	SETTABLE 	7 -14 8	; "query" -
	77	[230]	JMP      	51	; to 129
	78	[231]	GETUPVAL 	8 2	; WIKIPEDIA_PHTML
	79	[231]	EQ       	0 3 8
	80	[231]	JMP      	22	; to 103
	81	[232]	GETGLOBAL	8 -10	; pairs
	82	[232]	GETTABLE 	9 0 -19	; "wiki_phtml_params"
	83	[232]	CALL     	8 2 4
	84	[232]	JMP      	8	; to 93
	85	[233]	GETGLOBAL	13 -11	; string
	86	[233]	GETTABLE 	13 13 -12	; "format"
	87	[233]	LOADK    	14 -13	; "%s%s=%s&"
	88	[233]	MOVE     	15 6
	89	[233]	MOVE     	16 11
	90	[233]	MOVE     	17 12
	91	[233]	CALL     	13 5 2
	92	[233]	MOVE     	6 13
	93	[232]	TFORLOOP 	8 2
	94	[233]	JMP      	-10	; to 85
	95	[235]	MOVE     	8 6
	96	[235]	LOADK    	9 -20	; "page="
	97	[235]	GETTABLE 	10 5 -16	; "escape"
	98	[235]	MOVE     	11 1
	99	[235]	CALL     	10 2 2
	100	[235]	CONCAT   	8 8 10
	101	[235]	SETTABLE 	7 -14 8	; "query" -
	102	[235]	JMP      	26	; to 129
	103	[236]	GETUPVAL 	8 3	; WIKIPEDIA_IMAGES
	104	[236]	EQ       	0 3 8
	105	[236]	JMP      	22	; to 128
	106	[237]	GETGLOBAL	8 -10	; pairs
	107	[237]	GETTABLE 	9 0 -21	; "wiki_images_params"
	108	[237]	CALL     	8 2 4
	109	[237]	JMP      	8	; to 118
	110	[238]	GETGLOBAL	13 -11	; string
	111	[238]	GETTABLE 	13 13 -12	; "format"
	112	[238]	LOADK    	14 -13	; "%s%s=%s&"
	113	[238]	MOVE     	15 6
	114	[238]	MOVE     	16 11
	115	[238]	MOVE     	17 12
	116	[238]	CALL     	13 5 2
	117	[238]	MOVE     	6 13
	118	[237]	TFORLOOP 	8 2
	119	[238]	JMP      	-10	; to 110
	120	[240]	MOVE     	8 6
	121	[240]	LOADK    	9 -20	; "page="
	122	[240]	GETTABLE 	10 5 -16	; "escape"
	123	[240]	MOVE     	11 1
	124	[240]	CALL     	10 2 2
	125	[240]	CONCAT   	8 8 10
	126	[240]	SETTABLE 	7 -14 8	; "query" -
	127	[240]	JMP      	1	; to 129
	128	[242]	RETURN   	0 1
	129	[245]	GETTABLE 	8 5 -22	; "build"
	130	[245]	MOVE     	9 7
	131	[245]	CALL     	8 2 2
	132	[246]	LOADNIL  	9 11
	133	[247]	GETTABLE 	12 0 -23	; "trap_widget"
	134	[247]	TEST     	12 0 0
	135	[247]	JMP      	23	; to 159
	136	[248]	GETGLOBAL	12 -1	; require
	137	[248]	LOADK    	13 -24	; "ui/trapper"
	138	[248]	CALL     	12 2 2
	139	[249]	LOADK    	13 -25	; 30
	140	[249]	LOADK    	14 -26	; 60
	141	[251]	SELF     	15 12 -27	; "dismissableRunInSubprocess"
	142	[253]	CLOSURE  	17 0	; 0x7ff95cc09760
	143	[253]	GETUPVAL 	0 4	; getUrlContent
	144	[253]	MOVE     	0 8
	145	[253]	MOVE     	0 13
	146	[253]	MOVE     	0 14
	147	[253]	GETTABLE 	18 0 -23	; "trap_widget"
	148	[251]	CALL     	15 4 4
	149	[253]	MOVE     	11 17
	150	[253]	MOVE     	10 16
	151	[253]	MOVE     	9 15
	152	[254]	TEST     	9 0 1
	153	[254]	JMP      	3	; to 157
	154	[255]	GETGLOBAL	15 -28	; error
	155	[255]	GETTABLE 	16 0 -29	; "dismissed_error_code"
	156	[255]	CALL     	15 2 1
	157	[256]	CLOSE    	12
	158	[256]	JMP      	9	; to 168
	159	[261]	LOADK    	12 -30	; 20
	160	[261]	LOADK    	13 -26	; 60
	161	[262]	GETUPVAL 	14 4	; getUrlContent
	162	[262]	MOVE     	15 8
	163	[262]	MOVE     	16 12
	164	[262]	MOVE     	17 13
	165	[262]	CALL     	14 4 3
	166	[262]	MOVE     	11 15
	167	[262]	MOVE     	10 14
	168	[264]	TEST     	10 0 1
	169	[264]	JMP      	3	; to 173
	170	[265]	GETGLOBAL	12 -28	; error
	171	[265]	MOVE     	13 11
	172	[265]	CALL     	12 2 1
	173	[268]	EQ       	1 11 -3	; - ""
	174	[268]	JMP      	33	; to 208
	175	[268]	GETGLOBAL	12 -11	; string
	176	[268]	GETTABLE 	12 12 -31	; "sub"
	177	[268]	MOVE     	13 11
	178	[268]	LOADK    	14 -32	; 1
	179	[268]	LOADK    	15 -32	; 1
	180	[268]	CALL     	12 4 2
	181	[268]	EQ       	0 12 -33	; - "{"
	182	[268]	JMP      	25	; to 208
	183	[269]	GETGLOBAL	12 -34	; pcall
	184	[269]	GETUPVAL 	13 5	; JSON
	185	[269]	GETTABLE 	13 13 -35	; "decode"
	186	[269]	MOVE     	14 11
	187	[269]	CALL     	12 3 3
	188	[270]	TEST     	12 0 0
	189	[270]	JMP      	9	; to 199
	190	[270]	TEST     	13 0 0
	191	[270]	JMP      	7	; to 199
	192	[271]	GETUPVAL 	14 6	; logger
	193	[271]	GETTABLE 	14 14 -36	; "dbg"
	194	[271]	LOADK    	15 -37	; "wiki result json:"
	195	[271]	MOVE     	16 13
	196	[271]	CALL     	14 3 1
	197	[272]	RETURN   	13 2
	198	[272]	JMP      	17	; to 216
	199	[274]	GETUPVAL 	14 6	; logger
	200	[274]	GETTABLE 	14 14 -38	; "warn"
	201	[274]	LOADK    	15 -39	; "wiki result json decoding error:"
	202	[274]	MOVE     	16 13
	203	[274]	CALL     	14 3 1
	204	[275]	GETGLOBAL	14 -28	; error
	205	[275]	LOADK    	15 -40	; "Failed decoding JSON"
	206	[275]	CALL     	14 2 1
	207	[276]	JMP      	8	; to 216
	208	[278]	GETUPVAL 	12 6	; logger
	209	[278]	GETTABLE 	12 12 -38	; "warn"
	210	[278]	LOADK    	13 -41	; "wiki response is not json:"
	211	[278]	MOVE     	14 11
	212	[278]	CALL     	12 3 1
	213	[279]	GETGLOBAL	12 -28	; error
	214	[279]	LOADK    	13 -42	; "Response is not JSON"
	215	[279]	CALL     	12 2 1
	216	[281]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:251,253> (7 instructions, 28 bytes at 0x7ff95cc09760)
0 params, 4 slots, 4 upvalues, 0 locals, 0 constants, 0 functions
	1	[252]	GETUPVAL 	0 0	; getUrlContent
	2	[252]	GETUPVAL 	1 1	; built_url
	3	[252]	GETUPVAL 	2 2	; timeout
	4	[252]	GETUPVAL 	3 3	; maxtime
	5	[252]	TAILCALL 	0 4 0
	6	[252]	RETURN   	0 0
	7	[253]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:284,301> (38 instructions, 152 bytes at 0x7ff95cc08fb0)
3 params, 19 slots, 2 upvalues, 12 locals, 12 constants, 0 functions
	1	[285]	SELF     	3 0 -1	; "loadPage"
	2	[285]	MOVE     	5 1
	3	[285]	MOVE     	6 2
	4	[285]	GETUPVAL 	7 0	; WIKIPEDIA_INTRO
	5	[285]	LOADBOOL 	8 1 0
	6	[285]	CALL     	3 6 2
	7	[286]	TEST     	3 0 0
	8	[286]	JMP      	29	; to 38
	9	[287]	GETTABLE 	4 3 -2	; "query"
	10	[288]	TEST     	4 0 0
	11	[288]	JMP      	26	; to 38
	12	[289]	GETGLOBAL	5 -3	; G_reader_settings
	13	[289]	SELF     	5 5 -4	; "nilOrTrue"
	14	[289]	LOADK    	7 -5	; "wikipedia_show_image"
	15	[289]	CALL     	5 3 2
	16	[292]	GETUPVAL 	6 1	; Screen
	17	[292]	SELF     	6 6 -6	; "scaleBySize"
	18	[292]	LOADK    	8 -7	; 200
	19	[292]	CALL     	6 3 2
	20	[292]	DIV      	6 6 -8	; - 100
	21	[293]	TEST     	5 0 0
	22	[293]	JMP      	13	; to 36
	23	[294]	GETGLOBAL	7 -9	; pairs
	24	[294]	GETTABLE 	8 4 -10	; "pages"
	25	[294]	CALL     	7 2 4
	26	[294]	JMP      	7	; to 34
	27	[295]	SELF     	12 0 -11	; "addImages"
	28	[295]	MOVE     	14 11
	29	[295]	MOVE     	15 2
	30	[295]	LOADBOOL 	16 0 0
	31	[295]	MOVE     	17 6
	32	[295]	LOADK    	18 -12	; 8
	33	[295]	CALL     	12 7 1
	34	[294]	TFORLOOP 	7 2
	35	[295]	JMP      	-9	; to 27
	36	[298]	GETTABLE 	7 4 -10	; "pages"
	37	[298]	RETURN   	7 2
	38	[301]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:304,328> (57 instructions, 228 bytes at 0x7ff95cc08010)
3 params, 20 slots, 2 upvalues, 13 locals, 16 constants, 0 functions
	1	[305]	SELF     	3 0 -1	; "loadPage"
	2	[305]	MOVE     	5 1
	3	[305]	MOVE     	6 2
	4	[305]	GETUPVAL 	7 0	; WIKIPEDIA_FULL
	5	[305]	LOADBOOL 	8 1 0
	6	[305]	CALL     	3 6 2
	7	[306]	TEST     	3 0 0
	8	[306]	JMP      	48	; to 57
	9	[307]	GETTABLE 	4 3 -2	; "query"
	10	[308]	TEST     	4 0 0
	11	[308]	JMP      	45	; to 57
	12	[309]	GETGLOBAL	5 -3	; G_reader_settings
	13	[309]	SELF     	5 5 -4	; "nilOrTrue"
	14	[309]	LOADK    	7 -5	; "wikipedia_show_image"
	15	[309]	CALL     	5 3 2
	16	[310]	GETGLOBAL	6 -3	; G_reader_settings
	17	[310]	SELF     	6 6 -4	; "nilOrTrue"
	18	[310]	LOADK    	8 -6	; "wikipedia_show_more_images"
	19	[310]	CALL     	6 3 2
	20	[313]	GETUPVAL 	7 1	; Screen
	21	[313]	SELF     	7 7 -7	; "scaleBySize"
	22	[313]	LOADK    	9 -8	; 400
	23	[313]	CALL     	7 3 2
	24	[313]	DIV      	7 7 -9	; - 100
	25	[314]	GETTABLE 	8 0 -10	; "wiki_prettify"
	26	[314]	TEST     	8 0 1
	27	[314]	JMP      	2	; to 30
	28	[314]	TEST     	5 0 0
	29	[314]	JMP      	25	; to 55
	30	[315]	GETGLOBAL	8 -11	; pairs
	31	[315]	GETTABLE 	9 4 -12	; "pages"
	32	[315]	CALL     	8 2 4
	33	[315]	JMP      	19	; to 53
	34	[316]	GETTABLE 	13 0 -10	; "wiki_prettify"
	35	[316]	TEST     	13 0 0
	36	[316]	JMP      	7	; to 44
	37	[316]	GETTABLE 	13 12 -13	; "extract"
	38	[316]	TEST     	13 0 0
	39	[316]	JMP      	4	; to 44
	40	[318]	SELF     	13 0 -14	; "prettifyText"
	41	[318]	GETTABLE 	15 12 -13	; "extract"
	42	[318]	CALL     	13 3 2
	43	[318]	SETTABLE 	12 -13 13	; "extract" -
	44	[320]	TEST     	5 0 0
	45	[320]	JMP      	7	; to 53
	46	[321]	SELF     	13 0 -15	; "addImages"
	47	[321]	MOVE     	15 12
	48	[321]	MOVE     	16 2
	49	[321]	MOVE     	17 6
	50	[321]	MOVE     	18 7
	51	[321]	LOADK    	19 -16	; 4
	52	[321]	CALL     	13 7 1
	53	[315]	TFORLOOP 	8 2
	54	[322]	JMP      	-21	; to 34
	55	[325]	GETTABLE 	8 4 -12	; "pages"
	56	[325]	RETURN   	8 2
	57	[328]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:331,339> (25 instructions, 100 bytes at 0x7ff95cc075a0)
3 params, 9 slots, 1 upvalue, 4 locals, 4 constants, 0 functions
	1	[332]	SELF     	3 0 -1	; "loadPage"
	2	[332]	MOVE     	5 1
	3	[332]	MOVE     	6 2
	4	[332]	GETUPVAL 	7 0	; WIKIPEDIA_PHTML
	5	[332]	LOADBOOL 	8 1 0
	6	[332]	CALL     	3 6 2
	7	[333]	TEST     	3 0 0
	8	[333]	JMP      	5	; to 14
	9	[333]	GETTABLE 	4 3 -2	; "parse"
	10	[333]	TEST     	4 0 0
	11	[333]	JMP      	2	; to 14
	12	[334]	GETTABLE 	4 3 -2	; "parse"
	13	[334]	RETURN   	4 2
	14	[336]	GETTABLE 	4 3 -3	; "error"
	15	[336]	TEST     	4 0 0
	16	[336]	JMP      	8	; to 25
	17	[336]	GETTABLE 	4 3 -3	; "error"
	18	[336]	GETTABLE 	4 4 -4	; "info"
	19	[336]	TEST     	4 0 0
	20	[336]	JMP      	4	; to 25
	21	[337]	GETGLOBAL	4 -3	; error
	22	[337]	GETTABLE 	5 3 -3	; "error"
	23	[337]	GETTABLE 	5 5 -4	; "info"
	24	[337]	CALL     	4 2 1
	25	[339]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:342,415> (165 instructions, 660 bytes at 0x7ff95cc0a1d0)
3 params, 28 slots, 3 upvalues, 29 locals, 43 constants, 0 functions
	1	[343]	NEWTABLE 	3 0 0
	2	[344]	SELF     	4 0 -1	; "loadPage"
	3	[344]	MOVE     	6 1
	4	[344]	MOVE     	7 2
	5	[344]	GETUPVAL 	8 0	; WIKIPEDIA_IMAGES
	6	[344]	LOADBOOL 	9 1 0
	7	[344]	CALL     	4 6 2
	8	[345]	TEST     	4 0 0
	9	[345]	JMP      	154	; to 164
	10	[345]	GETTABLE 	5 4 -2	; "parse"
	11	[345]	TEST     	5 0 0
	12	[345]	JMP      	151	; to 164
	13	[345]	GETTABLE 	5 4 -2	; "parse"
	14	[345]	GETTABLE 	5 5 -3	; "text"
	15	[345]	TEST     	5 0 0
	16	[345]	JMP      	147	; to 164
	17	[345]	GETTABLE 	5 4 -2	; "parse"
	18	[345]	GETTABLE 	5 5 -3	; "text"
	19	[345]	GETTABLE 	5 5 -4	; "*"
	20	[345]	TEST     	5 0 0
	21	[345]	JMP      	142	; to 164
	22	[346]	GETTABLE 	5 4 -2	; "parse"
	23	[346]	GETTABLE 	5 5 -3	; "text"
	24	[346]	GETTABLE 	5 5 -4	; "*"
	25	[347]	GETGLOBAL	6 -5	; require
	26	[347]	LOADK    	7 -6	; "socket.url"
	27	[347]	CALL     	6 2 2
	28	[348]	SELF     	7 0 -7	; "getWikiServer"
	29	[348]	MOVE     	9 2
	30	[348]	CALL     	7 3 2
	31	[350]	NEWTABLE 	8 0 0
	32	[353]	SELF     	9 5 -8	; "gmatch"
	33	[353]	LOADK    	11 -9	; "<div class=\"thumbinner\".-</div>%s*</div>"
	34	[353]	CALL     	9 3 4
	35	[353]	JMP      	5	; to 41
	36	[354]	GETGLOBAL	13 -10	; table
	37	[354]	GETTABLE 	13 13 -11	; "insert"
	38	[354]	MOVE     	14 8
	39	[354]	MOVE     	15 12
	40	[354]	CALL     	13 3 1
	41	[353]	TFORLOOP 	9 1
	42	[354]	JMP      	-7	; to 36
	43	[358]	SELF     	9 5 -8	; "gmatch"
	44	[358]	LOADK    	11 -12	; "<li class=\"gallerybox\".-<div class=\"thumb\".-</div>%s*</div>%s*<div class=\"gallerytext\">.-</div>%s*</div>"
	45	[358]	CALL     	9 3 4
	46	[358]	JMP      	5	; to 52
	47	[359]	GETGLOBAL	13 -10	; table
	48	[359]	GETTABLE 	13 13 -11	; "insert"
	49	[359]	MOVE     	14 8
	50	[359]	MOVE     	15 12
	51	[359]	CALL     	13 3 1
	52	[358]	TFORLOOP 	9 1
	53	[359]	JMP      	-7	; to 47
	54	[364]	GETGLOBAL	9 -13	; ipairs
	55	[364]	MOVE     	10 8
	56	[364]	CALL     	9 2 4
	57	[364]	JMP      	104	; to 162
	58	[367]	SELF     	14 13 -14	; "match"
	59	[367]	LOADK    	16 -15	; "<a href=\"/wiki/[^:]*:([^\"]*)\" class=\"image\""
	60	[367]	CALL     	14 3 2
	61	[368]	TEST     	14 0 0
	62	[368]	JMP      	4	; to 67
	63	[369]	GETTABLE 	15 6 -16	; "unescape"
	64	[369]	MOVE     	16 14
	65	[369]	CALL     	15 2 2
	66	[369]	MOVE     	14 15
	67	[371]	GETUPVAL 	15 1	; logger
	68	[371]	GETTABLE 	15 15 -17	; "dbg"
	69	[371]	LOADK    	16 -18	; "found image with filename:"
	70	[371]	MOVE     	17 14
	71	[371]	CALL     	15 3 1
	72	[373]	SELF     	15 13 -14	; "match"
	73	[373]	LOADK    	17 -19	; "(<img .->)(.*)"
	74	[373]	CALL     	15 3 3
	75	[374]	TEST     	15 0 0
	76	[374]	JMP      	85	; to 162
	77	[374]	TEST     	16 0 0
	78	[374]	JMP      	83	; to 162
	79	[376]	TESTSET  	17 16 0
	80	[376]	JMP      	4	; to 85
	81	[376]	GETUPVAL 	17 2	; util
	82	[376]	GETTABLE 	17 17 -20	; "htmlToPlainText"
	83	[376]	MOVE     	18 16
	84	[376]	CALL     	17 2 2
	85	[377]	EQ       	0 17 -21	; - ""
	86	[377]	JMP      	1	; to 88
	87	[377]	LOADNIL  	17 17
	88	[378]	GETUPVAL 	18 1	; logger
	89	[378]	GETTABLE 	18 18 -17	; "dbg"
	90	[378]	LOADK    	19 -22	; "  caption:"
	91	[378]	MOVE     	20 17
	92	[378]	CALL     	18 3 1
	93	[380]	SELF     	18 15 -14	; "match"
	94	[380]	LOADK    	20 -23	; "src=\"([^\"]*)\""
	95	[380]	CALL     	18 3 2
	96	[381]	TEST     	18 0 0
	97	[381]	JMP      	64	; to 162
	98	[381]	EQ       	1 18 -21	; - ""
	99	[381]	JMP      	62	; to 162
	100	[382]	SELF     	19 18 -24	; "sub"
	101	[382]	LOADK    	21 -25	; 1
	102	[382]	LOADK    	22 -26	; 2
	103	[382]	CALL     	19 4 2
	104	[382]	EQ       	0 19 -27	; - "//"
	105	[382]	JMP      	4	; to 110
	106	[383]	LOADK    	19 -28	; "https:"
	107	[383]	MOVE     	20 18
	108	[383]	CONCAT   	18 19 20
	109	[383]	JMP      	9	; to 119
	110	[384]	SELF     	19 18 -24	; "sub"
	111	[384]	LOADK    	21 -25	; 1
	112	[384]	LOADK    	22 -25	; 1
	113	[384]	CALL     	19 4 2
	114	[384]	EQ       	0 19 -29	; - "/"
	115	[384]	JMP      	3	; to 119
	116	[385]	MOVE     	19 7
	117	[385]	MOVE     	20 18
	118	[385]	CONCAT   	18 19 20
	119	[387]	GETGLOBAL	19 -30	; tonumber
	120	[387]	SELF     	20 15 -14	; "match"
	121	[387]	LOADK    	22 -31	; "width=\"([^\"]*)\""
	122	[387]	CALL     	20 3 0
	123	[387]	CALL     	19 0 2
	124	[388]	GETGLOBAL	20 -30	; tonumber
	125	[388]	SELF     	21 15 -14	; "match"
	126	[388]	LOADK    	23 -32	; "height=\"([^\"]*)\""
	127	[388]	CALL     	21 3 0
	128	[388]	CALL     	20 0 2
	129	[391]	TEST     	19 0 0
	130	[391]	JMP      	31	; to 162
	131	[391]	TEST     	20 0 0
	132	[391]	JMP      	29	; to 162
	133	[396]	GETGLOBAL	21 -33	; math
	134	[396]	GETTABLE 	21 21 -34	; "ceil"
	135	[396]	DIV      	22 19 -35	; - 4.5
	136	[396]	CALL     	21 2 2
	137	[396]	MOVE     	19 21
	138	[397]	GETGLOBAL	21 -33	; math
	139	[397]	GETTABLE 	21 21 -34	; "ceil"
	140	[397]	DIV      	22 20 -35	; - 4.5
	141	[397]	CALL     	21 2 2
	142	[397]	MOVE     	20 21
	143	[401]	GETUPVAL 	21 1	; logger
	144	[401]	GETTABLE 	21 21 -17	; "dbg"
	145	[401]	LOADK    	22 -36	; "  size:"
	146	[401]	MOVE     	23 19
	147	[401]	LOADK    	24 -37	; "x"
	148	[401]	MOVE     	25 20
	149	[401]	LOADK    	26 -38	; "url:"
	150	[401]	MOVE     	27 18
	151	[401]	CALL     	21 7 1
	152	[402]	GETGLOBAL	21 -10	; table
	153	[402]	GETTABLE 	21 21 -11	; "insert"
	154	[402]	MOVE     	22 3
	155	[402]	NEWTABLE 	23 0 5
	156	[403]	SETTABLE 	23 -39 18	; "source" -
	157	[404]	SETTABLE 	23 -40 19	; "width" -
	158	[405]	SETTABLE 	23 -41 20	; "height" -
	159	[406]	SETTABLE 	23 -42 14	; "filename" -
	160	[407]	SETTABLE 	23 -43 17	; "caption" -
	161	[402]	CALL     	21 3 1
	162	[364]	TFORLOOP 	9 2
	163	[411]	JMP      	-106	; to 58
	164	[414]	RETURN   	3 2
	165	[415]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:418,487> (91 instructions, 364 bytes at 0x7ff95cc0a740)
2 params, 18 slots, 4 upvalues, 11 locals, 20 constants, 1 function
	1	[420]	TEST     	1 0 1
	2	[420]	JMP      	3	; to 6
	3	[424]	LOADNIL  	3 3
	4	[425]	GETTABLE 	2 0 -1	; "source"
	5	[425]	JMP      	5	; to 11
	6	[429]	GETUPVAL 	4 0	; _
	7	[429]	LOADK    	5 -2	; "Loading high-res image\226\128\166 (tap to cancel)"
	8	[429]	CALL     	4 2 2
	9	[429]	MOVE     	3 4
	10	[430]	GETTABLE 	2 0 -3	; "hi_source"
	11	[435]	LOADK    	4 -4	; 60
	12	[435]	LOADK    	5 -5	; 120
	13	[437]	GETUPVAL 	6 1	; logger
	14	[437]	GETTABLE 	6 6 -6	; "dbg"
	15	[437]	LOADK    	7 -7	; "fetching"
	16	[437]	MOVE     	8 2
	17	[437]	CALL     	6 3 1
	18	[438]	GETGLOBAL	6 -8	; require
	19	[438]	LOADK    	7 -9	; "ui/trapper"
	20	[438]	CALL     	6 2 2
	21	[441]	SELF     	7 6 -10	; "dismissableRunInSubprocess"
	22	[449]	CLOSURE  	9 0	; 0x7ff95cc0ac10
	23	[449]	GETUPVAL 	0 2	; getUrlContent
	24	[449]	MOVE     	0 2
	25	[449]	MOVE     	0 4
	26	[449]	MOVE     	0 5
	27	[449]	GETUPVAL 	0 1	; logger
	28	[449]	MOVE     	10 3
	29	[449]	LOADBOOL 	11 1 0
	30	[441]	CALL     	7 5 3
	31	[451]	TEST     	8 0 0
	32	[451]	JMP      	3	; to 36
	33	[451]	LOADBOOL 	9 1 0
	34	[451]	TEST     	9 0 1
	35	[451]	JMP      	1	; to 37
	36	[451]	LOADBOOL 	9 0 0
	37	[453]	TEST     	7 0 1
	38	[453]	JMP      	6	; to 45
	39	[454]	GETUPVAL 	10 1	; logger
	40	[454]	GETTABLE 	10 10 -6	; "dbg"
	41	[454]	LOADK    	11 -11	; "image fetching interrupted by user"
	42	[454]	CALL     	10 2 1
	43	[455]	LOADBOOL 	10 1 0
	44	[455]	RETURN   	10 2
	45	[457]	TEST     	9 0 1
	46	[457]	JMP      	6	; to 53
	47	[459]	GETUPVAL 	10 1	; logger
	48	[459]	GETTABLE 	10 10 -12	; "warn"
	49	[459]	LOADK    	11 -13	; "failed fetching image from"
	50	[459]	MOVE     	12 2
	51	[459]	CALL     	10 3 1
	52	[460]	RETURN   	0 1
	53	[462]	GETUPVAL 	10 1	; logger
	54	[462]	GETTABLE 	10 10 -6	; "dbg"
	55	[462]	LOADK    	11 -14	; " fetched"
	56	[462]	LEN      	12 8
	57	[462]	CALL     	10 3 1
	58	[464]	LOADNIL  	10 10
	59	[465]	TEST     	1 0 1
	60	[465]	JMP      	10	; to 71
	61	[471]	GETUPVAL 	11 3	; RenderImage
	62	[471]	SELF     	11 11 -15	; "renderImageData"
	63	[471]	MOVE     	13 8
	64	[471]	LEN      	14 8
	65	[471]	LOADBOOL 	15 0 0
	66	[471]	GETTABLE 	16 0 -16	; "width"
	67	[471]	GETTABLE 	17 0 -17	; "height"
	68	[471]	CALL     	11 7 2
	69	[471]	MOVE     	10 11
	70	[471]	JMP      	7	; to 78
	71	[476]	GETUPVAL 	11 3	; RenderImage
	72	[476]	SELF     	11 11 -15	; "renderImageData"
	73	[476]	MOVE     	13 8
	74	[476]	LEN      	14 8
	75	[476]	LOADBOOL 	15 1 0
	76	[476]	CALL     	11 5 2
	77	[476]	MOVE     	10 11
	78	[478]	TEST     	10 0 1
	79	[478]	JMP      	6	; to 86
	80	[479]	GETUPVAL 	11 1	; logger
	81	[479]	GETTABLE 	11 11 -12	; "warn"
	82	[479]	LOADK    	12 -18	; "failed building image from"
	83	[479]	MOVE     	13 2
	84	[479]	CALL     	11 3 1
	85	[480]	RETURN   	0 1
	86	[482]	TEST     	1 0 1
	87	[482]	JMP      	2	; to 90
	88	[483]	SETTABLE 	0 -19 10	; "bb" -
	89	[483]	JMP      	1	; to 91
	90	[485]	SETTABLE 	0 -20 10	; "hi_bb" -
	91	[487]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:441,449> (21 instructions, 84 bytes at 0x7ff95cc0ac10)
0 params, 7 slots, 5 upvalues, 2 locals, 3 constants, 0 functions
	1	[442]	GETUPVAL 	0 0	; getUrlContent
	2	[442]	GETUPVAL 	1 1	; source
	3	[442]	GETUPVAL 	2 2	; timeout
	4	[442]	GETUPVAL 	3 3	; maxtime
	5	[442]	CALL     	0 4 3
	6	[445]	TEST     	0 0 1
	7	[445]	JMP      	7	; to 15
	8	[446]	GETUPVAL 	2 4	; logger
	9	[446]	GETTABLE 	2 2 -1	; "warn"
	10	[446]	LOADK    	3 -2	; "failed fetching image from"
	11	[446]	GETUPVAL 	4 1	; source
	12	[446]	LOADK    	5 -3	; ":"
	13	[446]	MOVE     	6 1
	14	[446]	CALL     	2 5 1
	15	[448]	TEST     	0 0 0
	16	[448]	JMP      	2	; to 19
	17	[448]	TESTSET  	2 1 1
	18	[448]	JMP      	1	; to 20
	19	[448]	LOADNIL  	2 2
	20	[448]	RETURN   	2 2
	21	[449]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:489,582> (152 instructions, 608 bytes at 0x7ff95cc0ae10)
6 params, 24 slots, 3 upvalues, 28 locals, 37 constants, 1 function
	1	[491]	NEWTABLE 	6 0 0
	2	[491]	SETTABLE 	1 -1 6	; "images" -
	3	[494]	NEWTABLE 	6 0 0
	4	[505]	LOADNIL  	7 7
	5	[506]	GETTABLE 	8 1 -2	; "thumbnail"
	6	[506]	TEST     	8 0 0
	7	[506]	JMP      	13	; to 21
	8	[506]	GETTABLE 	8 1 -2	; "thumbnail"
	9	[506]	GETTABLE 	8 8 -3	; "source"
	10	[506]	TEST     	8 0 0
	11	[506]	JMP      	9	; to 21
	12	[507]	GETTABLE 	8 1 -2	; "thumbnail"
	13	[507]	GETTABLE 	9 1 -5	; "pageimage"
	14	[507]	SETTABLE 	8 -4 9	; "filename" -
	15	[508]	GETTABLE 	7 1 -5	; "pageimage"
	16	[509]	GETGLOBAL	8 -6	; table
	17	[509]	GETTABLE 	8 8 -7	; "insert"
	18	[509]	MOVE     	9 6
	19	[509]	GETTABLE 	10 1 -2	; "thumbnail"
	20	[509]	CALL     	8 3 1
	21	[512]	TEST     	3 0 0
	22	[512]	JMP      	43	; to 66
	23	[513]	GETGLOBAL	8 -8	; pcall
	24	[513]	GETUPVAL 	9 0	; Wikipedia
	25	[513]	GETTABLE 	9 9 -9	; "getFullPageImages"
	26	[513]	GETUPVAL 	10 0	; Wikipedia
	27	[513]	GETTABLE 	11 1 -10	; "title"
	28	[513]	MOVE     	12 2
	29	[513]	CALL     	8 5 3
	30	[514]	TEST     	8 0 1
	31	[514]	JMP      	6	; to 38
	32	[515]	GETUPVAL 	10 1	; logger
	33	[515]	GETTABLE 	10 10 -11	; "warn"
	34	[515]	LOADK    	11 -12	; "error getting more images"
	35	[515]	MOVE     	12 9
	36	[515]	CALL     	10 3 1
	37	[515]	JMP      	28	; to 66
	38	[517]	GETGLOBAL	10 -13	; ipairs
	39	[517]	MOVE     	11 9
	40	[517]	CALL     	10 2 4
	41	[517]	JMP      	22	; to 64
	42	[518]	TEST     	7 0 0
	43	[518]	JMP      	15	; to 59
	44	[518]	GETTABLE 	15 14 -4	; "filename"
	45	[518]	EQ       	0 15 7
	46	[518]	JMP      	12	; to 59
	47	[521]	GETGLOBAL	15 -6	; table
	48	[521]	GETTABLE 	15 15 -14	; "remove"
	49	[521]	MOVE     	16 6
	50	[521]	LOADK    	17 -15	; 1
	51	[521]	CALL     	15 3 1
	52	[522]	GETGLOBAL	15 -6	; table
	53	[522]	GETTABLE 	15 15 -7	; "insert"
	54	[522]	MOVE     	16 6
	55	[522]	LOADK    	17 -15	; 1
	56	[522]	MOVE     	18 14
	57	[522]	CALL     	15 4 1
	58	[522]	JMP      	5	; to 64
	59	[524]	GETGLOBAL	15 -6	; table
	60	[524]	GETTABLE 	15 15 -7	; "insert"
	61	[524]	MOVE     	16 6
	62	[524]	MOVE     	17 14
	63	[524]	CALL     	15 3 1
	64	[517]	TFORLOOP 	10 2
	65	[525]	JMP      	-24	; to 42
	66	[531]	GETGLOBAL	8 -13	; ipairs
	67	[531]	MOVE     	9 6
	68	[531]	CALL     	8 2 4
	69	[531]	JMP      	80	; to 150
	70	[535]	GETTABLE 	13 12 -16	; "width"
	71	[535]	TEST     	13 0 1
	72	[535]	JMP      	1	; to 74
	73	[535]	LOADK    	13 -17	; 100
	74	[536]	GETTABLE 	14 12 -18	; "height"
	75	[536]	TEST     	14 0 1
	76	[536]	JMP      	1	; to 78
	77	[536]	LOADK    	14 -17	; 100
	78	[538]	DIV      	15 14 -19	; - 2
	79	[538]	LT       	1 13 15
	80	[538]	JMP      	3	; to 84
	81	[538]	DIV      	15 13 -19	; - 2
	82	[538]	LT       	0 14 15
	83	[538]	JMP      	2	; to 86
	84	[539]	MUL      	13 13 -20	; - 1.3
	85	[540]	MUL      	14 14 -20	; - 1.3
	86	[542]	GETGLOBAL	15 -21	; math
	87	[542]	GETTABLE 	15 15 -22	; "ceil"
	88	[542]	MUL      	16 13 4
	89	[542]	CALL     	15 2 2
	90	[542]	MOVE     	13 15
	91	[543]	GETGLOBAL	15 -21	; math
	92	[543]	GETTABLE 	15 15 -22	; "ceil"
	93	[543]	MUL      	16 14 4
	94	[543]	CALL     	15 2 2
	95	[543]	MOVE     	14 15
	96	[552]	GETTABLE 	15 12 -3	; "source"
	97	[552]	SELF     	15 15 -23	; "gsub"
	98	[552]	LOADK    	17 -24	; "(.*/)%d+(px-[^/]*)"
	99	[552]	LOADK    	18 -25	; "%1"
	100	[552]	MOVE     	19 13
	101	[552]	LOADK    	20 -26	; "%2"
	102	[552]	CONCAT   	18 18 20
	103	[552]	CALL     	15 4 2
	104	[555]	TESTSET  	16 5 1
	105	[555]	JMP      	1	; to 107
	106	[555]	LOADK    	16 -27	; 4
	107	[555]	MUL      	16 13 16
	108	[556]	TESTSET  	17 5 1
	109	[556]	JMP      	1	; to 111
	110	[556]	LOADK    	17 -27	; 4
	111	[556]	MUL      	17 14 17
	112	[557]	GETTABLE 	18 12 -3	; "source"
	113	[557]	SELF     	18 18 -23	; "gsub"
	114	[557]	LOADK    	20 -24	; "(.*/)%d+(px-[^/]*)"
	115	[557]	LOADK    	21 -25	; "%1"
	116	[557]	MOVE     	22 16
	117	[557]	LOADK    	23 -26	; "%2"
	118	[557]	CONCAT   	21 21 23
	119	[557]	CALL     	18 4 2
	120	[558]	GETTABLE 	19 12 -4	; "filename"
	121	[559]	TEST     	19 0 0
	122	[559]	JMP      	5	; to 128
	123	[560]	SELF     	20 19 -23	; "gsub"
	124	[560]	LOADK    	22 -28	; "_"
	125	[560]	LOADK    	23 -29	; " "
	126	[560]	CALL     	20 4 2
	127	[560]	MOVE     	19 20
	128	[562]	NEWTABLE 	20 0 10
	129	[565]	SETTABLE 	20 -10 19	; "title" -
	130	[566]	GETTABLE 	21 12 -30	; "caption"
	131	[566]	SETTABLE 	20 -30 21	; "caption" -
	132	[567]	SETTABLE 	20 -3 15	; "source" -
	133	[568]	SETTABLE 	20 -16 13	; "width" -
	134	[569]	SETTABLE 	20 -18 14	; "height" -
	135	[570]	SETTABLE 	20 -31 -32	; "bb" nil
	136	[571]	SETTABLE 	20 -33 18	; "hi_source" -
	137	[572]	SETTABLE 	20 -34 16	; "hi_width" -
	138	[573]	SETTABLE 	20 -35 17	; "hi_height" -
	139	[574]	SETTABLE 	20 -36 -32	; "hi_bb" nil
	140	[579]	CLOSURE  	21 0	; 0x7ff95cc0bc20
	141	[579]	GETUPVAL 	0 2	; image_load_bb_func
	142	[579]	MOVE     	0 20
	143	[579]	SETTABLE 	20 -37 21	; "load_bb_func" -
	144	[580]	GETGLOBAL	21 -6	; table
	145	[580]	GETTABLE 	21 21 -7	; "insert"
	146	[580]	GETTABLE 	22 1 -1	; "images"
	147	[580]	MOVE     	23 20
	148	[580]	CALL     	21 3 1
	149	[580]	CLOSE    	13
	150	[531]	TFORLOOP 	8 2
	151	[580]	JMP      	-82	; to 70
	152	[582]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:577,579> (6 instructions, 24 bytes at 0x7ff95cc0bc20)
1 param, 4 slots, 2 upvalues, 1 local, 0 constants, 0 functions
	1	[578]	GETUPVAL 	1 0	; image_load_bb_func
	2	[578]	GETUPVAL 	2 1	; image
	3	[578]	MOVE     	3 0
	4	[578]	TAILCALL 	1 3 0
	5	[578]	RETURN   	1 0
	6	[579]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:602,621> (100 instructions, 400 bytes at 0x7ff95cc0be20)
2 params, 8 slots, 6 upvalues, 2 locals, 25 constants, 0 functions
	1	[604]	SELF     	2 1 -1	; "gsub"
	2	[604]	LOADK    	4 -2	; "\n= "
	3	[604]	LOADK    	5 -3	; "\n\a"
	4	[604]	GETUPVAL 	6 0	; th1_sym
	5	[604]	LOADK    	7 -4	; " "
	6	[604]	CONCAT   	5 5 7
	7	[604]	CALL     	2 4 2
	8	[604]	MOVE     	1 2
	9	[605]	SELF     	2 1 -1	; "gsub"
	10	[605]	LOADK    	4 -5	; "\n== "
	11	[605]	LOADK    	5 -3	; "\n\a"
	12	[605]	GETUPVAL 	6 1	; th2_sym
	13	[605]	LOADK    	7 -4	; " "
	14	[605]	CONCAT   	5 5 7
	15	[605]	CALL     	2 4 2
	16	[605]	MOVE     	1 2
	17	[606]	SELF     	2 1 -1	; "gsub"
	18	[606]	LOADK    	4 -6	; "\n=== "
	19	[606]	LOADK    	5 -7	; "\n"
	20	[606]	GETUPVAL 	6 2	; th3_sym
	21	[606]	LOADK    	7 -4	; " "
	22	[606]	CONCAT   	5 5 7
	23	[606]	CALL     	2 4 2
	24	[606]	MOVE     	1 2
	25	[607]	SELF     	2 1 -1	; "gsub"
	26	[607]	LOADK    	4 -8	; "\n==== "
	27	[607]	LOADK    	5 -7	; "\n"
	28	[607]	GETUPVAL 	6 3	; th4_sym
	29	[607]	LOADK    	7 -4	; " "
	30	[607]	CONCAT   	5 5 7
	31	[607]	CALL     	2 4 2
	32	[607]	MOVE     	1 2
	33	[608]	SELF     	2 1 -1	; "gsub"
	34	[608]	LOADK    	4 -9	; "\n===== "
	35	[608]	LOADK    	5 -7	; "\n"
	36	[608]	GETUPVAL 	6 4	; th5_sym
	37	[608]	LOADK    	7 -4	; " "
	38	[608]	CONCAT   	5 5 7
	39	[608]	CALL     	2 4 2
	40	[608]	MOVE     	1 2
	41	[609]	SELF     	2 1 -1	; "gsub"
	42	[609]	LOADK    	4 -10	; "\n====== "
	43	[609]	LOADK    	5 -7	; "\n"
	44	[609]	GETUPVAL 	6 5	; th6_sym
	45	[609]	LOADK    	7 -4	; " "
	46	[609]	CONCAT   	5 5 7
	47	[609]	CALL     	2 4 2
	48	[609]	MOVE     	1 2
	49	[610]	SELF     	2 1 -1	; "gsub"
	50	[610]	LOADK    	4 -11	; "Modifier =="
	51	[610]	LOADK    	5 -12	; " =="
	52	[610]	CALL     	2 4 2
	53	[610]	MOVE     	1 2
	54	[611]	SELF     	2 1 -1	; "gsub"
	55	[611]	LOADK    	4 -13	; "==$"
	56	[611]	LOADK    	5 -14	; "==\n"
	57	[611]	CALL     	2 4 2
	58	[611]	MOVE     	1 2
	59	[612]	SELF     	2 1 -1	; "gsub"
	60	[612]	LOADK    	4 -15	; " ===?\n+"
	61	[612]	LOADK    	5 -16	; "\n\n"
	62	[612]	CALL     	2 4 2
	63	[612]	MOVE     	1 2
	64	[613]	SELF     	2 1 -1	; "gsub"
	65	[613]	LOADK    	4 -17	; " ====+\n+"
	66	[613]	LOADK    	5 -7	; "\n"
	67	[613]	CALL     	2 4 2
	68	[613]	MOVE     	1 2
	69	[614]	SELF     	2 1 -1	; "gsub"
	70	[614]	LOADK    	4 -18	; "\n\n+xE2x80x94"
	71	[614]	LOADK    	5 -19	; "\nxE2x80x94"
	72	[614]	CALL     	2 4 2
	73	[614]	MOVE     	1 2
	74	[615]	SELF     	2 1 -1	; "gsub"
	75	[615]	LOADK    	4 -20	; "\n +\n"
	76	[615]	LOADK    	5 -7	; "\n"
	77	[615]	CALL     	2 4 2
	78	[615]	MOVE     	1 2
	79	[616]	SELF     	2 1 -1	; "gsub"
	80	[616]	LOADK    	4 -21	; "^\n*"
	81	[616]	LOADK    	5 -22	; ""
	82	[616]	CALL     	2 4 2
	83	[616]	MOVE     	1 2
	84	[617]	SELF     	2 1 -1	; "gsub"
	85	[617]	LOADK    	4 -23	; "\n*$"
	86	[617]	LOADK    	5 -22	; ""
	87	[617]	CALL     	2 4 2
	88	[617]	MOVE     	1 2
	89	[618]	SELF     	2 1 -1	; "gsub"
	90	[618]	LOADK    	4 -24	; "\n\n+"
	91	[618]	LOADK    	5 -16	; "\n\n"
	92	[618]	CALL     	2 4 2
	93	[618]	MOVE     	1 2
	94	[619]	SELF     	2 1 -1	; "gsub"
	95	[619]	LOADK    	4 -25	; "\a"
	96	[619]	LOADK    	5 -7	; "\n"
	97	[619]	CALL     	2 4 2
	98	[619]	MOVE     	1 2
	99	[620]	RETURN   	1 2
	100	[621]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:684,689> (13 instructions, 52 bytes at 0x7ff95cc0d150)
2 params, 5 slots, 1 upvalue, 2 locals, 1 constant, 0 functions
	1	[685]	TEST     	1 0 0
	2	[685]	JMP      	8	; to 11
	3	[685]	GETUPVAL 	2 0	; rtl_wiki_code
	4	[685]	SELF     	3 1 -1	; "lower"
	5	[685]	CALL     	3 2 2
	6	[685]	GETTABLE 	2 2 3
	7	[685]	TEST     	2 0 0
	8	[685]	JMP      	2	; to 11
	9	[686]	LOADBOOL 	2 1 0
	10	[686]	RETURN   	2 2
	11	[688]	LOADBOOL 	2 0 0
	12	[688]	RETURN   	2 2
	13	[689]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:692,1409> (745 instructions, 2980 bytes at 0x7ff95cc0d370)
5 params, 55 slots, 13 upvalues, 63 locals, 157 constants, 3 functions
	1	[696]	GETGLOBAL	5 -1	; require
	2	[696]	LOADK    	6 -2	; "ui/trapper"
	3	[696]	CALL     	5 2 2
	4	[698]	SELF     	6 5 -3	; "info"
	5	[698]	GETUPVAL 	8 0	; _
	6	[698]	LOADK    	9 -4	; "Retrieving Wikipedia article\226\128\166"
	7	[698]	CALL     	8 2 0
	8	[698]	CALL     	6 0 1
	9	[699]	GETGLOBAL	6 -5	; pcall
	10	[699]	GETTABLE 	7 0 -6	; "getFullPageHtml"
	11	[699]	MOVE     	8 0
	12	[699]	MOVE     	9 2
	13	[699]	MOVE     	10 3
	14	[699]	CALL     	6 5 3
	15	[700]	TEST     	6 0 1
	16	[700]	JMP      	11	; to 28
	17	[701]	SELF     	8 5 -3	; "info"
	18	[701]	MOVE     	10 7
	19	[701]	CALL     	8 3 1
	20	[703]	GETUPVAL 	8 1	; ffiutil
	21	[703]	GETTABLE 	8 8 -7	; "sleep"
	22	[703]	LOADK    	9 -8	; 2
	23	[703]	CALL     	8 2 1
	24	[704]	SELF     	8 5 -9	; "reset"
	25	[704]	CALL     	8 2 1
	26	[705]	LOADBOOL 	8 0 0
	27	[705]	RETURN   	8 2
	28	[709]	SELF     	8 0 -10	; "getWikiServer"
	29	[709]	MOVE     	10 3
	30	[709]	CALL     	8 3 2
	31	[713]	LOADBOOL 	9 0 0
	32	[714]	GETTABLE 	10 7 -11	; "text"
	33	[714]	GETTABLE 	10 10 -12	; "*"
	34	[715]	SELF     	11 2 -13	; "gsub"
	35	[715]	LOADK    	13 -14	; "_"
	36	[715]	LOADK    	14 -15	; " "
	37	[715]	CALL     	11 4 2
	38	[716]	GETTABLE 	12 7 -16	; "displaytitle"
	39	[721]	GETUPVAL 	13 2	; util
	40	[721]	GETTABLE 	13 13 -17	; "htmlEntitiesToUtf8"
	41	[721]	MOVE     	14 11
	42	[721]	CALL     	13 2 2
	43	[721]	SELF     	13 13 -13	; "gsub"
	44	[721]	LOADK    	15 -18	; "&"
	45	[721]	LOADK    	16 -19	; "&#38;"
	46	[721]	CALL     	13 4 2
	47	[721]	MOVE     	11 13
	48	[722]	GETUPVAL 	13 2	; util
	49	[722]	GETTABLE 	13 13 -17	; "htmlEntitiesToUtf8"
	50	[722]	MOVE     	14 12
	51	[722]	CALL     	13 2 2
	52	[722]	SELF     	13 13 -13	; "gsub"
	53	[722]	LOADK    	15 -18	; "&"
	54	[722]	LOADK    	16 -19	; "&#38;"
	55	[722]	CALL     	13 4 2
	56	[722]	MOVE     	12 13
	57	[723]	GETTABLE 	13 7 -20	; "sections"
	58	[724]	GETGLOBAL	14 -21	; string
	59	[724]	GETTABLE 	14 14 -22	; "format"
	60	[724]	LOADK    	15 -23	; "wikipedia_%s_%s_%s"
	61	[724]	MOVE     	16 3
	62	[724]	GETTABLE 	17 7 -24	; "pageid"
	63	[724]	GETTABLE 	18 7 -25	; "revid"
	64	[724]	CALL     	14 5 2
	65	[730]	NEWTABLE 	15 0 0
	66	[731]	NEWTABLE 	16 0 0
	67	[732]	LOADK    	17 -26	; 1
	68	[733]	LOADNIL  	18 18
	69	[827]	CLOSURE  	19 0	; 0x7ff95cc0da00
	70	[827]	GETUPVAL 	0 3	; logger
	71	[827]	MOVE     	0 8
	72	[827]	MOVE     	0 16
	73	[827]	MOVE     	0 17
	74	[827]	GETUPVAL 	0 4	; ext_to_mimetype
	75	[827]	MOVE     	0 15
	76	[827]	MOVE     	0 18
	77	[828]	SELF     	20 10 -13	; "gsub"
	78	[828]	LOADK    	22 -27	; "(<%s*img [^>]*>)"
	79	[828]	MOVE     	23 19
	80	[828]	CALL     	20 4 2
	81	[828]	MOVE     	10 20
	82	[829]	GETUPVAL 	20 3	; logger
	83	[829]	GETTABLE 	20 20 -28	; "dbg"
	84	[829]	LOADK    	21 -29	; "Images found in html:"
	85	[829]	MOVE     	22 15
	86	[829]	CALL     	20 3 1
	87	[832]	LOADBOOL 	20 0 0
	88	[833]	LOADBOOL 	21 0 0
	89	[834]	TEST     	4 0 0
	90	[834]	JMP      	42	; to 133
	91	[836]	LEN      	22 15
	92	[836]	LT       	0 -30 22	; 0 -
	93	[836]	JMP      	30	; to 124
	94	[837]	SELF     	22 5 -31	; "confirm"
	95	[837]	GETUPVAL 	24 5	; T
	96	[837]	GETUPVAL 	25 0	; _
	97	[837]	LOADK    	26 -32	; "This article contains %1 images.\nWould you like to download and include them in the generated EPUB file?"
	98	[837]	CALL     	25 2 2
	99	[837]	LEN      	26 15
	100	[837]	CALL     	24 3 2
	101	[837]	GETUPVAL 	25 0	; _
	102	[837]	LOADK    	26 -33	; "Don't include"
	103	[837]	CALL     	25 2 2
	104	[837]	GETUPVAL 	26 0	; _
	105	[837]	LOADK    	27 -34	; "Include"
	106	[837]	CALL     	26 2 0
	107	[837]	CALL     	22 0 2
	108	[837]	MOVE     	20 22
	109	[838]	TEST     	20 0 0
	110	[838]	JMP      	22	; to 133
	111	[839]	SELF     	22 5 -31	; "confirm"
	112	[839]	GETUPVAL 	24 0	; _
	113	[839]	LOADK    	25 -35	; "Would you like to use slightly higher quality images? This will result in a bigger file size."
	114	[839]	CALL     	24 2 2
	115	[839]	GETUPVAL 	25 0	; _
	116	[839]	LOADK    	26 -36	; "Standard quality"
	117	[839]	CALL     	25 2 2
	118	[839]	GETUPVAL 	26 0	; _
	119	[839]	LOADK    	27 -37	; "Higher quality"
	120	[839]	CALL     	26 2 0
	121	[839]	CALL     	22 0 2
	122	[839]	MOVE     	21 22
	123	[840]	JMP      	9	; to 133
	124	[842]	SELF     	22 5 -3	; "info"
	125	[842]	GETUPVAL 	24 0	; _
	126	[842]	LOADK    	25 -38	; "This article does not contain any images."
	127	[842]	CALL     	24 2 0
	128	[842]	CALL     	22 0 1
	129	[843]	GETUPVAL 	22 1	; ffiutil
	130	[843]	GETTABLE 	22 22 -7	; "sleep"
	131	[843]	LOADK    	23 -26	; 1
	132	[843]	CALL     	22 2 1
	133	[846]	TEST     	20 0 1
	134	[846]	JMP      	5	; to 140
	135	[848]	SELF     	22 10 -13	; "gsub"
	136	[848]	LOADK    	24 -39	; "<%s*img [^>]*>"
	137	[848]	LOADK    	25 -40	; ""
	138	[848]	CALL     	22 4 2
	139	[848]	MOVE     	10 22
	140	[855]	SELF     	22 5 -3	; "info"
	141	[855]	GETUPVAL 	24 0	; _
	142	[855]	LOADK    	25 -41	; "Building EPUB\226\128\166"
	143	[855]	CALL     	24 2 0
	144	[855]	CALL     	22 0 1
	145	[859]	MOVE     	22 1
	146	[859]	LOADK    	23 -42	; ".tmp"
	147	[859]	CONCAT   	22 22 23
	148	[860]	GETGLOBAL	23 -1	; require
	149	[860]	LOADK    	24 -43	; "ffi/zipwriter"
	150	[860]	CALL     	23 2 2
	151	[861]	SELF     	24 23 -44	; "new"
	152	[861]	NEWTABLE 	26 0 0
	153	[861]	CALL     	24 3 2
	154	[862]	SELF     	25 24 -45	; "open"
	155	[862]	MOVE     	27 22
	156	[862]	CALL     	25 3 2
	157	[862]	TEST     	25 0 1
	158	[862]	JMP      	2	; to 161
	159	[863]	LOADBOOL 	25 0 0
	160	[863]	RETURN   	25 2
	161	[870]	SELF     	25 24 -46	; "add"
	162	[870]	LOADK    	27 -47	; "mimetype"
	163	[870]	LOADK    	28 -48	; "application/epub+zip"
	164	[870]	CALL     	25 4 1
	165	[874]	SELF     	25 24 -46	; "add"
	166	[874]	LOADK    	27 -49	; "META-INF/container.xml"
	167	[880]	LOADK    	28 -50	; "<?xml version=\"1.0\"?>\n<container version=\"1.0\" xmlns=\"urn:oasis:names:tc:opendocument:xmlns:container\">\n  <rootfiles>\n    <rootfile full-path=\"OEBPS/content.opf\" media-type=\"application/oebps-package+xml\"/>\n  </rootfiles>\n</container>"
	168	[874]	CALL     	25 4 1
	169	[896]	LOADK    	25 -51	; "KOReader"
	170	[897]	GETGLOBAL	26 -52	; lfs
	171	[897]	GETTABLE 	26 26 -53	; "attributes"
	172	[897]	LOADK    	27 -54	; "git-rev"
	173	[897]	LOADK    	28 -55	; "mode"
	174	[897]	CALL     	26 3 2
	175	[897]	EQ       	0 26 -56	; - "file"
	176	[897]	JMP      	9	; to 186
	177	[898]	LOADK    	26 -57	; "KOReader "
	178	[898]	GETGLOBAL	27 -58	; io
	179	[898]	GETTABLE 	27 27 -45	; "open"
	180	[898]	LOADK    	28 -54	; "git-rev"
	181	[898]	LOADK    	29 -59	; "r"
	182	[898]	CALL     	27 3 2
	183	[898]	SELF     	27 27 -60	; "read"
	184	[898]	CALL     	27 2 2
	185	[898]	CONCAT   	25 26 27
	186	[900]	NEWTABLE 	26 0 0
	187	[902]	LOADK    	27 -61	; "<!-- no cover image -->"
	188	[903]	TEST     	20 0 0
	189	[903]	JMP      	8	; to 198
	190	[903]	TEST     	18 0 0
	191	[903]	JMP      	6	; to 198
	192	[904]	GETGLOBAL	28 -21	; string
	193	[904]	GETTABLE 	28 28 -22	; "format"
	194	[904]	LOADK    	29 -62	; "<meta name=\"cover\" content=\"%s\"/>"
	195	[904]	MOVE     	30 18
	196	[904]	CALL     	28 3 2
	197	[904]	MOVE     	27 28
	198	[906]	GETGLOBAL	28 -63	; table
	199	[906]	GETTABLE 	28 28 -64	; "insert"
	200	[906]	MOVE     	29 26
	201	[906]	GETGLOBAL	30 -21	; string
	202	[906]	GETTABLE 	30 30 -22	; "format"
	203	[923]	LOADK    	31 -65	; "<?xml version='1.0' encoding='utf-8'?>\n<package xmlns=\"http://www.idpf.org/2007/opf\"\n        xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n        unique-identifier=\"bookid\" version=\"2.0\">\n  <metadata>\n    <dc:title>%s</dc:title>\n    <dc:creator>Wikipedia %s</dc:creator>\n    <dc:identifier id=\"bookid\">%s</dc:identifier>\n    <dc:language>%s</dc:language>\n    <dc:publisher>%s</dc:publisher>\n    %s\n  </metadata>\n  <manifest>\n    <item id=\"ncx\" href=\"toc.ncx\" media-type=\"application/x-dtbncx+xml\"/>\n    <item id=\"content\" href=\"content.html\" media-type=\"application/xhtml+xml\"/>\n    <item id=\"css\" href=\"stylesheet.css\" media-type=\"text/css\"/>\n"
	204	[923]	MOVE     	32 11
	205	[923]	SELF     	33 3 -66	; "upper"
	206	[923]	CALL     	33 2 2
	207	[923]	MOVE     	34 14
	208	[923]	MOVE     	35 3
	209	[923]	MOVE     	36 25
	210	[923]	MOVE     	37 27
	211	[906]	CALL     	30 8 0
	212	[906]	CALL     	28 0 1
	213	[925]	TEST     	20 0 0
	214	[925]	JMP      	18	; to 233
	215	[926]	GETGLOBAL	28 -67	; ipairs
	216	[926]	MOVE     	29 15
	217	[926]	CALL     	28 2 4
	218	[926]	JMP      	12	; to 231
	219	[927]	GETGLOBAL	33 -63	; table
	220	[927]	GETTABLE 	33 33 -64	; "insert"
	221	[927]	MOVE     	34 26
	222	[927]	GETGLOBAL	35 -21	; string
	223	[927]	GETTABLE 	35 35 -22	; "format"
	224	[927]	LOADK    	36 -68	; "    <item id=\"%s\" href=\"%s\" media-type=\"%s\"/>%s"
	225	[927]	GETTABLE 	37 32 -69	; "imgid"
	226	[927]	GETTABLE 	38 32 -70	; "imgpath"
	227	[927]	GETTABLE 	39 32 -47	; "mimetype"
	228	[927]	LOADK    	40 -71	; "\n"
	229	[927]	CALL     	35 6 0
	230	[927]	CALL     	33 0 1
	231	[926]	TFORLOOP 	28 2
	232	[927]	JMP      	-14	; to 219
	233	[931]	GETGLOBAL	28 -63	; table
	234	[931]	GETTABLE 	28 28 -64	; "insert"
	235	[931]	MOVE     	29 26
	236	[937]	LOADK    	30 -72	; "  </manifest>\n  <spine toc=\"ncx\">\n    <itemref idref=\"content\"/>\n  </spine>\n</package>\n"
	237	[931]	CALL     	28 3 1
	238	[938]	SELF     	28 24 -46	; "add"
	239	[938]	LOADK    	30 -73	; "OEBPS/content.opf"
	240	[938]	GETGLOBAL	31 -63	; table
	241	[938]	GETTABLE 	31 31 -74	; "concat"
	242	[938]	MOVE     	32 26
	243	[938]	CALL     	31 2 0
	244	[938]	CALL     	28 0 1
	245	[945]	SELF     	28 24 -46	; "add"
	246	[945]	LOADK    	30 -75	; "OEBPS/stylesheet.css"
	247	[1010]	LOADK    	31 -76	; "/* Make section headers looks left aligned and avoid some page breaks */\nh1, h2 {\n    page-break-before: always;\n    page-break-inside: avoid;\n    page-break-after: avoid;\n    text-align: start;\n}\nh3, h4, h5, h6 {\n    page-break-before: auto;\n    page-break-inside: avoid;\n    page-break-after: avoid;\n    text-align: start;\n}\n/* Styles for our centered titles on first page */\nh1.koreaderwikifrontpage, h5.koreaderwikifrontpage {\n    page-break-before: avoid;\n    text-align: center;\n    margin-top: 0;\n}\np.koreaderwikifrontpage {\n    font-style: italic;\n    font-size: 90%;\n    text-indent: 0;\n    margin: 1em 2em 1em 2em;\n}\nhr.koreaderwikifrontpage {\n    margin-left: 20%;\n    margin-right: 20%;\n    margin-bottom: 1.2em;\n}\n\n/* So many links, make them look like normal text except for underline */\na {\n    display:inline;\n    text-decoration: underline;\n    color: black;\n    font-weight: normal;\n}\n/* No underline for links without their href that we removed */\na.newwikinonexistent {\n    text-decoration: none;\n}\n\n/* Don't waste left margin for TOC, notes and other lists */\nul, ol {\n    margin-left: 0;\n}\nul:dir(rtl), ol:dir(rtl) {\n    margin-right: 0;\n}\n/* OL in Wikipedia pages may inherit their style-type from a wrapping div,\n * ensure they fallback to decimal with inheritance */\nbody {\n    list-style-type: decimal;\n}\nol.references {\n    list-style-type: inherit;\n}\n\n/* Show a box around image thumbnails */\ndiv.thumb {\n    border: dotted 1px black;\n    margin:  0.5em 2.5em 0.5em 2.5em;\n    padding: 0.5em 0.5em 0.2em 0.5em;\n    padding-top: "
	248	[1010]	TEST     	20 0 0
	249	[1010]	JMP      	3	; to 253
	250	[1010]	LOADK    	32 -77	; "0.5em"
	251	[1010]	TEST     	32 0 1
	252	[1010]	JMP      	1	; to 254
	253	[1010]	LOADK    	32 -78	; "0.15em"
	254	[1104]	LOADK    	33 -79	; ";\n    text-align: center;\n    font-size: 90%;\n    page-break-inside: avoid;\n}\n/* Allow main thumbnails to float */\nbody > div > div.thumb {\n    float: right !important;\n    /* Change some of their styles when floating */\n    -cr-only-if: float-floatboxes;\n        clear: right;\n        margin:  0 0 0.2em 0.5em !important;\n        font-size: 80% !important;\n    /* Ensure a fixed width when not in \"web\" render mode */\n    -cr-only-if: float-floatboxes -allow-style-w-h-absolute-units;\n        width: 33% !important;\n}\nbody > div:dir(rtl) > div.thumb { /* invert if RTL */\n    float: left !important;\n    -cr-only-if: float-floatboxes;\n        clear: left;\n        margin:  0 0.5em 0.2em 0 !important;\n}\n/* Allow original mix of left/right floats in web mode */\nbody > div > div.thumb.tleft {\n    -cr-only-if: float-floatboxes allow-style-w-h-absolute-units;\n        float: left !important;\n        clear: left;\n        margin:  0 0.5em 0.2em 0 !important;\n}\nbody > div > div.thumb.tright {\n    -cr-only-if: float-floatboxes allow-style-w-h-absolute-units;\n        float: right !important;\n        clear: right;\n        margin:  0 0 0.2em 0.5em !important;\n}\n\nbody > div > div.thumb img {\n    /* Make float's inner images 100% of their container's width when not in \"web\" mode */\n    -cr-only-if: float-floatboxes -allow-style-w-h-absolute-units;\n        width: 100% !important;\n        height: 100% !important;\n}\n\n/* Some other (usually wide) thumbnails are wrapped in a DIV.center:\n * avoid having them overflowing in web mode (no issue in other modes).\n * (Use \"width: auto\", as crengine does not support \"max-width:\") */\nbody > div > div.center > div.thumb * {\n    -cr-only-if: allow-style-w-h-absolute-units;\n        width: auto !important;\n}\n\n/* Style gallery and the galleryboxes it contains.\n/* LI.galleryboxes about the same topic may be in multiple UL.gallery\n * containers, and Wikipedia may group them by 3 or 4 in each container.\n * We'd rather want them in a single group, so they can be laid out\n * taking the full width depending on render mode and screen dpi.\n * So, make UL.gallery inline, and all its children inline-block.\n * The consecutive inline UL.gallery will be wrapped by crengine\n * in a single autoBoxing element, that we style a bit, hoping\n * Wikipedia properly have all its 1st level elements \"display:block\"\n * and we do not style other autoBoxed inlines at this level. */\nbody > div > ul.gallery,\nbody > div > autoBoxing > ul.gallery {\n    display: inline; /* keep them inline once autoBoxed */\n}\nbody > div > autoBoxing { /* created by previous style */\n    width: 100%;\n    margin-top: 1em;\n    margin-bottom: 1em;\n    clear: both;\n    /* Have non-full-width inline-blocks laid out centered */\n    text-align: center;\n}\nbody > div > ul.gallery > *,\nbody > div > autoBoxing > ul.gallery > * {\n    /* Make all ul.gallery children inline-block and taking 100% width\n     * so they feel like classically stacked display:block */\n    display: inline-block;\n    width: 100%;\n    /* Have gallerycaption and galleryboxes content centered */\n    text-align: center;\n}\n.gallerycaption {\n    font-weight: bold;\n    page-break-inside: avoid;\n    page-break-after: avoid;\n}\nli.gallerybox {\n    /* Style gallerybox just as main thumbs */\n    list-style-type: none;\n    border: dotted 1px black;\n    margin:  0.5em 2.5em 0.5em 2.5em !important;\n    padding: 0.5em 0.5em 0.2em 0.5em !important;\n    padding-top: "
	255	[1104]	TEST     	20 0 0
	256	[1104]	JMP      	3	; to 260
	257	[1104]	LOADK    	34 -77	; "0.5em"
	258	[1104]	TEST     	34 0 1
	259	[1104]	JMP      	1	; to 261
	260	[1104]	LOADK    	34 -78	; "0.15em"
	261	[1162]	LOADK    	35 -80	; " !important;\n    text-indent: 0;\n    font-size: 90%;\n    vertical-align: top; /* align them all to their top */\n    /* No float here, but use these to distinguish flat/book/web modes */\n    -cr-only-if: -float-floatboxes;\n        width: 100% !important; /* flat mode: force full width */\n    -cr-only-if: float-floatboxes;\n        /* Remove our wide horizontal margins in book/web modes */\n        margin:  0.5em 0.5em 0.5em 0.5em !important;\n    -cr-only-if: float-floatboxes -allow-style-w-h-absolute-units;\n        /* Set a fixed width when not in \"web\" mode */\n        width: 25% !important; /* will allow rows of 3 */\n    /* In web mode, allow the specified widths in HTML style attributes  */\n}\nli.gallerybox p {\n    /* Reset indent as we have everything centered */\n    text-indent: 0;\n}\nli.gallerybox div.thumb {\n    /* Remove thumb styling, which we have set on the gallerybox */\n    border: solid 1px white;\n    margin: 0;\n    padding: 0;\n}\nli.gallerybox div.thumb div {\n    /* Override this one often set in style=\"\" with various values */\n    margin: 0 !important;\n}\nli.gallerybox * {\n    /* Have sub elements take the full container width when not in \"web\" mode */\n    -cr-only-if: float-floatboxes -allow-style-w-h-absolute-units;\n        width: 100% !important;\n}\nli.gallerybox div.thumb img {\n    /* Make inline-block's inner images 100% of their container's width\n     * when not in \"web\" mode (same as previous, but with height */\n    -cr-only-if: float-floatboxes -allow-style-w-h-absolute-units;\n        width:  100% !important;\n        height: 100% !important;\n}\n\ntable {\n    margin-top: 1em;\n    margin-bottom: 1em;\n    /* Wikipedia tables are often set as float, make them full width When not floating */\n    -cr-only-if: -float-floatboxes;\n        width: 100% !important;\n}\n\n.citation {\n    font-style: italic;\n}\n/* hide some view/edit/discuss short links displayed as \"v m d\" */\n.nv-view, .nv-edit, .nv-talk {\n    display: none;\n}\n/* hiding .noprint may discard some interesting links */\n"
	262	[1162]	CONCAT   	31 31 35
	263	[945]	CALL     	28 4 1
	264	[1166]	NEWTABLE 	28 0 0
	265	[1167]	LOADK    	29 -30	; 0
	266	[1168]	LOADK    	30 -30	; 0
	267	[1169]	LOADK    	31 -81	; "</navPoint>"
	268	[1170]	LOADK    	32 -26	; 1
	269	[1172]	GETGLOBAL	33 -63	; table
	270	[1172]	GETTABLE 	33 33 -64	; "insert"
	271	[1172]	MOVE     	34 28
	272	[1172]	GETGLOBAL	35 -21	; string
	273	[1172]	GETTABLE 	35 35 -22	; "format"
	274	[1172]	LOADK    	36 -82	; "<navPoint id=\"navpoint-%s\" playOrder=\"%s\"><navLabel><text>%s</text></navLabel><content src=\"content.html\"/>"
	275	[1172]	MOVE     	37 32
	276	[1172]	MOVE     	38 32
	277	[1172]	MOVE     	39 11
	278	[1172]	CALL     	35 5 0
	279	[1172]	CALL     	33 0 1
	280	[1173]	GETGLOBAL	33 -63	; table
	281	[1173]	GETTABLE 	33 33 -64	; "insert"
	282	[1173]	MOVE     	34 28
	283	[1173]	MOVE     	35 31
	284	[1173]	CALL     	33 3 1
	285	[1175]	GETGLOBAL	33 -67	; ipairs
	286	[1175]	MOVE     	34 13
	287	[1175]	CALL     	33 2 4
	288	[1175]	JMP      	128	; to 417
	289	[1176]	ADD      	32 32 -26	; - 1
	290	[1180]	GETTABLE 	38 37 -83	; "anchor"
	291	[1180]	SELF     	38 38 -13	; "gsub"
	292	[1180]	LOADK    	40 -18	; "&"
	293	[1180]	LOADK    	41 -84	; "&amp;"
	294	[1180]	CALL     	38 4 2
	295	[1180]	SELF     	38 38 -13	; "gsub"
	296	[1180]	LOADK    	40 -85	; "\""
	297	[1180]	LOADK    	41 -86	; "&quot;"
	298	[1180]	CALL     	38 4 2
	299	[1180]	SELF     	38 38 -13	; "gsub"
	300	[1180]	LOADK    	40 -87	; ">"
	301	[1180]	LOADK    	41 -88	; "&gt;"
	302	[1180]	CALL     	38 4 2
	303	[1180]	SELF     	38 38 -13	; "gsub"
	304	[1180]	LOADK    	40 -89	; "<"
	305	[1180]	LOADK    	41 -90	; "&lt;"
	306	[1180]	CALL     	38 4 2
	307	[1181]	GETGLOBAL	39 -21	; string
	308	[1181]	GETTABLE 	39 39 -22	; "format"
	309	[1181]	LOADK    	40 -91	; "%s %s"
	310	[1181]	GETTABLE 	41 37 -92	; "number"
	311	[1181]	GETTABLE 	42 37 -93	; "line"
	312	[1181]	CALL     	39 4 2
	313	[1184]	SELF     	40 39 -13	; "gsub"
	314	[1184]	LOADK    	42 -94	; "(%b<>)"
	315	[1184]	LOADK    	43 -40	; ""
	316	[1184]	CALL     	40 4 2
	317	[1184]	MOVE     	39 40
	318	[1187]	GETUPVAL 	40 2	; util
	319	[1187]	GETTABLE 	40 40 -17	; "htmlEntitiesToUtf8"
	320	[1187]	MOVE     	41 39
	321	[1187]	CALL     	40 2 2
	322	[1187]	SELF     	40 40 -13	; "gsub"
	323	[1187]	LOADK    	42 -18	; "&"
	324	[1187]	LOADK    	43 -19	; "&#38;"
	325	[1187]	CALL     	40 4 2
	326	[1187]	SELF     	40 40 -13	; "gsub"
	327	[1187]	LOADK    	42 -87	; ">"
	328	[1187]	LOADK    	43 -88	; "&gt;"
	329	[1187]	CALL     	40 4 2
	330	[1187]	SELF     	40 40 -13	; "gsub"
	331	[1187]	LOADK    	42 -89	; "<"
	332	[1187]	LOADK    	43 -90	; "&lt;"
	333	[1187]	CALL     	40 4 2
	334	[1187]	MOVE     	39 40
	335	[1188]	GETTABLE 	40 37 -95	; "toclevel"
	336	[1189]	LT       	0 29 40
	337	[1189]	JMP      	1	; to 339
	338	[1190]	MOVE     	29 40
	339	[1192]	EQ       	0 40 30
	340	[1192]	JMP      	6	; to 347
	341	[1193]	GETGLOBAL	41 -63	; table
	342	[1193]	GETTABLE 	41 41 -64	; "insert"
	343	[1193]	MOVE     	42 28
	344	[1193]	MOVE     	43 31
	345	[1193]	CALL     	41 3 1
	346	[1193]	JMP      	47	; to 394
	347	[1194]	LT       	0 40 30
	348	[1194]	JMP      	15	; to 364
	349	[1195]	GETGLOBAL	41 -63	; table
	350	[1195]	GETTABLE 	41 41 -64	; "insert"
	351	[1195]	MOVE     	42 28
	352	[1195]	MOVE     	43 31
	353	[1195]	CALL     	41 3 1
	354	[1196]	LT       	0 40 30
	355	[1196]	JMP      	38	; to 394
	356	[1197]	GETGLOBAL	41 -63	; table
	357	[1197]	GETTABLE 	41 41 -64	; "insert"
	358	[1197]	MOVE     	42 28
	359	[1197]	MOVE     	43 31
	360	[1197]	CALL     	41 3 1
	361	[1198]	SUB      	30 30 -26	; - 1
	362	[1198]	JMP      	-9	; to 354
	363	[1199]	JMP      	30	; to 394
	364	[1200]	ADD      	41 30 -26	; - 1
	365	[1200]	LT       	0 41 40
	366	[1200]	JMP      	27	; to 394
	367	[1204]	ADD      	41 30 -26	; - 1
	368	[1204]	LT       	0 41 40
	369	[1204]	JMP      	24	; to 394
	370	[1205]	GETGLOBAL	41 -63	; table
	371	[1205]	GETTABLE 	41 41 -64	; "insert"
	372	[1205]	MOVE     	42 28
	373	[1205]	LOADK    	43 -71	; "\n"
	374	[1205]	LOADK    	44 -15	; " "
	375	[1205]	SELF     	44 44 -96	; "rep"
	376	[1205]	MOVE     	46 30
	377	[1205]	CALL     	44 3 2
	378	[1205]	CONCAT   	43 43 44
	379	[1205]	CALL     	41 3 1
	380	[1206]	GETGLOBAL	41 -63	; table
	381	[1206]	GETTABLE 	41 41 -64	; "insert"
	382	[1206]	MOVE     	42 28
	383	[1206]	GETGLOBAL	43 -21	; string
	384	[1206]	GETTABLE 	43 43 -22	; "format"
	385	[1206]	LOADK    	44 -97	; "<navPoint id=\"navpoint-%s\" playOrder=\"%s\"><navLabel><text>-</text></navLabel><content src=\"content.html#%s\"/>"
	386	[1206]	MOVE     	45 32
	387	[1206]	MOVE     	46 32
	388	[1206]	MOVE     	47 38
	389	[1206]	CALL     	43 5 0
	390	[1206]	CALL     	41 0 1
	391	[1207]	ADD      	30 30 -26	; - 1
	392	[1208]	ADD      	32 32 -26	; - 1
	393	[1208]	JMP      	-27	; to 367
	394	[1213]	MOVE     	30 40
	395	[1214]	GETGLOBAL	41 -63	; table
	396	[1214]	GETTABLE 	41 41 -64	; "insert"
	397	[1214]	MOVE     	42 28
	398	[1214]	LOADK    	43 -71	; "\n"
	399	[1214]	LOADK    	44 -15	; " "
	400	[1214]	SELF     	44 44 -96	; "rep"
	401	[1214]	MOVE     	46 30
	402	[1214]	CALL     	44 3 2
	403	[1214]	CONCAT   	43 43 44
	404	[1214]	CALL     	41 3 1
	405	[1215]	GETGLOBAL	41 -63	; table
	406	[1215]	GETTABLE 	41 41 -64	; "insert"
	407	[1215]	MOVE     	42 28
	408	[1215]	GETGLOBAL	43 -21	; string
	409	[1215]	GETTABLE 	43 43 -22	; "format"
	410	[1215]	LOADK    	44 -98	; "<navPoint id=\"navpoint-%s\" playOrder=\"%s\"><navLabel><text>%s</text></navLabel><content src=\"content.html#%s\"/>"
	411	[1215]	MOVE     	45 32
	412	[1215]	MOVE     	46 32
	413	[1215]	MOVE     	47 39
	414	[1215]	MOVE     	48 38
	415	[1215]	CALL     	43 6 0
	416	[1215]	CALL     	41 0 1
	417	[1175]	TFORLOOP 	33 2
	418	[1215]	JMP      	-130	; to 289
	419	[1218]	LT       	0 -30 30	; 0 -
	420	[1218]	JMP      	7	; to 428
	421	[1219]	GETGLOBAL	33 -63	; table
	422	[1219]	GETTABLE 	33 33 -64	; "insert"
	423	[1219]	MOVE     	34 28
	424	[1219]	MOVE     	35 31
	425	[1219]	CALL     	33 3 1
	426	[1220]	SUB      	30 30 -26	; - 1
	427	[1220]	JMP      	-9	; to 419
	428	[1223]	GETGLOBAL	33 -63	; table
	429	[1223]	GETTABLE 	33 33 -64	; "insert"
	430	[1223]	MOVE     	34 28
	431	[1223]	LOADK    	35 -26	; 1
	432	[1223]	GETGLOBAL	36 -21	; string
	433	[1223]	GETTABLE 	36 36 -22	; "format"
	434	[1237]	LOADK    	37 -99	; "<?xml version='1.0' encoding='utf-8'?>\n<!DOCTYPE ncx PUBLIC \"-//NISO//DTD ncx 2005-1//EN\" \"http://www.daisy.org/z3986/2005/ncx-2005-1.dtd\">\n<ncx xmlns=\"http://www.daisy.org/z3986/2005/ncx/\" version=\"2005-1\">\n  <head>\n    <meta name=\"dtb:uid\" content=\"%s\"/>\n    <meta name=\"dtb:depth\" content=\"%s\"/>\n    <meta name=\"dtb:totalPageCount\" content=\"0\"/>\n    <meta name=\"dtb:maxPageNumber\" content=\"0\"/>\n  </head>\n  <docTitle>\n    <text>%s</text>\n  </docTitle>\n  <navMap>\n"
	435	[1237]	MOVE     	38 14
	436	[1237]	MOVE     	39 29
	437	[1237]	MOVE     	40 11
	438	[1223]	CALL     	36 5 0
	439	[1223]	CALL     	33 0 1
	440	[1239]	GETGLOBAL	33 -63	; table
	441	[1239]	GETTABLE 	33 33 -64	; "insert"
	442	[1239]	MOVE     	34 28
	443	[1242]	LOADK    	35 -100	; "  </navMap>\n</ncx>\n"
	444	[1239]	CALL     	33 3 1
	445	[1243]	SELF     	33 24 -46	; "add"
	446	[1243]	LOADK    	35 -101	; "OEBPS/toc.ncx"
	447	[1243]	GETGLOBAL	36 -63	; table
	448	[1243]	GETTABLE 	36 36 -74	; "concat"
	449	[1243]	MOVE     	37 28
	450	[1243]	CALL     	36 2 0
	451	[1243]	CALL     	33 0 1
	452	[1251]	SELF     	33 10 -13	; "gsub"
	453	[1251]	LOADK    	35 -102	; "<a[^>]*>%s*(<%s*img [^>]*>)%s*</a>"
	454	[1251]	LOADK    	36 -103	; "%1"
	455	[1251]	CALL     	33 4 2
	456	[1251]	MOVE     	10 33
	457	[1261]	SELF     	33 10 -13	; "gsub"
	458	[1261]	LOADK    	35 -104	; "<math xmlns=\"http://www.w3.org/1998/Math/MathML\".-</math>"
	459	[1261]	LOADK    	36 -40	; ""
	460	[1261]	CALL     	33 4 2
	461	[1261]	MOVE     	10 33
	462	[1272]	CLOSURE  	33 1	; 0x7ff95cc0a3a0
	463	[1273]	SELF     	34 10 -13	; "gsub"
	464	[1273]	LOADK    	36 -105	; "href=\"https?://([^%.]+).wikipedia.org/wiki/([^\"]*)\""
	465	[1273]	MOVE     	37 33
	466	[1273]	CALL     	34 4 2
	467	[1273]	MOVE     	10 34
	468	[1278]	CLOSURE  	34 2	; 0x7ff95cc0fb90
	469	[1278]	MOVE     	0 8
	470	[1279]	SELF     	35 10 -13	; "gsub"
	471	[1279]	LOADK    	37 -106	; "href=\"/wiki/([^\"]*)\""
	472	[1279]	MOVE     	38 34
	473	[1279]	CALL     	35 4 2
	474	[1279]	MOVE     	10 35
	475	[1285]	SELF     	35 10 -13	; "gsub"
	476	[1285]	LOADK    	37 -107	; "<a[^>]* class=\"new\"[^>]*>"
	477	[1285]	LOADK    	38 -108	; "<a class=\"newwikinonexistent\">"
	478	[1285]	CALL     	35 4 2
	479	[1285]	MOVE     	10 35
	480	[1288]	SELF     	35 10 -13	; "gsub"
	481	[1288]	LOADK    	37 -109	; "href=\"//"
	482	[1288]	LOADK    	38 -110	; "href=\"https://"
	483	[1288]	CALL     	35 4 2
	484	[1288]	MOVE     	10 35
	485	[1290]	GETTABLE 	35 0 -111	; "wiki_prettify"
	486	[1290]	TEST     	35 0 0
	487	[1290]	JMP      	48	; to 536
	488	[1292]	SELF     	35 10 -13	; "gsub"
	489	[1292]	LOADK    	37 -112	; "<h1>"
	490	[1292]	LOADK    	38 -113	; "<h1> "
	491	[1292]	GETUPVAL 	39 6	; h1_sym
	492	[1292]	LOADK    	40 -15	; " "
	493	[1292]	CONCAT   	38 38 40
	494	[1292]	CALL     	35 4 2
	495	[1292]	MOVE     	10 35
	496	[1293]	SELF     	35 10 -13	; "gsub"
	497	[1293]	LOADK    	37 -114	; "<h2>"
	498	[1293]	LOADK    	38 -115	; "<h2> "
	499	[1293]	GETUPVAL 	39 7	; h2_sym
	500	[1293]	LOADK    	40 -15	; " "
	501	[1293]	CONCAT   	38 38 40
	502	[1293]	CALL     	35 4 2
	503	[1293]	MOVE     	10 35
	504	[1294]	SELF     	35 10 -13	; "gsub"
	505	[1294]	LOADK    	37 -116	; "<h3>"
	506	[1294]	LOADK    	38 -117	; "<h3> "
	507	[1294]	GETUPVAL 	39 8	; h3_sym
	508	[1294]	LOADK    	40 -15	; " "
	509	[1294]	CONCAT   	38 38 40
	510	[1294]	CALL     	35 4 2
	511	[1294]	MOVE     	10 35
	512	[1295]	SELF     	35 10 -13	; "gsub"
	513	[1295]	LOADK    	37 -118	; "<h4>"
	514	[1295]	LOADK    	38 -119	; "<h4> "
	515	[1295]	GETUPVAL 	39 9	; h4_sym
	516	[1295]	LOADK    	40 -15	; " "
	517	[1295]	CONCAT   	38 38 40
	518	[1295]	CALL     	35 4 2
	519	[1295]	MOVE     	10 35
	520	[1296]	SELF     	35 10 -13	; "gsub"
	521	[1296]	LOADK    	37 -120	; "<h5>"
	522	[1296]	LOADK    	38 -121	; "<h5> "
	523	[1296]	GETUPVAL 	39 10	; h5_sym
	524	[1296]	LOADK    	40 -15	; " "
	525	[1296]	CONCAT   	38 38 40
	526	[1296]	CALL     	35 4 2
	527	[1296]	MOVE     	10 35
	528	[1297]	SELF     	35 10 -13	; "gsub"
	529	[1297]	LOADK    	37 -122	; "<h6>"
	530	[1297]	LOADK    	38 -123	; "<h6> "
	531	[1297]	GETUPVAL 	39 11	; h6_sym
	532	[1297]	LOADK    	40 -15	; " "
	533	[1297]	CONCAT   	38 38 40
	534	[1297]	CALL     	35 4 2
	535	[1297]	MOVE     	10 35
	536	[1305]	GETUPVAL 	35 5	; T
	537	[1305]	GETUPVAL 	36 0	; _
	538	[1305]	LOADK    	37 -124	; "Saved on %1"
	539	[1305]	CALL     	36 2 2
	540	[1305]	GETGLOBAL	37 -125	; os
	541	[1305]	GETTABLE 	37 37 -126	; "date"
	542	[1305]	LOADK    	38 -127	; "%b %d, %Y %H:%M:%S"
	543	[1305]	CALL     	37 2 0
	544	[1305]	CALL     	35 0 2
	545	[1306]	GETGLOBAL	36 -21	; string
	546	[1306]	GETTABLE 	36 36 -22	; "format"
	547	[1306]	LOADK    	37 -128	; "<a href=\"%s/wiki/%s\">%s</a>"
	548	[1306]	MOVE     	38 8
	549	[1306]	SELF     	39 2 -13	; "gsub"
	550	[1306]	LOADK    	41 -15	; " "
	551	[1306]	LOADK    	42 -14	; "_"
	552	[1306]	CALL     	39 4 2
	553	[1306]	GETUPVAL 	40 0	; _
	554	[1306]	LOADK    	41 -129	; "online version"
	555	[1306]	CALL     	40 2 0
	556	[1306]	CALL     	36 0 2
	557	[1307]	GETUPVAL 	37 5	; T
	558	[1307]	GETUPVAL 	38 0	; _
	559	[1307]	LOADK    	39 -130	; "See %1 for up-to-date content"
	560	[1307]	CALL     	38 2 2
	561	[1307]	MOVE     	39 36
	562	[1307]	CALL     	37 3 2
	563	[1309]	LOADK    	38 -40	; ""
	564	[1310]	SELF     	39 0 -131	; "isWikipediaLanguageRTL"
	565	[1310]	MOVE     	41 3
	566	[1310]	CALL     	39 3 2
	567	[1310]	TEST     	39 0 0
	568	[1310]	JMP      	1	; to 570
	569	[1311]	LOADK    	38 -132	; " dir=\"rtl\""
	570	[1313]	SELF     	39 24 -46	; "add"
	571	[1313]	LOADK    	41 -133	; "OEBPS/content.html"
	572	[1313]	GETGLOBAL	42 -21	; string
	573	[1313]	GETTABLE 	42 42 -22	; "format"
	574	[1327]	LOADK    	43 -134	; "<html xmlns=\"http://www.w3.org/1999/xhtml\"%s>\n<head>\n  <title>%s</title>\n  <link type=\"text/css\" rel=\"stylesheet\" href=\"stylesheet.css\"/>\n</head>\n<body>\n<h1 class=\"koreaderwikifrontpage\">%s</h1>\n<h5 class=\"koreaderwikifrontpage\">Wikipedia %s</h5>\n<p class=\"koreaderwikifrontpage\">%s<br/>%s</p>\n<hr class=\"koreaderwikifrontpage\"/>\n%s\n</body>\n</html>\n"
	575	[1327]	MOVE     	44 38
	576	[1327]	MOVE     	45 11
	577	[1327]	MOVE     	46 12
	578	[1327]	SELF     	47 3 -66	; "upper"
	579	[1327]	CALL     	47 2 2
	580	[1327]	MOVE     	48 35
	581	[1327]	MOVE     	49 37
	582	[1327]	MOVE     	50 10
	583	[1313]	CALL     	42 9 0
	584	[1313]	CALL     	39 0 1
	585	[1331]	GETGLOBAL	39 -135	; collectgarbage
	586	[1331]	CALL     	39 1 1
	587	[1332]	GETGLOBAL	39 -135	; collectgarbage
	588	[1332]	CALL     	39 1 1
	589	[1336]	TEST     	20 0 0
	590	[1336]	JMP      	86	; to 677
	591	[1337]	LEN      	39 15
	592	[1338]	GETGLOBAL	40 -67	; ipairs
	593	[1338]	MOVE     	41 15
	594	[1338]	CALL     	40 2 4
	595	[1338]	JMP      	79	; to 675
	596	[1342]	SELF     	45 5 -3	; "info"
	597	[1342]	GETUPVAL 	47 5	; T
	598	[1342]	GETUPVAL 	48 0	; _
	599	[1342]	LOADK    	49 -136	; "Retrieving image %1 / %2 \226\128\166"
	600	[1342]	CALL     	48 2 2
	601	[1342]	MOVE     	49 43
	602	[1342]	MOVE     	50 39
	603	[1342]	CALL     	47 4 2
	604	[1342]	LE       	1 -8 43	; 2 -
	605	[1342]	JMP      	1	; to 607
	606	[1342]	LOADBOOL 	48 0 1
	607	[1342]	LOADBOOL 	48 1 0
	608	[1342]	CALL     	45 4 2
	609	[1343]	TEST     	45 0 1
	610	[1343]	JMP      	2	; to 613
	611	[1344]	LOADBOOL 	9 1 0
	612	[1345]	JMP      	64	; to 677
	613	[1347]	GETTABLE 	46 44 -137	; "src"
	614	[1348]	TEST     	21 0 0
	615	[1348]	JMP      	4	; to 620
	616	[1348]	GETTABLE 	47 44 -138	; "src2x"
	617	[1348]	TEST     	47 0 0
	618	[1348]	JMP      	1	; to 620
	619	[1349]	GETTABLE 	46 44 -138	; "src2x"
	620	[1351]	GETUPVAL 	47 3	; logger
	621	[1351]	GETTABLE 	47 47 -28	; "dbg"
	622	[1351]	LOADK    	48 -139	; "Getting img "
	623	[1351]	MOVE     	49 46
	624	[1351]	CALL     	47 3 1
	625	[1352]	GETUPVAL 	47 12	; getUrlContent
	626	[1352]	MOVE     	48 46
	627	[1352]	CALL     	47 2 3
	628	[1354]	TEST     	47 0 0
	629	[1354]	JMP      	6	; to 636
	630	[1355]	GETUPVAL 	49 3	; logger
	631	[1355]	GETTABLE 	49 49 -28	; "dbg"
	632	[1355]	LOADK    	50 -140	; "success, size:"
	633	[1355]	LEN      	51 48
	634	[1355]	CALL     	49 3 1
	635	[1355]	JMP      	5	; to 641
	636	[1357]	GETUPVAL 	49 3	; logger
	637	[1357]	GETTABLE 	49 49 -3	; "info"
	638	[1357]	LOADK    	50 -141	; "failed fetching:"
	639	[1357]	MOVE     	51 46
	640	[1357]	CALL     	49 3 1
	641	[1359]	TEST     	47 0 0
	642	[1359]	JMP      	13	; to 656
	643	[1361]	LOADBOOL 	49 1 0
	644	[1362]	GETTABLE 	50 44 -47	; "mimetype"
	645	[1362]	EQ       	0 50 -142	; - "image/svg+xml"
	646	[1362]	JMP      	1	; to 648
	647	[1363]	LOADBOOL 	49 0 0
	648	[1365]	SELF     	50 24 -46	; "add"
	649	[1365]	LOADK    	52 -143	; "OEBPS/"
	650	[1365]	GETTABLE 	53 44 -70	; "imgpath"
	651	[1365]	CONCAT   	52 52 53
	652	[1365]	MOVE     	53 48
	653	[1365]	MOVE     	54 49
	654	[1365]	CALL     	50 5 1
	655	[1365]	JMP      	19	; to 675
	656	[1367]	SELF     	49 5 -31	; "confirm"
	657	[1367]	GETUPVAL 	51 5	; T
	658	[1367]	GETUPVAL 	52 0	; _
	659	[1367]	LOADK    	53 -144	; "Downloading image %1 failed. Continue anyway?"
	660	[1367]	CALL     	52 2 2
	661	[1367]	MOVE     	53 43
	662	[1367]	CALL     	51 3 2
	663	[1367]	GETUPVAL 	52 0	; _
	664	[1367]	LOADK    	53 -145	; "Stop"
	665	[1367]	CALL     	52 2 2
	666	[1367]	GETUPVAL 	53 0	; _
	667	[1367]	LOADK    	54 -146	; "Continue"
	668	[1367]	CALL     	53 2 0
	669	[1367]	CALL     	49 0 2
	670	[1367]	MOVE     	45 49
	671	[1368]	TEST     	45 0 1
	672	[1368]	JMP      	2	; to 675
	673	[1369]	LOADBOOL 	9 1 0
	674	[1370]	JMP      	2	; to 677
	675	[1338]	TFORLOOP 	40 2
	676	[1372]	JMP      	-81	; to 596
	677	[1377]	TEST     	9 0 0
	678	[1377]	JMP      	14	; to 693
	679	[1378]	SELF     	39 5 -31	; "confirm"
	680	[1378]	GETUPVAL 	41 0	; _
	681	[1378]	LOADK    	42 -147	; "Download did not complete.\nDo you want to create an EPUB with the already downloaded images?"
	682	[1378]	CALL     	41 2 2
	683	[1378]	GETUPVAL 	42 0	; _
	684	[1378]	LOADK    	43 -148	; "Don't create"
	685	[1378]	CALL     	42 2 2
	686	[1378]	GETUPVAL 	43 0	; _
	687	[1378]	LOADK    	44 -149	; "Create"
	688	[1378]	CALL     	43 2 0
	689	[1378]	CALL     	39 0 2
	690	[1378]	TEST     	39 0 0
	691	[1378]	JMP      	1	; to 693
	692	[1379]	LOADBOOL 	9 0 0
	693	[1382]	TEST     	9 0 0
	694	[1382]	JMP      	6	; to 701
	695	[1383]	SELF     	39 5 -3	; "info"
	696	[1383]	GETUPVAL 	41 0	; _
	697	[1383]	LOADK    	42 -150	; "Canceled. Cleaning up\226\128\166"
	698	[1383]	CALL     	41 2 0
	699	[1383]	CALL     	39 0 1
	700	[1383]	JMP      	5	; to 706
	701	[1385]	SELF     	39 5 -3	; "info"
	702	[1385]	GETUPVAL 	41 0	; _
	703	[1385]	LOADK    	42 -151	; "Packing EPUB\226\128\166"
	704	[1385]	CALL     	41 2 0
	705	[1385]	CALL     	39 0 1
	706	[1387]	SELF     	39 24 -152	; "close"
	707	[1387]	CALL     	39 2 1
	708	[1389]	GETUPVAL 	39 1	; ffiutil
	709	[1389]	GETTABLE 	39 39 -153	; "usleep"
	710	[1389]	LOADK    	40 -154	; 300000
	711	[1389]	CALL     	39 2 1
	712	[1390]	SELF     	39 5 -9	; "reset"
	713	[1390]	CALL     	39 2 1
	714	[1392]	TEST     	9 0 0
	715	[1392]	JMP      	13	; to 729
	716	[1394]	GETGLOBAL	39 -52	; lfs
	717	[1394]	GETTABLE 	39 39 -53	; "attributes"
	718	[1394]	MOVE     	40 22
	719	[1394]	LOADK    	41 -55	; "mode"
	720	[1394]	CALL     	39 3 2
	721	[1394]	EQ       	0 39 -56	; - "file"
	722	[1394]	JMP      	4	; to 727
	723	[1395]	GETGLOBAL	39 -125	; os
	724	[1395]	GETTABLE 	39 39 -155	; "remove"
	725	[1395]	MOVE     	40 22
	726	[1395]	CALL     	39 2 1
	727	[1397]	LOADBOOL 	39 0 0
	728	[1397]	RETURN   	39 2
	729	[1401]	GETGLOBAL	39 -125	; os
	730	[1401]	GETTABLE 	39 39 -156	; "rename"
	731	[1401]	MOVE     	40 22
	732	[1401]	MOVE     	41 1
	733	[1401]	CALL     	39 3 1
	734	[1402]	GETUPVAL 	39 3	; logger
	735	[1402]	GETTABLE 	39 39 -3	; "info"
	736	[1402]	LOADK    	40 -157	; "successfully created:"
	737	[1402]	MOVE     	41 1
	738	[1402]	CALL     	39 3 1
	739	[1406]	GETGLOBAL	39 -135	; collectgarbage
	740	[1406]	CALL     	39 1 1
	741	[1407]	GETGLOBAL	39 -135	; collectgarbage
	742	[1407]	CALL     	39 1 1
	743	[1408]	LOADBOOL 	39 1 0
	744	[1408]	RETURN   	39 2
	745	[1409]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:734,827> (217 instructions, 868 bytes at 0x7ff95cc0da00)
1 param, 16 slots, 7 upvalues, 14 locals, 48 constants, 0 functions
	1	[735]	SELF     	1 0 -1	; "match"
	2	[735]	LOADK    	3 -2	; "src=\"([^\"]*)\""
	3	[735]	CALL     	1 3 2
	4	[736]	EQ       	1 1 -3	; - nil
	5	[736]	JMP      	2	; to 8
	6	[736]	EQ       	0 1 -4	; - ""
	7	[736]	JMP      	7	; to 15
	8	[737]	GETUPVAL 	2 0	; logger
	9	[737]	GETTABLE 	2 2 -5	; "info"
	10	[737]	LOADK    	3 -6	; "no src found in "
	11	[737]	MOVE     	4 0
	12	[737]	CALL     	2 3 1
	13	[738]	LOADNIL  	2 2
	14	[738]	RETURN   	2 2
	15	[740]	SELF     	2 1 -7	; "sub"
	16	[740]	LOADK    	4 -8	; 1
	17	[740]	LOADK    	5 -9	; 2
	18	[740]	CALL     	2 4 2
	19	[740]	EQ       	0 2 -10	; - "//"
	20	[740]	JMP      	4	; to 25
	21	[741]	LOADK    	2 -11	; "https:"
	22	[741]	MOVE     	3 1
	23	[741]	CONCAT   	1 2 3
	24	[741]	JMP      	9	; to 34
	25	[742]	SELF     	2 1 -7	; "sub"
	26	[742]	LOADK    	4 -8	; 1
	27	[742]	LOADK    	5 -8	; 1
	28	[742]	CALL     	2 4 2
	29	[742]	EQ       	0 2 -12	; - "/"
	30	[742]	JMP      	3	; to 34
	31	[743]	GETUPVAL 	2 1	; wiki_base_url
	32	[743]	MOVE     	3 1
	33	[743]	CONCAT   	1 2 3
	34	[755]	SELF     	2 1 -13	; "find"
	35	[755]	LOADK    	4 -14	; "/math/render/svg/"
	36	[755]	CALL     	2 3 2
	37	[755]	TEST     	2 0 0
	38	[755]	JMP      	5	; to 44
	39	[756]	SELF     	2 1 -15	; "gsub"
	40	[756]	LOADK    	4 -14	; "/math/render/svg/"
	41	[756]	LOADK    	5 -16	; "/math/render/png/"
	42	[756]	CALL     	2 4 2
	43	[756]	MOVE     	1 2
	44	[758]	LOADNIL  	2 2
	45	[759]	GETUPVAL 	3 2	; seen_images
	46	[759]	GETTABLE 	3 3 1
	47	[759]	TEST     	3 0 0
	48	[759]	JMP      	3	; to 52
	49	[760]	GETUPVAL 	3 2	; seen_images
	50	[760]	GETTABLE 	2 3 1
	51	[760]	JMP      	128	; to 180
	52	[762]	MOVE     	3 1
	53	[763]	SELF     	4 3 -13	; "find"
	54	[763]	LOADK    	6 -17	; "?"
	55	[763]	CALL     	4 3 2
	56	[763]	TEST     	4 0 0
	57	[763]	JMP      	4	; to 62
	58	[764]	SELF     	4 3 -1	; "match"
	59	[764]	LOADK    	6 -18	; "(.-)%?"
	60	[764]	CALL     	4 3 2
	61	[764]	MOVE     	3 4
	62	[766]	SELF     	4 3 -1	; "match"
	63	[766]	LOADK    	6 -19	; ".*%.(%S%S%S?%S?%S?)$"
	64	[766]	CALL     	4 3 2
	65	[767]	EQ       	1 4 -3	; - nil
	66	[767]	JMP      	2	; to 69
	67	[767]	EQ       	0 4 -4	; - ""
	68	[767]	JMP      	14	; to 83
	69	[768]	SELF     	5 3 -13	; "find"
	70	[768]	LOADK    	7 -16	; "/math/render/png/"
	71	[768]	CALL     	5 3 2
	72	[768]	TEST     	5 0 0
	73	[768]	JMP      	2	; to 76
	74	[769]	LOADK    	4 -20	; "png"
	75	[769]	JMP      	7	; to 83
	76	[772]	GETUPVAL 	5 0	; logger
	77	[772]	GETTABLE 	5 5 -5	; "info"
	78	[772]	LOADK    	6 -21	; "no file extension found in "
	79	[772]	MOVE     	7 1
	80	[772]	CALL     	5 3 1
	81	[773]	LOADNIL  	5 5
	82	[773]	RETURN   	5 2
	83	[776]	SELF     	5 4 -22	; "lower"
	84	[776]	CALL     	5 2 2
	85	[776]	MOVE     	4 5
	86	[777]	GETGLOBAL	5 -23	; string
	87	[777]	GETTABLE 	5 5 -24	; "format"
	88	[777]	LOADK    	6 -25	; "img%05d"
	89	[777]	GETUPVAL 	7 3	; imagenum
	90	[777]	CALL     	5 3 2
	91	[778]	GETGLOBAL	6 -23	; string
	92	[778]	GETTABLE 	6 6 -24	; "format"
	93	[778]	LOADK    	7 -26	; "images/%s.%s"
	94	[778]	MOVE     	8 5
	95	[778]	MOVE     	9 4
	96	[778]	CALL     	6 4 2
	97	[779]	GETUPVAL 	7 4	; ext_to_mimetype
	98	[779]	GETTABLE 	7 7 4
	99	[779]	TEST     	7 0 1
	100	[779]	JMP      	1	; to 102
	101	[779]	LOADK    	7 -4	; ""
	102	[780]	GETGLOBAL	8 -27	; tonumber
	103	[780]	SELF     	9 0 -1	; "match"
	104	[780]	LOADK    	11 -28	; "width=\"([^\"]*)\""
	105	[780]	CALL     	9 3 0
	106	[780]	CALL     	8 0 2
	107	[781]	GETGLOBAL	9 -27	; tonumber
	108	[781]	SELF     	10 0 -1	; "match"
	109	[781]	LOADK    	12 -29	; "height=\"([^\"]*)\""
	110	[781]	CALL     	10 3 0
	111	[781]	CALL     	9 0 2
	112	[783]	LOADNIL  	10 10
	113	[784]	SELF     	11 0 -1	; "match"
	114	[784]	LOADK    	13 -30	; "srcset=\"([^\"]*)\""
	115	[784]	CALL     	11 3 2
	116	[785]	TEST     	11 0 0
	117	[785]	JMP      	29	; to 147
	118	[786]	LOADK    	12 -31	; " "
	119	[786]	MOVE     	13 11
	120	[786]	LOADK    	14 -32	; ", "
	121	[786]	CONCAT   	11 12 14
	122	[787]	SELF     	12 11 -1	; "match"
	123	[787]	LOADK    	14 -33	; " (%S+) 2x, "
	124	[787]	CALL     	12 3 2
	125	[787]	MOVE     	10 12
	126	[788]	TEST     	10 0 0
	127	[788]	JMP      	19	; to 147
	128	[789]	SELF     	12 10 -7	; "sub"
	129	[789]	LOADK    	14 -8	; 1
	130	[789]	LOADK    	15 -9	; 2
	131	[789]	CALL     	12 4 2
	132	[789]	EQ       	0 12 -10	; - "//"
	133	[789]	JMP      	4	; to 138
	134	[790]	LOADK    	12 -11	; "https:"
	135	[790]	MOVE     	13 10
	136	[790]	CONCAT   	10 12 13
	137	[790]	JMP      	9	; to 147
	138	[791]	SELF     	12 10 -7	; "sub"
	139	[791]	LOADK    	14 -8	; 1
	140	[791]	LOADK    	15 -8	; 1
	141	[791]	CALL     	12 4 2
	142	[791]	EQ       	0 12 -12	; - "/"
	143	[791]	JMP      	3	; to 147
	144	[792]	GETUPVAL 	12 1	; wiki_base_url
	145	[792]	MOVE     	13 10
	146	[792]	CONCAT   	10 12 13
	147	[796]	NEWTABLE 	12 0 7
	148	[797]	SETTABLE 	12 -34 5	; "imgid" -
	149	[798]	SETTABLE 	12 -35 6	; "imgpath" -
	150	[799]	SETTABLE 	12 -36 1	; "src" -
	151	[800]	SETTABLE 	12 -37 10	; "src2x" -
	152	[801]	SETTABLE 	12 -38 7	; "mimetype" -
	153	[802]	SETTABLE 	12 -39 8	; "width" -
	154	[803]	SETTABLE 	12 -40 9	; "height" -
	155	[804]	MOVE     	2 12
	156	[805]	GETGLOBAL	12 -41	; table
	157	[805]	GETTABLE 	12 12 -42	; "insert"
	158	[805]	GETUPVAL 	13 5	; images
	159	[805]	MOVE     	14 2
	160	[805]	CALL     	12 3 1
	161	[806]	GETUPVAL 	12 2	; seen_images
	162	[806]	SETTABLE 	12 1 2
	163	[808]	GETUPVAL 	12 6	; cover_imgid
	164	[808]	TEST     	12 0 1
	165	[808]	JMP      	11	; to 177
	166	[808]	TEST     	8 0 0
	167	[808]	JMP      	9	; to 177
	168	[808]	LT       	0 -43 8	; 50 -
	169	[808]	JMP      	7	; to 177
	170	[808]	TEST     	9 0 0
	171	[808]	JMP      	5	; to 177
	172	[808]	LT       	0 -43 9	; 50 -
	173	[808]	JMP      	3	; to 177
	174	[808]	LT       	0 8 9
	175	[808]	JMP      	1	; to 177
	176	[809]	SETUPVAL 	5 6	; cover_imgid
	177	[811]	GETUPVAL 	12 3	; imagenum
	178	[811]	ADD      	12 12 -8	; - 1
	179	[811]	SETUPVAL 	12 3	; imagenum
	180	[818]	NEWTABLE 	3 0 0
	181	[819]	GETTABLE 	4 2 -39	; "width"
	182	[819]	TEST     	4 0 0
	183	[819]	JMP      	9	; to 193
	184	[820]	GETGLOBAL	4 -41	; table
	185	[820]	GETTABLE 	4 4 -42	; "insert"
	186	[820]	MOVE     	5 3
	187	[820]	GETGLOBAL	6 -23	; string
	188	[820]	GETTABLE 	6 6 -24	; "format"
	189	[820]	LOADK    	7 -44	; "width: %spx"
	190	[820]	GETTABLE 	8 2 -39	; "width"
	191	[820]	CALL     	6 3 0
	192	[820]	CALL     	4 0 1
	193	[822]	GETTABLE 	4 2 -40	; "height"
	194	[822]	TEST     	4 0 0
	195	[822]	JMP      	9	; to 205
	196	[823]	GETGLOBAL	4 -41	; table
	197	[823]	GETTABLE 	4 4 -42	; "insert"
	198	[823]	MOVE     	5 3
	199	[823]	GETGLOBAL	6 -23	; string
	200	[823]	GETTABLE 	6 6 -24	; "format"
	201	[823]	LOADK    	7 -45	; "height: %spx"
	202	[823]	GETTABLE 	8 2 -40	; "height"
	203	[823]	CALL     	6 3 0
	204	[823]	CALL     	4 0 1
	205	[825]	GETGLOBAL	4 -41	; table
	206	[825]	GETTABLE 	4 4 -46	; "concat"
	207	[825]	MOVE     	5 3
	208	[825]	LOADK    	6 -47	; "; "
	209	[825]	CALL     	4 3 2
	210	[826]	GETGLOBAL	5 -23	; string
	211	[826]	GETTABLE 	5 5 -24	; "format"
	212	[826]	LOADK    	6 -48	; "<img src=\"%s\" style=\"%s\" alt=\"\"/>"
	213	[826]	GETTABLE 	7 2 -35	; "imgpath"
	214	[826]	MOVE     	8 4
	215	[826]	TAILCALL 	5 4 0
	216	[826]	RETURN   	5 0
	217	[827]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:1269,1272> (13 instructions, 52 bytes at 0x7ff95cc0a3a0)
2 params, 6 slots, 0 upvalues, 2 locals, 6 constants, 0 functions
	1	[1270]	SELF     	2 1 -1	; "gsub"
	2	[1270]	LOADK    	4 -2	; "%?.*"
	3	[1270]	LOADK    	5 -3	; ""
	4	[1270]	CALL     	2 4 2
	5	[1270]	MOVE     	1 2
	6	[1271]	GETGLOBAL	2 -4	; string
	7	[1271]	GETTABLE 	2 2 -5	; "format"
	8	[1271]	LOADK    	3 -6	; "href=\"https://%s.wikipedia.org/wiki/%s\""
	9	[1271]	MOVE     	4 0
	10	[1271]	MOVE     	5 1
	11	[1271]	TAILCALL 	2 4 0
	12	[1271]	RETURN   	2 0
	13	[1272]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:1275,1278> (13 instructions, 52 bytes at 0x7ff95cc0fb90)
1 param, 5 slots, 1 upvalue, 1 local, 6 constants, 0 functions
	1	[1276]	SELF     	1 0 -1	; "gsub"
	2	[1276]	LOADK    	3 -2	; "%?.*"
	3	[1276]	LOADK    	4 -3	; ""
	4	[1276]	CALL     	1 4 2
	5	[1276]	MOVE     	0 1
	6	[1277]	GETGLOBAL	1 -4	; string
	7	[1277]	GETTABLE 	1 1 -5	; "format"
	8	[1277]	LOADK    	2 -6	; "href=\"%s/wiki/%s\""
	9	[1277]	GETUPVAL 	3 0	; wiki_base_url
	10	[1277]	MOVE     	4 0
	11	[1277]	TAILCALL 	1 4 0
	12	[1277]	RETURN   	1 0
	13	[1278]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:1414,1435> (14 instructions, 56 bytes at 0x7ff95cc10a70)
5 params, 9 slots, 1 upvalue, 6 locals, 3 constants, 1 function
	1	[1419]	GETGLOBAL	5 -1	; require
	2	[1419]	LOADK    	6 -2	; "ui/trapper"
	3	[1419]	CALL     	5 2 2
	4	[1420]	SELF     	6 5 -3	; "wrap"
	5	[1434]	CLOSURE  	8 0	; 0x7ff95cc10cb0
	6	[1434]	MOVE     	0 5
	7	[1434]	MOVE     	0 0
	8	[1434]	MOVE     	0 1
	9	[1434]	MOVE     	0 2
	10	[1434]	MOVE     	0 3
	11	[1434]	MOVE     	0 4
	12	[1434]	GETUPVAL 	0 0	; logger
	13	[1420]	CALL     	6 3 1
	14	[1435]	RETURN   	0 1

function <./frontend/ui/wikipedia.lua:1420,1434> (34 instructions, 136 bytes at 0x7ff95cc10cb0)
0 params, 7 slots, 7 upvalues, 2 locals, 7 constants, 0 functions
	1	[1421]	GETUPVAL 	0 0	; Trapper
	2	[1421]	SELF     	0 0 -1	; "setPausedText"
	3	[1421]	LOADK    	2 -2	; "Download paused"
	4	[1421]	CALL     	0 3 1
	5	[1426]	GETGLOBAL	0 -3	; pcall
	6	[1426]	GETUPVAL 	1 1	; self
	7	[1426]	GETTABLE 	1 1 -4	; "createEpub"
	8	[1426]	GETUPVAL 	2 1	; self
	9	[1426]	GETUPVAL 	3 2	; epub_path
	10	[1426]	GETUPVAL 	4 3	; page
	11	[1426]	GETUPVAL 	5 4	; lang
	12	[1426]	LOADBOOL 	6 1 0
	13	[1426]	CALL     	0 7 3
	14	[1427]	TEST     	0 0 0
	15	[1427]	JMP      	6	; to 22
	16	[1427]	TEST     	1 0 0
	17	[1427]	JMP      	4	; to 22
	18	[1428]	GETUPVAL 	2 5	; result_callback
	19	[1428]	LOADBOOL 	3 1 0
	20	[1428]	CALL     	2 2 1
	21	[1428]	JMP      	12	; to 34
	22	[1430]	GETUPVAL 	2 0	; Trapper
	23	[1430]	SELF     	2 2 -5	; "reset"
	24	[1430]	CALL     	2 2 1
	25	[1431]	GETUPVAL 	2 6	; logger
	26	[1431]	GETTABLE 	2 2 -6	; "warn"
	27	[1431]	LOADK    	3 -7	; "Wikipedia.createEpub pcall:"
	28	[1431]	MOVE     	4 0
	29	[1431]	MOVE     	5 1
	30	[1431]	CALL     	2 4 1
	31	[1432]	GETUPVAL 	2 5	; result_callback
	32	[1432]	LOADBOOL 	3 0 0
	33	[1432]	CALL     	2 2 1
	34	[1434]	RETURN   	0 1
